                                  _   _ ____  _
                              ___| | | |  _ \| |
                             / __| | | | |_) | |
                            | (__| |_| |  _ <| |___
                             \___|\___/|_| \_\_____|

                                  Changelog

Daniel Stenberg (16 Jun 2017)
- dist: add the fuzz dir to the tarball

- configure: disable nghttp2 too if HTTP has been disabled

- http-proxy: fix build with --disable-proxy or --disable-http
  
  Reported-by: Dan Fandrich

- fuzz/README: document how to build
  
  Fixes #1476

- [Frederik B brought this change]

  fuzz: corpora file structure, initial commit

- [Frederik B brought this change]

  fuzz: bring oss-fuzz initial code converted to C89

- http-proxy: only attempt FTP over HTTP proxy
  
  ... all other non-HTTP protocol schemes are now defaulting to "tunnel
  trough" mode if a HTTP proxy is specified. In reality there are no HTTP
  proxies out there that allow those other schemes.
  
  Assisted-by: Ray Satiro, Michael Kaufmann
  
  Closes #1505

- TODO: the generated include file is gone
  
  ... since commit 73a2fcea0b

- curl_setup.h: error out on CURL_WANTS_CA_BUNDLE_ENV use
  
  ... to make it really apparent if there's any user using this on purpose.
  
  Suggested-by: Jay Satiro
  
  Closes #1542

- lib/curl_setup.h: remove CURL_WANTS_CA_BUNDLE_ENV
  
  When this define was set, libcurl would check the environment variable
  named CURL_CA_BUNDLE at run-time and use that CA cert bundle. This
  feature was only defined by the watcom and m32 makefiles and caused
  inconsistent behaviours among libcurls built on different platforms.
  
  The curl tool does already feature its own similar logic and the library
  does not really need it, and it isn't documented libcurl behavior. So
  this change removes it.
  
  Ref: #1538

- test1147: verify -H on a file

- curl: allow --header and --proxy-header read from file
  
  So many headers can be provided as @filename.
  
  Suggested-by: Timothe Litt
  
  Closes #1486

- RELEASE-NOTES: synced with 2ad80eec5

- curl/curlver.h: start working on 7.55.0

- http-proxy: do the HTTP CONNECT process entirely non-blocking
  
  Mentioned as a problem since 2007 (8f87c15bdac63) and of course it
  existed even before that.
  
  Closes #1547

- progress: let "current speed" be UL + DL speeds combined
  
  Bug #1556
  Reported-by: Paul Harris
  Closes #1559

Marcel Raad (14 Jun 2017)
- system.h: fix MinGW build
  
  CURLSYS_PULL_WS2TCPIP_H got renamed to CURL_PULL_WS2TCPIP_H in commit
  73a2fcea0b4adea6ba342cd7ed1149782c214ae3.

Daniel Stenberg (14 Jun 2017)
- timers: store internal time stamps as time_t instead of doubles
  
  This gives us accurate precision and it allows us to avoid storing "no
  time" for systems with too low timer resolution as we then bump the time
  up to 1 microsecond. Should fix test 573 on windows.
  
  Remove the now unused curlx_tvdiff_secs() function.
  
  Maintains the external getinfo() API with using doubles.
  
  Fixes #1531

- dist: make the hugehelp.c not get regenerated unnecessarily
  
  The maketgz script now makes sure the generated hugehelp.c file in the
  tarball is newer than the generated curl.1 man page, so that it doesn't
  have to get unnecessarily rebuilt first thing in a typical build. It
  thus also removes the need for perl to build off a plain release
  tarball.
  
  Fixes #1565

- includes: remove curl/curlbuild.h and curl/curlrules.h
  
  Rely entirely on curl/system.h now.
  
  Introduced in Aug 2008 with commit 14240e9e109f. Now gone.
  
  Fixes #1456

Version 7.54.1 (14 Jun 2017)

Daniel Stenberg (14 Jun 2017)
- release: 7.54.1

Dan Fandrich (13 Jun 2017)
- mk-lib1521.pl: updated to match the test changes in 916ec30a

Daniel Stenberg (13 Jun 2017)
- [Stuart Henderson brought this change]

  libressl: OCSP and intermediate certs workaround no longer needed
  
  lib/vtls/openssl.c has a workaround for a bug with OCSP responses signed
  by intermediate certs, this was fixed in LibreSSL in
  https://github.com/libressl-portable/openbsd/commit/912c64f68f7ac4f225b7d1fdc8fbd43168912ba0
  
  Bug: https://curl.haxx.se/mail/lib-2017-06/0038.html

- url: fix buffer overwrite with file protocol (CVE-2017-9502)
  
  Bug: https://github.com/curl/curl/issues/1540
  Advisory: https://curl.haxx.se/docs/adv_20170614.html
  
  Assisted-by: Ray Satiro
  Reported-by: Marcel Raad

- urlglob: fix division by zero
  
  The multiply() function that is used to avoid integer overflows, was
  itself reason for a possible division by zero error when passed a
  specially formatted glob.
  
  Reported-by: GwanYeong Kim

- configure: update the copyright year in the output

- [ygrek brought this change]

  BINDINGS: update SP-Forth and OCaml urls

Michael Kaufmann (11 Jun 2017)
- FindWin32CACert: Use a temporary buffer on the stack
  
  Don't malloc() the temporary buffer, and use the correct type:
  SearchPath() works with TCHAR, but SearchPathA() works with char.
  Set the buffer size to MAX_PATH, because the terminating null byte
  is already included in MAX_PATH.
  
  Reviewed-by: Daniel Stenberg
  Reviewed-by: Marcel Raad
  
  Closes #1548

Dan Fandrich (11 Jun 2017)
- test1521: fixed OOM handling

Daniel Stenberg (9 Jun 2017)
- RELEASE-PROCEDURE: updated future release dates

- [Paul Harris brought this change]

  gitignore: ignore all vim swap files
  
  Closes #1561

- lib1521: fix compiler warnings on the use of bad 'long' values
  
  Reported-by: Marcel Raad
  Bug: https://github.com/curl/curl/commit/cccac4fb2b20d6ed87da7978408c3ecacc464fe4#commitcomment-22453387

- setopt: check CURLOPT_ADDRESS_SCOPE option range
  
  ... and return error instead of triggering an assert() when being way
  out of range.

Jay Satiro (8 Jun 2017)
- [TheAssassin brought this change]

  cmake: Fix inconsistency regarding mbed TLS include directory
  
  Previously, one had to set MBEDTLS_INCLUDE_DIR to make CMake find the
  headers, but the system complained that mbed TLS wasn't found due to
  MBEDTLS_INCLUDE_DIRS (note the trailing s) was not set. This commit
  attempts to fix that.
  
  Closes https://github.com/curl/curl/pull/1541

Daniel Stenberg (8 Jun 2017)
- [Ryuichi KAWAMATA brought this change]

  examples/multi-uv.c: fix deprecated symbol
  
  Closes #1557

- asyn-ares: s/Curl_expire_latest/Curl_expire

- expire: remove Curl_expire_latest()
  
  With the introduction of expire IDs and the fact that existing timers
  can be removed now and thus never expire, the concept with adding a
  "latest" timer is not working anymore as it risks to not expire at all.
  
  So, to be certain the timers actually are in line and will expire, the
  plain Curl_expire() needs to be used. The _latest() function was added
  as a sort of shortcut in the past that's quite simply not necessary
  anymore.
  
  Follow-up to 31b39c40cf90
  
  Reported-by: Paul Harris
  
  Closes #1555

- [Chris Carlmar brought this change]

  configure: fix link with librtmp when specifying path
  
  Bug: https://curl.haxx.se/mail/lib-2017-06/0017.html

- file: make speedcheck use current time for checks
  
  ... as it would previously just get the "now" timestamp before the
  transfer starts and then not update it again.
  
  Closes #1550

- metalink: remove unused printf() argument

- travis: let some builds *not* use --enable-debug
  
  typecheck-gcc and other things require optimized builds
  
  Closes #1544

- README.md: show the coverall coverage on github

- lib1521: fix compiler warnings

- test1521: make the code < 80 columns wide

- test1121: use stricter types to work with typcheck-gcc

- typecheck-gcc: allow CURLOPT_STDERR to be NULL too

- test1521: test *all* curl_easy_setopt options
  
  mk-lib1521.pl generates a test program (lib1521.c) that calls
  curl_easy_setopt() for every known option with a few typical values to
  make sure they work (ignoring the return codes).
  
  Some small changes were necessary to avoid asserts and NULL accesses
  when doing this.
  
  The perl script needs to be manually rerun when we add new options.
  
  Closes #1543

Dan Fandrich (5 Jun 2017)
- test1538: added "verbose logs" keyword
  
  These error messages are not displayed with --disable-verbose

Daniel Stenberg (5 Jun 2017)
- test1262: verify ftp download with -z for "if older than this"

Marcel Raad (5 Jun 2017)
- curl_ntlm_core: use Curl_raw_toupper instead of toupper
  
  This was the only remaining use of toupper in the entire source code.
  
  Suggested-by: Daniel Stenberg

Daniel Stenberg (4 Jun 2017)
- RELEASE-NOTES: synced with 65ba92650

Marcel Raad (4 Jun 2017)
- curl_ntlm_core: pass unsigned char to toupper
  
  Otherwise, clang on Cygwin64 warns:
  curl_ntlm_core.c:525:35: error: array subscript is of type 'char'
  [-Werror,-Wchar-subscripts]
      dest[2 * i] = (unsigned char)(toupper(src[i]));
                                    ^~~~~~~~~~~~~~~
  /usr/include/ctype.h:152:25: note: expanded from macro 'toupper'
        (void) __CTYPE_PTR[__x]; (toupper) (__x);})
                          ^~~~

Jay Satiro (3 Jun 2017)
- [Mahmoud Samir Fayed brought this change]

  BINDINGS: add Ring binding
  
  Closes https://github.com/curl/curl/pull/1539

Daniel Stenberg (4 Jun 2017)
- CONTRIBUTE.md: mention tests done on pull requests

- travis: add coverage, distcheck and cmake builds
  
  Closes #1534

Marcel Raad (3 Jun 2017)
- libtest: fix int-in-bool-context warnings
  
  GCC 7 complained:
  ‘*’ in boolean context, suggest ‘&&’ instead [-Wint-in-bool-context]

- libtest: fix implicit-fallthrough warnings with GCC 7

- x509asn1: fix implicit-fallthrough warning with GCC 7

- curl_sasl: fix unused-variable warning
  
  This fixes the following warning with CURL_DISABLE_CRYPTO_AUTH,
  as seen in the autobuilds:
  
  curl_sasl.c:417:9: warning: unused variable 'serverdata'
  [-Wunused-variable]

Daniel Stenberg (3 Jun 2017)
- updatemanpages.pl: error out on too old git version

Marcel Raad (3 Jun 2017)
- cyassl: define build macros before including ssl.h
  
  cyassl/ssl.h needs the macros from cyassl/options.h, so define them
  before including cyassl/ssl.h the first time, which happens in
  urldata.h.
  This broke the build on Ubuntu Xenial, which comes with WolfSSL 3.4.8
  and therefore redefines the symbols from cyassl/options.h instead of
  including the header.
  
  Closes https://github.com/curl/curl/pull/1536

Daniel Stenberg (3 Jun 2017)
- tool_util: remove unused tvdiff_secs and remove tool_ prefix
  
  Closes #1532

- dedotdot: fixed output for ".." and "." only input
  
  Found when updating test 1395, which I did to increase test coverage of
  this source file...
  
  Closes #1535

Marcel Raad (2 Jun 2017)
- mbedtls: make TU-local variable static
  
  mbedtls_x509_crt_profile_fr is only used locally.
  This fixes a missing-variable-declarations warning with clang.

- MD(4|5): silence cast-align clang warning
  
  Unaligned access is on purpose here and the warning is harmless on
  affected architectures. GCC knows that, while clang warns on all
  architectures.

Daniel Stenberg (2 Jun 2017)
- test1538: fix typo

- test1538: verify the libcurl strerror API calls

- curl_endian: remove unused functions
  
  Closes #1529

- test1537: dedicated tests of the URL (un)escape API calls
  
  Closes #1530

- coverage: run event tests too
  
  ... the torture ones are commented out only because they are slooooow.

- build: provide easy code coverage measuring
  
  Closes #1528

- typecheck-gcc.h: check CURLINFO_CERTINFO
  
  ... and update the certinfo.c example accordingly.
  
  Fixes https://github.com/curl/curl/issues/846

- typecheck-gcc.h: check CURLINFO_TLS_SSL_PTR and CURLINFO_TLS_SESSION
  
  ... so that they get the required "struct curl_tlssessioninfo **"
  arguments.

- typecheck-gcc.h: separate getinfo slist checks from other pointers
  
  Fixes #1524

Marcel Raad (1 Jun 2017)
- curl-compilers.m4: escape square brackets in regex
  
  Otherwise, they are removed in the final configure file.
  Also changed sed to "$SED" like in most other calls in this file.

- curl-compilers.m4: fix compiler_num for clang
  
  "clang -dumpversion" always returns "4.2.1", the GCC version that clang
  was initially compatible to. Use "clang -v" instead, which returns the
  actual clang version.
  
  Fixes https://github.com/curl/curl/issues/1522
  Closes https://github.com/curl/curl/pull/1523

Daniel Stenberg (31 May 2017)
- examples/externalsocket.c: s/closesocket/closecb
  
  ... since closesocket is a function in WinSock.
  
  Reported-by: Marcel Raad
  Bug: https://github.com/curl/curl/commit/55fcb8485914700132fd1854c9509b66c955efbe#co
  mmitcomment-22347818

Marcel Raad (31 May 2017)
- lib583: fix compiler warning
  
  Use CURLMcode for variable 'res' and cast to int where necessary
  instead of the other way around. Other tests do the same.
  
  This fixes the following clang warning:
  lib583.c:68:15: warning: cast from function call of type 'CURLMcode' to
  non-matching type 'int' [-Wbad-function-cast]

Daniel Stenberg (31 May 2017)
- CURLOPT_SSH_KEY*.3: typos
  
  Reported-by: Gisle Vanem

- CURLOPT_STREAM_DEPENDS.3: typo

- CURLOPT_FNMATCH_FUNCTION.3: also modified example to avoid fcpp issues

- CURLOPT_FNMATCH_DATA.3: modified example to avoid fcpp issues

- opts: more than 100 more examples for man pages...

- libtest/lib574.c: use correct callback proto

- examples/sampleconv.c: indent changes, made callbacks static

- example/externalsocket.c: make it use CLOSESOCKETFUNCTION too

Marcel Raad (31 May 2017)
- curl-compilers.m4: enable -Wshift-sign-overflow for clang
  
  clang 2.9+ supports -Wshift-sign-overflow, which warns about undefined
  behavior on signed left shifts when shifting by too many places.
  
  Ref: https://github.com/curl/curl/issues/1516
  Closes https://github.com/curl/curl/pull/1517

Daniel Stenberg (31 May 2017)
- CURLOPT_PROXY.3: fix test 1140 breakage

Jay Satiro (31 May 2017)
- build-wolfssl: Sync config with wolfSSL 3.11
  
  wolfSSL configure script relevant changes from 3.10 to 3.11:
  
  - Async threading support added; disabled by default without async
    crypto, which continues to be disabled by default.
  
  wolfSSL configure script relevant changes from 3.11 to 3.11.1 (beta):
  
  - TLS 1.3 beta support added; disabled by default.
  
  For experimenting I put in a comment block the defines needed to enable
  TLS 1.3 support (ie the equivalent of --enable-tls13).

Daniel Stenberg (30 May 2017)
- opts: more examples added to man pages

- docs: clarify NO_PROXY further
  
  Fixes #1208

- CURLOPT_PROXY.3: describe the environment variables more

- transfer: init the infilesize from the postfields...
  
  ... with a strlen() if no size was set, and do this in the pretransfer
  function so that the info is set early. Otherwise, the default strlen()
  done on the POSTFIELDS data never sets state.infilesize.
  
  Reported-by: Vincas Razma
  Bug: #1294

Jay Satiro (29 May 2017)
- test557: fix ubsan runtime error due to int left shift
  
  - Test curl_msnprintf negative int width arg using INT_MIN instead of
    1 << 31 which is undefined behavior.
  
  Closes https://github.com/curl/curl/issues/1516

- mbedtls: fix variable shadow warning
  
  vtls/mbedtls.c:804:69: warning: declaration of 'entropy' shadows a global declaration [-Wshadow]
   CURLcode Curl_mbedtls_random(struct Curl_easy *data, unsigned char *entropy,
                                                                       ^~~~~~~

Daniel Stenberg (29 May 2017)
- RELEASE-NOTES: synced with 3aaac8c2f

Dan Fandrich (28 May 2017)
- tests: removed some redundant empty <stdout> sections

- runtests.pl: removed <precommand> feature
  
  This hasn't been used in over a decade. <precheck> can still be used to
  run commands before the main test.

Daniel Stenberg (27 May 2017)
- opts: more examples added in option man pages

Dan Fandrich (27 May 2017)
- runtests.pl: removed unused arguments to valgrindparse

Daniel Stenberg (25 May 2017)
- TODO: 6.4 is done, send telnet data in chunks

- [Phil Crump brought this change]

  docs/CURLOPT_SSLVERSION.3: Correct define name in example
  
  Closes #1509

- ssh: fix 'left' may be used uninitialized
  
  follow-up to f31760e63b4e
  
  Reported-by: Michael Kaufmann
  Bug: https://github.com/curl/curl/pull/1495#issuecomment-303982793

Michael Kaufmann (24 May 2017)
- time: fix type conversions and compiler warnings
  
  Fix bugs and compiler warnings on systems with 32-bit long and
  64-bit time_t.
  
  Reviewed-by: Daniel Stenberg
  
  Closes #1499

Marcel Raad (24 May 2017)
- examples: fix Wimplicit-fallthrough warnings
  
  This is contained in -Wextra with GCC 7.

Daniel Stenberg (24 May 2017)
- [Anatol Belski brought this change]

  winbuild: fix the nghttp2 build
  
  Closes #1321

GitHub (24 May 2017)
- [Sergei Nikulov brought this change]

  LDAP: documentation update per #878 changes (#1506)

Daniel Stenberg (23 May 2017)
- redirect: store the "would redirect to" URL when max redirs is reached
  
  Test 1261 added to verify.
  
  Reported-by: Lloyd Fournier
  
  Fixes #1489
  Closes #1497

GitHub (24 May 2017)
- [Sergei Nikulov brought this change]

  LDAP: fixed checksrc issue

- [Sergei Nikulov brought this change]

  LDAP: using ldap_bind_s on Windows with methods (#878)
  
  * LDAP: using ldap_bind_s on Windows with methods(BASIC/DIGEST/NTLM/AUTONEG)
  
  * ldap: updated per build options handling
  
  * ldap: fixed logic for auth selection

Daniel Stenberg (23 May 2017)
- [Akhil Kedia brought this change]

  cmake: fix build on Ubuntu 14.04
  
  Fixed a syntax error with setting cache variables (The type and
  docstring were missing), resulting in build errors.  Quoted the
  CURL_CA_PATH and CURL_CA_BUNDLE otherwise the path was written without
  quotes in C code, resulting in build errors.
  
  Closes #1503
  
  Signed-off-by: Akhil <akhil.kedia@samsung.com>

- url: fix declaration of 'pipe' shadows a global declaration
  
  follow-up to 4cdb1be8246c

Kamil Dudka (22 May 2017)
- memdebug: fix compilation failure
  
  .... caused by a typo in the last commit (fixing issue #1504):
  
  memdebug.c: In function ‘curl_fclose’:
  memdebug.c:444:3: error: implicit declaration of function
  ‘DEBUGDEBUGASSERT’ [-Werror=implicit-function-declaration]

Daniel Stenberg (22 May 2017)
- assert: avoid, use DEBUGASSERT instead!
  
  ... as it does extra checks to actually work.
  
  Reported-by: jonrumsey at github
  Fixes #1504

- [Simon Warta brought this change]

  cmake: remove unused variables: GNUTLS_ENABLED, NSS_ENABLED

- [Simon Warta brought this change]

  cmake: remove CURL_CA_BUNDLE from cmake TODO

- [Simon Warta brought this change]

  cmake: auto detection of CURL_CA_BUNDLE/CURL_CA_PATH
  
  Closes #1461

- [Simon Warta brought this change]

  cmake: add CURL_CA_BUNDLE/CURL_CA_FALLBACK/CURL_CA_PATH options

- [Simon Warta brought this change]

  cmake: Add CURL_CA_FALLBACK to curl_config.h.cmake
  
  This is for symmetry with the autoconf generated curl_config.h.in

- RELEASE-NOTES: synced with 052a14e3c

Michael Kaufmann (20 May 2017)
- tests: stabilize test 1034
  
  Pass the invalid domain name on stdin. On some systems, the test
  framework cannot pass invalid UTF-8 sequences on the command line.
  
  Closes #1488

Daniel Stenberg (20 May 2017)
- ssh: ignore timeouts during disconnect
  
  ... as otherwise it risks not cleaning up the libssh2 handle properly
  which leads to memory leak!
  
  Assisted-by: Joel Depooter
  
  Closes #1495
  Closes #1479
  
  Bug: https://curl.haxx.se/mail/lib-2017-04/0024.html

- ghiper.c/hiperfifo.c: add comment about missing timer functionality
  
  It takes someone to read up on the APIs of these libraries to figure out
  how to do this correctly.
  
  Reported-by: Michael Kaufmann
  
  Closes #1253

- asiohiper.cpp / evhiperfifo.c: deal with negative timerfunction input
  
  That means delete the timer.
  
  Reported-by: Michael Kaufmann
  Ref: #1253

- cmdline-opts/write-out.d: s/-L/--location
  
  Since the man page generator wants the long option name version to
  generate the proper output.

- [Bernhard M. Wiedemann brought this change]

  mkhelp.pl: do not add current time into curl binary
  
  ... as part of hugehelpgz rodata to make build reproducible.
  
  See https://reproducible-builds.org/ for why this is good
  
  Closes #1490

- oauth2-bearer.d: mention the <token> argument

Nick Zitzmann (16 May 2017)
- darwinssl: Fix exception when processing a client-side certificate file
  if no error was raised by the API but the SecIdentityRef was null
  
  Fixes #1450

Daniel Stenberg (16 May 2017)
- curl_sasl: fix build error with CURL_DISABLE_CRYPTO_AUTH + USE_NTLM
  
  Reported-by: wyattoday at github
  Fixes #1487

- docs/cmdline-opts/config.d: edit for language

- RELEASE-NOTES: synced with eb16305e6

- [moparisthebest brought this change]

  SecureTransport/DarwinSSL: Implement public key pinning
  
  Closes #1400

- man pages: fix example syntax errors
  
  follow-up to 5ddad099b42b50

- docs/libcurl/opts: added more examples in man pages

- CURLOPT_HTTPPROXYTUNNEL: clarify, add example

- curl: show the libcurl release date in --version output
  
  ... and support and additional "security patched" date for those who
  enhance older versions that way. Pass on the define CURL_PATCHSTAMP with
  a date for that.
  
  Building with non-release headers shows the date as [unreleased].
  
  Also: this changes the date format generated in the curlver.h file to be
  "YYYY-MM-DD" (no name of the day or month, no time, no time zone) to
  make it easier on the eye and easier to parse. Example (new) date
  string: 2017-05-09
  
  Suggested-by: Brian Childs
  
  Closes #1474

Dan Fandrich (13 May 2017)
- url.c: add a compile-time check that CURL_MAX_WRITE_SIZE is large enough
  
  Some code (e.g. Curl_fillreadbuffer) assumes that this buffer is not
  exceedingly tiny and will break if it is. This same check is already
  done at run time in the CURLOPT_BUFFERSIZE option.

- lib510: don't write past the end of the buffer if it's too small

- tests: added missing keywords "chunked Transfer-Encoding"

Daniel Stenberg (13 May 2017)
- THANKS: add a few missing names
  
  ... I found them in the commit logs from the early years

Dan Fandrich (13 May 2017)
- tests: made a couple of prechecks consistent with others
  
  Also removed a TODO suggesting caching the precheck results. Tests
  showed this would save about 0.1 sec on the total test run time on a
  relatively modern system, an unnoticeable gain at the cost of longer and
  more complicated code. There would also be a danger that a cached test
  result would be inappropriately returned, such as when other test
  dependencies (like environment variables) are different or when the
  precheck causes side effects (like filesystem changes).

Daniel Stenberg (12 May 2017)
- FAQ: add 7.4 to toc
  
  ... and delete trailing whitespace
  
  Fixes #1484

- multi: remove leftover debug infof() calls from e9fd794a6

- pipeline: fix mistakenly trying to pipeline POSTs
  
  The function IsPipeliningPossible() would return TRUE if either
  pipelining OR HTTP/2 were possible on a connection, which would lead to
  it returning TRUE even for POSTs on HTTP/1 connections.
  
  It now returns a bitmask so that the caller can differentiate which kind
  the connection allows.
  
  Fixes #1481
  Closes #1483
  Reported-by: stootill at github

Jay Satiro (12 May 2017)
- [Ron Eldor brought this change]

  mbedtls: Support server renegotiation request
  
  Tested with servers: IIS 7.5; OpenSSL 1.0.2.
  
  Closes https://github.com/curl/curl/pull/1475

Marcel Raad (11 May 2017)
- cookie_interface: fix -Wcomma warning
  
  clang 5.0 complains:
  possible misuse of comma operator here [-Wcomma]

- formdata: fix -Wcomma warning
  
  clang 5.0 complains:
  possible misuse of comma operator here [-Wcomma]
  
  Change the comma to a semicolon to fix that.

Daniel Stenberg (10 May 2017)
- multi: use a fixed array of timers instead of malloc
  
  ... since the total amount is low this is faster, easier and reduces
  memory overhead.
  
  Also, Curl_expire_done() can now mark an expire timeout as done so that
  it never times out.
  
  Closes #1472

- multi: assign IDs to all timers and make each timer singleton
  
   A) reduces the timeout lists drastically
  
   B) prevents a lot of superfluous loops for timers that expires "in vain"
      when it has actually already been extended to fire later on

- [Richard Hsu brought this change]

  tests: remove superfluous test 1399
  
  @MarcelRaad noted that `test1399` causes infinite loop on MinGW.
  Looking into this, seems like it is related to how Windows handles
  CRLF. See https://github.com/curl/curl/commit/9e093f by @mback2k.
  Removing `test1399` as it's identical to `test1326` then with such a
  fix.
  
  Test 1399 was broughy by commit 862b02f8947039e
  
  Closes #1478

Dan Fandrich (9 May 2017)
- tests: make test file names more unique
  
  Include the test number in the names of files written out by tests to
  reduce the chance of accidental duplication and to make it more clear
  which test is associated with which file.

- tests: removed redundant --trace-ascii arguments
  
  This is already added by the test suite; it's not clear why all these
  tests had it, unless it's cargo-culting.

Marcel Raad (9 May 2017)
- tool: fix remaining -Wcast-qual warnings
  
  Avoid casting away low-level const.

Daniel Stenberg (9 May 2017)
- formboundary: convert assert into run-time check
  
  ... to really make sure the boundary fits in the target buffer.
  
  Fixes unused parameter 'buflen' warning.
  
  Reported-by: Michael Kaufmann
  Bug: https://github.com/curl/curl/pull/1468#issuecomment-300078754

Dan Fandrich (9 May 2017)
- tests: list the primary server first in the server section

Daniel Stenberg (8 May 2017)
- curl: generate the --help output
  
  ... using the docs/cmdline-opts/gen.pl script, so that we get all the
  command line option documentation from the same source.
  
  The generation of the list has to be done manually and pasted into the
  source code.
  
  Closes #1465

- tests: updated for modified fake random

- [Jay Satiro brought this change]

  rand: treat fake entropy the same regardless of endianness
  
  When the random seed is purposely made predictable for testing purposes
  by using the CURL_ENTROPY environment variable, process that data in an
  endian agnostic way so the the initial random seed is the same
  regardless of endianness.
  
  - Change Curl_rand to write to a char array instead of int array.
  
  - Add Curl_rand_hex to write random hex characters to a buffer.
  
  Fixes #1315
  Closes #1468
  
  Co-authored-by: Daniel Stenberg
  Reported-by: Michael Kaufmann

Dan Fandrich (8 May 2017)
- tests: give each stunnel.conf file a unique name
  
  Otherwise, subsequent uses of stunnel overwrite the configuration file
  of previous invocations so they can no longer be inspected.

Marcel Raad (8 May 2017)
- tool_msgs: remove wrong cast
  
  Commit 481e0de00a9003b9c5220b120e3fc302d9b0932d changed the variable
  type from int to size_t, so don't cast the result of strlen to int
  anymore.

- tftpd: fix signed/unsigned mismatch warnings
  
  alarm's argument is unsigned.

- libtest: fix MinGW-w64 warnings
  
  long is 32 bits while size_t is 64 bits on MinGW-w64, so
  typecheck-gcc.h complains when using size_t for a long option.
  Also, curl_socket_t is unsigned long long rather than int.

Daniel Stenberg (8 May 2017)
- curl.1: depend the build on the Makefile.inc too
  
  ... to also make it update when we remove files, like we did for
  --environment in commit a8e388dd1095.

- RELEASE-NOTES: synced with e3f84efc32d6b01a

- runtests: fix "use of undefined value" warning in -R handling

Marcel Raad (8 May 2017)
- test537: use correct variable type
  
  Avoids narrowing conversion warnings because rlim_t is usually
  unsigned long.
  
  Closes https://github.com/curl/curl/pull/1469

- sendrecv: fix MinGW-w64 warning
  
  The first argument to select is an int, while curl_socket_t is
  unsigned long long when using WinSock. It's ignored anyway [1].
  
  [1] https://msdn.microsoft.com/en-us/library/windows/desktop/ms740141.aspx

- tool_parsecfg: fix -Wcast-qual warning
  
  Don't convert string literal to char * before assigning it to
  const char *.

- asyn-thread: fix unused macro warnings
  
  Don't do anything in this file if CURLRES_THREADED is not defined.

- tftp: silence bad-function-cast warning
  
  The cases this warns about are handled elsewhere, so just use an
  intermediate variable to silence the warning.

Daniel Stenberg (7 May 2017)
- [canavan at github brought this change]

  buildconf: fix hang on IRIX
  
  Apparently, /usr/bin/m4 ignores the --version parameter and waits for
  input from stdin.
  
  Fixes #1471

- opts: fix bad example formatting \n => \\n
  
  ...to render properly nroff.

- opts: examples added to 8 more libcurl option man pages

- curl: remove tool_writeenv.[ch]
  
  ... and USE_ENVIRONMENT and --environment. It was once added for RISC OS
  support and its platform specific behavior has been annoying ever
  since. Added in commit c3c8bbd3b2688da8e, mostly unchanged since
  then. Most probably not actually used for years.
  
  Closes #1463

Dan Fandrich (6 May 2017)
- runtests.pl: simplify the datacheck read section
  
  Also, document that numbered datacheck sections are possible.

Marcel Raad (5 May 2017)
- tests: fix -Wcast-qual warnings
  
  Avoid casting string literals to non-const char *.

Daniel Stenberg (5 May 2017)
- docs/opts: 24 more man pages now have examples

- docs/opts: 23 more man pages now have examples

- tests/server: run checksrc by default in debug-builds

- curl_slist_append.3: clarify a NULL input creates a new list

Marcel Raad (5 May 2017)
- unit1305: fix compiler warning
  
  calloc and ai_addrlen expect different (usually unsigned) types.

Daniel Stenberg (5 May 2017)
- runtests: use -R for random order
  
  Suggested-by: Dan Fandrich

- runtests: add -o to run test cases in scrambled order
  
  ... instead of numerical order.
  
  Closes #1466

Dan Fandrich (4 May 2017)
- sockfilt.c: shortened too long line

Marcel Raad (4 May 2017)
- tests/server: make string literals const
  
  assign string literals to const char * instead of char * in order to
  avoid a lot of these warnings:
  cast from 'const char *' to 'char *' drops const qualifier
  [-Wcast-qual]

Dan Fandrich (4 May 2017)
- schannel: return a more specific error code for SEC_E_UNTRUSTED_ROOT

- test557: set a known good numeric locale
  
  Windows does not allow setting the locale with environment variables (as
  the test attempted to do), so the test failed when run with a user
  locale that has a comma as radixchar. Changed the test to call
  setlocale() explicitly to ensure that a known working locale is set even
  on Windows.

Daniel Stenberg (4 May 2017)
- curl: fix warning "comma at end of enumerator list"

- test559: verify use of minimum CURLOPT_BUFFERSIZE

Marcel Raad (4 May 2017)
- curl_setup_once: use SEND_QUAL_ARG2 for swrite
  
  SEND_QUAL_ARG2 had to be set, but was never used. Use it in swrite to
  avoid warnings about casting away low-level const.
  
  Closes https://github.com/curl/curl/pull/1464

Daniel Stenberg (4 May 2017)
- CURLINFO_REDIRECT_URL.3: add example

- CURLINFO_EFFECTIVE_URL.3: add example

Marcel Raad (3 May 2017)
- lib: fix compiler warnings
  
  Fix the following warnings when building the tests by using the correct
  types:
  cast from 'const char *' to 'void *' drops const qualifier
  [-Wcast-qual]
  implicit conversion changes signedness [-Wsign-conversion]

- typecheck-gcc: add support for CURLINFO_SOCKET
  
  Closes https://github.com/curl/curl/pull/1452

- typecheck-gcc: add missing string options
  
  Closes https://github.com/curl/curl/pull/1452

Daniel Stenberg (3 May 2017)
- abstract-unix-socket.d: shorten the help text to fit within 79 cols

- RELEASE-NOTES: synced with 862b02f89

- [Richard Hsu brought this change]

  Telnet: Write full buffer instead of byte-by-byte
  
  Previous TODO wanting to write in chunks. We should support writing more
  at once since some TELNET servers may respond immediately upon first
  byte written such as WHOIS servers.
  
  Closes #1389

- curl: non-boolean command line args reject --no- prefixes
  
  ... and instead properly respond with an error message to the user
  instead of silently ignoring.
  
  Fixes #1453
  Closes #1458

Marcel Raad (2 May 2017)
- testpart: remove _MPRINTF_REPLACE
  
  Support for _MPRINTF_REPLACE in mprintf.h was removed in
  55452ebdff47f98bf3cc383f1dfc3623fcaefefd, replaced with curl_printf.h.

Dan Fandrich (2 May 2017)
- gtls: fixed a lingering BUFSIZE reference

Daniel Stenberg (2 May 2017)
- ssh: fix compiler warning from e40e9d7f0de

- url: let CURLOPT_BUFFERSIZE realloc to smaller sizes too
  
  Closes #1449

- BUFSIZE: rename to READBUFFER_*, make separate MASTERBUF_SIZE

- openssl: use local stack for temp storage

- sendf: remove use of BUFSIZE from debug data conversions
  
  The buffer can have other sizes.

- buffer: use data->set.buffer_size instead of BUFSIZE
  
  ... to properly use the dynamically set buffer size!

- krb5: use private buffer for temp string, not receive buffer

- upload: UPLOAD_BUFSIZE is now for the upload buffer

- unit1606: do not print/access buffer
  
  It was a wrong assumption that it could do that!

- http-proxy: use a dedicated CONNECT response buffer
  
  To make it suitably independent of the receive buffer and its flexible
  size.

- transfer: fix minor buffer_size mistake

- failf: use private buffer, don't clobber receive buffer

- pingpong: use the set buffer size

- http2: use the correct set buffer size

- http: don't clobber the receive buffer for timecond

- buffer_size: make sure it always has the correct size
  
  Removes the need for CURL_BUFSIZE

- file: use private buffer for C-L output
  
  ... instead of clobbering the download buffer.

- CURLOPT_BUFFERSIZE: 1024 bytes is now the minimum size
  
  The buffer is needed to receive FTP, HTTP CONNECT responses etc so
  already at this size things risk breaking and smaller is certainly not
  wise.

- ftp: use private buffer for temp storage, not receive buffer

- http: use private user:password output buffer
  
  Don't clobber the receive buffer.

Marcel Raad (1 May 2017)
- anyauthput: remove unused code
  
  The definition of TRUE was introduced in
  4a728747e6f8845e500910e397dfc99aaf4a7984 and is not used anymore since
  e664cd5826d43930fcc5b5dbaedbec94af33184b.
  The usage of intptr_t was removed in
  32e38b8f42477cf5ce3c3fef2fcc9db82f7fb7be.

Jay Satiro (1 May 2017)
- tool: Fix missing prototype warnings for CURL_DOES_CONVERSIONS
  
  - Include tool_convert.h where needed.
  
  Bug: https://github.com/curl/curl/issues/1460
  Reported-by: Gisle Vanem

- curl_setup: Ensure no more than one IDN lib is enabled
  
  Prior to this change it was possible for libcurl to be built with both
  Windows' native IDN lib (normaliz) and libidn2 enabled. It appears that
  doesn't offer any benefit --and could cause a bug-- since libcurl's IDN
  handling is written to use either one but not both.
  
  Bug: https://github.com/curl/curl/issues/1441#issuecomment-297689856
  Reported-by: Gisle Vanem

Marcel Raad (1 May 2017)
- getpart: use correct variable type
  
  This fixes the following clang warning:
  getpart.c:201:17: warning: cast from function call of type 'CURLcode'
  to non-matching type 'int' [-Wbad-function-cast]

- tests: declare TU-local variables static
  
  This fixes missing-variable-declarations warnings when building with
  clang.

- tool_cb_prg: fix double-promotion warning
  
  clang complains:
  tool_cb_prg.c:86:22: error: implicit conversion increases
  floating-point precision: 'float' to 'double'
  [-Werror,-Wdouble-promotion]
  
  Fix this by using a double instead of a float constant.

Dan Fandrich (1 May 2017)
- examples: fixed too long line and too long string warnings

Marcel Raad (30 Apr 2017)
- examples: declare TU-local variables static
  
  This fixes missing-variable-declarations warnings when building with
  clang.

- http2: declare TU-local variables static
  
  This fixes the following clang warnings:
  
  http2.c:184:27: error: no previous extern declaration for non-static
  variable 'Curl_handler_http2' [-Werror,-Wmissing-variable-declarations]
  http2.c:204:27: error: no previous extern declaration for non-static
  variable 'Curl_handler_http2_ssl'
  [-Werror,-Wmissing-variable-declarations]

Dan Fandrich (30 Apr 2017)
- unit1604: fixed indentation

- unit1604: fixed compilation under Windows, broken in the previous commit

- tests: fixed OOM handling of unit tests to abort test
  
  It's dangerous to continue to run the test when a memory alloc fails.

Marcel Raad (29 Apr 2017)
- curl_rtmp: fix missing-variable-declarations warnings
  
  clang complains:
  
  curl_rtmp.c:61:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmp' [-Werror,-Wmissing-variable-declarations]
  curl_rtmp.c:81:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmpt' [-Werror,-Wmissing-variable-declarations]
  curl_rtmp.c:101:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmpe' [-Werror,-Wmissing-variable-declarations]
  curl_rtmp.c:121:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmpte' [-Werror,-Wmissing-variable-declarations]
  curl_rtmp.c:141:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmps' [-Werror,-Wmissing-variable-declarations]
  curl_rtmp.c:161:27: error: no previous extern declaration for non-static variable 'Curl_handler_rtmpts' [-Werror,-Wmissing-variable-declarations]
  
  Fix this by including the header file.

Dan Fandrich (29 Apr 2017)
- url: fixed a memory leak on OOM while setting CURLOPT_BUFFERSIZE

- tests: added --remote-time tests for remaining protocols that support it

- runtests.pl: support multiline <postcheck> commands

- tool_operate: use utimes instead of obsolescent utime when available

- test1443: test --remote-time

- http-proxy: removed unused argument in CURL_DISABLE_PROXY case
  
  Missed in commit 55c3c02e

Daniel Stenberg (27 Apr 2017)
- cookie_interface.c: changed the other domain to example.com too

- cookie_interface.c: fix cookie domain so the example works

Dan Fandrich (26 Apr 2017)
- Makefile: fix make dist
  
  Commit 80a87e8a broke 'make dist' as it can't handle installing from
  absolute target names. Rearranged the dependencies so the absolute name
  is used for building but the relative name is use for distributing.

Marcel Raad (26 Apr 2017)
- lib: remove unused code
  
  This fixes the following clang warnings:
  macro is not used [-Wunused-macros]
  will never be executed [-Wunreachable-code]
  
  Closes https://github.com/curl/curl/pull/1448

Daniel Stenberg (26 Apr 2017)
- http-proxy: remove unused argument from Curl_proxyCONNECT()

- [Martin Kepplinger brought this change]

  url: declare get_protocol_family() static
  
  get_protocol_family() is not defined static even though there is a
  static local forward declaration. Let's simply make the definition match
  it's declaration.
  
  Bug: https://curl.haxx.se/mail/lib-2017-04/0127.html

- examples: ftpuploadfrommem.c
  
  Uploads data to an FTP site, directly from memory.
  
  Closes #1451

Kamil Dudka (25 Apr 2017)
- nss: load libnssckbi.so if no other trust is specified
  
  The module contains a more comprehensive set of trust information than
  supported by nss-pem, because libnssckbi.so also includes information
  about distrusted certificates.
  
  Reviewed-by: Kai Engert
  Closes #1414

- nss: factorize out nss_{un,}load_module to separate fncs
  
  No change of behavior is intended by this commit.

- nss: do not leak PKCS #11 slot while loading a key
  
  It could prevent nss-pem from being unloaded later on.
  
  Bug: https://bugzilla.redhat.com/1444860

Marcel Raad (25 Apr 2017)
- typecheck-gcc: fix _curl_is_slist_info
  
  Info values starting with CURLINFO_SOCKET expect a curl_socket_t, not a
  curl_slist argument.
  
  This fixes the following GCC warning when building the examples with
  --enable-optimize:
  
  ../../include/curl/typecheck-gcc.h:126:42: warning: call to
  ‘_curl_easy_getinfo_err_curl_slist’ declared with attribute warning:
  curl_easy_getinfo expects a pointer to 'struct curl_slist *' for this
  info [enabled by default]
  sendrecv.c:90:11: note: in expansion of macro ‘curl_easy_getinfo’
  res = curl_easy_getinfo(curl, CURLINFO_ACTIVESOCKET, &sockfd);
  
  Closes https://github.com/curl/curl/pull/1447

Daniel Stenberg (25 Apr 2017)
- curl: set a 100K buffer size by default
  
  Test command 'time curl http://localhost/80GB -so /dev/null' on a Debian
  Linux.
  
  Before (middle performing run out 9):
  
   real    0m28.078s
   user    0m11.240s
   sys     0m12.876s
  
  After (middle performing run out 9)
  
   real    0m26.356s (93.9%)
   user    0m5.324s  (47.4%)
   sys     0m8.368s  (65.0%)
  
  Also, doing SFTP over a 200 millsecond latency link is now about 6 times
  faster.
  
  Closes #1446

- transfer: remove 'uploadbuf' pointer and cleanup readwrite_upload()
  
  The data->req.uploadbuf struct member served no good purpose, instead we
  use ->state.uploadbuffer directly. It makes it clearer in the code which
  buffer that's being used.
  
  Removed the 'SingleRequest *' argument from the readwrite_upload() proto
  as it can be derived from the Curl_easy struct. Also made the code in
  the readwrite_upload() function use the 'k->' shortcut to all references
  to struct fields in 'data->req', which previously was made with a mix of
  both.

Jay Satiro (25 Apr 2017)
- configure: stop prepending to LDFLAGS, CPPFLAGS
  
  - Change prepends to appends because user's LDFLAGS and CPPFLAGS should
    always come first so they're searched before ours.
  
  Bug: https://github.com/curl/curl/issues/1420
  Reported-by: Helmut K. C. Tessarek

Marcel Raad (25 Apr 2017)
- if2ip: fix -Wcast-align warning
  
  Follow-up to 119037325de02579f5c58256ca2ed2a0aa592c86, which fixed the
  warning in the HAVE_GETIFADDRS block, but not in the
  HAVE_IOCTL_SIOCGIFADDR block.

Dan Fandrich (24 Apr 2017)
- Makefile: avoid use of GNU-specific form of $<
  
  $< is only allowed in implicit rules in some non-GNU makes (e.g. BSD,
  AIX) so avoid use elsewhere by referencing the dependent curl.1 file
  directly instead. This is somewhat tricky because the file is supplied
  in the packaged tar ball (but not in git) but must still be able to be
  rebuilt when its dependencies change. The right thing must happen in
  both tar ball and git source trees, as well as in both in-tree and
  out-of-tree builds.

Kamil Dudka (24 Apr 2017)
- nss: adapt to the new Curl_llist API
  
  This commit fixes compilation failure caused by
  cbae73e1dd95946597ea74ccb580c30f78e3fa73.

Marcel Raad (24 Apr 2017)
- curl-compilers.m4: accept -Og and -Ofast GCC flags
  
  -Og, introduced in GCC 4.8, optimizes for debugging experience.
  -Ofast, introduced in GCC 4.7, builds on -O3 and enables further
  optimizations breaking strict standards compliance.
  When specified in CFLAGS, these were always overridden by -O0 or -O2.
  Fix this by adding them to flags_opt_all.
  
  Ref: https://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Optimize-Options.html
  Ref: https://github.com/curl/curl/pull/1404#issuecomment-296401570
  Closes https://github.com/curl/curl/pull/1440

Daniel Stenberg (24 Apr 2017)
- RELEASE-NOTES: synced with c68fed875

- configure: fix the -ldl check for openssl, add -lpthread check
  
  The check for if -ldl is needed to build with (a statically built)
  openssl was broken. This repairs the check, and adds a check for
  -lpthread as well since OpenSSL 1.1.0+ does in fact require -lpthread so
  only adding -ldl for a static openssl build is no longer enough.
  
  Reported-by: Jay Satiro
  Ref: #1426
  Closes #1427

- llist: fix a comment after cbae73e1dd9
  
  Pointed-it-by: Kevin Ji
  URL: https://github.com/curl/curl/commit/cbae73e1dd95946597ea74ccb580c30f78e3fa73#commitcomment-21872622

Jay Satiro (22 Apr 2017)
- schannel: Don't treat encrypted partial record as pending data
  
  - Track when the cached encrypted data contains only a partial record
    that can't be decrypted without more data (SEC_E_INCOMPLETE_MESSAGE).
  
  - Change Curl_schannel_data_pending to return false in such a case.
  
  Other SSL libraries have pending data functions that behave similarly.
  
  Ref: https://github.com/curl/curl/pull/1387
  
  Closes https://github.com/curl/curl/pull/1392

Daniel Stenberg (22 Apr 2017)
- [Alan Jenkins brought this change]

  multi: clarify condition in curl_multi_wait
  
  `if(nfds || extra_nfds) {` is followed by `malloc(nfds * ...)`.
  
  If `extra_fs` could be non-zero when `nfds` was zero, then we have
  `malloc(0)` which is allowed to return `NULL`. But, malloc returning
  NULL can be confusing. In this code, the next line would treat the NULL
  as an allocation failure.
  
  It turns out, if `nfds` is zero then `extra_nfds` must also be zero.
  The final value of `nfds` includes `extra_nfds`.  So the test for
  `extra_nfds` is redundant.  It can only confuse the reader.
  
  Closes #1439

Marcel Raad (22 Apr 2017)
- lib: fix maybe-uninitialized warnings
  
  With -Og, GCC complains:
  
  easy.c:628:7: error: ‘mcode’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
  
  ../lib/strcase.h:35:29: error: ‘tok_buf’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
  vauth/digest.c:208:9: note: ‘tok_buf’ was declared here
  
  ../lib/strcase.h:35:29: error: ‘tok_buf’ may be used uninitialized in this function [-Werror=maybe-uninitialized]
  vauth/digest.c:566:15: note: ‘tok_buf’ was declared here
  
  Fix this by initializing the variables.

Dan Fandrich (22 Apr 2017)
- gnutls: removed some code when --disable-verbose is configured
  
  This reduces the binary size and fixes a compile warning.

Daniel Stenberg (22 Apr 2017)
- llist: no longer uses malloc
  
  The 'list element' struct now has to be within the data that is being
  added to the list. Removes 16.6% (tiny) mallocs from a simple HTTP
  transfer. (96 => 80)
  
  Also removed return codes since the llist functions can't fail now.
  
  Test 1300 updated accordingly.
  
  Closes #1435

Marcel Raad (21 Apr 2017)
- typecheck-gcc: handle function pointers properly
  
  All the callbacks passed to curl_easy_setopt are defined as function
  pointers. The possibility to pass both functions and function pointers
  was handled for the callbacks that typecheck-gcc.h defined as
  compatible, but not for the public callback types themselves.
  
  This makes all compatible callback types defined in typecheck-gcc.h
  function pointers too and checks all functions uniformly with
  _curl_callback_compatible, which handles both functions and function
  pointers.
  
  A symptom of the problem was a warning in tool_operate.c with
  --disable-libcurl-option and without --enable-debug as that file
  passes the callback functions to curl_easy_setopt directly.
  
  Fixes https://github.com/curl/curl/issues/1403
  Closes https://github.com/curl/curl/pull/1404

Dan Fandrich (21 Apr 2017)
- mbedtls: enable NTLM (& SMB) even if MD4 support is unavailable
  
  In that case, use libcurl's internal MD4 routine. This fixes tests 1013
  and 1014 which were failing due to configure assuming NTLM and SMB were
  always available whenever mbed TLS was in use (which is now true).

Daniel Stenberg (21 Apr 2017)
- tests: remove the html and PDF versions from the tarball

- openssl: fix memory leak in servercert
  
  ... when failing to get the server certificate.

- Revert "src/Makefile.am: avoid explicit $<"
  
  This reverts commit 5b4cbcf11d5100ff793a8e9edbaa6fe1fc7495f5.
  
  Since it broke out-of-tree builds from tarballs. See discussion in #1432

- bump: start working on next release

- src/Makefile.am: avoid explicit $<
  
  ... since apparently "BSD make" doesn't support it.
  
  Reported-by: Thomas Klausner
  Fixes #1432

Version 7.54.0 (19 Apr 2017)

Daniel Stenberg (19 Apr 2017)
- THANKS: add contributors from 7.54.0 release notes

- RELEASE-NOTES: curl 7.54.0

Marcel Raad (18 Apr 2017)
- nss: fix MinGW compiler warnings
  
  This fixes 3 warnings issued by MinGW:
  1. PR_ImportTCPSocket actually has a paramter of type PROsfd instead of
  PRInt32, which is 64 bits on Windows. Fixed this by including the
  corresponding header file instead of redeclaring the function, which is
  supported even though it is in the private include folder. [1]
  2. In 64-bit mode, size_t is 64 bits while CK_ULONG is 32 bits, so an explicit
  narrowing cast is needed.
  3. Curl_timeleft returns time_t instead of long since commit
  21aa32d30dbf319f2d336e0cb68d3a3235869fbb.
  
  [1] https://developer.mozilla.org/en-US/docs/Mozilla/Projects/NSPR/Reference/PR_ImportTCPSocket
  
  Closes https://github.com/curl/curl/pull/1393

Daniel Stenberg (18 Apr 2017)
- [Jay Satiro brought this change]

  TLS: Fix switching off SSL session id when client cert is used
  
  Move the sessionid flag to ssl_primary_config so that ssl and proxy_ssl
  will each have their own sessionid flag.
  
  Regression since HTTPS-Proxy support was added in cb4e2be. Prior to that
  this issue had been fixed in 247d890, CVE-2016-5419.
  
  Bug: https://github.com/curl/curl/issues/1341
  Reported-by: lijian996@users.noreply.github.com
  
  The new incarnation of this bug is called CVE-2017-7468 and is documented
  here: https://curl.haxx.se/docs/adv_20170419.html

- [David Benjamin brought this change]

  openssl: don't try to print nonexistant peer private keys
  
  X.509 certificates carry public keys, not private keys. Fields
  corresponding to the private half of the key will always be NULL.
  
  Closes #1425

- [David Benjamin brought this change]

  openssl: fix thread-safety bugs in error-handling
  
  ERR_error_string with NULL parameter is not thread-safe. The library
  writes the string into some static buffer. Two threads doing this at
  once may clobber each other and run into problems. Switch to
  ERR_error_string_n which avoids this problem and is explicitly
  bounds-checked.
  
  Also clean up some remnants of OpenSSL 0.9.5 around here. A number of
  comments (fixed buffer size, explaining that ERR_error_string_n was
  added in a particular version) date to when ossl_strerror tried to
  support pre-ERR_error_string_n OpenSSLs.
  
  Closes #1424

- [David Benjamin brought this change]

  openssl: make SSL_ERROR_to_str more future-proof
  
  Rather than making assumptions about the values, use a switch-case.
  
  Closes #1424

- [Daniel Gustafsson brought this change]

  code: fix typos and style in comments
  
  A few random typos, and minor whitespace cleanups, found in comments
  while reading code.
  
  Closes #1423

Marcel Raad (17 Apr 2017)
- extern-scan.pl: strip trailing CR
  
  This makes test 1135 pass with CRLF checkouts.
  
  Ref: https://github.com/curl/curl/pull/1344#issuecomment-289243166
  Closes https://github.com/curl/curl/pull/1422

- configure.ac: ignore CR after version numbers
  
  Ignore everything after the version numbers in LIBCURL_VERSION and
  LIBCURL_VERSION_NUM to ged rid of the extra CR character.
  This makes tests 1022 and 1023 pass on Linux with a CRLF checkout.
  
  Ref: https://github.com/curl/curl/pull/1344#issuecomment-289243166
  Closes https://github.com/curl/curl/pull/1422

- .gitattributes: force shell scripts to LF
  
  Bash on Linux errors out on CR characters.
  This makes tests 1221 and 1222 pass on Linux with a CRLF checkout.
  
  Ref: https://github.com/curl/curl/pull/1344#issuecomment-289243166
  Closes https://github.com/curl/curl/pull/1422

- unit1303: fix compiler warning
  
  MinGW-w64 complains:
  warning: conversion to 'long int' from 'time_t {aka long long int}' may
  alter its value [-Wconversion]
  Fix this by using the correct type.

Daniel Stenberg (16 Apr 2017)
- RELEASE-NOTES: synced with 1451271e0

- [Larry Stefani brought this change]

  http2: fix handle leak in error path
  
  Add missing newhandle free call in push_promise().
  
  Closes #1416

- [Larry Stefani brought this change]

  mbedtls: fix memory leak in error path
  
  Add missing our_ssl_sessionid free call in mbed_connect_step3().
  
  Closes #1417

Marcel Raad (15 Apr 2017)
- curl-compilers.m4: turn implicit function declarations into errors
  
  This adds -Werror-implicit-function-declaration for GCC 2.95+ so that
  these errors are visible at the point where they occur instead of only
  at link time.
  Implicit function declarations are illegal in C99 and C++ anyway, and
  the same warning has been turned into an error for ICC in commit
  3072c5b8a127057aa922b7c51051bbb4a630b091.
  
  Ref: https://gcc.gnu.org/onlinedocs/gcc-2.95.2/gcc_2.html#SEC8
  Ref: https://curl.haxx.se/mail/lib-2017-04/0001.html
  Closes https://github.com/curl/curl/pull/1419

- test1541: also test for CURL_PULL_WS2TCPIP_H
  
  Ref: https://github.com/curl/curl/issues/1408
  Closes https://github.com/curl/curl/pull/1412

- tests/server/util: prefer <poll.h> over <sys/poll.h>
  
  Follow-up to aa573c3c55cda72ec5ef677d87f6f46a53385f0c
  
  Ref: https://github.com/curl/curl/pull/1406

Daniel Stenberg (11 Apr 2017)
- Curl_expire_latest: ignore already expired timers
  
  If the existing timer is still in there but has expired, the new timer
  should be added.
  
  Reported-by: Rainer Canavan
  Bug: https://curl.haxx.se/mail/lib-2017-04/0030.html
  Closes #1407

- system.h: fix mingw section
  
  Reported-by: Marcel Raad
  Fixes #1408
  Closes #1409

Marcel Raad (11 Apr 2017)
- polarssl: unbreak build with versions < 1.3.8
  
  ssl_session_init was only introduced in version 1.3.8, the penultimate
  version. The function only contains a memset, so replace it with that.
  
  Suggested-by: Jay Satiro
  Fixes https://github.com/curl/curl/issues/1401

- poll: prefer <poll.h> over <sys/poll.h>
  
  The POSIX standard location is <poll.h>. Using <sys/poll.h> results in
  warning spam when using the musl standard library.
  
  Closes https://github.com/curl/curl/pull/1406

Daniel Stenberg (10 Apr 2017)
- [Alexis La Goutte brought this change]

  openssl: fix this statement may fall through [-Wimplicit-fallthrough=]
  
  Closes #1402

Kamil Dudka (10 Apr 2017)
- nss: load CA certificates even with --insecure
  
  ... because they may include an intermediate certificate for a client
  certificate and the intermediate certificate needs to be presented to
  the server, no matter if we verify the peer or not.
  
  Reported-by: thraidh
  Closes #851

Daniel Stenberg (10 Apr 2017)
- RELEASE-NOTES: synced with f9d1e9a27f7e1

Dan Fandrich (10 Apr 2017)
- libcurl-thread.3: fixed a bad macro that caused test 1140 to fail

Daniel Stenberg (9 Apr 2017)
- libcurl-thread.3: also mention threaded-resolver
  
  Reported-by: Alex Bligh
  Bug: https://curl.haxx.se/mail/lib-2017-04/0044.html

- .github/stale.yml: enable the stale bot
  
  Issues and PRs with no activity for 180 days will get marked as stale,
  and if no further activity happens within 14 more days, the issue gets
  closed.
  
  This follows our established policy of not letting stalled bugs "get in
  the way": https://curl.haxx.se/docs/bugs.html#Closing_off_stalled_bugs
  
  Closes #1398

Jay Satiro (8 Apr 2017)
- CURLINFO_SCHEME.3: fix variable type
  
  - Change documented param type to char ** from incorrect long *.

Marcel Raad (8 Apr 2017)
- INSTALL.md: fix secure transport configure arguments
  
  --without-ssl is needed instead of --with-winssl.

- vtls: fix unreferenced variable warnings
  
  ... by moving the variables into the correct #ifdef block.

Daniel Stenberg (7 Apr 2017)
- BUGS: "Bugs in old versions"

- system.h: add section for tcc
  
  Closes #1397

Marcel Raad (7 Apr 2017)
- schannel: fix compiler warnings
  
  When UNICODE is not defined, the Curl_convert_UTF8_to_tchar macro maps
  directly to its argument. As it is declared as a pointer to const and
  InitializeSecurityContext expects a pointer to non-const, both MSVC and MinGW
  issue a warning about implicitly casting away the const. Fix this by declaring
  the variables as pointers to non-const.
  
  Closes https://github.com/curl/curl/pull/1394

- [Isaac Boukris brought this change]

  sspi: print out InitializeSecurityContext() error message
  
  Reported-by: Carsten (talksinmath)
  
  Fixes #1384
  Closes #1395

- gtls: fix compiler warning
  
  Curl_timeleft returns time_t instead of long since commit
  21aa32d30dbf319f2d336e0cb68d3a3235869fbb.

Daniel Stenberg (6 Apr 2017)
- test1606: verify speedcheck

- low_speed_limit: improved function for longer time periods
  
  Previously, periods of fast speed between periods of slow speed would
  not count and could still erroneously trigger a timeout.
  
  Reported-by: Paul Harris
  Fixes #1345
  Closes #1390

- system.h: set sizeof long to 4 on "default 32 bit" systems
  
  Triggered a test failure on test 1541 for the build known as
  "Linux 4.4 i686 tcc 0.9.26 glibc 2.20"

Marcel Raad (6 Apr 2017)
- nss: fix build after e60fe20fdf94e829ba5fce33f7a9d6c281149f7d
  
  Curl_llist_alloc is now Curl_llist_init.
  
  Closes https://github.com/curl/curl/pull/1391

Daniel Stenberg (6 Apr 2017)
- INSTALL.cmake: more problems
  
  and mention specific issues where they are discussed

- test1541: ignore the curl_off_t variable type name comparison
  
  ... the sizes and the formatting strings are what's really important and
  avoids problems with int64_t vs "long long".
  
  Bug: https://curl.haxx.se/mail/lib-2017-04/0019.html

- Revert "configure: prefer 'long long' to int64_t for curl_off_t"
  
  This reverts commit 81284374bf3c670d2050f8562edeb69f060b07cc.
  
  Due to mingw32 brekage.

Marcel Raad (5 Apr 2017)
- tool_operate: fix MinGW compiler warning
  
  MinGW complains:
  tool_operate.c:197:15: error: comparison is always true due to limited range
  of data type [-Werror=type-limits]
  
  Fix this by only doing the comparison if 'long' is large enough to hold the
  constant it is compared with.
  
  Closes https://github.com/curl/curl/pull/1378

- tool_operate: move filetime code to its own function
  
  Ref: https://github.com/curl/curl/pull/1378

Daniel Stenberg (5 Apr 2017)
- configure: prefer 'long long' to int64_t for curl_off_t
  
  Since it is a native type and it makes it less complicated to find a
  matching one in system.h
  
  Bug: https://curl.haxx.se/mail/lib-2017-04/0010.html
  Reported-by: Dan Fandrich
  
  Closes #1388

- [Dániel Bakai brought this change]

  tests: added test for Curl_splaygetbest to unit1309
  
  This checks the new behavior of Curl_splaygetbest, so that the smallest
  node not larger than the key is removed, and FIFO behavior is kept even
  when there are multiple nodes with the same key.
  
  Closes #1358

- [Dániel Bakai brought this change]

  multi: fix queueing of pending easy handles
  
  Multi handles repeatedly invert the queue of pending easy handles when
  used with CURLMOPT_MAX_TOTAL_CONNECTIONS. This is caused by a multistep
  process involving Curl_splaygetbest and violates the FIFO property of
  the multi handle.
  This patch fixes this issue by redefining the "best" node in the
  context of timeouts as the "smallest not larger than now", and
  implementing the necessary data structure modifications to do this
  effectively, namely:
   - splay nodes with the same key are now stored in a doubly-linked
     circular list instead of a non-circular one to enable O(1)
     insertion to the tail of the list
   - Curl_splayinsert inserts nodes with the same key to the tail of
     the same list
   - in case of multiple nodes with the same key, the one on the head of
     the list gets selected

Marcel Raad (4 Apr 2017)
- tool: fix Windows Unicode build
  
  ... by explicitly calling the ANSI versions of Windows API functions where
  required.

Daniel Stenberg (4 Apr 2017)
- [Martin Kepplinger brought this change]

  curl_sasl: declare mechtable static
  
  struct mechtable is only used locally here. It can be declared static.

Jay Satiro (4 Apr 2017)
- [Antti Hätälä brought this change]

  url: don't free postponed data on connection reuse
  
  - Don't free postponed data on a connection that will be reused since
    doing so can cause data loss when pipelining.
  
  Only Windows builds are affected by this.
  
  Closes https://github.com/curl/curl/issues/1380

Daniel Stenberg (4 Apr 2017)
- RELEASE-NOTES: synced with 4f2e348f9b42c69c480

- hash: move key into hash struct to reduce mallocs
  
  This removes one tiny malloc for each hash struct allocated. In a simple
  case like "curl localhost", this save three mallocs.
  
  Closes #1376

- llist: replace Curl_llist_alloc with Curl_llist_init
  
  No longer allocate the curl_llist head struct for lists separately.
  
  Removes 17 (15%) tiny allocations in a normal "curl localhost" invoke.
  
  closes #1381

Jay Satiro (4 Apr 2017)
- easy: silence compiler warning
  
  Safe to silence warning adding time delta of poll, which can trigger on
  Windows since sizeof time_t > sizeof long.
  
  warning C4244: '+=' : conversion from 'time_t' to 'long', possible loss
  of data

Daniel Stenberg (4 Apr 2017)
- [Richlv brought this change]

  docs: minor typo in write-out.d
  
  Closes #1382

- include: curl/system.h is a run-time version of curlbuild.h
  
  system.h is aimed to replace curlbuild.h at a later point in time when
  we feel confident system.h works sufficiently well.
  
  curl/system.h is currently used in parallel with curl/curlbuild.h
  
  curl/system.h determines a data sizes, data types and include file
  status based on available preprocessor defines instead of getting
  generated at build-time. This, in order to avoid relying on a build-time
  generated file that makes it complicated to do 32 and 64 bit bields from
  the same installed set of headers.
  
  Test 1541 verifies that system.h comes to the same conclusion that
  curlbuild.h offers.
  
  Closes #1373

- multi: make curl_multi_wait avoid malloc in the typical case
  
  When only a few additional file descriptors are used, avoid the malloc.
  
  Closes #1377

Marcel Raad (3 Apr 2017)
- tests/server/util: remove in6addr_any for recent MinGW
  
  In ancient MinGW versions, in6addr_any was declared as extern, but not
  defined. Because of that, 22a0c57746ae12506b1ba0f0fafffd26c1907d6a added
  definitions for in6addr_any when compiling with MinGW. The bug was fixed in
  w32api version 3.6 from 2006, so this workaround is not needed anymore for
  recent versions.
  
  This fixes the following MinGW-w64 warnings because the MinGW-w64 version of
  IN6ADDR_ANY_INIT has the two additional braces inside the macro:
  util.c:59:14: warning: braces around scalar initializer
  util.c:59:40: warning: excess elements in scalar initializer
  
  Ref: https://sourceforge.net/p/mingw/mingw-org-wsl/ci/e4803e0da25c57ae1ad0fa75ae2b7182ff7fa339/tree/w32api/ChangeLog
  Closes https://github.com/curl/curl/pull/1379

Daniel Stenberg (3 Apr 2017)
- docs: added examples for CURLINFO_FILETIME.3 and CURLOPT_FILETIME.3

Jay Satiro (31 Mar 2017)
- fail-early.d: fix typos

- docs: Explain --fail-early does not imply --fail
  
  Closes https://github.com/curl/curl/pull/1375

Daniel Stenberg (1 Apr 2017)
- telnet: (win32) fix read callback return variable
  
  telnet.c(1427,21): warning: comparison of constant 268435456 with
  expression of type 'CURLcode' is always false
  
  telnet.c(1433,21): warning: comparison of constant 268435457 with
  expression of type 'CURLcode' is always false
  
  Reviewed-by: Jay Satiro
  Reported-by: Gisle Vanem
  Bug: https://github.com/curl/curl/issues/1225#issuecomment-290340890
  
  Closes #1374

- CTestConfig.cmake: removed, unused

- libcurl.def: removed, unused

- docs/index.html: removed, was not shipped anyway

- dist: add missing files to the tarball

Peter Wu (30 Mar 2017)
- cmake: fix build with cmake 2.8.12.2
  
  For some reason, CMake 2.8.12.2 did not expand the list argument in a
  single DEPENDS argument. Remove the quotes, so it gets expanded into
  multiple arguments for add_custom_command and add_custom_target.
  
  Fixes https://github.com/curl/curl/issues/1370
  Closes #1372

Marcel Raad (30 Mar 2017)
- ssh: fix narrowing conversion warning
  
  'left' is used as time_t but declared as long.
  MinGW complains:
  error: conversion to 'long int' from 'time_t {aka long long int}' may alter
  its value [-Werror=conversion]
  Changed the declaration to time_t.

- http2: silence unused parameter warnings
  
  In release mode, MinGW complains:
  error: unused parameter 'lib_error_code' [-Werror=unused-parameter]

Daniel Stenberg (30 Mar 2017)
- [Hanno Böck brought this change]

  curl: fix callback functions to match prototype
  
  The function tool_debug_cb doesn't match curl_debug_callback in curl.h
  (unsigned vs. signed char* for 3rd param).
  
  Bug: https://curl.haxx.se/mail/lib-2017-03/0120.html

- [Alexis La Goutte brought this change]

  gcc7: fix ‘*’ in boolean context, suggest ‘&&’ instead [-Wint-in-bool-context]
  
  Closes #1371

Marcel Raad (30 Mar 2017)
- schannel: fix unused variable warning
  
  If CURL_DISABLE_VERBOSE_STRINGS is defined, hostname is not used in
  schannel_connect_step3.

- connect: fix unreferenced parameter warning
  
  When CURL_DISABLE_VERBOSE_STRINGS is defined, the reason parameter in
  Curl_conncontrol is not used as the infof macro expands to nothing.

- select: use correct SIZEOF_ constant
  
  At least under Windows, there is no SIZEOF_LONG, so it evaluates to 0 even
  though sizeof(int) == sizeof(long). This should probably have been
  CURL_SIZEOF_LONG, but the type of timeout_ms changed from long to time_t
  anyway.
  This triggered MSVC warning C4668 about implicitly replacing undefined
  macros with '0'.
  
  Closes https://github.com/curl/curl/pull/1362

Daniel Stenberg (30 Mar 2017)
- cmake: add cmake file in docs/libcurl/opts/ to dist

- cmake: add more missing files to the dist

- docs/Makefile.am: include CMakeLists.txt in the dist tarball

Marcel Raad (29 Mar 2017)
- NTLM: check for features with #ifdef instead of #if
  
  Feature defines are normally checked with #ifdef instead of #if in the rest of
  the codebase. Additionally, some compilers warn when a macro is implicitly
  evaluated to 0 because it is not defined, which was the case here.
  
  Ref: https://github.com/curl/curl/pull/1362#discussion_r108605101
  Closes https://github.com/curl/curl/pull/1367

Daniel Stenberg (29 Mar 2017)
- [Hanno Böck brought this change]

  curl: fix callback argument inconsistency
  
  As you can see the callback definition uses a char* for the first
  argument, while the function uses a void*.
  
  URL: https://curl.haxx.se/mail/lib-2017-03/0116.html

- RELEASE-NOTES: synced with 556c51a2df

- [madblobfish brought this change]

  KNOWN_BUGS: typo
  
  Closes #1364

- [Maksim Stsepanenka brought this change]

  make: use the variable MAKE for recursive calls
  
  Closes #1366

- conncache: make hashkey avoid malloc
  
  ... to make it much faster. Idea developed with primepie on IRC.
  
  Closes #1365

Kamil Dudka (28 Mar 2017)
- http: do not treat FTPS over CONNECT as HTTPS
  
  If we use FTPS over CONNECT, the TLS handshake for the FTPS control
  connection needs to be initiated in the SENDPROTOCONNECT state, not
  the WAITPROXYCONNECT state.  Otherwise, if the TLS handshake completed
  without blocking, the information about the completed TLS handshake
  would be saved to a wrong flag.  Consequently, the TLS handshake would
  be initiated in the SENDPROTOCONNECT state once again on the same
  connection, resulting in a failure of the TLS handshake.  I was able to
  observe the failure with the NSS backend if curl ran through valgrind.
  
  Note that this commit partially reverts curl-7_21_6-52-ge34131d.

Daniel Stenberg (28 Mar 2017)
- pause: handle mixed types of data when paused
  
  When receiving chunked encoded data with trailers, and the write
  callback returns PAUSE, there might be both body and header to store to
  resend on unpause. Previously libcurl returned error for that case.
  
  Added test case 1540 to verify.
  
  Reported-by: Stephen Toub
  Fixes #1354
  Closes #1357

Jay Satiro (28 Mar 2017)
- [Isaac Boukris brought this change]

  http: Fix proxy connection reuse with basic-auth
  
  When using basic-auth, connections and proxy connections
  can be re-used with different Authorization headers since
  it does not authenticate the connection (like NTLM does).
  
  For instance, the below command should re-use the proxy
  connection, but it currently doesn't:
  curl -v -U alice:a -x http://localhost:8181 http://localhost/
    --next -U bob:b -x http://localhost:8181 http://localhost/
  
  This is a regression since refactoring of ConnectionExists()
  as part of: cb4e2be7c6d42ca0780f8e0a747cecf9ba45f151
  
  Fix the above by removing the username and password compare
  when re-using proxy connection at proxy_info_matches().
  
  However, this fix brings back another bug would make curl
  to re-print the old proxy-authorization header of previous
  proxy basic-auth connection because it wasn't cleared.
  
  For instance, in the below command the second request should
  fail if the proxy requires authentication, but would succeed
  after the above fix (and before aforementioned commit):
  curl -v -U alice:a -x http://localhost:8181 http://localhost/
    --next -x http://localhost:8181 http://localhost/
  
  Fix this by clearing conn->allocptr.proxyuserpwd after use
  unconditionally, same as we do for conn->allocptr.userpwd.
  
  Also fix test 540 to not expect digest auth header to be
  resent when connection is reused.
  
  Signed-off-by: Isaac Boukris <iboukris@gmail.com>
  
  Closes https://github.com/curl/curl/pull/1350

- openssl: exclude DSA code when OPENSSL_NO_DSA is defined
  
  - Fix compile errors that occur in openssl.c when OpenSSL lib was
    built without DSA support.
  
  Bug: https://github.com/curl/curl/issues/1361
  Reported-by: neheb@users.noreply.github.com

- examples/fopen: checksrc compliance

Marcel Raad (28 Mar 2017)
- schannel: fix variable shadowing warning
  
  No need to redeclare the variable.

- multi: fix MinGW-w64 compiler warnings
  
  error: conversion to 'long int' from 'time_t {aka long long int}' may alter
  its value [-Werror=conversion]

- .gitattributes: turn off CRLF for *.am
  
  If Makefile.am uses CRLF, buildconf in a Windows checkout fails with:
  ".ibtoolize: error: AC_CONFIG_MACRO_DIRS([m4]) conflicts with
  ACLOCAL_AMFLAGS=-I m4"

Daniel Stenberg (26 Mar 2017)
- [klemens brought this change]

  spelling fixes
  
  Closes #1356

- curl: check for end of input in writeout backslash handling
  
  Reported-by: Brian Carpenter
  
  Added test 1442 to verify

Marcel Raad (24 Mar 2017)
- tests/README: make "Run" section foolproof
  
  curl must be built before building the tests.
  
  Closes https://github.com/curl/curl/pull/1352

Daniel Stenberg (23 Mar 2017)
- openssl: fix comparison between signed and unsigned integer expressions

Marcel Raad (23 Mar 2017)
- [Edward Kimmel brought this change]

  asiohiper: make sure socket is open in event_cb
  
  Send curl_socket_t to event_cb and make sure it hasn't been closed yet.
  
  Closes https://github.com/curl/curl/pull/1318

Dan Fandrich (23 Mar 2017)
- openssl: made the error table static const

Jay Satiro (23 Mar 2017)
- openssl: fall back on SSL_ERROR_* string when no error detail
  
  - If SSL_get_error is called but no extended error detail is available
    then show that SSL_ERROR_* as a string.
  
  Prior to this change there was some inconsistency in that case: the
  SSL_ERROR_* code may or may not have been shown, or may have been shown
  as unknown even if it was known.
  
  Ref: https://github.com/curl/curl/issues/1300
  
  Closes https://github.com/curl/curl/pull/1348

Dan Fandrich (23 Mar 2017)
- mkhelp: disable compression if the perl gzip module is unavailable
  
  This is nowadays included with the base perl distribution, but wasn't
  prior to about perl 5.14

Daniel Stenberg (23 Mar 2017)
- [Anders Roxell brought this change]

  tests/README: mention nroff for --manual tests
  
  Signed-off-by: Anders Roxell <anders.roxell@gmail.com>
  
  Closes #1342

- CURLINFO_PRIMARY_IP.3: add example

- travis: run tests-nonflaky instead of tests-full

- make: introduce 'test-nonflaky' target
  
  Running this in the root build dir will invoke the test suite to only
  run tests not marked as 'flaky'.

- test2033: flaky

Jay Satiro (21 Mar 2017)
- [Ales Mlakar brought this change]

  mbedtls: add support for CURLOPT_SSL_CTX_FUNCTION
  
  Ref: https://curl.haxx.se/mail/lib-2017-02/0097.html
  
  Closes https://github.com/curl/curl/pull/1272

Peter Wu (21 Mar 2017)
- cmake: add support for building HTML and PDF docs
  
  Note that for some reason there is this warning (that also exists with
  autotools, added since curl-7_15_1-94-ga718cb05f):
  
      docs/libcurl/curl_multi_socket_all.3:1: can't open `man3/curl_multi_socket.3': No such file or directory
  
  Additionally, adjust the roffit --mandir option to support creating
  links when doing out-of-tree builds.
  
  Ref: https://github.com/curl/curl/pull/1288

- cmake: build manual pages (including curl.1)
  
  Also make Perl mandatory to allow building the docs.
  
  While CMakeLists.txt could probably read the list of manual pages from
  Makefile.am, actually putting those in CMakeLists.txt is cleaner so that
  is what is done here.
  
  Fixes #1230
  Ref: https://github.com/curl/curl/pull/1288

- docs: split file lists into Makefile.inc
  
  For easier sharing with CMake. The contents were reformatted to use
  two-space indent and expanded tabs (matching lib/Makefile.common).
  
  Ref: https://github.com/curl/curl/pull/1288

Daniel Stenberg (21 Mar 2017)
- examples: comment typos in http2 examples

- RELEASE-NOTES: typo

- RELEASE-NOTES: synced with 6e0f26c8a8c28df

- multi: fix streamclose() crash in debug mode
  
  The code would refer to the wrong data pointer. Only debug builds do
  this - for verbosity.
  
  Reported-by: zelinchen@users.noreply.github.com
  Fixes #1329

- CONTRIBUTE: mention referring to github issues in commit msgs

Dan Fandrich (20 Mar 2017)
- runtests.pl: fixed display of the Gopher IPv6 port number

- tests: fixed the documented test server port numbers

- test714/5: added HTTP as a required feature
  
  These tests use an HTTP proxy so require that curl be built with HTTP
  support.

- tests: strip more options from non-HTTP --libcurl tests
  
  The CURLOPT_USERAGENT and CURLOPT_MAXREDIRS options are only set if HTTP
  support is available, so ignore them in tests where HTTP is not
  guaranteed.

Jay Satiro (18 Mar 2017)
- [Palo Markovic brought this change]

  darwinssl: fix typo in variable name
  
  Broken a week ago in 6448f98.
  
  Closes https://github.com/curl/curl/pull/1337

- tool_operate: Fix showing HTTPS-Proxy options on CURLE_SSL_CACERT
  
  - Show the HTTPS-proxy options on CURLE_SSL_CACERT if libcurl was built
    with HTTPS-proxy support.
  
  Prior to this change those options were shown only if an HTTPS-proxy was
  specified by --proxy, but that did not take into account environment
  variables such as http_proxy, https_proxy, etc. Follow-up to e1187c4.
  
  Bug: https://github.com/curl/curl/issues/1331
  Reported-by: Nehal J Wani

- CURLINFO_LOCAL_PORT.3: fix typo

Daniel Stenberg (16 Mar 2017)
- CURLINFO_LOCAL_PORT.3: added example

- SSLCERTS.md: mention HTTPS proxies and their separate options

- BINDINGS: a Delphi binding

- KNOWN_BUGS: remove libidn related issue
  
  ... as we no longer use libidn

Dan Fandrich (14 Mar 2017)
- build: removed redundant DEPENDENCIES from makefiles

Daniel Stenberg (13 Mar 2017)
- [Sylvestre Ledru brought this change]

  Improve code readbility
  
  ... by removing the else branch after a return, break or continue.
  
  Closes #1310

Jay Satiro (13 Mar 2017)
- [Anatol Belski brought this change]

  winbuild: add basic support for OpenSSL 1.1.x
  
  - Auto-detect OpenSSL 1.1 libs
  
  Closes https://github.com/curl/curl/pull/1322

Daniel Stenberg (13 Mar 2017)
- RELEASE-NOTES: synced with c25e0761d0fc49c4

- make: regenerate docs/curl.1 by runinng make in docs
  
  ... previously, docs/ was only a dist subdir, now also a build subdir.
  
  Reported-by: Dan Fandrich
  Bug: https://curl.haxx.se/mail/lib-2017-03/0017.html

Dan Fandrich (12 Mar 2017)
- test1440/1: depend on well-defined file: behaviour
  
  Depend on the known behaviour of URLs for nonexistent files rather than
  the undefined behaviour of URLs for directories (which fails on Windows).
  The test isn't about file: URLs at all, so the URL used doesn't really
  matter.

- tests: clear the SSL_CERT_FILE variable on --libcurl tests
  
  Otherwise, the contents will end up in the output and fail the
  verification.

- test1287: added verbose logs keyword

- tool_writeout: fixed a buffer read overrun on --write-out
  
  If a % ended the statement, the string's trailing NUL would be skipped
  and memory past the end of the buffer would be accessed and potentially
  displayed as part of the --write-out output. Added tests 1440 and 1441
  to check for this kind of condition.
  
  Reported-by: Brian Carpenter

Jay Satiro (12 Mar 2017)
- [Desmond O. Chang brought this change]

  url: add option CURLOPT_SUPPRESS_CONNECT_HEADERS
  
  - Add new option CURLOPT_SUPPRESS_CONNECT_HEADERS to allow suppressing
    proxy CONNECT response headers from the user callback functions
    CURLOPT_HEADERFUNCTION and CURLOPT_WRITEFUNCTION.
  
  - Add new tool option --suppress-connect-headers to expose
    CURLOPT_SUPPRESS_CONNECT_HEADERS and allow suppressing proxy CONNECT
    response headers from --dump-header and --include.
  
  Assisted-by: Jay Satiro
  Assisted-by: CarloCannas@users.noreply.github.com
  Closes https://github.com/curl/curl/pull/783

- http_proxy: Ignore TE and CL in CONNECT 2xx responses
  
  A client MUST ignore any Content-Length or Transfer-Encoding header
  fields received in a successful response to CONNECT.
  "Successful" described as: 2xx (Successful). RFC 7231 4.3.6
  
  Prior to this change such a case would cause an error.
  
  In some ways this bug appears to be a regression since c50b878. Prior to
  that libcurl may have appeared to function correctly in such cases by
  acting on those headers instead of causing an error. But that behavior
  was also incorrect.
  
  Bug: https://github.com/curl/curl/issues/1317
  Reported-by: mkzero@users.noreply.github.com

- [Thomas Glanzmann brought this change]

  mbedtls: fix typo in variable name
  
  Broken a few days ago in 6448f98.
  
  Bug: https://curl.haxx.se/mail/lib-2017-03/0015.html

Michael Kaufmann (11 Mar 2017)
- tests: fix the authretry tests
  
  Do not call curl_easy_reset() between the requests, because the
  auth state must be preserved for these tests.
  
  Follow-up to 0afbcfd

- proxy: skip SSL initialization for closed connections
  
  This prevents a "Descriptor is not a socket" error for WinSSL.
  
  Reported-by: Antony74@users.noreply.github.com
  Reviewed-by: Jay Satiro
  
  Fixes https://github.com/curl/curl/issues/1239

- curl_easy_reset: Also reset the authentication state
  
  Follow-up to 5278462
  See https://github.com/curl/curl/issues/1095

- [Isaac Boukris brought this change]

  authneg: clear auth.multi flag at http_done
  
  This flag is meant for the current request based on authentication
  state, once the request is done we can clear the flag.
  
  Also change auth.multi to auth.multipass for better readability.
  
  Fixes https://github.com/curl/curl/issues/1095
  Closes https://github.com/curl/curl/pull/1326
  
  Signed-off-by: Isaac Boukris <iboukris@gmail.com>
  Reported-by: Michael Kaufmann

Dan Fandrich (11 Mar 2017)
- url: don't compile detect_proxy if HTTP support is disabled

- cmdline-opts: fixed a few typos

Daniel Stenberg (10 Mar 2017)
- README.md: add coverity and travis badges

- ISSUE_TEMPLATE: for bugs, ask questions on the mailing list
  
  and try to add the top comment within an HTML comment in the hope
  that it might get hidden if the text is kept

- openssl: add two /* FALLTHROUGH */ to satisfy coverity
  
  CID 1402159 and 1402158

- tests: disabled 1903 now
  
  Test 1903 is doing HTTP pipelining, and that is a timing and ordering
  sensitive operation and this fails far too often on the Travis CI
  leading to people more or less ignoring test failures there. Not good.
  
  The end of pipelning is probably coming sooner rather than later
  anyway...

Dan Fandrich (9 Mar 2017)
- tls-max.d: added to the makefile

- build: fixed making man page in out-of-tree tarball builds
  
  The man page taken from the release package is found in a different
  location than if it's built from source. It must be referenced as $< in
  the rule to get its correct location in the VPATH.

- mkhelp: simplified the gzip code
  
  This eliminates the need for an external gzip program, which wasn't
  working with Busybox's gzip, anyway. It now compresses using perl's
  IO::Compress::Gzip

- polarssl: fixed compile errors introduced in 6448f98c

Daniel Stenberg (8 Mar 2017)
- bump: next release will be known as 7.54.0
  
  ...due to the newly added CURL_SSLVERSION_MAX_* functionality

- openssl: unbreak the build after 6448f98c1857de
  
  Verified with OpenSSL 1.1.0e and OpenSSL master (1.1.1)

Kamil Dudka (8 Mar 2017)
- [Jozef Kralik brought this change]

  vtls: add options to specify range of enabled TLS versions
  
  This commit introduces the CURL_SSLVERSION_MAX_* constants as well as
  the --tls-max option of the curl tool.
  
  Closes https://github.com/curl/curl/pull/1166

Daniel Stenberg (8 Mar 2017)
- RELEASE-NOTES: synced with 6888a670aa01

- MANPAGE: clarify the dash situation in meta data

- insecure.d: clarify that this is for server connections
  
  Assisted-by: Ray Satiro
  Bug: https://curl.haxx.se/mail/lib-2017-03/0002.html

Dan Fandrich (8 Mar 2017)
- test1260: added http as a required feature

Daniel Stenberg (7 Mar 2017)
- [Steve Brokenshire brought this change]

  maketgz: Run updatemanpages.pl to update man pages
  
  maketgz now runs scripts/updatemanpages.pl to update the man pages .TH
  section to use the current date and curl/libcurl version.
  
  (TODO Section 3.1)
  
  Closes #1058

- [Steve Brokenshire brought this change]

  gitignore: Ignore man page dist files
  
  Ignore man page dist files generated by scripts/updatemanpages.pl

- [Steve Brokenshire brought this change]

  Makefile.am: Remove distribution man pages when running 'make clean'

- [Steve Brokenshire brought this change]

  Makefile.am: Added scripts/updatemanpages.pl to EXTRA_DIST

- [Steve Brokenshire brought this change]

  updatemanpages.pl: Update man pages to use current date and versions
  
  Added script to update man pages to use the current date and
  curl/libcurl versions.
  
  updatemanpages.pl has three arrays: list of directories to look in,
  list of extensions to process, list of files to exclude from
  processing.
  
  Check man page in git repoistory using the date from the existing man
  page before updating to avoid updating the man page if no change is
  made.
  
  If data is received from the git command then update the man page with
  the current date and version otherwise leave alone.
  
  Applied patch from badger to make the date argument optional, change the
  git command used, added date argument to processfile subroutine and
  print to STDERR if no date is found in a man page.
  
  Added code to process the changed man page into a new man page with
  .dist added to the filename to keep the original source files unchanged.
  Updated POD documentation to reflect that the date argument optional.
  
  Code style is in line with CODE_STYLE.md.
  
  Directories: docs/ docs/libcurl/ docs/libcurl/opts/ tests/
  Extensions: .1 .3
  Excluded files: mk-ca-bundle.1 template.3
  
  (TODO Section 3.1)

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix assertion error on redirect with CL=0
  
  This fixes assertion error which occurs when redirect is done with 0
  length body via HTTP/2, and the easy handle is reused, but new
  connection is established due to hostname change:
  
      curl: http2.c:1572: ssize_t http2_recv(struct connectdata *,
        int, char *, size_t, CURLcode *):
      Assertion `httpc->drain_total >= data->state.drain' failed.
  
  To fix this bug, ensure that http2_handle_stream is called.
  
  Fixes #1286
  Closes #1302

- ares: Curl_resolver_wait_resolv: clear *entry first in function

- ares: better error return on timeouts
  
  Assisted-by: Ray Satiro
  
  Bug: https://curl.haxx.se/mail/lib-2017-03/0009.html

Jay Satiro (6 Mar 2017)
- KNOWN_BUGS: Add DarwinSSL won't import PKCS#12 without a password
  
  Bug: https://github.com/curl/curl/issues/1308
  Reported-by: Justin Clift

Dan Fandrich (6 Mar 2017)
- test1260: removed errant XML tag

Daniel Stenberg (6 Mar 2017)
- URL: return error on malformed URLs with junk after port number
  
  ... because it causes confusion with users. Example URLs:
  
  "http://[127.0.0.1]:11211:80" which a lot of languages' URL parsers will
  parse and claim uses port number 80, while libcurl would use port number
  11211.
  
  "http://user@example.com:80@localhost" which by the WHATWG URL spec will
  be treated to contain user name 'user@example.com' but according to
  RFC3986 is user name 'user' for the host 'example.com' and then port 80
  is followed by "@localhost"
  
  Both these formats are now rejected, and verified so in test 1260.
  
  Reported-by: Orange Tsai

- BINDINGS: update the Lua-cURL URL

- [Sylvestre Ledru brought this change]

  BINDINGS: add Scilab binding
  
  Closes #1312

- BINDINGS: add go-curl and perl6-net-curl
  
  Reported-by: Peter Pentchev

- BINDINGS: add misssing C++ bindings
  
  Reported-by: Giuseppe Persico

- ares: return error at once if timed out before name resolve starts
  
  Pointed-out-by: Ray Satiro
  Bug: https://curl.haxx.se/mail/lib-2017-03/0004.html

Peter Wu (5 Mar 2017)
- [Michael Maltese brought this change]

  CMake: Set at most one SSL library
  
  Ref: https://github.com/curl/curl/pull/1228

- [Michael Maltese brought this change]

  CMake: Add mbedTLS support
  
  Ref: https://github.com/curl/curl/pull/1228

- [Michael Maltese brought this change]

  CMake: Add DarwinSSL support
  
  Assisted-by: Simon Warta <simon@kullo.net>
  Ref: https://github.com/curl/curl/pull/1228

- [Michael Maltese brought this change]

  CMake: Reorganize SSL support, separate WinSSL and SSPI
  
  This is closer to how configure.ac does it
  
  Ref: https://github.com/curl/curl/pull/1228

Jay Satiro (4 Mar 2017)
- CURLOPT_SSL_CTX_FUNCTION.3: Fix EXAMPLE formatting errors
  
  .. also document that CURLE_NOT_BUILT_IN is a RETURN VALUE.
  
  Ref: https://github.com/curl/curl/pull/1290

Daniel Stenberg (4 Mar 2017)
- [Andrew Krieger brought this change]

  fix potential use of uninitialized variables
  
  MSVC with LTCG detects this at warning level 4.
  
  Closes #1304

Dan Fandrich (4 Mar 2017)
- [Sylvestre Ledru brought this change]

  fix some typos in the doc (#1306)

- tests: fixed a typo in some comments

Jay Satiro (3 Mar 2017)
- url: split off proxy init and parsing from create_conn
  
  Move the proxy parse/init into helper create_conn_helper_init_proxy to
  mitigate the chances some non-proxy code will be mistakenly added to it.
  
  Ref: https://github.com/curl/curl/issues/1274#issuecomment-281556510
  Ref: https://github.com/curl/curl/pull/1293
  
  Closes https://github.com/curl/curl/pull/1298

- [Alexis La Goutte brought this change]

  build: fix gcc7 implicit fallthrough warnings
  
  Mark intended fallthroughs with /* FALLTHROUGH */ so that gcc will know
  it's expected and won't warn on [-Wimplicit-fallthrough=].
  
  Closes https://github.com/curl/curl/pull/1297

- [Greg Rowe brought this change]

  configure: fix --with-zlib when a path is specified
  
  Prior to this change if you attempted to configure curl using
  --wtih-zlib and specified a path the path would be ignored if you also
  had pkg-config installed on your system.  This situation can easily
  arise when you are cross compiling.  This change moves the test for
  detecting zlib settings via pkg-config only if OPT_ZLIB is not set.
  
  Closes https://github.com/curl/curl/pull/1292

- [c4rlo brought this change]

  no-keepalive.d: fix typo
  
  Closes https://github.com/curl/curl/pull/1301

- checksrc.bat: Ignore curl_config.h.in, curl_config.h

- configure: fix for --enable-pthreads
  
  Better handle options conflicts that can occur if --enable-pthreads.
  
  Bug: https://github.com/curl/curl/pull/1295
  Reported-by: Marc-Antoine Perennou

- [JDepooter brought this change]

  darwinssl: Warn that disabling host verify also disables SNI
  
  In DarwinSSL the SSLSetPeerDomainName function is used to enable both
  sending SNI and verifying the host. When host verification is disabled
  the function cannot be called, therefore SNI is disabled as well.
  
  Closes https://github.com/curl/curl/pull/1240

Marcel Raad (28 Feb 2017)
- warnless: suppress compiler warning
  
  If size_t is 32 bits, MSVC warns:
  warning C4310: cast truncates constant value
  The warning is harmless as CURL_MASK_SCOFFT gets
  truncated to the maximum value of size_t.

Dan Fandrich (27 Feb 2017)
- tests: enable HTTP/2 tests to run with non-default port numbers

Marcel Raad (27 Feb 2017)
- digest_sspi: fix compilation warning
  
  MSVC complains:
  warning C4701: potentially uninitialized local variable 'output_token_len' used

Jay Satiro (26 Feb 2017)
- cyassl: get library version string at runtime
  
  wolfSSL >= 3.6.0 supports getting its library version string at runtime.

Dan Fandrich (26 Feb 2017)
- test1139: allow for the possibility that the man page is not rebuilt
  
  This is likely to be the case when building from a tar ball release
  package which includes a prebuilt man page. In that case, test the
  packaged man page instead. This only makes a difference when building
  out-of-tree (in-tree, the location in both cases is identical).

Jay Satiro (25 Feb 2017)
- [Isaac Boukris brought this change]

  url: fix unix-socket support for proxy-disabled builds
  
  Prior to this change if curl was built with Unix Socket support
  (--enable-unix-sockets) and without Proxy support (--disable-proxy) then
  unix socket options would erroneously be ignored.
  
  Regression introduced in:
  0b8d682f81ee9acb763dd4c9ad805fe08d1227c0
  
  Bug: https://github.com/curl/curl/issues/1274
  Reported-by: mccormickt12@users.noreply.github.com
  
  Closes https://github.com/curl/curl/pull/1289

Dan Fandrich (26 Feb 2017)
- gopher: fixed detection of an error condition from Curl_urldecode

- ftp: fixed a NULL pointer dereference on OOM

Jay Satiro (25 Feb 2017)
- [Peter Wu brought this change]

  docs: de-duplicate file lists in the Makefiles
  
  Make use of macro substitution of suffix patterns to remove duplication
  of manual names. This approach is portable according to
  http://pubs.opengroup.org/onlinepubs/009695399/utilities/make.html
  
  Closes https://github.com/curl/curl/pull/1287

Dan Fandrich (25 Feb 2017)
- ftp: removed an erroneous free in an OOM path

- proxy: fixed a memory leak on OOM

- tests: use consistent environment variables for setting charset
  
  The character set in POSIX is set by the locale defined by (in
  decreasing order of precedence) the LC_ALL, LC_CTYPE and LANG
  environment variables (CHARSET was used by libidn but not libidn2).
  LC_ALL is cleared to ensure that LC_CTYPE takes effect, but LC_ALL is
  not used to set the locale to ensure that other parts of the locale
  aren't overridden.  Since there doesn't seem to be a cross-platform way
  of specifying a UTF-8 locale, and not all systems may support UTF-8, a
  <precheck> is used to skip the test if UTF-8 can't be verified to be
  available.  Test 1035 was also converted to UTF-8 for consistency, as
  the actual character set used there is irrelevant to the test.
  
  This patch uses a different UTF-8 locale than the last attempt, namely
  en_US.UTF-8. This one has been verified on 7 different Linux and BSD
  distributions and is more complete and usable than the locale UTF-8 (on
  at least some systems).

- test557: explicitly use the C locale so the numeric output is as expected

Jay Satiro (25 Feb 2017)
- [Simon Warta brought this change]

  cmake: Replace invalid UTF-8 byte sequence
  
  - Change the encoding of the regex temp placeholder token to UTF-8.
  
  Prior to this change the file contained special chars in a different
  encoding than ASCII or UTF-8 making text editors and Python complain
  when reading the file.
  
  Closes https://github.com/curl/curl/pull/1271
  Closes https://github.com/curl/curl/pull/1275

Daniel Stenberg (24 Feb 2017)
- bump: work on the next release

Version 7.53.1 (24 Feb 2017)

Daniel Stenberg (24 Feb 2017)
- release: 7.53.1

- Revert "tests: use consistent environment variables for setting charset"
  
  This reverts commit ecd1d020abdae3c3ce3643ddab3106501e62e7c0.
  
  That commit caused test failures on my Debian Linux machine for all
  changed test cases. We need to reconsider how that should get done.

Dan Fandrich (23 Feb 2017)
- tests: use consistent environment variables for setting charset
  
  Character set in POSIX is set by the locale defined (in decreasing order
  of precedence) by the LC_ALL, LC_CTYPE and LANG environment variables (I
  believe CHARSET is only historic). LC_ALL is cleared to ensure that
  LC_CTYPE takes effect, but LC_ALL is not used to set the locale to
  ensure that other parts of the locale aren't overriden, if set.  Since
  there doesn't seem to be a cross-platform way of specifying a UTF-8
  locale, and not all systems may support UTF-8, a <precheck> is used
  (where relevant) to skip the test if UTF-8 isn't in use.  Test 1035 was
  also converted to UTF-8 for consistency, as the actual character set
  used there is irrelevant to the test.

Jay Satiro (23 Feb 2017)
- url: Default the CA proxy bundle location to CURL_CA_BUNDLE
  
  If the compile-time CURL_CA_BUNDLE location is defined use it as the
  default value for the proxy CA bundle location, which is the same as
  what we already do for the regular CA bundle location.
  
  Ref: https://github.com/curl/curl/pull/1257

Daniel Stenberg (23 Feb 2017)
- [Sergii Pylypenko brought this change]

  rand: added missing #ifdef HAVE_FCNTL_H around fcntl.h header
  
  Closes #1285

- TODO: "OPTIONS *"
  
  Closes #1280

- RELEASE-NOTES: synced with 443e5b03a7d441

- THANKS-filter: shachaf

- [İsmail Dönmez brought this change]

  tests: Set CHARSET & LANG to UTF-8 in 1035, 2046 and 2047
  
  Closes #1283
  Fixes #1277

- bump: 7.53.1 coming up
  
  synced with df665f4df0f7a352

- formdata: check for EOF when reading from stdin
  
  Reported-by: shachaf@users.noreply.github.com
  
  Fixes #1281

Jay Satiro (22 Feb 2017)
- docs: gitignore curl.1
  
  curl.1 is generated by the cmdline-opts script since 4c49b83.

Daniel Stenberg (22 Feb 2017)
- TODO: HTTP Digest using SHA-256

- TODO: brotli is deployed widely now

Jay Satiro (21 Feb 2017)
- [Viktor Szakats brought this change]

  urldata: include curl_sspi.h when Windows SSPI is enabled
  
  f77dabe broke builds in Windows using Windows SSPI but not Windows SSL.
  
  Bug: https://github.com/curl/curl/issues/1276
  Reported-by: jveazey@users.noreply.github.com

- url: Improve CURLOPT_PROXY_CAPATH error handling
  
  - Change CURLOPT_PROXY_CAPATH to return CURLE_NOT_BUILT_IN if the option
    is not supported, which is the same as what we already do for
    CURLOPT_CAPATH.
  
  - Change the curl tool to handle CURLOPT_PROXY_CAPATH error
    CURLE_NOT_BUILT_IN as a warning instead of as an error, which is the
    same as what we already do for CURLOPT_CAPATH.
  
  - Fix CAPATH docs to show that CURLE_NOT_BUILT_IN is returned when the
    respective CAPATH option is not supported by the SSL library.
  
  Ref: https://github.com/curl/curl/pull/1257

- cyassl: fix typo

Version 7.53.0 (22 Feb 2017)

Daniel Stenberg (22 Feb 2017)
- release: 7.53.0

- cookie: fix declaration of 'dup' shadows a global declaration

- TLS: make SSL_VERIFYSTATUS work again
  
  The CURLOPT_SSL_VERIFYSTATUS option was not properly handled by libcurl
  and thus even if the status couldn't be verified, the connection would
  be allowed and the user would not be told about the failed verification.
  
  Regression since cb4e2be7c6d42ca
  
  CVE-2017-2629
  Bug: https://curl.haxx.se/docs/adv_20170222.html
  
  Reported-by: Marcus Hoffmann

Jay Satiro (21 Feb 2017)
- digest_sspi: Handle 'stale=TRUE' directive in HTTP digest
  
  - If the server has provided another challenge use it as the replacement
    input token if stale=TRUE. Otherwise previous credentials have failed
    so return CURLE_LOGIN_DENIED.
  
  Prior to this change the stale directive was ignored and if another
  challenge was received it would cause error CURLE_BAD_CONTENT_ENCODING.
  
  Ref: https://tools.ietf.org/html/rfc2617#page-10
  
  Bug: https://github.com/curl/curl/issues/928
  Reported-by: tarek112@users.noreply.github.com

Daniel Stenberg (20 Feb 2017)
- smb: use getpid replacement for windows UWP builds
  
  Source: https://github.com/Microsoft/vcpkg/blob/7676b8780db1e1e591c4fc7eba4f96f73c428cb4/ports/curl/0002_fix_uwp.patch

- TODO: CURLOPT_RESOLVE for any port number
  
  Closes #1264

- RELEASE-NOTES: synced with af30f1152d43dcdb

- [Jean Gressmann brought this change]

  sftp: improved checks for create dir failures
  
  Since negative values are errors and not only -1. This makes SFTP upload
  with --create-dirs work (again).
  
  Closes #1269

Jay Satiro (20 Feb 2017)
- [Max Khon brought this change]

  digest_sspi: Fix nonce-count generation in HTTP digest
  
  - on the first invocation: keep security context returned by
    InitializeSecurityContext()
  
  - on subsequent invocations: use MakeSignature() instead of
    InitializeSecurityContext() to generate HTTP digest response
  
  Bug: https://github.com/curl/curl/issues/870
  Reported-by: Andreas Roth
  
  Closes https://github.com/curl/curl/pull/1251

- examples/multi-uv: checksrc compliance

Michael Kaufmann (19 Feb 2017)
- string formatting: fix 4 printf-style format strings

Dan Fandrich (18 Feb 2017)
- tests: removed the obsolete name parameter

Michael Kaufmann (18 Feb 2017)
- speed caps: update the timeouts if the speed is too low/high
  
  Follow-up to 4b86113
  
  Fixes https://github.com/curl/curl/issues/793
  Fixes https://github.com/curl/curl/issues/942

- docs: fix timeout handling in multi-uv example

- proxy: fix hostname resolution and IDN conversion
  
  Properly resolve, convert and log the proxy host names.
  Support the "--connect-to" feature for SOCKS proxies and for passive FTP
  data transfers.
  
  Follow-up to cb4e2be
  
  Reported-by: Jay Satiro
  Fixes https://github.com/curl/curl/issues/1248

Jay Satiro (17 Feb 2017)
- [Isaac Boukris brought this change]

  http: fix missing 'Content-Length: 0' while negotiating auth
  
  - While negotiating auth during PUT/POST if a user-specified
    Content-Length header is set send 'Content-Length: 0'.
  
  This is what we do already in HTTPREQ_POST_FORM and what we did in the
  HTTPREQ_POST case (regression since afd288b).
  
  Prior to this change no Content-Length header would be sent in such a
  case.
  
  Bug: https://curl.haxx.se/mail/lib-2017-02/0006.html
  Reported-by: Dominik Hölzl
  
  Closes https://github.com/curl/curl/pull/1242

Daniel Stenberg (16 Feb 2017)
- [Simon Warta brought this change]

  winbuild: add note on auto-detection of MACHINE in Makefile.vc
  
  Closes #1265

- RELEASE-PROCEDURE: update the upcoming release calendar

- TODO: consider file name from the redirected URL with -O ?
  
  It isn't easily solved, but with some thinking someone could probably
  come up with a working approach?
  
  Closes #1241

Jay Satiro (15 Feb 2017)
- tool_urlglob: Allow a glob range with the same start and stop
  
  For example allow ranges like [1-1] and [a-a] etc.
  
  Regression since 5ca96cb.
  
  Bug: https://github.com/curl/curl/issues/1238
  Reported-by: R. Dennis Steed

Daniel Stenberg (15 Feb 2017)
- axtls: adapt to API changes
  
  Builds with axTLS 2.1.2. This then also breaks compatibility with axTLS
  < 2.1.0 (the older API)
  
  ... and fix the session_id mixup brought in 04b4ee549
  
  Fixes #1220

- RELEASE-NOTES: synced with 690935390c29c

- [Nick Draffen brought this change]

  curl: fix typo in time condition warning message
  
  The warning message had a typo. The argument long form is --time-cond
  not --timecond
  
  Closes #1263

- smb: code indent

Jay Satiro (14 Feb 2017)
- configure: Allow disabling pthreads, fall back on Win32 threads
  
  When the threaded resolver option is specified for configure the default
  thread library is pthreads. This change makes it possible to
  --disable-pthreads and then configure can fall back on Win32 threads for
  native Windows builds.
  
  Closes https://github.com/curl/curl/pull/1260

Daniel Stenberg (13 Feb 2017)
- http2: fix memory-leak when denying push streams
  
  Reported-by: zelinchen@users.noreply.github.com
  Fixes #1229

Jay Satiro (11 Feb 2017)
- tool_operate: Show HTTPS-Proxy options on CURLE_SSL_CACERT
  
  When CURLE_SSL_CACERT occurs the tool shows a lengthy error message to
  the user explaining possible solutions such as --cacert and --insecure.
  
  This change appends to that message similar options --proxy-cacert and
  --proxy-insecure when there's a specified HTTPS proxy.
  
  Closes https://github.com/curl/curl/issues/1258

Daniel Stenberg (10 Feb 2017)
- cmdline-opts/page-footer: ftp.sunet.se is no longer an FTP mirror

- URL: only accept ";options" in SMTP/POP3/IMAP URL schemes
  
  Fixes #1252

Jay Satiro (9 Feb 2017)
- cmdline-opts/socks*: Mention --preproxy in --socks* opts
  
  - Document in --socks* opts they're still mutually exclusive of --proxy.
  
  Partial revert of 423a93c; I had misinterpreted the SOCKS proxy +
  HTTP/HTTPS proxy combination.
  
  - Document in --socks* opts that --preproxy can be used to specify a
    SOCKS proxy at the same time --proxy is used with an HTTP/HTTPS proxy.

Daniel Stenberg (9 Feb 2017)
- CURLOPT_SSL_VERIFYPEER.3: also the https proxy version

Kamil Dudka (9 Feb 2017)
- nss: make FTPS work with --proxytunnel
  
  If the NSS code was in the middle of a non-blocking handshake and it
  was asked to finish the handshake in blocking mode, it unexpectedly
  continued in the non-blocking mode, which caused a FTPS connection
  over CONNECT to fail with "(81) Socket not ready for send/recv".
  
  Bug: https://bugzilla.redhat.com/1420327

Daniel Stenberg (9 Feb 2017)
- examples/multithread.c: link to our multi-thread docs
  
  ... instead of the OpenSSL mutex page.

- http_proxy: avoid freeing static memory
  
  Follow up to 7fe81ec298e0: make sure 'host' is either NULL or malloced.

- [Cameron MacMinn brought this change]

  http_proxy: Fix tiny memory leak upon edge case connecting to proxy
  
  Fixes #1255

Michael Kaufmann (8 Feb 2017)
- polarssl, mbedtls: Fix detection of pending data
  
  Reported-by: Dan Fandrich
  Bug: https://curl.haxx.se/mail/lib-2017-02/0032.html

Dan Fandrich (7 Feb 2017)
- test1139: Added the --manual keyword since the manual is required

Daniel Stenberg (7 Feb 2017)
- RELEASE-NOTES: synced with 102454459dd688c

- THANKS-filter: polish some recent contributors

- http2: reset push header counter fixes crash
  
  When removing an easy handler from a multi before it completed its
  transfer, and it had pushed streams, it would segfault due to the pushed
  counted not being cleared.
  
  Fixed-by: zelinchen@users.noreply.github.com
  Fixes #1249

- [Markus Westerlind brought this change]

  transfer: only retry nobody-requests for HTTP
  
  Using sftp to delete a file with CURLOPT_NOBODY set with a reused
  connection would fail as curl expected to get some data. Thus it would
  retry the command again which fails as the file has already been
  deleted.
  
  Fixes #1243

Jay Satiro (7 Feb 2017)
- [Daniel Gustafsson brought this change]

  telnet: Fix typos
  
  Ref: https://github.com/curl/curl/pull/1245

- [Daniel Gustafsson brought this change]

  test552: Fix typos
  
  Closes https://github.com/curl/curl/pull/1245

- [Daniel Gustafsson brought this change]

  darwinssl: Avoid parsing certificates when not in verbose mode
  
  The information extracted from the server certificates in step 3 is only
  used when in verbose mode, and there is no error handling or validation
  performed as that has already been done. Only run the certificate
  information extraction when in verbose mode and libcurl was built with
  verbose strings.
  
  Closes https://github.com/curl/curl/pull/1246

- [JDepooter brought this change]

  schannel: Remove incorrect SNI disabled message
  
  - Remove the SNI disabled when host verification disabled message
    since that is incorrect.
  
  - Show a message for legacy versions of Windows <= XP that connections
    may fail since those versions of WinSSL lack SNI, algorithms, etc.
  
  Bug: https://github.com/curl/curl/pull/1240

Daniel Stenberg (7 Feb 2017)
- CHANGES: spell fix, use correct path to script

- CHANGES.0: removed
  
  This is the previously manually edited changelog, not touched since Aug
  2015. Still present in git for those who wants it.

Dan Fandrich (6 Feb 2017)
- cmdline-opts: Fixed build and test in out of source tree builds

Viktor Szakats (6 Feb 2017)
- use *.sourceforge.io and misc URL updates
  
  Ref: https://sourceforge.net/blog/introducing-https-for-project-websites/
  Closes: https://github.com/curl/curl/pull/1247

Jay Satiro (6 Feb 2017)
- docs: Add more HTTPS proxy documentation
  
  - Document HTTPS proxy type.
  
  - Document --write-out %{proxy_ssl_verify_result}.
  
  - Document SOCKS proxy + HTTP/HTTPS proxy combination.
  
  HTTPS proxy support was added in 7.52.0 for OpenSSL, GnuTLS and NSS.
  
  Ref: https://github.com/curl/curl/commit/cb4e2be

- OS400: Fix symbols
  
  - s/CURLOPT_SOCKS_PROXY/CURLOPT_PRE_PROXY
    Follow-up to 7907a2b and 845522c.
  
  - Fix incorrect id for CURLOPT_PROXY_PINNEDPUBLICKEY.
  
  - Add id for CURLOPT_ABSTRACT_UNIX_SOCKET.
  
  Bug: https://github.com/curl/curl/issues/1237
  Reported-by: jonrumsey@users.noreply.github.com

- [Sean Burford brought this change]

  cmake: Support curl --xattr when built with cmake
  
  - Test for and set HAVE_FSETXATTR when support for extended file
    attributes is present.
  
  Closes https://github.com/curl/curl/pull/1176

- [Adam Langley brought this change]

  openssl: Don't use certificate after transferring ownership
  
  SSL_CTX_add_extra_chain_cert takes ownership of the given certificate
  while, despite the similar name, SSL_CTX_add_client_CA does not. Thus
  it's best to call SSL_CTX_add_client_CA before
  SSL_CTX_add_extra_chain_cert, while the code still has ownership of the
  argument.
  
  Closes https://github.com/curl/curl/pull/1236

Daniel Stenberg (29 Jan 2017)
- [Antoine Aubert brought this change]

  mbedtls: implement CTR-DRBG and HAVEGE random generators
  
  closes #1227

- docs: we no longer ship HTML versions of man pages
  
  ... refer to the web site for the web versions.

- [railsnewbie257 brought this change]

  docs: proofread README.netware README.win32
  
  Closes #1231

- RELEASE-NOTES; synced with ab08d82648

Michael Kaufmann (28 Jan 2017)
- mbedtls: disable TLS session tickets
  
  SSL session reuse with TLS session tickets is not supported yet.
  Use SSL session IDs instead.
  
  See https://github.com/curl/curl/issues/1109

- gnutls: disable TLS session tickets
  
  SSL session reuse with TLS session tickets is not supported yet.
  Use SSL session IDs instead.
  
  Fixes https://github.com/curl/curl/issues/1109

- polarssl: fix hangs
  
  This bugfix is similar to commit c111178bd4.

Daniel Stenberg (27 Jan 2017)
- cookies: do not assume a valid domain has a dot
  
  This repairs cookies for localhost.
  
  Non-PSL builds will now only accept "localhost" without dots, while PSL
  builds okeys everything not listed as PSL.
  
  Added test 1258 to verify.
  
  This was a regression brought in a76825a5efa6b4

- TODO: remove "Support TLS v1.3"
  
  Support is trickling in already.

- [railsnewbie257 brought this change]

  INTERNALS.md: language improvements
  
  Closes #1226

- telnet: fix windows compiler warnings
  
  Thumbs-up-by: Jay Satiro
  
  Closes #1225

- VC: remove the makefile.vc6 build infra
  
  The winbuild/ build files is now the single MSVC makefile build choice.
  
  Closes #1215

- [Jay Satiro brought this change]

  cmdline-opts/gen.pl: Open input files in CRLF mode
  
  On Windows it's possible to have input files with CRLF line endings and
  a perl that defaults to LF line endings (eg msysgit). Currently that
  results in generator output of mixed line endings of CR, LF and CRLF.
  
  This change fixes that issue in the most succinct way by opening the
  files in :crlf text mode even when the perl being used does not default
  to that mode. (On operating systems that don't have a separate text mode
  it's essentially a no-op.) The output continues to be in the perl's
  native line ending.

- docs/curl.1: generate from the cmdline-opts script

- vtls: source indentation fix

- contri*.sh: cut off parentheses from names too

- RELEASE-NOTES: synced with 01ab7c30bba6f

- vtls: fix PolarSSL non-blocking handling
  
  A regression brought in cb4e2be
  
  Reported-by: Michael Kaufmann
  Bug: https://github.com/curl/curl/issues/1174#issuecomment-274018791

- [Antoine Aubert brought this change]

  vtls: fix mbedtls multi non blocking handshake.
  
  When using multi, mbedtls handshake is in non blocking mode.  vtls must
  set wait for read/write flags for the socket.
  
  Closes #1223

- [Richy Kim brought this change]

  CURLOPT_BUFFERSIZE: support enlarging receive buffer
  
  Replace use of fixed macro BUFSIZE to define the size of the receive
  buffer.  Reappropriate CURLOPT_BUFFERSIZE to include enlarging receive
  buffer size.  Upon setting, resize buffer if larger than the current
  default size up to a MAX_BUFSIZE (512KB). This can benefit protocols
  like SFTP.
  
  Closes #1222

- sws: use SOCKERRNO, not errno
  
  Reported-by: Gisle Vanem

Michael Kaufmann (19 Jan 2017)
- KNOWN_BUGS: HTTP/2 server push enabled when no pushes can be accepted
  
  This has been implemented with commit 9ad034e.

Viktor Szakats (19 Jan 2017)
- *.rc: escape non-ASCII/non-UTF-8 character for clarity
  
  Closes https://github.com/curl/curl/pull/1217

Kamil Dudka (19 Jan 2017)
- docs: non-blocking SSL handshake is now supported with NSS
  
  Implemented since curl-7_36_0-130-g8868a22
  
  Reported-by: Fahim Chandurwala

Michael Kaufmann (18 Jan 2017)
- CURLOPT_CONNECT_TO: Fix compile warnings
  
  Fix compile warnings that appeared only when curl has been configured
  with '--disable-verbose'.

Daniel Stenberg (18 Jan 2017)
- usercertinmem.c: improve the short description

- parseurl: move back buffer to function scope
  
  Regression since 1d4202ad, which moved the buffer into a more narrow
  scope, but the data in that buffer was used outside of that more narrow
  scope.
  
  Reported-by: Dan Fandrich
  Bug: https://curl.haxx.se/mail/lib-2017-01/0093.html

Jay Satiro (17 Jan 2017)
- openssl: Fix random generation
  
  - Fix logic error in Curl_ossl_random.
  
  Broken a few days ago in 807698d.

Daniel Stenberg (17 Jan 2017)
- TODO: share OpenSSL contexts
  
  By supporting this, subsequent connects would load a lot less data from
  disk.
  
  Closes #1110

- bump: next release will be 7.53.0

Kamil Dudka (15 Jan 2017)
- nss: use the correct lock in nss_find_slot_by_name()

Alessandro Ghedini (15 Jan 2017)
- http2: disable server push if not requested
  
  Ref: https://github.com/curl/curl/pull/1160

Daniel Stenberg (14 Jan 2017)
- [railsnewbie257 brought this change]

  docs: improved language in README.md HISTORY.md CONTRIBUTE.md
  
  Closes #1211

Alessandro Ghedini (14 Jan 2017)
- http: print correct HTTP string in verbose output when using HTTP/2
  
  Before:
  ```
   % src/curl https://sigsegv.ninja/ -v --http2
  ...
  > GET / HTTP/1.1
  > Host: sigsegv.ninja
  > User-Agent: curl/7.52.2-DEV
  > Accept: */*
  >
  ...
  ```
  
  After:
  ```
   % src/curl https://sigsegv.ninja/ -v --http2
  ...
  > GET / HTTP/2
  > Host: sigsegv.ninja
  > User-Agent: curl/7.52.2-DEV
  > Accept: */*
  >
  ```

Daniel Stenberg (14 Jan 2017)
- TODO: send only part of --data
  
  Closes #1200

- TODO: implemened "--fail-fast to exit on first transfer fail"
  
  Even though it is called --fail-early

- TODO: Chunked transfer multipart formpost
  
  Closes #1139

- TODO: Improve formpost API, not just add an easy argument

- addrinfo: fix compiler warning on offsetof() use
  
  curl_addrinfo.c:519:20: error: conversion to ‘curl_socklen_t {aka
  unsigned int}’ from ‘long unsigned int’ may alter its value
  [-Werror=conversion]
  
  Follow-up to 1d786faee1046f

- THANKS-filter: Jiri Malak

- RELEASE-NOTES: synced with a7c73ae309c

Peter Wu (13 Jan 2017)
- [Isaac Boukris brought this change]

  unix_socket: add support for abstract unix domain socket
  
  In addition to unix domain sockets, Linux also supports an
  abstract namespace which is independent of the filesystem.
  
  In order to support it, add new CURLOPT_ABSTRACT_UNIX_SOCKET
  option which uses the same storage as CURLOPT_UNIX_SOCKET_PATH
  internally, along with a flag to specify abstract socket.
  
  On non-supporting platforms, the abstract address will be
  interpreted as an empty string and fail gracefully.
  
  Also add new --abstract-unix-socket tool parameter.
  
  Signed-off-by: Isaac Boukris <iboukris@gmail.com>
  Reported-by: Chungtsun Li (typeless)
  Reviewed-by: Daniel Stenberg
  Reviewed-by: Peter Wu
  Closes #1197
  Fixes #1061

Daniel Stenberg (13 Jan 2017)
- write-out.d: 'time_total' is not always shown with ms precision
  
  We have higher resolution since 7.52.0

- next.d: --trace and --trace-ascii are also global

- [Isaac Boukris brought this change]

  curl: reset the easy handle at --next
  
  So that only "global" options (verbose mostly) survive into the next
  transfer, and the others have to be set again unless default is fine.

- [Frank Gevaerts brought this change]

  docs: Add note about libcurl copying strings to CURLOPT_* manpages
  
  Closes #1169

- [Frank Gevaerts brought this change]

  CURLOPT_PREQUOTE.3: takes a struct curl_slist*, not a char*

- IDN: Use TR46 non-transitional
  
  Assisted-by: Tim Rühsen

- IDN: revert use of the transitional option
  
  It made the german ß get converted to ss, IDNA2003 style, and we can't
  have that for the .de TLD - a primary reason for our switch to IDNA2008.
  
  Test 165 verifies.

- [Tim Rühsen brought this change]

  IDN: Fix compile time detection of linidn2 TR46
  
  Follow-up to f30cbcac1
  
  Closes #1207

- [ERAMOTO Masaya brought this change]

  url: --noproxy option overrides NO_PROXY environment variable
  
  Under condition using http_proxy env var, noproxy list was the
  combination of --noproxy option and NO_PROXY env var previously. Since
  this commit, --noproxy option overrides NO_PROXY environment variable
  even if use http_proxy env var.
  
  Closes #1140

- [ERAMOTO Masaya brought this change]

  url: Refactor detect_proxy()
  
  If defined CURL_DISABLE_HTTP, detect_proxy() returned NULL. If not
  defined CURL_DISABLE_HTTP, detect_proxy() checked noproxy list.
  
  Thus refactor to set proxy to NULL instead of calling detect_proxy() if
  define CURL_DISABLE_HTTP, and refactor to call detect_proxy() if not
  define CURL_DISABLE_HTTP and the host is not in the noproxy list.

- [ERAMOTO Masaya brought this change]

  url: Fix NO_PROXY env var to work properly with --proxy option.
  
  The combination of --noproxy option and http_proxy env var works well
  both for proxied hosts and non-proxied hosts.
  
  However, when combining NO_PROXY env var with --proxy option,
  non-proxied hosts are not reachable while proxied host is OK.
  
  This patch allows us to access non-proxied hosts even if using NO_PROXY
  env var with --proxy option.

- [Tim Rühsen brought this change]

  IDN: Use TR46 'transitional' for toASCII translations
  
  References: http://unicode.org/faq/idn.html
              http://unicode.org/reports/tr46
  
  Closes #1206

- [railsnewbie257 brought this change]

  docs: FAQ MAIL-ETIQUETTE language fixes
  
  Closes #1194

- [Marcus Hoffmann brought this change]

  gnutls: check for alpn and ocsp in configure
  
  Check for presence of gnutls_alpn_* and gnutls_ocsp_* functions during
  configure instead of relying on the version number.  GnuTLS has options
  to turn these features off and we ca just work with with such builds
  like we work with older versions.
  
  Signed-off-by: Marcus Hoffmann <m.hoffmann@cartelsol.com>
  
  Closes #1204

Jay Satiro (12 Jan 2017)
- url: Fix parsing for when 'file' is the default protocol
  
  Follow-up to 3463408.
  
  Prior to 3463408 file:// hostnames were silently stripped.
  
  Prior to this commit it did not work when a schemeless url was used with
  file as the default protocol.
  
  Ref: https://curl.haxx.se/mail/lib-2016-11/0081.html
  Closes https://github.com/curl/curl/pull/1124
  
  Also fix for drive letters:
  
  - Support --proto-default file c:/foo/bar.txt
  
  - Support file://c:/foo/bar.txt
  
  - Fail when a file:// drive letter is detected and not MSDOS/Windows.
  
  Bug: https://github.com/curl/curl/issues/1187
  Reported-by: Anatol Belski
  Assisted-by: Anatol Belski

Daniel Stenberg (12 Jan 2017)
- rand: make it work without TLS backing
  
  Regression introduced in commit f682156a4fc6c4
  
  Reported-by: John Kohl
  Bug: https://curl.haxx.se/mail/lib-2017-01/0055.html

Jay Satiro (12 Jan 2017)
- STARTTLS: Don't print response character in denied messages
  
  Both IMAP and POP3 response characters are used internally, but when
  appended to the STARTTLS denial message likely could confuse the user.
  
  Closes https://github.com/curl/curl/pull/1203

- smtp: Fix STARTTLS denied error message
  
  - Format the numeric denial code as an integer instead of a character.

Daniel Stenberg (11 Jan 2017)
- http2_send: avoid unsigned integer wrap around
  
  ... when checking for a too large request.

Jay Satiro (9 Jan 2017)
- [Jiri Malak brought this change]

  cmake: Fix passing _WINSOCKAPI_ macro to compiler
  
  Define _WINSOCKAPI_ blank rather than to 1 in order to match the value
  used by Microsoft's winsock header files.
  
  Closes https://github.com/curl/curl/pull/1195

Daniel Stenberg (9 Jan 2017)
- sws: retry send() on EWOULDBLOCK
  
  Fixes spurious test 1060 and 1061 failures on OpenBSD, Solaris and more.
  
  Bug: https://curl.haxx.se/mail/lib-2017-01/0009.html
  Reported-by: Christian Weisgerber

- RELEASE-NOTES: synced with a41e8592d6b3e58

- examples: make the C++ examples follow our code style too
  
  At least mostly, not counting // comments.

- [Aulddays brought this change]

  asiohiper: improved socket handling
  
  libcurl requires CURLMOPT_SOCKETFUNCTION to KEEP watching socket events
  and notify back. Modify event_cb() to continue watching events when
  fired.
  
  Fixes #1191
  Closes #1192
  Fixed-by: Mingliang Zhu

- [Jiří Malák brought this change]

  lib506: fix build for Open Watcom
  
  Rename symbol lock to locks to not clash with OW CRTL function name.
  
  Closes #1196

- ROADMAP: 2017 cleanup
  
  Removed items already fixed, clarified a few others.

- COPYING: update the generic copyright year range

- docs/silent: mention --show-error in --silent description
  
  Reported in #1190
  Reported-by: Dan Jacobson

- docs/page-header: mention how to disable the progress meter
  
  curl.1 is regenerated
  
  Fixes #1190

Dan Fandrich (7 Jan 2017)
- wolfssl: display negotiated SSL version and cipher

- wolfssl: support setting cipher list

Patrick Monnerat (6 Jan 2017)
- CIPHERS.md: document GSKit ciphers

Jay Satiro (5 Jan 2017)
- [peterpih brought this change]

  TheArtOfHttpScripting: grammar

Nick Zitzmann (3 Jan 2017)
- darwinssl: --insecure overrides --cacert if both settings are in use
  
  Fixes #1184

Jay Satiro (2 Jan 2017)
- docs/libcurl: TCP_KEEPALIVE start and interval default to 60
  
  Since the TCP keep-alive options were added in 705f0f7 the start and
  interval default values have been 60, but that wasn't documented.
  
  Bug: https://curl.haxx.se/mail/lib-2017-01/0000.html
  Reported-by: Praveen Pvs

Daniel Stenberg (29 Dec 2016)
- curl.h: CURLE_FUNCTION_NOT_FOUND is no longer in use
  
  This error code was once introduced when some library was dynamically
  loaded and a funciton within said library couldn't be found.

- content_encoding: change return code on a failure
  
  Failure to decompress is now a write error instead of the weird
  "function not found".

- page-footer: error 36 is protocol agnostic!

Jay Satiro (28 Dec 2016)
- tool_operate: Fix --remote-time incorrect times on Windows
  
  - Use Windows API SetFileTime to set the file time instead of utime.
  
  Avoid utime on Windows if possible because it may apply a daylight
  saving time offset to our UTC file time.
  
  Bug: https://curl.haxx.se/mail/archive-2016-11/0033.html
  Reported-by: Tim
  
  Closes https://github.com/curl/curl/pull/1121

Daniel Stenberg (29 Dec 2016)
- [Max Khon brought this change]

  digest_sspi: copy terminating NUL as well
  
  Curl_auth_decode_digest_http_message(): copy terminating NUL as later
  Curl_override_sspi_http_realm() expects a NUL-terminated string.
  
  Fixes #1180

- curl_formadd.3: CURLFORM_CONTENTSLENGTH not needed when chunked
  
  Mentioned in #1013

- [Kyselgov E.N brought this change]

  cmake: use crypt32.lib when building with OpenSSL on windows
  
  Reviewed-by: Peter Wu
  Closes #1149
  Fixes #1147

- [Chris Araman brought this change]

  darwinssl: fix CFArrayRef leak
  
  Reviewed-by: Nick Zitzmann
  Closes #1173

- [Chris Araman brought this change]

  darwinssl: fix iOS build
  
  Reviewed-by: Nick Zitzmann
  Fixes #1172

- curl: remove superfluous include file
  
  The <netinet/tcp.h> is a leftover from the past when TCP socket options
  were set in this file. This include causes build issues on AIX 4.3.
  
  Reported-by: Kim Minjoong
  
  Closes #1178

- RELEASE-NOTES: synced with a7b38c9dc98481e

- vtls: s/SSLEAY/OPENSSL
  
  Fixed an old leftover use of the USE_SSLEAY define which would make a
  socket get removed from the applications sockets to monitor when the
  multi_socket API was used, leading to timeouts.
  
  Bug: #1174

- docs/ciphers: link to our own new page about ciphers
  
  ... as the former ones always go stale!

- cmdline-opts/page-footer: add three more exit codes
  
  ... and regenerated curl.1

- formdata: use NULL, not 0, when returning pointers

- ftp: failure to resolve proxy should return that error code

- configure: accept --with-libidn2 instead
  
  ... which the help text already implied since we switched to libidn2
  from libidn in commit 9c91ec778104ae3b back in October 2016.
  
  Reported-by: Christian Weisgerber
  Bug: https://curl.haxx.se/mail/lib-2016-12/0110.html

- test1282: verify the ftp-gss check

- ftp-gss: check for init before use
  
  To avoid dereferencing a NULL pointer.
  
  Reported-by: Daniel Romero

Jay Satiro (24 Dec 2016)
- build-wolfssl: Sync config with wolfSSL 3.10
  
  wolfSSL configure script relevant changes from 3.9 to 3.10:
  
  - DES3 no longer enabled by default
  - Shamir no longer enabled by default
  - Extended master secret enabled by default
  - RSA and ECC timing protections enabled by default
  
  For backwards compatibility I enabled DES3 and ECC shamir config options
  (ie no change from 3.9), and the other changes are included.

- cyassl: use time_t instead of long for timeout

Daniel Stenberg (23 Dec 2016)
- bump: toward next release

- http: remove "Curl_http_done: called premature" message
  
  ... it only confuses people.

- openssl-random: check return code when asking for random
  
  and fail appropriately if it returns error

- gnutls-random: check return code for failed random

Version 7.52.1 (22 Dec 2016)

Daniel Stenberg (22 Dec 2016)
- RELEASE-NOTES: curl 7.52.1

- lib557.c: use a shorter MAXIMIZE representation
  
  Since several compilers had problems with the previous one
  
  Reported-by: Ray Satiro
  Bug: https://curl.haxx.se/mail/lib-2016-12/0098.html

- runtests: remove the valgrind parser
  
  Old legacy parsing that 1) hid problems for us and 2) probably isn't
  needed anymore.

- [Kamil Dudka brought this change]

  randit: store the value in the buffer

- tests/Makefile: run checksrc on debug builds
  
  ... just like we already do in src/ and lib/

- lib557: move the "enable LONGLINE" to allow more long lines
  
  This file is riddled with them...

- bump: toward next release

Marcel Raad (21 Dec 2016)
- lib: fix MSVC compiler warnings
  
  Visual C++ complained:
  warning C4267: '=': conversion from 'size_t' to 'long', possible loss of data
  warning C4701: potentially uninitialized local variable 'path' used

Version 7.52.0 (20 Dec 2016)

Daniel Stenberg (20 Dec 2016)
- THANKS: 13 new contributors from 7.52.0

- RELEASE-NOTES: 7.52.0

- ssh: inhibit coverity warning with (void)
  
  CID 1397391 (#1 of 1): Unchecked return value (CHECKED_RETURN)

- Curl_recv_has_postponed_data: silence compiler warnings
  
  Follow-up to d00f2a8f2

Jay Satiro (19 Dec 2016)
- tests: checksrc compliance

- http_proxy: Fix proxy CONNECT hang on pending data
  
  - Check for pending data before waiting on the socket.
  
  Bug: https://github.com/curl/curl/issues/1156
  Reported-by: Adam Langley

Daniel Stenberg (19 Dec 2016)
- cmdline-opts/tlsv1.d: rephrased

- [Dan McNulty brought this change]

  schannel: fix wildcard cert name validation on Win CE
  
  Fixes a few issues in manual wildcard cert name validation in
  schannel support code for Win32 CE:
  - when comparing the wildcard name to the hostname, the wildcard
    character was removed from the cert name and the hostname
    was checked to see if it ended with the modified cert name.
    This allowed cert names like *.com to match the connection
    hostname. This violates recommendations from RFC 6125.
  - when the wildcard name in the certificate is longer than the
    connection hostname, a buffer overread of the connection
    hostname buffer would occur during the comparison of the
    certificate name and the connection hostname.

- printf: fix floating point buffer overflow issues
  
  ... and add a bunch of floating point printf tests

- config-amigaos.h: (embarrassed) made the line shorter

- config-amigaos.h: fix bug report email reference

- RELEASE-NOTES: synced with 4517158abfeba

- CIPHERS.md: backtick the names to show underscores fine

- form-string.d: fix format mistake
  
  and regenerated curl.1
  
  Reported-by: Gisle Vanem

Michael Kaufmann (18 Dec 2016)
- openssl: simplify expression in Curl_ossl_version

- curl_easy_recv: Improve documentation and example program
  
  Follow-up to 82245ea: Fix the example program sendrecv.c (handle
  CURLE_AGAIN, handle incomplete send). Improve the documentation
  for curl_easy_recv() and curl_easy_send().
  
  Reviewed-by: Frank Meier
  Assisted-by: Jay Satiro
  
  See https://github.com/curl/curl/pull/1134

- [Isaac Boukris brought this change]

  Curl_getconnectinfo: avoid checking if the connection is closed
  
  It doesn't benefit us much as the connection could get closed at
  any time, and also by checking we lose the ability to determine
  if the socket was closed by reading zero bytes.
  
  Reported-by: Michael Kaufmann
  
  Closes https://github.com/curl/curl/pull/1134

Daniel Stenberg (18 Dec 2016)
- CIPHERS.md: attempt to document TLS cipher names
  
  As the official docs seems really hard to keep track of and link to over
  time

- curl.1: generated after 6cce4dbf830

- cmdline-opts/post30X.d: fix the RFC references

- curl.1: regenerated
  
  Fixed trailing whitespace and numerous formatting glitches

- cmdline-opts: formatting fixes

- curl_easy_setopt.3: removed CURLOPT_SOCKS_PROXYTYPE

- tool_getparam.c: make comments use the up-to-date option names

- manpage-scan.pl: allow deprecated options to get removed from curl.1
  
  --krb4, --ftp-ssl and --ftp-ssl-reqd no longer need to be documented in the
  man page

- cmdline-opts/gen.pl: trim off trailing spaces

- cmdline-opts/proxy-tlsuser.d: remove trailing .d

- curl_easy_setopt.3: CURLOPT_PRE_PROXY instead of CURLOPT_SOCKS_PROXY

- symbols: removed two, added one

- cmdline-opts: include the man page split up files in the dist

- curl.1: generated with gen.pl
  
  This is the first time we replace the manually edited curt.1 with the
  generated one created by gen.pl and the individual option documentation
  pages.
  
  Do not edit this file, edit the individual pages and regenerate this
  output.
  
  This file will be generated by the build system soon and then removed
  from git.

- cmdline-opts: added some missing info

- CURLINFO_SSL_VERIFYRESULT.3: language

- HTTPS-PROXY docs: update/polish

- cmdline-opts/page-header: mention it is generated
  
  ... to avoid people from trying to edit the pending curl.1 version that
  gets generated by gen.pl

- preproxy: renamed what was added as SOCKS_PROXY
  
  CURLOPT_SOCKS_PROXY -> CURLOPT_PRE_PROXY
  
  Added the corresponding --preroxy command line option. Sets a SOCKS
  proxy to connect to _before_ connecting to a HTTP(S) proxy.

- curl: normal socks proxies still use CURLOPT_PROXY
  
  ... the newly introduced CURLOPT_SOCKS_PROXY is special and should be
  asked for specially. (Needs new code.)
  
  Unified proxy type to a single variable in the config struct.

- CURLOPT_SOCKS_PROXYTYPE: removed
  
  This was added as part of the SOCKS+HTTPS proxy merge but there's no
  need to support this as we prefer to have the protocol specified as a
  prefix instead.

- curl_multi_socket.3: fix typo

- checksrc: warn for assignments within if() expressions
  
  ... they're already frowned upon in our source code style guide, this
  now enforces the rule harder.

- checksrc: stricter no-space-before-paren enforcement
  
  In order to make the code style more uniform everywhere

- ISSUE_TEMPLATE: try mentioning known bugs/todo in new issue template

- RELEASE-NOTES: synced with 71a55534fa6

- [Adam Langley brought this change]

  openssl: don't use OpenSSL's ERR_PACK.
  
  ERR_PACK is an internal detail of OpenSSL. Also, when using it, a
  function name must be specified which is overly specific: the test will
  break whenever OpenSSL internally change things so that a different
  function creates the error.
  
  Closes #1157

Dan Fandrich (5 Dec 2016)
- test2032: Mark test as flaky

Jay Satiro (3 Dec 2016)
- [Jeremy Pearson brought this change]

  libcurl-multi.3: typo
  
  Closes https://github.com/curl/curl/pull/1153

Dan Fandrich (2 Dec 2016)
- test1281: added http as a required feature

Daniel Stenberg (2 Dec 2016)
- curl: support zero-length argument strings in config files
  
  ... like 'user-agent = ""'
  
  Adjusted test 71 to verify.

- http_proxy: simplify CONNECT response reading
  
  Since it now reads responses one byte a time, a loop could be removed
  and it is no longer limited to get the whole response within 16K, it is
  now instead only limited to 16K maximum header line lengths.

- tests: fix CONNECT test cases to be more strict
  
  ... as they broke with the cleaned up CONNECT handling

- CONNECT: read responses one byte at a time
  
  ... so that it doesn't read data that is actually coming from the
  remote. 2xx responses have no body from the proxy, that data is from the
  peer.
  
  Fixes #1132

- CONNECT: reject TE or CL in 2xx responses
  
  A server MUST NOT send any Transfer-Encoding or Content-Length header
  fields in a 2xx (Successful) response to CONNECT. (RFC 7231 section
  4.3.6)
  
  Also fixes the three test cases that did this.

- URL parser: reject non-numerical port numbers
  
  Test 1281 added to verify

Dan Fandrich (30 Nov 2016)
- runtests: made Servers: output be more consistent by removing OFF

- cyassl: fixed typo introduced in 4f8b1774

Michael Kaufmann (30 Nov 2016)
- CURLOPT_CONNECT_TO: Skip non-matching "connect-to" entries properly
  
  If a port number in a "connect-to" entry does not match, skip this
  entry instead of connecting to port 0.
  
  If a port number in a "connect-to" entry matches, use this entry
  and look no further.
  
  Reported-by: Jay Satiro
  Assisted-by: Jay Satiro, Daniel Stenberg
  
  Closes #1148

Daniel Stenberg (29 Nov 2016)
- BUGS: describe bug handling process

- RELEASE-NOTES: synced with 19613fb3

Jay Satiro (28 Nov 2016)
- http2: check nghttp2_session_set_local_window_size exists
  
  The function only exists since nghttp2 1.12.0.
  
  Bug: https://github.com/curl/curl/commit/a4d8888#commitcomment-19985676
  Reported-by: Michael Kaufmann

Daniel Stenberg (28 Nov 2016)
- [Anders Bakken brought this change]

  http2: Fix crashes when parent stream gets aborted
  
  Closes #1125

- cmdline-docs: more options converted and fixed
  
  Now all options are in the new system.

- gen: include footer in mainpage output

Jay Satiro (28 Nov 2016)
- lib1536: checksrc compliance

Daniel Stenberg (28 Nov 2016)
- cmdline-opts: more command line options documented
  
  Moved over to the new format

- curl: remove --proxy-ssl* options
  
  There's mostly likely no need to allow setting SSLv2/3 version for HTTPS
  proxy. Those protocols are insecure by design and deprecated.

- CURLOPT_PROXY_*.3: polished some proxy option man pages

Patrick Monnerat (26 Nov 2016)
- os400: support CURLOPT_PROXY_PINNEDPUBLICKEY
  
  Also define it in ILE/RPG binding.

Daniel Stenberg (26 Nov 2016)
- [Okhin Vasilij brought this change]

  curl_version_info: add CURL_VERSION_HTTPS_PROXY
  
  Closes #1142

- [Frank Gevaerts brought this change]

  tests: Add some testcases for recent new features.
  
  Add missing tests for CURLINFO_SCHEME, CURLINFO_PROTOCOL, %{scheme},
  and %{http_version}
  
  closes #1143

- [Frank Gevaerts brought this change]

  curl_easy_reset: clear info for CULRINFO_PROTOCOL and CURLINFO_SCHEME

- CURLOPT_PROXY_CAINFO.3: clarify proxy use

- CURLOPT_PROXY_CRLFILE.3: clarify https proxy and availability

- curl_easy_setopt.3: add CURLOPT_PROXY_PINNEDPUBLICKEY
  
  Follow-up to 4f8b17743d7c55a

- docs: include all opts man pages in dist
  
  Sorted the lists too.
  
  ... and include the new ones in the PDF and HTML generation targets

- [Thomas Glanzmann brought this change]

  HTTPS Proxy: Implement CURLOPT_PROXY_PINNEDPUBLICKEY

- [Thomas Glanzmann brought this change]

  url: proxy: Use 443 as default port for https proxies

- TODO: removed "HTTPS proxy"

- [Jan-E brought this change]

  winbuild: add config option ENABLE_NGHTTP2
  
  Closes #1141

Jay Satiro (24 Nov 2016)
- tool_urlglob: Improve sanity check in glob_range
  
  Prior to this change we depended on errno if strtol could not perform a
  conversion. POSIX says EINVAL *may* be set. Some implementations like
  Microsoft's will not set it if there's no conversion.
  
  Ref: https://github.com/curl/curl/commit/ee4f7660#commitcomment-19658189

- tool_help: Change description for --retry-connrefused
  
  Ref: https://github.com/curl/curl/pull/1064#issuecomment-260052409

Patrick Monnerat (25 Nov 2016)
- os400: sync ILE/RPG binding

Jay Satiro (24 Nov 2016)
- test1135: Fix curl_easy_duphandle prototype for code style
  
  Follow-up to dbadaeb which changed the style.

- x509asn1: Restore the parameter check in Curl_getASN1Element
  
  - Restore the removed parts of the parameter check.
  
  Follow-up to 945f60e which altered the parameter check.

Daniel Stenberg (25 Nov 2016)
- RELEASE-NOTES: update option counters

- [Frank Gevaerts brought this change]

  add CURLINFO_SCHEME, CURLINFO_PROTOCOL, and %{scheme}
  
  Adds access to the effectively used protocol/scheme to both libcurl and
  curl, both in string and numeric (CURLPROTO_*) form.
  
  Note that the string form will be uppercase, as it is just the internal
  string.
  
  As these strings are declared internally as const, and all other strings
  returned by curl_easy_getinfo() are de-facto const as well, string
  handling in getinfo.c got const-ified.
  
  Closes #1137

- RELEASE-NOTES: synced with 63198a4750aeb

- curl.1: the new --proxy options ship in 7.52.0

- checksrc: move open braces to comply with function declaration style

- checksrc: detect wrongly placed open braces in func declarations

- checksrc: white space edits to comply to stricter checksrc

- checksrc: verify ASTERISKNOSPACE
  
  Detects (char*) and 'char*foo' uses.

- checksrc: code style: use 'char *name' style

- checksrc: add ASTERISKSPACE
  
  Verifies a 'char *name' style, with no space after the asterisk.

- openssl: remove dead code
  
  Coverity CID 1394666

- [Okhin Vasilij brought this change]

  HTTPS-proxy: fixed mbedtls and polishing

- darwinssl: adopted to the HTTPS proxy changes
  
  It builds and runs all test cases. No adaptations for actual HTTPS proxy
  support has been made.

- gtls: fix indent to silence compiler warning
  
  vtls/gtls.c: In function ‘Curl_gtls_data_pending’:
  vtls/gtls.c:1429:3: error: this ‘if’ clause does not guard... [-Werror=misleading-indentation]
     if(conn->proxy_ssl[connindex].session &&
        ^~
        vtls/gtls.c:1433:5: note: ...this statement, but the latter is misleadingly indented as if it is guarded by the ‘if’
             return res;

- [Thomas Glanzmann brought this change]

  mbedtls: Fix compile errors

- [Alex Rousskov brought this change]

  proxy: Support HTTPS proxy and SOCKS+HTTP(s)
  
  * HTTPS proxies:
  
  An HTTPS proxy receives all transactions over an SSL/TLS connection.
  Once a secure connection with the proxy is established, the user agent
  uses the proxy as usual, including sending CONNECT requests to instruct
  the proxy to establish a [usually secure] TCP tunnel with an origin
  server. HTTPS proxies protect nearly all aspects of user-proxy
  communications as opposed to HTTP proxies that receive all requests
  (including CONNECT requests) in vulnerable clear text.
  
  With HTTPS proxies, it is possible to have two concurrent _nested_
  SSL/TLS sessions: the "outer" one between the user agent and the proxy
  and the "inner" one between the user agent and the origin server
  (through the proxy). This change adds supports for such nested sessions
  as well.
  
  A secure connection with a proxy requires its own set of the usual SSL
  options (their actual descriptions differ and need polishing, see TODO):
  
    --proxy-cacert FILE        CA certificate to verify peer against
    --proxy-capath DIR         CA directory to verify peer against
    --proxy-cert CERT[:PASSWD] Client certificate file and password
    --proxy-cert-type TYPE     Certificate file type (DER/PEM/ENG)
    --proxy-ciphers LIST       SSL ciphers to use
    --proxy-crlfile FILE       Get a CRL list in PEM format from the file
    --proxy-insecure           Allow connections to proxies with bad certs
    --proxy-key KEY            Private key file name
    --proxy-key-type TYPE      Private key file type (DER/PEM/ENG)
    --proxy-pass PASS          Pass phrase for the private key
    --proxy-ssl-allow-beast    Allow security flaw to improve interop
    --proxy-sslv2              Use SSLv2
    --proxy-sslv3              Use SSLv3
    --proxy-tlsv1              Use TLSv1
    --proxy-tlsuser USER       TLS username
    --proxy-tlspassword STRING TLS password
    --proxy-tlsauthtype STRING TLS authentication type (default SRP)
  
  All --proxy-foo options are independent from their --foo counterparts,
  except --proxy-crlfile which defaults to --crlfile and --proxy-capath
  which defaults to --capath.
  
  Curl now also supports %{proxy_ssl_verify_result} --write-out variable,
  similar to the existing %{ssl_verify_result} variable.
  
  Supported backends: OpenSSL, GnuTLS, and NSS.
  
  * A SOCKS proxy + HTTP/HTTPS proxy combination:
  
  If both --socks* and --proxy options are given, Curl first connects to
  the SOCKS proxy and then connects (through SOCKS) to the HTTP or HTTPS
  proxy.
  
  TODO: Update documentation for the new APIs and --proxy-* options.
  Look for "Added in 7.XXX" marks.

Patrick Monnerat (24 Nov 2016)
- Declare endian read functions argument as a const pointer.
  This is done for all functions of the form Curl_read[136][624]_[lb]e.

- Limit ASN.1 structure sizes to 256K. Prevent some allocation size overflows.
  See CRL-01-006.

Jay Satiro (22 Nov 2016)
- url: Fix conn reuse for local ports and interfaces
  
  - Fix connection reuse for when the proposed new conn 'needle' has a
  specified local port but does not have a specified device interface.
  
  Bug: https://curl.haxx.se/mail/lib-2016-11/0137.html
  Reported-by: bjt3[at]hotmail.com

Daniel Stenberg (21 Nov 2016)
- rand: pass in number of randoms as an unsigned argument

Jay Satiro (20 Nov 2016)
- rand: Fix potentially uninitialized result warning

Marcel Raad (19 Nov 2016)
- vtls: fix build warnings
  
  Fix warnings about conversions from long to time_t in openssl.c and
  schannel.c.
  
  Follow-up to de4de4e3c7c

Daniel Stenberg (18 Nov 2016)
- [Marcel Raad brought this change]

  lib: fix compiler warnings after de4de4e3c7c
  
  Visual C++ now complains about implicitly casting time_t (64-bit) to
  long (32-bit). Fix this by changing some variables from long to time_t,
  or explicitly casting to long where the public interface would be
  affected.
  
  Closes #1131

Peter Wu (17 Nov 2016)
- [Isaac Boukris brought this change]

  Don't mix unix domain sockets with regular ones
  
  When reusing a connection, make sure the unix domain
  socket option matches.

Jay Satiro (17 Nov 2016)
- tests: Fix HTTP2-Settings header for huge window size
  
  Follow-up to a4d8888. Changing the window size in that commit resulted
  in a different HTTP2-Settings upgrade header, causing test 1800 to fail.

- http2: Use huge HTTP/2 windows
  
  - Improve performance by using a huge HTTP/2 window size.
  
  Bug: https://github.com/curl/curl/issues/1102
  Reported-by: afrind@users.noreply.github.com
  Assisted-by: Tatsuhiro Tsujikawa

Daniel Stenberg (16 Nov 2016)
- cmdline-docs: more conversion

- gen: support 'protos'
  
  and warn on unrecognized lines

- gen: support 'single' to make an individual page man page

- cmdline-docs: more options converted over

- gen: support 'redirect'
  
  ... and warn for too long --help lines

- cmdline/gen: replace options in texts better

Jay Satiro (16 Nov 2016)
- http2: Fix address sanitizer memcpy warning
  
  - In Curl_http2_switched don't call memcpy when src is NULL.
  
  Curl_http2_switched can be called like:
  
  Curl_http2_switched(conn, NULL, 0);
  
  .. and prior to this change memcpy was then called like:
  
  memcpy(dest, NULL, 0)
  
  .. causing address sanitizer to warn:
  
  http2.c:2057:3: runtime error: null pointer passed as argument 2, which
  is declared to never be null

- tool_help: Clarify --dump-header only writes received headers

- curl.1: Clarify --dump-header only writes received headers

Daniel Stenberg (15 Nov 2016)
- [Alex Chan brought this change]

  docs: Spelling fixes

Kamil Dudka (15 Nov 2016)
- docs: the next release will be 7.52.0

Daniel Stenberg (15 Nov 2016)
- cmdline-opts: support generating the --help output

- [David Schweikert brought this change]

  darwinssl: fix SSL client certificate not found on MacOS Sierra
  
  Reviewed-by: Nick Zitzmann
  
  Closes #1105

- curl: add --fail-early to help output
  
  Fixes test 1139 failures
  
  Follow-up to f82bbe01c8835

- glob: fix [a-c] globbing regression
  
  Brought in ee4f76606cf
  
  Added test case 1280 to verify
  
  Reported-by: Dave Reisner
  
  Bug: https://github.com/curl/curl/commit/ee4f76606cfa4ee068bf28edd37c8dae7e8db317#commitcomment-19823146

- curl: add --fail-early
  
  Exit with an error on the first transfer error instead of continuing to
  do the rest of the URLs.
  
  Discussion: https://curl.haxx.se/mail/archive-2016-11/0038.html

- Curl_rand: fixed and moved to rand.c
  
  Now Curl_rand() is made to fail if it cannot get the necessary random
  level.
  
  Changed the proto of Curl_rand() slightly to provide a number of ints at
  once.
  
  Moved out from vtls, since it isn't a TLS function and vtls provides
  Curl_ssl_random() for this to use.
  
  Discussion: https://curl.haxx.se/mail/lib-2016-11/0119.html

- cmdline-opts: first test version of a new man page generator kit
  
  See MANPAGE.md for the description of how this works. Each command line
  option is now described in a separate .d file.

- time_t fix: follow-up to de4de4e3c7c
  
  Blah, I accidentally wrote size_t instead of time_t for two variables.
  
  Reported-by: Dave Reisner

- timeval: prefer time_t to hold seconds instead of long
  
  ... as long is still 32bit on modern 64bit windows machines, while
  time_t is generally 64bit.

Dan Fandrich (12 Nov 2016)
- tests: fixed variable might be clobbered warning
  
  This stops the compiler from potentially making invalid assumptions
  about the immutability of sdp and sap across the longjmp boundary.

Daniel Stenberg (12 Nov 2016)
- RELEASE-NOTES: synced with 346340808c

- URL-parser: for file://[host]/ URLs, the [host] must be localhost
  
  Previously, the [host] part was just ignored which made libcurl accept
  strange URLs misleading users. like "file://etc/passwd" which might've
  looked like it refers to "/etc/passwd" but is just "/passwd" since the
  "etc" is an ignored host name.
  
  Reported-by: Mike Crowe
  Assisted-by: Kamil Dudka

- test558: adapt to 0649433da

- openssl: make sure to fail in the unlikely event that PRNG seeding fails

- openssl: avoid unnecessary seeding if already done
  
  1.1.0+ does more of this by itself so we can avoid extra processing this
  way.

- openssl: RAND_status always exists in OpenSSL >= 0.9.7
  
  and remove RAND_screen from configure since nothing is using that
  function

- Curl_pgrsUpdate: use dedicated function for time passed

- realloc: use Curl_saferealloc to avoid common mistakes
  
  Discussed: https://curl.haxx.se/mail/lib-2016-11/0087.html

- [Daniel Hwang brought this change]

  curl: Add --retry-connrefused
  
  to consider ECONNREFUSED as a transient error.
  
  Closes #1064

- openssl: raise the max_version to 1.3 if asked for
  
  Now I've managed to negotiate TLS 1.3 with https://enabled.tls13.com/ when
  using boringssl.

Jay Satiro (9 Nov 2016)
- vtls: Fail on unrecognized param for CURLOPT_SSLVERSION
  
  - Fix GnuTLS code for CURL_SSLVERSION_TLSv1_2 that broke when the
  TLS 1.3 support was added in 6ad3add.
  
  - Homogenize across code for all backends the error message when TLS 1.3
  is not available to "<backend>: TLS 1.3 is not yet supported".
  
  - Return an error when a user-specified ssl version is unrecognized.
  
  ---
  
  Prior to this change our code for some of the backends used the
  'default' label in the switch statement (ie ver unrecognized) for
  ssl.version and treated it the same as CURL_SSLVERSION_DEFAULT.
  
  Bug: https://curl.haxx.se/mail/lib-2016-11/0048.html
  Reported-by: Kamil Dudka

Daniel Stenberg (9 Nov 2016)
- [Isaac Boukris brought this change]

  SPNEGO: Fix memory leak when authentication fails
  
  If SPNEGO fails, cleanup the negotiate handle right away.
  
  Fixes #1115
  
  Signed-off-by: Isaac Boukris <iboukris@gmail.com>
  Reported-by: ashman-p

- CODE_STYLE.md: link to INTERNALS.md correctly

- bump: next version will be 7.52.0

- RELEASE-NOTES: synced with dfcdaaba371e9a3

- examples/fileupload.c: fclose the file as well

- printf: fix ".*f" handling
  
  It would always use precision 1 instead of reading it from the argument
  list as intended.
  
  Reported-by: Ray Satiro
  
  Bug: #1113

- curl_formadd.3: *_FILECONTENT and *_FILE need the file to be kept
  
  Reported-by: Frank Gevaerts

Kamil Dudka (7 Nov 2016)
- nss: silence warning 'SSL_NEXT_PROTO_EARLY_VALUE not handled in switch'
  
  ... with nss-3.26.0 and newer
  
  Reported-by: Daniel Stenberg

Daniel Stenberg (7 Nov 2016)
- openssl: initial TLS 1.3 adaptions
  
  BoringSSL supports TLSv1.3 already, but these changes don't seem to be anough
  to get it working.

- ssh: check md5 fingerprints case insensitively (regression)
  
  Revert the change from ce8d09483eea but use the new function
  
  Reported-by: Kamil Dudka
  Bug: https://github.com/curl/curl/commit/ce8d09483eea2fcb1b50e323e1a8ed1f3613b2e3#commitcomment-19666146

Kamil Dudka (7 Nov 2016)
- curl: introduce the --tlsv1.3 option to force TLS 1.3
  
  Fully implemented with the NSS backend only for now.
  
  Reviewed-by: Ray Satiro

- vtls: support TLS 1.3 via CURL_SSLVERSION_TLSv1_3
  
  Fully implemented with the NSS backend only for now.
  
  Reviewed-by: Ray Satiro

- nss: map CURL_SSLVERSION_DEFAULT to NSS default
  
  ... but make sure we use at least TLSv1.0 according to libcurl API
  
  Reported-by: Cure53
  Reviewed-by: Ray Satiro

Daniel Stenberg (7 Nov 2016)
- s/cURL/curl
  
  We're mostly saying just "curl" in lower case these days so here's a big
  cleanup to adapt to this reality. A few instances are left as the
  project could still formally be considered called cURL.

Jay Satiro (7 Nov 2016)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Don't send header fields prohibited by HTTP/2 spec
  
  Previously, we just ignored "Connection" header field.  But HTTP/2
  specification actually prohibits few more header fields.  This commit
  ignores all of them so that we don't send these bad header fields.
  
  Bug: https://curl.haxx.se/mail/archive-2016-10/0033.html
  Reported-by: Ricki Hirner
  
  Closes https://github.com/curl/curl/pull/1092

Daniel Stenberg (7 Nov 2016)
- curl.1: explain the SMTP data expected for -T
  
  Fixes #1107
  
  Reported-by: Adam Piggott

Peter Wu (6 Nov 2016)
- cmake: disable poll for macOS
  
  Mirrors the autotools behavior introduced with curl-7_50_3-83-ga34c7ce.
  
  Fixes #1089

Jay Satiro (5 Nov 2016)
- easy: Initialize info variables on easy init and duphandle
  
  - Call Curl_initinfo on init and duphandle.
  
  Prior to this change the statistical and informational variables were
  simply zeroed by calloc on easy init and duphandle. While zero is the
  correct default value for almost all info variables, there is one where
  it isn't (filetime initializes to -1).
  
  Bug: https://github.com/curl/curl/issues/1103
  Reported-by: Neal Poole

Daniel Stenberg (5 Nov 2016)
- [Mauro Rappa brought this change]

  curl -w: added more decimal digits to timing counters
  
  Now showing microsecond resolution.
  
  Closes #1106

Jakub Zakrzewski (4 Nov 2016)
- dist: add CMakeLists.txt to the tarball

Daniel Stenberg (4 Nov 2016)
- mbedtls: fix build with mbedtls versions < 2.4.0
  
  Regression added in 62a8095e714
  
  Reported-by: Tony Kelman
  
  Discussed in #1087

- configure: verify that compiler groks -Werror=partial-availability
  
  Reported-by: bemoody
  
  Fixes #1104

- docs: shorten and simplify the top comment in multi-uv.c
  
  and change URL to use https

- [Andrei Sedoi brought this change]

  docs: handle CURL_POLL_INOUT in multi-uv example

- [Andrei Sedoi brought this change]

  docs: multi-uv: don't use CURLMsg after cleanup

- [Andrei Sedoi brought this change]

  docs: remove unused variables in multi-uv example

- bump: start working on 7.51.1

- winbuild: remove strcase.obj from curl build
  
  Reported-by: Bruce Stephens
  
  Fixes #1098

Dan Fandrich (2 Nov 2016)
- msvc: removed a straggling reference to strequal.c
  
  Follow-up to 502acba2

Version 7.51.0 (2 Nov 2016)

Daniel Stenberg (2 Nov 2016)
- THANKS: synced with 7.51.0

- RELEASE-NOTES: 7.51.0

- ftp_done: don't clobber the passed in error code
  
  Coverity CID 1374359 pointed out the unused result value.

- ftp: remove dead code in ftp_done
  
  Coverity CID 1374358

Jay Satiro (1 Nov 2016)
- generate.bat: Include include/curl in libcurl VS projects
  
  .. because including those headers helps Visual Studio's Intellisense.

- generate.bat: Remove strcase.[ch] from curl tool VS projects
  
  ..because they're no longer needed in the tool build. strcase is still
  built by the libcurl project and exports curl_str(n)equal which is used
  by the curl tool.
  
  Bug: https://github.com/curl/curl/commit/9363f1a#all_commit_comments

Daniel Stenberg (2 Nov 2016)
- metalink: simplify the hex parsing function
  
  ... and now it avoids using the libcurl toupper() function

Michael Kaufmann (1 Nov 2016)
- file: fix compiler warning
  
  follow-up to 46133aa5

Dan Fandrich (1 Nov 2016)
- strcase: fixed Metalink builds by redefining checkprefix()
  
  ...to use the public function curl_strnequal(). This isn't ideal because
  it adds extra overhead to any internal calls to checkprefix.
  
  follow-up to 95bd2b3e

Daniel Stenberg (1 Nov 2016)
- curl.1: typo

- curl.1: expand on how multiple uses of -o looks
  
  Suggested-by: Dan Jacobson
  Issue: https://github.com/curl/curl/issues/1097

- tests/util: get a private strncasecompare clone
  
  ... since the curlx_* code no longer provides one and we don't link
  libcurl to these test servers.

- strcase: make the tool use curl_str[n]equal instead
  
  As they are after all part of the public API. Saves space and reduces
  complexity. Remove the strcase defines from the curlx_ family.
  
  Suggested-by: Dan Fandrich
  Idea: https://curl.haxx.se/mail/lib-2016-10/0136.html

Kamil Dudka (31 Oct 2016)
- gskit, nss: do not include strequal.h
  
  follow-up to 811a693b80

Dan Fandrich (31 Oct 2016)
- strcasecompare: include curl.h in strcase.c
  
  This should fix the "warning: 'curl_strequal' redeclared without
  dllimport attribute: previous dllimport ignored" message and subsequent
  link error on Windows because of the missing CURL_EXTERN on the
  prototype.

Daniel Stenberg (31 Oct 2016)
- strcase: fix the remaining rawstr users

- msvc builds: s/rawstr/strcase
  
  Follow-up to 811a693b

Dan Fandrich (31 Oct 2016)
- strcasecompare: replaced remaining rawstr.h with strcase.h
  
  This is a followup to commit 811a693b

Marcel Raad (31 Oct 2016)
- digest_sspi: fix include
  
  Fix compile break from 811a693b80

Dan Fandrich (31 Oct 2016)
- libauthretry: use the external function curl_strequal
  
  The internal version strcasecompare isn't available outside libcurl

Daniel Stenberg (31 Oct 2016)
- RELEASE-NOTES: synced with d14538d2501ef0da

- configure: raise the default minimum version for macos to 10.8
  
  follow-up to 4f8d0b6f02aa7043. Since the darwinssl code breaks
  otherwise. If you build without darwinssl 10.5 works fine.

- unit1301: keep testing curl_strequal
  
  as that is still part of the API, fix from 8fe4bd084412f30

- ldap: fix include
  
  Fix bug from 811a693b80

- url: remove unconditional idn2.h include
  
  Mistake brought by 9c91ec778104a

- curl_strequal: part of public API/ABI, needs to be kept
  
  These two public functions have been mentioned as deprecated since a
  very long time but since they are still part of the API and ABI we need
  to keep them around.

- strcase: s/strequal/strcasecompare
  
  some more follow-ups to 811a693b80

- ldap: fix strcase use
  
  follow-up to 811a693b80

- test165: adapted to the libidn2 use and IDNA2008 fix

- cookie: replace use of fgets() with custom version
  
  ... that will ignore lines that are too long to fit in the buffer.
  
  CVE-2016-8615
  
  Bug: https://curl.haxx.se/docs/adv_20161102A.html
  Reported-by: Cure53

- strcasecompare: all case insensitive string compares ignore locale now
  
  We had some confusions on when each function was used. We should not act
  differently on different locales anyway.

- strcasecompare: is the new name for strequal()
  
  ... to make it less likely that we forget that the function actually
  does case insentive compares. Also replaced several invokes of the
  function with a plain strcmp when case sensitivity is not an issue (like
  comparing with "-").

- ftp: check for previous patch must be case sensitive!
  
  ... otherwise example.com/PATH and example.com/path would be assumed to
  be the same and they usually aren't!

- SSH: check md5 fingerprint case sensitively

- connectionexists: use case sensitive user/password comparisons
  
  CVE-2016-8616
  
  Bug: https://curl.haxx.se/docs/adv_20161102B.html
  Reported-by: Cure53

- base64: check for integer overflow on large input
  
  CVE-2016-8617
  
  Bug: https://curl.haxx.se/docs/adv_20161102C.html
  Reported-by: Cure53

- krb5: avoid realloc(0)
  
  If the requested size is zero, bail out with error instead of doing a
  realloc() that would cause a double-free: realloc(0) acts as a free()
  and then there's a second free in the cleanup path.
  
  CVE-2016-8619
  
  Bug: https://curl.haxx.se/docs/adv_20161102E.html
  Reported-by: Cure53

- aprintf: detect wrap-around when growing allocation
  
  On 32bit systems we could otherwise wrap around after 2GB and allocate 0
  bytes and crash.
  
  CVE-2016-8618
  
  Bug: https://curl.haxx.se/docs/adv_20161102D.html
  Reported-by: Cure53

- range: reject char globs with missing end like '[L-]'
  
  ... which previously would lead to out of boundary reads.
  
  Reported-by: Luật Nguyễn

- glob_next_url: make sure to stay within the given output buffer

- range: prevent negative end number in a glob range
  
  CVE-2016-8620
  
  Bug: https://curl.haxx.se/docs/adv_20161102F.html
  Reported-by: Luật Nguyễn

- parsedate: handle cut off numbers better
  
  ... and don't read outside of the given buffer!
  
  CVE-2016-8621
  
  bug: https://curl.haxx.se/docs/adv_20161102G.html
  Reported-by: Luật Nguyễn

- escape: avoid using curl_easy_unescape() internally
  
  Since the internal Curl_urldecode() function has a better API.

- unescape: avoid integer overflow
  
  CVE-2016-8622
  
  Bug: https://curl.haxx.se/docs/adv_20161102H.html
  Reported-by: Cure53

- cookies: getlist() now holds deep copies of all cookies
  
  Previously it only held references to them, which was reckless as the
  thread lock was released so the cookies could get modified by other
  handles that share the same cookie jar over the share interface.
  
  CVE-2016-8623
  
  Bug: https://curl.haxx.se/docs/adv_20161102I.html
  Reported-by: Cure53

- TODO: remove IDNA2008

- idn: switch to libidn2 use and IDNA2008 support
  
  CVE-2016-8625
  
  Bug: https://curl.haxx.se/docs/adv_20161102K.html
  Reported-by: Christian Heimes

- test1246: verify URL parsing with host name ending with '#'

- urlparse: accept '#' as end of host name
  
  'http://example.com#@127.0.0.1/x.txt' equals a request to example.com
  for the '/' document with the rest of the URL being a fragment.
  
  CVE-2016-8624
  
  Bug: https://curl.haxx.se/docs/adv_20161102J.html
  Reported-by: Fernando Muñoz

Jay Satiro (31 Oct 2016)
- INTERNALS: better markdown (follow-up)
  
  - Wrap more words with underscores in backticks.
  
  Follow-up to 13f4913.

Daniel Stenberg (30 Oct 2016)
- INTERNALS: better markdown
  
  words with underscore need to be within `these`
  
  Bug: https://github.com/curl/curl-www/issues/19
  Reported-by : Jay Satiro

Jay Satiro (30 Oct 2016)
- mk-ca-bundle.vbs: Fix UTF-8 output
  
  - Change initial message box to mention delay when downloading/parsing.
  
  Since there is no progress meter it was somewhat unexpected that after
  choosing a filename nothing appears to happen, when actually the cert
  data is in the process of being downloaded and parsed.
  
  - Warn if OpenSSL is not present.
  
  - Use a UTF-8 stream to make the ca-bundle data.
  
  - Save the UTF-8 ca-bundle stream as binary so that no BOM is added.
  
  ---
  
  This is a follow-up to d2c6d15 which switched mk-ca-bundle.vbs output to
  ANSI due to corrupt UTF-8 output, now fixed.
  
  This change completes making the default certificate bundle output of
  mk-ca-bundle.vbs as close as possible to that of mk-ca-bundle.pl, which
  should make it easier to review any difference between their output.
  
  Ref: https://github.com/curl/curl/pull/1012

Daniel Stenberg (28 Oct 2016)
- BINDINGS: converted to markdown
  
  To make it render better on the web site, at the price of it becoming
  slightly less readable as text.

Jay Satiro (27 Oct 2016)
- CURLMOPT_MAX_PIPELINE_LENGTH.3: Clarify it's not for HTTP/2
  
  - Clarify that this option is only for HTTP/1.1 pipelining.
  
  Bug: https://github.com/curl/curl/issues/1059
  Reported-by: Jeroen Ooms
  
  Assisted-by: Daniel Stenberg

Daniel Stenberg (27 Oct 2016)
- KNOWN_BUGS: HTTP/2 server push enabled when no pushes can be accepted
  
  Closes #927

- KNOWN_BUGS: c-ares deviates from stock resolver on http://1346569778
  
  Closes #893

Michael Osipov (27 Oct 2016)
- configure.in: Fix test syntax
  
  Some versions of test allow == for equality, but others (such as the HP-UX
  version) do not.  Use a single = for correctness.
  
  Error output:
  checking for monotonic clock_gettime... ./configure[20445]: ==: A test command parameter is not valid.

Daniel Stenberg (27 Oct 2016)
- SECURITY: minor updates
  
  - we allow the security push up to 48 hours before the release
  
  - add a mention about possible pre-notifications
  
  - lower case the 'curl-security' title

- [Andrei Sedoi brought this change]

  docs: fix req->data in multi-uv example
  
  Closes #1088

- mbedtls: stop using deprecated include file
  
  Reported-by: wyattoday
  Fixes #1087

Kamil Dudka (25 Oct 2016)
- [Martin Frodl brought this change]

  nss: fix tight loop in non-blocking TLS handhsake over proxy
  
  ... in case the handshake completes before entering
  CURLM_STATE_PROTOCONNECT
  
  Bug: https://bugzilla.redhat.com/1388162

Jay Satiro (25 Oct 2016)
- mk-ca-bundle: Update the vbscript version
  
  Bring the VBScript version more in line with the perl version:
  
  - Change timestamp to UTC.
  
  - Change URL retrieval to HTTPS-only by default.
  
  - Comment out the options that disabled SSL cert checking by default.
  
  - Assume OpenSSL is present, get SHA256. And add a flag to toggle it.
  
  - Fix cert issuer name output.
  
  The cert issuer output is now ansi, converted from UTF-8. Prior to this
  it was corrupt UTF-8. It turns out though we can work with UTF-8 the
  FSO object that writes ca-bundle can't write UTF-8, so there will have
  to be some alternative if UTF-8 is needed (like an ADODB.Stream).
  
  - Disable the certificate text info feature.
  
  The certificate text info doesn't work properly with any recent OpenSSL.

Daniel Stenberg (24 Oct 2016)
- TODO: indent code to make it render properly

- TODO: Remove the generated include file

- TODO: add "--retry should resume"
  
  See #1084

- mk-ca-bundle.1: document -k
  
  Brought in 1ad2bdcf110266c. Now does HTTPS by default and needs -k to
  fall back to plain HTTP.

- [Jay Satiro brought this change]

  mk-ca-bundle: Change URL retrieval to HTTPS-only by default
  
  - Change all predefined Mozilla URLs to HTTPS (Gregory Szorc).
  
  - New option -k to allow URLs other than HTTPS and enable HTTP fallback.
  
  Prior to this change the default URL retrieval mode was to fall back to
  HTTP if HTTPS didn't work.
  
  Reported-by: Gregory Szorc
  
  Closes #1012

- RELEASE-NOTES: synced with 50ee3aaf1a9b22d

Dan Fandrich (23 Oct 2016)
- INSTALL.md: Updated minimum file sizes for 7.50.3

Daniel Stenberg (22 Oct 2016)
- multi: force connections to get closed in close_all_connections
  
  Several independent reports on infinite loops hanging in the
  close_all_connections() function when closing a multi handle, can be
  fixed by first marking the connection to get closed before calling
  Curl_disconnect.
  
  This is more fixing-the-symptom rather than the underlying problem
  though.
  
  Bug: https://curl.haxx.se/mail/lib-2016-10/0011.html
  Bug: https://curl.haxx.se/mail/lib-2016-10/0059.html
  
  Reported-by: Dan Fandrich, Valentin David, Miloš Ljumović

- [Anders Bakken brought this change]

  curl_multi_remove_handle: fix a double-free
  
  In short the easy handle needs to be disconnected from its connection at
  this point since the connection still is serving other easy handles.
  
  In our app we can reliably reproduce a crash in our http2 stress test
  that is fixed by this change. I can't easily reproduce the same test in
  a small example.
  
  This is the gdb/asan output:
  
  ==11785==ERROR: AddressSanitizer: heap-use-after-free on address 0xe9f4fb80 at pc 0x09f41f19 bp 0xf27be688 sp 0xf27be67c
  READ of size 4 at 0xe9f4fb80 thread T13 (RESOURCE_HTTP)
      #0 0x9f41f18 in curl_multi_remove_handle /path/to/source/3rdparty/curl/lib/multi.c:666
  
  0xe9f4fb80 is located 0 bytes inside of 1128-byte region [0xe9f4fb80,0xe9f4ffe8)
  freed by thread T13 (RESOURCE_HTTP) here:
      #0 0xf7b1b5c2 in __interceptor_free /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_malloc_linux.cc:45
      #1 0x9f7862d in conn_free /path/to/source/3rdparty/curl/lib/url.c:2808
      #2 0x9f78c6a in Curl_disconnect /path/to/source/3rdparty/curl/lib/url.c:2876
      #3 0x9f41b09 in multi_done /path/to/source/3rdparty/curl/lib/multi.c:615
      #4 0x9f48017 in multi_runsingle /path/to/source/3rdparty/curl/lib/multi.c:1896
      #5 0x9f490f1 in curl_multi_perform /path/to/source/3rdparty/curl/lib/multi.c:2123
      #6 0x9c4443c in perform /path/to/source/src/net/resourcemanager/ResourceManagerCurlThread.cpp:854
      #7 0x9c445e0 in ...
      #8 0x9c4cf1d in ...
      #9 0xa2be6b5 in ...
      #10 0xf7aa5780 in asan_thread_start /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_interceptors.cc:226
      #11 0xf4d3a16d in __clone (/lib/i386-linux-gnu/libc.so.6+0xe716d)
  
  previously allocated by thread T13 (RESOURCE_HTTP) here:
      #0 0xf7b1ba27 in __interceptor_calloc /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_malloc_linux.cc:70
      #1 0x9f7dfa6 in allocate_conn /path/to/source/3rdparty/curl/lib/url.c:3904
      #2 0x9f88ca0 in create_conn /path/to/source/3rdparty/curl/lib/url.c:5797
      #3 0x9f8c928 in Curl_connect /path/to/source/3rdparty/curl/lib/url.c:6438
      #4 0x9f45a8c in multi_runsingle /path/to/source/3rdparty/curl/lib/multi.c:1411
      #5 0x9f490f1 in curl_multi_perform /path/to/source/3rdparty/curl/lib/multi.c:2123
      #6 0x9c4443c in perform /path/to/source/src/net/resourcemanager/ResourceManagerCurlThread.cpp:854
      #7 0x9c445e0 in ...
      #8 0x9c4cf1d in ...
      #9 0xa2be6b5 in ...
      #10 0xf7aa5780 in asan_thread_start /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_interceptors.cc:226
      #11 0xf4d3a16d in __clone (/lib/i386-linux-gnu/libc.so.6+0xe716d)
  
  SUMMARY: AddressSanitizer: heap-use-after-free /path/to/source/3rdparty/curl/lib/multi.c:666 in curl_multi_remove_handle
  Shadow bytes around the buggy address:
    0x3d3e9f20: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9f30: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9f40: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9f50: fd fd fd fd fd fd fd fd fd fd fd fd fd fa fa fa
    0x3d3e9f60: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
  =>0x3d3e9f70:[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9f80: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9f90: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9fa0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9fb0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
    0x3d3e9fc0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  Shadow byte legend (one shadow byte represents 8 application bytes):
    Addressable:           00
    Partially addressable: 01 02 03 04 05 06 07
    Heap left redzone:       fa
    Heap right redzone:      fb
    Freed heap region:       fd
    Stack left redzone:      f1
    Stack mid redzone:       f2
    Stack right redzone:     f3
    Stack partial redzone:   f4
    Stack after return:      f5
    Stack use after scope:   f8
    Global redzone:          f9
    Global init order:       f6
    Poisoned by user:        f7
    Container overflow:      fc
    Array cookie:            ac
    Intra object redzone:    bb
    ASan internal:           fe
    Left alloca redzone:     ca
    Right alloca redzone:    cb
  ==11785==ABORTING
  
  Thread 14 "RESOURCE_HTTP" received signal SIGABRT, Aborted.
  [Switching to Thread 0xf27bfb40 (LWP 12324)]
  0xf7fd8be9 in __kernel_vsyscall ()
   (gdb) bt
   #0  0xf7fd8be9 in __kernel_vsyscall ()
   #1  0xf4c7ee89 in __GI_raise (sig=6) at ../sysdeps/unix/sysv/linux/raise.c:54
   #2  0xf4c803e7 in __GI_abort () at abort.c:89
   #3  0xf7b2ef2e in __sanitizer::Abort () at /opt/toolchain/src/gcc-6.2.0/libsanitizer/sanitizer_common/sanitizer_posix_libcdep.cc:122
   #4  0xf7b262fa in __sanitizer::Die () at /opt/toolchain/src/gcc-6.2.0/libsanitizer/sanitizer_common/sanitizer_common.cc:145
   #5  0xf7b21ab3 in __asan::ScopedInErrorReport::~ScopedInErrorReport (this=0xf27be171, __in_chrg=<optimized out>) at /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_report.cc:689
   #6  0xf7b214a5 in __asan::ReportGenericError (pc=166993689, bp=4068206216, sp=4068206204, addr=3925146496, is_write=false, access_size=4, exp=0, fatal=true) at /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_report.cc:1074
   #7  0xf7b21fce in __asan::__asan_report_load4 (addr=3925146496) at /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_rtl.cc:129
   #8  0x09f41f19 in curl_multi_remove_handle (multi=0xf3406080, data=0xde582400) at /path/to/source3rdparty/curl/lib/multi.c:666
   #9  0x09f6b277 in Curl_close (data=0xde582400) at /path/to/source3rdparty/curl/lib/url.c:415
   #10 0x09f3354e in curl_easy_cleanup (data=0xde582400) at /path/to/source3rdparty/curl/lib/easy.c:860
   #11 0x09c6de3f in ...
   #12 0x09c378c5 in ...
   #13 0x09c48133 in ...
   #14 0x09c4d092 in ...
   #15 0x0a2be6b6 in ...
   #16 0xf7aa5781 in asan_thread_start (arg=0xf2d22938) at /opt/toolchain/src/gcc-6.2.0/libsanitizer/asan/asan_interceptors.cc:226
   #17 0xf5de52b5 in start_thread (arg=0xf27bfb40) at pthread_create.c:333
   #18 0xf4d3a16e in clone () at ../sysdeps/unix/sysv/linux/i386/clone.S:114
  
  Fixes #1083

- testcurl.1: fix the URL to the autobuild summary

- testcurl.1: update URLs

- INSTALL: converted to markdown => INSTALL.md
  
  Also heavily edited for content. Removed lots of old cruft that we added
  like 10+ years ago that is likely incorrect by now.
  
  Also removed INSTALL.devcpp for same reason.

- [Martin Storsjo brought this change]

  configure: Check for other variants of the -m*os*-version-min flags
  
  In addition to -miphoneos-version-min, the same version can be set
  using -mios-version-min. And for WatchOS and TvOS, there's
  -mwatchos-version-min and -mtvos-version-min.

- configure: set min version flags for builds on mac
  
  This helps building binaries that can work on multiple macOS versions.
  
  Help-by: Martin Storsjö
  
  Fixes #1069

- curl_multi_add_handle: set timeouts in closure handles
  
  The closure handle only ever has default timeouts set. To improve the
  state somewhat we clone the timeouts from each added handle so that the
  closure handle always has the same timeouts as the most recently added
  easy handle.
  
  Fixes #739

- configure/CURL_CHECK_FUNC_POLL: disable poll completely on mac
  
  ... so that the same libcurl build easier can run on any version.
  
  Follow-up to issue #1057

- RELEASE-NOTES: synced with f36f8c14551efc6772

- test14xx: fixed --libcurl output tests again after 8e8afa82cbb

- s/cURL/curl
  
  The tool was never called cURL, only the project. But even so, we have
  more and more over time switched to just use lower case.

- polarssl: indented code, removed unused variables

- polarssl: reduce #ifdef madness with a macro

- polarssl: fix unaligned SSL session-id lock

- Curl_polarsslthreadlock_thread_setup: clear array at init
  
  ... since if it fails to init the entire array and then tries to clean
  it up, it would attempt to work on an uninitialized pointer.

- curl: set INTERLEAVEDATA too
  
  As otherwise the callback could be called with a NULL pointer when RTSP
  data is provided.

- gopher: properly return error for poll failures

- select: switch to macros in uppercase
  
  Curl_select_ready() was the former API that was replaced with
  Curl_select_check() a while back and the former arg setup was provided
  with a define (in order to leave existing code unmodified).
  
  Now we instead offer SOCKET_READABLE and SOCKET_WRITABLE for the most
  common shortcuts where only one socket is checked. They're also more
  visibly macros.

- select: use more proper macro-looking names
  
  ... so that it becomes more obvious in the code what is what. Also added
  a typecast for one of the calculations.

- Curl_socket_check: add extra check to avoid integer overflow

- maketgz: make it support "only" generating version info
  
  ... to allow you to update the local repository with the given version
  number data.

Jay Satiro (17 Oct 2016)
- url: skip to-be-closed connections when pipelining (follow-up)
  
  - Change back behavior so that pipelining is considered possible for
  connections that have not yet reached the protocol level.
  
  This is a follow-up to e5f0b1a which had changed the behavior of
  checking if pipelining is possible to ignore connections that had
  'bits.close' set. Connections that have not yet reached the protocol
  level also have that bit set, and we need to consider pipelining
  possible on those connections.

Daniel Stenberg (17 Oct 2016)
- HTTP2: mention the tool's limited support

- RELEASE-NOTES: synced with a1a5cd04877fd6fd

- [David Woodhouse brought this change]

  curl: do not set CURLOPT_SSLENGINEDEFAULT automatically
  
  There were bugs in the PKCS#11 engine, and fixing them triggers bugs in
  OpenSSL. Just don't get involved; there's no need to be making the
  engine methods the default anyway.
  
  https://github.com/OpenSC/libp11/pull/108
  https://github.com/openssl/openssl/pull/1639
  
  Merges #1042

- KNOWN_BUGS: two more existing problems

Marcel Raad (16 Oct 2016)
- win: fix Universal Windows Platform build
  
  This fixes a merge error in commit 7f3df80 caused by commit 332e8d6.
  
  Additionally, this changes Curl_verify_windows_version for Windows App
  builds to assume to always be running on the target Windows version.
  There seems to be no way to determine the Windows version from a
  UWP app. Neither GetVersion(Ex), nor VerifyVersionInfo, nor the
  Version Helper functions are supported.
  
  Bug: https://github.com/curl/curl/pull/820#issuecomment-250889878
  Reported-by: Paul Joyce
  
  Closes https://github.com/curl/curl/pull/1048

Daniel Stenberg (16 Oct 2016)
- KNOWN_BUGS: minor formatting edit

Jay Satiro (14 Oct 2016)
- [Rider Linden brought this change]

  url: skip to-be-closed connections when pipelining
  
  No longer attempt to use "doomed" to-be-closed connections when
  pipelining. Prior to this change connections marked for deletion (e.g.
  timeout) would be erroneously used, resulting in sporadic crashes.
  
  As originally reported and fixed by Carlo Wood (origin unknown).
  
  Bug: https://github.com/curl/curl/issues/627
  Reported-by: Rider Linden
  
  Closes https://github.com/curl/curl/pull/1075
  Participation-by: nopjmp@users.noreply.github.com

Daniel Stenberg (13 Oct 2016)
- vtls: only re-use session-ids using the same scheme
  
  To make it harder to do cross-protocol mistakes

Jay Satiro (11 Oct 2016)
- [Torben Dannhauer brought this change]

  dist: add missing cmake modules to the tarball
  
  Closes https://github.com/curl/curl/pull/1070

Daniel Stenberg (11 Oct 2016)
- configure: detect the broken poll() in macOS 10.12
  
  Fixes #1057

- dist: remove PDF and HTML converted docs from the releases

- [Remo E brought this change]

  cmake: add nghttp2 support
  
  Closes #922

- [Andreas Streichardt brought this change]

  resolve: add error message when resolving using SIGALRM
  
  Closes #1066

- GIT-INFO: remove the Mac 10.1-specific details
  
  There shouldn't be many devs out there anymore using such outdated macOS
  versions. And it removes the dead link.
  
  Closes #1049

- RELEASE-NOTES: spellfix

- RELEASE-NOTES: synced with 82720490628cb53a
  
  5 more fixes, 2 more contributors

- [Tobias Stoeckmann brought this change]

  smb: properly check incoming packet boundaries
  
  Not all reply messages were properly checked for their lengths, which
  made it possible to access uninitialized memory (but this does not lead
  to out of boundary accesses).
  
  Closes #1052

- test557: verify printf() with 128 and 129 arguments

- mprintf: return error on too many arguments
  
  128 arguments should be enough for everyone

- ftp: fix Curl_ftpsendf()
  
  ... it no longer takes printf() arguments since it was only really taken
  advantage by one user and it was not written and used in a safe
  way. Thus the 'f' is removed from the function name and the proto is
  changed.
  
  Although the current code wouldn't end up in badness, it was a risk that
  future changes could end up springf()ing too large data or passing in a
  format string inadvertently.

- formpost: avoid silent snprintf() truncation
  
  The previous use of snprintf() could make libcurl silently truncate some
  input data and not report that back on overly large input, which could
  make data get sent over the network in a bad format.
  
  Example:
  
   $ curl --form 'a=b' -H "Content-Type: $(perl -e 'print "A"x4100')"

- TODO: build: Enable PIE and RELRO by default

- TODO: Support better than MD5 hostkey hash (for ssh)

- [Daniel Gustafsson brought this change]

  tests: Fix a small typo in the tests README (#1060)
  
  The subdirectory for logs in tests/ is named log/ without an 's'
  at the end.

- TODO: Introduce --fail-fast to exit on first transfer fail
  
  See #1054

- TODO: Leave secure cookies alone

- [Rainer Müller brought this change]

  CURLOPT_DEBUGFUNCTION.3: unused argument warning (#1056)
  
  The 'userp' argument is unused in this example code.

- TODO: TCP Fast Open for windows

- RELEASE-NOTES: synced with 8fd2a754f0de

- CURLOPT_KEEP_SENDING_ON_ERROR.3: mention when it is added

- memdup: use 'void *' as return and source type

- TODO: Add easy argument to formpost functions

- formpost: trying to attach a directory no longer crashes
  
  The error path would previously add a freed entry to the linked list.
  
  Reported-by: Toby Peterson
  
  Fixes #1053

- [Sergei Kuzmin brought this change]

  cookies: same domain handling changed to match browser behavior
  
  Cokie with the same domain but different tailmatching property are now
  considered different and do not replace each other.  If header contains
  following lines then two cookies will be set: Set-Cookie: foo=bar;
  domain=.foo.com; expires=Thu Mar 3 GMT 8:56:27 2033 Set-Cookie: foo=baz;
  domain=foo.com; expires=Thu Mar 3 GMT 8:56:27 2033
  
  This matches Chrome, Opera, Safari, and Firefox behavior. When sending
  stored tokens to foo.com Chrome, Opera, Firefox store send them in the
  stored order, while Safari pre-sort the cookies.
  
  Closes #1050

- [Stephen Brokenshire brought this change]

  FAQ: Fix typos in section 5.14 (#1047)
  
  Type required for YourClass::func C++ function (using size_t in line
  with the documentation for CURLOPT_WRITEFUNCTION) and missing second
  colon when specifying the static function for CURLOPT_WRITEFUNCTION.

- [Sebastian Mundry brought this change]

  KNOWN_BUGS: Fix typos in section 5.8.
  
  Closes #1046

- [mundry brought this change]

  CONTRIBUTE.md: Fix typo in 'About pull requests' section. (#1045)

- curl.1: --trace supports % for sending to stderr!

- KNOWN_BUGS: 5.8 configure finding libs in wrong directory

Dan Fandrich (24 Sep 2016)
- configure: Fixed builds with libssh2 in a custom location
  
  A libssh2 library in the standard system location was being used in
  preference to the desired one while linking.

Daniel Stenberg (23 Sep 2016)
- SECURITY: remove the top ascii logo

Michael Kaufmann (22 Sep 2016)
- New libcurl option to keep sending on error
  
  Add the new option CURLOPT_KEEP_SENDING_ON_ERROR to control whether
  sending the request body shall be completed when the server responds
  early with an error status code.
  
  This is suitable for manual NTLM authentication.
  
  Reviewed-by: Jay Satiro
  
  Closes https://github.com/curl/curl/pull/904

Kamil Dudka (22 Sep 2016)
- nss: add chacha20-poly1305 cipher suites if supported by NSS

- nss: add cipher suites using SHA384 if supported by NSS

- nss: fix typo in ecdhe_rsa_null cipher suite string
  
  As it seems to be a rarely used cipher suite (for securely established
  but _unencrypted_ connections), I believe it is fine not to provide an
  alias for the misspelled variant.

Jay Satiro (21 Sep 2016)
- docs: Remove that --proto is just used for initial retrieval
  
  .. and add that --proto-redir and CURLOPT_REDIR_PROTOCOLS do not
  override protocols denied by --proto and CURLOPT_PROTOCOLS.
  
  - Add a test to enforce: --proto deny must override --proto-redir allow
  
  Closes https://github.com/curl/curl/pull/1031

Daniel Stenberg (21 Sep 2016)
- dist: add CurlSymbolHiding.cmake to the tarball
  
  Follow-up to 6140dfcf3e784
  
  Reported-by: Alexander Sinditskiy

- curl_global_cleanup.3: don't unload the lib with sub threads running
  
  Discussed in #997
  
  Assisted-by: Jay Satiro

- MAIL-ETIQUETTE: language

Jay Satiro (20 Sep 2016)
- easy: Reset all statistical session info in curl_easy_reset
  
  Bug: https://github.com/curl/curl/issues/1017
  Reported-by: Jeroen Ooms

Daniel Stenberg (19 Sep 2016)
- RELEASE-NOTES: synced with 79607eec51055

Jay Satiro (19 Sep 2016)
- [Daniel Gustafsson brought this change]

  darwinssl: Fix typo in comment
  
  Closes https://github.com/curl/curl/pull/1028

Daniel Stenberg (19 Sep 2016)
- [Bernard Spil brought this change]

  libressl: fix version output
  
  LibreSSL defines `OPENSSL_VERSION_NUMBER` as `0x20000000L` for all
  versions returning `LibreSSL/2.0.0` for any LibreSSL version.
  
  This change provides a local OpenSSL_version_num function replacement
  returning LIBRESSL_VERSION_NUMBER instead.
  
  Closes #1029

- [rugk brought this change]

  TODO: Add PINNEDPUBLICKEY - HPKP compatibility, HSTS & HPKP
  
  Closes #1025
  Closes #1026
  Closes #1027

- openssl: don't call ERR_remote_thread_state on >= 1.1.0
  
  Follow-up fix to d9321562

- openssl: don’t call CRYTPO_cleanup_all_ex_data
  
  The OpenSSL function CRYTPO_cleanup_all_ex_data() cannot be called
  multiple times without crashing - and other libs might call it! We
  basically cannot call it without risking a crash. The function is a
  no-op since OpenSSL 1.1.0.
  
  Not calling this function only risks a small memory leak with OpenSSL <
  1.1.0.
  
  Bug: https://curl.haxx.se/mail/lib-2016-09/0045.html
  Reported-by: Todd Short

- TODO: Support SSLKEYLOGFILE

Jay Satiro (18 Sep 2016)
- CURLOPT_PINNEDPUBLICKEY.3: fix the AVAILABILITY formatting

Nick Zitzmann (18 Sep 2016)
- darwinssl: disable RC4 cipher-suite support
  
  RC4 was a nice alternative to CBC back in the days of BEAST, but it's insecure and obsolete now.

- configure: change "iOS/Mac OS X native" to "Apple OS native"
  
  Since I first wrote that text, Apple introduced tvOS and watchOS, and renamed "Mac OS X" to "macOS." Let's make the text a little more inclusive, since curl can be built for all four operating systems.

Jay Satiro (18 Sep 2016)
- test2048: fix url

- examples/imap-append: Set size of data to be uploaded
  
  Prior to this commit this example failed with error
  'Cannot APPEND with unknown input file size'.
  
  Bug: https://github.com/curl/curl/issues/1008
  Reported-by: lukaszgn@users.noreply.github.com
  
  Closes https://github.com/curl/curl/pull/1011

Daniel Stenberg (16 Sep 2016)
- [Tony Kelman brought this change]

  LICENSE-MIXING.md: update with mbedTLS dual licensing
  
  Recent versions of mbedTLS are available under either Apache 2.0 or GPL
  2.0, see https://tls.mbed.org/how-to-get
  
  Closes #1019

- KNOWN_BUGS: chunked-encoded requests with HTTP/2 is fixed

- http2: debug ouput sent HTTP/2 request headers

- http: accept "Transfer-Encoding: chunked" for HTTP/2 as well
  
  ... but don't send the actual header over the wire as it isn't accepted.
  Chunked uploading is still triggered using this method.
  
  Fixes #1013
  Fixes #662

- openssl: fix per-thread memory leak usiong 1.0.1 or 1.0.2
  
  OpenSSL 1.0.1 and 1.0.2 build an error queue that is stored per-thread
  so we need to clean it when easy handles are freed, in case the thread
  will be killed in which the easy handle was used. All OpenSSL code in
  libcurl should extract the error in association with the error already
  so clearing this queue here should be harmless at worst.
  
  Fixes #964

- RELEASE-NOTES: reset and go toward 7.51.0 (again)

Version 7.50.3 (14 Sep 2016)

Daniel Stenberg (14 Sep 2016)
- THANKS: updated with curl 7.50.3 contributors

- RELEASE-NOTES: curl 7.50.3

- test1605: verify negative input lengths to (un)escape functions

- curl_easy_unescape: deny negative string lengths as input
  
  CVE-2016-7167
  
  Bug: https://curl.haxx.se/docs/adv_20160914.html

- curl_easy_escape: deny negative string lengths as input
  
  CVE-2016-7167
  
  Bug: https://curl.haxx.se/docs/adv_20160914.html

- curl: make --create-dirs on windows grok both forward and backward slashes
  
  Reported-by: Ryan Scott
  
  Fixes #1007

- RELEASE-NOTES: synced with 665694979b6

- [Tony Kelman brought this change]

  mbedtls: switch off NTLM in build if md4 isn't available
  
  NTLM support with mbedTLS was added in 497e7c9 but requires that mbedTLS
  is built with the MD4 functions available, which it isn't in default
  builds. This now adapts if the funtion isn't there and builds libcurl
  without NTLM support if so.
  
  Fixes #1004

Jay Satiro (12 Sep 2016)
- CODE_STYLE: fix long-line guideline
  
  - Change maximum allowed line length from 80 to 79.

- CODE_STYLE: add column alignment section
  
  Note that since the added examples are for column alignment I had to
  encapsulate with ~~~c markdown to preserve their alignment.

Peter Wu (11 Sep 2016)
- cmake: fix curl-config --static-libs
  
  The `curl-config --static-libs` command should not output paths like
  -l/usr/lib/libssl.so, instead print the absolute path without `-l`.
  
  This also removes the confusing message "Static linking is broken" which
  was printed because curl-config --static-libs was disfunctional even
  though the static libcurl.a library works properly.
  
  Fixes https://github.com/curl/curl/issues/841

Daniel Stenberg (11 Sep 2016)
- http: refuse to pass on response body with NO_NODY was set
  
  ... like when a HTTP/0.9 response comes back without any headers at all
  and just a body this now prevents that body from being sent to the
  callback etc.
  
  Adapted test 1144 to verify.
  
  Fixes #973
  
  Assisted-by: Ray Satiro

- RELEASE-NOTES: synced with 257bf3ac67eb6

Jakub Zakrzewski (10 Sep 2016)
- CMake: Don't build unit tests if private symbols are hidden
  
  This only excludes building unit tests from default build ( 'all' Make
  target or "Build Solution" in VisualStudio). The projects and Make
  targets will still be generated and shown in supporting IDEs.
  
  Fixes https://github.com/curl/curl/issues/981
  Reported-by: Randy Armstrong
  
  Closes https://github.com/curl/curl/pull/990

- CMake: Try to (un-)hide private library symbols
  
  Detect support for compiler symbol visibility flags and apply those
  according to CURL_HIDDEN_SYMBOLS option.
  It should work true to the autotools build except it tries to unhide
  symbols on Windows when requested and prints warning if it fails.
  
  Ref: https://github.com/curl/curl/issues/981#issuecomment-242665951
  Reported-by: Daniel Stenberg

Daniel Stenberg (9 Sep 2016)
- openssl: fix bad memory free (regression)
  
  ... by partially reverting f975f06033b1. The allocation could be made by
  OpenSSL so the free must be made with OPENSSL_free() to avoid problems.
  
  Reported-by: Harold Stuart
  Fixes #1005

- http2: support > 64bit sized uploads
  
  ... by making sure we don't count down the "upload left" counter when the
  uploaded size is unknown and then it can be allowed to continue forever.
  
  Fixes #996

Jay Satiro (7 Sep 2016)
- errors: new alias CURLE_WEIRD_SERVER_REPLY (8)
  
  Since we're using CURLE_FTP_WEIRD_SERVER_REPLY in imap, pop3 and smtp as
  more of a generic "failed to parse" introduce an alias without FTP in
  the name.
  
  Closes https://github.com/curl/curl/pull/975

Daniel Stenberg (7 Sep 2016)
- bump: toward 7.51.0

- HISTORY: remove ascii logo to render nicer on web

- curl: whitelist use of strtok() in non-threaded context

- checksrc: detect strtok() use
  
  ... as that function slipped through once before.

GitHub (7 Sep 2016)
- [Viktor Szakats brought this change]

  mk-ca-bundle.pl: use SHA256 instead of SHA1
  
  This hash is used to verify the original downloaded certificate bundle
  and also included in the generated bundle's comment header. Also
  rename related internal symbols to algorithm-agnostic names.

Version 7.50.2 (7 Sep 2016)

Daniel Stenberg (7 Sep 2016)
- RELEASE-NOTES: curl 7.50.2 release

- THANKS: updated for 7.50.2

Jay Satiro (6 Sep 2016)
- [Gaurav Malhotra brought this change]

  openssl: fix CURLINFO_SSL_VERIFYRESULT
  
  CURLINFO_SSL_VERIFYRESULT does not get the certificate verification
  result when SSL_connect fails because of a certificate verification
  error.
  
  This fix saves the result of SSL_get_verify_result so that it is
  returned by CURLINFO_SSL_VERIFYRESULT.
  
  Closes https://github.com/curl/curl/pull/995

Daniel Stenberg (6 Sep 2016)
- [Daniel Gustafsson brought this change]

  darwinssl: test for errSecSuccess in PKCS12 import rather than noErr (#993)
  
  While noErr and errSecSuccess are defined as the same value, the API
  documentation states that SecPKCS12Import() returns errSecSuccess if
  there were no errors in importing. Ensure that a future change of the
  defined value doesn't break (however unlikely) and be consistent with
  the API docs.

- [Daniel Gustafsson brought this change]

  docs: Fix link to CONTRIBUTE in Github contribution guidelines (#994)

- [Marcel Raad brought this change]

  openssl: Fix compilation with OPENSSL_API_COMPAT=0x10100000L
  
  With OPENSSL_API_COMPAT=0x10100000L (OpenSSL 1.1 API), the cleanup
  functions are unavailable (they're no-ops anyway in OpenSSL 1.1). The
  replacements for SSL_load_error_strings, SSLeay_add_ssl_algorithms, and
  OpenSSL_add_all_algorithms are called automatically [1][2]. SSLeay() is
  now called OpenSSL_version_num().
  
  [1]: https://www.openssl.org/docs/man1.1.0/ssl/OPENSSL_init_ssl.html
  [2]: https://www.openssl.org/docs/man1.1.0/crypto/OPENSSL_init_crypto.html
  
  Closes #992

- RELEASE-NOTES: synced with 3d4c0c8b9bc1d

- http2: return EOF when done uploading without known size
  
  Fixes #982

- http2: skip the content-length parsing, detect unknown size

- http2: minor white space edit

- http2: use named define instead of magic constant in read callback

- [Craig Davison brought this change]

  configure: make the cpp -P detection not clobber CPPFLAGS
  
  CPPPFLAGS is now CPPPFLAG. Fixes CURL_CHECK_DEF.
  
  Fixes #958

- [Olivier Brunel brought this change]

  speed caps: not based on average speeds anymore
  
  Speed limits (from CURLOPT_MAX_RECV_SPEED_LARGE &
  CURLOPT_MAX_SEND_SPEED_LARGE) were applied simply by comparing limits
  with the cumulative average speed of the entire transfer; While this
  might work at times with good/constant connections, in other cases it
  can result to the limits simply being "ignored" for more than "short
  bursts" (as told in man page).
  
  Consider a download that goes on much slower than the limit for some
  time (because bandwidth is used elsewhere, server is slow, whatever the
  reason), then once things get better, curl would simply ignore the limit
  up until the average speed (since the beginning of the transfer) reached
  the limit.  This could prove the limit useless to effectively avoid
  using the entire bandwidth (at least for quite some time).
  
  So instead, we now use a "moving starting point" as reference, and every
  time at least as much as the limit as been transferred, we can reset
  this starting point to the current position. This gets a good limiting
  effect that applies to the "current speed" with instant reactivity (in
  case of sudden speed burst).
  
  Closes #971

- HISTORY.md: the multi socket was put in the wrong year!

- [Mark Hamilton brought this change]

  tool_helpers.c: fix comment typo (#989)

- [Mark Hamilton brought this change]

  libtest/test.h: fix typo (#988)

- CURLMOPT_PIPELINING.3: language

- CURLMOPT_PIPELINING.3: extended and clarified
  
  Especially in regards to the multiplexing part.

Steve Holme (31 Aug 2016)
- curl_sspi.c: Updated function description comments
  
  * Added description to Curl_sspi_free_identity()
  * Added parameter and return explanations to Curl_sspi_global_init()
  * Added parameter explaination to Curl_sspi_global_cleanup()

- README: Corrected the supported Visual Studio versions
  
  Missed from commit 8356022d17.

- KNOWN_BUGS: Move the Visual Studio project shortcomings from local README

- KNOWN_BUGS: Expand 6.4 to include Kerberos V5
  
  ...and discuss a possible solution.

Daniel Stenberg (30 Aug 2016)
- connect: fix #ifdefs for debug versions of conn/streamclose() macros
  
  CURLDEBUG is for the memory debugging
  
  DEBUGBUILD is for the extra debug stuff
  
  Pointed-out-by: Steve Holme

- KNOWN_BUGS: mention some cmake "support gaps"

Nick Zitzmann (28 Aug 2016)
- darwinssl: add documentation stating that the --cainfo option is intended for backward compatibility only
  
  In other news, I changed one other reference to "Mac OS X" in the documentation (that I previously wrote) to say "macOS" instead.

Daniel Stenberg (28 Aug 2016)
- http2: return CURLE_HTTP2_STREAM for unexpected stream close
  
  Follow-up to c3e906e9cd0f, seems like a more appropriate error code
  
  Suggested-by: Jay Satiro

- [Tatsuhiro Tsujikawa brought this change]

  http2: handle closed streams when uploading
  
  Fixes #986

- http2: make sure stream errors don't needlessly close the connection
  
  With HTTP/2 each transfer is made in an indivial logical stream over the
  connection, making most previous errors that caused the connection to get
  forced-closed now instead just kill the stream and not the connection.
  
  Fixes #941

- Curl_verify_windows_version: minor edit to avoid compiler warnings
  
  ... instead of if() before the switch(), add a default to the switch so
  that the compilers don't warn on "warning: enumeration value
  'PLATFORM_DONT_CARE' not handled in switch" anymore.

Steve Holme (27 Aug 2016)
- RELEASE-NOTES: Added missing fix from commit 15592143f

Jay Satiro (26 Aug 2016)
- schannel: Disable ALPN for Wine since it is causing problems
  
  - Disable ALPN on Wine.
  
  - Don't pass input secbuffer when ALPN is disabled.
  
  When ALPN support was added a change was made to pass an input secbuffer
  to initialize the context. When ALPN is enabled the buffer contains the
  ALPN information, and when it's disabled the buffer is empty. In either
  case this input buffer caused problems with Wine and connections would
  not complete.
  
  Bug: https://github.com/curl/curl/issues/983
  Reported-by: Christian Fillion

Kamil Dudka (26 Aug 2016)
- [Peter Wang brought this change]

  nss: work around race condition in PK11_FindSlotByName()
  
  Serialise the call to PK11_FindSlotByName() to avoid spurious errors in
  a multi-threaded environment. The underlying cause is a race condition
  in nssSlot_IsTokenPresent().
  
  Bug: https://bugzilla.mozilla.org/1297397
  
  Closes #985

- nss: refuse previously loaded certificate from file
  
  ... when we are not asked to use a certificate from file

Daniel Stenberg (26 Aug 2016)
- ftp_done: remove dead code

- TLS: random file/egd doesn't have to match for conn reuse

- test161: add comment for the exit code

Dan Fandrich (26 Aug 2016)
- test219: Add http as a required feature

Daniel Stenberg (25 Aug 2016)
- [Michael Kaufmann brought this change]

  HTTP: stop parsing headers when switching to unknown protocols
  
  - unknown protocols probably won't send more headers (e.g. WebSocket)
  - improved comments and moved them to the correct case statements
  
  Closes #899

- openssl: make build with 1.1.0 again
  
  synced with OpenSSL git master commit cc06906707

- INTERNALS: fix title

- configure: detect zlib with our pkg-config macros
  
  ... instead of relying on the pkg-config autoconf macros to be present.
  
  Fixes #972 (again...)

Jay Satiro (25 Aug 2016)
- http2: Remove incorrect comments
  
  .. also remove same from scp

Daniel Stenberg (23 Aug 2016)
- [Ales Novak brought this change]

  ftp: fix wrong poll on the secondary socket
  
  When we're uploading using FTP and the server issues a tiny pause
  between opening the connection to the client's secondary socket, the
  client's initial poll() times out, which leads to second poll() which
  does not wait for POLLIN on the secondary socket. So that poll() also
  has to time out, creating a long (200ms) pause.
  
  This patch adds the correct flag to the secondary socket, making the
  second poll() correctly wait for the connection there too.
  
  Signed-off-by: Ales Novak <alnovak@suse.cz>
  
  Closes #978

- RELEASE-NOTES: synced with 95ded2c56

- configure: make it work without PKG_CHECK_MODULES
  
  With commit c2f9b78 we added a new dependency on pkg-config for
  developers which may be unwanted. This change make the configure script
  still work as before if pkg-config isn't installed, it'll just use the
  old zlib detection logic without pkg-config.
  
  Reported-by: Marc Hörsken
  
  Fixes #972

Marc Hoersken (21 Aug 2016)
- Revert "KNOWN_BUGS: SOCKS proxy not working via IPv6"
  
  This reverts commit 9cb1059f92286a6eb5d28c477fdd3f26aed1d554.
  
  As discussed in #835 SOCKS5 supports IPv6 proxies and destinations.

Daniel Stenberg (21 Aug 2016)
- [Marco Deckel brought this change]

  win: Basic support for Universal Windows Platform apps
  
  Closes #820

Steve Holme (21 Aug 2016)
- sasl: Don't use GSSAPI authentication when domain name not specified
  
  Only choose the GSSAPI authentication mechanism when the user name
  contains a Windows domain name or the user is a valid UPN.
  
  Fixes #718

- vauth: Added check for supported SSPI based authentication mechanisms
  
  Completing commit 00417fd66c and 2708d4259b.

- http.c: Remove duplicate (authp->avail & CURLAUTH_DIGEST) check
  
  From commit 2708d4259b.

Marc Hoersken (20 Aug 2016)
- socks.c: display the hostname returned by the SOCKS5 proxy server
  
  Instead of displaying the requested hostname the one returned
  by the SOCKS5 proxy server is used in case of connection error.
  The requested hostname is displayed earlier in the connection sequence.
  
  The upper-value of the port is moved to a temporary variable and
  replaced with a 0-byte to make sure the hostname is 0-terminated.

Steve Holme (20 Aug 2016)
- urldata.h: Corrected comment for httpcode which is also populated by SMTP
  
  As of 7.25.0 and commit 5430007222.

Marc Hoersken (20 Aug 2016)
- socks.c: use Curl_printable_address in SOCKS5 connection sequence
  
  Replace custom string formatting with Curl_printable_address.
  Add additional debug and error output in case of failures.

- socks.c: align SOCKS4 connection sequence with SOCKS5
  
  Calling sscanf is not required since the raw IPv4 address is
  available and the protocol can be detected using ai_family.

Steve Holme (20 Aug 2016)
- http.c: Corrected indentation change from commit 2708d4259b
  
  Made by Visual Studio's auto-correct feature and missed by me in my own
  code reviews!

- http: Added calls to Curl_auth_is_<mechansism>_supported()
  
  Hooked up the HTTP authentication layer to query the new 'is mechanism
  supported' functions when deciding what mechanism to use.
  
  As per commit 00417fd66c existing functionality is maintained for now.

Marc Hoersken (20 Aug 2016)
- socks.c: improve verbose output of SOCKS5 connection sequence

- configure.ac: add missing quotes to PKG_CHECK_MODULES

Steve Holme (20 Aug 2016)
- sasl: Added calls to Curl_auth_is_<mechansism>_supported()
  
  Hooked up the SASL authentication layer to query the new 'is mechanism
  supported' functions when deciding what mechanism to use.
  
  For now existing functionality is maintained.

Daniel Stenberg (19 Aug 2016)
- [Miroslav Franc brought this change]

  spnego_sspi: fix memory leak in case *outlen is zero (#970)

- CURLMOPT_MAX_TOTAL_CONNECTIONS.3: mention it can also multiplex

Steve Holme (18 Aug 2016)
- vauth: Introduced Curl_auth_is_<mechansism>_supported() functions
  
  As Windows SSPI authentication calls fail when a particular mechanism
  isn't available, introduced these functions for DIGEST, NTLM, Kerberos 5
  and Negotiate to allow both HTTP and SASL authentication the opportunity
  to query support for a supported mechanism before selecting it.
  
  For now each function returns TRUE to maintain compatability with the
  existing code when called.

Daniel Stenberg (18 Aug 2016)
- test1144: verify HEAD with body-only response

Steve Holme (17 Aug 2016)
- RELEASE-PROCEDURE: Added some more future release dates
  
  ...and removed some old ones

Daniel Stenberg (17 Aug 2016)
- [David Woodhouse brought this change]

  curl: allow "pkcs11:" prefix for client certificates
  
  RFC7512 provides a standard method to reference certificates in PKCS#11
  tokens, by means of a URI starting 'pkcs11:'.
  
  We're working on fixing various applications so that whenever they would
  have been able to use certificates from a file, users can simply insert
  a PKCS#11 URI instead and expect it to work. This expectation is now a
  part of the Fedora packaging guidelines, for example.
  
  This doesn't work with cURL because of the way that the colon is used
  to separate the certificate argument from the passphrase. So instead of
  
     curl -E 'pkcs11:manufacturer=piv_II;id=%01' …
  
  I instead need to invoke cURL with the colon escaped, like this:
  
     curl -E 'pkcs11\:manufacturer=piv_II;id=%01' …
  
  This is suboptimal because we want *consistency* — the URI should be
  usable in place of a filename anywhere, without having strange
  differences for different applications.
  
  This patch therefore disables the processing in parse_cert_parameter()
  when the string starts with 'pkcs11:'. It means you can't pass a
  passphrase with an unescaped PKCS#11 URI, but there's no need to do so
  because RFC7512 allows a PIN to be given as a 'pin-value' attribute in
  the URI itself.
  
  Also, if users are already using RFC7512 URIs with the colon escaped as
  in the above example — even providing a passphrase for cURL to handling
  instead of using a pin-value attribute, that will continue to work
  because their string will start 'pkcs11\:' and won't match the check.
  
  What *does* break with this patch is the extremely unlikely case that a
  user has a file which is in the local directory and literally named
  just "pkcs11", and they have a passphrase on it. If that ever happened,
  the user would need to refer to it as './pkcs11:<passphrase>' instead.

- nss: make the global variables static

- openssl: use regular malloc instead of OPENSSL_malloc
  
  This allows for better memmory debugging and torture tests.

- proxy: fix tests as follow-up to 93b0d907d5
  
  This fixes tests that were added after 113f04e664b as the tests would
  fail otherwise.
  
  We bring back "Proxy-Connection: Keep-Alive" now unconditionally to fix
  regressions with old and stupid proxies, but we could possibly switch to
  using it only for CONNECT or only for NTLM in a future if we want to
  gradually reduce it.
  
  Fixes #954
  
  Reported-by: János Fekete

- Revert "Proxy-Connection: stop sending this header by default"
  
  This reverts commit 113f04e664b16b944e64498a73a4dab990fe9a68.

- CURLOPT_PROXY.3: unsupported schemes cause errors now
  
  Follow-up to a96319ebb9 (document the new behavior)

- tests/README: mention nghttpx for HTTP/2 tests

- README.md: add our CII Best Practices badge

- proxy: polished the error message for unsupported schemes
  
  Follow up to a96319ebb93

- test219: verify unsupported scheme for proxies get rejected

- proxy: reject attempts to use unsupported proxy schemes
  
  I discovered some people have been using "https://example.com" style
  strings as proxy and it "works" (curl doesn't complain) because curl
  ignores unknown schemes and then assumes plain HTTP instead.
  
  I think this misleads users into believing curl uses HTTPS to proxies
  when it doesn't. Now curl rejects proxy strings using unsupported
  schemes instead of just ignoring and defaulting to HTTP.

- RELEASE-NOTES: synced with b7ee5316c2fd5b

Marc Hoersken (14 Aug 2016)
- socks.c: Correctly calculate position of port in response packet
  
  Third commit to fix issue #944 regarding SOCKS5 error handling.
  
  Reported-by: David Kalnischkies

- socks.c: Do not modify and invalidate calculated response length
  
  Second commit to fix issue #944 regarding SOCKS5 error handling.
  
  Reported-by: David Kalnischkies

- socks.c: Move error output after reading the whole response packet
  
  First commit to fix issue #944 regarding SOCKS5 error handling.
  
  Reported-by: David Kalnischkies

Daniel Stenberg (13 Aug 2016)
- [Ronnie Mose brought this change]

  MANUAL: Remove invalid link to LDAP documentation (#962)
  
  The server developer.netscape.com does not resolve into any
  ip address and can be removed.

Jay Satiro (13 Aug 2016)
- openssl: accept subjectAltName iPAddress if no dNSName match
  
  Undo change introduced in d4643d6 which caused iPAddress match to be
  ignored if dNSName was present but did not match.
  
  Also, if iPAddress is present but does not match, and dNSName is not
  present, fail as no-match. Prior to this change in such a case the CN
  would be checked for a match.
  
  Bug: https://github.com/curl/curl/issues/959
  Reported-by: wmsch@users.noreply.github.com

Daniel Stenberg (12 Aug 2016)
- [Dambaev Alexander brought this change]

  configure.ac: add zlib search with pkg-config
  
  Closes #956

- rtsp: ignore whitespace in session id
  
  Follow-up to e577c43bb to fix test case 569 brekage: stop the parser at
  whitespace as well.
  
  Help-by: Erik Janssen

- HTTP: retry failed HEAD requests too
  
  Mark's new document about HTTP Retries
  (https://mnot.github.io/I-D/httpbis-retry/) made me check our code and I
  spotted that we don't retry failed HEAD requests which seems totally
  inconsistent and I can't see any reason for that separate treatment.
  
  So, no separate treatment for HEAD starting now. A HTTP request sent
  over a reused connection that gets cut off before a single byte is
  received will be retried on a fresh connection.
  
  Made-aware-by: Mark Nottingham

- mk-ca-bundle.1: document -m, added in 1.26

- RELEASE-NOTES: synced with e577c43bb5

- [Erik Janssen brought this change]

  rtsp: accept any RTSP session id
  
  Makes libcurl work in communication with gstreamer-based RTSP
  servers. The original code validates the session id to be in accordance
  with the RFC. I think it is better not to do that:
  
  - For curl the actual content is a don't care.
  
  - The clarity of the RFC is debatable, is $ allowed or only as \$, that
    is imho not clear
  
  - Gstreamer seems to url-encode the session id but % is not allowed by
  the RFC
  
  - less code
  
  With this patch curl will correctly handle real-life lines like:
  Session: biTN4Kc.8%2B1w-AF.; timeout=60
  
  Bug: https://curl.haxx.se/mail/lib-2016-08/0076.html

- symbols-in-versions: add CURL_STRICTER
  
  Added in 5fce88aa8c12564

- [Simon Warta brought this change]

  winbuild: Allow changing C compiler via environment variable CC (#952)
  
  This makes it possible to use specific compilers or a cache.
  
  Sample use for clcache:
  set CC=clcache.bat
  nmake /f Makefile.vc DEBUG=no MODE=static VC=14 GEN_PDB=no

- LICENSE-MIXING.md: switched to markdown

- docs-make: have markdown files use .md

- curl.h: make CURL_NO_OLDIES define CURL_STRICTER

- HISTORY.md: use markdown extension

- SSLCERTS.md: renamed to markdown extension

- INTERNALS.md: use markdown extension for markdown content

- CONTRIBUTE.md: markdown extension

- CONTRIBUTE: changed to markdown

- CONTRIBUTE: refreshed

- TODO: added an SSH section and two SFTP things to do

- TODO: remove the 1.22 duplicated item

- TODO: move "CURLOPT_MAIL_CLIENT" to SMTP section

- TODO: API for URL parsing/splitting

- TODO: move QUIC to the HTTP section

- [Simon Warta brought this change]

  winbuild: Free name $(CC) in Makefile (#950)
  
  In the old line number 290, CC and CURL_CC had the same value. After
  that, /DCURL_STATICLIB was added to CC but not CURL_CC (intended?).
  
  This gets rid of the CC variable entirely. It is a first step to make it
  possible to manualyl set a CC variable in order to be able to change the
  compiler.

- TODO: Use huge HTTP/2 windows

- [Simon Warta brought this change]

  winbuild: Avoid setting redundant CFLAGS to compile commands (#949)
  
  $(CURL_CC) is always used with $(CURL_CFLAGS) appended, so before this,
  all arguments in CURL_CFLAGS have been added twice.

Jay Satiro (8 Aug 2016)
- cmake: Enable win32 threaded resolver by default
  
  - Turn on USE_THREADS_WIN32 in Windows if ares isn't on
  
  This change is similar to what we already do in the autotools build.

- cmake: Enable win32 large file support by default
  
  All compilers used by cmake in Windows should support large files.
  
  - Add test SIZEOF_OFF_T
  - Remove outdated test SIZEOF_CURL_OFF_T
  - Turn on USE_WIN32_LARGE_FILES in Windows
  - Check for 'Largefile' during the features output

Daniel Stenberg (7 Aug 2016)
- TODO: added several ideas, removed SPDY

- http2: always wait for readable socket
  
  Since the server can at any time send a HTTP/2 frame to us, we need to
  wait for the socket to be readable during all transfers so that we can
  act on incoming frames even when uploading etc.
  
  Reminded-by: Tatsuhiro Tsujikawa

- RELEASE-NOTES: synced with 7b4bf37a44791

- [Thomas Glanzmann brought this change]

  mbedtls: set debug threshold to 4 (verbose) when MBEDTLS_DEBUG is defined
  
  In order to make MBEDTLS_DEBUG work, the debug threshold must be unequal
  to 0.  This patch also adds a comment how mbedtls must be compiled in
  order to make debugging work, and explains the possible debug levels.

- CURLOPT_TCP_NODELAY: now enabled by default
  
  After a few wasted hours hunting down the reason for slowness during a
  TLS handshake that turned out to be because of TCP_NODELAY not being
  set, I think we have enough motivation to toggle the default for this
  option. We now enable TCP_NODELAY by default and allow applications to
  switch it off.
  
  This also makes --tcp-nodelay unnecessary, but --no-tcp-nodelay can be
  used to disable it.
  
  Thanks-to: Tim Rühsen
  Bug: https://curl.haxx.se/mail/lib-2016-06/0143.html

- [Serj Kalichev brought this change]

  TFTP: Fix upload problem with piped input
  
  When input stream for curl is stdin and input stream is not a file but
  generated by a script then curl can truncate data transfer to arbitrary
  size since a partial packet is treated as end of transfer by TFTP.
  
  Fixes #857

- mk-ca-bundle.pl: -m keeps ca cert meta data in output
  
  Makes the script pass on comments holding meta data to the output
  file. Like fingerprinters, issuer, date ranges etc.
  
  Closes #937

- multi: make Curl_expire() work with 0 ms timeouts
  
  Previously, passing a timeout of zero to Curl_expire() was a magic code
  for clearing all timeouts for the handle. That is now instead made with
  the new Curl_expire_clear() function and thus a 0 timeout is fine to set
  and will trigger a timeout ASAP.
  
  This will help removing short delays, in particular notable when doing
  HTTP/2.

- transfer: return without select when the read loop reached maxcount
  
  Regression added in 790d6de48515. The was then added to avoid one
  particular transfer to starve out others. But when aborting due to
  reading the maxcount, the connection must be marked to be read from
  again without first doing a select as for some protocols (like SFTP/SCP)
  the data may already have been read off the socket.
  
  Reported-by: Dan Donahue
  Bug: https://curl.haxx.se/mail/lib-2016-07/0057.html

Steve Holme (3 Aug 2016)
- [Bill Nagel brought this change]

  mbedtls: Added support for NTLM

Daniel Stenberg (3 Aug 2016)
- [Sergei Nikulov brought this change]

  travis: removed option to rebuild autotool from source
  
  Fixes #943

- bump: start working toward 7.50.2

Version 7.50.1 (3 Aug 2016)

Daniel Stenberg (3 Aug 2016)
- THANKS: 7 new contributors from the 7.50.1 release

- RELEASE-NOTES: 7.50.1

- TLS: only reuse connections with the same client cert
  
  CVE-2016-5420
  Bug: https://curl.haxx.se/docs/adv_20160803B.html

- TLS: switch off SSL session id when client cert is used
  
  CVE-2016-5419
  Bug: https://curl.haxx.se/docs/adv_20160803A.html
  Reported-by: Bru Rom
  Contributions-by: Eric Rescorla and Ray Satiro

- curl_multi_cleanup: clear connection pointer for easy handles
  
  CVE-2016-5421
  Bug: https://curl.haxx.se/docs/adv_20160803C.html
  Reported-by: Marcelo Echeverria and Fernando Muñoz

- KNOWN_BUGS: SOCKS proxy not working via IPv6
  
  Closes #835

- KNOWN_BUGS: CURLOPT_SEEKFUNCTION not called with CURLFORM_STREAM
  
  Closes #768

- KNOWN_BUGS: transfer-encoding: chunked in HTTP/2
  
  Closes #662

- TODO: Provide cmake config-file
  
  Closes #885

Patrick Monnerat (2 Aug 2016)
- os400: define BUILDING_LIBCURL in make script.

Daniel Stenberg (1 Aug 2016)
- RELEASE-NOTES: synced with aa9f536a18b

Jay Satiro (1 Aug 2016)
- [Thomas Glanzmann brought this change]

  mbedtls: Fix debug function name
  
  This patch is necessary so that curl compiles if MBEDTLS_DEBUG is
  defined.
  
  Bug: https://curl.haxx.se/mail/lib-2016-08/0001.html

Daniel Stenberg (1 Aug 2016)
- [Sergei Nikulov brought this change]

  travis: fix OSX build by re-installing libtool
  
  Apparently due to a broken homebrew install
  
  fixes #934
  Closes #939

- [Martin Vejnár brought this change]

  win32: fix a potential memory leak in Curl_load_library
  
  If a call to GetSystemDirectory fails, the `path` pointer that was
  previously allocated would be leaked. This makes sure that `path` is
  always freed.
  
  Closes #938

- include: revert 9adf3c4 and make public types void * again
  
  Many applications assume the actual contents of the public types and use
  that do for example forward declarations (saving them from including our
  public header) which then breaks when we switch from void * to a struct
  *.
  
  I'm not convinced we were wrong, but since this practise seems
  widespread enough I'm willing to (partly) step down.
  
  Now libcurl uses the struct itself when it is built and it allows
  applications to use the struct type if CURL_STRICTER is defined at the
  time of the #include.
  
  Reported-by: Peter Frühberger
  Fixes #926

Jay Satiro (28 Jul 2016)
- [Yonggang Luo brought this change]

  cmake: Fix for schannel support
  
  The check_library_exists_concat do not check crypt32 library properly.
  So include it directly.
  
  Bug: https://github.com/curl/curl/pull/917
  Reported-by: Yonggang Luo
  
  Bug: https://github.com/curl/curl/issues/935
  Reported-by: Alain Danteny

- Revert "travis: Install libtool for OS X builds"
  
  Didn't work.
  
  This reverts commit 50723585ed380744358de054e2a55dccee65dfd7.

- travis: Install libtool for OS X builds
  
  CI is failing due to missing libtoolize, so I'm trying this.

Daniel Stenberg (26 Jul 2016)
- [Viktor Szakats brought this change]

  TODO: minor typo in last commit
  
  merged #931

- TODO: Timeout idle connections from the pool

Patrick Monnerat (25 Jul 2016)
- os400: minimum supported OS version: V6R1M0.
  Do not log compilation informational messages.

Jay Satiro (24 Jul 2016)
- tests: Fix for http/2 feature
  
  Bug: https://curl.haxx.se/mail/lib-2016-07/0070.html
  Reported-by: Paul Howarth

Steve Holme (23 Jul 2016)
- README: Mention wolfSSL in the 'Dependencies' section

- vauth.h: No need to query HAVE_GSSAPI || USE_WINDOWS_SSPI for SPNEGO
  
  As SPNEGO is only defined when these pre-processor variables are defined
  there is no need to query them explicitly.

- spnego: Corrected miss-placed * in Curl_auth_spnego_cleanup() declaration
  
  Typo introduced in commit ad5e9bfd5d.

Daniel Stenberg (22 Jul 2016)
- SECURITY: mention how to get windows-specific CVEs
  
  ... and make the distros link a proper link

Dan Fandrich (21 Jul 2016)
- test558: fix test by stripping file paths from FD lines

Kamil Dudka (21 Jul 2016)
- tests: distribute the http2-server.pl script, too

- docs: distribute the CURLINFO_HTTP_VERSION(3) man page, too

Daniel Stenberg (21 Jul 2016)
- bump: start working on 7.50.1

Version 7.50.0 (21 Jul 2016)

Daniel Stenberg (21 Jul 2016)
- RELEASE-NOTES: version 7.50.0 ready

- THANKS: 13 new contributors from the 7.50.0 release

Jay Satiro (21 Jul 2016)
- winbuild: fix embedded manifest option
  
  Embedded manifest option didn't work due to typo.
  
  Reported-by: Stefan Kanthak

- vauth: Fix memleak by freeing credentials if out of memory
  
  This is a follow up to the parent commit dcdd4be which fixes one leak
  but creates another by failing to free the credentials handle if out of
  memory. Also there's a second location a few lines down where we fail to
  do same. This commit fixes both of those issues.

Daniel Stenberg (20 Jul 2016)
- [Saurav Babu brought this change]

  vauth: Fixed memory leak due to function returning without free
  
  This patch allocates memory to "output_token" only when it is required
  so that memory is not leaked if function returns.

- test558: updated after ipv6-check move
  
  Follow-up commit to c50980807c5 to make this test pass.

Jay Satiro (20 Jul 2016)
- connect: disable TFO on Linux when using SSL
  
  - Linux TFO + TLS is not implemented yet.
  
  Bug: https://github.com/curl/curl/issues/907

Daniel Stenberg (19 Jul 2016)
- ROADMAP: QUIC and TLS 1.3

- RELEASE-NOTES: synced with c50980807c5

Jay Satiro (18 Jul 2016)
- [Brian Prodoehl brought this change]

  curl_global_init: Check if IPv6 works
  
  - Curl_ipv6works() is not thread-safe until after the first call, so
  call it once during global init to avoid a possible race condition.
  
  Bug: https://github.com/curl/curl/issues/915
  PR: https://github.com/curl/curl/pull/918

- [Timothy Polich brought this change]

  CURLMOPT_SOCKETFUNCTION.3: fix typo
  
  Closes https://github.com/curl/curl/pull/914

- [Miroslav Franc brought this change]

  library: Fix memory leaks found during static analysis
  
  Closes https://github.com/curl/curl/pull/913

- [Viktor Szakats brought this change]

  cookie.c: Fix misleading indentation
  
  Closes https://github.com/curl/curl/pull/911

- FAQ: Update FTP directory listing section for MLSD command
  
  Explain how some FTP servers support the machine readable listing
  format MLSD from RFC 3659 and compare it to LIST.
  
  Ref: https://github.com/curl/curl/issues/906

Daniel Stenberg (1 Jul 2016)
- [Sergei Nikulov brought this change]

  Appveyor: Updates for options - CURL_STATICLIB/BUILD_TESTING
  
  Closes #892

- TODO: 17.4 also brings more HTTP/2 support

- TODO: try next proxy if one doesn't work
  
  Closes #896

- conn: don't free easy handle data in handler->disconnect
  
  Reported-by: Gou Lingfeng
  Bug: https://curl.haxx.se/mail/lib-2016-06/0139.html

- test1244: test different proxy ports same URL

- curl_global_init.3: improved formatting of the flags

- curl_global_init.3: expand on the SSL and WIN32 bits purpose
  
  Reported-by: Richard Gray
  Bug: https://curl.haxx.se/mail/lib-2016-06/0136.html

- [Michael Kaufmann brought this change]

  cleanup: minor code cleanup in Curl_http_readwrite_headers()
  
  - the expression of an 'if' was always true
  - a 'while' contained a condition that was always true
  - use 'if(k->exp100 > EXP100_SEND_DATA)' instead of 'if(k->exp100)'
  - fixed a typo
  
  Closes #889

- SFTP: set a generic error when no SFTP one exists...
  
  ... as otherwise we could get a 0 which would count as no error and we'd
  wrongly continue and could end up segfaulting.
  
  Bug: https://curl.haxx.se/mail/lib-2016-06/0052.html
  Reported-by: 暖和的和暖

- ROADMAP: http2 tests are merged, mention http2 perf

- docs/README.md: to render nicer pages on github
  
  ... as previously the README.cmake would be picked and put at the bottom
  of the docs page there and it wasn't very representative!

- README.md: change host name for the svg logo
  
  rawgit.com asks to use the domain cdn.rawgit.com for production
  
  See #900

- [Viktor Szakats brought this change]

  README.md: use the SVG logo

- README.md: logo on top!

- KNOWN_BUGS: 3.4 POP3 expects "CRLF.CRLF" eob for some
  
  Closes #740

- RELEASE-NOTES: synced with d61c80515aa8

- [Michael Osipov brought this change]

  acinclude.m4: improve autodetection of CA bundle on FreeBSD
  
  The FreeBSD Port security/ca_root_nss installs the Mozilla NSS CA bundle
  to /usr/local/share/certs/ca-root-nss.crt. Use this bundle in the
  discovery process.
  
  This change also removes the former FreeBSD path that has been obsolete
  for 8 years since this FreeBSD ports commit:
  https://svnweb.freebsd.org/ports/head/security/?view=revision&revision=215953
  
  Closes #894

- configure: don't specify .lib for libs on windows
  
  Another follow up for crypt32.lib linking with winssl

- configure: fix winssl LIBS change typo
  
  follow-up from 120bf29e

- TODO: "TCP Fast Open" is done, add monitor pool connections

- configure: add crypt32.lib for winssl builds
  
  Necessary since 6cabd78531f

- Makefile.vc: link with crypt32.lib for winssl builds
  
  Necessary since 6cabd78531f
  
  Fixes #853

- [Joel Depooter brought this change]

  VC: Add crypt32.lib to Visual Sudio project template files
  
  Closes #854

- vc: fix the build for schannel certinfo support
  
  Broken since 6cabd785, which adds use of the Curl_extract_certinfo
  function from the x509asn1.c file.

- typedefs: use the full structs in internal code...
  
  ... and save the typedef'ed names for headers and external APIs.

- internals: rename the SessionHandle struct to Curl_easy

- headers: forward declare CURL, CURLM and CURLSH as structs
  
  Instead of typedef'ing to void, typedef to their corresponding actual
  struct names to allow compilers to type-check.
  
  Assisted-by: Reinhard Max

Jay Satiro (22 Jun 2016)
- vtls: Only call add/getsession if session id is enabled
  
  Prior to this change we called Curl_ssl_getsessionid and
  Curl_ssl_addsessionid regardless of whether session ID reusing was
  enabled. According to comments that is in case session ID reuse was
  disabled but then later enabled.
  
  The old way was not intuitive and probably not something users expected.
  When a user disables session ID caching I'd guess they don't expect the
  session ID to be cached anyway in case the caching is later enabled.

Daniel Stenberg (22 Jun 2016)
- curl.1: the used progress meter suffix is k in lower case
  
  Closes #883

- [Sergei Nikulov brought this change]

  cmake: now using BUILD_TESTING=ON/OFF
  
  CMake build now using BUILD_TESTING=ON/OFF (default is OFF) to build
  tests and enabling CTest integration. Options BUILD_CURL_TESTS and
  BUILD_DASHBOARD_REPORTS was removed.
  
  Closes #882
  
  Reviewed-by: Brad King

- [Michael Kaufmann brought this change]

  cleanup: fix method names in code comments
  
  Closes #887

Kamil Dudka (21 Jun 2016)
- curl-compilers.m4: improve detection of GCC's -fvisibility= flag
  
  Some builds of GCC produce output on both stdout and stderr when --help
  --verbose is used.  The 2>&1 redirection caused them to be arbitrarily
  interleaved with each other because of stream buffering.  Consequently,
  grep failed to match the fvisibility= string in the mixed output, even
  though the string was present in GCC's standard output.
  
  This led to silently disabling symbol hiding in some builds of curl.

Daniel Stenberg (19 Jun 2016)
- tests: fix the HTTP/2 tests
  
  The HTTP/2 tests brought with commit bf05606ef1f were using the internal
  name 'http2' for the HTTP/2 server, while in fact that name was already
  used for the second instance of the HTTP server. This made tests using
  the second instance (like test 2050) fail after a HTTP/2 test had run.
  
  The server is now known as HTTP/2 internally and within the <server>
  section in test cases. 1700, 1701 and 1702 were updated accordingly.

- openssl: use more 'const' to fix build warnings with 1.1.0 branch

- curl.1: missed 'T' in the progress unit suffixes

- curl.1: mention the unix for the progress meter

Patrick Monnerat (16 Jun 2016)
- os400: add new definitions to ILE/RPG binding.

Daniel Stenberg (16 Jun 2016)
- openssl: fix cert check with non-DNS name fields present
  
  Regression introduced in 5f5b62635 (released in 7.48.0)
  
  Reported-by: Fabian Ruff
  Fixes #875

Dan Fandrich (16 Jun 2016)
- axtls: Use Curl_wait_ms instead of the less-portable usleep

- axtls: Fixed compile after compile 31c521b0

- tests: Added HTTP proxy keywords to tests 1141 & 1142

Jay Satiro (15 Jun 2016)
- [Sergei Nikulov brought this change]

  cmake: Fix build with winldap
  
  Bug: https://github.com/curl/curl/pull/874
  Reported-by: Sergei Nikulov

- CURLOPT_POSTFIELDS.3: Clarify what happens when set empty
  
  When CURLOPT_POSTFIELDS is set to an empty string libcurl will send a
  zero-byte POST. Prior to this change it was documented as sending data
  from the read callback.
  
  This also changes the wording of what happens when empty or NULL so that
  it's hopefully easier to understand for people whose primary language
  isn't English.
  
  Bug: https://github.com/curl/curl/issues/862
  Reported-by: Askar Safin

- [Michael Wallner brought this change]

  curl_multi_socket_action.3: Fix rewording
  
  - Remove some erroneous text.
  
  Closes https://github.com/curl/curl/pull/865

- [Luo Jinghua brought this change]

  resolve: enable protocol family logic for synthesized IPv6
  
  - Enable protocol family logic for IPv6 resolves even when support
  for synthesized addresses is enabled.
  
  This is a follow up to the parent commit that added support for
  synthesized IPv6 addresses from IPv4 on iOS/OS X. The protocol family
  logic needed for IPv6 was inadvertently excluded if support for
  synthesized addresses was enabled.
  
  Bug: https://github.com/curl/curl/issues/863
  Ref: https://github.com/curl/curl/pull/866
  Ref: https://github.com/curl/curl/pull/867

Daniel Stenberg (7 Jun 2016)
- [Luo Jinghua brought this change]

  resolve: add support for IPv6 DNS64/NAT64 Networks on OS X + iOS
  
  Use getaddrinfo() to resolve the IPv4 address literal on iOS/Mac OS X.
  If the current network interface doesn’t support IPv4, but supports
  IPv6, NAT64, and DNS64.
  
  Closes #866
  Fixes #863

- tests: two more HTTP/2 tests
  
  1701 and 1702

- runtests: don't display logs when http2 server fails to start

- runtests: make stripfile work on stdout as well
  
  ... and have test 1700 use that to strip out the nghttpx server: headers

- http2-tests: test1700 is the first real HTTP/2 test
  
  It requires that 'nghttpx' is in the PATH, and it will run the tests
  using nghttpx as a front-end proxy in front of the standard HTTP/1 test
  server. This uses HTTP/2 over plain TCP.
  
  If you like me have nghttpx installed in a custom path, you can run test 1700
  like this:
  
  $ PATH=$PATH:$HOME/build-nghttp2/bin/ ./runtests.pl 1700

- RELEASE-NOTES: synced with 34855feeb4c299

Steve Holme (6 Jun 2016)
- schannel: Disable ALPN on Windows < 8.1
  
  Calling QueryContextAttributes with SECPKG_ATTR_APPLICATION_PROTOCOL
  fails on Windows < 8.1 so we need to disable ALPN on these OS versions.
  
  Inspiration provide by: Daniel Seither
  
  Closes #848
  Fixes #840

Jay Satiro (5 Jun 2016)
- checksrc: Add LoadLibrary to the banned functions list
  
  LoadLibrary was supplanted by Curl_load_library for security
  reasons in 6df916d.

- http: Fix HTTP/2 connection reuse
  
  - Change the parser to not require a minor version for HTTP/2.
  
  HTTP/2 connection reuse broke when we changed from HTTP/2.0 to HTTP/2
  in 8243a95 because the parser still expected a minor version.
  
  Bug: https://github.com/curl/curl/issues/855
  Reported-by: Andrew Robbins, Frank Gevaerts

Steve Holme (4 Jun 2016)
- connect.c: Fixed compilation warning from commit 332e8d6164
  
  connect.c:952:5: warning: suggest explicit braces to avoid ambiguous 'else'

- win32: Used centralised verify windows version function
  
  Closes #845

- win32: Added verify windows version functionality

- win32: Introduced centralised verify windows version function

Kamil Dudka (3 Jun 2016)
- tool_urlglob: fix off-by-one error in glob_parse()
  
  ... causing SIGSEGV while parsing URL with too many globs.
  Minimal example:
  
  $ curl $(for i in $(seq 101); do printf '{a}'; done)
  
  Reported-by: Romain Coltel
  Bug: https://bugzilla.redhat.com/1340757

Daniel Stenberg (1 Jun 2016)
- [Benjamin Kircher brought this change]

  libcurl-multi.3: fix small typo
  
  Closes #850

- [Viktor Szakats brought this change]

  makefile.m32: add crypt32 for winssl builds
  
  Dependency added by 6cabd78
  
  Closes #849

- [Ivan Avdeev brought this change]

  vtls: fix ssl session cache race condition
  
  Sessionid cache management is inseparable from managing individual
  session lifetimes. E.g. for reference-counted sessions (like those in
  SChannel and OpenSSL engines) every session addition and removal
  should be accompanied with refcount increment and decrement
  respectively. Failing to do so synchronously leads to a race condition
  that causes symptoms like use-after-free and memory corruption.
  This commit:
   - makes existing session cache locking explicit, thus allowing
     individual engines to manage lock's scope.
   - fixes OpenSSL and SChannel engines by putting refcount management
     inside this lock's scope in relevant places.
   - adds these explicit locking calls to other engines that use
     sessionid cache to accommodate for this change. Note, however,
     that it is unknown whether any of these engines could also have
     this race.
  
  Bug: https://github.com/curl/curl/issues/815
  Fixes #815
  Closes #847

- [Andrew Kurushin brought this change]

  schannel: add CURLOPT_CERTINFO support
  
  Closes #822

- RELEASE-NOTES: synced with 142ee9fa15002315

- openssl: rename the private SSL_strerror
  
  ... to make it not look like an OpenSSL function

- [Michael Kaufmann brought this change]

  openssl: Use correct buffer sizes for error messages
  
  Closes #844

- curl: fix -q [regression]
  
  This broke in 7.49.0 with commit e200034425a7625
  
  Fixes #842

- URL parser: allow URLs to use one, two or three slashes
  
  Mostly in order to support broken web sites that redirect to broken URLs
  that are accepted by browsers.
  
  Browsers are typically even more leniant than this as the WHATWG URL
  spec they should allow an _infinite_ amount. I tested 8000 slashes with
  Firefox and it just worked.
  
  Added test case 1141, 1142 and 1143 to verify the new parser.
  
  Closes #791

- [Renaud Lehoux brought this change]

  cmake: Added missing mbedTLS support
  
  Closes #837

- [Renaud Lehoux brought this change]

  mbedtls: removed unused variables
  
  Closes #838

- [Frank Gevaerts brought this change]

  http: add CURLINFO_HTTP_VERSION and %{http_version}
  
  Adds access to the effectively used http version to both libcurl and
  curl.
  
  Closes #799

- bump: start the journey toward 7.50.0

- [Marcel Raad brought this change]

  openssl: fix build with OPENSSL_NO_COMP
  
  With OPENSSL_NO_COMP defined, there is no function
  SSL_COMP_free_compression_methods
  
  Closes #836

- [Gisle Vanem brought this change]

  memdebug: fix MSVC crash with -DMEMDEBUG_LOG_SYNC
  
  Fixes #828

- [Jonathan brought this change]

  README.md: polish
  
  Closes #834

- RELEASE-NOTES: fix vuln link

Version 7.49.1 (30 May 2016)

Daniel Stenberg (30 May 2016)
- RELEASE-NOTES: 7.49.1

- [Steve Holme brought this change]

  loadlibrary: Only load system DLLs from the system directory
  
  Inspiration provided by: Daniel Stenberg and Ray Satiro
  
  Bug: https://curl.haxx.se/docs/adv_20160530.html
  
  Ref: Windows DLL hijacking with curl, CVE-2016-4802

- ssh: fix version number check typo

Jay Satiro (29 May 2016)
- curl_share_setopt.3: Add min ver needed for ssl session lock
  
  Bug: https://github.com/curl/curl/issues/826
  Reported-by: Michael Wallner

Daniel Stenberg (29 May 2016)
- ssh: fix build for libssh2 before 1.2.6
  
  The statvfs functionality was added to libssh2 in that version, so we
  switch off that functionality when built with older libraries.
  
  Fixes #831

- mbedtls: fix includes so snprintf() works
  
  Regression from the previous *printf() rearrangements, this file missed to
  include the correct header to make sure snprintf() works universally.
  
  Reported-by: Moti Avrahami
  Bug: https://curl.haxx.se/mail/lib-2016-05/0196.html

Steve Holme (23 May 2016)
- checksrc.pl: Added variants of strcat() & strncat() to banned function list
  
  Added support for checking the tchar, unicode and mbcs variants of
  strcat() and strncat() in the banned function list.

Daniel Stenberg (23 May 2016)
- smtp: minor ident (white space) fixes

- THANKS: updated after script fixes
  
  Now giving credit properly to github user names, fixed some UTF-8 issues
  and added names discovered when contrithanks was improved.

- THANKS-filter: more name cleanups

- contrithanks.sh: exclude existing names case insensitively

- contrithanks.sh: use same grep pattern and -a flag as contributors.sh

- contributors.sh: better grep pattern, use grep -a

- THANKS-filter: fix more names

- contrithanks.sh: do the same github fix as contributors.sh
  
  from 1577bfa35ba

Jay Satiro (23 May 2016)
- contributors: Show GitHub username if real name unknown
  
  Prior to this change if a GitHub contributor's real name was unknown
  they would be omitted from the list.
  
  Bug: https://github.com/curl/curl/issues/824

Daniel Stenberg (21 May 2016)
- RELEASE-NOTES: synced with 3caaeffbe8ded4

Jay Satiro (20 May 2016)
- openssl: cleanup must free compression methods
  
  - Free compression methods if OpenSSL 1.0.2 to avoid a memory leak.
  
  Bug: https://github.com/curl/curl/issues/817
  Reported-by: jveazey@users.noreply.github.com

Daniel Stenberg (20 May 2016)
- [Gisle Vanem brought this change]

  curl_multibyte: fix compiler error
  
  While compiling lib/curl_multibyte.c with '-DUSE_WIN32_IDN' etc. I was
  getting:
  
  f:\mingw32\src\inet\curl\lib\memdebug.h(38): error C2054: expected '('
  to follow 'CURL_EXTERN'
  
  f:\mingw32\src\inet\curl\lib\memdebug.h(38): error C2085:
  'curl_domalloc': not in formal parameter list

- THANKS-filter: make Jan-E get proper credit

- [Jan-E brought this change]

  winbuild/Makefile.vc: Fix check on SSL, MBEDTLS, WINSSL exclusivity
  
  Closes #818

- [Alexander Traud brought this change]

  libcurl.m4: Avoid obsolete warning
  
  Closes #821

Jay Satiro (20 May 2016)
- [Michael Kaufmann brought this change]

  CURLOPT_CONNECT_TO.3: user must not free the list prematurely
  
  The connect-to list isn't copied so as long as the handle may be used
  for a transfer the list must be valid.
  
  Bug: https://github.com/curl/curl/pull/819
  Reported-by: Michael Kaufmann

Daniel Stenberg (19 May 2016)
- RELEASE-NOTES: synced with 48114a8634242c

- openssl: ERR_remove_thread_state() is deprecated in latest 1.1.0
  
  See OpenSSL commit 21e001747d4a

- http2: use HTTP/2 in the HTTP/1.1-alike header
  
  ... when generating them, not "2.0" as the protocol is called just
  HTTP/2 and nothing else.

Jay Satiro (19 May 2016)
- dist: include curl_multi_socket_all.3
  
  Closes https://github.com/curl/curl/pull/816

Steve Holme (18 May 2016)
- bump: Start work on 7.49.1

Daniel Stenberg (18 May 2016)
- curlbuild.h.dist: check __LP64__ as well to fix MIPS build
  
  The preprocessor check that sets up the 32bit defines for non-configure
  builds didn't work properly for MIPS systems as __mips__ is defined for
  both 32bit and 64bit. Now __LP64__ is also checked and indicates 64bit.
  
  Reported-by: Tomas Jakobsson
  Fixes #813

- [Marcel Raad brought this change]

  schannel: fix compile break with MSVC XP toolset
  
  For the Windows XP toolset of Visual C++ 2013/2015, the old Windows SDK
  7.1 is used. In this case, _USING_V110_SDK71_ is defined.
  
  Closes #812

- dist: include CHECKSRC.md
  
  Reported-by: Paul Howarth
  Bug: https://curl.haxx.se/mail/lib-2016-05/0116.html

- test/Makefile.am: include manpage-scan.pl and nroff-scan.pl in dist
  
  Reported-by: Ray Satiro
  Bug: https://curl.haxx.se/mail/lib-2016-05/0113.html

Version 7.49.0 (17 May 2016)

Daniel Stenberg (17 May 2016)
- THANKS: 24 new names from 7.49.0 release notes

- RELEASE-NOTES: 7.49.0

- mbedtls/polarssl: set "hostname" unconditionally
  
  ...as otherwise the TLS libs will skip the CN/SAN check and just allow
  connection to any server. curl previously skipped this function when SNI
  wasn't used or when connecting to an IP address specified host.
  
  CVE-2016-3739
  
  Bug: https://curl.haxx.se/docs/adv_20160518A.html
  Reported-by: Moti Avrahami

- [Frank Gevaerts brought this change]

  CURLOPT_RESOLVE.3: fix typo
  
  Closes #811

- docs: CURLOPT_RESOLVE overrides CURLOPT_IPRESOLVE

- KNOWN_BUGS: GnuTLS backend skips really long certificate fields
  
  Closes #762

- CURLOPT_HTTPPOST.3: the data needs to be around while in use

- openssl: get_cert_chain: fix NULL dereference
  
  CID 1361815: Explicit null dereferenced (FORWARD_NULL)

- openssl: get_cert_chain: avoid NULL dereference
  
  CID 1361811: Explicit null dereferenced (FORWARD_NULL)

- dprintf_formatf: fix (false?) Coverity warning
  
  CID 1024412: Memory - illegal accesses (OVERRUN). Claimed to happen when
  we run over 'workend' but the condition says <= workend and for all I
  can see it should be safe. Compensating for the warning by adding a byte
  margin in the buffer.
  
  Also, removed the extra brace level indentation in the code and made it
  so that 'workend' is only assigned once within the function.

- RELEASE-NOTES: synced with 2dcb5adc72d6

- THANKS-filter: fixed Jonathan Cardoso

Jay Satiro (15 May 2016)
- ftp: fix incorrect out-of-memory code in Curl_pretransfer
  
  - Return value type must match function type.
  
  s/CURLM_OUT_OF_MEMORY/CURLE_OUT_OF_MEMORY/
  
  Caught by Travis CI

Daniel Stenberg (15 May 2016)
- ftp wildcard: segfault due to init only in multi_perform
  
  The proper FTP wildcard init is now more properly done in Curl_pretransfer()
  and the corresponding cleanup in Curl_close().
  
  The previous place of init/cleanup code made the internal pointer to be NULL
  when this feature was used with the multi_socket() API, as it was made within
  the curl_multi_perform() function.
  
  Reported-by: Jonathan Cardoso Machado
  Fixes #800

Jay Satiro (13 May 2016)
- libcurl-tlibcurl-thread: Update OpenSSL links
  
  Because the old OpenSSL link now redirects to their master documentation
  (currently 1.1.0), which does not document the required actions for
  OpenSSL <= 1.0.2.

Daniel Stenberg (13 May 2016)
- [Viktor Szakats brought this change]

  darwinssl.c: fix OS X codename typo in comment

- RELEASE-NOTES: synced with 68701e51c1f7
  
  Added 8 bug fixes and 5 more contrbutors

- [Jay Satiro brought this change]

  mprintf: Fix processing of width and prec args
  
  Prior to this change a width arg could be erroneously output, and also
  width and precision args could not be used together without crashing.
  
  "%0*d%s", 2, 9, "foo"
  
  Before: "092"
  After: "09foo"
  
  "%*.*s", 5, 2, "foo"
  
  Before: crash
  After: "   fo"
  
  Test 557 is updated to verify this and more

- [Michael Kaufmann brought this change]

  ConnectionExists: follow-up fix for proxy re-use
  
  Follow-up commit to 5823179
  
  Closes #648

- [Per Malmberg brought this change]

  darwinssl: fix certificate verification disable on OS X 10.8
  
  The new way of disabling certificate verification doesn't work on
  Mountain Lion (OS X 10.8) so we need to use the old way in that version
  too. I've tested this solution on versions 10.7.5, 10.8, 10.9, 10.10.2
  and 10.11.
  
  Closes #802

- [Cory Benfield brought this change]

  http2: Add space between colon and header value
  
  curl's representation of HTTP/2 responses involves transforming the
  response to a format that is similar to HTTP/1.1. Prior to this change,
  curl would do this by separating header names and values with only a
  colon, without introducing a space after the colon.
  
  While this is technically a valid way to represent a HTTP/1.1 header
  block, it is much more common to see a space following the colon. This
  change introduces that space, to ensure that incautious tools are safely
  able to parse the header block.
  
  This also ensures that the difference between the HTTP/1.1 and HTTP/2
  response layout is as minimal as possible.
  
  Bug: https://github.com/curl/curl/issues/797
  
  Closes #798
  Fixes #797

Kamil Dudka (12 May 2016)
- openssl: fix compile-time warning in Curl_ossl_check_cxn()
  
  ... introduced in curl-7_48_0-293-g2968c83:
  
  Error: COMPILER_WARNING:
  lib/vtls/openssl.c: scope_hint: In function ‘Curl_ossl_check_cxn’
  lib/vtls/openssl.c:767:15: warning: conversion to ‘int’ from ‘ssize_t’
  may alter its value [-Wconversion]

Jay Satiro (11 May 2016)
- openssl: stricter connection check function
  
  - In the case of recv error, limit returning 'connection still in place'
  to EINPROGRESS, EAGAIN and EWOULDBLOCK.
  
  This is an improvement on the parent commit which changed the openssl
  connection check to use recv MSG_PEEK instead of SSL_peek.
  
  Ref: https://github.com/curl/curl/commit/856baf5#comments

Daniel Stenberg (11 May 2016)
- [Anders Bakken brought this change]

  TLS: SSL_peek is not a const operation
  
  Calling SSL_peek can cause bytes to be read from the raw socket which in
  turn can upset the select machinery that determines whether there's data
  available on the socket.
  
  Since Curl_ossl_check_cxn only tries to determine whether the socket is
  alive and doesn't actually need to see the bytes SSL_peek seems like
  the wrong function to call.
  
  We're able to occasionally reproduce a connect timeout due to this
  bug. What happens is that Curl doesn't know to call SSL_connect again
  after the peek happens since data is buffered in the SSL buffer and thus
  select won't fire for this socket.
  
  Closes #795

Jay Satiro (9 May 2016)
- [Daniel Stenberg brought this change]

  TLS: move the ALPN/NPN enable bits to the connection
  
  Only protocols that actually have a protocol registered for ALPN and NPN
  should try to get that negotiated in the TLS handshake. That is only
  HTTPS (well, http/1.1 and http/2) right now. Previously ALPN and NPN
  would wrongly be used in all handshakes if libcurl was built with it
  enabled.
  
  Reported-by: Jay Satiro
  
  Fixes #789

Daniel Stenberg (8 May 2016)
- libcurl-thread.3: openssl 1.1.0 is safe, and so is boringssl

- [Antonio Larrosa brought this change]

  connect: fix invalid "Network is unreachable" errors
  
  Sometimes, in systems with both ipv4 and ipv6 addresses but where the
  network doesn't support ipv6, Curl_is_connected returns an error
  (intermittently) even if the ipv4 socket connects successfully.
  
  This happens because there's a for-loop that iterates on the sockets but
  the error variable is not resetted when the ipv4 is checked and is ok.
  
  This patch fixes this problem by setting error to 0 when checking the
  second socket and not having a result yet.
  
  Fixes #794

Jay Satiro (5 May 2016)
- FAQ: refer to thread safety guidelines

Daniel Stenberg (3 May 2016)
- connections: non-HTTP proxies on different ports aren't reused either
  
  Reported-by: Oleg Pudeyev and fuchaoqun
  
  Fixes #648

- http: make sure a blank header overrides accept_decoding
  
  Reported-by: rcanavan
  Assisted-by: Isaac Boukris
  Closes #785

- CHECKSRC.md: clarified, explained the whitelist file

- nroff-scan.pl: verify that references are made with \fI

- docs: unified man page references to use \fI

- TODO: 17.14 --fail without --location should treat 3xx as a failure
  
  Closes #727

- RELEASE-NOTES: synced with 7987f5cb14d

- [Isaac Boukris brought this change]

  CURLOPT_ACCEPT_ENCODING.3: Follow-up clarification
  
  Mention possible content-length mismatch with sum of bytes reported
  by write callbacks when auto decoding is enabled.
  
  See #785

- test1140: run nroff-scan to verify man pages

- nroff-scan.pl: verify the .BR references as well

- CURLOPT_CONV_TO_NETWORK_FUNCTION.3: fix bad man page reference

- CURLOPT_BUFFERSIZE.3: fix reference to CURLOPT_MAX_RECV_SPEED_LARGE

- curl_easy_pause.3: fix man page reference

Jay Satiro (1 May 2016)
- tool_cb_hdr: Fix --remote-header-name with schemeless URL
  
  - Move the existing scheme check from tool_operate.
  
  In the case of --remote-header-name we want to parse Content-disposition
  for a filename, but only if the scheme is http or https. A recent
  adjustment 0dc4d8e was made to account for schemeless URLs however it's
  not 100% accurate. To remedy that I've moved the scheme check to the
  header callback, since at that point the library has already determined
  the scheme.
  
  Bug: https://github.com/curl/curl/issues/760
  Reported-by: Kai Noda

Daniel Stenberg (1 May 2016)
- tls: make setting pinnedkey option fail if not supported
  
  to make it obvious to users trying to use the feature with TLS backends
  not supporting it.
  
  Discussed in #781
  Reported-by: Travis Burtrum

- nroff-scan.pl: verifies nroff pages
  
  ... not used by any test yet but can be used stand-alone.

- opts: fix broken/bad references

- [Michael Kaufmann brought this change]

  docs: fix bugs in CURLOPT_HTTP_VERSION.3 and CURLOPT_PIPEWAIT.3
  
  Closes #786

- CURLOPT_ACCEPT_ENCODING.3: clarified
  
  As discussed in #785

- curl.1: --mail-rcpt can be used multiple times
  
  Reported-by: mgendre
  Closes #784

- [Karlson2k brought this change]

  tests: Use 'pathhelp' for paths conversions in secureserver.pl
  
  Closes #675

- [Karlson2k brought this change]

  tests: Use 'pathhelp' for paths conversions in sshserver.pl

- [Karlson2k brought this change]

  tests: Use 'pathhelp' for current path in runtests.pl

- [Karlson2k brought this change]

  tests: pathhelp.pm to process paths on Msys/Cygwin

- lib: include curl_printf.h as one of the last headers
  
  curl_printf.h defines printf to curl_mprintf, etc. This can cause
  problems with external headers which may use
  __attribute__((format(printf, ...))) markers etc.
  
  To avoid that they cause problems with system includes, we include
  curl_printf.h after any system headers. That makes the three last
  headers to always be, and we keep them in this order:
  
   curl_printf.h
   curl_memory.h
   memdebug.h
  
  None of them include system headers, they all do funny #defines.
  
  Reported-by: David Benjamin
  
  Fixes #743

- memdebug.h: remove inclusion of other headers
  
  Mostly because they're not needed, because memdebug.h is always included
  last of all headers so the others already included the correct ones.
  
  But also, starting now we don't want this to accidentally include any
  system headers, as the header included _before_ this header may add
  defines and other fun stuff that we won't want used in system includes.

- [Jay Satiro brought this change]

  curl -J: make it work even without http:// scheme on URL
  
  It does open up a miniscule risk that one of the other protocols that
  libcurl could use would send back a Content-Disposition header and then
  curl would act on it even if not HTTP.
  
  A future mitigation for this risk would be to allow the callback to ask
  libcurl which protocol is being used.
  
  Verified with test 1312
  
  Closes #760

- manpage-scan.pl: also verify the command line option docs
  
  This script now also scans src/tool_getparam.c, docs/curl.1 and
  src/tool_help.c and will warn if any of them lists a command line option
  not mentioned in one of the other places.

- curl: show the long option version of -q in the -h list

- curl: remove "--socks" as "--socks5" turned 8
  
  In commit 2e42b0a2524 (Jan 2008) we made the option "--socks" deprecated
  and it has not been documented since. The more explicit socks options
  (like --socks4 or --socks5) should be used.

- curl.1: document the deprecated --ftp-ssl option

- curl: remove --http-request
  
  It was mentioned as deprecated already in commit ae1912cb0d4 from
  1999. It has not been documented in this millennium.

- curl: mention --ntlm-wb in -h list

- curl: -h output lacked --proxy-header

- curl.1: document --ntlm-wb

- curl.1: document the long format of -q: --disable

- curl.1: mention the deprecated --krb4 option

- curl.1: document --ftp-ssl-reqd
  
  Even if deprecated, document it so that people will find it as old
  scripts may still use it.

- curl: use --telnet-option as documented
  
  The code said "telnet-options" but no documentation ever said so. It
  worked fine since the code is fine with a unique match of the first
  part.

- getparam: remove support for --ftpport
  
  It has been deprecated and undocumented since commit ad5ead8bed7 (Dec
  2003). --ftp-port is the proper long option name.

- curl: make --disable work as long form of -q
  
  To make the aliases list reflect reality.

- aliases: remove trailing space from capath string

- cmdline parse: only single letter options have single-letter strings
  
  ... moved around options so that parsing the code to find all
  single-letter options easier.

Jay Satiro (28 Apr 2016)
- CURLINFO_TLS_SSL_PTR.3: Clarify SSL pointer availability
  
  Bug: https://curl.haxx.se/mail/lib-2016-04/0126.html
  Reported-by: Bru Rom

Daniel Stenberg (28 Apr 2016)
- curl_easy_getinfo.3: remove superfluous blank lines

- test1139: verifies libcurl option man page presence
  
  - checks that each option has its own man page present
  
  - checks that each option is mentioned in its corresponding index man
    page

- curl_easy_getinfo.3: added missing mention of CURLINFO_TLS_SESSION
  
  ... although it is deprecated.

Jay Satiro (28 Apr 2016)
- mbedtls: Fix session resume
  
  This also fixes PolarSSL session resume.
  
  Prior to this change the TLS session information wasn't properly
  saved and restored for PolarSSL and mbedTLS.
  
  Bug: https://curl.haxx.se/mail/lib-2016-01/0070.html
  Reported-by: Thomas Glanzmann
  
  Bug: https://curl.haxx.se/mail/lib-2016-04/0095.html
  Reported-by: Moti Avrahami

Daniel Stenberg (27 Apr 2016)
- RELEASE-NOTES: synced with f4298fcc6d2

- [Michael Kaufmann brought this change]

  opts: Fix some syntax errors in example code fragments
  
  Fixes #779

- openssl: avoid BN_print a NULL bignum
  
  OpenSSL 1.1.0-pre seems to return NULL(?) for a whole lot of those
  numbers so make sure the function handles this.
  
  Reported-by: Linus Nordberg

- [Marcel Raad brought this change]

  CONNECT_ONLY: don't close connection on GSS 401/407 reponses
  
  Previously, connections were closed immediately before the user had a
  chance to extract the socket when the proxy required Negotiate
  authentication.
  
  This regression was brought in with the security fix in commit
  79b9d5f1a42578f
  
  Closes #655

- CURLINFO_TLS_SESSION.3: clarify TLS library support before 7.48.0

- mbedtls.c: silly spellfix of a comment

- KNOWN_BUGS: 1.10 Strips trailing dot from host name
  
  Closes #716

- test1322: verify stripping of trailing dot from host name
  
  While being debated (in #716) and a violation of RFC 7230 section 5.4,
  this test verifies that the existing functionality works as intended. It
  strips the dot from the host name and uses the host without dot
  throughout the internals.

- multi: accidentally used resolved host name instead of proxy
  
  Regression introduced in 09b5a998
  
  Bug: https://curl.haxx.se/mail/lib-2016-04/0084.html
  Reported-by: BoBo

- symbols-in-versions: added new CURLSSLBACKEND_ symbols

- test148: fixed after the --ftp-create-dirs retry change
  
  follow-up commit to 3c1e84f569 as it made curl try a little harder

- curl.h: clarify curl_sslbackend for openssl clones and renames

- [Karlson2k brought this change]

  url.c: fixed DEBUGASSERT() for WinSock workaround
  
  If buffer is allocated, but nothing is received during prereceive
  stage, than number of processed bytes must be zero.
  
  Closes #778

- KNOWN_BUGS: --interface for ipv6 binds to unusable IP address
  
  Closes #686 for now.

- TODO: 1.17 Add support for IRIs
  
  Adding support for IRIs is a mouthful, but is probably interesting at
  least for areas and countries where the use of such "URLs" are growing
  popularity.
  
  Closes #776

- THANKS-filter: Travis Burtrum

- lib1517: checksrc compliance

- [moparisthebest brought this change]

  PolarSSL: Implement public key pinning

Patrick Monnerat (22 Apr 2016)
- os400: upgrade ILE/RPG binding

- curl.h: CURLOPT_CONNECT_TO sets a struct slist *, not a string

Daniel Stenberg (22 Apr 2016)
- contributors.sh: make --releasenotes implied
  
  It got too annoying to type =)

- RELEASE-NOTES: synced with 3c1e84f5693d8093

- curl: make --ftp-create-dirs retry on failure
  
  The underlying libcurl option used for this feature is
  CURLOPT_FTP_CREATE_MISSING_DIRS which has the ability to retry the dir
  creation, but it was never set to do that by the command line tool.
  
  Now it does.
  
  Bug: https://curl.haxx.se/mail/archive-2016-04/0021.html
  Reported-by: John Wanghui
  Help-by: Leif W

- [Henrik Gaßmann brought this change]

  winbuild: add mbedtls support
  
  Add WITH_MBEDTLS option. Make WITH_SSL, WITH_MBEDTLS and ENABLE_WINSSL
  options mutual exclusive.
  
  Closes #606

- KNOWN_BUGS: fixed "5.6 Improper use of Autoconf cache variables"
  
  As of commit d9f3b365a3

- [Irfan Adilovic brought this change]

  configure: ac_cv_ -> curl_cv_ for write-only vars
  
  These configure vars are modified in a curl-specific way but never
  evaluated or loaded from cache, even though they are designated as
  _cv_. We could either implement proper AC_CACHE_CHECKs for them, or
  remove them completely.
  
  Fixes #603 as ac_cv_func_gethostbyname is no longer clobbered, and
  AC_CHECK_FUNC(gethostbyname...) will no longer spuriously succeed after
  the first configure run with caching.
  
  `ac_cv_func_strcasecmp` is curious, see #770.
  
  `eval "ac_cv_func_$func=yes"` can still cause problems as it works in
  tandem with AC_CHECK_FUNCS and then potentially modifies its result. It
  would be best to rewrite this test to use a new CURL_CHECK_FUNCS macro,
  which works the same as AC_CHECK_FUNCS but relies on caching the values
  of curl_cv_func_* variables, without modifiying ac_cv_func_*.

- [Irfan Adilovic brought this change]

  configure: ac_cv_ -> curl_cv_ for r/w vars
  
  These configure vars are modified in a curl-specific way and modified by
  the configure process, but are never loaded from cache, even though they
  are designated as _cv_. We should implement proper AC_CACHE_CHECKs for
  them eventually.

- [Irfan Adilovic brought this change]

  configure: ac_cv_func_clock_gettime -> curl_...
  
  This variable must not be cached in its current form, as any cached
  information will prevent the next configure run from determining the
  correct LIBS needed for the function. Thus, rename prefix `ac_cv_` to
  just `curl_`.

- [Irfan Adilovic brought this change]

  configure: ac_cv_ -> curl_cv_ for all cached vars
  
  This was automated by:
  
  sed -b -i -f <(ack -A1 AC_CACHE_CHECK | \
                 ack -o 'ac_cv_.*?\b' | \
                 sort -u | xargs -n1 bash -c \
                      'echo "s/$0/curl_cv_${0#ac_cv_}/g"') \
      $(git ls-files)
  
  This only changed the prefix for 16 variables actually checked with
  AC_CACHE_CHECK.

- openssl: builds with OpenSSL 1.1.0-pre5
  
  The RSA, DSA and DH structs are now opaque and require use of new APIs
  
  Fixes #763

Steve Holme (20 Apr 2016)
- url.c: Prefer we don't use explicit NULLs in conditions
  
  Fixed commit fa5fa65a30 to not use NULLs in if condition.

Daniel Stenberg (20 Apr 2016)
- [Isaac Boukris brought this change]

  NTLM: check for NULL pointer before deferencing
  
  At ConnectionExists, both check->proxyuser and check->proxypasswd
  could be NULL, so make sure to check first.
  
  Fixes #765

- [Karlson2k brought this change]

  tests: added test1517
  
  ... for checking ability to receive full HTTP response when POST request
  is used with slow read callback function.
  
  This test checks for bug #657 and verifies the work-around from
  72d5e144fbc6.
  
  Closes #720

- [Karlson2k brought this change]

  sendf.c: added ability to call recv() before send() as workaround
  
  WinSock destroys recv() buffer if send() is failed. As result - server
  response may be lost if server sent it while curl is still sending
  request. This behavior noticeable on HTTP server short replies if
  libcurl use several send() for request (usually for POST request).
  To workaround this problem, libcurl use recv() before every send() and
  keeps received data in intermediate buffer for further processing.
  
  Fixes: #657
  Closes: #668

Kamil Dudka (19 Apr 2016)
- connect: make sure that rc is initialized in singleipconnect()
  
  This commit fixes a Clang warning introduced in curl-7_48_0-190-g8f72b13:
  
  Error: CLANG_WARNING:
  lib/connect.c:1120:11: warning: The right operand of '==' is a garbage value
  1118|       }
  1119|
  1120|->     if(-1 == rc)
  1121|         error = SOCKERRNO;
  1122|     }

Daniel Stenberg (19 Apr 2016)
- make/checksrc: use $srcdir, not $top_srcdir

- src/checksrc.whitelist: removed

- tool_operate: switch to inline checksrc ignore

- lib/checksrc.whitelist: not needed anymore
  
  ... as checksrc now skips comments

- vtls.h: remove a space before semicolon
  
  ... that the new checksrc detected

- darwinssl: removed commented out code

- http_chunks: removed checksrc disable
  
  ... since checksrc now skips comments

- imap: inlined checksrc disable instead of whitelist edit

- checksrc: taught to skip comments
  
  ... but output non-stripped version of the line, even if that then can
  make the script identify the wrong position in the line at
  times. Showing the line stripped (ie without comments) is just too
  surprising.

- opts/Makefile.am: list all docs file one by one
  
  ... to make it easier to add lines in patches that won't just break all
  other patches trying to add lines too.

- curl_easy_setopt.3: mention CURLOPT_TCP_FASTOPEN

- RELEASE-NOTES: synced with 03de4e4b219
  
  (since we just merged two major features)

- [Alessandro Ghedini brought this change]

  connect: implement TCP Fast Open for Linux
  
  Closes #660

- [Alessandro Ghedini brought this change]

  tool: add --tcp-fastopen option

- [Alessandro Ghedini brought this change]

  connect: implement TCP Fast Open for OS X

- [Alessandro Ghedini brought this change]

  url: add CURLOPT_TCP_FASTOPEN option

- checksrc: pass on -D so the whitelists are found correctly

- configure: remove check for libresolve
  
  'strncasecmp' was once provided by libresolv (no trailing e) for SunOS,
  but this check is broken and most likely adds nothing useful. Removing
  now.
  
  Reported-by: Irfan Adilovic
  
  Discussed in #770

- scripts/make: use $(EXEEXT) for executables
  
  Reported-by: bodop
  
  Fixes #771

- includes: avoid duplicate memory callback typdefs even harder

- checksrc/makefile.am: use $top_srcdir to find source files
  
  ... to properly support out of source tree builds.

- RELEASE-NOTES: synced with 26ec93dd6aeba8dfb5

- opts: fix option references missing (section)

- [Michael Kaufmann brought this change]

  news: CURLOPT_CONNECT_TO and --connect-to
  
  Makes curl connect to the given host+port instead of the host+port found
  in the URL.

- makefile.vc6: use d suffix on debug object
  
  To allow both release and debug builds in parallel.
  
  Reported-by: Rod Widdowson
  
  Fixes #769

Jay Satiro (12 Apr 2016)
- http2: Use size_t type for data drain count
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- http2: Improve header parsing
  
  - Error if a header line is larger than supported.
  
  - Warn if cumulative header line length may be larger than supported.
  
  - Allow spaces when parsing the path component.
  
  - Make sure each header line ends in \r\n. This fixes an out of bounds.
  
  - Disallow header continuation lines until we decide what to do.
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- http2: Add Curl_http2_strerror for HTTP/2 error codes
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- [Tatsuhiro Tsujikawa brought this change]

  http2: Don't increment drain when one header field is received
  
  Sicne we write header field in temporary location, not in the memory
  that upper layer provides, incrementing drain should not happen.
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- [Tatsuhiro Tsujikawa brought this change]

  http2: Ensure that http2_handle_stream_close is called
  
  This commit ensures that streams which was closed in on_stream_close
  callback gets passed to http2_handle_stream_close.  Previously, this
  might not happen.  To achieve this, we increment drain property to
  forcibly call recv function for that stream.
  
  To more accurately check that we have no pending event before shutting
  down HTTP/2 session, we sum up drain property into
  http_conn.drain_total.  We only shutdown session if that value is 0.
  
  With this commit, when stream was closed before reading response
  header fields, error code CURLE_HTTP2_STREAM is returned even if
  HTTP/2 level error is NO_ERROR.  This signals the upper layer that
  stream was closed by error just like TCP connection close in HTTP/1.
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- [Tatsuhiro Tsujikawa brought this change]

  http2: Process paused data first before tear down http2 session
  
  This commit ensures that data from network are processed before HTTP/2
  session is terminated.  This is achieved by pausing nghttp2 whenever
  different stream than current easy handle receives data.
  
  This commit also fixes the bug that sometimes processing hangs when
  multiple HTTP/2 streams are multiplexed.
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- [Tatsuhiro Tsujikawa brought this change]

  http2: Check session closure early in http2_recv
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

- [Tatsuhiro Tsujikawa brought this change]

  http2: Add handling stream level error
  
  Previously, when a stream was closed with other than NGHTTP2_NO_ERROR
  by RST_STREAM, underlying TCP connection was dropped.  This is
  undesirable since there may be other streams multiplexed and they are
  very much fine.  This change introduce new error code
  CURLE_HTTP2_STREAM, which indicates stream error that only affects the
  relevant stream, and connection should be kept open.  The existing
  CURLE_HTTP2 means connection error in general.
  
  Ref: https://github.com/curl/curl/issues/659
  Ref: https://github.com/curl/curl/pull/663

Daniel Stenberg (11 Apr 2016)
- http2: drain the socket better...
  
  ... but ignore EAGAIN if the stream has ended so that we don't end up in
  a loop. This is a follow-up to c8ab613 in order to avoid the problem
  d261652 was made to fix.
  
  Reported-by: Jay Satiro
  Clues-provided-by: Tatsuhiro Tsujikawa
  
  Discussed in #750

- KNOWN_BUGS: added info for "Hangs with PolarSSL"

- KNOWN_BUGS: 1.9 HTTP/2 frames while in the connection pool kill reuse
  
  Closes #750

- build: include scripts/ in the dist

Steve Holme (9 Apr 2016)
- CURLOPT_SOCKS5_GSSAPI_SERVICE: Merged with CURLOPT_PROXY_SERVICE_NAME
  
  As these two options provide identical functionality, the former for
  SOCK5 proxies and the latter for HTTP proxies, merged the two options
  together.
  
  As such CURLOPT_SOCKS5_GSSAPI_SERVICE is marked as deprecated as of
  7.49.0.

- urldata: Use bool for socks5_gssapi_nec as it is a flag
  
  This value is set to TRUE or FALSE so should be a bool and not a long.

- url: Ternary operator code style changes

- CODE_STYLE: Added ternary operator example to 'Space around operators'
  
  Following conversation on the libcurl mailing list.

- sasl: Fixed compilation errors from commit 9d89a0387
  
  ...when GSS-API or Windows SSPI are not used.

- url: Corrected comments following 9d89a0387

- docs: Added clarification following commit 9d89a0387

- Makefile: Fixed echo of checksrc check

- checksrc: Fix issue with the autobuilds not picking up the whitelist

- checksrc: Added missing vauth and vtls directories

- ftp/imap/pop3/smtp: Allow the service name to be overridden
  
  Allow the service name to be overridden for DIGIST-MD5 and Kerberos 5
  authentication in FTP, IMAP, POP3 and SMTP.

- http_negotiate: Calculate service name and proxy service name locally
  
  Calculate the service name and proxy service names locally, rather than
  in url.c which will allow for us to support overriding the service name
  for other protocols such as FTP, IMAP, POP3 and SMTP.

- ROADMAP: Updated following the move of the authentication code

Patrick Monnerat (8 Apr 2016)
- KNOWN_BUGS: openldap hangs. TODO: binary SASL.

Daniel Stenberg (8 Apr 2016)
- KNOWN_BUGS: 5.6 Improper use of Autoconf cache variables
  
  Closes #603

- KNOWN_BUGS: 11.2 error buffer not set...
  
  Closes #544

- KNOWN_BUGS: 11.1 Curl leaks .onion hostnames in DNS
  
  Closes #543

- KNOWN_BUGS: 1.8 DNS timing is wrong for HTTP redirects
  
  Closes #522

- TODO: HTTP/2 "prior knowledge" is implemented!

- [Damien Vielpeau brought this change]

  mbedtls: fix MBEDTLS_DEBUG builds

- mbedtls: implement and provide *_data_pending()
  
  ... as otherwise we might get stuck thinking there's no more data to
  handle.
  
  Reported-by: Damien Vielpeau
  
  Fixes #737

- mbedtls: follow-up for the previous commit

- mbedtls.c: name space pollution fix, Use 'Curl_'

- mbedtls.c: changed private prefix to mbed_
  
  mbedtls_ is the prefix used by the mbedTLS library itself so we should
  avoid using that for our private functions.

- mbedtls.h: fix compiler warnings

- Revert "winbuild: trying to set some files eol=crlf for git"
  
  This reverts commit 9c08b4f1e7eced5a4d3782a3e0daa484c9d77d21.
  
  Didn't help. Caused problems.
  
  Fixes #756

- curl.1: use example.com more
  
  Make (most) example snippets use the example.com domain instead of the
  random ones picked and used before. Some of those were probably
  legitimate sites and some not. example.com is designed for this purpose.

- [Michael Kaufmann brought this change]

  HTTP2: Add a space character after the status code
  
  The space character after the status code is mandatory, even if the
  reason phrase is empty (see RFC 7230 section 3.1.2)
  
  Closes #755

- [Viktor Szakats brought this change]

  URLs: change http to https in many places
  
  Closes #754

- winbuild: trying to set some files eol=crlf for git
  
  Thinking it might help to apply patches etc with git.

- [Theodore Dubois brought this change]

  curl.1: change example for -F
  
  It's a bad idea to send your passwords anywhere, especially over HTTP.
  Modified example to send a picture instead.
  
  Fixes #752

- KNOWN_BUGS: reorganized and cleaned up
  
  Now sorted into categories and organized in the same style we do the
  TODO document. It will make each issue linked properly on the
  https://curl.haxx.se/docs/knownbugs.html web page.
  
  The sections should make it easier to find issues and issues related to
  areas of the reader's specific interest.

Jay Satiro (6 Apr 2016)
- KNOWN_BUGS: #95 curl in Windows can't handle Unicode arguments

Steve Holme (6 Apr 2016)
- KNOWN_BUGS: Use https://curl.haxx.se URL for github based issues

- CHECKSRC.md: Corrected some typos

- RELEASE-NOTES: Corrected last updated
  
  Included a summary of the checksrc.bat updates and combined two krb5
  changes as they should have been implemented at the same time.

- vauth: Corrected a number of typos in comments
  
  Reported-by: Michael Osipov

Jay Satiro (5 Apr 2016)
- KNOWN_BUGS: #94 IMAP custom requests use the LIST handler
  
  Bug: https://github.com/curl/curl/issues/536
  Reported-by: eXeC64@users.noreply.github.com

Daniel Stenberg (5 Apr 2016)
- KNOWN_BUGS: remove 68, 70 and 72.
  
  Due to their age (we don't fully know if they actually remain) and lack
  of detail - very few people will bother to find out what they're about
  or work on them. If people truly still suffer from any of these, I
  assume they will be reported again and then we'll deal with them.
  
  72. "Pausing pipeline problems."
    https://curl.haxx.se/mail/lib-2009-07/0214.html
  
  70. Problem re-using easy handle after call to curl_multi_remove_handle
    https://curl.haxx.se/mail/lib-2009-07/0249.html
  
  68. "More questions about ares behavior".
    https://curl.haxx.se/mail/lib-2009-08/0012.html

- KNOWN_BUGS: remove 92 and 88, fixed

- http2: fix connection reuse when PING comes after last DATA
  
  It turns out the google GFE HTTP/2 servers send a PING frame immediately
  after a stream ends and its last DATA has been received by curl. So if
  we don't drain that from the socket, it makes the socket readable in
  subsequent checks and libcurl then (wrongly) assumes the connection is
  dead when trying to reuse the connection.
  
  Reported-by: Joonas Kuorilehto
  
  Discussed in #750

- multi: remove trailing space in debug output

- RELEASE-NOTES: synced with 86e97b642fb

- CHECKSRC.md: mention cmdline options, fix the bullet list

- docs/CHECKSRC.md: initial version

Steve Holme (3 Apr 2016)
- checksrc.bat: Added support for the examples

Daniel Stenberg (3 Apr 2016)
- lib/src: fix the checksrc invoke
  
  ... now works correctly when invoke from the root makefile

- nw: please the stricter checksrc

Steve Holme (3 Apr 2016)
- checksrc.bat: Re-enabled the tests directory by default
  
  Following the recent changes to the source in the tests directory,
  re-enabled tests for the default scan.

- checksrc.bat: Added tests/server directory support
  
  In addition to commit 83b174b3f0 and following the recent changes.

- tests: Fixed header files to comply with our code style

Daniel Stenberg (3 Apr 2016)
- make checksrc: run it in docs/examples too by default

- docs/examples: remove spurious white spaces all over
  
  ... to please the new, slightly picker, checksrc.pl

- tests: fix make checksrc in servers/

- tests: 'make checksrc' now checks server/ too

- root/make: have checksrc run in include/curl too

- tests/server: comply with our code style

- code: style updates

- checksrc: check for more malplaced spaces

- unit: make unit test source code checksrc compliant

- checksrc: run checksrc in tests when 'make checksrc' in root

- checksrc: remove debug crap

- lib557: allow too long lines

- checksrc: allow ignore of specific warnings within a file (section)

- checksrc: add warning names, explain on help output

Steve Holme (3 Apr 2016)
- checksrc.bat: Disable tests by default until warnings are fixed

- checksrc.bat: Added support for the tests directory

- vauth: Removed the need for a separate GSS-API based SPN function

- curl_sasl: Fixed potential null pointer utilisation
  
  Although this should never happen due to the relationship between the
  'mech' and 'resp' variables, and the way they are allocated together,
  it does cause problems for code analysis tools:
  
  V595 The 'mech' pointer was utilized before it was verified against
       nullptr. Check lines: 376, 381. curl_sasl.c 376
  
  Bug: https://github.com/curl/curl/issues/745
  Reported-by: Alexis La Goutte

- spnego: Small code tidy up
  
  * Prefer dereference of string pointer rather than strlen()
  * Free challenge pointer in one place
  * Additional comments

- krb5: Small code tidy up
  
  * Prefer dereference of string pointer rather than strlen()
  * Free challenge pointer in one place
  * Additional comments

- krb5_gssapi: Only process challenge when present
  
  This wouldn't cause a problem because of the way the function is called,
  but prior to this change, we were processing the challenge message when
  the credentials were NULL rather than when the challenge message was
  populated.
  
  This also brings this part of the Kerberos 5 code in line with the
  Negotiate code.

- krb5: Fixed missing client response when mutual authentication enabled
  
  Although mutual authentication is currently turned off and can only be
  enabled by changing libcurl source code, authentication using Kerberos
  5 has been broken since commit 79543caf90 in this use case.

- krb5_sspi: Only process challenge when present
  
  This wouldn't cause a problem because of the way the function is called,
  but prior to this change, we were processing the challenge message when
  the credentials were NULL rather than when the challenge message was
  populated.
  
  This also brings this part of the Kerberos 5 code in line with the
  Negotiate code.

- krb5_sspi: Only generate the output token when its not allocated
  
  Prior to this change, we were generating the output token when the
  credentials were NULL rather than when the output token was NULL.
  
  This also brings this part of the Kerberos 5 code in line with the
  Negotiate code.

- krb5: Only generate a SPN when its not known
  
  Prior to this change, we were generating the SPN in the SSPI code when
  the credentials were NULL and in the GSS-API code when the context was
  empty. It is better to decouple the SPN generation from these checks
  and only generate it when the SPN itself is NULL.
  
  This also brings this part of the Kerberos 5 code in line with the
  Negotiate code.

Daniel Stenberg (3 Apr 2016)
- tests/libtest: follow our code style guidelines better
  
  ... checksrc of all test code is pending.

- checksrc.whitelist: remove fopen() uses

- formdata: use appropriate fopen() macros

- checksrc: improve the fopen() parser somewhat
  
  The quote scanner was too fragile, now look for a comma instead to find
  the mode argument.

- unit1604: fix snprintf
  
  follow-up to 0326b06
  
  sizeof(pointer) is no good for the buffer size!
  
  Reported-by: Viktor Szakats

Steve Holme (3 Apr 2016)
- unittests: Fixed compilation warnings
  
  warning: implicit declaration of function 'sprintf_was_used'
           [-Wimplicit-function-declaration]
  
  Follow up to the modications made to tests/libtest in commit 55452ebdff
  as we prefer not to use sprintf() now.

Daniel Stenberg (2 Apr 2016)
- curl.1: -w filename_effective was introduced in 7.26.0
  
  We never made a 7.25.1 release

- 7.49.0: next release version

- http2: make use of the nghttp2 error callback
  
  It offers extra info from nghttp2 in certain error cases. Like for
  example when trying prior-knowledge http2 on a server that doesn't speak
  http2 at all. The error message is passed on as a verbose message to
  libcurl.
  
  Discussed in #722
  
  The error callback was added in nghttp2 1.9.0

Steve Holme (2 Apr 2016)
- spnego: Renamed the context's SPN variable
  
  To be consistent with the Kerberos 5 context and other authentication
  code.

- krb5_gssapi: Renamed the status variables
  
  For consistency with the spnego code.

- krb5: Moved host from Curl_auth_create_gssapi_user_message() to be argument
  
  For consistency with the spnego and oauth2 code moved the setting of
  the host name outside of the Curl_auth_create_gssapi_user_messag()
  function.
  
  This will allow us to more easily override it in the future.

- test1119: Fixed missing CURL_DID_MEMORY_FUNC_TYPEDEFS symbol

- RELEASE-NOTES: Removed "http_negotiate: Corrected host and proxy host name"
  
  As this was introduced in the recent vauth changes and not a prior
  release.

Daniel Stenberg (1 Apr 2016)
- RELEASE-NOTES: synced with 0aa8da10bbdafa

Steve Holme (1 Apr 2016)
- http_negotiate: Corrected host and proxy host name being wrong way round
  
  I had accidentally used the proxy server name for the host and the host
  server name for the proxy in commit ad5e9bfd5d and 6d6f9ca1d9. Whilst
  Windows SSPI was quite happy with this, GSS-API wasn't.
  
  Thanks-to:  Michael Osipov

- build: Changed the Visual Studio projects warning level from 3 to 4
  
  After squashing most of our compiler warnings, up'ed the default
  warning level from 3 to 4 in order to increase the likelyhood of
  catching future warnings.

Daniel Stenberg (1 Apr 2016)
- [ehlertjd@gmail.com brought this change]

  IMAP: check pointer before dereferencing it
  
  may be null in the CURLOPT_CONNECT_ONLY case
  
  Fixes #747

Steve Holme (1 Apr 2016)
- .gitignore: Added new VC14 SQLite based program database files

- curl_memory.h: Fixed typo in comment
  
  From commit 7218b52c49.

- spnego: Corrected some typos in comments
  
  Corrected typos from commit ad5e9bfd5d and 6d6f9ca1d9.

- memdebug: Ensure curl/curl.h is included before curl_memory.h
  
  Follow up to commit 7db9782dd6.

Daniel Stenberg (1 Apr 2016)
- upload: missing rewind call could make libcurl hang
  
  When an upload is done, there are two places where that can be detected
  and only one of them would rewind the input stream - which sometimes is
  necessary for example when doing NTLM HTTP POSTs and more.
  
  This could then end up libcurl hanging.
  
  Figured-out-by: Isaac Boukris
  Reported-by: Anatol Belski
  
  Fixes #741

- curl.h: define CURL_DID_MEMORY_FUNC_TYPEDEFS
  
  So that we only do the extra typedefs in curl_memory.h when we really
  need to and avoid double typedefs.
  
  follow-up commit to 7218b52c49aeb1
  
  Thanks-to: Steve Holme

- curl/mprintf.h: remove support for _MPRINTF_REPLACE
  
  The define is not in our name space and is therefore not protected by
  our API promises.
  
  It was only really used by libcurl internals but was mostly erased from
  there already in 8aabbf5 (March 2015). This is supposedly the final
  death blow to that define from everywhere.
  
  As a side-effect, making sure _MPRINTF_REPLACE is gone and not used, I
  made the lib tests in tests/libtest/ use curl_printf.h for its redefine
  magic and then subsequently the use of sprintf() got banned in the tests
  as well (as it is in libcurl internals) and I then replaced them all
  with snprintf().
  
  In the unlikely event that any users is actually using this define and
  gets sad by this change, it is very easily copied to the user's own
  code.

- curl_memory.h: avoid the curl/curl.h include
  
  Discussed in #743

Steve Holme (1 Apr 2016)
- url: Corrected get protocol family for FTP and LDAP
  
  Fixed copy/paste error from commit a5aec58726.

Jay Satiro (31 Mar 2016)
- strerror: don't bit shift a signed integer
  
  Bug: https://github.com/curl/curl/issues/744
  Reported-by: Alexis La Goutte

Daniel Stenberg (31 Mar 2016)
- http2: more documentation for prior knowledge

- [Diego Bes brought this change]

  http2: support "prior knowledge", no upgrade from HTTP/1.1
  
  Supports HTTP/2 over clear TCP
  
  - Optimize switching to HTTP/2 by removing calls to init and setup
  before switching. Switching will eventually call setup and setup calls
  init.
  
  - Supports new version to “force” the use of HTTP/2 over clean TCP
  
  - Add common line parameter “--http2-prior-knowledge” to the Curl
    command line tool.

- imap: remove duplicated function
  
  The list and search response functions were identical! Merged into one
  now. Detected by PVS Studio.
  
  Reported-by: Alexis La Goutte

- SOCKS5_gssapi_negotiate: don't assume little-endian ints
  
  The code copied one byte from a 32bit integer, which works fine as long
  as the byte order is the same. Not a fine assumption. Reported by PVS
  Studio.
  
  Reported-by: Alexis La Goutte

- http: remove ((expression)) double parentheses

- Curl_add_buffer_send: avoid possible NULL dereference
  
  ... as we check for a NULL pointer below, we move the derefence to after
  the check. Detected by PVS Studio.
  
  Reported-by: Alexis La Goutte

- file: remove duplicate checks of the same variable
  
  ... as it doesn't change in between. Deteced by PVS Studio.
  
  Reported-by: Alexis La Goutte

Steve Holme (30 Mar 2016)
- [Marcel Raad brought this change]

  openssl: Fix compilation warnings
  
  When compiling with OpenSSL 1.1.0 (so that the HAVE_X509_GET0_SIGNATURE
  && HAVE_X509_GET0_EXTENSIONS pre-processor block is active), Visual C++
  14 complains:
  
  warning C4701: potentially uninitialized local variable 'palg' used
  warning C4701: potentially uninitialized local variable 'psig' used

Daniel Stenberg (30 Mar 2016)
- multi: turn Curl_done into file local multi_done
  
  ... as it now is used by multi.c only.

- multi: multi_reconnect_request is the former Curl_reconnect_request
  
  now a file local function in multi.c

- multi: move Curl_do and Curl_do_done to multi.c and make static
  
  ... called multi_do and multi_do_done as they're file local now.

Jay Satiro (29 Mar 2016)
- wolfssl: Use ECC supported curves extension
  
  https://github.com/wolfSSL/wolfssl/issues/366

- build-wolfssl: Allow a broader range of ciphers (Visual Studio)
  
  This is an update to the build-time options used to build wolfSSL in
  Visual Studio for greater compatibility, and make it behave similar to
  the way OpenSSL 1.0.2 behaves. Starting in wolfSSL v3.6.6 static ciphers
  and SSLv3 are disabled by default at build time, but we can use both.
  
  - Enable static cipher suites TLS_ECDH_ and TLS_RSA_.
  
  - Enable SSLv3 hello. Though in libcurl we disable it by default at
  runtime, we make it available so the user can manually select it if
  necessary.

Daniel Stenberg (29 Mar 2016)
- [Isaac Boukris brought this change]

  GSS: make Curl_gss_log_error more verbose
  
  Also display the GSS_C_GSS_CODE (major code) when specified instead of
  only GSS_C_MECH_CODE (minor code).
  
  In addition, the old code was printing a colon twice after the prefix
  and also miscalculated the length of the buffer in between calls to
  gss_display_status (the length of ": " was missing).
  
  Also, gss_buffer is not guaranteed to be NULL terminated and thus need
  to restrict reading by its length.
  
  Closes #738

- build: use roffit 0.11 feature
  
  ... load file specified as argument.

- http2: set correct scheme in handler structs [regression]
  
  Since commit a5aec58 the handler schemes need to match for the
  connections to be reused and for HTTP/2 multiplexing to work, reusing
  connections is very important!
  
  Closes #736

- hostip.c: minor white space edit for style

- [Viktor Szakats brought this change]

  TODO: use secure protocol in recently added URL
  
  Closes #733

- HTTP2.md: mention libressl and boringssl too

- docs/HTTP-COOKIES: converted to markdown

- HTTP2: s/polarssl/mbedtls

Jay Satiro (28 Mar 2016)
- wolfssl: Add ALPN support

- tool_operate: remove mixed declaration
  
  This is a follow up to the previous commit.

Daniel Stenberg (28 Mar 2016)
- curl: warn for --capath use if not supported by libcurl
  
  Closes #492

- TODO: 2.5 Edge-triggered sockets should work

- Makefile.am: skip the scripts dir
  
  Skipping the scripts dir is primarily done for 'make install' so that it
  does not attempt to install the zsh completion script as we've not yet
  found a proper way to do/run that at install time.
  
  By leaving the script dir's Makefile in place, a user can still opt to
  run make install manually in there.
  
  Closes #620

- CURLMOPT_SOCKETFUNCTION.3: describe the 'what' argument

- curl_multi_socket_action.3: mark the options properly
  
  ... to make them appear as links on the html version.

Steve Holme (27 Mar 2016)
- RELEASE-NOTES: Synced with f0bdd72c10

- http_ntlm: Renamed from curl_ntlm.[c|h]
  
  Renamed the header and source files for this module as they are HTTP
  specific and as such, they should use the naming convention as other
  HTTP authentication source files do - this revert commit 260ee6b7bf.
  
  Note: We could also rename curl_ntlm_wb.[c|h], however, the Winbind
  code needs separating from the HTTP protocol and migrating into the
  vauth directory, thus adding support for Winbind to the SASL based
  protocols such as IMAP, POP3 and SMTP.

Daniel Stenberg (27 Mar 2016)
- [marquis-de-muesli brought this change]

  docs: curlinfo_filetime sftp support, new curlopt_quote "statvfs"
  
  Closes #677

- [marquis-de-muesli brought this change]

  SSH: new CURLOPT_QUOTE command "statvfs"
  
  usage: "statvfs path"
  returns remote file system statistics

- [marquis-de-muesli brought this change]

  SSH: support CURLINFO_FILETIME

- [Karlson2k brought this change]

  sshserver.pl: use quotes for given options
  
  Fixed failed redirection of stderr with some options. At least on Msys2,
  perl fails to redirect stderr if $value contains newline or other weird
  characters.

Jay Satiro (26 Mar 2016)
- url: don't use bad offset in tld_check_name to show error
  
  libidn's tld_check_lz returns an error offset of the first character
  that it failed to process, however that offset is not a byte offset and
  may not even be in the locale encoding therefore we can't use it to show
  the user the character that failed to process.
  
  Bug: https://github.com/curl/curl/issues/731
  Reported-by: Karlson2k

Steve Holme (26 Mar 2016)
- http_negotiate: Combine GSS-API and SSPI source files
  
  As the GSS-API and SSPI based source files are no longer library/API
  specific, following the extraction of that authentication code to the
  vauth directory, combine these files rather than maintain two separate
  versions.

- vauth: Moved the Negotiate authentication code to the new vauth directory
  
  Part 2 of 2 - Moved the GSS-API based Negotiate authentication code.

- vauth: Moved the Negotiate authentication code to the new vauth directory
  
  Part 1 of 2 - Moved the SSPI based Negotiate authentication code.

- warnless.h: Removed spurious character from commit 696bc6b9c9
  
  Not picked up by checksrc or Visual Studio but my own code review, this
  would haven broken Intel based Unix builds - Perhaps I should learn to
  type on my laptop's keyboard before committing!

- schannel: Fixed compilation warning from commit f8d88a4913
  
  warning C4244: '=': conversion from 'int' to 'unsigned short', possible
                      loss of data

- warnless?: Added some integer based conversion functions

Daniel Stenberg (25 Mar 2016)
- [Dusty Mabe brought this change]

  docs/TODO: Add feature request for metalink in HTTP headers
  
  Closes #729
  Closes #728

Steve Holme (25 Mar 2016)
- build: Corrected typos from commit 70e56939aa

- vauth: Refactored function names after move to new vauth directory
  
  Renamed all the SASL functions that moved to the new vauth directory to
  include the correct module name.

- vauth: Updated the copyright year after recent changes
  
  As most of this work was performed in 2015 but not pushed until 2016
  updated the copyright year to reflect the public facing changes.

- vauth: Moved the OAuth 2.0 authentication code to the new vauth directory

- vauth: Moved the NTLM authentication code to the new vauth directory

- vauth: Moved the Kerberos V5 authentication code to the new vauth directory

- digest.c: Fixed checksrc warnings

- vauth: Moved the DIGEST authentication code to the new vauth directory

- vauth: Moved the CRAM-MD5 authentication code to the new vauth directory

- vauth: Moved the ClearText authentication code to the new vauth directory

- vauth: Moved Curl_sasl_build_spn() to create the initial vauth source files

- checksrc.bat: Added support for checking the new vauth directory

- build: Updated all makefiles and project files for the new vauth directory
  
  Updated the makefiles and Visual Studio project files to support moving
  the authentication code to the new lib/vauth directory that was started
  in commit 0d04e859e1.

Daniel Stenberg (24 Mar 2016)
- [JDepooter brought this change]

  schannel: Add ALPN support
  
  Add ALPN support for schannel. This allows cURL to negotiate
  HTTP/2.0 connections when built with schannel.
  
  Closes #724

Steve Holme (24 Mar 2016)
- http: Minor update based on CODE_STYLE guidelines

Daniel Stenberg (23 Mar 2016)
- multi: fix "Operation timed out after" timer
  
  Use the local, reasonably updated, 'now' value when creating the message
  string to output for the timeout condition.
  
  Fixes #619

- openssl: boringssl provides the same numbering as openssl
  
  ... so we don't need extra boringssl precautions for for
  HAVE_ERR_REMOVE_THREAD_STATE_NOARG.
  
  Pointed-out-by: David Benjamin

- openssl: fix ERR_remove_thread_state() for boringssl/libressl
  
  The removed arg is only done in OpenSSL
  
  Bug: https://twitter.com/xtraemeat/status/712564874098917376

- bump: work on 7.48.1

- RELEASE-PROCEDURE: mention the github release tag edit
  
  ... and update the coming release dates a bit

Steve Holme (23 Mar 2016)
- checksrc.bat: Updated the help to be consistent with generate.bat
  
  Follow up to commit a8c7f0fcbf prior to release.

Version 7.48.0 (23 Mar 2016)

Daniel Stenberg (23 Mar 2016)
- RELEASE-NOTES: curl 7.48.0

- THANKS: 15 new contributors from 7.48.0 release

Jay Satiro (23 Mar 2016)
- CURLINFO_TLS_SSL_PTR.3: Warn about limitations
  
  Bug: https://github.com/curl/curl/issues/685

Daniel Stenberg (22 Mar 2016)
- Revert "sshserver: remove use of AuthorizedKeysFile2"
  
  It seems we may have some autobuild problems after this commit went
  in. Trying to see if a revert helps to get them back.
  
  This reverts commit 2716350d1f3edc8e929f6ceeee05051090f6d642.

- maketgz: add -j to make dist
  
  ... makes it a lot faster

- libcurl-thread.3: minor nroff format fix

- CURLINFO_TLS_SSL_PTR.3: minor nroff format fix

- CODE_STYLE: indend example code
  
  ... to make it look nicer in markdown outputa

Jay Satiro (22 Mar 2016)
- build-wolfssl: Update VS properties for wolfSSL v3.9.0
  
  - Do not use wolfSSL's sample user-setting files.
  
  wolfSSL starting in v3.9.0 has added their own sample user settings that
  are applied by default, but we don't use them because we have our own
  settings.
  
  - Do not use wolfSSL's Visual Studio Unicode character setting.
  
  wolfSSL Visual Studio projects use the Unicode character set however our
  settings and options imitate mingw build which does not use the Unicode
  character set. This does not appear to have any effect at the moment but
  better safe than sorry.
  
  
  These changes are backwards compatible with earlier versions.

Steve Holme (22 Mar 2016)
- hostip6: Fixed compilation warnings when verbose strings disabled
  
  warning C4189: 'data': local variable is initialized but not referenced
  
  ...and some minor formatting/spacing changes.

Daniel Stenberg (21 Mar 2016)
- sshserver: remove use of AuthorizedKeysFile2
  
  Support for the (undocumented) AuthorizedKeysFile2 was removed in
  OpenSSH 5.9, released in September 2011
  
  Closes #715

Steve Holme (20 Mar 2016)
- connect/ntlm/http: Fixed compilation warnings when verbose strings disabled
  
  warning C4189: 'data': local variable is initialized but not referenced

- openssl: Fixed compilation warning when /Wall enabled
  
  warning C4706: assignment within conditional expression

- CODE_STYLE: Use boolean conditions
  
  Rather than use TRUE, FALSE, NULL, 0 or != 0 in if/while conditions.
  
  Additionally, corrected some example code to adhere to the recommended
  coding style.

- inet_pton.c: Fixed compilation warnings
  
  warning: conversion to 'unsigned char' from 'int' may alter its value

Daniel Stenberg (19 Mar 2016)
- RELEASE-NOTES: synced with 80851028efc2fa9

- mbedtls: fix compiler warning
  
  vtls/mbedtls.h:67:36: warning: implicit declaration of function
  ‘mbedtls_sha256’ [-Wimplicit-function-declaration]

Steve Holme (19 Mar 2016)
- easy: Minor coding standard and style updates
  
  Following commit c5744340db. Additionally removes the need for a second
  'result code' variable as well.

Jay Satiro (19 Mar 2016)
- easy: Remove poll failure check in easy_transfer
  
  .. because curl_multi_wait can no longer signal poll failure.
  
  follow-up to 77e1726
  
  Bug: https://github.com/curl/curl/issues/707

Steve Holme (19 Mar 2016)
- build: Added missing Visual Studio filter files for VC10 onwards
  
  As these files don't need to contain references to the source files,
  although typically do, added basic files which only include three
  filters and don't require the project file generator to be modified.
  
  These files allow the source code to be viewed in the Solution Explorer
  in versions of Visual Studio from 2010 onwards in the same manner as
  previous versions did rather than one large view of files.

- ftp/imap/pop3/smtp: Fixed compilation warning when /Wall enabled
  
  warning C4706: assignment within conditional expression

- config-w32.h: Fixed compilation warning when /Wall enabled
  
  warning C4668: 'USE_IPV6' is not defined as a preprocessor macro,
                 replacing with '0' for '#if/#elif'

- imap.c: Fixed compilation warning with /Wall enabled
  
  warning C4701: potentially uninitialized local variable 'size' used
  
  Technically this can't happen, as the usage of 'size' is protected by
  'if(parsed)' and 'parsed' is only set after 'size' has been parsed.
  
  Anyway, lets keep the compiler happy.

- KNOWN_BUGS: #93 Issue with CURLFORM_CONTENTLEN in arrays on 32-bit platforms

Daniel Stenberg (18 Mar 2016)
- bump: the coming release is 7.48.0

- configure: use cpp -P when needed
  
  Since gcc 5, the processor output can get split up on multiple lines
  that made the configure script fail to figure out values from
  definitions. The fix is to use cpp -P, and this fix now first checks if
  cpp -P is necessary and then if cpp -P works before it uses that to
  extract defined values.
  
  Fixes #719

Steve Holme (18 Mar 2016)
- formdata.c: Fixed compilation warning
  
  formdata.c:390: warning: cast from pointer to integer of different size
  
  Introduced in commit ca5f9341ef this happens because a char*, which is
  32-bits wide in 32-bit land, is being cast to a curl_off_t which is
  64-bits wide where 64-bit integers are supported by the compiler.
  
  This doesn't happen in 64-bit land as a pointer is the same size as a
  curl_off_t.
  
  This fix doesn't address the fact that a 64-bit value cannot be used
  for CURLFORM_CONTENTLEN when set in a form array and compiled on a
  32-bit platforms, it does at least suppress the compilation warning.

Daniel Stenberg (18 Mar 2016)
- FAQ: 2.5 Install libcurl for both 32bit and 64bit?

- [Gisle Vanem brought this change]

  openssl: adapt to API breakage in ERR_remove_thread_state()
  
  The OpenSSL API change that broke this is "Convert ERR_STATE to new
  multi-threading API": openssl commit 8509dcc.
  
  Closes #713

- version: init moved to private name space, added protos
  
  follow-up to 80015cdd52145

- openssl: verbose: show matching SAN pattern
  
  ... to allow users to see which specfic wildcard that matched when such
  is used.
  
  Also minor logic cleanup to simplify the code, and I removed all tabs
  from verbose strings.

Jay Satiro (16 Mar 2016)
- version: thread safety

Steve Holme (16 Mar 2016)
- transfer: Removed redundant HTTP authentication include files
  
  It would also seem that share.h is not required here either as there
  are no references to the Curl_share structure or functions.

- easy: Removed redundant HTTP authentication include files

Jay Satiro (15 Mar 2016)
- CURLOPT_SSLENGINE.3: Only for OpenSSL built with engine support
  
  Bug: https://curl.haxx.se/mail/lib-2016-03/0150.html
  Reported-by: Oliver Graute

Steve Holme (15 Mar 2016)
- curl_sasl: Minor code indent fixes

Daniel Stenberg (14 Mar 2016)
- runtests: mention when run event-based

- easy: add check to malloc() when running event-based
  
  ... to allow torture tests then too.

- memdebug: skip logging the limit countdown, fflush when reached

- CODE_STYLE: Space around operators
  
  As just discussed on the mailing list, also document how we prefer
  spacing in expressions.

- curl: glob_range: no need to check unsigned variable for negative
  
  cppcheck warned:
  
  [src/tool_urlglob.c:283]: (style) Checking if unsigned variable 'step_n'
  is less than zero.

- CODE_STYLE: add example for indent style as well

- CODE_STYLE: mention braces for functions too

- docs/Makefile.am: include CODE_STYLE in tarball too

- CONTRIBUTE: moved out code style to a separate document

- CODE_STYLE: initial version
  
  Ripped out from CONTRIBUTE into its own document, but also extended from
  there.

- curl_sasl.c: minor code indent fixes

- multi: simplified singlesocket
  
  Since sh_getentry() now checks for invalid sockets itself and by
  narrowing the scope of the remove_sock_from_hash variable.

- multi: introduce sh_getentry() for looking up sockets in the sockhash
  
  Simplify the code by using a single entry that looks for a socket in the
  socket hash. As indicated in #712, the code looked for CURL_SOCKET_BAD
  at some point and that is ineffective/wrong and this makes it easier to
  avoid that.

- [Jaime Fullaondo brought this change]

  multi hash: ensure modulo performed on curl_socket_t
  
  Closes #712

Steve Holme (13 Mar 2016)
- base64: Minor coding standard and style updates

- base64: Use 'CURLcode result' for curl result codes

- negotiate: Use 'CURLcode result' for curl result codes

Daniel Stenberg (13 Mar 2016)
- [Maksim Kuzevanov brought this change]

  multi_runsingle: avoid loop in CURLM_STATE_WAITPROXYCONNECT
  
  Closes #703

- TODO: Use the RFC6265 test suite

Steve Holme (13 Mar 2016)
- checksrc.bat: Added the ability to scan src and lib source independently

- digest: Use boolean based success code for Curl_sasl_digest_get_pair()
  
  Rather than use a 0 and 1 integer base result code use a TRUE / FALSE
  based success code.

- digest: Corrected some typos in comments

- krb5: Corrected some typos in function descriptions

- ntlm: Corrected some typos in function descriptions

- url: Corrected indentation when calling idna_to_ascii_lz()

- idn_win32: Use boolean based success codes
  
  Rather than use 0 and 1 integer base result codes use a FALSE / TRUE
  based success code.

Daniel Stenberg (10 Mar 2016)
- idn_win32.c: warning: Trailing whitespace

Steve Holme (10 Mar 2016)
- idn_win32.c: Fixed compilation warning from commit 9e7fcd4291
  
  warning C4267: 'function': conversion from 'size_t' to 'int',
                 possible loss of data

Daniel Stenberg (10 Mar 2016)
- THANKS-filter: unify Michael König

- RELEASE-NOTES: synced with 863c5766dd

- ftp: remove a check for NULL(!)
  
  ... as it implies we need to check for that on all the other variable
  references as well (as Coverity otherwise warns us for missing NULL
  checks), and we're alredy making sure that the pointer is never NULL.

- cookies: first n/v pair in Set-Cookie: is the cookie, then parameters
  
  RFC 6265 section 4.1.1 spells out that the first name/value pair in the
  header is the actual cookie name and content, while the following are
  the parameters.
  
  libcurl previously had a more liberal approach which causes significant
  problems when introducing new cookie parameters, like the suggested new
  cookie priority draft.
  
  The previous logic read all n/v pairs from left-to-right and the first
  name used that wassn't a known parameter name would be used as the
  cookie name, thus accepting "Set-Cookie: Max-Age=2; person=daniel" to be
  a cookie named 'person' while an RFC 6265 compliant parser should
  consider that to be a cookie named 'Max-Age' with an (unknown) parameter
  'person'.
  
  Fixes #709

- krb5: improved type handling to avoid clang compiler warnings

- url.c: fix clang warning: no newline at end of file

- curl_multi_wait: never return -1 in 'numfds'
  
  Such a return value isn't documented but could still happen, and the
  curl tool code checks for it. It would happen when the underlying
  Curl_poll() function returns an error. Starting now we mask that error
  as a user of curl_multi_wait() would have no way to handle it anyway.
  
  Reported-by: Jay Satiro
  Closes #707

- HTTP2.md: add CURL_HTTP_VERSION_2TLS and updated alt-svc link

- curl_multi_wait.3: add example

Steve Holme (8 Mar 2016)
- imap/pop3/smtp: Fixed connections upgraded with TLS are not reused
  
  Regression since commit 710f14edba.
  
  Bug: https://github.com/curl/curl/issues/422
  Reported-by: Justin Ehlert

Jay Satiro (8 Mar 2016)
- opt-docs: fix heading macros
  
  ..SH should be .SH
  
  Bug: https://github.com/curl/curl/issues/705
  Reported-by: Eric S. Raymond

Kamil Dudka (8 Mar 2016)
- [Tim Rühsen brought this change]

  cookie: do not refuse cookies for localhost
  
  Closes #658

Daniel Stenberg (8 Mar 2016)
- ftp_done: clear tunnel_state when secondary socket closes
  
  Introducing a function for closing the secondary connection to make this
  bug less likely to happen again.
  
  Reported-by: daboul
  Closes #701

- [Gisle Vanem brought this change]

  openssl: use the correct OpenSSL/BoringSSL/LibreSSL in messages

- HTTP2.md: HTTP/2 by default for curl's HTTPS connections

- [Anders Bakken brought this change]

  pipeline: Sanity check pipeline pointer before accessing it.
  
  I got a crash with this stack:
  
  curl/lib/url.c:2873 (Curl_removeHandleFromPipeline)
  curl/lib/url.c:2919 (Curl_getoff_all_pipelines)
  curl/lib/multi.c:561 (curl_multi_remove_handle)
  curl/lib/url.c:415 (Curl_close)
  curl/lib/easy.c:859 (curl_easy_cleanup)
  
  Closes #704

- HTTP2.md: mention the disable ALPN and NPN options

- TODO: 17.12 keep running, read instructions from pipe/socket
  
  And delete trailing whitespace
  And rename section 17 to "command line tool" from "client"
  
  Closes #702

- README.md: linkified
  
  It also makes it less readable as plain text, so let's keep this
  primarily for github use.
  
  Removed the top ascii art logo, as it looks weird when markdownified.

- README.md: markdown version of README
  
  Attempt to make it look more appealing on github

Jay Satiro (6 Mar 2016)
- mprintf: update trio project link

Daniel Stenberg (6 Mar 2016)
- CURLOPT_ACCEPTTIMEOUT_MS.3: added example

- CURLOPT_ACCEPT_ENCODING.3: added example

- CURLOPT_APPEND.3: added example

- CURLOPT_NOPROGRESS.3: added example, conform to stardard style

Steve Holme (6 Mar 2016)
- build-openssl/checksrc.bat: Fixed prepend vs append of Perl path
  
  Fixed inconsistency from commit 1eae114065 and 0ad6c72227 of the order
  in which Perl was added to the PATH.

Daniel Stenberg (6 Mar 2016)
- opts: added two examples

- CURLOPT_SSL_CTX_FUNCTION.3: use .NF for example

- CURLOPT_SSL_CTX_FUNCTION.3: added example
  
  and removed erroneous reference to test case lib509

- curlx.c: use more curl style code

- test46: change cookie expiry date
  
  Since two of the cookies would now otherwise expire and cause the test
  to fail after commit 20de9b4f09
  
  Discussed in #697

Jay Satiro (5 Mar 2016)
- [Viktor Szakats brought this change]

  makefile.m32: add missing libs for static -winssl-ssh2 builds
  
  Bug: https://github.com/curl/curl/pull/693

- mbedtls: fix user-specified SSL protocol version
  
  Prior to this change when a single protocol CURL_SSLVERSION_ was
  specified by the user that version was set only as the minimum version
  but not as the maximum version as well.

Steve Holme (5 Mar 2016)
- .gitignore: Added *.VC.opendb and *.vcxproj.user files for VC14

- build-openssl.bat: Fixed cannot find perl if installed but not in path

- checksrc.bat: Fixed cannot find perl if installed but not in path

Jay Satiro (5 Mar 2016)
- [Viktor Szakats brought this change]

  makefile.m32: fix to allow -ssh2-winssl combination
  
  In makefile.m32, option -ssh2 (libssh2) automatically implied -ssl
  (OpenSSL) option, with no way to override it with -winssl. Since both
  libssh2 and curl support using Windows's built-in SSL backend, modify
  the logic to allow that combination.

- cookie: Don't expire session cookies in remove_expired
  
  Prior to this change cookies with an expiry date that failed parsing
  and were converted to session cookies could be purged in remove_expired.
  
  Bug: https://github.com/curl/curl/issues/697
  Reported-by: Seth Mos

Daniel Stenberg (3 Mar 2016)
- cookie: remove redundant check
  
  ... as it was already checked previously within the function.
  
  Reported-by: Dmitry-Me
  Closes #695

Jay Satiro (1 Mar 2016)
- [Anders Bakken brought this change]

  url: if Curl_done is premature then pipeline not in use
  
  Prevent a crash if 2 (or more) requests are made to the same host and
  pipelining is enabled and the connection does not complete.
  
  Bug: https://github.com/curl/curl/pull/690

- [Viktor Szakats brought this change]

  makefile.m32: allow to pass .dll/.exe-specific LDFLAGS
  
  using envvars `CURL_LDFLAG_EXTRAS_DLL` and
  `CURL_LDFLAG_EXTRAS_EXE` respectively. This
  is useful f.e. to pass ASLR-related extra
  options, that are required to make this
  feature work when using the mingw toolchain.
  
  Ref: https://github.com/curl/curl/pull/670#issuecomment-190863985
  
  Closes https://github.com/curl/curl/pull/689

Daniel Stenberg (29 Feb 2016)
- formpost: fix memory leaks in AddFormData error branches
  
  Reported-by: Dmitry-Me
  Fixes #688

Jay Satiro (28 Feb 2016)
- getinfo: Fix syntax error when mbedTLS
  
  The assignment of the mbedTLS TLS session info in the parent commit was
  incorrect. Change the assignment to a pointer to the session structure.

- getinfo: Add support for mbedTLS TLS session info
  
  .. and preprocessor check TLS session info is defined for all backends.

Daniel Stenberg (26 Feb 2016)
- ROADMAP: clarify on the TLS proxy, mention HTTP cookies to work on

- file: try reading from files with no size
  
  Some systems have special files that report as 0 bytes big, but still
  contain data that can be read (for example /proc/cpuinfo on
  Linux). Starting now, a zero byte size is considered "unknown" size and
  will be read as far as possible anyway.
  
  Reported-by: Jesse Tan
  
  Closes #681

Jay Satiro (25 Feb 2016)
- configure: warn on invalid ca bundle or path
  
  - Warn if --with-ca-bundle file does not exist.
  
  - Warn if --with-ca-path directory does not contain certificates.
  
  - Improve help messages for both.
  
  Example configure output:
  
    ca cert bundle:   /some/file   (warning: certs not found)
    ca cert path:     /some/dir   (warning: certs not found)
  
  Bug: https://github.com/curl/curl/issues/404
  Reported-by: Jeffrey Walton

Daniel Stenberg (24 Feb 2016)
- Curl_read: check for activated HTTP/1 pipelining, not only requested
  
  ... as when pipelining is used, we read things into a unified buffer and
  we don't do that with HTTP/2. This could then easily make programs that
  set CURLMOPT_PIPELINING = CURLPIPE_HTTP1|CURLPIPE_MULTIPLEX to get data
  intermixed or plain broken between HTTP/2 streams.
  
  Reported-by: Anders Bakken

Patrick Monnerat (24 Feb 2016)
- os400: Fix ILE/RPG definition of CURLOPT_TFTP_NO_OPTIONS

Jay Satiro (23 Feb 2016)
- getinfo: CURLINFO_TLS_SSL_PTR supersedes CURLINFO_TLS_SESSION
  
  The two options are almost the same, except in the case of OpenSSL:
  
  CURLINFO_TLS_SESSION OpenSSL session internals is SSL_CTX *.
  
  CURLINFO_TLS_SSL_PTR OpenSSL session internals is SSL *.
  
  For backwards compatibility we couldn't modify CURLINFO_TLS_SESSION to
  return an SSL pointer for OpenSSL.
  
  Also, add support for the 'internals' member to point to SSL object for
  the other backends axTLS, PolarSSL, Secure Channel, Secure Transport and
  wolfSSL.
  
  Bug: https://github.com/curl/curl/issues/234
  Reported-by: dkjjr89@users.noreply.github.com
  
  Bug: https://curl.haxx.se/mail/lib-2015-09/0127.html
  Reported-by: Michael König

Daniel Stenberg (23 Feb 2016)
- multi_remove_handle: keep the timeout list until after disconnect
  
  The internal Curl_done() function uses Curl_expire() at times and that
  uses the timeout list. Better clean up the list once we're done using
  it. This caused a segfault.
  
  Reported-by: 蔡文凱
  Bug: https://curl.haxx.se/mail/lib-2016-02/0097.html

Kamil Dudka (23 Feb 2016)
- tests/sshserver.pl: use RSA instead of DSA for host auth
  
  DSA is no longer supported by OpenSSH 7.0, which causes all SCP/SFTP
  test cases to be skipped.  Using RSA for host authentication works with
  both old and new versions of OpenSSH.
  
  Reported-by: Karlson2k
  
  Closes #676

Jay Satiro (23 Feb 2016)
- TFTP: add option to suppress TFTP option requests (Part 2)
  
  - Add tests.
  
  - Add an example to CURLOPT_TFTP_NO_OPTIONS.3.
  
  - Add --tftp-no-options to expose CURLOPT_TFTP_NO_OPTIONS.
  
  Bug: https://github.com/curl/curl/issues/481

- [Michael Koenig brought this change]

  TFTP: add option to suppress TFTP option requests (Part 1)
  
  Some TFTP server implementations ignore the "TFTP Option extension"
  (RFC 1782-1784, 2347-2349), or implement it in a flawed way, causing
  problems with libcurl. Another switch for curl_easy_setopt
  "CURLOPT_TFTP_NO_OPTIONS" is introduced which prevents libcurl from
  sending TFTP option requests to a server, avoiding many problems caused
  by faulty implementations.
  
  Bug: https://github.com/curl/curl/issues/481

Daniel Stenberg (22 Feb 2016)
- [Karlson2k brought this change]

  runtests: Fixed usage of %PWD on MinGW64
  
  Closes #672

Jay Satiro (20 Feb 2016)
- CURLOPT_DEBUGFUNCTION.3: Fix example

- [Viktor Szakats brought this change]

  src/Makefile.m32: add CURL_{LD,C}FLAGS_EXTRAS support
  
  Sync with lib/Makefile.m32 which already uses those variables.
  
  Bug: https://github.com/curl/curl/pull/670

Dan Fandrich (20 Feb 2016)
- Enabled test 1437 after the bug fix in commit 3fa220a6

Jay Satiro (19 Feb 2016)
- [Emil Lerner brought this change]

  curl_sasl: Fix memory leak in digest parser
  
  If any parameter in a HTTP DIGEST challenge message is present multiple
  times, memory allocated for all but the last entry should be freed.
  
  Bug: https://github.com/curl/curl/pull/667

Dan Fandrich (19 Feb 2016)
- Added test 1437 to verify a memory leak
  
  Reported-by: neex@users.noreply.github.com

Jay Satiro (18 Feb 2016)
- CURLOPT_COOKIEFILE.3: HTTP headers must be Set-Cookie style
  
  Bug: https://github.com/curl/curl/issues/666
  Reported-by: baumanj@users.noreply.github.com

- curl.1: HTTP headers for --cookie must be Set-Cookie style
  
  Bug: https://github.com/curl/curl/issues/666
  Reported-by: baumanj@users.noreply.github.com

Daniel Stenberg (18 Feb 2016)
- curl.1: add a missing dash

- CONTRIBUTING.md: fix links

- ISSUE_TEMPLATE: github issue template
  
  First version, try this out!

- CONTRIBUTING.md: move into .github
  
  To hide github specific files somewhat from the rest.

- opts: add references

- examples/make: add 'checksrc' target

- 10-at-a-time: typecast the argument passed to sleep()

- externalsocket.c: fix compiler warning for fwrite return type

- anyauthput.c: fix compiler warnings

- simplessl.c: warning: while with space

- curlx.c: i2s_ASN1_IA5STRING() clashes with an openssl function
  
  Reported-By: Gisle Vanem

- http2: don't decompress gzip decoding automatically
  
  At one point during the development of HTTP/2, the commit 133cdd29ea0
  introduced automatic decompression of Content-Encoding as that was what
  the spec said then. Now however, HTTP/2 should work the same way as
  HTTP/1 in this regard.
  
  Reported-by: Kazuho Oku
  
  Closes #661

Jay Satiro (16 Feb 2016)
- [Tatsuhiro Tsujikawa brought this change]

  http: Don't break the header into chunks if HTTP/2
  
  nghttp2 callback deals with TLS layer and therefore the header does not
  need to be broken into chunks.
  
  Bug: https://github.com/curl/curl/issues/659
  Reported-by: Kazuho Oku

Daniel Stenberg (16 Feb 2016)
- [Viktor Szakats brought this change]

  openssl: use macro to guard the opaque EVP_PKEY branch

- [Viktor Szakats brought this change]

  openssl: avoid direct PKEY access with OpenSSL 1.1.0
  
  by using API instead of accessing an internal structure.
  This is required starting OpenSSL 1.1.0-pre3.
  
  Closes #650

- RELEASE-NOTES: synced with ede0bfc079da

- [Clint Clayton brought this change]

  CURLOPT_CONNECTTIMEOUT_MS.3: Fix example to use milliseconds option
  
  Change the example in the docs for CURLOPT_CONNECTTIMEOUT_MS to use
  CURLOPT_CONNECTTIMEOUT_MS instead of CURLOPT_CONNECTTIMEOUT.
  
  Closes #653

- opt-docs: add more references

- [David Byron brought this change]

  SCP: use libssh2_scp_recv2 to support > 2GB files on windows
  
  libssh2_scp_recv2 is introduced in libssh2 1.7.0 - to be released "any
  day now.
  
  Closes #451

Jay Satiro (13 Feb 2016)
- [Shine Fan brought this change]

  gtls: fix for builds lacking encrypted key file support
  
  Bug: https://github.com/curl/curl/pull/651

Dan Fandrich (13 Feb 2016)
- test1604: Add to Makefile.inc so it gets run

Jay Satiro (12 Feb 2016)
- generate.bat: Fix comment bug by removing old comments
  
  Remove NOTES section, it's no longer needed since we aren't setting the
  errorlevel and more importantly the recently updated URL in the comments
  is causing some unusual behavior that breaks the script.
  
  Closes https://github.com/curl/curl/issues/649

Kamil Dudka (12 Feb 2016)
- curl.1: --disable-{eprt,epsv} are ignored for IPv6 hosts
  
  The behavior has been clarified in CURLOPT_FTP_USE_{EPRT,EPSV}.3 man
  pages since curl-7_12_3~131.  This patch makes it clear in the curl.1
  man page, too.
  
  Bug: https://bugzilla.redhat.com/1305970

Daniel Stenberg (12 Feb 2016)
- dist: ship buildconf.bat too
  
  As the winbuild/* stuff uses it!

- curlx_tvdiff: handle 32bit time_t overflows
  
  On 32bit systems, make sure we don't overflow and return funky values
  for very large time differences.
  
  Reported-by: Anders Bakken
  
  Closes #646

- examples: fix some compiler warnings

- simplessl.c: fix my breakage

- examples: adhere to curl code style
  
  All plain C examples now (mostly) adhere to the curl code style. While
  they are only examples, they had diverted so much and contained all
  sorts of different mixed code styles by now. Having them use a unified
  style helps users and readability. Also, as they get copy-and-pasted
  widely by users, making sure they're clean and nice is a good idea.
  
  573 checksrc warnings were addressed.

- examples/cookie_interface.c: add cleanup call
  
  cleaning up handles is a good idea as we leak memory otherwise
  
  Also, line wrapped before 80 columns.

Kamil Dudka (10 Feb 2016)
- nss: search slash in forward direction in dup_nickname()
  
  It is wasteful to search it backwards if we look for _any_ slash.

- nss: do not count enabled cipher-suites
  
  We only care if at least one cipher-suite is enabled, so it does
  not make any sense to iterate till the end and count all enabled
  cipher-suites.

Daniel Stenberg (10 Feb 2016)
- contributors.sh: make 79 the max column width (from 80)

- RELEASE-NOTES: synced with c276aefee3995

- mbedtls.c: re-indent to better match curl standards

- [Rafael Antonio brought this change]

  mbedtls: fix memory leak when destroying SSL connection data
  
  Closes #626

- mbedtls: fix ALPN usage segfault
  
  Since we didn't keep the input argument around after having called
  mbedtls, it could end up accessing the wrong memory when figuring out
  the ALPN protocols.
  
  Closes #642

Jay Satiro (9 Feb 2016)
- [Timotej Lazar brought this change]

  opts: update references to renamed options

- KNOWN_BUGS: Update #92 - Windows device prefix

- tool_doswin: Support for literal path prefix \\?\
  
  For example something like --output \\?\C:\foo

Daniel Stenberg (9 Feb 2016)
- configure: state "BoringSSL" in summary when that was detected

- [David Benjamin brought this change]

  openssl: remove most BoringSSL #ifdefs.
  
  As of https://boringssl-review.googlesource.com/#/c/6980/, almost all of
  BoringSSL #ifdefs in cURL should be unnecessary:
  
  - BoringSSL provides no-op stubs for compatibility which replaces most
    #ifdefs.
  
  - DES_set_odd_parity has been in BoringSSL for nearly a year now. Remove
    the compatibility codepath.
  
  - With a small tweak to an extend_key_56_to_64 call, the NTLM code
    builds fine.
  
  - Switch OCSP-related #ifdefs to the more generally useful
    OPENSSL_NO_OCSP.
  
  The only #ifdefs which remain are Curl_ossl_version and the #undefs to
  work around OpenSSL and wincrypt.h name conflicts. (BoringSSL leaves
  that to the consumer. The in-header workaround makes things sensitive to
  include order.)
  
  This change errs on the side of removing conditionals despite many of
  the restored codepaths being no-ops. (BoringSSL generally adds no-op
  compatibility stubs when possible. OPENSSL_VERSION_NUMBER #ifdefs are
  bad enough!)
  
  Closes #640

Jay Satiro (8 Feb 2016)
- KNOWN_BUGS: Windows device prefix is required for devices

- tool_urlglob: Allow reserved dos device names (Windows)
  
  Allow --output to reserved dos device names without the device prefix
  for backwards compatibility.
  
  Example: --output NUL can be used instead of --output \\.\NUL
  
  Bug: https://github.com/curl/curl/commit/4520534#commitcomment-15954863
  Reported-by: Gisle Vanem

Daniel Stenberg (8 Feb 2016)
- cookies: allow spaces in cookie names, cut of trailing spaces
  
  It turns out Firefox and Chrome both allow spaces in cookie names and
  there are sites out there using that.
  
  Turned out the code meant to strip off trailing space from cookie names
  didn't work. Fixed now.
  
  Test case 8 modified to verify both these changes.
  
  Closes #639

Patrick Monnerat (8 Feb 2016)
- Merge branch 'master' of github.com:curl/curl

- os400: sync ILE/RPG definitions with latest public header files.

Daniel Stenberg (8 Feb 2016)
- [Ludwig Nussel brought this change]

  SSLCERTS: update wrt SSL CA certificate store

- [Ludwig Nussel brought this change]

  configure: --with-ca-fallback: use built-in TLS CA fallback
  
  When trying to verify a peer without having any root CA certificates
  set, this makes libcurl use the TLS library's built in default as
  fallback.
  
  Closes #569

- Proxy-Connection: stop sending this header by default
  
  RFC 7230 says we should stop. Firefox already stopped.
  
  Bug: https://github.com/curl/curl/issues/633
  Reported-By: Brad Fitzpatrick
  
  Closes #633

- bump: work toward the next release

- THANKS: 2 contributors from the 7.47.1 release

- RELEASE-PROCEDURE: remove the github upload part
  
  ... as we're HTTPS on the main site now, there's no point in that
  extra step

Version 7.47.1 (8 Feb 2016)

Daniel Stenberg (8 Feb 2016)
- RELEASE-NOTES: curl 7.47.1 time!

Jay Satiro (8 Feb 2016)
- tool_operhlp: Check for backslashes in get_url_file_name
  
  Extract the filename from the last slash or backslash. Prior to this
  change backslashes could be part of the filename.
  
  This change needed for the curl tool built for Cygwin. Refer to the
  CYGWIN addendum in advisory 20160127B.
  
  Bug: https://curl.haxx.se/docs/adv_20160127B.html

Daniel Stenberg (7 Feb 2016)
- RELEASE-NOTES: synced with d6a8869ea34

Jay Satiro (6 Feb 2016)
- openssl: Fix signed/unsigned mismatch warning in X509V3_ext
  
  sk_X509_EXTENSION_num may return an unsigned integer, however the value
  will fit in an int.
  
  Bug: https://github.com/curl/curl/commit/dd1b44c#commitcomment-15913896
  Reported-by: Gisle Vanem

Daniel Stenberg (7 Feb 2016)
- TODO: 17.11 -w output to stderr

Jay Satiro (6 Feb 2016)
- [Michael Kaufmann brought this change]

  idn_win32: Better error checking
  
  .. also fix a conversion bug in the unused function
  curl_win32_ascii_to_idn().
  
  And remove wprintfs on error (Jay).
  
  Bug: https://github.com/curl/curl/pull/637

- [Gisle Vanem brought this change]

  examples/asiohiper: Avoid function name collision on Windows
  
  closesocket => close_socket
  Winsock already has the former.
  
  Bug: https://curl.haxx.se/mail/lib-2016-02/0016.html

- [Gisle Vanem brought this change]

  examples/htmltitle: Use _stricmp on Windows
  
  Bug: https://curl.haxx.se/mail/lib-2016-02/0017.html

Daniel Stenberg (6 Feb 2016)
- COPYING: clarify that Daniel is not the sole author
  
  ... done on request and as it is a fair point.

Jay Satiro (5 Feb 2016)
- unit1604: Fix unit setup return code

- tool_doswin: Use type SANITIZEcode in sanitize_file_name

- tool_doswin: Improve sanitization processing
  
  - Add unit test 1604 to test the sanitize_file_name function.
  
  - Use -DCURL_STATICLIB when building libcurltool for unit testing.
  
  - Better detection of reserved DOS device names.
  
  - New flags to modify sanitize behavior:
  
  SANITIZE_ALLOW_COLONS: Allow colons
  SANITIZE_ALLOW_PATH: Allow path separators and colons
  SANITIZE_ALLOW_RESERVED: Allow reserved device names
  SANITIZE_ALLOW_TRUNCATE: Allow truncating a long filename
  
  - Restore sanitization of banned characters from user-specified outfile.
  
  Prior to this commit sanitization of a user-specified outfile was
  temporarily disabled in 2b6dadc because there was no way to allow path
  separators and colons through while replacing other banned characters.
  Now in such a case we call the sanitize function with
  SANITIZE_ALLOW_PATH which allows path separators and colons to pass
  through.
  
  
  Closes https://github.com/curl/curl/issues/624
  Reported-by: Octavio Schroeder

- [Viktor Szakats brought this change]

  URLs: change more http to https

- sasl_sspi: Fix memory leak in domain populate
  
  Free an existing domain before replacing it.
  
  Bug: https://github.com/curl/curl/issues/635
  Reported-by: silveja1@users.noreply.github.com

Daniel Stenberg (4 Feb 2016)
- [Viktor Szakats brought this change]

  URLs: follow GitHub project rename (also Travis CI)
  
  Closes #632

- CHANGES.o: fix references to curl.haxx.nu
  
  I removed the scheme prefix from the URLs references this host name, as
  we don't own/run that anymore but the name is kept for historic reasons.

- HISTORY: add some info about when we used which host names

Jay Satiro (2 Feb 2016)
- [Viktor Szakats brought this change]

  URLs: change more http to https

Dan Fandrich (3 Feb 2016)
- URLs: Change more haxx.se URLs from http: to https:

Daniel Stenberg (3 Feb 2016)
- RELEASE-NOTES: synced with 4af40b364

- URLs: change all http:// URLs to https://

- configure: update the copyright year range in output

- dotdot: allow an empty input string too
  
  It isn't used by the code in current conditions but for safety it seems
  sensible to at least not crash on such input.
  
  Extended unit test 1395 to verify this too as well as a plain "/" input.

- HTTPS: update a bunch of URLs from HTTP to HTTPS

- [Sergei Nikulov brought this change]

  AppVeyor: updated to handle OpenSSL/WinSSL builds
  
  Closes #621

Jay Satiro (1 Feb 2016)
- tool_operate: Don't sanitize --output path (Windows)
  
  Due to path separators being incorrectly sanitized in --output
  pathnames, eg -o c:\foo => c__foo
  
  This is a partial revert of 3017d8a until I write a proper fix. The
  remote-name will continue to be sanitized, but if the user specified an
  --output with string replacement (#1, #2, etc) that data is unsanitized
  until I finish a fix.
  
  Bug: https://github.com/bagder/curl/issues/624
  Reported-by: Octavio Schroeder

- curl.1: Explain remote-name behavior if file already exists
  
  .. also warn about letting the server pick the filename.

- [Gisle Vanem brought this change]

  urldata: Error on missing SSL backend-specific connect info

Daniel Stenberg (28 Jan 2016)
- bump: towards the next (7.47.1 ?)

- [Sergei Nikulov brought this change]

  cmake: fixed when OpenSSL enabled on Windows and schannel detected
  
  Closes #617

Jay Satiro (28 Jan 2016)
- [Sergei Nikulov brought this change]

  urldata: moved common variable out of ifdef
  
  Closes https://github.com/bagder/curl/pull/618

- [Viktor Szakats brought this change]

  tool_doswin: silence unused function warning
  
  tool_doswin.c:185:14: warning: 'msdosify' defined but not used
  [-Wunused-function]
  
  Closes https://github.com/bagder/curl/pull/616

Daniel Stenberg (27 Jan 2016)
- getredirect.c: fix variable name
  
  Reported-by: Bernard Spil

Version 7.47.0 (27 Jan 2016)

Daniel Stenberg (27 Jan 2016)
- examples/Makefile.inc: specify programs without .c!

- THANKS: 6 new contributors from 7.47.0 release notes

- [Isaac Boukris brought this change]

  NTLM: Fix ConnectionExists to compare Proxy credentials
  
  Proxy NTLM authentication should compare credentials when
  re-using a connection similar to host authentication, as it
  authenticate the connection.
  
  Example:
  curl -v -x http://proxy:port http://host/ -U good_user:good_pwd
    --proxy-ntlm --next -x http://proxy:port http://host/
      [-U fake_user:fake_pwd --proxy-ntlm]
  
  CVE-2016-0755
  
  Bug: http://curl.haxx.se/docs/adv_20160127A.html

- [Ray Satiro brought this change]

  curl: avoid local drive traversal when saving file (Windows)
  
  curl does not sanitize colons in a remote file name that is used as the
  local file name. This may lead to a vulnerability on systems where the
  colon is a special path character. Currently Windows/DOS is the only OS
  where this vulnerability applies.
  
  CVE-2016-0754
  
  Bug: http://curl.haxx.se/docs/adv_20160127B.html

- RELEASE-NOTES: 7.47.0

- FAQ: language fix in 4.19

- [paulehoffman brought this change]

  FAQ: Update to point to GitHub
  
  Current FAQ didn't make it clear where the main repo is.
  
  Closes #612

- maketgz: generate date stamp with LC_TIME=C
  
  bug: http://curl.haxx.se/mail/lib-2016-01/0123.html

- curl_multi_socket_action.3: line wrap

- RELEASE-NOTES: synced with d58ba66eeceb

Steve Holme (21 Jan 2016)
- TODO: "Create remote directories" for SMB

Jay Satiro (18 Jan 2016)
- mbedtls: Fix pinned key return value on fail
  
  - Switch from verifying a pinned public key in a callback during the
  certificate verification to inline after the certificate verification.
  
  The callback method had three problems:
  
  1. If a pinned public key didn't match, CURLE_SSL_PINNEDPUBKEYNOTMATCH
  was not returned.
  
  2. If peer certificate verification was disabled the pinned key
  verification did not take place as it should.
  
  3. (related to #2) If there was no certificate of depth 0 the callback
  would not have checked the pinned public key.
  
  Though all those problems could have been fixed it would have made the
  code more complex. Instead we now verify inline after the certificate
  verification in mbedtls_connect_step2.
  
  Ref: http://curl.haxx.se/mail/lib-2016-01/0047.html
  Ref: https://github.com/bagder/curl/pull/601

- tests: Add a test for pinnedpubkey fail even when insecure
  
  Because disabling the peer verification (--insecure) must not disable
  the public key pinning check (--pinnedpubkey).

- [Daniel Schauenberg brought this change]

  CURLINFO_RESPONSE_CODE.3: add example

Kamil Dudka (15 Jan 2016)
- ssh: make CURLOPT_SSH_PUBLIC_KEYFILE treat "" as NULL
  
  The CURLOPT_SSH_PUBLIC_KEYFILE option has been documented to handle
  empty strings specially since curl-7_25_0-31-g05a443a but the behavior
  was unintentionally removed in curl-7_38_0-47-gfa7d04f.
  
  This commit restores the original behavior and clarifies it in the
  documentation that NULL and "" have both the same meaning when passed
  to CURLOPT_SSH_PUBLIC_KEYFILE.
  
  Bug: http://curl.haxx.se/mail/lib-2016-01/0072.html

Daniel Stenberg (14 Jan 2016)
- RELEASE-NOTES: synced with 35083ca60ed035a

- openssl: improved error detection/reporting
  
  ... by extracting the LIB + REASON from the OpenSSL error code. OpenSSL
  1.1.0+ returned a new func number of another cerfificate fail so this
  required a fix and this is the better way to catch this error anyway.

- openssl: for 1.1.0+ they now provide a SSLeay() macro of their own

- CURLOPT_RESOLVE.3: minor language polish

- configure: assume IPv6 works when cross-compiled
  
  The configure test uses AC_TRY_RUN to figure out if an ipv6 socket
  works, and testing like that doesn't work for cross-compiles. These days
  IPv6 support is widespread so a blind guess is probably more likely to
  be 'yes' than 'no' now.
  
  Further: anyone who cross-compiles can use configure's --disable-ipv6 to
  explicitly disable IPv6 and that also works for cross-compiles.
  
  Made happen after discussions in issue #594

- TODO: "Try to URL encode given URL"
  
  Closes #514

- ConnectionExists: only do pipelining/multiplexing when asked
  
  When an HTTP/2 upgrade request fails (no protocol switch), it would
  previously detect that as still possible to pipeline on (which is
  acorrect) and do that when PIPEWAIT was enabled even if pipelining was
  not explictily enabled.
  
  It should only pipelined if explicitly asked to.
  
  Closes #584

- [Mohammad AlSaleh brought this change]

  lib: Prefix URLs with lower-case protocol names/schemes
  
  Before this patch, if a URL does not start with the protocol
  name/scheme, effective URLs would be prefixed with upper-case protocol
  names/schemes. This behavior might not be expected by library users or
  end users.
  
  For example, if `CURLOPT_DEFAULT_PROTOCOL` is set to "https". And the
  URL is "hostname/path". The effective URL would be
  "HTTPS://hostname/path" instead of "https://hostname/path".
  
  After this patch, effective URLs would be prefixed with a lower-case
  protocol name/scheme.
  
  Closes #597
  
  Signed-off-by: Mohammad AlSaleh <CE.Mohammad.AlSaleh@gmail.com>

- [Alessandro Ghedini brought this change]

  scripts: don't generate and install zsh completion when cross-compiling

- [Alessandro Ghedini brought this change]

  scripts: fix zsh completion generation
  
  The script should use the just-built curl, not the system one. This fixes
  zsh completion generation when no system curl is installed.

- [Alessandro Ghedini brought this change]

  zsh.pl: fail if no curl is found
  
  Instead of generation a broken completion file.

- [Michael Kaufmann brought this change]

  IDN host names: Remove the port number before converting to ACE
  
  Closes #596

Jay Satiro (10 Jan 2016)
- runtests: Add mbedTLS to the SSL backends
  
  .. and enable SSLpinning tests for mbedTLS, BoringSSL and LibreSSL.

Daniel Stenberg (10 Jan 2016)
- [Thomas Glanzmann brought this change]

  mbedtls: implement CURLOPT_PINNEDPUBLICKEY

Jay Satiro (9 Jan 2016)
- [Tatsuhiro Tsujikawa brought this change]

  url: Fix compile error with --enable-werror

- [Tatsuhiro Tsujikawa brought this change]

  http2: Ensure that http2_handle_stream_close is called
  
  Previously, when HTTP/2 is enabled and used, and stream has content
  length known, Curl_read was not called when there was no bytes left to
  read. Because of this, we could not make sure that
  http2_handle_stream_close was called for every stream. Since we use
  http2_handle_stream_close to emit trailer fields, they were
  effectively ignored. This commit changes the code so that Curl_read is
  called even if no bytes left to read, to ensure that
  http2_handle_stream_close is called for every stream.
  
  Discussed in https://github.com/bagder/curl/pull/564

Daniel Stenberg (8 Jan 2016)
- http2: handle the received SETTINGS frame
  
  This regression landed in 5778e6f5 and made libcurl not act on received
  settings and instead stayed with its internal defaults.
  
  Bug: http://curl.haxx.se/mail/lib-2016-01/0031.html
  Reported-by: Bankde

- Revert "multiplex: allow only once HTTP/2 is actually used"
  
  This reverts commit 46cb70e9fa81c9a56de484cdd7c5d9d0d9fbec36.
  
  Bug: http://curl.haxx.se/mail/lib-2016-01/0031.html

Jay Satiro (8 Jan 2016)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix PUSH_PROMISE headers being treated as trailers
  
  Discussed in https://github.com/bagder/curl/pull/564

Daniel Stenberg (8 Jan 2016)
- [Michael Kaufmann brought this change]

  connection reuse: IDN host names fixed
  
  Use the ACE form of IDN hostnames as key in the connection cache.  Add
  new tests.
  
  Closes #592

- tests: mark IPv6 FTP and FTPS tests with the FTP keyword

Jay Satiro (7 Jan 2016)
- mbedtls: Fix ALPN support
  
  - Fix ALPN reply detection.
  
  - Wrap nghttp2 code in ifdef USE_NGHTTP2.
  
  
  Prior to this change ALPN and HTTP/2 did not work properly in mbedTLS.

- http2: Fix client write for trailers on stream close
  
  Check that the trailer buffer exists before attempting a client write
  for trailers on stream close.
  
  Refer to comments in https://github.com/bagder/curl/pull/564

Daniel Stenberg (7 Jan 2016)
- COPYING: update general copyright year range

- ConnectionExists: add missing newline in infof() call
  
  Mistake from commit a464f33843ee1

- multiplex: allow only once HTTP/2 is actually used
  
  To make sure curl doesn't allow multiplexing before a connection is
  upgraded to HTTP/2 (like when Upgrade: h2c fails), we must make sure the
  connection uses HTTP/2 as well and not only check what's wanted.
  
  Closes #584
  
  Patch-by: c0ff

Jay Satiro (4 Jan 2016)
- curl_global_init.3: Add Windows-specific info for init via DLL
  
  - Add to both curl_global_init.3 and libcurl.3 the caveat for Windows
  that initializing libcurl via a DLL's DllMain or static initializer
  could cause a deadlock.
  
  Bug: https://github.com/bagder/curl/issues/586
  Reported-by: marc-groundctl@users.noreply.github.com

Daniel Stenberg (4 Jan 2016)
- FAQ: clarify who to mail about ECCN clarifications

- progressfunc.c: spellfix description

- docs/examples/multi-app.c: fix bad desc formatting

- examples: added descriptions

- example/simple.c: add description

- getredirect.c: a new example

Marc Hoersken (27 Dec 2015)
- RELEASE-NOTES: add 5e0e81a9c4e35f04ca

Daniel Stenberg (26 Dec 2015)
- RELEASE-NOTES: synced with 2aec4359db1088b10d

Marc Hoersken (26 Dec 2015)
- test 1515: add data check

- test 1515: add MSYS support by passing a relative path
  
  MSYS would otherwise turn a /-style path into a C:\-style path.

- test 539: use datacheck mode text for ASCII-mode LISTings
  
  While still using datacheck mode binary for the inline reply data.

- runtests.pl: check up to 5 data parts with different text modes
  
  Move the text-mode conversion for reply/replycheck from the verify
  section into the load section and add support for 4 more check parts.

Daniel Stenberg (24 Dec 2015)
- CURLOPT_RANGE: for HTTP servers, range support is optional

Marc Hoersken (24 Dec 2015)
- tests 1048 and 1050: use datacheck mode text for ASCII-mode LISTings

- tests 706 and 707: use datacheck mode text for ASCII-mode LISTings

- tests 400,403,406: use datacheck mode text for ASCII-mode LISTings

- sockfilt.c: fix calculation of sleep timeout on Windows
  
  Not converting to double caused small timeouts to be skipped.

- tests first.c: fix calculation of sleep timeout on Windows
  
  Not converting to double caused small timeouts to be skipped.

- test 573: add more debug output

- ftplistparser.c: fix handling of file LISTings using Windows EOL
  
  Previously file.txt[CR][LF] would have been returned as file.tx
  (without the last t) if filetype is symlink. Now the t is
  included and the internal item_length includes the zero byte.
  
  Spotted using test 576 on Windows.

- test 16: fix on Linux (and Windows) by using plain ASCII characters
  
  Follow up on b064ff0c351bb287557228575ef4c1d079b866fb, thanks Daniel.

- tftpd server: add Windows support by writing files in binary mode

- tests 252-255: use datacheck mode text for ASCII-mode LISTings

- test 16: fix on Windows by converting data file from ANSI to UTF-8

Daniel Stenberg (23 Dec 2015)
- Makefile.inc: s/curl_SOURCES/CURL_FILES
  
  This allows the root Makefile.am to include the Makefile.inc without
  causing automake to warn on it (variables named *_SOURCES are
  magic). curl_SOURCES is then instead assigned properly in
  src/Makefile.am only.
  
  Closes #577

- [Anders Bakken brought this change]

  ConnectionExists: with *PIPEWAIT, wait for connections
  
  Try harder to prevent libcurl from opening up an additional socket when
  CURLOPT_PIPEWAIT is set. Accomplished by letting ongoing TCP and TLS
  handshakes complete first before the decision is made.
  
  Closes #575

- [Anders Bakken brought this change]

  Add .dir-locals and set c-basic-offset to 2.
  
  This makes it easier for emacs users to automatically get the right
  2-space indentation when they edit curl source files.
  
  c++-mode is in there as well because Emacs can't easily know if
  something is a C or C++ header.
  
  Closes #574

- [Johannes Schindelin brought this change]

  configure: detect IPv6 support on Windows
  
  This patch was "nicked" from the MINGW-packages project by Daniel.
  
  https://github.com/Alexpux/MINGW-packages/commit/9253d0bf58a1486e91f7efb5316e7fdb48fa4007
  Signed-off-by: Johannes Schindelin <johannes.schindelin@gmx.de>

- configure: allow static builds on mingw
  
  This patch is adopted from the MINGW-packages project. It makes it
  possible to build curl both shared and static again.
  
  URL: https://github.com/Alexpux/MINGW-packages/tree/master/mingw-w64-curl

Marc Hoersken (17 Dec 2015)
- test 1326: fix file check since curl is outputting binary data

- test 1326: fix getting stuck on Windows due to incomplete request
  
  The request needs to be read and send in binary mode in order to use
  CRLF instead of LF. Adding --upload-file - causes curl to read stdin
  in binary mode.

Daniel Stenberg (17 Dec 2015)
- RELEASE-NOTES: command line option recount

Dan Fandrich (16 Dec 2015)
- scripts/Makefile: build zsh script even in an out-of-tree build

Marc Hoersken (16 Dec 2015)
- sockfilt.c: added some debug output to select_ws

- sockfilt.c: keep lines shorter than 80 chars

- sockfilt.c: do not wait on unreliable file or pipe handle
  
  The previous implementation caused issues on modern MSYS2 runtimes.

Daniel Stenberg (16 Dec 2015)
- cyassl: deal with lack of *get_peer_certificate
  
  The function is only present in wolfssl/cyassl if it was built with
  --enable-opensslextra. With these checks added, pinning support is disabled
  unless the TLS lib has that function available.
  
  Also fix the mistake in configure that checks for the wrong lib name.
  
  Closes #566

- wolfssl: handle builds without SSLv3 support

- [Tatsuhiro Tsujikawa brought this change]

  http2: Support trailer fields
  
  This commit adds trailer support in HTTP/2.  In HTTP/1.1, chunked
  encoding must be used to send trialer fields.  HTTP/2 deprecated any
  trandfer-encoding, including chunked.  But trailer fields are now
  always available.
  
  Since trailer fields are relatively rare these days (gRPC uses them
  extensively though), allocating buffer for trailer fields is done when
  we detect that HEADERS frame containing trailer fields is started.  We
  use Curl_add_buffer_* functions to buffer all trailers, just like we
  do for regular header fields.  And then deliver them when stream is
  closed.  We have to be careful here so that all data are delivered to
  upper layer before sending trailers to the application.
  
  We can deliver trailer field one by one using NGHTTP2_ERR_PAUSE
  mechanism, but current method is far more simple.
  
  Another possibility is use chunked encoding internally for HTTP/2
  traffic.  I have not tested it, but it could add another overhead.
  
  Closes #564

- RELEASE-NOTES: synced with 6c2c019654e658a

Jay Satiro (15 Dec 2015)
- x509asn1: Fix host altname verification
  
  - In Curl_verifyhost check all altnames in the certificate.
  
  Prior to this change only the first altname was checked. Only the GSKit
  SSL backend was affected by this bug.
  
  Bug: http://curl.haxx.se/mail/lib-2015-12/0062.html
  Reported-by: John Kohl

Daniel Stenberg (15 Dec 2015)
- curl --expect100-timeout: added
  
  This is the new command line option to set the value for the existing
  libcurl option CURLOPT_EXPECT_100_TIMEOUT_MS

- cyassl: fix compiler warning on type conversion

- curlver: the pending release will become 7.47.0

- [Anders Bakken brought this change]

  setstropt: const-correctness
  
  Closes #565

- ROADMAP: implemented HTTP2 for HTTPS-only

- HTTP2.md: spell fix and remove TODO now implemented

- libressl: the latest openssl x509 funcs are not in libressl

- curl: use 2TLS by default
  
  Make this the default for the curl tool (if built with HTTP/2 powers
  enabled) unless a specific HTTP version is requested on the command
  line.
  
  This should allow more users to get HTTP/2 powers without having to
  change anything.

- http: add libcurl option to allow HTTP/2 for HTTPS only
  
  ... and stick to 1.1 for HTTP. This is in line with what browsers do and
  should have very little risk.

- openssl: adapt to openssl >= 1.1.0 X509 opaque structs
  
  Closes #491

- openssl: avoid BIO_reset() warnings since it returns a value

- openssl: adapt to 1.1.0+ name changes

- scripts/makefile: add standard header

- scripts/Makefile: fix GNUism and survive no perl
  
  Closes #555
  
  Reported-by: Thomas Klausner

- fix b6d5cb40d7038fe

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix hanging paused stream
  
  When NGHTTP2_ERR_PAUSE is returned from data_source_read_callback, we
  might not process DATA frame fully.  Calling nghttp2_session_mem_recv()
  again will continue to process DATA frame, but if there is no incoming
  frames, then we have to call it again with 0-length data.  Without this,
  on_stream_close callback will not be called, and stream could be hanged.
  
  Bug: http://curl.haxx.se/mail/lib-2015-11/0103.html
  Reported-by: Francisco Moraes

- [Christian Stewart brought this change]

  build: fix compilation error with CURL_DISABLE_VERBOSE_STRINGS
  
  With curl disable verbose strings in http.c the compilation fails due to
  the data variable being undefined later on in the function.
  
  Closes #558

Jay Satiro (7 Dec 2015)
- [Gisle Vanem brought this change]

  config-win32: Fix warning HAVE_WINSOCK2_H undefined

- [Gisle Vanem brought this change]

  openssl: BoringSSL doesn't have CONF_modules_free

- [Gisle Vanem brought this change]

  lwip: Fix compatibility issues with later versions
  
  The name of the header guard in lwIP's <lwip/opt.h> has changed from
  '__LWIP_OPT_H__' to 'LWIP_HDR_OPT_H' (bug #35874 in May 2015).
  
  Other fixes:
  
  - In curl_setup.h, the problem with an old PSDK doesn't apply if lwIP is
  used.
  
  - In memdebug.h, the 'socket' should be undefined first due to lwIP's
  lwip_socket() macro.
  
  - In curl_addrinfo.c lwIP's getaddrinfo() + freeaddrinfo() macros need
  special handling because they were undef'ed in memdebug.h.
  
  - In select.c we can't use preprocessor conditionals inside select if
  MSVC and select is a macro, as it is with lwIP.
  
  http://curl.haxx.se/mail/lib-2015-12/0023.html
  http://curl.haxx.se/mail/lib-2015-12/0024.html

Patrick Monnerat (7 Dec 2015)
- os400: define CURL_VERSION_PSL in ILE/RPG binding

Jay Satiro (7 Dec 2015)
- [Gisle Vanem brought this change]

  version: Add flag CURL_VERSION_PSL for libpsl

- formdata: Check if length is too large for memory
  
  - If the size of the length type (curl_off_t) is greater than the size
  of the size_t type then check before allocating memory to make sure the
  value of length will fit in a size_t without overflow. If it doesn't
  then return CURLE_BAD_FUNCTION_ARGUMENT.
  
  Bug: https://github.com/bagder/curl/issues/425#issuecomment-154518679
  Reported-by: Steve Holme

Steve Holme (3 Dec 2015)
- tests: Corrected copy and pasted comments from commit e643c5c908

Daniel Stenberg (3 Dec 2015)
- curl: remove keepalive #ifdef checks done on libcurl's behalf
  
  They didn't match the ifdef logic used within libcurl anyway so they
  could indeed warn for the wrong case - plus the tool cannot know how the
  lib actually performs at that level.

Steve Holme (2 Dec 2015)
- test947: Corrected typo in test name

- tests: Disable the OAUTHBEARER tests when using a non-default port number
  
  Tests 842, 843, 844, 845, 887, 888, 889, 890, 946, 947, 948 and 949 fail
  if a custom port number is specified via the -b option of runtests.pl.
  
  Suggested by: Kamil Dudka
  Bug: http://curl.haxx.se/mail/lib-2015-12/0003.html

Daniel Stenberg (2 Dec 2015)
- bump: towards next release
  
  for all we know now, it might be called 7.46.1

Version 7.46.0 (1 Dec 2015)

Daniel Stenberg (1 Dec 2015)
- RELEASE-NOTES: updated contributor count for 7.46.0

- THANKS: new contributors from the 7.46.0 release

- THANKS-filter: single Tim Rühsen spelling

- docs/examples: gitignore some more built examples

- RELEASE-NOTES; this bug was never released

- RELEASE-NOTES: synced with e55f15454efacb0

- [Flavio Medeiros brought this change]

  Curl_read_plain: clean up ifdefs that break statements
  
  Closes #546

- http2: convert some verbose output into debug-only output

- http2 push: add missing inits of new stream
  
  - set the correct stream_id for pushed streams
  - init maxdownload and size properly

- http2 push: set weight for new stream
  
  give the new stream the old one's stream_weight internally to avoid
  sending a PRIORITY frame unless asked for it

- curl_setup.h: undef freeaddrinfo in c-ares block to fix build
  
  Fixes warnings 78c25c854a added.

- nonblock: fix setting non-blocking mode for Amiga
  
  IoctlSocket() apparently wants a pointer to a long, passed as a char *
  in its third parameter. This bug was introduced already back in commit
  c5fdeef41d from October 1 2001!
  
  Bug: http://curl.haxx.se/mail/lib-2015-11/0088.html
  Reported-by: Norbert Kett

- zsh install: fix DESTDIR support
  
  Reported-by: Mohammad AlSaleh

Dan Fandrich (27 Nov 2015)
- lib: Only define curl_dofreeaddrinfo if struct addrinfo is available

Steve Holme (27 Nov 2015)
- tool_paramhlp: Fixed display of URL index in password prompt for --next
  
  Commit f3bae6ed73 added the URL index to the password prompt when using
  --next. Unfortunately, because the size_t specifier (%zu) is not
  supported by all sprintf() implementations we use the curl_off_t format
  specifier instead. The display of an incorrect value arises on platforms
  where size_t and curl_off_t are of a different size.

Daniel Stenberg (25 Nov 2015)
- timecond: do not add if-modified-since without timecondition
  
  The RTSP code path didn't skip adding the if-modified-since for certain
  RTSP code paths, even if CURLOPT_TIMECONDITION was set to
  CURL_TIMECOND_NONE.
  
  Also, an unknown non-zero CURLOPT_TIMECONDITION value no longer equals
  CURL_TIMECOND_IFMODSINCE.
  
  Bug: http://stackoverflow.com/questions/33903982/curl-timecond-none-doesnt-work-how-to-remove-if-modified-since-header

- RELEASE-NOTES: synced with 99d17a5e2ba77e58

- examples/README: cut out the incomplete list
  
  ... and add a generic explanation for them instead. Each example file
  should contain its own description these days.

- test1513: make sure the callback is only called once

- [Daniel Shahaf brought this change]

  build: Install zsh completion
  
  Fixes #534
  Closes #537

- done: make sure the final progress update is made
  
  It would previously be skipped if an existing error was returned, but
  would lead to a previous value being left there and later used.
  CURLINFO_TOTAL_TIME for example.
  
  Still it avoids that final progress update if we reached DONE as the
  result of a callback abort to avoid another callback to be called after
  an abort-by-callback.
  
  Reported-by: Lukas Ruzicka
  
  Closes #538

- curl: expanded the -XHEAD warning text
  
  ... to also mention the specific options used.

- Revert "cleanup: general removal of TODO (and similar) comments"
  
  This reverts commit 64e959ffe37c436503f9fed1ce2d6ee6ae50bd9a.
  
  Feedback-by: Dan Fandrich
  URL: http://curl.haxx.se/mail/lib-2015-11/0062.html

- CURLOPT_HEADERFUNCTION.3: fix typo
  
  Refer to _HEADERDATA not _WRITEDATA.
  
  Reported-by: Michał Piechowski

- TODO: TCP Fast Open

Steve Holme (22 Nov 2015)
- examples: Added website parse-able descriptions to the e-mail examples

- TODO: Added another 'multi-interface' idea

- smb.c: Fixed compilation warnings
  
  smb.c:134:3: warning: conversion to 'short unsigned int' from 'int' may
               alter its value
  smb.c:146:42: warning: conversion to 'unsigned int' from 'long long
                unsigned int' may alter its value
  smb.c:146:65: warning: conversion to 'unsigned int' from 'long long
                unsigned int' may alter its value

- schannel: Corrected copy/paste error in commit 8d17117683

- schannel: Use GetVersionEx() when VerifyVersionInfo() isn't available
  
  Regression from commit 7a8e861a5 as highlighted in the msys autobuilds.

- examples: Fixed compilation warnings
  
  pop3-multi.c:96:5: warning: implicit declaration of function 'memset'
  imap-multi.c:96:5: warning: implicit declaration of function 'memset'
  http2-download.c:226:5: warning: implicit declaration of function 'memset'
  http2-upload.c:290:5: warning: implicit declaration of function 'memset'
  http2-upload.c:290:5: warning: implicit declaration of function 'memset'

- Makefile.inc: Fixed test run error
  
  test845 not present in tests/data/Makefile.inc

Daniel Stenberg (20 Nov 2015)
- TODO: remove duplicated title

- TODO: added two more libcurl ideas
  
  Moved some ideas from "next major" to just ordinary ideas since we can
  always add new things while keeping the old without doing a "next
  major".

Steve Holme (20 Nov 2015)
- tests: Re-enabled tests 889 and 890 following POP3 fix

- pop3: Differentiate between success and continuation responses

- pop3: Added clarity on some server response codes

Daniel Stenberg (20 Nov 2015)
- [Daniel Shahaf brought this change]

  build: Fix theoretical infinite loops
  
  Add error-checking to 'cd' in a few cases where omitting the checks
  might result in an infinite loop.
  
  Closes #535

Patrick Monnerat (19 Nov 2015)
- curl.h: s/#defien/#define/

- os400: synchronize ILE/RPG header file

- os400: Provide options for libssh2 use in compile scripts. Adjust README.

Daniel Stenberg (19 Nov 2015)
- [danielsh@apache.org brought this change]

  zsh completion: Preserve single quotes in output
  
  When an option's help string contains literal single quotes, those
  single quotes would be stripped from the option's description in the
  completion output (unless the zsh RC_QUOTES option were set while the
  completion function was being sourced, which is not the default).  This
  patch makes the completion output contain single quotes where the --help
  output does.
  
  Closes #532

Jay Satiro (18 Nov 2015)
- [MaxGiting brought this change]

  FAQ: Grammar changes
  
  Closes https://github.com/bagder/curl/pull/533

Daniel Stenberg (17 Nov 2015)
- http2: http_done: don't free already-freed push headers
  
  The push headers are freed after the push callback has been invoked,
  meaning this code should only free the headers if the callback was never
  invoked and thus the headers weren't freed at that time.
  
  Reported-by: Davey Shafik

- [Anders Bakken brought this change]

  getconnectinfo: Don't call recv(2) if socket == -1
  
  Closes #528

- CURLMOPT_PUSHFUNCTION.3: *_byname() returns only the first header
  
  ... if there are more than one using the same name

- http2: minor comment typo

- sasl; fix checksrc warnings

Steve Holme (15 Nov 2015)
- RELEASE-NOTES: Adjusted for the recent OAuth 2.0 activity

- tests: Disabled 889 and 890 until we support POP3 continuation responses
  
  As POP3 final and continuation responses both begin with a + character,
  and both the finalcode and contcode variables in SASLprotoc are set as
  such, we cannot tell the difference between them when we are expecting
  an optional continuation from the server such as the following:
  
  + something else from the server
  +OK final response
  
  Disabled these tests until such a time we can tell the responses apart.

- tests: Corrected typos from commit ba4d8f7eba

- tests: Added OAUTHBEARER failure response tests

- oauth2: Support OAUTHBEARER failures sent as continuation responses
  
  According to RFC7628 a failure message may be sent by the server in a
  base64 encoded JSON string as a continuation response.
  
  Currently only implemented for OAUTHBEARER and not XAUTH2.

Daniel Stenberg (15 Nov 2015)
- RELEASE-NOTES: synced with 808a17ee675

Steve Holme (14 Nov 2015)
- tests: Renamed existing OAuth 2.0 (XOAUTH) tests

- tests: Added OAuth 2.0 (OAUTHBEARER) tests

- oauth2: Added support for OAUTHBEARER SASL mechanism to IMAP, POP3 and SNMP
  
  OAUTHBEARER is now the official "registered" SASL mechanism name for
  OAuth 2.0. However, we don't want to drop support for XOAUTH2 as some
  servers won't support the new mechanism yet.

Daniel Stenberg (13 Nov 2015)
- RELEASE-NOTES: recounted curl_easy_setopt() options

- typecheck-gcc.h: add missing slist-using options
  
  CURLOPT_RESOLVE and CURLOPT_PROXYHEADER were missing
  
  Also sorted the list.

- typecheck-gcc.h: added CURLOPT_CLOSESOCKETDATA
  
  ... and sorted curl_is_cb_data_option alphabetically

Jay Satiro (13 Nov 2015)
- [Sebastian Pohlschmidt brought this change]

  openssl: Free modules on cleanup
  
  Curl_ossl_init calls OPENSSL_load_builtin_modules() but
  Curl_ossl_cleanup doesn't make a call to free these modules.
  
  Bug: https://github.com/bagder/curl/issues/526

Steve Holme (13 Nov 2015)
- symbols-in-versions: Added new CURLOPTTYPE_STRINGPOINT alias
  
  ...following commit aba281e762 to fix test 1119.

Daniel Stenberg (13 Nov 2015)
- curl: mark two more options strings for --libcurl output

- typecheck-gcc.h: add some missing string types
  
  Also sorted that list alphabetically

- curl.h: introducing the STRINGPOINT alias
  
  As an alias for OBJECTPOINT. Provided to allow us to grep for all string
  options easier.

- cleanup: general removal of TODO (and similar) comments
  
  They tend to never get updated anyway so they're frequently inaccurate
  and we never go back to revisit them anyway. We document issues to work
  on properly in KNOWN_BUGS and TODO instead.

- ftplistparser: remove empty function

- openssl: remove #if check for 0.9.7 for ENGINE_load_private_key

- openssl: all supported versions have X509_STORE_set_flags
  
  Simplify by removing #ifdefs and macros

- openssl: remove 0.9.3 check

- openssl: remove #ifdefs for < 0.9.5 support
  
  We only support >= 0.9.7

- lib/vtls/openssl: remove unused traces of yassl ifdefs

Dan Fandrich (12 Nov 2015)
- [dfandrich brought this change]

  unit1603: Demote hash mismatch failure to a warning
  
  The hashes can vary between architectures (e.g. Sparc differs from x86_64).
  This is not a fatal problem but just reduces the coverage of these white-box
  tests, as the assumptions about into which hash bucket each key falls are no
  longer valid.

- [dfandrich brought this change]

  unit1603: Added unit tests for hash functions

- [dfandrich brought this change]

  unit1602: Fixed failure in torture test

Steve Holme (12 Nov 2015)
- sasl: Re-introduced XOAUTH2 in the default enabled authentication mechanism
  
  Following the fix in commit d6d58dd558 it is necessary to re-introduce
  XOAUTH2 in the default enabled authentication mechanism, which was
  removed in commit 7b2012f262, otherwise users will have to specify
  AUTH=XOAUTH2 in the URL.
  
  Note: OAuth 2.0 will only be used when the bearer is specified.

- [Stefan Bühler brought this change]

  sasl_sspi: fix identity memory leak in digest authentication

- [Stefan Bühler brought this change]

  sasl_sspi: fixed unicode build for digest authentication
  
  Closes #525

- oauth2: Re-factored OAuth 2.0 state variable

- sasl: Don't choose OAuth 2.0 if mechanism not advertised
  
  Regression from commit 9e8ced9890 which meant if --oauth2-bearer was
  specified but the SASL mechanism wasn't supported by the server then
  the mechanism would be chosen.

Daniel Stenberg (12 Nov 2015)
- runtests: more compact "System characteristics" output
  
  - no point in repeating curl features that is already listed as features
    from the curl -V output
  
  - remove the port numbers/unix domain path from the output unless
    verbose is used, as that is rarely interesting to users.

- runtests: rename conditional curl-features to $has_[name]

Steve Holme (11 Nov 2015)
- oauth2: Introduced support for host and port details
  
  Added support to the OAuth 2.0 message function for host and port, in
  order to accommodate the official OAUTHBEARER SASL mechanism which is
  to be added shortly.

- curl_setup.h: Removed duplicate CURL_DISABLE_RTSP when HTTP_ONLY defined

- cmake: Add missing feature macros in config header (Part 2)
  
  In addition to commit a215381c94 added the RTSP, RTMP and SMB protocols.

Daniel Stenberg (10 Nov 2015)
- [Douglas Creager brought this change]

  cmake: Add missing feature macros in config header
  
  The curl_config.h file can be generated either from curl_config.h.cmake
  or curl_config.h.in, depending on whether you're building using CMake or
  the autotools.  The CMake template header doesn't include entries for
  all of the protocols that you can disable, which (I think) means that
  you can't actually disable those protocols when building via CMake.
  
  Closes #523

- [Douglas Creager brought this change]

  BoringSSL: Work with stricter BIO_get_mem_data()
  
  BoringSSL implements `BIO_get_mem_data` as a function, instead of a
  macro, and expects the output pointer to be a `char **`.  We have to add
  an explicit cast to grab the pointer as a `const char **`.
  
  Closes #524

- http2: rectify the http2 version #if check
  
  We need 1.0.0 or later. Also verified by configure.

Steve Holme (9 Nov 2015)
- oauth2: Don't use XAUTH2 in OAuth 2.0 function name

- oauth2: Don't use XOAUTH2 in OAuth 2.0 variables

- oauth2: Use OAuth 2.0 rather than XOAUTH2 in comments
  
  When referring to OAuth 2.0 we should use the official name rather the
  SASL mechanism name.

Daniel Stenberg (9 Nov 2015)
- imap: avoid freeing constant string
  
  The fix in 1a614c6c3 was wrong and would leed to free() of a fixed
  string.
  
  Pointed-out-by: Kamil Dudka

- ROADMAP: remove two items already done

- RELEASE-NOTES: synced with 2200bf62054

Jay Satiro (9 Nov 2015)
- acinclude: Remove check for 16-bit curl_off_t
  
  Because it's illogical to check for a 16-bit curl_off_t.
  
  Ref: https://github.com/bagder/curl/issues/425#issuecomment-154964205

Dan Fandrich (8 Nov 2015)
- tool: Fixed a memory leak on OOM introduced in 19cb0c4a

Steve Holme (8 Nov 2015)
- [Justin Ehlert brought this change]

  imap: Don't check for continuation when executing a CUSTOMREQUEST
  
  Bug: https://github.com/bagder/curl/issues/486
  Closes https://github.com/bagder/curl/pull/487

Daniel Stenberg (7 Nov 2015)
- imap: checksrc: remove space after while before paren

- checksrc.whitelist: "missing space after close paren"
  
  ... when it was within a string!

Steve Holme (7 Nov 2015)
- opts: Corrected TLS protocols list to include POP3S rather than POP3

- imap: Quote other 'atom-specials' and not just the space character
  
  Closes #517

- imap: Fixed double quote in LIST command when mailbox contains spaces

Daniel Stenberg (6 Nov 2015)
- imap: fix compiler warning
  
  imap.c:657:13: error: assignment discards 'const' qualifier from pointer
  target type [-Werror=discarded-qualifiers]

Steve Holme (6 Nov 2015)
- imap: Don't call imap_atom() when no mailbox specified in LIST command

Daniel Stenberg (6 Nov 2015)
- curl.1: remove the overlap --range example
  
  ... it is just weird to include by default even if it still works.

- tftp tests: verify sent options too
  
  The tftpd test server now logs all received options and thus all TFTP
  test cases need to match them exactly.
  
  Extended test 283 to use and verify --tftp-blksize.

Jay Satiro (6 Nov 2015)
- getinfo: CURLINFO_ACTIVESOCKET: fix bad socket value
  
  - Set user info param to the socket returned by Curl_getconnectinfo,
  regardless of if the socket is bad. Effectively this means the user info
  param now will receive CURL_SOCKET_BAD instead of -1 on bad socket.
  
  - Remove incorrect comments.
  
  CURLINFO_ACTIVESOCKET is documented to write CURL_SOCKET_BAD to user
  info param but prior to this change it wrote -1.
  
  Bug: https://github.com/bagder/curl/pull/518
  Reported-by: Marcel Raad

Patrick Monnerat (5 Nov 2015)
- curl_ntlm_core: fix 2 curl_off_t constant overflows.

- os400: adjust specific code to support new options.

Daniel Stenberg (2 Nov 2015)
- [Lauri Kasanen brought this change]

  rawstr: Speed up Curl_raw_toupper by 40%
  
  Rationale: when starting up a curl-using app, all cookies from the jar
  are checked against each other. This was causing a startup delay in the
  Fifth browser.
  
  All tests pass.
  
  Signed-off-by: Lauri Kasanen <cand@gmx.com>

- http redirects: %-encode bytes outside of ascii range
  
  Apparently there are sites out there that do redirects to URLs they
  provide in plain UTF-8 or similar. Browsers and wget %-encode such
  headers when doing a subsequent request. Now libcurl does too.
  
  Added test 1138 to verify.
  
  Closes #473

- RELEASE-NOTES: synced with cba5bc585410

- symbols-in-version: add all CURL_HTTPPOST_* symbols

- formadd: support >2GB files on windows
  
  Closes #425

- curl.h: s/HTTPPOST_/CURL_HTTPOST_
  
  Fixes a name space pollution at the cost of programs using one of these
  defines will no longer compile. However, the vast majority of libcurl
  programs that do multipart formposts use curl_formadd() to build this
  list.
  
  Closes #506

- mbedtls: fix "Structurally dead code"
  
  CID 1332129

- mbedtls: fix "Logically dead code"
  
  CID 1332128

- Revert "openssl: engine: remove double-free"
  
  This reverts commit 370ee919b37cc9a46c36428b2bb1527eae5db2bd.
  
  Issue #509 has all the details but it was confirmed that the crash was
  not due to this, so the previous commit was wrong.

- curl.1: -E: s/private certificate/client certificate
  
  ... as the certificate is strictly speaking not private.
  
  Reported-by: John Levon

- openssl: engine: remove double-free
  
  After a successful call to SSL_CTX_use_PrivateKey(), we must not call
  EVP_PKEY_free() on the key.
  
  Reported-by: nased0
  Closes #509

Jay Satiro (27 Oct 2015)
- socks: Fix incorrect port numbers in failed connect messages

Daniel Stenberg (26 Oct 2015)
- DISTRO-DILEMMA: removed
  
  Out of date and not kept accurate. It was sort of a problem of the past
  anyway.

- [xiangbin li brought this change]

  MacOSX-Framework: sdk regex fix for sdk 10.10 and later
  
  closes #507

Jay Satiro (24 Oct 2015)
- build: Fix support for PKG_CONFIG
  
  - Allow the user to use PKG_CONFIG but not PKGCONFIG.
  
  Background:
  
  Last week in 14d5a86 a change was made to allow the user to set the
  PKGCONFIG variable. Today in 72d99f2 I supplemented that to allow the
  more common PKG_CONFIG as an alternative if PKGCONFIG is not set.
  
  Neither of those changes worked as expected because PKGCONFIG is
  occasionally reset in configure and by the CURL_CHECK_PKGCONFIG macro.
  Instead in this commit I take the approach that the user may set
  PKG_CONFIG only.

- build: Fix mingw ssl gdi32 order
  
  - If mingw ssl make sure -lgdi32 comes after ssl libs
  
  - Allow PKG_CONFIG to set pkg-config location and options
  
  Bug: https://github.com/bagder/curl/pull/501
  Reported-by: Kang Lin

Daniel Stenberg (23 Oct 2015)
- RELEASE-NOTES: synced with 03b6e078163f

- polarssl/mbedtls: fix name space pollution
  
  Global private symbols MUST start with Curl_!

- [Dmitry S. Baikov brought this change]

  mbedTLS: THREADING_SUPPORT compilation fix
  
  Closes #505

- test1137: verify --ignore-content-length for FTP

- curl.1: --ignore-content-length now works for FTP too

- [Kurt Fankhauser brought this change]

  ftp: allow CURLOPT_IGNORE_CONTENT_LENGTH to ignore size
  
  This allows FTP transfers with growing (or shrinking) files without
  causing a transfer error.
  
  Closes #480

- CURLOPT_STREAM_WEIGHT.3: call argument 'weight' too
  
  ... and add a little example of what the weight actually means. "Relative
  proportion of bandwidth".

- http2: add stream options to dist and curl_easy_setopt.3

- http2: s/priority/weight

- http2: on_frame_recv: trust the conn/data input
  
  Removed wrong assert()s
  
  The 'conn' passed in as userdata can be used and there can be other
  sessionhandles ('data') than the single one this checked for.

- http2: added three stream prio/deps options
  
  CURLOPT_STREAM_DEPENDS
  
  CURLOPT_STREAM_DEPENDS_E
  
  CURLOPT_STREAM_PRIORITY

- RELEASE-NOTES: synced with ace68fdc0cfed83d

- [m-gardet brought this change]

  mbedtls:new profile with RSA min key len = 1024.
  
  Closes #502

- checksrc: add crude // detection

Jay Satiro (21 Oct 2015)
- [Gisle Vanem brought this change]

  build: fix for MSDOS/djgpp
  
  - Add a VPATH-statement for the vtls/*.c files.
  
  - Due to 'vtls/*.c', remove that subdir part from $(OBJECTS).

Daniel Stenberg (20 Oct 2015)
- copyrights: update Gisle Vanem's email

- vtls: fix compiler warning for TLS backends without sha256
  
  ... noticed with mbedTLS.

- [Jonas Minnberg brought this change]

  vtls: added support for mbedTLS
  
  closes #496

Jay Satiro (19 Oct 2015)
- [Javier G. Sogo brought this change]

  cmake: Fix for add_subdirectory(curl) use-case
  
  - Use CURL_BINARY_DIR instead of CMAKE_BINARY_DIR.
  
  When including CURL using add_subdirectory the variables
  CMAKE_BINARY_DIR and CURL_BINARY_DIR hold different paths.
  
  Closes https://github.com/bagder/curl/pull/488
  Closes https://github.com/bagder/curl/pull/498

Daniel Stenberg (18 Oct 2015)
- RELEASE-NOTES: synced with 4c773bcb474e

- tests/FILEFORMAT: mention PSL as a valid feture to check for
  
  For example in test 1136

- teste1136: only run when PSL is enabled

- curl: slist_wc: remove curl_memory.h inclusion
  
  ... that's for the library only.

- configure: add PSL to the list of features
  
  ... to make test 1014 work again after e77b5b7453.

- [Daniel Hwang brought this change]

  tool: Generate easysrc with last cache linked-list
  
  Using a last cache linked-list improves the performance of easysrc
  generation.
  
  Bug: https://github.com/bagder/curl/issues/444
  Ref: https://github.com/bagder/curl/issues/429
  
  Closes #452

- [Tim Rühsen brought this change]

  cookies: Add support for Mozilla's Publix Suffix List
  
  Use libpsl to check the domain value of Set-Cookie headers (and cookie
  jar entries) for not being a Publix Suffix.
  
  The configure script checks for "libpsl" by default. Disable the check
  with --without-libpsl.
  
  Ref: https://publicsuffix.org/
  Ref: https://github.com/publicsuffix/list
  Ref: https://github.com/rockdaboot/libpsl

- [Richard Hosking brought this change]

  curlbuild.h: Fix non-configure compiling to mips and sh4 targets

- [Anders Bakken brought this change]

  http2: Don't pass unitialized name+len pairs to nghttp2_submit_request
  
  bug introduced by 18691642931e5c7ac8af83ac3a84fbcb36000f96.
  
  Closes #493

Dan Fandrich (16 Oct 2015)
- test1601: fix compilation with --enable-debug and --disable-crypto-auth

Daniel Stenberg (16 Oct 2015)
- multi: fix off-by-one finit[] array size
  
  introduced in c6aedf680f6. It needs to be CURLM_STATE_LAST big since it
  must hande the range 0 .. CURLM_STATE_MSGSENT (18) and CURLM_STATE_LAST
  is 19 right now.
  
  Reported-by: Dan Fandrich
  Bug: http://curl.haxx.se/mail/lib-2015-10/0069.html

- fread_func: move callback pointer from set to state struct
  
  ... and assign it from the set.fread_func_set pointer in the
  Curl_init_CONNECT function. This A) avoids that we have code that
  assigns fields in the 'set' struct (which we always knew was bad) and
  more importantly B) it makes it impossibly to accidentally leave the
  wrong value for when the handle is re-used etc.
  
  Introducing a state-init functionality in multi.c, so that we can set a
  specific function to get called when we enter a state. The
  Curl_init_CONNECT is thus called when switching to the CONNECT state.
  
  Bug: https://github.com/bagder/curl/issues/346
  
  Closes #346

Dan Fandrich (14 Oct 2015)
- test1531: case the size to fix the test on non-largefile builds

Daniel Stenberg (13 Oct 2015)
- acinclude: remove PKGCONFIG override
  
  ... and allow it to get set by a caller easier.
  
  Reported-by: Rainer Jung
  Bug: http://curl.haxx.se/mail/lib-2015-10/0035.html

Dan Fandrich (12 Oct 2015)
- docs/INSTALL: Updated example minimal binary sizes

Daniel Stenberg (11 Oct 2015)
- [Erik Johansson brought this change]

  openssl: Fix set up of pkcs12 certificate verification chain
  
  sk_X509_pop will decrease the size of the stack which means that the loop would
  end after having added only half of the certificates.
  
  Also make sure that the X509 certificate is freed in case
  SSL_CTX_add_extra_chain_cert fails.

- ntlm: error out without 64bit support as the code needs it
  
  It makes it a clearer message for developers reaching that point without
  the necessary support.
  
  Thanks-by: Jay Satiro
  
  Closes #78

- curl_global_init: set the memory function pointers correct
  
  follow-up from 6f8ecea0

- curl_global_init_mem: set function pointers before doing init
  
  ... as in the polarssl TLS backend for example it uses memory functions.

Jay Satiro (9 Oct 2015)
- http2: Fix http2_recv to return -1 if recv returned -1
  
  If the underlying recv called by http2_recv returns -1 then that is the
  value http2_recv returns to the caller.

Daniel Stenberg (8 Oct 2015)
- [Svyatoslav Mishyn brought this change]

  curl_easy_recv.3: CURLINFO_LASTSOCKET => CURLINFO_ACTIVESOCKET
  
  Closes #479

- [Svyatoslav Mishyn brought this change]

  curl_easy_send.3: CURLINFO_LASTSOCKET => CURLINFO_ACTIVESOCKET

- [Svyatoslav Mishyn brought this change]

  CURLOPT_CONNECT_ONLY.3: CURLINFO_LASTSOCKET => CURLINFO_ACTIVESOCKET

- CURLOPT_CERTINFO.3: fix reference to CURLINFO_CERTINFO

- ntlm: get rid of unconditional use of long long
  
  ... since some compilers don't have it and instead use other types, such
  as __int64.
  
  Reported by: gkinseyhpw
  Closes #478

Jay Satiro (8 Oct 2015)
- [Anders Bakken brought this change]

  des: Fix header conditional for Curl_des_set_odd_parity
  
  Follow up to 613e502.

Daniel Stenberg (7 Oct 2015)
- configure: build silently by default
  
  'make V=1' will make the build verbose like before

- bump: start climbing toward 7.46.0

- RELEASE-PROCEDURE: add the github HTTPS download step

Version 7.45.0 (7 Oct 2015)

Daniel Stenberg (7 Oct 2015)
- THANKS: 19 new contributors from the 7.45.0 announcement

- RELEASE-NOTES: synced with 69ea57970080

Jay Satiro (4 Oct 2015)
- getinfo: Fix return code for unknown CURLINFO options
  
  - If a CURLINFO option is unknown return CURLE_UNKNOWN_OPTION.
  
  Prior to this change CURLE_BAD_FUNCTION_ARGUMENT was returned on
  unknown. That return value is contradicted by the CURLINFO option
  documentation which specifies a return of CURLE_UNKNOWN_OPTION on
  unknown.

- [rouzier brought this change]

  hiperfifo: fix the pointer passed to WRITEDATA
  
  Closes https://github.com/bagder/curl/pull/471

- [Maksim Stsepanenka brought this change]

  tool_setopt: fix c_escape truncated octal
  
  Closes https://github.com/bagder/curl/pull/469

Daniel Stenberg (1 Oct 2015)
- [Orange Tsai brought this change]

  gopher: don't send NUL byte
  
  Closes #466

Jay Satiro (29 Sep 2015)
- runtests: Fix pid check in checkdied
  
  Because the 'not' operator has a very low precedence and as a result the
  entire statement was erroneously negated and could never be true.

Daniel Stenberg (30 Sep 2015)
- [Thorsten Schöning brought this change]

  win32: make recent Borland compilers use long long

- RELEASE-NOTES: synced with 69b89050d4

Jay Satiro (28 Sep 2015)
- [Michael Kalinin brought this change]

  openssl: Fix algorithm init
  
  - Change algorithm init to happen after OpenSSL config load.
  
  Additional algorithms may be available due to the user's config so we
  initialize the algorithms after the user's config is loaded.
  
  Bug: https://github.com/bagder/curl/issues/447
  Reported-by: Denis Feklushkin

- [Svyatoslav Mishyn brought this change]

  docs: fix unescaped '\n' in man pages
  
  Closes https://github.com/bagder/curl/pull/459

Daniel Stenberg (27 Sep 2015)
- http2: set TCP_NODELAY unconditionally
  
  For a single-stream download from localhost, we managed to increase
  transfer speed from 1.6MB/sec to around 400MB/sec, mostly because of
  this single fix.

- http2: avoid superfluous Curl_expire() calls
  
  ... only call it when there is data arriving for another handle than the
  one that is currently driving it.
  
  Improves single-stream download performance quite a lot.
  
  Thanks-to: Tatsuhiro Tsujikawa
  Bug: http://curl.haxx.se/mail/lib-2015-09/0097.html

- readwrite_data: set a max number of loops
  
  ... as otherwise a really fast pipe can "lock" one transfer for some
  protocols, like with HTTP/2.

- [Sergei Nikulov brought this change]

  CI: Added AppVeyor-CI for curl
  
  Closes #439

- FTP: fix uploading ASCII with unknown size
  
  ... don't try to increase the supposed file size on newlines if we don't
  know what file size it is!
  
  Patch-by: lzsiga

- [Tatsuhiro Tsujikawa brought this change]

  build: fix failures with -Wcast-align and -Werror
  
  Closes #457

- [Tatsuhiro Tsujikawa brought this change]

  curl-confopts.m4: Add missing ')'
  
  ... for CURL_CHECK_OPTION_RT
  
  Closes #456

Jay Satiro (25 Sep 2015)
- curl_easy_getinfo.3: Add brief description for each CURLINFO

Daniel Stenberg (23 Sep 2015)
- [Jakub Zakrzewski brought this change]

  CMake: Ensure discovered include dirs are considered
  
  ...during header checks. Otherwise some following header tests
  (incorrectly) fail.
  
  Closes #436

- [Jakub Zakrzewski brought this change]

  CMake: Put "winsock2.h" before "windows.h" during configure checks
  
  "windows.h" includes "winsock.h" what causes many redefinition errors
  if "winsock2.h" is included afterwards and can cause build to fail.

- tests: disable 1510 due to CI-problems on github

- [Mike Crowe brought this change]

  gnutls: Report actual GnuTLS error message for certificate errors
  
  If GnuTLS fails to read the certificate then include whatever reason it
  provides in the failure message reported to the client.
  
  Signed-off-by: Mike Crowe <mac@mcrowe.com>

- RELEASE-NOTES: synced with 6b56901b56e

- [Mike Crowe brought this change]

  gnutls: Support CURLOPT_KEYPASSWD
  
  The gnutls vtls back-end was previously ignoring any password set via
  CURLOPT_KEYPASSWD. Presumably this was because
  gnutls_certificate_set_x509_key_file did not support encrypted keys.
  
  gnutls now has a gnutls_certificate_set_x509_key_file2 function that
  does support encrypted keys. Let's determine at compile time whether the
  available gnutls supports this new function. If it does then use it to
  pass the password. If it does not then emit a helpful diagnostic if a
  password is set. This is preferable to the previous behaviour of just
  failing to read the certificate without giving a reason in that case.
  
  Signed-off-by: Mike Crowe <mac@mcrowe.com>

- CURLINFO_TLS_SESSION: always return backend info
  
  ... even for those that don't support providing anything in the
  'internals' struct member since it offers a convenient way for
  applications to figure this out.

- [Daniel Hwang brought this change]

  tool: remove redundant libcurl check
  
  The easysrc generation is run only when --libcurl is initialized.
  
  Ref: https://github.com/bagder/curl/issues/429
  
  Closes #448

- [Richard van den Berg brought this change]

  CURLOPT_PROXY.3: A proxy given as env variable gets no special treatment
  
  Closes #449

- TODO: 5.7 More compressions
  
  Like for example brotli, as being implemented in Firefox now.

Jay Satiro (21 Sep 2015)
- tool_operate: Don't call easysrc cleanup unless --libcurl
  
  - Review of 4d95491.
  
  The author changed it so easysrc only initializes when --libcurl but did
  not do the same for the call to easysrc cleanup.
  
  Ref: https://github.com/bagder/curl/issues/429

Daniel Stenberg (20 Sep 2015)
- [Viktor Szakats brought this change]

  CURLOPT_PINNEDPUBLICKEY.3: replace test.com with example.com
  
  closes #443

- KNOWN_BUGS: 91 "curl_easy_perform hangs with imap and PolarSSL"
  
  Closes #334

- KNOWN_BUGS: add link to #85

- tests: disable 1801 until fixed
  
  It is unreliable and causes CI problems on github
  
  Closes #380

- RELEASE-NOTES: synced with 4d95491636ee

- [Daniel Lee Hwang brought this change]

  tool: generate easysrc only on --libcurl
  
  Code should only be generated when --libcurl is used.
  
  Bug: https://github.com/bagder/curl/issues/429
  Reported-by: @greafhe, Jay Satiro
  
  Closes #429
  Closes #442

Jay Satiro (19 Sep 2015)
- vtls: Change designator name for server's pubkey hash
  
  - Change the designator name we use to show the base64 encoded sha256
  hash of the server's public key from 'pinnedpubkey' to
  'public key hash'.
  
  Though the server's public key hash is only shown when comparing pinned
  public key hashes, the server's hash may not match one of the pinned.

Daniel Stenberg (19 Sep 2015)
- [Isaac Boukris brought this change]

  NTLM: Reset auth-done when using a fresh connection
  
  With NTLM a new connection will always require authentication.
  Fixes #435

- [Daniel Hwang brought this change]

  ssl: add server cert's "sha256//" hash to verbose
  
  Add a "pinnedpubkey" section to the "Server Certificate" verbose
  
  Bug: https://github.com/bagder/curl/issues/410
  Reported-by: W. Mark Kubacki
  
  Closes #430
  Closes #410

- [Jakub Zakrzewski brought this change]

  openldap: only part of LDAP query results received
  
  Introduced with commit 65d141e6da5c6003a1592bbc87ee550b0ad75c2f
  
  Closes #440

- [Alessandro Ghedini brought this change]

  openssl: don't output certinfo data

- [Alessandro Ghedini brought this change]

  openssl: refactor certificate parsing to use OpenSSL memory BIO
  
  Fixes #427

Kamil Dudka (18 Sep 2015)
- nss: prevent NSS from incorrectly re-using a session
  
  Without this workaround, NSS re-uses a session cache entry despite the
  server name does not match.  This causes SNI host name to differ from
  the actual host name.  Consequently, certain servers (e.g. github.com)
  respond by 400 to such requests.
  
  Bug: https://bugzilla.mozilla.org/1202264

- nss: check return values of NSS functions

Daniel Stenberg (17 Sep 2015)
- CURLOPT_PINNEDPUBLICKEY.3: mention error code

- openssl: build with < 0.9.8
  
  ... without sha256 support and no define saying so.
  
  Reported-by: Rajkumar Mandal

- libcurl-errors.3: add two missing error codes
  
  CURLE_SSL_PINNEDPUBKEYNOTMATCH and CURLE_SSL_INVALIDCERTSTATUS

Jay Satiro (14 Sep 2015)
- CURLOPT_PINNEDPUBLICKEY.3: Improve pubkey extraction example
  
  - Show how a certificate can be obtained using OpenSSL.
  
  Bug: https://github.com/bagder/curl/pull/430
  Reported-by: Daniel Hwang

Daniel Stenberg (13 Sep 2015)
- http2: removed unused function

- CURLINFO_ACTIVESOCKET.3: mention it replaces *LASTSOCKET

- opts: add CURLINFO_* man pages to dist

- opts: 19 more CURLINFO_* options made into stand-alone man pages

- RELEASE-NOTES: synced with fad9604613

- curl: customrequest_helper: deal with NULL custom method

- [Svyatoslav Mishyn brought this change]

  CURLOPT_FNMATCH_FUNCTION.3: fix typo
  
  s => is
  
  Closes #428

- curl: point out unnecessary uses of -X in verbose mode
  
  It uses 'Note:' as a prefix as opposed to the common 'Warning:' to take
  down the tone a bit.
  
  It adds a warning for using -XHEAD on other methods becasue that may
  lead to a hanging connection.

Jay Satiro (10 Sep 2015)
- curl_sspi: fix possibly undefined CRYPT_E_REVOKED
  
  Bug: https://github.com/bagder/curl/pull/411
  Reported-by: Viktor Szakats

- buildconf.bat: fix syntax error

- [Benjamin Kircher brought this change]

  winbuild: run buildconf.bat if necessary

- [Svyatoslav Mishyn brought this change]

  docs: fix argument type for CURLINFO_SPEED_*, CURLINFO_SIZE_*
  
  long => double

Daniel Stenberg (8 Sep 2015)
- [Sergei Nikulov brought this change]

  cmake: IPv6 : disable Unix header check on Windows platform
  
  Closes #409

- parse_proxy: reject illegal port numbers
  
  If the port number in the proxy string ended weirdly or the number is
  too large, skip it. Mostly as a means to bail out early if a "bare" IPv6
  numerical address is used without enclosing brackets.
  
  Also mention the bracket requirement for IPv6 numerical addresses to the
  man page for CURLOPT_PROXY.
  
  Closes #415
  
  Reported-by: Marcel Raad

- FTP: do_more: add check for wait_data_conn in upload case
  
  In some timing-dependnt cases when a 4xx response immediately followed
  after a 150 when a STOR was issued, this function would wrongly return
  'complete == true' while 'wait_data_conn' was still set.
  
  Closes #405
  
  Reported-by: Patricia Muscalu

- [Svyatoslav Mishyn brought this change]

  CURLOPT_TLSAUTH_TYPE.3: update description
  
  Closes #414
  Closes #413

- [Svyatoslav Mishyn brought this change]

  CURLOPT_PATH_AS_IS.3: fix typo
  
  leavit => leaveit
  
  closes #412

- [Svyatoslav Mishyn brought this change]

  CURLINFO_SSL_VERIFYRESULT.3: add short description

- [Svyatoslav Mishyn brought this change]

  CURLINFO_SSL_ENGINES.3: add short description

- [Svyatoslav Mishyn brought this change]

  CURLINFO_CONTENT_LENGTH_UPLOAD.3: replace "receive" with "get" for consistency

- [Svyatoslav Mishyn brought this change]

  CURLINFO_REDIRECT_TIME.3: remove redundant '!'

Kamil Dudka (4 Sep 2015)
- Revert "has: generate the curl/has.h header"
  
  This reverts commit a60bde79f9adeb135d5c642a07f0d783fbfbbc25 I have
  pushed by mistake.  Apologies for my incompetent use of the git repo!

- nss: do not directly access SSL_ImplementedCiphers[]
  
  It causes dynamic linking issues at run-time after an update of NSS.
  
  Bug: https://lists.fedoraproject.org/pipermail/devel/2015-September/214117.html

- [Daniel Stenberg brought this change]

  has: generate the curl/has.h header
  
  changed macro name, moved and renamed script to become docs/libcurl/has.pl,
  generate code that is checksrc compliant

Daniel Stenberg (3 Sep 2015)
- gitignore: ignore more generated VC Makefiles

- projects/Windows/.gitignore: ignore generated files for release

- http2: don't pass on Connection: headers
  
  RFC 7540 section 8.1.2.2 states: "An endpoint MUST NOT generate an
  HTTP/2 message containing connection-specific header fields; any message
  containing connection-specific header fields MUST be treated as
  malformed"
  
  Closes #401

- curl.1: update RFC references

- CURLOPT_POSTREDIR.3: update RFC number and section

- CURLOPT_FOLLOWLOCATION.3: mention methods for redirects
  
  and some general cleaning up

- [Marcel Raad brought this change]

  inet_pton.c: Fix MSVC run-time check failure (2)
  
  This fixes another run-time check failure because of a narrowing cast on
  Visual C++.
  
  Closes #408

Jay Satiro (3 Sep 2015)
- docs: Warn about any-domain cookies and multiple transfers
  
  - Warn that cookies without a domain are sent to any domain:
  CURLOPT_COOKIELIST, CURLOPT_COOKIEFILE, --cookie
  
  - Note that imported Set-Cookie cookies without a domain are no longer
  exported:
  CURLINFO_COOKIELIST, CURLOPT_COOKIEJAR, --cookie-jar

Steve Holme (2 Sep 2015)
- tool_sdecls.h: Fixed compilation warning from commit 4a889441d3
  
  tool_sdecls.h:139 warning: comma at end of enumerator list

Daniel Stenberg (2 Sep 2015)
- opts: 8 more CURLINFO* options as stand-alone man pages

- RELEASE-NOTES: synced with c764cb4add1a8

- man-pages: more SEE ALSO links

- opts: more CURLINFO_* options as stand-alone man pages

Steve Holme (31 Aug 2015)
- sasl: Only define Curl_sasl_digest_get_pair() when CRYPTO_AUTH enabled
  
  Introduced in commit 59f3f92ba6 this function is only implemented when
  CURL_DISABLE_CRYPTO_AUTH is not defined. As such we shouldn't define
  the function in the header file either.

- sasl: Updated SPN variables and comments for consistency
  
  In places the "host name" and "realm" variable was referred to as
  "instance" whilst in others it was referred to as "host".

Daniel Stenberg (30 Aug 2015)
- configure: check for HMAC_Update in openssl
  
  Turns out HMAC_Init is now deprecated in openssl master (and I spelled
  HMAC_Init_ex wrong in previous commit)

Steve Holme (30 Aug 2015)
- win32: Use DES_set_odd_parity() from OpenSSL/BoringSSL by default
  
  Set HAVE_DES_SET_ODD_PARITY when using OpenSSL/BoringSSL as native
  Windows builds don't use the autoconf tools.

- des: Fixed compilation warning from commit 613e5022fe
  
  curl_ntlm_core.c:150: warning 'Curl_des_set_odd_parity' undefined;
                        assuming extern returning int

- buildconf.bat: Fixed double blank line in 'curl manual' warning output

- makefiles: Added our standard copyright header
  
  But kept the original author, when they were specified in a comment, as
  the initial copyright holder.

Jay Satiro (29 Aug 2015)
- CURLOPT_FILETIME.3: CURLINFO_FILETIME has its own manpage now

Daniel Stenberg (29 Aug 2015)
- CURLINFO_RESPONSE_CODE.3: added short description

- opts: 7 initial CURLINFO_* options as stand-alone man pages

- [Nikolai Kondrashov brought this change]

  libcurl.m4: Put braces around empty if body
  
  Put braces around empty "if" body in libcurl.m4 check to avoid warning:
  
          suggest braces around empty body in an 'if' statement
  
  and make it work with -Werror builds.
  
  Closes #402

- [Svyatoslav Mishyn brought this change]

  curl_easy_escape.3: escape '\n'
  
  Closes #398

- [Svyatoslav Mishyn brought this change]

  curl_easy_{escape,setopt}.3: fix example
  
  remove redundant '}'

- [Sergei Nikulov brought this change]

  cmake: added Windows SSL support
  
  Closes #399

- curl: point out the conflicting HTTP methods if used
  
  It isn't always clear to the user which options that cause the HTTP
  methods to conflict so by spelling them out it should hopefully be
  easier to understand why curl complains.

- curl: clarify that users can only specify one _METHOD_

- [Svyatoslav Mishyn brought this change]

  curl_easy_{escape,unescape}.3: "char *" vs. "const char *"
  
  Closes #395

Patrick Monnerat (24 Aug 2015)
- os400: include new options in wrappers and update ILE/RPG binding.

Daniel Stenberg (24 Aug 2015)
- KNOWN_BUGS: #2, not reading a HEAD response-body is not a bug
  
  ... since HTTP is forbidden to return any such.

- KNOWN_BUGS: #78 zero-length files is already fixed!

- [Razvan Cojocaru brought this change]

  getinfo: added CURLINFO_ACTIVESOCKET
  
  This patch addresses known bug #76, where on 64-bit Windows SOCKET is 64
  bits wide, but long is only 32, making CURLINFO_LASTSOCKET unreliable.
  
  Signed-off-by: Razvan Cojocaru <rcojocaru@bitdefender.com>

- http2: remove dead code
  
  Leftovers from when we removed the private socket hash.
  
  Coverity CID 1317365, "Logically dead code"

- ntlm: mark deliberate switch case fall-through
  
  Coverity CID 1317367, "Missing break in switch"

- http2: on_frame_recv: get a proper 'conn' for the debug logging
  
  "Explicit null dereferenced (FORWARD_NULL)"
  
  Coverity CID 1317366

- RELEASE-NOTES: synced with 2acaf3c804

Dan Fandrich (23 Aug 2015)
- tool: fix memory leak with --proto-default option

Jay Satiro (22 Aug 2015)
- [Nathaniel Waisbrot brought this change]

  CURLOPT_DEFAULT_PROTOCOL: added
  
  - Add new option CURLOPT_DEFAULT_PROTOCOL to allow specifying a default
  protocol for schemeless URLs.
  
  - Add new tool option --proto-default to expose
  CURLOPT_DEFAULT_PROTOCOL.
  
  In the case of schemeless URLs libcurl will behave in this way:
  
  When the option is used libcurl will use the supplied default.
  
  When the option is not used, libcurl will follow its usual plan of
  guessing from the hostname and falling back to 'http'.

- runtests: Allow for spaces in server-verify curl custom path

Daniel Stenberg (22 Aug 2015)
- NTLM: recent boringssl brought DES_set_odd_parity back
  
  ... so improve the #ifdefs for using our local implementation.

- configure: detect latest boringssl
  
  Since boringssl brought back DES_set_odd_parity again, it cannot be used
  to differentiate from boringssl. Using the OPENSSL_IS_BORINGSSL define
  seems better anyway.
  
  URL: https://android.googlesource.com/platform/external/curl/+/f551028d5caab29d4b4a4ae8c159c76c3cfd4887%5E!/
  Original-patch-by: Bertrand Simonnet
  
  Closes #393

- configure: change functions to detect openssl (clones)
  
  ... since boringssl moved the former ones and the check started to fail.
  
  URL: https://android.googlesource.com/platform/external/curl/+/f551028d5caab29d4b4a4ae8c159c76c3cfd4887%5E!/
  Original-patch-by: Bertrand Simonnet

- [Alessandro Ghedini brought this change]

  openssl: handle lack of server cert when strict checking disabled
  
  If strict certificate checking is disabled (CURLOPT_SSL_VERIFYPEER
  and CURLOPT_SSL_VERIFYHOST are disabled) do not fail if the server
  doesn't present a certificate at all.
  
  Closes #392

- ftp: clear the do_more bit when the server has connected
  
  The multi state machine would otherwise go into the DO_MORE state after
  DO, even for the case when the FTP state machine had already performed
  those duties, which caused libcurl to get stuck in that state and fail
  miserably. This occured for for active ftp uploads.
  
  Reported-by: Patricia Muscalu

- [Jactry Zeng brought this change]

  travis.yml: Add OS X testbot.

- [Rémy Léone brought this change]

  travis: Upgrading to container based build
  
  http://docs.travis-ci.com/user/migrating-from-legacy
  
  Closes #388

- RELEASE-NOTES: synced with 14ff86256b13e

- [Erik Janssen brought this change]

  rtsp: stop reading empty DESCRIBE responses
  
  Based-on-patch-by: Jim Hollinger

- [Erik Janssen brought this change]

  rtsp: support basic/digest authentication

- [Sam Roth brought this change]

  CURLMOPT_PUSHFUNCTION.3: fix argument types
  
  Closes #389
  Closes #386

- [Marcel Raad brought this change]

  inet_pton.c: Fix MSVC run-time check failure
  
  Visual Studio complains with a message box:
  
  "Run-Time Check Failure #1 - A cast to a smaller data type has caused a
  loss of data.  If this was intentional, you should mask the source of
  the cast with the appropriate bitmask.
  
  For example:
  char c = (i & 0xFF);
  
  Changing the code in this way will not affect the quality of the
  resulting optimized code."
  
  This is because only 'val' is cast to unsigned char, so the "& 0xff" has
  no effect.
  
  Closes #387

Jay Satiro (18 Aug 2015)
- docs: Update the redirect protocols disabled by default
  
  - Clarify that FILE and SCP are disabled by default since 7.19.4
  - Add that SMB and SMBS are disabled by default since 7.40.0
  - Add CURLPROTO_SMBS to the list of protocols

- gitignore: Sort for readability
  
  find . -name .gitignore -print0 | xargs -i -0 sort -o '{}' '{}'

Daniel Stenberg (15 Aug 2015)
- curl_easy_getinfo.3: fix superfluous space
  
  ... and changed "oriented" to "related"
  
  Closes #378

- CURLOPT_HTTP_VERSION.3: connection re-use goes before version

- [Daniel Kahn Gillmor brought this change]

  curl.1: Document weaknesses in SSLv2 and SSLv3
  
  Acknowledge that SSLv3 is also widely considered to be insecure.
  
  Also, provide references for people who want to know more about why it's
  insecure.

Steve Holme (14 Aug 2015)
- generate.bat: Added support for generating only the prerequisite files

- generate.bat: Only call buildconf.bat if it exists

- generate.bat: Fixed issues when ran in directories with special chars

Daniel Stenberg (14 Aug 2015)
- [Brad King brought this change]

  cmake: Fix CurlTests check for gethostbyname_r with 5 arguments
  
  Fix the check code to pass 5 arguments instead of 6.  This typo was
  introduced by commit aebfd4cfbf (cmake: fix gethostby{addr,name}_r in
  CurlTests, 2014-10-31).

Steve Holme (14 Aug 2015)
- * buildconf.bat: Fixed issues when ran in directories with special chars
  
  Bug: https://github.com/bagder/curl/pull/379
  Reported-by: Daniel Seither

Jay Satiro (13 Aug 2015)
- curl_global_init_mem.3: Stronger thread safety warning
  
  Bug: http://curl.haxx.se/mail/lib-2015-08/0016.html
  Reported-by: Eric Ridge

Daniel Stenberg (12 Aug 2015)
- [Svyatoslav Mishyn brought this change]

  curl_multi_add_handle.3: fix a typo
  
  "can not" => "cannot"
  
  closes #377

- [Alessandro Ghedini brought this change]

  docs: fix typos
  
  closes #376

- bump: start working toward 7.45.0

- THANKS: remove duplicate name

- THANKS-filter: merge Todd's names

- THANKS: 13 new contributors from the 7.44.0 RELEASE-NOTES

Version 7.44.0 (11 Aug 2015)

Daniel Stenberg (11 Aug 2015)
- RELEASE-NOTES: synced with c75a1e775061

- [Svyatoslav Mishyn brought this change]

  curl_formget.3: correct return code
  
  Closes #375

- [Svyatoslav Mishyn brought this change]

  libcurl-tutorial.3: fix formatting
  
  Closes #374

- [Svyatoslav Mishyn brought this change]

  curl_easy_recv.3: fix formatting

- [Anders Bakken brought this change]

  http2: discard frames with no SessionHandle
  
  Return 0 instead of NGHTTP2_ERR_CALLBACK_FAILURE if we can't locate the
  SessionHandle. Apparently mod_h2 will sometimes send a frame for a
  stream_id we're finished with.
  
  Use nghttp2_session_get_stream_user_data and
  nghttp2_session_set_stream_user_data to identify SessionHandles instead
  of a hash.
  
  Closes #372

- RELEASE-NOTES: synced with 9ee40ce2aba

- [Viktor Szakats brought this change]

  build: refer to fixed libidn versions
  
  closes #371

- Revert "configure: disable libidn by default"
  
  This reverts commit e6749055d65398315fd77f5b5b8234c5552ac2d3.
  
  ... since libidn has since been fixed.

- [Jakub Zakrzewski brought this change]

  CMake: s/HAVE_GSS_API/HAVE_GSSAPI/ to match header define
  
  Otherwise the build only pretended to use GSS-API
  
  Closes #370

- SFTP: fix range request off-by-one in size check
  
  Reported-by: Tim Stack
  
  Closes #359

- test46: update cookie expire time
  
  ... since it went old and thus was expired and caused the test to fail!

Steve Holme (9 Aug 2015)
- generate.bat: Use buildconf.bat for prerequisite file generation

- buildconf.bat: Tidy up of comments after recent commits

- buildconf.bat: Added full generation of src\tool_hugehelp.c
  
  Added support for generating the full man page based on code from
  generate.bat.

- buildconf.bat: Added detection of groff, nroff, perl and gzip
  
  To allow for the full generation of tool_hugehelp.c added detection of
  the required programs - based on code from generate.bat.

- buildconf.bat: Move DOS variable clean-up code to separate function
  
  Rather than duplicate future variables, during clean-up of both success
  and error conditions, use a common function that can be called by both.

- RELEASE-NOTES: Synced with 39dcf352d2

- buildconf.bat: Added error messages on failure

- buildconf.bat: Generate and clean files in the same order

- buildconf.bat: Maintain compatibility with DOS based systems
  
  Commit f08e30d7bc broke compatibility with DOS and non Windows NT based
  versions of Windows due to the use of the setlocal command.

Jay Satiro (9 Aug 2015)
- CURLOPT_RESOLVE.3: Note removal support was added in 7.42
  
  Bug: http://curl.haxx.se/mail/lib-2015-08/0019.html
  Reported-by: Inca R

Steve Holme (8 Aug 2015)
- checksrc.bat: Fixed error when missing *.c and *.h files
  
  File Not Found

- checksrc.bat: Fixed incorrect 'lib\vtls' path check in commit 333c36b276

- checksrc.bat: Fixed error when [directory] isn't a curl source directory
  
  The system cannot find the file specified.

- checksrc.bat: Added check for unknown arguments

- scripts: Added missing comments

- scripts: Always perform setlocal and endlocal calls in pairs
  
  Ensure that there isn't a mismatch between setlocal and endlocal calls,
  which could have happened due to setlocal being called after certain
  error conditions were checked for.

- scripts: Allow -help to be specified in any argument
  
  Allow the -help command line argument to be specified in any argument
  and not just as the first.

Daniel Stenberg (6 Aug 2015)
- [juef brought this change]

  curl_multi_remove_handle.3: fix formatting
  
  closes #366

Steve Holme (6 Aug 2015)
- README: Added notes about 'Running DLL based configurations'
  
  ...as well as a TODO for a future enhancement to the project files.
  
  Thanks-to: Jay Satiro

- RELEASE-NOTES: Synced with cf8975387f

- buildconf.bat: Synchronise no repository error with generate.bat

- generate.bat: Added a check for the presence of a git repository

- [Jay Satiro brought this change]

  build: Added wolfSSL configurations to VC10+ project files
  
  URL: https://github.com/bagder/curl/pull/174

- [Jay Satiro brought this change]

  build: Added wolfSSL build script for Visual Studio projects
  
  Added the wolfSSL build script, based on build-openssl.bat, as well as
  the property sheet and header file required for the upcoming additions
  to the Visual Studio project files.

Daniel Stenberg (6 Aug 2015)
- CHANGES: refer to the online changelog
  
  Suggested-by: mc0e

- [Isaac Boukris brought this change]

  NTLM: handle auth for only a single request
  
  Currently when the server responds with 401 on NTLM authenticated
  connection (re-used) we consider it to have failed.  However this is
  legitimate and may happen when for example IIS is set configured to
  'authPersistSingleRequest' or when the request goes thru a proxy (with
  'via' header).
  
  Implemented by imploying an additional state once a connection is
  re-used to indicate that if we receive 401 we need to restart
  authentication.
  
  Closes #363

Steve Holme (5 Aug 2015)
- RELEASE-NOTES: Synced with 473807b95f

- generate.bat: Use buildconf.bat for prerequisite file clean-up

- buildconf.bat: Added support for file clean-up via -clean

- buildconf.bat: Added progress output

- buildconf.bat: Avoid using goto for file not in repository

Daniel Stenberg (5 Aug 2015)
- curl_slist_append.3: add error checking to the example

Steve Holme (5 Aug 2015)
- buildconf.bat: Added display of usage text with -help

- buildconf.bat: Added exit codes for error handling

- buildconf.bat: Added our standard copyright header

- buildconf.bat: Use lower-case for commands and reserved keywords

- generate.bat: Only clean prerequisite files when in ALL mode

- generate.bat: Moved error messages out of sub-routines

- generate.bat: More use of lower-case for commands and reserved keywords

Daniel Stenberg (3 Aug 2015)
- libcurl.3: fix a single typo
  
  Closes #361

- RELEASE-NOTES: synced with c4eb10e2f06f

- SSH: three state machine fixups
  
  The SSH state machine didn't clear the 'rc' variable appropriately in a
  two places which prevented it from looping the way it should. And it
  lacked an 'else' statement that made it possible to erroneously get
  stuck in the SSH_AUTH_AGENT state.
  
  Reported-by: Tim Stack
  
  Closes #357

- curl_gssapi: remove 'const' to fix compiler warnings
  
  initialization discards 'const' qualifier from pointer target type

- docs: formpost needs the full size at start of upload
  
  Closes #360

Steve Holme (1 Aug 2015)
- sspi: Fix typo from left over from old code which referenced NTLM
  
  References to NTLM in the identity generation should have been removed
  in commit c469941293 but not all were.

- win32: Fix compilation warnings from commit 40c921f8b8
  
  connect.c:953:5: warning: initializer element is not computable at load
                   time
  connect.c:953:5: warning: missing initializer for field 'dwMinorVersion'
                   of 'OSVERSIONINFOEX'
  curl_sspi.c:97:5: warning: initializer element is not computable at load
                    time
  curl_sspi.c:97:5: warning: missing initializer for field 'szCSDVersion'
                    of 'OSVERSIONINFOEX'

- schannel: Fix compilation warning from commit 7a8e861a56
  
  schannel.c:1125:5: warning: missing initializer for field 'dwMinorVersion'
                     of 'OSVERSIONINFOEX' [-Wmissing-field-initializers

Daniel Stenberg (31 Jul 2015)
- libcurl-thread.3: minor reformatting

Jay Satiro (31 Jul 2015)
- curl_global_init_mem.3: Warn threaded resolver needs thread safe funcs
  
  Bug: http://curl.haxx.se/mail/lib-2015-07/0149.html
  Reported-by: Eric Ridge

- libcurl-thread.3: Warn memory functions must be thread safe
  
  Bug: http://curl.haxx.se/mail/lib-2015-07/0149.html
  Reported-by: Eric Ridge

Steve Holme (31 Jul 2015)
- RELEASE-NOTES: Synced with 8b1d00ac1a

- INSTALL: Minor formatting correction in 'Legacy Windows and SSL' section
  
  ...as well as some rewording.

Kamil Dudka (30 Jul 2015)
- http: move HTTP/2 cleanup code off http_disconnect()
  
  Otherwise it would never be called for an HTTP/2 connection, which has
  its own disconnect handler.
  
  I spotted this while debugging <https://bugzilla.redhat.com/1248389>
  where the http_disconnect() handler was called on an FTP session handle
  causing 'dnf' to crash.  conn->data->req.protop of type (struct FTP *)
  was reinterpreted as type (struct HTTP *) which resulted in SIGSEGV in
  Curl_add_buffer_free() after printing the "Connection cache is full,
  closing the oldest one." message.
  
  A previously working version of libcurl started to crash after it was
  recompiled with the HTTP/2 support despite the HTTP/2 protocol was not
  actually used.  This commit makes it work again although I suspect the
  root cause (reinterpreting session handle data of incompatible protocol)
  still has to be fixed.  Otherwise the same will happen when mixing FTP
  and HTTP/2 connections and exceeding the connection cache limit.
  
  Reported-by: Tomas Tomecek
  Bug: https://bugzilla.redhat.com/1248389

Daniel Stenberg (30 Jul 2015)
- [Viktor Szakats brought this change]

  ABI doc: use secure URL

- ABI: remove the ascii logo
  
  and made the indent level to 1

- libcurl-multi.3: mention curl_multi_wait
  
  ... and some general rewordings to improve this docs.
  
  Reported-by: Tim Stack
  
  Closes #356

Steve Holme (30 Jul 2015)
- maketgz: Fixed some VC makefiles missing from the release tarball
  
  VC7, VC11, VC12 and VC14 makefiles were missing from the release
  tarball.

- RELEASE-NOTES: Synced with 2d7e165761

- build: Added VC14 project files to Makefile.am

- build: Added VC14 project files
  
  Updates to Makefile.am for the generation of the project files in
  the tarball to follow.

Jay Satiro (29 Jul 2015)
- libcurl-thread.3: Clarify CURLOPT_NOSIGNAL takes long value 1L

Steve Holme (28 Jul 2015)
- generate.bat: Use lower-case for commands and reserved keywords
  
  Whilst there are no coding standards for the batch files used in curl,
  most tend to use lower-case for keywords and upper-case for variables.

- build: Added initial VC14 support to generate.bat
  
  Visual Studio project files and updates to makefile.am to follow.

- build: Fixed missing .opensdf files from VC10+ .gitignore files

- build: Use $(ProjectName) macro for curl.exe and curld.exe filenames
  
  This wasn't possible with the old curlsrc project filenames, but like
  commit 2a615a2b64 and 11397eb6dd for libcurl use the built in Visual
  Studio macros for the output filenames.

- build: Renamed curl src Visual Studio project files
  
  Following commit 957fcd9049 and in preparation for adding the VC14
  project files renamed the curl source project files.

Daniel Stenberg (28 Jul 2015)
- [Jay Satiro brought this change]

  libcurl-thread.3: Revert to stricter handle wording
  
  .. also update formatting and add WinSSL and wolfSSL to the SSL/TLS
  handlers list.

- [Jay Satiro brought this change]

  libcurl-thread.3: Consolidate thread safety info
  
  This is a new document to consolidate our thread safety information from
  several documents (curl-www:features, libcurl.3, libcurl-tutorial.3).
  Each document's section on multi-threading will now point to this one.

Steve Holme (27 Jul 2015)
- README: Corrected formatting for 'Legacy Windows and SSL' section
  
  ...as well as some wording.

- build-openssl.bat: Added support for VC14

Daniel Stenberg (26 Jul 2015)
- RELEASE-NOTES: synced with 0f645adc95390e8

- test1902: attempt to make the test more reliable
  
  Closes #355

- comment: fix comment about adding new option support

Jay Satiro (25 Jul 2015)
- build-openssl.bat: Show syntax if required args are missing

Daniel Stenberg (26 Jul 2015)
- TODO: improve how curl works in a windows console window
  
  Closes #322 for now

- 1.11 minimize dependencies with dynamicly loaded modules
  
  Closes #349 for now

Jay Satiro (25 Jul 2015)
- tool_operate: Fix CURLOPT_SSL_OPTIONS for builds without HTTPS
  
  - Set CURLOPT_SSL_OPTIONS only if the tool enabled an SSL option.
  
  Broken by me several days ago in 172b2be.
  https://github.com/bagder/curl/commit/172b2be#diff-70b44ee478e58d4e1ddcf9c9a73d257b
  
  Bug: http://curl.haxx.se/mail/lib-2015-07/0119.html
  Reported-by: Dan Fandrich

Daniel Stenberg (25 Jul 2015)
- configure: check if OpenSSL linking wants -ldl
  
  To make it easier to link with static versions of OpenSSL, the configure
  script now checks if -ldl is needed for linking.
  
  Help-by: TJ Saunders

- [Michael Kaufmann brought this change]

  HTTP: ignore "Content-Encoding: compress"
  
  Currently, libcurl rejects responses with "Content-Encoding: compress"
  when CURLOPT_ACCEPT_ENCODING is set to "". I think that libcurl should
  treat the Content-Encoding "compress" the same as other
  Content-Encodings that it does not support, e.g. "bzip2". That means
  just ignoring it.

- [Marcel Raad brought this change]

  openssl: work around MSVC warning
  
  MSVC 12 complains:
  
  lib\vtls\openssl.c(1554): warning C4701: potentially uninitialized local
  variable 'verstr' used It's a false positive, but as it's normally not,
  I have enabled warning-as-error for that warning.

- [Michał Fita brought this change]

  configure: add --disable-rt option
  
  This option disables any attempts in configure to create dependency on
  stuff requiring linking to librt.so and libpthread.so, in this case this
  means clock_gettime(CLOCK_MONOTONIC, &mt).
  
  We were in need to build curl which doesn't link libpthread.so to avoid
  the following bug:
  https://sourceware.org/bugzilla/show_bug.cgi?id=16628.

Kamil Dudka (23 Jul 2015)
- http2: verify success of strchr() in http2_send()
  
  Detected by Coverity.
  
  Error: NULL_RETURNS:
  lib/http2.c:1301: returned_null: "strchr" returns null (checked 103 out of 109 times).
  lib/http2.c:1301: var_assigned: Assigning: "hdbuf" = null return value from "strchr".
  lib/http2.c:1302: dereference: Incrementing a pointer which might be null: "hdbuf".
  1300|
  1301|     hdbuf = strchr(hdbuf, 0x0a);
  1302|->   ++hdbuf;
  1303|
  1304|     authority_idx = 0;

Jay Satiro (22 Jul 2015)
- Windows: Fix VerifyVersionInfo calls
  
  - Fix the VerifyVersionInfo calls, which we use to test for the OS major
  version, to also test for the minor version as well as the service pack
  major and minor versions.
  
  MSDN: "If you are testing the major version, you must also test the
  minor version and the service pack major and minor versions."
  
  https://msdn.microsoft.com/en-us/library/windows/desktop/ms725492.aspx
  
  Bug: https://github.com/bagder/curl/pull/353#issuecomment-123493098
  Reported-by: Marcel Raad <MarcelRaad@users.noreply.github.com>

- [Marcel Raad brought this change]

  schannel: Replace deprecated GetVersion with VerifyVersionInfo

Steve Holme (21 Jul 2015)
- makefile: Added support for VC14

Patrick Monnerat (21 Jul 2015)
- os400: ebcdic wrappers for new functions. Upgrade ILE/RPG bindings.

- libcurl: VERSIONINFO update
  Addition of new procedures curl_pushheader_bynum and curl_pushheader_byname
  requires VERSIONINFO updating.

- http2: satisfy external references even if http2 is not compiled in.

Daniel Stenberg (20 Jul 2015)
- http2: add stream != NULL checks for reliability
  
  They should not trigger, but in case of internal problems we at least
  avoid crashes this way.

Jay Satiro (18 Jul 2015)
- symbols-in-versions: Add new CURLSSLOPT_NO_REVOKE symbol

- SSL: Add an option to disable certificate revocation checks
  
  New tool option --ssl-no-revoke.
  New value CURLSSLOPT_NO_REVOKE for CURLOPT_SSL_OPTIONS.
  
  Currently this option applies only to WinSSL where we have automatic
  certificate revocation checking by default. According to the
  ssl-compared chart there are other backends that have automatic checking
  (NSS, wolfSSL and DarwinSSL) so we could possibly accommodate them at
  some later point.
  
  Bug: https://github.com/bagder/curl/issues/264
  Reported-by: zenden2k <zenden2k@gmail.com>

- runtests: Allow for spaces in curl custom path
  
  .. also fix some typos in test's FILEFORMAT spec.

- [David Woodhouse brought this change]

  ntlm_wb: Fix theoretical memory leak
  
  Static analysis indicated that my commit 9008f3d564 ("ntlm_wb: Fix
  hard-coded limit on NTLM auth packet size") introduced a potential
  memory leak on an error path, because we forget to free the buffer
  before returning an error.
  
  Fix this.
  
  Although actually, it never happens in practice because we never *get*
  here with state == NTLMSTATE_TYPE1. The state is always zero. That
  might want cleaning up in a separate patch.
  
  Reported-by: Terri Oda

- strerror: Add CRYPT_E_REVOKED to SSPI error strings

Kamil Dudka (14 Jul 2015)
- libtest: call PR_Cleanup() on exit if NSPR is used
  
  This prevents valgrind from reporting possibly lost memory that NSPR
  uses for file descriptor cache and other globally allocated internal
  data structures.
  
  Reported-by: Štefan Kremeň

Jay Satiro (14 Jul 2015)
- [John Malmberg brought this change]

  openssl: VMS support for SHA256
  
  setup-vms.h: More symbols for SHA256, hacks for older VAX
  
  openssl.h: Use OpenSSL OPENSSL_NO_SHA256 macro to allow building on VAX.
  
  openssl.c: Use OpenSSL version checks and OPENSSL_NO_SHA256 macro to
  allow building on VAX and 64 bit VMS.

- examples: Fix typo in multi-single.c

Daniel Stenberg (7 Jul 2015)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix memory leak in push header array

Dan Fandrich (2 Jul 2015)
- test2041: fixed line endings in protocol part

- cyassl: fixed mismatched sha256sum function prototype

Daniel Stenberg (1 Jul 2015)
- [moparisthebest brought this change]

  SSL: Pinned public key hash support

- examples: provide <DESC> sections

- [John Malmberg brought this change]

  OpenVMS: VMS Software, Inc now the supplier.
  
  setup-vms.h: Symbol case fixups submitted by Michael Steve
  
  build_gnv_curl_pcsi_desc.com: VSI aka as VMS Software, is now the
  supplier of new versions of VMS.  The install kit needs to accept
  VSI as a producer.

Jay Satiro (30 Jun 2015)
- multi: Move http2 push function declarations to header end
  
  This change necessary for binary compatibility.
  
  Prior to this change test 1135 failed due to the order of functions.

- symbols-in-versions: Add new http2 push symbols
  
  Prior to this change test 1119 failed due to the missing symbols.

Daniel Stenberg (30 Jun 2015)
- RELEASE-NOTES: synced with e6749055d653

- configure: disable libidn by default
  
  For security reasons, until there is a fix.
  
  Bug: http://curl.haxx.se/mail/lib-2015-06/0143.html
  Reported-by: Gustavo Grieco, Feist Josselin

- SSL-PROBLEMS: mention WinSSL problems in WinXP

- CODE_OF_CONDUCT.md: added
  
  Just to underscore how we treat each other in this project. Nothing new
  really, but could be useful for newcomers and outsiders to see our
  values.

- tool_header_cb: fflush the header stream
  
  Flush the header stream when -D is used so that they are sent off
  earlier.
  
  Bug: https://github.com/bagder/curl/issues/324
  Reported-by: Cédric Connes

- [Roger Leigh brought this change]

  tests: Distribute CMakeLists.txt files in subdirectories

- CURLOPT_FAILONERROR.3: mention that it closes the connection
  
  Reported-by: bemoody
  Bug: https://github.com/bagder/curl/issues/325

- curl_multi_setopt.3: alpha sort the options

- curl_multi_setopt.3: add the new push options

- [Tatsuhiro Tsujikawa brought this change]

  http2: Use nghttp2 library error code for error return value

- [Tatsuhiro Tsujikawa brought this change]

  http2: Harden header validation for curl_pushheader_byname
  
  Since we do prefix match using given header by application code
  against header name pair in format "NAME:VALUE", and VALUE part can
  contain ":", we have to careful about existence of ":" in header
  parameter.  ":" should be allowed to match HTTP/2 pseudo-header field,
  and other use of ":" in header must be treated as error, and
  curl_pushheader_byname should return NULL.  This commit implements
  this behaviour.

- [Tatsuhiro Tsujikawa brought this change]

  CURLMOPT_PUSHFUNCTION.3: Remove unused variable

- CURLMOPT_PUSHFUNCTION.3: added example

- http2: curl_pushheader_byname now takes a const char *

- http2-serverpush.c: example code

- http2: free all header memory after the push callback

- http2: init the pushed transfer properly

- http2: fixed the header accessor functions for the push callback

- http2: setup the new pushed stream properly

- http2: initial implementation of the push callback

- http2: initial HTTP/2 server push types/docs

- test1531: verify POSTFIELDSIZE set after add_handle
  
  Following the fix made in 903b6e05565bf.

- pretransfer: init state.infilesize here, not in add_handle
  
  ... to properly support that options are set to the handle after it is
  added to the multi handle.
  
  Bug: http://curl.haxx.se/mail/lib-2015-06/0122.html
  Reported-by: Stefan Bühler

Jay Satiro (21 Jun 2015)
- [Lior Kaplan brought this change]

  tool_help: fix --tlsv1 help text to use >= for TLSv1

- INSTALL: Advise use of non-native SSL for Windows <= XP
  
  Advise that WinSSL in versions <= XP will not be able to connect to
  servers that no longer support the legacy handshakes and algorithms used
  by those versions, and to use an alternate backend like OpenSSL instead.
  
  Bug: https://github.com/bagder/curl/issues/253
  Reported-by: zenden2k <zenden2k@gmail.com>

Kamil Dudka (19 Jun 2015)
- curl_easy_setopt.3: restore contents removed by mistake
  
  ... in commit curl-7_43_0-18-g570076e

Daniel Stenberg (19 Jun 2015)
- curl_easy_setopt.3: mention CURLOPT_PIPEWAIT

Jay Satiro (18 Jun 2015)
- cookie: Fix bug in export if any-domain cookie is present
  
  In 3013bb6 I had changed cookie export to ignore any-domain cookies,
  however the logic I used to do so was incorrect, and would lead to a
  busy loop in the case of exporting a cookie list that contained
  any-domain cookies. The result of that is worse though, because in that
  case the other cookies would not be written resulting in an empty file
  once the application is terminated to stop the busy loop.

Dan Fandrich (18 Jun 2015)
- FTP: fixed compiling with --disable-proxy, broken in b88f980a

Daniel Stenberg (18 Jun 2015)
- tool: always provide negotiate/kerberos options
  
  libcurl can still be built with it, even if the tool is not. Maintain
  independence!

- TODO: Support IDNA2008

- [Viktor Szakats brought this change]

  Makefile.m32: add support for CURL_LDFLAG_EXTRAS
  
  It is similar to existing CURL_CFLAG_EXTRAS, but for
  extra linker option.

- RTSP: removed another piece of dead code
  
  Coverity CID 1306668

- openssl: fix use of uninitialized buffer
  
  Make sure that the error buffer is always initialized and simplify the
  use of it to make the logic easier.
  
  Bug: https://github.com/bagder/curl/issues/318
  Reported-by: sneis

- examples: more descriptions

- examples: add descriptions with <DESC>
  
  Using this fixed format for example descriptions, we can generate a
  better list on the web site.

- libcurl-errors.3: fix typo

- curl_easy_setopt.3: option order doesn't matter

- openssl: fix build with BoringSSL
  
  OPENSSL_load_builtin_modules does not exist in BoringSSL. Regression
  from cae43a1

- [Paul Howarth brought this change]

  openssl: Fix build with openssl < ~ 0.9.8f
  
  The symbol SSL3_MT_NEWSESSION_TICKET appears to have been introduced at
  around openssl 0.9.8f, and the use of it in lib/vtls/openssl.c breaks
  builds with older openssls (certainly with 0.9.8b, which is the latest
  older version I have to try with).

- FTP: do the HTTP CONNECT for data connection blocking
  
  ** WORK-AROUND **
  
  The introduced non-blocking general behaviour for Curl_proxyCONNECT()
  didn't work for the data connection establishment unless it was very
  fast. The newly introduced function argument makes it operate in a more
  blocking manner, more like it used to work in the past. This blocking
  approach is only used when the FTP data connecting through HTTP proxy.
  
  Blocking like this is bad. A better fix would make it work more
  asynchronously.
  
  Bug: https://github.com/bagder/curl/issues/278

- bump: start the journey toward 7.44.0

Jay Satiro (17 Jun 2015)
- CURLOPT_ERRORBUFFER.3: Fix example, escape backslashes

- CURLOPT_ERRORBUFFER.3: Improve example

Version 7.43.0 (17 Jun 2015)

Daniel Stenberg (17 Jun 2015)
- RELEASE-NOTES: 7.43.0 release

- THANKS: updated with 7.43.0 names

- [Kamil Dudka brought this change]

  http: do not leak basic auth credentials on re-used connections
  
  CVE-2015-3236
  
  This partially reverts commit curl-7_39_0-237-g87c4abb
  
  Reported-by: Tomas Tomecek, Kamil Dudka
  Bug: http://curl.haxx.se/docs/adv_20150617A.html

- [Kamil Dudka brought this change]

  test2040: verify basic auth on re-used connections

- SMB: rangecheck values read off incoming packet
  
  CVE-2015-3237
  
  Detected by Coverity. CID 1299430.
  
  Bug: http://curl.haxx.se/docs/adv_20150617B.html

Jay Satiro (17 Jun 2015)
- schannel: schannel_recv overhaul
  
  This commit is several drafts squashed together. The changes from each
  draft are noted below. If any changes are similar and possibly
  contradictory the change in the latest draft takes precedence.
  
  Bug: https://github.com/bagder/curl/issues/244
  Reported-by: Chris Araman
  
  %%
  %% Draft 1
  %%
  - return 0 if len == 0. that will have to be documented.
  - continue on and process the caches regardless of raw recv
  - if decrypted data will be returned then set the error code to CURLE_OK
  and return its count
  - if decrypted data will not be returned and the connection has closed
  (eg nread == 0) then return 0 and CURLE_OK
  - if decrypted data will not be returned and the connection *hasn't*
  closed then set the error code to CURLE_AGAIN --only if an error code
  isn't already set-- and return -1
  - narrow the Win2k workaround to only Win2k
  
  %%
  %% Draft 2
  %%
  - Trying out a change in flow to handle corner cases.
  
  %%
  %% Draft 3
  %%
  - Back out the lazier decryption change made in draft2.
  
  %%
  %% Draft 4
  %%
  - Some formatting and branching changes
  - Decrypt all encrypted cached data when len == 0
  - Save connection closed state
  - Change special Win2k check to use connection closed state
  
  %%
  %% Draft 5
  %%
  - Default to CURLE_AGAIN in cleanup if an error code wasn't set and the
  connection isn't closed.
  
  %%
  %% Draft 6
  %%
  - Save the last error only if it is an unrecoverable error.
  
  Prior to this I saved the last error state in all cases; unfortunately
  the logic to cover that in all cases would lead to some muddle and I'm
  concerned that could then lead to a bug in the future so I've replaced
  it by only recording an unrecoverable error and that state will persist.
  
  - Do not recurse on renegotiation.
  
  Instead we'll continue on to process any trailing encrypted data
  received during the renegotiation only.
  
  - Move the err checks in cleanup after the check for decrypted data.
  
  In either case decrypted data is always returned but I think it's easier
  to understand when those err checks come after the decrypted data check.
  
  %%
  %% Draft 7
  %%
  - Regardless of len value go directly to cleanup if there is an
  unrecoverable error or a close_notify was already received. Prior to
  this change we only acknowledged those two states if len != 0.
  
  - Fix a bug in connection closed behavior: Set the error state in the
  cleanup, because we don't know for sure it's an error until that time.
  
  - (Related to above) In the case the connection is closed go "greedy"
  with the decryption to make sure all remaining encrypted data has been
  decrypted even if it is not needed at that time by the caller. This is
  necessary because we can only tell if the connection closed gracefully
  (close_notify) once all encrypted data has been decrypted.
  
  - Do not renegotiate when an unrecoverable error is pending.
  
  %%
  %% Draft 8
  %%
  - Don't show 'server closed the connection' info message twice.
  
  - Show an info message if server closed abruptly (missing close_notify).

Daniel Stenberg (16 Jun 2015)
- [Paul Oliver brought this change]

  Fix typo in docs
  
  s/curret/current/

- [Viktor Szakats brought this change]

  docs: update URLs

- RELEASE-NOTES: synced with f29f2cbd00dbe5f

- [Viktor Szakats brought this change]

  README: use secure protocol for Git repository

- [Viktor Szakats brought this change]

  HTTP2.md: use SSL/TLS IETF URLs

- [Viktor Szakats brought this change]

  LICENSE-MIXING: update URLs
  
  * use SSL/TLS where available
  * follow permanent redirects

- LICENSE-MIXING: refreshed

- curl_easy_duphandle: see also *reset

- rtsp_do: fix DEAD CODE
  
  "At condition p_request, the value of p_request cannot be NULL."
  
  Coverity CID 1306668.

- security:choose_mech fix DEAD CODE warning
  
  ... by removing the "do {} while (0)" block.
  
  Coverity CID 1306669

- curl.1: netrc is in man section 5

- curl.1: small format fix
  
  use \fI-style instead of .BR for references

- urldata: store POST size in state.infilesize too
  
  ... to simplify checking when PUT _or_ POST have completed.
  
  Reported-by: Frank Meier
  Bug: http://curl.haxx.se/mail/lib-2015-06/0019.html

Dan Fandrich (14 Jun 2015)
- test1530: added http to required features

Jay Satiro (14 Jun 2015)
- [Drake Arconis brought this change]

  build: Fix typo from OpenSSL 1.0.2 version detection fix

- [Drake Arconis brought this change]

  build: Properly detect OpenSSL 1.0.2 when using configure

- curl_multi_info_read.3: fix example formatting

Daniel Stenberg (13 Jun 2015)
- BINDINGS: there's a new R binding in town!

- BINDINGS: added the Xojo binding

Jay Satiro (11 Jun 2015)
- [Joel Depooter brought this change]

  schannel: Add support for optional client certificates
  
  Some servers will request a client certificate, but not require one.
  This change allows libcurl to connect to such servers when using
  schannel as its ssl/tls backend. When a server requests a client
  certificate, libcurl will now continue the handshake without one,
  rather than terminating the handshake. The server can then decide
  if that is acceptable or not. Prior to this change, libcurl would
  terminate the handshake, reporting a SEC_I_INCOMPLETE_CREDENTIALS
  error.

Daniel Stenberg (11 Jun 2015)
- curl_easy_cleanup.3: provide more SEE ALSO

- debug: remove http2 debug leftovers

- VERSIONS: now using markdown

- RELEASE-PROCEDURE: remove ascii logo at the top of file

- INTERNALS: absorbed docs/LIBCURL-STRUCTS

- INTERNALS: cat lib/README* >> INTERNALS
  
  and a conversion to markdown. Removed the lib/README.* files. The idea
  being to move toward having INTERNALS as the one and only "book" of
  internals documentation.
  
  Added a TOC to top of the document.

Jay Satiro (8 Jun 2015)
- openssl: LibreSSL and BoringSSL do not use TLS_client_method
  
  Although OpenSSL 1.1.0+ deprecated SSLv23_client_method in favor of
  TLS_client_method LibreSSL and BoringSSL didn't and still use
  SSLv23_client_method.
  
  Bug: https://github.com/bagder/curl/commit/49a6642#commitcomment-11578009
  Reported-by: asavah@users.noreply.github.com

Daniel Stenberg (9 Jun 2015)
- RELEASE-NOTES: synced with 20ac3458068

- CURLOPT_OPENSOCKETFUNCTION: return error at once
  
  When CURL_SOCKET_BAD is returned in the callback, it should be treated
  as an error (CURLE_COULDNT_CONNECT) if no other socket is subsequently
  created when trying to connect to a server.
  
  Bug: http://curl.haxx.se/mail/lib-2015-06/0047.html

- fopen.c: fix a few compiler warnings

- [Ville Skyttä brought this change]

  docs: Spelling fixes

- [Ville Skyttä brought this change]

  docs: man page indentation and syntax fixes

Linus Nielsen (8 Jun 2015)
- help: Add --proxy-service-name and --service-name to the --help output

Jay Satiro (7 Jun 2015)
- openssl: Fix verification of server-sent legacy intermediates
  
  - Try building a chain using issuers in the trusted store first to avoid
  problems with server-sent legacy intermediates.
  
  Prior to this change server-sent legacy intermediates with missing
  legacy issuers would cause verification to fail even if the client's CA
  bundle contained a valid replacement for the intermediate and an
  alternate chain could be constructed that would verify successfully.
  
  https://rt.openssl.org/Ticket/Display.html?id=3621&user=guest&pass=guest

Daniel Stenberg (5 Jun 2015)
- BINDINGS: update several URLs
  
  Stop linking to the curl.haxx.se anchor pages, they are usually only
  themselves pointers to the real page so better point there directly
  instead.

- BINDINGS: the curl-rust binding

- curl.h: add CURL_HTTP_VERSION_2
  
  The protocol is named "HTTP/2" after all. It is an alias for the
  existing CURL_HTTP_VERSION_2_0 enum.

- openssl: removed error string #ifdef
  
  ERR_error_string_n() was introduced in 0.9.6, no need to #ifdef anymore

- openssl: removed USERDATA_IN_PWD_CALLBACK kludge
  
  Code for OpenSSL 0.9.4 serves no purpose anymore!

- openssl: remove SSL_get_session()-using code
  
  It was present for OpenSSL 0.9.5 code but we only support 0.9.7 or
  later.

- openssl: remove dummy callback use from SSL_CTX_set_verify()
  
  The existing callback served no purpose.

- LIBCURL-STRUCTS: clarify for multiplexing

Jay Satiro (3 Jun 2015)
- cookie: Stop exporting any-domain cookies
  
  Prior to this change any-domain cookies (cookies without a domain that
  are sent to any domain) were exported with domain name "unknown".
  
  Bug: https://github.com/bagder/curl/issues/292

Daniel Stenberg (3 Jun 2015)
- RELEASE-PROCEDURE: refreshed 'coming dates'

Jay Satiro (2 Jun 2015)
- curl_setup: Change fopen text macros to use 't' for MSDOS
  
  Bug: https://github.com/bagder/curl/pull/258#issuecomment-107915198
  Reported-by: Gisle Vanem

Daniel Stenberg (2 Jun 2015)
- curl_multi_timeout.3: added example

- curl_multi_perform.3: added example

- curl_multi_info_read.3: added example

- checksrc: detect fopen() for text without the FOPEN_* macros
  
  Follow-up to e8423f9ce150 with discussionis in
  https://github.com/bagder/curl/pull/258
  
  This check scans for fopen() with a mode string without 'b' present, as
  it may indicate that an FOPEN_* define should rather be used.

- curl_getdate.3: update RFC reference

Jay Satiro (1 Jun 2015)
- curl_setup: Add macros for FOPEN_READTEXT, FOPEN_WRITETEXT
  
  - Change fopen calls to use FOPEN_READTEXT instead of "r" or "rt"
  - Change fopen calls to use FOPEN_WRITETEXT instead of "w" or "wt"
  
  This change is to explicitly specify when we need to read/write text.
  Unfortunately 't' is not part of POSIX fopen so we can't specify it
  directly. Instead we now have FOPEN_READTEXT, FOPEN_WRITETEXT.
  
  Prior to this change we had an issue on Windows if an application that
  uses libcurl overrides the default file mode to binary. The default file
  mode in Windows is normally text mode (translation mode) and that's what
  libcurl expects.
  
  Bug: https://github.com/bagder/curl/pull/258#issuecomment-107093055
  Reported-by: Orgad Shaneh

Daniel Stenberg (1 Jun 2015)
- http2-upload.c: use PIPEWAIT for playing HTTP/2 better

- http2-download: check for CURLPIPE_MULTIPLEX properly
  
  Bug: http://curl.haxx.se/mail/lib-2015-06/0001.html
  Reported-by: Rafayel Mkrtchyan

- [Isaac Boukris brought this change]

  HTTP-NTLM: fail auth on connection close instead of looping
  
  Bug: https://github.com/bagder/curl/issues/256

- 5.6 Refuse "downgrade" redirects

- README.pingpong: removed

- ROADMAP: remove HTTP/2 multiplexing - its here now

- HTTP2.md: formatted properly

- HTTP2: moved docs into docs/ and make it markdown

- README.http2: refreshed and added multiplexing info

- dist: add the http2 examples

- http2 examples: clean up some comments

- examples: added two programs doing multiplexed HTTP/2

- scripts: moved contributors.sh and contrithanks.sh into subdir

- RELEASE-NOTES: synced with c005790ff1c0a

- [Daniel Melani brought this change]

  openssl: typo in comment

Jay Satiro (27 May 2015)
- openssl: Use TLS_client_method for OpenSSL 1.1.0+
  
  SSLv23_client_method is deprecated starting in OpenSSL 1.1.0. The
  equivalent is TLS_client_method.
  
  https://github.com/openssl/openssl/commit/13c9bb3#diff-708d3ae0f2c2973b272b811315381557

Daniel Stenberg (26 May 2015)
- FAQ: How do I port libcurl to my OS?

Jay Satiro (25 May 2015)
- CURLOPT_COOKIELIST.3: Explain Set-Cookie without a domain
  
  Document that if Set-Cookie is used without a domain then the cookie is
  sent for any domain and will not be modified.
  
  Bug: http://curl.haxx.se/mail/lib-2015-05/0137.html
  Reported-by: Alexander Dyagilev

Daniel Stenberg (25 May 2015)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Copy data passed in Curl_http2_switched into HTTP/2 connection buffer
  
  Previously, after seeing upgrade to HTTP/2, we feed data followed by
  upgrade response headers directly to nghttp2_session_mem_recv() in
  Curl_http2_switched().  But it turns out that passed buffer, mem, is
  part of stream->mem, and callbacks called by
  nghttp2_session_mem_recv() will write stream specific data into
  stream->mem, overwriting input data.  This will corrupt input, and
  most likely frame length error is detected by nghttp2 library.  The
  fix is first copy the passed data to HTTP/2 connection buffer,
  httpc->inbuf, and call nghttp2_session_mem_recv().

Jay Satiro (24 May 2015)
- CURLOPT_COOKIE.3: Explain that the cookies won't be modified
  
  The CURLOPT_COOKIE doc says it "sets the cookie header explicitly in the
  outgoing request(s)." However there seems to be some user confusion
  about cookie modification. Document that the cookies set by this option
  are not modified by the cookie engine.
  
  Bug: http://curl.haxx.se/mail/lib-2015-05/0115.html
  Reported-by: Alexander Dyagilev

- CURLOPT_COOKIELIST.3: Add example

Dan Fandrich (24 May 2015)
- testcurl.pl: use rel2abs to make the source directory absolute
  
  This function makes a platform-specific absolute path which uses
  backslashes on Windows. This form works when passing it on the
  command-line, as well as if the source is on another drive.

- conncache: fixed memory leak on OOM (torture tests)

Daniel Stenberg (24 May 2015)
- perl: remove subdir, not touched in 9 years

- log2changes.pl: moved to scripts/

- [Alessandro Ghedini brought this change]

  scripts: add zsh.pl for generating zsh completion

Dan Fandrich (23 May 2015)
- test1510: another flaky test

Daniel Stenberg (22 May 2015)
- security: fix "Unchecked return value" from sscanf()
  
  By (void) prefixing it and adding a comment. Did some minor related
  cleanups.
  
  Coverity CID 1299423.

- security: simplify choose_mech
  
  Coverity CID 1299424 identified dead code because of checks that could
  never equal true (if the mechanism's name was NULL).
  
  Simplified the function by removing a level of pointers and removing the
  loop and array that weren't used.

- RTSP: catch attempted unsupported requests better
  
  Replace use of assert with code that properly catches bad input at
  run-time even in non-debug builds.
  
  This flaw was sort of detected by Coverity CID 1299425 which claimed the
  "case RTSPREQ_NONE" was dead code.

- share_init: fix OOM crash
  
  A failed calloc() would lead to NULL pointer use.
  
  Coverity CID 1299427.

- parse_proxy: switch off tunneling if non-HTTP proxy
  
  non-HTTP proxy implies not using CURLOPT_HTTPPROXYTUNNEL
  
  Bug: http://curl.haxx.se/mail/lib-2015-05/0056.html
  Reported-by: Sean Boudreau

- curl: fix potential NULL dereference
  
  Coverity CID 1299428: Dereference after null check (FORWARD_NULL)

- http2: on_frame_recv: return early on stream 0
  
  Coverity CID 1299426 warned about possible NULL dereference otherwise,
  but that would only ever happen if we get invalid HTTP/2 data with
  frames for stream 0. Avoid this risk by returning early when stream 0 is
  used.

- http: removed self assignment
  
  Follow-up fix from b0143a2a33f0
  
  Detected by coverity. CID 1299429

- [Tatsuhiro Tsujikawa brought this change]

  http2: Make HTTP Upgrade work
  
  This commit just add implicitly opened stream 1 to streams hash.

Jay Satiro (22 May 2015)
- strerror: Change SEC_E_ILLEGAL_MESSAGE description
  
  Prior to this change the description for SEC_E_ILLEGAL_MESSAGE was OS
  and language specific, and invariably translated to something not very
  helpful like: "The message received was unexpected or badly formatted."
  
  Bug: https://github.com/bagder/curl/issues/267
  Reported-by: Michael Osipov

- telnet: Fix read-callback change for Windows builds
  
  Refer to b0143a2 for more information on the read-callback change.

Daniel Stenberg (21 May 2015)
- CURLOPT_HTTPPROXYTUNNEL.3: only works with a HTTP proxy!

Dan Fandrich (21 May 2015)
- testcurl.pl: allow source to be in an arbitrary directory
  
  This way, the build directory can be located on an entirely different
  filesystem from the source code (e.g. a tmpfs).

Daniel Stenberg (20 May 2015)
- read_callback: move to SessionHandle from connectdata
  
  With many easy handles using the same connection for multiplexing, it is
  important we store and keep the transfer-oriented stuff in the
  SessionHandle so that callbacks and callback data work fine even when
  many easy handles share the same physical connection.

- http2: show stream IDs in decimal
  
  It makes them easier to match output from the nghttpd test server.

- [Tatsuhiro Tsujikawa brought this change]

  http2: Faster http2 upload
  
  Previously, when we send all given buffer in data_source_callback, we
  return NGHTTP2_ERR_DEFERRED, and nghttp2 library removes this stream
  temporarily for writing.  This itself is good.  If this is the sole
  stream in the session, nghttp2_session_want_write() returns zero,
  which means that libcurl does not check writeability of the underlying
  socket.  This leads to very slow upload, because it seems curl only
  upload 16k something per 1 second.  To fix this, if we still have data
  to send, call nghttp2_session_resume_data after nghttp2_session_send.
  This makes nghttp2_session_want_write() returns nonzero (if connection
  window still opens), and as a result, socket writeability is checked,
  and upload speed becomes normal.

- [Dmitry Eremin-Solenikov brought this change]

  gtls: don't fail on non-fatal alerts during handshake
  
  Stop curl from failing when non-fatal alert is received during
  handshake.  This e.g. fixes lots of problems when working with https
  sites through proxies.

- curl_easy_unescape.3: update RFC reference
  
  Reported-by: bsammon
  Bug: https://github.com/bagder/curl/issues/282

Jay Satiro (20 May 2015)
- CURLOPT_POSTFIELDS.3: Mention curl_easy_escape
  
  .. also correct some variable naming in curl_easy_escape.3
  
  Bug: https://github.com/bagder/curl/issues/281
  Reported-by: bsammon@users.noreply.github.com

Daniel Stenberg (19 May 2015)
- [Brian Prodoehl brought this change]

  openssl: Use SSL_CTX_set_msg_callback and SSL_CTX_set_msg_callback_arg
  
  BoringSSL removed support for direct callers of SSL_CTX_callback_ctrl
  and SSL_CTX_ctrl, so move to a way that should work on BoringSSL and
  OpenSSL.
  
  re #275

Jay Satiro (19 May 2015)
- curl.1: fix missing space in section --data

Daniel Stenberg (19 May 2015)
- transfer: remove erroneous and misleading comment

Kamil Dudka (19 May 2015)
- http: silence compile-time warnings without USE_NGHTTP2
  
  Error: CLANG_WARNING:
  lib/http.c:173:16: warning: Value stored to 'http' during its initialization is never read
  
  Error: COMPILER_WARNING:
  lib/http.c: scope_hint: In function ‘http_disconnect’
  lib/http.c:173:16: warning: unused variable ‘http’ [-Wunused-variable]

Jay Satiro (19 May 2015)
- transfer: Replace __func__ instances with function name
  
  .. also make __func__ replacement in multi.
  
  Prior to this change debug builds would fail to build if the compiler
  was building pre-c99 and didn't support __func__.

Daniel Stenberg (19 May 2015)
- [Viktor Szakats brought this change]

  build: bump version in default nghttp2 paths

- INTERNALS: we require nghttp2 1.0.0+ now

Jay Satiro (18 May 2015)
- http: Add some include guards for the new HTTP/2 stuff

Daniel Stenberg (18 May 2015)
- http2: store upload state per stream
  
  Use a curl_off_t for upload left

- http2: fix build when NOT h2-enabled

- http2: switch to use Curl_hash_destroy()
  
  as after 4883f7019d3, the *_clean() function only flushes the hash.

- curlver: restore LIBCURL_VERSION_NUM defined as a full number
  
  As it breaks configure, curl-config and test 1023 if not.

- [Anthony Avina brought this change]

  hostip: fix unintended destruction of hash table
  
  .. and added unit1602 for hash.c

- curlver: introducing new version number (checking) macros

- runtests.pl: use 'h2c' now, no -14 anymore

- [Tatsuhiro Tsujikawa brought this change]

  http2: Ignore if we have stream ID not in hash in on_stream_close
  
  We could get stream ID not in the hash in on_stream_close.  For
  example, if we decided to reject stream (e.g., PUSH_PROMISE), then we
  don't create stream and store it in hash with its stream ID.

- [Tatsuhiro Tsujikawa brought this change]

  Require nghttp2 v1.0.0
  
  This commit requires nghttp2 v1.0.0 to compile, and migrate to v1.0.0,
  and utilize recent version of nghttp2 to simplify the code,
  
  First we use nghttp2_option_set_no_recv_client_magic function to
  detect nghttp2 v1.0.0.  That function only exists since v1.0.0.
  
  Since nghttp2 v0.7.5, nghttp2 ensures header field ordering, and
  validates received header field.  If it found error, RST_STREAM with
  PROTOCOL_ERROR is issued.  Since we require v1.0.0, we can utilize
  this feature to simplify libcurl code.  This commit does this.
  
  Migration from 0.7 series are done based on nghttp2 migration
  document.  For libcurl, we removed the code sending first 24 bytes
  client magic.  It is now done by nghttp2 library.
  on_invalid_frame_recv callback signature changed, and is updated
  accordingly.

- http2: infof length in on_frame_send()

- pipeline: switch some code over to functions
  
  ... to "compartmentalize" a bit and make it easier to change behavior
  when multiplexing is used instead of good old pipelining.

- symbols-in-versions: add CURLOPT_PIPEWAIT

- CURLOPT_PIPEWAIT: added
  
  By setting this option to 1 libcurl will wait for a connection to reveal
  if it is possible to pipeline/multiplex on before it continues.

- Curl_http_readwrite_headers: minor code simplification

- IsPipeliningPossible: fixed for http2

- http2: bump the h2 buffer size to 32K for speed

- http2: remove the stream from the hash in stream_close callback
  
  ... and suddenly things work much better!

- http2: if there is paused data, do not clear the drain field

- http2: rename s/data/pausedata

- http2: "stream %x" in all outputs to make it easier to search for

- http2: Curl_expire() all handles with incoming traffic
  
  ... so that they'll get handled next in the multi loop.

- http2: don't signal settings change for same values

- http2: set default concurrency, fix ConnectionExists for multiplex

- bundles: store no/default/pipeline/multiplex
  
  to allow code to act differently on the situation.
  
  Also added some more info message for the connection re-use function to
  make it clearer when connections are not re-used.

- http2: lazy init header_recvbuf
  
  It makes us use less memory when not doing HTTP/2 and subsequently also
  makes us not have to cleanup HTTP/2 related data when not using HTTP/2!

- http2: separate multiplex/pipelining + cleanup memory leaks

- CURLMOPT_PIPELINE: bit 1 is for multiplexing

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix bug that data to be drained are overwritten by pending "paused" data

- [Tatsuhiro Tsujikawa brought this change]

  http2: Don't call nghttp2_session_mem_recv while it is paused by a stream

- [Tatsuhiro Tsujikawa brought this change]

  http2: Read data left in connection buffer after pause
  
  Previously when we do pause because of out of buffer, we just throw
  away unread data in connection buffer.  This just broke protocol
  framing, and I saw occasional FRAME_SIZE_ERROR.  This commit fix this
  issue by remembering how much data read, and in the next iteration, we
  process remaining data.

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix streams get stuck
  
  This commit fixes the bug that streams get stuck if stream gets some
  DATA, and stream->closed becomes true at the same time.  Previously,
  in this condition, after we processed DATA, we are going to try to
  read data from underlying transport, but there is no data, and gets
  EAGAIN.  There was no code path to evaludate stream->closed.

- http2: store incoming h2 SETTINGS

- pipeline: move function to pipeline.c and make static
  
  ... as it was only used from there.

- IsPipeliningPossible: http2 can always "pipeline" (multiplex)

- http2: remove debug logging from on_frame_recv

- http2: remove the closed check in http2_recv
  
  With the "drained" functionality we can get here slightly asynchronously
  so the stream have have been closed but there is pending data left to
  read.

- http2: bump the h2 buffer to 8K

- http2: Curl_read should not use the single buffer
  
  ... as it does for pipelining when we're multiplexing, as we need the
  different buffers to store incoming data correctly for all streams.

- http2: more debug outputs

- http2: leave WAITPERFORM when conn is multiplexed
  
  No need to wait for our "spot" like for pipelining

- http2: force "drainage" of streams
  
  ... which is necessary since the socket won't be readable but there is
  data waiting in the buffer.

- http2: move the mem+len pair to the stream struct

- http2: more stream-oriented data, stream ID 0 is for connections

- http2: move lots of state data to the 'stream' struct
  
  ... from the connection struct. The stream one being the 'struct HTTP'
  which is kept in the SessionHandle struct (easy handle).
  
  lookup streams for incoming frames in the stream hash, hashing is based
  on the stream id and we get the SessionHandle for the incoming stream
  that way.

- HTTP: partial start at fixing up hash-lookups on http2 frame receival

- http: a stream hash for h2 multiplexing

- http: a stream hash for h2 multiplexing

- http2: debug log when receiving unexpected stream_id

- http2: move stream_id to the HTTP struct (per-stream)

- Curl_http2_setup: only do it once and enable multiplex on the server
  
  Once we know we are HTTP/2 enabled we know the server can multiplex.

- http: switch on "pipelining" (multiplexing) for HTTP/2 servers
  
  ... and do not blacklist any.

- README.pipelining: removed
  
  All the details mentioned here are better documented in man pages

Dan Fandrich (14 May 2015)
- build: removed bundles.c from make files
  
  This file was removed in commit fd137786

Daniel Stenberg (14 May 2015)
- Curl_conncache_add_conn: fix memory leak on OOM

- CURLMOPT_MAX_HOST_CONNECTIONS: host = host name + port number

- conncache: keep bundles on host+port bases, not only host names
  
  Previously we counted all connections to a specific host name and that
  would be used for the CURLMOPT_MAX_HOST_CONNECTIONS check for example,
  while servers on different port numbers are normally considered
  different "origins" on the web and should thus be considered different
  hosts.

- bundles: merged into conncache.c
  
  All the existing Curl_bundle* functions were only ever used from within
  the conncache.c file, so I moved them over and made them static (and
  removed the Curl_ prefix).

- hostcache: made all host caches use structs, not pointers
  
  This avoids unnecessary dynamic allocs and as this also removed the last
  users of *hash_alloc() and *hash_destroy(), those two functions are now
  removed.

- multi: converted socket hash into non-allocated struct
  
  avoids extra dynamic allocation

- connection cache: avoid Curl_hash_alloc()
  
  ... by using plain structs instead of pointers for the connection cache,
  we can avoid several dynamic allocations that weren't necessary.

- proxy: add newline to info message

Patrick Monnerat (8 May 2015)
- FTP: fix dangling conn->ip_addr dereference on verbose EPSV.

- FTP: Make EPSV use the control IP address rather than the original host.
  This ensures an alternate address is not used.
  Does not apply to proxy tunnel.

Daniel Stenberg (8 May 2015)
- [Alessandro Ghedini brought this change]

  tool_help: fix formatting for --next option

- [Egon Eckert brought this change]

  opts: improved the TCP keepalive examples

Jay Satiro (8 May 2015)
- winbuild: Document the option used to statically link the CRT
  
  - Document option RTLIBCFG (runtime library configuration).
  
  Bug: https://github.com/bagder/curl/issues/254
  Reported-by: Bert Huijben

- [Orgad Shaneh brought this change]

  netrc: Read in text mode when cygwin
  
  Use text mode when cygwin to eliminate trailing carriage returns.
  
  Bug: https://github.com/bagder/curl/pull/258

Patrick Monnerat (5 May 2015)
- OS400: Add SPNEGO service name options to ILE/RPG binding.

Daniel Stenberg (4 May 2015)
- curl_multi_info_read.3: fix typo
  
  Reported-by: Liviu Chircu

- MANUAL: language fix
  
  Reported-by: Fred Stluka
  Bug: https://github.com/bagder/curl/issues/255

- [Alessandro Ghedini brought this change]

  gtls: properly retrieve certificate status
  
  Also print the revocation reason if appropriate.

- OpenSSL: conditional check for SSL3_RT_HEADER
  
  The symbol is fairly new.
  
  Reported-by: Kamil Dudka

- openssl: skip trace outputs for ssl_ver == 0
  
  The OpenSSL trace callback is wonderfully undocumented but given a
  journey in the source code, it seems the cases were ssl_ver is zero
  doesn't follow the same pattern and thus turned out confusing and
  misleading. For now, we skip doing any CURLINFO_TEXT logging on those
  but keep sending them as CURLINFO_SSL_DATA_OUT/IN.
  
  Also, I added direction to the text info and I edited some functions
  slightly.
  
  Bug: https://github.com/bagder/curl/issues/219
  Reported-by: Jay Satiro, Ashish Shukla

Marc Hoersken (2 May 2015)
- schannel.c: Small changes

- schannel.c: Improve code path and readability

- schannel.c: Improve error and return code handling upon aa99a63f03

- [Chris Araman brought this change]

  schannel: fix regression in schannel_recv
  
  https://github.com/bagder/curl/issues/244
  
  Commit 145c263 changed the behavior when Curl_read_plain returns
  CURLE_AGAIN. We now handle CURLE_AGAIN and SEC_I_CONTEXT_EXPIRED
  correctly.

- Bug born in changes made several days ago 9a91e80.
  
  Commit: https://github.com/bagder/curl/commit/926cb9f
  Reported-by: Ray Satiro

Daniel Stenberg (30 Apr 2015)
- [Michael Osipov brought this change]

  configure: remove missing and make it autogenerate
  
  The missing file has not been autogenerated because a temporary fix was
  employed in acinclude.m4 which blocked update. Removed that fix and a recent
  version of missing is copied to build root.

- [Michael Osipov brought this change]

  acinclude.m4: fix test for default CA cert bundle/path
  
  test(1) on HP-UX requires a single equals sign and fails with two.
  Let's use one and make every OS happy.

- CONTRIBUTING.md: remove the sourceforge mention
  
  Reported-By: Michael Osipov

Dan Fandrich (30 Apr 2015)
- http_negotiate_sspi: added missing data variable

Daniel Stenberg (30 Apr 2015)
- [Michael Osipov brought this change]

  configure: remove --automake from libtoolize call
  
  That option is not mentioned in the man page of libtoolize 2.4.4.19-fda4.
  Moveover, a comment in line 2623 says "--automake is for 1.5 compatibility".
  
  This option is redundant now.

- [Viktor Szakats brought this change]

  build: update depedency versions, urls, example makefiles
  
  - update default versions of dependencies (except for rare/old platforms)
  - update urls
  - sync examples makefiles with main ones
  - remove line ending space

- [Michael Osipov brought this change]

  configure: remove autogenerated files by autoconf
  
  * install-sh is always regenerated
  * mkinstalldirs was already redudant years ago. Automake uses install for
    that. See: http://lists.gnu.org/archive/html/automake/2007-03/msg00015.html

- [Anders Bakken brought this change]

  curl_multi_add_handle: next is already NULL

Jay Satiro (30 Apr 2015)
- schannel: Fix out of bounds array
  
  Bug born in changes made several days ago 9a91e80.
  
  Bug: http://curl.haxx.se/mail/lib-2015-04/0199.html
  Reported-by: Brian Chrisman

- docs/libcurl: gitignore libcurl-symbols.3
  
  Bug: http://curl.haxx.se/mail/lib-2015-04/0191.html
  Reported-by: Michael Osipov

- [Viktor Szakats brought this change]

  lib/makefile.m32: add arch -m32/-m64 to LDFLAGS
  
  This fixes using a multi-target mingw distro to build curl .dll for the
  non-default target.
  (mirroring the same patch present in src/makefile.m32)

Daniel Stenberg (29 Apr 2015)
- RELEASE-NOTES: synced with cd39b944afc
  
  I've not mentioned the bug fixes that were shipped in 7.42.1 from the
  7_42 branch.

- THANKS: merged from the 7.42.1 release

- CURLOPT_HEADEROPT: default to separate
  
  Make the HTTP headers separated by default for improved security and
  reduced risk for information leakage.
  
  Bug: http://curl.haxx.se/docs/adv_20150429.html
  Reported-by: Yehezkel Horowitz, Oren Souroujon

Linus Nielsen (28 Apr 2015)
- docs/libcurl: Corrected a typo in the CURLOPT_PROXY_SERVICE_NAME documentation

Daniel Stenberg (28 Apr 2015)
- hash: simplify Curl_str_key_compare()

- dist: ship CURLOPT_PROXY_SERVICE_NAME and CURLOPT_SERVICE_NAME

- [Linus Nielsen brought this change]

  Negotiate: custom service names for SPNEGO.
  
  * Add new options, CURLOPT_PROXY_SERVICE_NAME and CURLOPT_SERVICE_NAME.
  * Add new curl options, --proxy-service-name and --service-name.

- http2: unify http_conn variable names to 'c'

- ConnectionExists: call it multi-use instead of pipelining
  
  So that it fits HTTP/2 as well

Kamil Dudka (27 Apr 2015)
- [Paul Howarth brought this change]

  nss: fix compilation failure with old versions of NSS
  
  Bug: http://curl.haxx.se/mail/lib-2015-04/0095.html

Daniel Stenberg (27 Apr 2015)
- sws: init http2 state properly
  
  It would otherwise cause problems when running tests after 1801 etc.

- curl_easy_getinfo.3: document 'internals' in CURLINFO_TLS_SESSION
  
  ... as it was previouly undocumented what the pointer was.

- runtests: use a DISABLED.local file too
  
  ... and have git ignore that. Allows for a dev to add tests to ignore in
  local tests and yet don't obstruct a normal git work flow.

Marc Hoersken (26 Apr 2015)
- schannel.c: Fix typo introduced with 3447c973d0

- schannel.c: Fix possible SEC_E_BUFFER_TOO_SMALL error
  
  Reported-by: Brian Chrisman

Daniel Stenberg (26 Apr 2015)
- schannel: re-indented file to follow curl style better
  
  white space changes only

- Curl_ossl_init: load builtin modules
  
  To have engine modules work, we must tell openssl to load builtin
  modules first.
  
  Bug: https://github.com/bagder/curl/pull/206

- configure: follow-up fix for krb5-config
  
  commit 5b66860652 was incomplete so here's a follow-up fix
  
  Reported-by: Dagobert Michelsen
  Bug: https://github.com/bagder/curl/commit/5b668606527613179d0349f21b4ab0df2971e3d2#commitcomment-10473445

- openssl: fix serial number output
  
  The code extracting the cert serial number was broken and didn't display
  it properly.
  
  Bug: https://github.com/bagder/curl/issues/235
  Reported-by: dkjjr89

- [Grant Pannell brought this change]

  sasl_sspi: Populate domain from the realm in the challenge
  
  Without this, SSPI based digest auth was broken.
  
  Bug: https://github.com/bagder/curl/pull/141.patch

Jay Satiro (25 Apr 2015)
- [Anthony Avina brought this change]

  tool: New option --data-raw to HTTP POST data, '@' allowed.
  
  Add new option --data-raw which is almost the same as --data but does
  not have a special interpretation of the @ character.
  
  Prior to this change there was no (easy) way to pass the @ character as
  the first character in POST data without it being interpreted as a
  special character.
  
  Bug: https://github.com/bagder/curl/issues/198
  Reported-by: Jens Rantil

Dan Fandrich (25 Apr 2015)
- test2039: fixed line endings that caused a test failure

Daniel Stenberg (24 Apr 2015)
- [Viktor Szakats brought this change]

  netrc: add unit tests for 'default' support

- [Viktor Szakats brought this change]

  netrc: support 'default' token
  
  The 'default' token has no argument and means to match _any_ domain.
  It must be placed last if there are 'machine <name>' tokens in the same file.
  
  See full description here:
  https://www.gnu.org/software/inetutils/manual/html_node/The-_002enetrc-File.html

- ROADMAP.md: extended the HTTP/2 section, reformatted
  
  Elaborated on several of the remaining HTTP/2 parts and made document
  use a format that ends up nicer on the web page:
  http://curl.haxx.se/dev/roadmap.html

Kamil Dudka (23 Apr 2015)
- curl -z: do not write empty file on unmet condition
  
  This commit fixes a regression introduced in curl-7_41_0-186-g261a0fe.
  It also introduces a regression test 1424 based on tests 78 and 1423.
  
  Reported-by: Viktor Szakats
  Bug: https://github.com/bagder/curl/issues/237

Dan Fandrich (23 Apr 2015)
- tool: fixed a comment typo

- README: convert to UTF-8

Jay Satiro (22 Apr 2015)
- cyassl: Implement public key pinning
  
  Also add public key extraction example to CURLOPT_PINNEDPUBLICKEY doc.

Dan Fandrich (22 Apr 2015)
- [Alessandro Ghedini brought this change]

  curl.1: fix typo

Kamil Dudka (22 Apr 2015)
- docs: distribute the CURLOPT_PINNEDPUBLICKEY(3) man page, too

- tests/unit/.gitignore: hide unit1601 and above, too

Daniel Stenberg (22 Apr 2015)
- connectionexists: follow-up to fd9d3a1ef1f
  
  PROTOPT_CREDSPERREQUEST still needs to be checked even when NTLM is not
  enabled.
  
  Mistake-caught-by: Kamil Dudka

- connectionexists: fix build without NTLM
  
  Do not access NTLM-specific struct fields when built without NTLM
  enabled!
  
  bug: http://curl.haxx.se/?i=231
  Reported-by: Patrick Rapin

- bump: start working toward 7.43.0

Kamil Dudka (22 Apr 2015)
- nss: implement public key pinning for NSS backend
  
  Bug: https://bugzilla.redhat.com/1195771

Daniel Stenberg (22 Apr 2015)
- dist: include {src,lib}/checksrc.whitelist

Version 7.42.0 (22 Apr 2015)

Daniel Stenberg (22 Apr 2015)
- RELEASE-NOTES: updated for 7.42.0

- THANKS: added contributors from 7.42.0 release notes

- THANKS-filter: a few more alterations to squash

- contrithanks.sh: helper script for maintaining THANKS

- http_done: close Negotiate connections when done
  
  When doing HTTP requests Negotiate authenticated, the entire connnection
  may become authenticated and not just the specific HTTP request which is
  otherwise how HTTP works, as Negotiate can basically use NTLM under the
  hood. curl was not adhering to this fact but would assume that such
  requests would also be authenticated per request.
  
  CVE-2015-3148
  
  Bug: http://curl.haxx.se/docs/adv_20150422B.html
  Reported-by: Isaac Boukris

- fix_hostname: zero length host name caused -1 index offset
  
  If a URL is given with a zero-length host name, like in "http://:80" or
  just ":80", `fix_hostname()` will index the host name pointer with a -1
  offset (as it blindly assumes a non-zero length) and both read and
  assign that address.
  
  CVE-2015-3144
  
  Bug: http://curl.haxx.se/docs/adv_20150422D.html
  Reported-by: Hanno Böck

- cookie: cookie parser out of boundary memory access
  
  The internal libcurl function called sanitize_cookie_path() that cleans
  up the path element as given to it from a remote site or when read from
  a file, did not properly validate the input. If given a path that
  consisted of a single double-quote, libcurl would index a newly
  allocated memory area with index -1 and assign a zero to it, thus
  destroying heap memory it wasn't supposed to.
  
  CVE-2015-3145
  
  Bug: http://curl.haxx.se/docs/adv_20150422C.html
  Reported-by: Hanno Böck

- ConnectionExists: for NTLM re-use, require credentials to match
  
  CVE-2015-3143
  
  Bug: http://curl.haxx.se/docs/adv_20150422A.html
  Reported-by: Paras Sethia

Jay Satiro (21 Apr 2015)
- [byronhe brought this change]

  openssl: add OPENSSL_NO_SSL3_METHOD check

Daniel Stenberg (20 Apr 2015)
- CURLOPT_HEADERFUNCTION.3: match parameter name in synopsis and desc
  
  Bug: https://github.com/bagder/curl/issues/229
  Reported-by: bsammon

Kamil Dudka (20 Apr 2015)
- [Mostyn Bramley-Moore brought this change]

  configure --with-nss: remove unneeded libs from the fallback

Daniel Stenberg (20 Apr 2015)
- contributors.sh: fix help output, filter out (-prefix from names

- RELEASE-NOTES: synced with cc0e7ebc3be0

- [Michael Stapelberg brought this change]

  CURLMOPT_TIMERFUNCTION.3: Clarify, add an example

- [Viktor Szakáts brought this change]

  vtls/openssl: use https in URLs and a comment typo fixed

- curl_version_info.3: fixed the 'protocols' variable type
  
  Reported-by: John Marshall
  Bug: https://github.com/bagder/curl/issues/225

Dan Fandrich (18 Apr 2015)
- test1423: added missing "file" to server section

Daniel Stenberg (17 Apr 2015)
- TheArtOfHttpScripting: Multiple URLs + Multiple HTTP methods
  
  ... and some minor edits

- Revert "HTTP: don't abort connections with pending Negotiate authentication"
  
  This reverts commit 5dc68dd6092a789bb5e0a67a1c1356ba87fdcbc6.
  
  Bug: https://github.com/bagder/curl/issues/223
  Reported-by: Michael Osipov

Jay Satiro (17 Apr 2015)
- cyassl: Fix include order
  
  Prior to this change CyaSSL's build options could redefine some generic
  build symbols.
  
  http://curl.haxx.se/mail/lib-2015-04/0069.html

Kamil Dudka (17 Apr 2015)
- configure --with-nss: drop redundant if statement

- configure --with-nss=PATH: query pkg-config if available
  
  Bug: https://github.com/bagder/curl/pull/171

Daniel Stenberg (17 Apr 2015)
- parsecfg: do not continue past a zero termination
  
  When a config file line ends without newline, the parsing function could
  continue reading beyond that point in memory.
  
  Reported-by: Hanno Böck

Jay Satiro (16 Apr 2015)
- gitignore: Ignore Windows build output directories

Daniel Stenberg (15 Apr 2015)
- RELEASE-NOTES: synced with 1ba6e4c88e0

- TODO: 17.9 Choose the name of file in braces for complex URLs

- TODO: a little caution that maybe not all ideas are still good

- TODO: 17.8 offer color-coded HTTP header output

- TODO: 17.7 warning when sending binary output to terminal

- KNOWN_BUGS: #90 IMAP "SEARCH ALL" truncates output on large boxes

Jay Satiro (14 Apr 2015)
- cyassl: Add support for TLS extension SNI

Daniel Stenberg (13 Apr 2015)
- [Matthew Hall brought this change]

  gitignore: ignore test-driver file

- [Matthew Hall brought this change]

  vtls_openssl: improve PKCS#12 load failure error message

- [Matthew Hall brought this change]

  vtls_openssl: fix minor typo in PKCS#12 load routine

- [Matthew Hall brought this change]

  vtls_openssl: improve client certificate load failure error messages

- [Matthew Hall brought this change]

  vtls_openssl: remove ambiguous SSL_CLIENT_CERT_ERR constant

- BUGS: refer to the github issue tracker now as primary

- firefox-db2pem: fix wildcard to find Firefox default profile
  
  At some point, Firefox has changed and generates different directory
  names for the default profile that made this script fail to find them.
  
  Bug: https://github.com/bagder/curl/issues/207
  Reported-by: sneakyimp

Jay Satiro (11 Apr 2015)
- cyassl: Include the CyaSSL build config
  
  CyaSSL >= 2.6.0 may have an options.h that was generated during
  its build by configure.

- build: Generate source prerequisites for Visual Studio in generate.bat
  
  Prior to this change Visual Studio builds could fail due to missing
  prerequisites src/tool_hugehelp.c and include/curl/curlbuild.h.
  
  http://curl.haxx.se/mail/lib-2015-04/0034.html

Daniel Stenberg (9 Apr 2015)
- [Viktor Szakats brought this change]

  lib/makefile.m32: add missing libs to build libcurl.dll
  
  Add 'gdi32' and 'crypt32' Windows implibs to avoid failure
  while building libcurl.dll using the mingw compiler.
  The same logic is used in 'src/makefile.m32' when
  building curl.exe.

Kamil Dudka (8 Apr 2015)
- test142[23]: verify that an empty file is stored on success

- src/tool_operate: create output file on successful download
  
  ... of an empty file
  
  Bug: https://github.com/bagder/curl/issues/183

- src/tool_cb_wrt: separate fnc for output file creation

Daniel Stenberg (7 Apr 2015)
- [Da-Yoon Chung brought this change]

  lib/transfer.c: Remove factor of 8 from sleep time calculation
  
  The factor of 8 is a bytes-to-bits conversion factor, but pkt_size and
  rate_bps are both in bytes. When using the rate limiting option, curl
  waits 8 times too long, and then transfers very quickly until the
  average rate reaches the limit. The average rate follows the limit over
  time, but the actual traffic is bursty.
  
  Thanks-to: Benjamin Gilbert

- [Jay Satiro brought this change]

  x509asn1: Silence x64 loss-of-data warning on RSA key length assignment
  
  The key length in bits will always fit in an unsigned long so the
  loss-of-data warning assigning the result of x64 pointer arithmetic to
  an unsigned long is unnecessary.

- [Jay Satiro brought this change]

  cyassl: Use CYASSL_MAX_ERROR_SZ for error buffer size
  
  Also fix it so that all ERR_error_string calls use an error buffer.
  CyaSSL's implementation of ERR_error_string only writes the error when
  an error buffer is passed.
  
  http://www.yassl.com/forums/topic599-openssl-compatibility-and-errerrorstring.html

- [Jay Satiro brought this change]

  cyassl: Remove 'Connecting to' message from cyassl_connect_step2
  
  Prior to this change libcurl could show multiple 'CyaSSL: Connecting to'
  messages since cyassl_connect_step2 is called multiple times, typically.
  The message is superfluous even once since libcurl already informs the
  user elsewhere in code that it is connecting.

- [Viktor Szakats brought this change]

  checksrc.bat: quotes to support an SRC_DIR with spaces

- hostip: fix compiler warnings
  
  introduced in the previous mini-series of 3 commits

- [Stefan Bühler brought this change]

  actually implement CURLOPT_RESOLVE removals
  
  - also log when a CURLOPT_RESOLVE entry couldn't get parsed

- [Stefan Bühler brought this change]

  move Curl_share_lock and ref counting into Curl_fetch_addr

- [Stefan Bühler brought this change]

  fix refreshing of obsolete dns cache entries
  
  - cache entries must be also refreshed when they are in use
  - have the cache count as inuse reference too, freeing timestamp == 0 special
    value
  - use timestamp == 0 for CURLOPT_RESOLVE entries which don't get refreshed
  - remove CURLOPT_RESOLVE special inuse reference (timestamp == 0 will prevent refresh)
  - fix Curl_hostcache_clean - CURLOPT_RESOLVE entries don't have a special
    reference anymore, and it would also release non CURLOPT_RESOLVE references
  - fix locking in Curl_hostcache_clean
  - fix unit1305.c: hash now keeps a reference, need to set inuse = 1

- RELEASE-NOTES: synced with abf6bddc14a

- [Jay Satiro brought this change]

  checksrc.bat: Check lib\vtls source

- [Jay Satiro brought this change]

  cyassl: Set minimum protocol version before CTX callback
  
  This change is to allow the user's CTX callback to change the minimum
  protocol version in the CTX without us later overriding it, as we did
  prior to this change.

- [Jay Satiro brought this change]

  build-openssl.bat: Fix mixed line endings
  
  Use LF not CRLF, throughout.  msysgit will only convert a file to CRLF
  on checkout if it's not mixed.

- [Jay Satiro brought this change]

  cyassl: Fix certificate load check
  
  SSL_CTX_load_verify_locations can return negative values on fail,
  therefore to check for failure we check if load is != 1 (success)
  instead of if load is == 0 (failure), the latter being incorrect given
  that behavior.

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix missing nghttp2_session_send call in Curl_http2_switched
  
  Previously in Curl_http2_switched, we called nghttp2_session_mem_recv to
  parse incoming data which were already received while curl was handling
  upgrade.  But we didn't call nghttp2_session_send, and it led to make
  curl not send any response to the received frames.  Most likely, we
  received SETTINGS from server at this point, so we missed opportunity to
  send SETTINGS + ACK.  This commit adds missing nghttp2_session_send call
  in Curl_http2_switched to fix this issue.
  
  Bug: https://github.com/bagder/curl/issues/192
  Reported-by: Stefan Eissing

- cookie: handle spaces after the name in Set-Cookie
  
  "name =value" is fine and the space should just be skipped.
  
  Updated test 31 to also test for this.
  
  Bug: https://github.com/bagder/curl/issues/195
  Reported-by: cromestant
  Help-by: Frank Gevaerts

- [Jay Satiro brought this change]

  cyassl: Fix library initialization return value
  
  (Curl_cyassl_init)
  - Return 1 on success, 0 in failure.
  
  Prior to this change the fail path returned an incorrect value and the
  evaluation to determine whether CyaSSL_Init had succeeded was incorrect.
  Ironically that combined with the way curl_global_init tests SSL library
  initialization (!Curl_ssl_init()) meant that CyaSSL having been
  successfully initialized would be seen as that even though the code path
  and return value in Curl_cyassl_init were wrong.

- [Thomas Ruecker brought this change]

  CURLOPT_HTTP200ALIASES.3: Mainly SHOUTcast servers use "ICY 200"
  
  Icecast versions 1.3.0 through 1.3.12 would reply with "ICY 200"
  under certain conditions:
  
      client_wants_icy_headers (connection_t *con)
      {
              const char *val;
  
              if (!con)
                      return 1;
  
              val = get_user_agent (con);
              if (!val || !val[0] || strcmp (val, "(null)") == 0)
                      return 1;
  
              if (con->food.client->use_icy)
                      return 1;
              if (strncasecmp (val, "winamp", 6) == 0)
                      return 1;
              if (strncasecmp (val, "Shoutcast", 9) == 0)
                      return 1;
  
              return 0;
      }
  
  So mainly if there is no 'user agent' or it is '(null)' or contains
  'winamp' or 'Shoutcast'.
  
  No mainstream distribution carries Icecast 1.3.x anymore, after all
  it was released in 2002 and superseded by Icecast 2.x.

Dan Fandrich (31 Mar 2015)
- axtls: add timeout within Curl_axtls_connect
  
  This allows test 405 to pass on axTLS.

Daniel Stenberg (30 Mar 2015)
- [Jay Satiro brought this change]

  checksrc: Windows-specific input fixes
  
  lib/config-win32ce.h
  - Fix whitespace for checksrc compliance.
  
  lib/checksrc.pl
  - Remove trailing carriage returns from input.
  
  projects/checksrc.bat
  - Ignore tool_hugehelp.c.

- [Dagobert Michelsen brought this change]

  configure: Use KRB5CONFIG for krb5-config
  
  Allows the user to easier override its path.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1486

- multi: remove_handle: move pending connections
  
  If the handle removed from the multi handle happens to be the one
  "owning" the pipeline other transfers will be waiting indefinitely. Now
  we move such handles back to connect to have them race (again) for
  getting the connection and thus avoid hanging.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1465
  Reported-by: Jiri Dvorak

- KNOWN_BUGS: 89 is bug #1411
  
  Disabling pipelining on multi handle with in-progress pipelined requests
  leads to heap corruption and crash

- [Jay Satiro brought this change]

  cyassl: CTX callback cosmetic changes and doc fix
  
  - More descriptive fail message for NO_FILESYSTEM builds.
  - Cosmetic changes.
  - Change more of CURLOPT_SSL_CTX_* doc to not be OpenSSL specific.

- RELEASE-NOTES: synced with d2feb71752f

Dan Fandrich (28 Mar 2015)
- tool_operate: only set SSL options if SSL is enabled

- runtests.pl: detect WolfSSL as yassl

Daniel Stenberg (27 Mar 2015)
- [Kyle L. Huff brought this change]

  cyassl: add SSL context callback support for CyaSSL
  
  Adds support for CURLOPT_SSL_CTX_FUNCTION when using CyaSSL, and better
  handles CyaSSL instances using NO_FILESYSTEM.

- [Kyle L. Huff brought this change]

  cyassl: remove undefined reference to CyaSSL_no_filesystem_verify
  
  CyaSSL_no_filesystem_verify is not (or no longer) defined by cURL or
  CyaSSL. This reference causes build errors when compiling with
  NO_FILESYSTEM.

- [Jay Satiro brought this change]

  build: Fix libcurl.sln erroneous mixed configurations
  
  Prior to this change some Release configurations had an active
  configuration assignment to their Debug counterpart.

- [Jay Satiro brought this change]

  vtls: Don't accept unknown CURLOPT_SSLVERSION values

- [Jay Satiro brought this change]

  url: Don't accept CURLOPT_SSLVERSION unless USE_SSL is defined

- [Paul Howarth brought this change]

  build: link curl to openssl libraries when openssl support is enabled
  
  This fixes a build failure where openssl and libmetalink are used
  together and the system linker does not do implicit linking (e.g.
  Fedora 13 and later releases). The MD5 functions required for
  metalink support must be pulled in from the openssl crypto library.
  
  This is similar to commit c6e7cbb94e669b85d3eb8e015ec51d0072112133,
  which fixes the same sort of problem for NSS builds.

- multi: on a request completion, check all CONNECT_PEND transfers
  
  ... even if they don't have an associated connection anymore. It could
  leave the waiting transfers pending with no active one on the
  connection.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1465
  Reported-by: Jiri Dvorak

- [Emil Lerner brought this change]

  globbing: fix url number calculation when using range with step
  
  In function glob_range, the number of urls was multiplied by (max - min
  + 1), regardless of step. The correct formula is (max - min) / step + 1

- README.http2: refreshed and added TODO items

- [Emil Lerner brought this change]

  globbing: fix step parsing for character globbing ranges
  
  The glob_range function used wrong offset (3 instead of 4) for parsing
  integer step inside character range specification, which led to 'bad
  range' error when using character ranges with explicitly specified step
  (such as '[a-z:2]')

- polarssl: called mbedTLS in 1.3.10 and later

- polarssl: remove dead code
  
  and simplify code by changing if-elses to a switch()
  
  CID 1291706: Logically dead code. Execution cannot reach this statement

- polarssl: remove superfluous for(;;) loop
  
  "unreachable: Since the loop increment is unreachable, the loop body
  will never execute more than once."
  
  Coverity CID 1291707

- Curl_ssl_md5sum: return CURLcode
  
  ... since the funciton can fail on OOM. Check this return code.
  
  Coverity CID 1291705.

- [Jay Satiro brought this change]

  cyassl: default to highest possible TLS version
  
  (cyassl_connect_step1)
  - Use TLS 1.0-1.2 by default when available.
  
  CyaSSL/wolfSSL >= v3.3.0 supports setting a minimum protocol downgrade
  version.
  
  cyassl/cyassl@322f79f

- [Jay Satiro brought this change]

  cyassl: Check for invalid length parameter in Curl_cyassl_random

- [Jay Satiro brought this change]

  cyassl: If wolfSSL then identify as such in version string

Dan Fandrich (24 Mar 2015)
- symbols-in-versions: added CURLOPT_PATH_AS_IS

- testcurl.pl: add the --notes option to supply more info about a build
  
  Support for notes has been in place for a while, but it required
  being added to the setup file manually.

- curl_memory: make curl_memory.h the second-last header file loaded
  
  This header file must be included after all header files except
  memdebug.h, as it does similar memory function redefinitions and can be
  similarly affected by conflicting definitions in system or dependent
  library headers.

Daniel Stenberg (24 Mar 2015)
- openssl: do the OCSP work-around for libressl too
  
  I tested with libressl git master now (v2.1.4-27-g34bf96c) and it seems to
  still require the work-around for stapling to work.

- openssl: verifystatus: only use the OCSP work-around <= 1.0.2a
  
  URL: http://curl.haxx.se/mail/lib-2015-03/0205.html
  Reported-by: Alessandro Ghedini

- openssl: adapt to ASN1/X509 things gone opaque in 1.1

Dan Fandrich (24 Mar 2015)
- [Jay Satiro brought this change]

  curl_easy_setopt.3: Fix misspelling in CURLOPT_PATH_AS_IS description

- [Viktor Szakáts brought this change]

  CURLOPT_HTTPHEADER.3: fix typo in recent commit

- [Viktor Szakáts brought this change]

  CURLOPT_PATH_AS_IS.3: add type 'long' to prototype

- vtls: fix compile with --disable-crypto-auth but with SSL
  
  This is a strange combination of options, but is allowed.

Patrick Monnerat (24 Mar 2015)
- os400: define new options in ILE/RPG binding.

Daniel Stenberg (24 Mar 2015)
- RELEASE-NOTES: synced with f6878609361

- curl_easy_setopt.3: Add CURLOPT_PATH_AS_IS

- CURLOPT_PATH_AS_IS: added
  
  --path-as-is is the command line option
  
  Added docs in curl.1 and CURLOPT_PATH_AS_IS.3
  
  Added test in test 1241

- [Yamada Yasuharu brought this change]

  curl_easy_recv/send: make them work with the multi interface
  
  By making sure Curl_getconnectinfo() uses the correct connection cache
  to find the last connection.

- http2: move the init too for when its actually needed
  
  ... it would otherwise lead to memory leakage if we never actually do
  the switch.

Dan Fandrich (23 Mar 2015)
- dict: rename byte to avoid compiler shadowed declaration warning
  
  This conflicted with a WolfSSL typedef.

- cyassl: include version.h to ensure the version macros are defined

- test1513: eliminated race condition in test run
  
  It seems that some systems (e.g. fairly consistently in some recent
  Solaris autobuilds) would manage to get to the connect phase before the
  progress callback was called, resulting in a CURLE_COULDNT_CONNECT
  error. Reworked the test to point at a test server that never returns a
  full result so the progress callback always gets a chance to be called
  before the transfer can complete in some other way.

Nick Zitzmann (21 Mar 2015)
- darwinsssl: add support for TLS False Start
  
  TLS False Start support requires iOS 7.0 or later, or OS X 10.9 or later.

Daniel Stenberg (21 Mar 2015)
- gtls: add check of return code
  
  Coverity CID 1291167 pointed out that 'rc' was received but never used when
  gnutls_credentials_set() was used. Added return code check now.

- gtls: dereferencing NULL pointer
  
  Coverity CID 1291165 pointed out 'chainp' could be dereferenced when
  NULL if gnutls_certificate_get_peers() had previously failed.

- gtls: avoid uninitialized variable.
  
  Coverity CID 1291166 pointed out that we could read this variable
  uninitialized.

Dan Fandrich (21 Mar 2015)
- tests/certs: rebuild certificates with modified key usage bits
  
  The certificates were missing the digitalSignature and keyAgreement
  usage types, of which at least digitalSignature was checked by CyaSSL.
  This caused the test server in test 310 (among others) to fail the
  startup verification and therefore run (see
  http://curl.haxx.se/mail/lib-2014-07/0303.html).

- tests/certs: added make target to rebuild certificates
  
  The certificate generation scripts were also updated to better match the
  format of the certificates currently checked in.

Daniel Stenberg (21 Mar 2015)
- x509asn1: add /* fallthrough */ in switch() case

- x509asn1: minor edit to unconfuse Coverity
  
  CID 1202732 warns on the previous use, although I cannot fine any
  problems with it. I'm doing this change only to make the code use a more
  familiar approach to accomplish the same thing.

- [Dagobert Michelsen brought this change]

  testcurl: Allow '=' in values given on command line

- nss: error: unused variable 'connssl'

Dan Fandrich (21 Mar 2015)
- test938: added missing closing tags

- cyassl: use new library version macro when available

Kamil Dudka (20 Mar 2015)
- [Alessandro Ghedini brought this change]

  curl: add --false-start option

- [Alessandro Ghedini brought this change]

  nss: add support for TLS False Start

- [Alessandro Ghedini brought this change]

  url: add CURLOPT_SSL_FALSESTART option
  
  This option can be used to enable/disable TLS False Start defined in the RFC
  draft-bmoeller-tls-falsestart.

Patrick Monnerat (20 Mar 2015)
- [Alessandro Ghedini brought this change]

  gtls: implement CURLOPT_CERTINFO

Daniel Stenberg (20 Mar 2015)
- [Alessandro Ghedini brought this change]

  openssl: try to avoid accessing OCSP structs when possible

- CURLOPT_URL.3: spelling!
  
  Reported-by: Frank Gevaerts

- CURLOPT_URL.3: Added "SECURITY CONCERNS"

- CURLOPT_HTTPHEADER.3: add a "SECURITY CONCERNS" section

Dan Fandrich (19 Mar 2015)
- cyassl: detect the library as renamed wolfssl
  
  This change was made in CyaSSL/WolfSSL ver. 3.4.0

Daniel Stenberg (19 Mar 2015)
- HTTP: don't switch to HTTP/2 from 1.1 until we get the 101
  
  We prematurely changed protocol handler to HTTP/2 which made things very
  slow (and wrong).
  
  Reported-by: Stefan Eissing
  Bug: https://github.com/bagder/curl/issues/169

Dan Fandrich (19 Mar 2015)
- axtls: version 1.5.2 now requires that config.h be manually included

Daniel Stenberg (19 Mar 2015)
- metalink: fix resource leak in OOM
  
  Coverity CID 1288826

Dan Fandrich (18 Mar 2015)
- docs/libcurl: clean up libcurl-symbols.3

- docs/libcurl: check that all options with man pages are referenced
  
  If a man page exists in the opts/ directory, it must also be referenced
  either in curl_easy_setopt.3 or curl_multi_setopt.3

- curl_easy_setopt.3: added a few missing options

Kamil Dudka (18 Mar 2015)
- nss: explicitly tell NSS to disable NPN/ALPN
  
  ... if disabled at libcurl level.  Otherwise, we would allow to
  negotiate NPN despite curl was invoked with the --no-npn option.

Daniel Stenberg (18 Mar 2015)
- [Jay Satiro brought this change]

  mkhelp: Remove trailing carriage return from every line of input
  
  - Get rid of this flood of warnings in Windows mingw build:
  warning: missing terminating " character
  
  The warning is due to the carriage return. When msysgit checks out files
  from the repo by default it converts the line endings to CRLF. Prior to
  this change when mkhelp.pl processed the MANUAL and curl.1 in CRLF
  format the trailing carriage returns caused unnecessary CR in the
  output.

- RELEASE-NOTES: synced with e539f01567

- [Christian Weisgerber brought this change]

  docs/libcurl: make portability fix
  
  Using $< in a non-suffix rule context is a GNU make idiom.  This bug was
  introduced in 7.41.0.

Dan Fandrich (17 Mar 2015)
- checksrc: Fix whitelist on out-of-tree builds

Daniel Stenberg (17 Mar 2015)
- [Stefan Bühler brought this change]

  Curl_sh_entry: remove unused 'timestamp'

- HTTP: don't use Expect: headers when on HTTP/2
  
  Reported-by: Stefan Eissing
  Bug: https://github.com/bagder/curl/issues/169

- checksrc: detect and remove space before trailing semicolons

- checksrc: introduce a whitelisting concept

- checksrc: use space after comma

- checksrc: use space before paren in "return (expr);"

- CONTRIBUTE: refer to git log instead of deprecated CHANGES file

- CURLOPT_*.3: more examples and edits

- CURLOPT_*.3: added lots of small example sections

- CURLOPT_PRIVATE.3: provide an example

- CURLOPT_*TIMEOUT.3: provide examples

- CURLOPT_USERAGENT.3: added an example

- CURLOPT_STDERR.3: added an example

- curl_easy_perform.3: remove superfluous close brace from example

- free: instead of Curl_safefree()
  
  Since we just started make use of free(NULL) in order to simplify code,
  this change takes it a step further and:
  
  - converts lots of Curl_safefree() calls to good old free()
  - makes Curl_safefree() not check the pointer before free()
  
  The (new) rule of thumb is: if you really want a function call that
  frees a pointer and then assigns it to NULL, then use Curl_safefree().
  But we will prefer just using free() from now on.

- [Markus Elfring brought this change]

  Bug #149: Deletion of unnecessary checks before a few calls of cURL functions
  
  The following functions return immediately if a null pointer was passed.
  * Curl_cookie_cleanup
  * curl_formfree
  
  It is therefore not needed that a function caller repeats a corresponding check.
  
  This issue was fixed by using the software Coccinelle 1.0.0-rc24.
  
  Signed-off-by: Markus Elfring <elfring@users.sourceforge.net>

- [Markus Elfring brought this change]

  Bug #149: Deletion of unnecessary checks before calls of the function "free"
  
  The function "free" is documented in the way that no action shall occur for
  a passed null pointer. It is therefore not needed that a function caller
  repeats a corresponding check.
  http://stackoverflow.com/questions/18775608/free-a-null-pointer-anyway-or-check-first
  
  This issue was fixed by using the software Coccinelle 1.0.0-rc24.
  
  Signed-off-by: Markus Elfring <elfring@users.sourceforge.net>

- [Jay Satiro brought this change]

  connect: Fix happy eyeballs logic for IPv4-only builds
  
  Bug: https://github.com/bagder/curl/pull/168
  
  (trynextip)
  - Don't try the "other" protocol family unless IPv6 is available. In an
  IPv4-only build the other family can only be IPv6 which is unavailable.
  
  This change essentially stops IPv4-only builds from attempting the
  "happy eyeballs" secondary parallel connection that is supposed to be
  used by the "other" address family.
  
  Prior to this change in IPv4-only builds that secondary parallel
  connection attempt could be erroneously used by the same family (IPv4)
  which caused a bug where every address after the first for a host could
  be tried twice, often in parallel. This change fixes that bug. An
  example of the bug is shown below.
  
  Assume MTEST resolves to 3 addresses 127.0.0.2, 127.0.0.3 and 127.0.0.4:
  
  * STATE: INIT => CONNECT handle 0x64f4b0; line 1046 (connection #-5000)
  * Rebuilt URL to: http://MTEST/
  * Added connection 0. The cache now contains 1 members
  * STATE: CONNECT => WAITRESOLVE handle 0x64f4b0; line 1083
  (connection #0)
  *   Trying 127.0.0.2...
  * STATE: WAITRESOLVE => WAITCONNECT handle 0x64f4b0; line 1163
  (connection #0)
  *   Trying 127.0.0.3...
  * connect to 127.0.0.2 port 80 failed: Connection refused
  *   Trying 127.0.0.3...
  * connect to 127.0.0.3 port 80 failed: Connection refused
  *   Trying 127.0.0.4...
  * connect to 127.0.0.3 port 80 failed: Connection refused
  *   Trying 127.0.0.4...
  * connect to 127.0.0.4 port 80 failed: Connection refused
  * connect to 127.0.0.4 port 80 failed: Connection refused
  * Failed to connect to MTEST port 80: Connection refused
  * Closing connection 0
  * The cache now contains 0 members
  * Expire cleared
  curl: (7) Failed to connect to MTEST port 80: Connection refused
  
  The bug was born in commit bagder/curl@2d435c7.

- mksymbolsmanpage.pl: use std header and generate better nroff header

- [Frank Meier brought this change]

  closesocket: call multi socket cb on close even with custom close
  
  In function Curl_closesocket() in connect.c the call to
  Curl_multi_closed() was wrongly omitted if a socket close function
  (CURLOPT_CLOSESOCKETFUNCTION) is registered.
  
  That would lead to not removing the socket from the internal hash table
  and not calling the multi socket callback appropriately.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1493

- [Tobias Stoeckmann brought this change]

  hostip: Fix signal race in Curl_resolv_timeout.
  
  A signal handler for SIGALRM is installed in Curl_resolv_timeout. It is
  configured to interrupt system calls and uses siglongjmp to return into
  the function if alarm() goes off.
  
  The signal handler is installed before curl_jmpenv is initialized.
  This means that an already installed alarm timer could trigger the
  newly installed signal handler, leading to undefined behavior when it
  accesses the uninitialized curl_jmpenv.
  
  Even if there is no previously installed alarm available, the code in
  Curl_resolv_timeout itself installs an alarm before the environment is
  fully set up. If the process is sent into suspend right after that, the
  signal handler could be called too early as in previous scenario.
  
  To fix this, the signal handler should only be installed and the alarm
  timer only be set after sigsetjmp has been called.

- http2: detect prematures close without data transfered
  
  ... by using the regular Curl_http_done() method which checks for
  that. This makes test 1801 fail consistently with error 56 (which seems
  fine) to that test is also updated here.
  
  Reported-by: Ben Darnell
  Bug: https://github.com/bagder/curl/issues/166

Dan Fandrich (13 Mar 2015)
- test320: Expect the Host header to be the first header
  
  Required for the test to work after a5d994941c2b.

Daniel Stenberg (12 Mar 2015)
- RELEASE-NOTES: synced with 186e46d88dd

- openssl: use colons properly in the ciphers list
  
  While the previous string worked, this is the documented format.
  
  Reported-by: Richard Moore

- openssl: sort the ciphers on strength
  
  This makes curl pick better (stronger) ciphers by default. The strongest
  available ciphers are fine according to the HTTP/2 spec so an OpenSSL
  built curl is no longer rejected by string HTTP/2 servers.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1487

- [Fabian Keil brought this change]

  test203[0-3]: Expect the Host header to be the first header
  
  Required for the tests to work after a5d994941c2b.

- openssl: show the cipher selection to use

- http: always send Host: header as first header
  
  ...after the method line:
  
   "Since the Host field-value is critical information for handling a
   request, a user agent SHOULD generate Host as the first header field
   following the request-line." / RFC 7230 section 5.4
  
  Additionally, this will also make libcurl ignore multiple specified
  custom Host: headers and only use the first one. Test 1121 has been
  updated accordingly
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1491
  Reported-by: Rainer Canavan

- [Alexander Pepper brought this change]

  mk-ca-bundle bugfix: Don't report SHA1 numbers with "-q".
  
  Also unified printing to STDERR by creating the helper method "report".

- proxy: re-use proxy connections (regression)
  
  When checking for a connection to re-use, a proxy-using request must
  check for and use a proxy connection and not one based on the host
  name!
  
  Added test 1421 to verify
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1492

- [Jay Satiro brought this change]

  memanalyze.pl: handle free(NULL)

- [Jay Satiro brought this change]

  .travis.yml: Change CI make test to make test-full
  
  - Change the continuous integration script to use 'make test-full'
  instead of just 'make test' so that the diagnostic log output is
  printed to stdout when a test fails.
  
  - Change the continuous integration script to use
  './configure --enable-debug' instead of just './configure' so that the
  memory analyzer will work during testing.
  
  Prior to this change Travis used its default C test script:
  ./configure && make && make test

- [Alessandro Ghedini brought this change]

  gtls: correctly align certificate status verification messages

- [Alessandro Ghedini brought this change]

  gtls: don't print double newline after certificate dates

- [Alessandro Ghedini brought this change]

  gtls: print negotiated TLS version and full cipher suite name
  
  Instead of priting cipher and MAC algorithms names separately, print the
  whole cipher suite string which also includes the key exchange algorithm,
  along with the negotiated TLS version.

- gtls: fix compiler warnings

- [Alessandro Ghedini brought this change]

  gtls: add support for CURLOPT_CAPATH

- [stopiccot brought this change]

  MacOSX-Framework: use @rpath instead of @executable_path
  
  Bug: https://github.com/bagder/curl/pull/157

- RELEASE-NOTES: synced with c19349951

- multi: fix *getsock() with CONNECT
  
  The code used some happy eyeballs logic even _after_ CONNECT has been
  sent to a proxy, while the happy eyeball phase is already (should be)
  over by then.
  
  This is solved by splitting the multi state into two separate states
  introducing the new SENDPROTOCONNECT state.
  
  Bug: http://curl.haxx.se/mail/lib-2015-01/0170.html
  Reported-by: Peter Laser

- conncontrol: only log changes to the connection bit

- http2: use CURL_HTTP_VERSION_* symbols instead of NPN_*
  
  Since they already exist and will make comparing easier

- http2: make the info-message about receiving HTTP2 headers debug-only

- [Alessandro Ghedini brought this change]

  urldata: remove unused asked_for_h2 field

- [Alessandro Ghedini brought this change]

  polarssl: make it possible to enable ALPN/NPN without HTTP2

- [Alessandro Ghedini brought this change]

  nss: make it possible to enable ALPN/NPN without HTTP2

- [Alessandro Ghedini brought this change]

  gtls: make it possible to enable ALPN/NPN without HTTP2

- [Alessandro Ghedini brought this change]

  openssl: make it possible to enable ALPN/NPN without HTTP2

- metalink: add some error checks
  
  malloc() and strdup() calls without checking return codes.
  
  Reported-by: Markus Elfring
  Bug: https://github.com/bagder/curl/issues/150

- curl_easy_setopt.3: added CURLOPT_SSL_VERIFYSTATUS
  
  Reported-by: Jonathan Cardoso

- urldata: fix gnutls build

Steve Holme (5 Mar 2015)
- openssl: Removed use of USE_SSLEAY from the Visual Studio project files
  
  In addition to commit 709cf76f6b, removed the USE_SSLEAY preprocessor
  variable from the Visual Studio project files as it isn't required
  anymore.

Daniel Stenberg (5 Mar 2015)
- multi: fix memory-leak on timeout (regression)
  
  Since 1342a96ecfe0d44, a timeout detected in the multi state machine didn't
  necesarily clear everything up, like formpost data.
  
  Bug: https://github.com/bagder/curl/issues/147
  Reported-by: Michel Promonet
  Patched-by: Michel Promonet

- configure: follow-up fix from 709cf76f6
  
  OpenSSL handling was a little broken.

- openssl: remove all uses of USE_SSLEAY
  
  SSLeay was the name of the library that was subsequently turned into
  OpenSSL many moons ago (1999). curl does not work with the old SSLeay
  library since years. This is now reflected by only using USE_OPENSSL in
  code that depends on OpenSSL.

- [Sergei Nikulov brought this change]

  cmake: handle build definitions CURLDEBUG/DEBUGBUILD
  
  Acked-by: Brad King

- FAQ: 4.21 Why is there a HTTP/1.1 in my HTTP/2 request?

- symbols.pl: handle '-' in the deprecated field
  
  ... which otherwise made the script skip the _LAST define for some
  symbols.
  
  Reported-by: Jeroen Ooms
  Bug: http://curl.haxx.se/mail/lib-2015-03/0052.html

- curl.1: fix "The the" typo
  
  Reported-by: Jon Seymour

- vtls: use curl_printf.h all over
  
  No need to use _MPRINTF_REPLACE internally.

- tool: use ENABLE_CURLX_PRINTF instead of _MPRINTF_REPLACE

- tool_writeenv: remove _MPRINTF_REPLACE define, it wasn't used

- [Sergei Nikulov brought this change]

  libtest: fixed linker errors on msvc
  
  Bug: https://github.com/bagder/curl/pull/144

- mprintf.h: remove #ifdef CURLDEBUG
  
  ... and as a consequence, introduce curl_printf.h with that re-define
  magic instead and make all libcurl code use that instead.

- tool_getpass: remove unused curl/mprintf.h include

- CONTRIBUTING.md: file for advice on github

- [Viktor Szakáts brought this change]

  BINDINGS: add link to Harbour bindings
  
  And UTF8-fix a few names

- CURLOPT_HEADERFUNCTION.3: typo in error code name
  
  Reported-by: Jonathan Cardoso

- BINDINGS: tclcurl moved
  
  Reporte-by: Steve Havelka

- [Jay Satiro brought this change]

  opts: Fix pipelining examples

- [Jay Satiro brought this change]

  curl_multi_setopt.3: Link to CURLMOPT_MAXCONNECTS

- CONTRIBUTE: the new more github-friendly attitude!

Steve Holme (28 Feb 2015)
- RELEASE-NOTES: Synced with 921d195187

Kamil Dudka (28 Feb 2015)
- tool: wrap lines longer than 79 columns
  
  ... to avoid a build failure when configured with --enable-debug

Steve Holme (27 Feb 2015)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Return error if stream was closed with other than NO_ERROR
  
  Previously, we just ignored error code passed to
  on_stream_close_callback and just return 0 (success) after stream
  closure even if stream was reset with error.  This patch records error
  code in on_stream_close_callback, and return -1 and use CURLE_HTTP2
  error code on abnormal stream closure.

- tool: Updated the warnf() function to use the GlobalConfig structure
  
  As the 'error' and 'mute' options are now part of the GlobalConfig,
  rather than per Operation, updated the warnf() function to use this
  structure rather than the OperationConfig.

- build: Removed DataExecutionPrevention directive from VC9+ project files
  
  Removed the DataExecutionPrevention directive from the project files for
  Visual Studio 2008 and above. The XML value in the VC9 project files was
  set to "0" (Default) whilst the VC10+ project files contained an empty
  XML element.

- build: Use default RandomizedBaseAddress directive in VC9+ project files
  
  Visual Studio 2008 introduced support for the address space layout
  randomization (ASLR) feature of Windows Vista. However, upgrading the
  VC8 project files to VC9 and above disabled this feature.
  
  Removed the RandomizedBaseAddress directive to enabled the default
  setting (/DYNAMICBASE). Note: This doesn't appear to have any negative
  impact when compiled and ran on Windows XP.

- build: Added support to Generate.bat for files in the upcoming vauth folder

Daniel Stenberg (25 Feb 2015)
- http2: return recv error on unexpected EOF
  
  Pointed-out-by: Tatsuhiro Tsujikawa
  Bug: http://curl.haxx.se/bug/view.cgi?id=1487

Kamil Dudka (25 Feb 2015)
- dist: add symbol-scan.pl to the tarball
  
  ... in order to make test1135 succeed

Daniel Stenberg (25 Feb 2015)
- http2: move lots of verbose output to be debug-only

Kamil Dudka (25 Feb 2015)
- curl-config.in: eliminate double quotes around CURL_CA_BUNDLE
  
  Otherwise it expands to:
  
      echo ""/etc/pki/tls/certs/ca-bundle.crt""
  
  Detected by ShellCheck:
  
      curl-config:74:16: warning: The double quotes around this do
      nothing.  Remove or escape them. [SC2140]

- nss: do not skip Curl_nss_seed() if data is NULL
  
  In that case, we only skip writing the error message for failed NSS
  initialization (while still returning the correct error code).

- nss: improve error handling in Curl_nss_random()
  
  The vtls layer now checks the return value, so it is no longer necessary
  to abort if a random number cannot be provided by NSS.  This also fixes
  the following Coverity report:
  
  Error: FORWARD_NULL (CWE-476):
  lib/vtls/nss.c:1918: var_compare_op: Comparing "data" to null implies that "data" might be null.
  lib/vtls/nss.c:1923: var_deref_model: Passing null pointer "data" to "Curl_failf", which dereferences it.
  lib/sendf.c:154:3: deref_parm: Directly dereferencing parameter "data".

Daniel Stenberg (25 Feb 2015)
- RELEASE-PROCEDURE: add some more future release dates
  
  ... and remove some old ones

- sws: timeout idle CONNECT connections

- bump: start working toward 7.42.0

Version 7.41.0 (25 Feb 2015)

Daniel Stenberg (25 Feb 2015)
- THANKS: added contributors from the 7.41.0 RELEASE-NOTES

- RELEASE-NOTES: sync with ffc2aeec6e (7.41.0 release time!)

Marc Hoersken (25 Feb 2015)
- Revert "telnet.c: fix handling of 0 being returned from custom read function"
  
  This reverts commit 03fa576833643c67579ae216c4e7350fa9b5f2fe.

- telnet.c: fix invalid use of custom read function if not being set
  
  obj_count can be 1 if the custom read function is set or the stdin
  handle is a reference to a pipe. Since the pipe should be handled
  using the PeekNamedPipe-check below, the custom read function should
  only be used if it is actually enabled.

- telnet.c: fix handling of 0 being returned from custom read function
  
  According to [1]: "Returning 0 will signal end-of-file to the library
  and cause it to stop the current transfer."
  This change makes the Windows telnet code handle this case accordingly.
  
   [1] http://curl.haxx.se/libcurl/c/CURLOPT_READFUNCTION.html

Daniel Stenberg (24 Feb 2015)
- sws: stop logging about TPC_NODELAY nonsense

- lib530: make it less timing sensible
  
  ... by making sure the first request is completed before doing the
  remainder.

Kamil Dudka (23 Feb 2015)
- connect: wait for IPv4 connection attempts
  
  ... even if the last IPv6 connection attempt has failed.
  
  Bug: https://bugzilla.redhat.com/show_bug.cgi?id=1187531#c4

- connect: avoid skipping an IPv4 address
  
  ... in case the protocol versions are mixed in a DNS response
  (IPv6 -> IPv4 -> IPv6).
  
  Bug: https://bugzilla.redhat.com/show_bug.cgi?id=1187531#c3

Daniel Stenberg (23 Feb 2015)
- RELEASE-NOTES: synced with 5e4395eab839d

- ROADMAP: curl_easy_setopt.3 has already been split up
  
  Remove cmake as marked for removal. It is in much better state now.

- ROADMAP: extend the HTTP/2 stuff, remove SPDY

- [Julian Ospald brought this change]

  configure: allow both --with-ca-bundle and --with-ca-path
  
  SSL_CTX_load_verify_locations by default (and if given non-Null
  parameters) searches the CAfile first and falls back to CApath.  This
  allows for CAfile to be a basis (e.g. installed by the package manager)
  and CApath to be a user configured directory.
  
  This wasn't reflected by the previous configure constraint which this
  patch fixes.
  
  Bug: https://github.com/bagder/curl/pull/139

- [Ben Boeckel brought this change]

  cmake: install the dll file to the correct directory

- [Alessandro Ghedini brought this change]

  nss: fix NPN/ALPN protocol negotiation
  
  Correctly check for memcmp() return value (it returns 0 if the strings match).
  
  This is not really important, since curl is going to use http/1.1 anyway, but
  it's still a bug I guess.

- [Alessandro Ghedini brought this change]

  polarssl: fix ALPN protocol negotiation
  
  Correctly check for strncmp() return value (it returns 0 if the strings
  match).

- [Sergei Nikulov brought this change]

  CMake: Fix generation of tool_hugehelp.c on windows
  
  Use "cmake -E echo" instead of "echo".
  
  Reviewed-by: Brad King <brad.king@kitware.com>

- [Sergei Nikulov brought this change]

  CMake: fix winsock2 detection on windows
  
  Set CMAKE_REQUIRED_DEFINITIONS to include definitions needed to get
  the winsock2 API from windows.h.  Simplify the order of checks to
  avoid extra conditions.
  
  Use check_include_file instead of check_include_file_concat to look
  for OpenSSL headers.  They do not need to participate in a sequence
  of dependent system headers.  Also they may cause winsock.h to be
  included before ws2tcpip.h, causing the latter to not be detected
  in the sequence.
  
  Reviewed-by: Brad King <brad.king@kitware.com>

- [Alessandro Ghedini brought this change]

  gtls: fix build with HTTP2

Steve Holme (16 Feb 2015)
- Makefile.vc6: Corrected typos in rename of darwinssl.obj

Nick Zitzmann (15 Feb 2015)
- By request, change the name of "curl_darwinssl.[ch]" to "darwinssl.[ch]"

Steve Holme (14 Feb 2015)
- RELEASE-NOTES: Synced with 6f89f86c3d

- tests/README: Updated to reflect email test ranges

- [Alessandro Ghedini brought this change]

  curl.1: --cert-status is also supported by OpenSSL now

- build: Removed Visual Studio SuppressStartupBanner directive for VC8+
  
  Visual Studio 2005 and above defaults to disabling the startup banner
  for the Compiler, Linker and MIDL tools (with /NOLOGO). As such there
  is no need to explicitly set the SuppressStartupBanner directive, as
  this is a leftover from the VC7 and VC7.1 projects being upgraded to
  VC8 and above.

Kamil Dudka (12 Feb 2015)
- openssl: fix a compile-time warning
  
  lib/vtls/openssl.c:1450:7: warning: extra tokens at end of #endif directive

Steve Holme (11 Feb 2015)
- openssl: Use OPENSSL_IS_BORINGSSL for BoringSSL detection
  
  For consistency with other conditionally compiled code in openssl.c,
  use OPENSSL_IS_BORINGSSL rather than HAVE_BORINGSSL and try to use
  HAVE_BORINGSSL outside of openssl.c when the OpenSSL header files are
  not included.

Patrick Monnerat (11 Feb 2015)
- ftp: accept all 2xx responses to the PORT command

Steve Holme (9 Feb 2015)
- openssl: Disable OCSP in old versions of OpenSSL
  
  Versions of OpenSSL prior to v0.9.8h do not support the necessary
  functions for OCSP stapling.

Daniel Stenberg (9 Feb 2015)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix bug that associated stream canceled on PUSH_PROMISE
  
  Previously we don't ignore PUSH_PROMISE header fields in on_header
  callback.  It makes header values mixed with following HEADERS,
  resulting protocol error.

- [Jay Satiro brought this change]

  polarssl: Fix exclusive SSL protocol version options
  
  Prior to this change the options for exclusive SSL protocol versions did
  not actually set the protocol exclusive.
  
  http://curl.haxx.se/mail/lib-2015-01/0002.html
  Reported-by: Dan Fandrich

- [Jay Satiro brought this change]

  gskit: Fix exclusive SSLv3 option

- curl.1: clarify that -X is used for all requests
  
  Reported-by: Jon Seymour

- curl.1: add warning when using -H and redirects

Steve Holme (7 Feb 2015)
- schannel: Removed curl_ prefix from source files
  
  Removed the curl_ prefix from the schannel source files as discussed
  with Marc and Daniel at FOSDEM.

Daniel Stenberg (6 Feb 2015)
- md5: use axTLS's own MD5 functions when available

- MD(4|5): make the MD4_* and MD5_* functions static

- axtls: fix conversion from size_t to int warning

Steve Holme (5 Feb 2015)
- ftp: Use 'CURLcode result' for curl result codes

Daniel Stenberg (5 Feb 2015)
- openssl: SSL_SESSION->ssl_version no longer exist
  
  The struct went private in 1.0.2 so we cannot read the version number
  from there anymore. Use SSL_version() instead!
  
  Reported-by: Gisle Vanem
  Bug: http://curl.haxx.se/mail/lib-2015-02/0034.html

Dan Fandrich (4 Feb 2015)
- unit1600: Fix compilation when NTLM is disabled

Daniel Stenberg (4 Feb 2015)
- MD5: fix compiler warnings and code style nits

- MD5: replace implementation
  
  The previous one was "encumbered" by RSA Inc - to avoid the licensing
  restrictions it has being replaced. This is the initial import,
  inserting the md5.c and md5.h files from
  http://openwall.info/wiki/people/solar/software/public-domain-source-code/md5
  
  Code-by: Alexander Peslyak

- MD4: fix compiler warnings and code style nits

- MD4: replace implementation
  
  The previous one was "encumbered" by RSA Inc - to avoid the licensing
  restrictions it has being replaced. This is the initial import,
  inserting the md4.c and md4.h files from
  http://openwall.info/wiki/people/solar/software/public-domain-source-code/md4
  
  Code-by: Alexander Peslyak

Steve Holme (4 Feb 2015)
- telnet: Prefer 'CURLcode result' for curl result codes

- hostasyn: Prefer 'CURLcode result' for curl result codes

- schannel: Prefer 'CURLcode result' for curl result codes

Daniel Stenberg (3 Feb 2015)
- unit1601: MD5 unit tests

- unit1600: unit test for Curl_ntlm_core_mk_nt_hash

- unit1600: NTLM unit test

- tests/README: add a new range, clean up some language

- [Jay Satiro brought this change]

  opts: CURLOPT_CAINFO availability depends on SSL engine

- getpass: protect include with proper #ifdef
  
  Reported-by: Tamir

- getpass_r: read from stdin, not stdout!
  
  The file number used was wrong. This bug was introduced over 10 years
  ago, proving this function isn't used much...
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1476
  Reported-by: Tamir

- test1135: verify the CURL_EXTERN order in header files

- Makefile.am: fix 'make distcheck'
  
  ... by removing generated files from the *_DIST variable [*] and instead
  generate them with a .dist suffix, since that is then handled and put
  into the release archive by our generic dist-hook.
  
  [*] = 'make distcheck' fails with non-existing files listed there

Steve Holme (2 Feb 2015)
- curl_sasl.c: More code policing
  
  Better use of 80 character line limit, comment corrections and line
  spacing preferences.

Daniel Stenberg (2 Feb 2015)
- libcurl-symbols: first basic shot for autogenerated docs

- FAQ: minor edit of 3.22

Steve Holme (2 Feb 2015)
- build: Added removal of Visual Studio project files
  
  Added the removal of the locally generated project files so one
  may revert to a clean repository.

- build: Renamed top level Visual Studio solution files
  
  In preparation for adding the test suite and examples projects renamed
  the top level "all" solution files to better describe what they are.
  
  This will also enable us to use "curl" rather than "curlsrc" for the
  command line tool solution and project files, which will simplify some
  of the configuration.

- build: Enabled DEBUGBUILD in Visual Studio debug builds
  
  Defined the DEBUGBUILD pre-processor variable to allow extra logging,
  which is particularly useful in debug builds, as we use this and Visual
  Studio typically uses _DEBUG.
  
  We could define DEBUBBUILD, in curl_setup.h, when _MSC_VER and _DEBUG is
  defined but that would also affect the makefile based builds which we
  probably don't want to do.

- build: Removed unused Visual Studio bscmake settings

Daniel Stenberg (2 Feb 2015)
- CURLOPT_HTTP_VERSION.3: CURL_HTTP_VERSION_2_0 added in 7.33.0
  
  And modify the text to refer to HTTP 2 as it isn't called "2.0".
  
  Reported-By: Michael Wallner

Marc Hoersken (31 Jan 2015)
- TODO: moved WinSSL/SChannel todo items into docs

Daniel Stenberg (29 Jan 2015)
- [Michael Kaufmann brought this change]

  CURLOPT_SEEKFUNCTION.3: also when server closes a connection

Steve Holme (29 Jan 2015)
- curl_sasl.c: Fixed compilation warning when cryptography is disabled
  
  curl_sasl.c:1506: warning: unused variable 'chlg'

- curl_sasl.c: Fixed compilation warning when verbose debug output disabled
  
  curl_sasl.c:1317: warning: unused parameter 'conn'

- ntlm_core: Use own odd parity function when crypto engine doesn't have one

- ntlm_core: Prefer sizeof(key) rather than hard coded sizes

- ntlm_core: Added consistent comments to DES functions

- des: Added Curl_des_set_odd_parity()
  
  Added Curl_des_set_odd_parity() for use when cryptography engines
  don't include this functionality.

- tests: Grouped SMTP SASL EXTERNAL tests with other SMTP tests

- tests: Grouped POP3 SASL EXTERNAL tests with other POP3 tests

- tests: Grouped IMAP SASL EXTERNAL tests with other IMAP tests

- sasl: Minor code policing and grammar corrections

Daniel Stenberg (28 Jan 2015)
- [Gisle Vanem brought this change]

  ldap: build with BoringSSL

- security: avoid compiler warning
  
  Possible access to uninitialised memory '&nread' at line 140 of
  lib/security.c in function 'ftp_send_command'.
  
  Reported-by: Rich Burridge

- runtests: identify BoringSSL and libressl

Patrick Monnerat (27 Jan 2015)
- docs: cite SASL external authentication.

- sasl: remove XOAUTH2 from default enabled authentication mechanism.

- test: add test cases for sasl external authentication (imap/pop3/smtp).

- imap: remove automatic password setting: it breaks external sasl authentication

- sasl: implement EXTERNAL authentication mechanism.
    Its use is only enabled by explicit requirement in URL (;AUTH=EXTERNAL) and
  by not setting the password.

Steve Holme (27 Jan 2015)
- openssl: Fixed Curl_ossl_cert_status_request() not returning FALSE
  
  Modified the Curl_ossl_cert_status_request() function to return FALSE
  when built with BoringSSL or when OpenSSL is missing the necessary TLS
  extensions.

- openssl: Fixed compilation errors when OpenSSL built with 'no-tlsext'
  
  Fixed the build of openssl.c when OpenSSL is built without the necessary
  TLS extensions for OCSP stapling.
  
  Reported-by: John E. Malmberg

- [Brad Spencer brought this change]

  curl_setup: Disable SMB/CIFS support when HTTP only

- RELEASE-NOTES: Synced with 37824498a3

Daniel Stenberg (22 Jan 2015)
- configure: remove detection of the old yassl emulation API
  
  ... as that is ancient history and not used.

- OCSP stapling: disabled when build with BoringSSL

- [Alessandro Ghedini brought this change]

  openssl: add support for the Certificate Status Request TLS extension
  
  Also known as "status_request" or OCSP stapling, defined in RFC6066
  section 8.
  
  Thanks-to: Joe Mason
  - for the work-around for the OpenSSL bug.

- BoringSSL: fix build for non-configure builds
  
  HAVE_BORINGSSL gets defined now by configure and should be defined by
  other build systems in case a BoringSSL build is desired.

- configure: fix BoringSSL detection and detect libresssl

Steve Holme (22 Jan 2015)
- curl_sasl: Reinstate the sasl_ prefix for locally scoped functions
  
  Commit 7a8b2885e2 made some functions static and removed the public
  Curl_ prefix. Unfortunately, it also removed the sasl_ prefix, which
  is the naming convention we use in this source file.

- curl_sasl: Minor code policing following recent commits

Daniel Stenberg (22 Jan 2015)
- [John Malmberg brought this change]

  openvms: Handle openssl/0.8.9zb version parsing
  
  packages/vms/gnv_link_curl.com was assuming only a single letter suffix
  in the openssl version.  That assumption has been fixed for 7.40.

- BoringSSL: detected by configure, switches off NTLM

- BoringSSL: no PKCS12 support nor ERR_remove_state

- [Leith Bade brought this change]

  BoringSSL: fix build

Steve Holme (20 Jan 2015)
- curl_sasl.c: chlglen is not used when cryptography is disabled

- curl_sasl.c: Fixed compilation warning when cyptography is disabled
  
  curl_sasl.c:1453: warning C4101: 'serverdata' : unreferenced local
                    variable

- curl_sasl.c: Fixed compilation error when USE_WINDOWS_SSPI defined
  
  curl_sasl.c:1221: error C2065: 'mechtable' : undeclared identifier
  
  This error could also happen for non-SSPI builds when cryptography is
  disabled (CURL_DISABLE_CRYPTO_AUTH is defined).

Patrick Monnerat (20 Jan 2015)
- SASL: make some procedures local-scoped

- SASL: common state engine for imap/pop3/smtp

- SASL: common URL option and auth capabilities decoders for all protocols

- IMAP/POP3/SMTP: use a per-connection sub-structure for SASL parameters.

Daniel Stenberg (20 Jan 2015)
- ipv6: enclose AF_INET6 uses with proper #ifdefs for ipv6
  
  Reported-by: Chris Young

- [Chris Young brought this change]

  timeval: typecast for better type (on Amiga)
  
  There is an issue with conflicting "struct timeval" definitions with
  certain AmigaOS releases and C libraries, depending on what gets
  included when.  It's a minor difference - the OS one is unsigned,
  whereas the common structure has signed elements.  If the OS one ends up
  getting defined, this causes a timing calculation error in curl.
  
  It's easy enough to resolve this at the curl end, by casting the
  potentially errorneous calculation to a signed long.

- openssl: do public key pinning check independently
  
  ... of the other cert verification checks so that you can set verifyhost
  and verifypeer to FALSE and still check the public key.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1471
  Reported-by: Kyle J. McKay

Patrick Monnerat (19 Jan 2015)
- OS400: CURLOPT_SSL_VERIFYSTATUS for ILE/RPG too.

Steve Holme (18 Jan 2015)
- ldap: Renamed the CURL_LDAP_WIN definition to USE_WIN32_LDAP
  
  For consistency with other USE_WIN32_ defines as well as the
  USE_OPENLDAP define.

- http_negotiate: Use dynamic buffer for SPN generation
  
  Use a dynamicly allocated buffer for the temporary SPN variable similar
  to how the SASL GSS-API code does, rather than using a fixed buffer of
  2048 characters.

- sasl_gssapi: Make Curl_sasl_build_gssapi_spn() public

- sasl_gssapi: Fixed memory leak with local SPN variable

Daniel Stenberg (17 Jan 2015)
- http_negotiate.c: unused variable 'ret'

Steve Holme (17 Jan 2015)
- gskit.h: Code policing of function pointer arguments

- vtls: Removed unimplemented overrides of curlssl_close_all()
  
  Carrying on from commit 037cd0d991, removed the following unimplemented
  instances of curlssl_close_all():
  
  Curl_axtls_close_all()
  Curl_darwinssl_close_all()
  Curl_cyassl_close_all()
  Curl_gskit_close_all()
  Curl_gtls_close_all()
  Curl_nss_close_all()
  Curl_polarssl_close_all()

- vtls: Separate the SSL backend definition from the API setup
  
  Slight code cleanup as the SSL backend #define is mixed up with the API
  function setup.

- vtls: Fixed compilation errors when SSL not used
  
  Fixed the following warning and error from commit 3af90a6e19 when SSL
  is not being used:
  
  url.c:2004: warning C4013: 'Curl_ssl_cert_status_request' undefined;
              assuming extern returning int
  
  error LNK2019: unresolved external symbol Curl_ssl_cert_status_request
                 referenced in function Curl_setopt

- http_negotiate: Added empty decoded challenge message info text

- http_negotiate: Return CURLcode in Curl_input_negotiate() instead of int

- http_negotiate_sspi: Prefer use of 'attrs' for context attributes
  
  Use the same variable name as other areas of SSPI code.

- http_negotiate_sspi: Use correct return type for QuerySecurityPackageInfo()
  
  Use the SECURITY_STATUS typedef rather than a unsigned long for the
  QuerySecurityPackageInfo() return and rename the variable as per other
  areas of SSPI code.

- http_negotiate_sspi: Use 'CURLcode result' for CURL result code

- curl_endian: Fixed build when 64-bit integers are not supported (Part 2)
  
  Missed Curl_read64_be() in commit bb12d44471 :(

Daniel Stenberg (16 Jan 2015)
- CURLOPT_SSL_VERIFYSTATUS.3: mention it is added in version 7.41.0

- curlver.h: next release is 7.41.0 due to the changes

- RELEASE-NOTES: mention the new OCSP stapling options, bump version

- opts: add CURLOPT_SSL_VERIFYSTATUS* to docs/Makefile

- help: add --cert-status to --help output

- copyright years: after OCSP stapling changes

- [Alessandro Ghedini brought this change]

  curl: add --cert-status option
  
  This enables the CURLOPT_SSL_VERIFYSTATUS functionality.

- [Alessandro Ghedini brought this change]

  nss: add support for the Certificate Status Request TLS extension
  
  Also known as "status_request" or OCSP stapling, defined in RFC6066 section 8.
  
  This requires NSS 3.15 or higher.

- [Alessandro Ghedini brought this change]

  gtls: add support for the Certificate Status Request TLS extension
  
  Also known as "status_request" or OCSP stapling, defined in RFC6066 section 8.
  
  This requires GnuTLS 3.1.3 or higher to build, however it's recommended to use
  at least GnuTLS 3.3.11 since previous versions had a bug that caused the OCSP
  response verfication to fail even on valid responses.

- [Alessandro Ghedini brought this change]

  url: add CURLOPT_SSL_VERIFYSTATUS option
  
  This option can be used to enable/disable certificate status verification using
  the "Certificate Status Request" TLS extension defined in RFC6066 section 8.
  
  This also adds the CURLE_SSL_INVALIDCERTSTATUS error, to be used when the
  certificate status verification fails, and the Curl_ssl_cert_status_request()
  function, used to check whether the SSL backend supports the status_request
  extension.

- TheArtOfHttpScripting: skip the date at the top, we have git

- TheArtOfHttpScripting: phrase it TLS lib agnostic

Steve Holme (16 Jan 2015)
- TODO: Added some SMB ideas

- RELEASE-NOTES: Synced with 5f09947d28

- build-openssl.bat: Added check for Perl installation

- checksrc.bat: Better detection of Perl installation

- curl_endian: Fixed build when 64-bit integers are not supported
  
  Bug: http://curl.haxx.se/mail/lib-2015-01/0094.html
  Reported-by: John E. Malmberg

Daniel Stenberg (15 Jan 2015)
- [Yun SangHo brought this change]

  curl.h: remove extra space

- Curl_pretransfer: reset expected transfer sizes
  
  Reported-by: Mohammad AlSaleh
  Bug: http://curl.haxx.se/mail/lib-2015-01/0065.html

Marc Hoersken (12 Jan 2015)
- curl_schannel.c: mark session as removed from cache if not freed
  
  If the session is still used by active SSL/TLS connections, it
  cannot be closed yet. Thus we mark the session as not being cached
  any longer so that the reference counting mechanism in
  Curl_schannel_shutdown is used to close and free the session.
  
  Reported-by: Jean-Francois Durand

Steve Holme (9 Jan 2015)
- RELEASE-NOTES: Synced with d21b66835f

Guenter Knauf (9 Jan 2015)
- Merge pull request #134 from vszakats/mingw-m64
  
  add -m64 CFLAGS when targeting mingw64, add -m32/-m64 to LDFLAGS

- Merge pull request #136 from vszakats/mingw-allow-custom-cflags
  
  mingw build: allow to pass custom CFLAGS

Daniel Stenberg (9 Jan 2015)
- NSS: fix compiler error when built http2-enabled

Steve Holme (9 Jan 2015)
- gssapi: Remove need for duplicated GSS_C_NT_HOSTBASED_SERVICE definitions
  
  Better code reuse and consistency in calls to gss_import_name().

Viktor Szakats (9 Jan 2015)
- mingw build: allow to pass custom CFLAGS

Daniel Stenberg (8 Jan 2015)
- FTP: if EPSV fails on IPV6 connections, bail out
  
  ... instead of trying PASV, since PASV can't work with IPv6.
  
  Reported-by: Vojtěch Král

- FTP: fix IPv6 host using link-local address
  
  ... and make sure we can connect the data connection to a host name that
  is longer than 48 bytes.
  
  Also simplifies the code somewhat by re-using the original host name
  more, as it is likely still in the DNS cache.
  
  Original-Patch-by: Vojtěch Král
  Bug: http://curl.haxx.se/bug/view.cgi?id=1468

Steve Holme (8 Jan 2015)
- [Sam Schanken brought this change]

  winbuild: Added option to build with c-ares
  
  Added support for a WITH_CARES option to be used when invoking nmake
  via Makefile.vc. This option enables linking against both the DLL and
  static versions of the c-ares libraries, as well as the debug and
  release varients, depending on the value of DEBUG. The USE_ARES
  preprocessor symbol is also defined.

Guenter Knauf (8 Jan 2015)
- NetWare build: added TLS-SRP enabled build.

Steve Holme (8 Jan 2015)
- sasl_gssapi: Fixed build on NetBSD with built-in GSS-API
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1469
  Reported-by: Thomas Klausner

Viktor Szakats (8 Jan 2015)
- add -m64 clags when targeting mingw64, add -m32/-m64 to LDFLAGS

Daniel Stenberg (8 Jan 2015)
- bump: start working towards 7.40.1

- THANKS: 14 new contributors from the 7.40.0 release notes

Version 7.40.0 (7 Jan 2015)

Daniel Stenberg (7 Jan 2015)
- RELEASE-NOTES: version 7.40.0

- darwinssl: fix session ID keys to only reuse identical sessions
  
  ...to avoid a session ID getting cached without certificate checking and
  then after a subsequent _enabling_ of the check libcurl could still
  re-use the session done without cert checks.
  
  Bug: http://curl.haxx.se/docs/adv_20150108A.html
  Reported-by: Marc Hesse

- tests: make sure CRLFs can't be used in URLs passed to proxy
  
  Bug: http://curl.haxx.se/docs/adv_20150108B.html

- url-parsing: reject CRLFs within URLs
  
  Bug: http://curl.haxx.se/docs/adv_20150108B.html
  Reported-by: Andrey Labunets

Steve Holme (7 Jan 2015)
- ldap: Convert attribute output to UTF-8 when Unicode

- ldap: Convert DN output to UTF-8 when Unicode

Daniel Stenberg (7 Jan 2015)
- hostip: remove 'stale' argument from Curl_fetch_addr proto
  
  Also, remove the log output of the resolved name is NOT in the cache in
  the spirit of only telling when something is actually happening.

Steve Holme (7 Jan 2015)
- ldap/imap: Fixed spelling mistake in comments and variable names
  
  Reported-by: Michael Osipov

Daniel Stenberg (7 Jan 2015)
- RELEASE-NOTES: updated with ./contributors.sh output

Dan Fandrich (5 Jan 2015)
- curl_multibyte.h: Eliminated some trailing whitespace

Steve Holme (4 Jan 2015)
- RELEASE-NOTES: Synced with ea93252ef1

- ldap: Fixed Unicode usage for all Win32 builds
  
  Otherwise, the fixes in the previous commits would only be applicable
  to IDN and SSPI based builds and not others such as OpenSSL with LDAP
  enabled.

- ldap: Fixed memory leak from commit efb64fdf80

- ldap: Fix memory leak from commit 3a805c5cc1

- ldap: Fixed attribute variable warnings when Unicode is enabled
  
  Use 'TCHAR *' for local attribute variable rather than 'char *'.

- ldap: Fixed DN variable warnings when Unicode is enabled
  
  Use 'TCHAR *' for local DN variable rather than 'char *'.

- ldap: Remove the unescape_elements() function
  
  Due to the recent modifications this function is no longer used.

- ldap.c: Fixed compilation warning
  
  ldap.c:98: warning: extra tokens at end of #endif directive

- ldap: Fixed support for Unicode filter in Win32 search call

- ldap.c: Fixed compilation warning
  
  ldap.c:802: warning: comparison between signed and unsigned integer
              expressions

- ldap: Fixed support for Unicode attributes in Win32 search call

- ldap: Fixed memory leak from commit efb64fdf80
  
  The unescapped DN was not freed after a successful character conversion.

- ldap.c: Fixed compilation error
  
  ldap.c:738: error: macro "LDAP_TRACE" passed 2 arguments, but takes
              just 1

- ldap.c: Fixed compilation warning
  
  ldap.c:89: warning: extra tokens at end of #endif directive

- ldap: Fixed support for Unicode DN in Win32 search call

- ldap: Fixed Unicode user and password in Win32 bind calls

- ldap: Fixed Unicode host name in Win32 initialisation calls

- ldap: Use host.dispname for infof() connection failure messages
  
  As host.name may be encoded use dispname for infof() failure messages.

- ldap: Prefer 'CURLcode result' for curl result codes

- ldap: Pass write length in all Curl_client_write() calls
  
  As we get the length for the DN and attribute variables, and we know
  the length for the line terminator, pass the length values rather than
  zero as this will save Curl_client_write() from having to perform an
  additional strlen() call.

- ldap: Fixed attribute memory leaks on failed client write
  
  Fixed memory leaks from commit 086ad79970 as was noted in the commit
  comments.

- ldap: Fixed DN memory leaks on failed client write
  
  Fixed memory leaks from commit 086ad79970 as was noted in the commit
  comments.

- curl_ntlm_core.c: Fixed compilation warning from commit 1cb17b2a5d
  
  curl_ntlm_core.c:146: warning: passing 'DES_cblock' (aka 'unsigned char
                        [8]') to parameter of type 'char *' converts
                        between pointers to integer types with different
                        sign

- ntlm: Use extend_key_56_to_64() for all cryptography engines
  
  Rather than duplicate the code in setup_des_key() for OpenSSL and in
  extend_key_56_to_64() for non-OpenSSL based crypto engines, as it is
  the same, use extend_key_56_to_64() for all engines.

- RELEASE-NOTES: Synced with 34f0bd110f

- curl_ntlm_core.c: Fixed compilation warning
  
  curl_ntlm_core.c:458: warning: 'ascii_uppercase_to_unicode_le' defined
                        but not used

- endian: Fixed bit-shift in 64-bit integer read functions
  
  From commit 43792592ca and 4bb5a351b2.
  
  Reported-by: Michael Osipov

- smb: Use endian functions for reading NBT and message size values

- endian: Added big endian read functions

- endian: Added 64-bit integer read function

- COPYING: Bumped copyright year to 2015

- version: Bump copyright year to 2015

- smb.c: Fixed compilation warnings
  
  smb.c:780: warning: passing 'char *' to parameter of type 'unsigned
             char *' converts between pointers to integer types with
             different sign
  smb.c:781: warning: passing 'char *' to parameter of type 'unsigned
             char *' converts between pointers to integer types with
             different sign
  smb.c:804: warning: passing 'char *' to parameter of type 'unsigned
             char *' converts between pointers to integer types with
             different sign

- smb: Use endian functions for reading length and offset values

- endian: Added 16-bit integer write function

- endian: Fixed Linux compilation issues
  
  Having files named endian.[c|h] seemed to cause issues under Linux so
  renamed them both to have the curl_ prefix in the filenames.

- [Julien Nabet brought this change]

  lib1900.c: Fixed cppcheck error
  
  lib1900.c:182: (style) Array index 'handlenum' is used before limits
                 check
  
  Bug: https://github.com/bagder/curl/pull/133

- endian: Added standard function descriptions

- endian: Renamed functions for curl API naming convention

- endian: Moved write functions to new module

- endian: Moved read functions to new module

- endian: Introduced endian module
  
  To allow the little endian functions, currently used in two of the NTLM
  source files, to be used by other modules such as the SMB module.

- sepheaders.c: Applied curl oding standards

- [Julien Nabet brought this change]

  sepheaders.c: Fixed resource leak on failure

- vtls: Use '(void) arg' for unused parameters
  
  Prefer void for unused parameters, rather than assigning an argument to
  itself as a) unintelligent compilers won't optimize it out, b) it can't
  be used for const parameters, c) it will cause compilation warnings for
  clang with -Wself-assign and d) is inconsistent with other areas of the
  curl source code.

- smb.c: Fixed compilation warning
  
  smb.c:586: warning: conversion to 'short unsigned int' from 'int' may
             alter its value

- [Bill Nagel brought this change]

  smb: Use the connection's upload buffer
  
  Use the connection's upload buffer instead of allocating our own send
  buffer.

- RELEASE-NOTES: Synced with 1933f9d33c

- schannel: Moved the ISC return flag definitions to the SSPI module
  
  Moved our Initialize Security Context return attribute definitions to
  the SSPI module, as a) these can be used by other SSPI based providers
  and b) the ISC required attributes are defined there.

- [Bill Nagel brought this change]

  smb: Close the connection after a failed client write

- darwinssl: Fixed compilation warning
  
  vtls.c:683:43: warning: unused parameter 'data'

- sockfilt.c: Fixed compilation warnings
  
  sockfilt.c:288: warning: conversion to 'DWORD' from 'size_t' may alter
                  its value
  sockfilt.c:291: warning: conversion to 'DWORD' from 'size_t' may alter
                  its value
  sockfilt.c:323: warning: conversion to 'DWORD' from 'size_t' may alter
                  its value
  sockfilt.c:326: warning: conversion to 'DWORD' from 'size_t' may alter
                  its value

- test1509: Fixed compilation warning
  
  lib1509.c:93:18: warning: conversion to 'long int' from 'size_t' may
                   alter its value

- test556: Fixed compilation warning
  
  lib556.c:90: warning: conversion to 'unsigned int' from 'size_t' may
               alter its value

- sasl_gssapi: Fixed use of dummy username with real username

- vtls: Fixed compilation warning and an ignored return code
  
  curl_schannel.h:123: warning: right-hand operand of comma expression
                       has no effect
  
  Some instances of the curlssl_close_all() function were declared with a
  void return type whilst others as int. The schannel version returned
  CURLE_NOT_BUILT_IN and others simply returned zero, but in all cases the
  return code was ignored by the calling function Curl_ssl_close_all().
  
  For the time being and to keep the internal API consistent, changed all
  declarations to use a void return type.
  
  To reduce code we might want to consider removing the unimplemented
  versions and use a void #define like schannel does.

Daniel Stenberg (28 Dec 2014)
- TODO: 2.3 Better support for same name resolves

Steve Holme (28 Dec 2014)
- test1520: Fixed initial teething problems
  
  * Missing initialisation of upload status caused a seg fault
  * Missing data termination caused corrupt data to be uploaded
  * Data verification should be performed in <upload> element
  * Added missing recipient list cleanup

- test1520: Fixed compilation errors

- tests: Added test for bug #1456

- checksrc.bat: Fixed a problem opening files with spaces in the filename

- openldap: Prefer use of 'CURLcode result'

- openldap: Use 'LDAPMessage *msg' for messages
  
  This frees up the 'result' variable for CURLcode based result codes.

- nss: Don't ignore Curl_extract_certinfo() OOM failure

- nss: Don't ignore Curl_ssl_init_certinfo() OOM failure

- nss: Use 'CURLcode result' for curl result codes
  
  ...and don't use CURLE_OK in failure/success comparisons.

- getinfo: Code style policing

- getinfo: Use 'CURLcode result' for curl result codes

- darwinssl: Use 'CURLcode result' for curl result codes

- polarssl: Use 'CURLcode result' for curl result codes

- docs: Updated following the addition of SASL GSSAPI via GSS-API libraries
  
  As this feature has been implemented for 7.40.0.

- asiohiper.cpp: No need to initialise members of ConnInfo
  
  ...as calloc() automatically clears the area of memory with zeros.

- asiohiper.cpp: Updated for curl coding standards
  
  ...with the exception of the start of block statement curly brackets.

- code/docs: Use correct case for IPv4 and IPv6
  
  For consistency, as we seem to have a bit of a mixed bag, changed all
  instances of ipv4 and ipv6 in comments and documentations to use the
  correct case.

- runtests: Fixed detection of Unix Sockets feature
  
  ...following change in curl --version output.

- code/docs: Use Unix rather than UNIX to avoid use of the trademark
  
  Use Unix when generically writing about Unix based systems as UNIX is
  the trademark and should only be used in a particular product's name.

- ip2ip.c: Fixed compilation warning when IPv6 Scope ID not supported
  
  if2ip.c:119: warning: unused parameter 'remote_scope_id'
  
  ...and some minor code style policing in the same function.

- vtls: Don't set cert info count until memory allocation is successful
  
  Otherwise Curl_ssl_init_certinfo() can fail and set the num_of_certs
  member variable to the requested count, which could then be used
  incorrectly as libcurl closes down.

- vtls: Use CURLcode for Curl_ssl_init_certinfo() return type
  
  The return type for this function was 0 on success and 1 on error. This
  was then examined by the calling functions and, in most cases, used to
  return CURLE_OUT_OF_MEMORY.
  
  Instead use CURLcode for the return type and return the out of memory
  error directly, propagating it up the call stack.

- configure: Use camel case for UNIX sockets feature output
  
  To match the curl --version output.

Marc Hoersken (26 Dec 2014)
- sockfilt.c: Reduce the number of individual memory allocations
  
  Merge multiple internal arrays into one, even if some variables
  will not not be used. They are all created with the number of
  file descriptors as their size.
  
  Also fix possible thread handle leak in CloseHandle-loop.

- sockfilt.c: Replace 100ms sleep with thread throttle
  
  Improves performance of test cases 574 and 575 by 50%.
  
  A value of zero causes the thread to relinquish the remainder
  of its time slice to any other thread of equal priority that is
  ready to run. If there are no other threads of equal priority
  ready to run, the function returns immediately, and the thread
  continues execution.
  
  http://msdn.microsoft.com/library/windows/desktop/ms686307.aspx

Steve Holme (25 Dec 2014)
- tool_help: Use camel case for UNIX sockets feature output
  
  In line with the other features listed in the --version output,
  capitalise the UNIX socket feature.

- vtls: Use bool for Curl_ssl_getsessionid() return type
  
  The return type of this function is a boolean value, and even uses a
  bool internally, so use bool in the function declaration as well as
  the variables that store the return value, to avoid any confusion.

- schannel: Minor code style policing for casts

- schannel: Prefer 'CURLcode result' for curl result codes

- cyassl: Prefer 'CURLcode result' for curl result codes

- tool_xattr: Use 'CURLcode result' for curl result codes

- curl_ntlm_core.c: Fixed compilation warnings
  
  curl_ntlm_core.c:301: warning: pointer targets in passing argument 2 of
                        'CryptImportKey' differ in signedness
  curl_ntlm_core.c:310: warning: passing argument 6 of 'CryptEncrypt' from
                        incompatible pointer type
  curl_ntlm_core.c:540: warning: passing argument 4 of 'CryptGetHashParam'
                        from incompatible pointer type

- RELEASE-NOTES: Synced with 8830df8b66

- gtls: Use preferred 'CURLcode result'

- openldap: Use standard naming for setup connection function
  
  Renamed ldap_setup() to ldap_setup_connection() to follow more widely
  used function naming.

- rtmp: Use standard naming for setup connection function
  
  Renamed rtmp_setup() to rtmp_setup_connection() to follow more widely
  used function naming.

- smb: Use standard naming for setup connection function
  
  Renamed smb_setup() to smb_setup_connection() to follow more widely
  used function naming.

- config-win32.h: Fixed line length > 79 columns

- openssl: Prefer we don't use NULL in comparisons

- build: Removed WIN32 definition from the Visual Studio projects
  
  As this pre-processor definition is defined in curl_setup.h there is no
  need to include it in the Visual Studio project files.

- build: Removed WIN64 definition from the libcurl Visual Studio projects
  
  Removed the WIN64 pre-processor definition from the libcurl project
  files as:
  
  * WIN64 is not used in our source code
  * The curl projects files don't define it
  * It isn't required by or used in the platform SDK
  * For backwards compatability curl_setup.h defines WIN32
  * The compiler automatically defines _WIN64 for x64 builds
  
  Historically Visual Studio projects have defined WIN32, in addition to
  the compiler defined _WIN32 definition, and I had incorrectly changed
  that to WIN64 for the x64 libcurl builds but not in the curl projects.
  
  As such, it is questionable whether this should be defined or not. For
  more information see the following cache of a discussion that took
  place on the microsoft.public.vc.mfc newsgroup:
  
  http://www.tech-archive.net/Archive/VC/microsoft.public.vc.mfc/2008-06/msg00074.html

- openssl.c Fix for compilation errors with older versions of OpenSSL
  
  openssl.c:1408: error: 'TLS1_1_VERSION' undeclared
  openssl.c:1411: error: 'TLS1_2_VERSION' undeclared

Daniel Stenberg (22 Dec 2014)
- [John Malmberg brought this change]

  Fix comment edit in vms/backup_gnv_curl_src.com
  
  packages/vms/backup_gnv_curl_src.com: Originally copied from Bash port.

- curl: show size of inhibited data when using -v
  
  To offer some more info and yet it doesn't use more lines.

- openssl: fix SSL/TLS versions in verbose output

- openssl: make it compile against openssl 1.1.0-DEV master branch

Marc Hoersken (22 Dec 2014)
- sshserver.pl: clarify and streamline variable names

Daniel Stenberg (21 Dec 2014)
- openssl: warn for SRP set if SSLv3 is used, not for TLS version
  
  ... as it requires TLS and it was was left to warn on the default from
  when default was SSL...

- smb: use memcpy() instead of strncpy()
  
  ... as it never copies the trailing zero anyway and always just the four
  bytes so let's not mislead anyone into thinking it is actually treated
  as a string.
  
  Coverity CID: 1260214

- [John E. Malmberg brought this change]

  VMS: Updates for 0740-0D1220
  
  lib/setup-vms.h : VAX HP OpenSSL port is ancient, needs help.
                    More defines to set symbols to uppercase.
  
  src/tool_main.c : Fix parameter to vms_special_exit() call.
  
  packages/vms/ :
    backup_gnv_curl_src.com : Fix the error message to have the correct package.
  
    build_curl-config_script.com : Rewrite to be more accurate.
  
    build_libcurl_pc.com : Use tool_version.h now.
  
    build_vms.com : Fix to handle lib/vtls directory.
  
    curl_gnv_build_steps.txt : Updated build procedure documentation.
  
    generate_config_vms_h_curl.com :
         * VAX does not support 64 bit ints, so no NTLM support for now.
         * VAX HP SSL port is ancient, needs some help.
         * Disable NGHTTP2 for now, not ported to VMS.
         * Disable UNIX_SOCKETS, not available on VMS yet.
         * HP GSSAPI port does not have gss_nt_service_name.
  
    gnv_link_curl.com : Update for new curl structure.
  
    pcsi_product_gnv_curl.com : Set up to optionally do a complete build.

Marc Hoersken (21 Dec 2014)
- sockfilt.c: use non-Ex functions that are available before WinXP
  
  It was initially reported by Guenter that GetFileSizeEx
  requires (_WIN32_WINNT >= 0x0500) to be true.

- tests: use Cygwin-style paths in SSH, SSHD and SFTP config files
  
  Second patch to enable Windows support using Cygwin-based OpenSSH.
  
  Tested with CopSSH 5.0.0 free edition using an msys shell on Windows 7.

- tests: support spaces in paths to SSH, SSHD and SFTP binaries
  
  First patch to enable Windows support using Cygwin-based OpenSSH.

Steve Holme (20 Dec 2014)
- non-ascii: Reduce variable usage
  
  Removed 'next' variable in Curl_convert_form(). Rather than setting it
  from 'form->next' and using that to set 'form' after the conversion
  just use 'form = form->next' instead.

- non-ascii: Prefer while loop rather than a do loop
  
  This also removes the need to check that the 'form' argument is valid.

- non-ascii: Reduce variable scope
  
  As 'result' isn't used out side the conversion callback code and
  previously caused variable shadowing in the libiconv based code.

- non-ascii: We prefer 'CURLcode result'
  
  This also fixes a variable shadowing issue when HAVE_ICONV is defined
  as rc was declared for the result code of libiconv based functions.

Marc Hoersken (19 Dec 2014)
- secureserver.pl: clean up formatting of config and fix verbose output
  
  Verbose output was not matching the actual configuration file,
  because FIPS and Windows conditions were ignored.

- secureserver.pl: update Windows detection and fix path conversion

- secureserver.pl: make OpenSSL CApath and cert absolute path values
  
  Recent stunnel versions (5.08) seem to have trouble with relative
  paths on Windows. This turns the relative paths into absolute ones.

Patrick Monnerat (18 Dec 2014)
- if2ip: dummy scope parameter for Curl_if2ip() call in SIOCGIFADDR-enabled code.

- [Kyle J. McKay brought this change]

  parseurlandfillconn(): fix improper non-numeric scope_id stripping.
  Fixes SF bug 1149: http://sourceforge.net/p/curl/bugs/1449/

- IPV6: address scope != scope id
  There was a confusion between these: this commit tries to disambiguate them.
  - Scope can be computed from the address itself.
  - Scope id is scope dependent: it is currently defined as 1-based local
    interface index for link-local scoped addresses, and as a site index(?) for
    (obsolete) site-local addresses. Linux only supports it for link-local
    addresses.
  The URL parser properly parses a scope id as an interface index, but stores it
  in a field named "scope": confusion. The field has been renamed into "scope_id".
  Curl_if2ip() used the scope id as it was a scope. This caused failures
  to bind to an interface.
  Scope is now computed from the addresses and Curl_if2ip() matches them.
  If redundantly specified in the URL, scope id is check for mismatch with
  the interface index.
  
  This commit should fix SF bug #1451.

- connect: singleipconnect(): properly try other address families after failure

Daniel Stenberg (16 Dec 2014)
- SFTP: work-around servers that return zero size on STAT
  
  Bug: http://curl.haxx.se/mail/lib-2014-12/0103.html
  Pathed-by: Marc Renault

- glob_next_url: make the loop count upwards
  
  As the former contruct apparently caused a compiler warning, mentioned
  in d8efde07e556c.

- tool_operate: we prefer 'CURLcode result'

- tool_urlglob: unify return codes to use CURLcode
  
  There was a mix of GlobCode, CURLcode and ints and they were mostly
  passing around CURLcode errors. This change makes the functions use only
  CURLcode and removes the GlobCode type completely.

- tool_urlglob.c: partly reverse dc19789444
  
  The loop in glob_next_url() needs to be done backwards to maintain the
  logic. dc19789444 caused test 1235 to fail.

- KNOWN_BUGS: the SFTP code doesn't support CURLINFO_FILETIME

- [Jay Satiro brought this change]

  opts: Warn CURLOPT_TIMEOUT overrides when set after CURLOPT_TIMEOUT_MS
  
  Change CURLOPT_TIMEOUT doc to warn that if CURLOPT_TIMEOUT and
  CURLOPT_TIMEOUT_MS are both set whichever one is set last is the one
  that will be used.
  
  Prior to this change that behavior was only noted in the
  CURLOPT_TIMEOUT_MS doc.

Nick Zitzmann (15 Dec 2014)
- darwinssl: fix incorrect usage of aprintf()
  
  Commit b13923f changed an snprintf() to use aprintf(), but the API usage
  wasn't correct, and was causing a crash to occur. This fixes it.

Steve Holme (14 Dec 2014)
- copyright: Updated the copyright year following recent updates

Daniel Stenberg (14 Dec 2014)
- tool_urlglob.c: reverse two loops
  
  By counting from 0 and up instead of backwards like before, we remove
  the need for the "funny" check of the unsigned variable when decreased
  passed zero. Easier to read and less risk for compiler warnings.

Marc Hoersken (14 Dec 2014)
- tool_urlglob.c: Added braces to clarify the conditions

- tool_urlglob.c: Silence warning C6293: Ill-defined for-loop
  
  The >= 0 is actually not required, since i underflows and
  the for-loop is stopped using the < condition, but this
  makes the VS2012 compiler and code analysis happy.

- tool_binmode.c: Explicitly ignore the return code of setmode
  
  Fixes code analysis warning C6031:
  return value ignored: <function> could return unexpected value

- lib: Fixed multiple code analysis warnings if SAL are available
  
  warning C28252: Inconsistent annotation for function:
  parameter has another annotation on this instance

Steve Holme (14 Dec 2014)
- smb.c: Fixed code analysis warning
  
  smb.c:320: warning C6297: Arithmetic overflow: 32-bit value is shifted,
             then cast to 64-bit value. Result may not be an expected
             value

Marc Hoersken (14 Dec 2014)
- tool_util.c: Use GetTickCount64 if it is available

Steve Holme (14 Dec 2014)
- smb: Use HAVE_PROCESS_H for process.h inclusion
  
  Rather than testing against _WIN32 use the preferred HAVE_PROCESS_H
  pre-processor define when including process.h.

Daniel Stenberg (14 Dec 2014)
- darwinssl: aprintf() to allocate the session key
  
  ... to avoid using a fixed memory size that risks being too large or too
  small.

Marc Hoersken (14 Dec 2014)
- curl_schannel: Improvements to memory re-allocation strategy
  
  - do not grow memory by doubling its size
  - do not leak previously allocated memory if reallocation fails
  - replace while-loop with a single check to make sure
    that the requested amount of data fits into the buffer
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1450
  Reported-by: Warren Menzer

Steve Holme (14 Dec 2014)
- asyn-ares: We prefer use of 'CURLcode result'

Marc Hoersken (14 Dec 2014)
- curl_schannel.c: Data may be available before connection shutdown

Steve Holme (14 Dec 2014)
- http2: Use 'CURLcode result' for curl result codes

- asyn-thread:  We prefer 'CURLcode result'

- smb: Fixed unnecessary initialisation of struct member variables
  
  There is no need to set the 'state' and 'result' member variables to
  SMB_REQUESTING (0) and CURLE_OK (0) after the allocation via calloc()
  as calloc() initialises the contents to zero.

- ntlm: Fixed return code for bad type-2 Target Info
  
  Use CURLE_BAD_CONTENT_ENCODING for bad type-2 Target Info security
  buffers just like we do for bad decodes.

- ntlm: Remove unnecessary casts in readshort_le()
  
  I don't think both of my fix ups from yesterday were needed to fix the
  compilation warning, so remove the one that I think is unnecessary and
  let the next Android autobuild prove/disprove it.

- curl_ntlm_msgs.c: Another attempt to fix compilation warning
  
  curl_ntlm_msgs.c:170: warning: conversion to 'short unsigned int' from
                        'int' may alter its value

Guenter Knauf (13 Dec 2014)
- synctime.c: added own user-agent string.

Steve Holme (13 Dec 2014)
- smb.c: Fixed line longer than 79 columns

- curl_ntlm_msgs.c: Fixed compilation warning from commit 783b5c3b11
  
  curl_ntlm_msgs.c:169: warning: conversion to 'short unsigned int' from
                        'int' may alter its value

Guenter Knauf (13 Dec 2014)
- mk-ca-bundle.pl: restored forced run again.

- synctime.c: removed another timeserver URL.
  
  worldtimeserver.com seems also no longer available.

- synctime.c: fixed timeserver URLs.
  
  For getting the date header its not necessary to access special
  pages or even CGI scripts - all pages including the main index
  reply with the date header, therefore shortened URLs to domain.
  Removed worldtime.com; added pool.ntp.org.

Steve Holme (13 Dec 2014)
- ftp.c: Fixed compilation warning when no verbose string support
  
  ftp.c:819: warning: unused parameter 'lineno'

- smb: Added state change functions to assist with debugging
  
  For debugging purposes, and as per other protocols within curl, added
  state change functions rather than changing the states directly.

- ntlm: Use short integer when decoding 16-bit values

- RELEASE-NOTES: Synced with 6291a16b20

- smtp.c: Fixed compilation warnings
  
  smtp.c:2357 warning: adding 'size_t' (aka 'unsigned long') to a string
              does not append to the string
  smtp.c:2375 warning: adding 'size_t' (aka 'unsigned long') to a string
              does not append to the string
  smtp.c:2386 warning: adding 'size_t' (aka 'unsigned long') to a string
              does not append to the string
  
  Used array index notation instead.

- smb: Disable SMB when 64-bit integers are not supported
  
  This fixes compilation issues with compilers that don't support 64-bit
  integers through long long or __int64.

- ntlm: Disable NTLM v2 when 64-bit integers are not supported
  
  This fixes compilation issues with compilers that don't support 64-bit
  integers through long long or __int64 which was introduced in commit
  07b66cbfa4.

- ntlm: Allow NTLM2Session messages when USE_NTRESPONSES manually defined
  
  Previously USE_NTLM2SESSION would only be defined automatically when
  USE_NTRESPONSES wasn't already defined. Separated the two definitions
  so that the user can manually set USE_NTRESPONSES themselves but
  USE_NTLM2SESSION is defined automatically if they don't define it.

- smtp.c: Fixed line longer than 79 columns

- config-win32.h: Don't enable Windows Crypt API if using OpenSSL
  
  As the OpenSSL and NSS Crypto engines are prefered by the core NTLM
  routines, to the Windows Crypt API, don't define USE_WIN32_CRYPT
  automatically when either OpenSSL or NSS are in use - doing so would
  disable NTLM2Session responses in NTLM type-3 messages.

- smtp: Fixed inappropriate free of the scratch buffer
  
  If the scratch buffer was allocated in a previous call to
  Curl_smtp_escape_eob(), a new buffer not allocated in the subsequent
  call and no action taken by that call, then an attempt would be made to
  try and free the buffer which, by now, would be part of the data->state
  structure.
  
  This bug was introduced in commit 4bd860a001.

- smtp: Fixed dot stuffing when EOL characters were at end of input buffers
  
  Fixed a problem with the CRLF. detection when multiple buffers were
  used to upload an email to libcurl and the line ending character(s)
  appeared at the end of each buffer. This meant any lines which started
  with . would not be escaped into .. and could be interpreted as the end
  of transmission string instead.
  
  This only affected libcurl based applications that used a read function
  and wasn't reproducible with the curl command-line tool.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1456
  Assisted-by: Patrick Monnerat

Daniel Stenberg (11 Dec 2014)
- telnet: fix "cast increases required alignment of target type"

- ntlm_wb_response: fix "statement not reached"
  
  ... and I could use a break instead of a goto to end the loop.
  
  Bug: http://curl.haxx.se/mail/lib-2014-12/0089.html
  Reported-by: Tor Arntsen

Steve Holme (10 Dec 2014)
- RELEASE-NOTES: Synced with 1cc5194337
  
  Added some bug fixes that I had missed in previous synchronisations.

Daniel Stenberg (10 Dec 2014)
- Curl_unix2addr: avoid using the variable name 'sun'
  
  I suspect this causes compile failures on Solaris:
  
  Bug: http://curl.haxx.se/mail/lib-2014-12/0081.html

Steve Holme (10 Dec 2014)
- url.c: Fixed compilation warning when USE_NTLM is not defined
  
  url.c:3078: warning: variable 'credentialsMatch' set but not used

- parsedate.c: Fixed compilation warning
  
  parsedate.c:548: warning: 'parsed' may be used uninitialized in this
                   function
  
  As curl_getdate() returns -1 when parsedate() fails we can initialise
  parsed to -1.

Daniel Stenberg (10 Dec 2014)
- TODO: Cache negative name resolves
  
  Worth exploring

- ldap: check Curl_client_write() return codes
  
  There might be one or two memory leaks left in the error paths.

- ldap: rename variables to comply to curl standards

Dan Fandrich (10 Dec 2014)
- sws.c: Fixed 'rc' may be used uninitialized warning

- cookies: Improved OOM handling in cookies
  
  This fixes the test 506 torture test. The internal cookie API really
  ought to be improved to separate cookie parsing errors (which may be
  ignored) with OOM errors (which should be fatal).

Guenter Knauf (9 Dec 2014)
- synctime.c: fixed user-agent setting.
  
  Some websites meanwhile refuse to reply to requests from ancient
  browsers like IE6, therefore I've comment out this setting, but
  also fixed the string to now fake IE8 if someone enables it.

Daniel Stenberg (9 Dec 2014)
- smb: fix unused return code warning

Patrick Monnerat (9 Dec 2014)
- Curl_client_write() & al.: chop long data, convert data only once.

Guenter Knauf (9 Dec 2014)
- VC build: added sspi define for winssl-zlib builds.

Daniel Stenberg (9 Dec 2014)
- schannel_recv: return the correct code
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1462
  Reported-by: Tae Hyoung Ahn

- http2: avoid logging neg "failure" if h2 was not requested

- openldap: do not ignore Curl_client_write() return codes

- compile: warn on unused return code from Curl_client_write()

Patrick Monnerat (8 Dec 2014)
- SMB: Fix a data size mismatch that broke SMB on big-endian platforms

Steve Holme (7 Dec 2014)
- smb: Fixed Windows autoconf builds following commit eb88d778e7
  
  As Windows based autoconf builds don't yet define USE_WIN32_CRYPTO
  either explicitly through --enable-win32-cypto or automatically on
  _WIN32 based platforms, subsequent builds broke with the following
  error message:
  
  "Can't compile NTLM support without a crypto library."

- RELEASE-NOTES: Synced with 526603ff05

- [Bill Nagel brought this change]

  smb: Build with SSPI enabled
  
  Build SMB/CIFS protocol support when SSPI is enabled.

- [Bill Nagel brought this change]

  ntlm: Use Windows Crypt API
  
  Allow the use of the Windows Crypt API for NTLMv1 functions.

Dan Fandrich (7 Dec 2014)
- cookie.c: Refactored cleanup code to simplify
  
  Also, fixed the outdated comments on the cookie API.

- get_url_file_name: Fixed crash on OOM on debug build
  
  This caused a null-pointer dereference which caused a few dozen
  torture tests to fail.

Steve Holme (6 Dec 2014)
- sws.c: Fixed compilation warning
  
  sws.c:2191 warning: 'rc' may be used uninitialized in this function

- ftp.c: Fixed compilation warnings when proxy support disabled
  
  ftp.c:1827 warning: unused parameter 'newhost'
  ftp.c:1827 warning: unused parameter 'newport'

- smb: Fixed a problem with large file transfers
  
  Fixed an issue with the message size calculation where the raw bytes
  from the buffer were interpreted as signed values rather than unsigned
  values.
  
  Reported-by: Gisle Vanem
  Assisted-by: Bill Nagel

- smb: Moved the URL decoding into a separate function

- smb: Fixed URL encoded URLs not working

- Makefile.inc: Added our standard header and updated file formatting

- Makefile.inc: Updated file formatting
  
  Aligned continuation character and used space as the separator
  character as per other makefile files.

- curl_md4.h: Updated copyright year following recent edit
  
  ...and minor layout adjustment.

Patrick Monnerat (5 Dec 2014)
- SMB: Fix big endian problems. Make it OS/400 aware.

- OS400: enable NTLM authentication

Steve Holme (5 Dec 2014)
- multi.c: Fixed compilation warning
  
  multi.c:2695: warning: declaration of `exp' shadows a global declaration

Guenter Knauf (5 Dec 2014)
- build: updated dependencies in makefiles.

Steve Holme (5 Dec 2014)
- sasl: Corrected formatting of function descriptions

- sasl_gssapi: Added missing function description

- RELEASE-NOTES: Provided better descriptions
  
  As it is often difficult to choose the best description for a single
  feature when it spans many commits, updated the descriptions for the
  recent SMB/CIFS protocol and GSS-API additions.

- sasl_sspi: Corrected some typos

- sasl_sspi: Don't use hard coded sizes in Kerberos V5 security data
  
  Don't use a hard coded size of 4 for the security layer and buffer size
  in Curl_sasl_create_gssapi_security_message(), instead, use sizeof() as
  we have done in the sasl_gssapi module.

- sasl_sspi: Free the Kerberos V5 challenge as soon as we're done with it
  
  Reduced the amount of free's required for the decoded challenge message
  in Curl_sasl_create_gssapi_security_message() as a result of coding it
  differently in the sasl_gssapi module.

- gssapi: Corrected typo in comments

- sasl_gssapi: Added body to Curl_sasl_create_gssapi_security_message()

Daniel Stenberg (4 Dec 2014)
- [Stefan Bühler brought this change]

  http_perhapsrewind: don't abort CONNECT requests
  
  ...they never have a body

- [Stefan Bühler brought this change]

  HTTP: Free (proxy)userpwd for NTLM/Negotiate after sending a request
  
  Sending NTLM/Negotiate header again after successful authentication
  breaks the connection with certain Proxies and request types (POST to MS
  Forefront).

- [Stefan Bühler brought this change]

  HTTP: don't abort connections with pending Negotiate authentication
  
  ... similarly to how NTLM works as Negotiate is in fact often NTLM with
  another name.

- [Stefan Bühler brought this change]

  fix gdb libtool invocation path

Steve Holme (4 Dec 2014)
- sasl_gssapi: Fixed missing include from commit d3cca934ee

Daniel Stenberg (4 Dec 2014)
- [Jay Satiro brought this change]

  examples: remove sony.com from 10-at-a-time
  
  Prior to this change the 10-at-a-time example showed CURLE_RECV_ERROR
  for the sony website because it ends the connection when the request is
  missing a user agent.

Steve Holme (4 Dec 2014)
- sasl_gssapi: Fixed missing decoding debug failure message

- sasl_gssapi: Fixed honouring of no mutual authentication

- sasl_sspi: Added more Kerberos V5 decoding debug failure messages

Daniel Stenberg (4 Dec 2014)
- [Anthon Pang brought this change]

  docs: Fix FAILONERROR typos
  
  It returns error for >= 400 HTTP responses.
  
  Bug: https://github.com/bagder/curl/pull/129

- [Peter Wu brought this change]

  tool: fix CURLOPT_UNIX_SOCKET_PATH in --libcurl output
  
  Mark CURLOPT_UNIX_SOCKET_PATH as string to ensure that it ends up as
  option in the file generated by --libcurl.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  opts: fix CURLOPT_UNIX_SOCKET_PATH formatting
  
  Add .nf and .fi such that the code gets wrapped in a pre on the web.
  Fixed grammar, fixed formatting of the "See also" items.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

Patrick Monnerat (4 Dec 2014)
- OS400: enable Unix sockets.

Daniel Stenberg (3 Dec 2014)
- RELEASE-NOTES: synced with b216427e73b5e9

- opts: added CURLOPT_UNIX_SOCKET_PATH to Makefile.am

- updateconninfo: clear destination struct before getsockname()
  
  Otherwise we may read uninitialized bytes later in the unix-domain
  sockets case.

- curl.1: added --unix-socket

- [Peter Wu brought this change]

  tool: add --unix-socket option
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  libcurl: add UNIX domain sockets support
  
  The ability to do HTTP requests over a UNIX domain socket has been
  requested before, in Apr 2008 [0][1] and Sep 2010 [2]. While a
  discussion happened, no patch seems to get through. I decided to give it
  a go since I need to test a nginx HTTP server which listens on a UNIX
  domain socket.
  
  One patch [3] seems to make it possible to use the
  CURLOPT_OPENSOCKETFUNCTION function to gain a UNIX domain socket.
  Another person wrote a Go program which can do HTTP over a UNIX socket
  for Docker[4] which uses a special URL scheme (though the name contains
  cURL, it has no relation to the cURL library).
  
  This patch considers support for UNIX domain sockets at the same level
  as HTTP proxies / IPv6, it acts as an intermediate socket provider and
  not as a separate protocol. Since this feature affects network
  operations, a new feature flag was added ("unix-sockets") with a
  corresponding CURL_VERSION_UNIX_SOCKETS macro.
  
  A new CURLOPT_UNIX_SOCKET_PATH option is added and documented. This
  option enables UNIX domain sockets support for all requests on the
  handle (replacing IP sockets and skipping proxies).
  
  A new configure option (--enable-unix-sockets) and CMake option
  (ENABLE_UNIX_SOCKETS) can disable this optional feature. Note that I
  deliberately did not mark this feature as advanced, this is a
  feature/component that should easily be available.
  
   [0]: http://curl.haxx.se/mail/lib-2008-04/0279.html
   [1]: http://daniel.haxx.se/blog/2008/04/14/http-over-unix-domain-sockets/
   [2]: http://sourceforge.net/p/curl/feature-requests/53/
   [3]: http://curl.haxx.se/mail/lib-2008-04/0361.html
   [4]: https://github.com/Soulou/curl-unix-socket
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  tests: add two HTTP over UNIX socket tests
  
  test1435: a simple test that checks whether a HTTP request can be
  performed over the UNIX socket. The hostname/port are interpreted
  by sws and should be ignored by cURL.
  
  test1436: test for the ability to do two requests to the same host,
  interleaved with one to a different hostname.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  tests: add HTTP UNIX socket server testing support
  
  The variable `$ipvnum` can now contain "unix" besides the integers 4
  and 6 since the variable. Functions which receive this parameter
  have their `$port` parameter renamed to `$port_or_path` to support a
  path to the UNIX domain socket (as a "port" is only meaningful for TCP).
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  sws: try to remove socket and retry bind
  
  If sws is killed it might leave a stale socket file on the filesystem
  which would cause an EADDRINUSE error. After this patch, it is checked
  whether the socket is really stale and if so, the socket file gets
  removed and another bind is executed.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  sws: add UNIX domain socket support
  
  This extends sws with a --unix-socket option which causes the port to
  be ignored (as the server now listens on the path specified by
  --unix-socket). This feature will be available in the following patch
  that enables checking for UNIX domain socket support.
  
  Proxy support (CONNECT) is not considered nor tested. It does not make
  sense anyway, first connecting through a TCP proxy, then let that TCP
  proxy connect to a UNIX socket.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  sws: restrict TCP_NODELAY to IP sockets
  
  TCP_NODELAY does not make sense for Unix sockets, so enable it only if
  the socket is using IP.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

Dan Fandrich (3 Dec 2014)
- [Dave Reisner brought this change]

  curl.1: fix trivial typo

Steve Holme (3 Dec 2014)
- sasl_gssapi: Added body to Curl_sasl_create_gssapi_user_message()

- sasl_gssapi: Added body to Curl_sasl_gssapi_cleanup()

- sasl_gssapi: Added Curl_sasl_build_gssapi_spn() function
  
  Added helper function for returning a GSS-API compatible SPN.

Daniel Stenberg (3 Dec 2014)
- NSS: enable the CAPATH option
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1457
  Patch-by: Tomasz Kojm

Steve Holme (3 Dec 2014)
- sasl_gssapi: Enable USE_KERBEROS5 for GSS-API based builds

- sasl_gssapi: Added GSS-API based Kerberos V5 variables

- sws.c: Fixed compilation warning when IPv6 is disabled
  
  sws.c:69: warning: comma at end of enumerator list

- sasl_gssapi: Made log_gss_error() a common GSS-API function
  
  Made log_gss_error() a common function so that it can be used in both
  the http_negotiate code as well as the curl_sasl_gssapi code.

- sasl_gssapi: Introduced GSS-API based SASL module
  
  Added the initial version of curl_sasl_gssapi.c and updated the project
  files in preparation for adding GSS-API based Kerberos V5 support.

- smb: Don't try to connect with empty credentials
  
  On some platforms curl would crash if no credentials were used. As such
  added detection of such a use case to prevent this from happening.
  
  Reported-by: Gisle Vanem

- smb.c: Coding policing of pointer usage

- configure: Fixed inclusion of SMB when no crypto engines available

Guenter Knauf (1 Dec 2014)
- build: in Makefile.m32 simplified autodetection.

Daniel Stenberg (30 Nov 2014)
- [Peter Wu brought this change]

  sws: move away from IPv4/IPv4-only assumption
  
  Instead of depending the socket domain type on use_ipv6, specify the
  domain type (AF_INET / AF_INET6) as variable. An enum is used here with
  switch to avoid compiler warnings in connect_to, complaining that rc
  is possibly undefined (which is not possible as socket_domain is
  always set).
  
  Besides abstracting the socket type, make the debugging messages be
  independent on IP (introduce location_str which points to "port XXXXX").
  Rename "ipv_inuse" to "socket_type" and tighten the scope (main).
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  lib/connect: restrict IP/TCP options to said sockets
  
  This patch prepares for adding UNIX domain sockets support.
  
  TCP_NODELAY and TCP_KEEPALIVE are specific to TCP/IP sockets, so do not
  apply these to other socket types. bindlocal only works for IP sockets
  (independent of TCP/UDP), so filter that out too for other types.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- smb.c: use size_t as input argument types for msg sizes
  
  This fixes warnings about conversions to int

Steve Holme (30 Nov 2014)
- version: The next release will become 7.40.0

- [Bill Nagel brought this change]

  docs: Updated for the SMB protocol
  
  This patch updates the documentation for the SMB/CIFS protocol.

- curl tool: Exclude SMB from the protocol redirect
  
  As local files could be accessed through \\localhost\c$.

- [Bill Nagel brought this change]

  curl tool: Enable support for the SMB protocol
  
  This patch enables SMB/CIFS support in the curl command-line tool.

- smb.c: Fixed compilation warnings
  
  smb.c:398: warning: comparison of integers of different signs:
             'ssize_t' (aka 'long') and 'unsigned long'
  smb.c:443: warning: comparison of integers of different signs:
             'ssize_t' (aka 'long') and 'unsigned long'

- libcurl: Exclude SMB from the protocol redirect
  
  As local files could be accessed through \\localhost\c$.

- [Bill Nagel brought this change]

  libcurl: Enable support for the SMB protocol
  
  This patch enables SMB/CIFS support in libcurl.

- smb.c: Fixed compilation warnings
  
  smb.c:322: warning: conversion to 'short unsigned int' from 'unsigned
             int' may alter its value
  smb.c:323: warning: conversion to 'short unsigned int' from 'unsigned
             int' may alter its value
  smb.c:482: warning: conversion to 'short unsigned int' from 'int' may
             alter its value
  smb.c:521: warning: conversion to 'unsigned int' from 'curl_off_t' may
             alter its value
  smb.c:549: warning: conversion to 'unsigned int' from 'curl_off_t' may
             alter its value
  smb.c:550: warning: conversion to 'short unsigned int' from 'int' may
             alter its value

- smb.c: Renamed SMB command message variables to avoid compiler warnings
  
  smb.c:489: warning: declaration of 'close' shadows a global declaration
  smb.c:511: warning: declaration of 'read' shadows a global declaration
  smb.c:528: warning: declaration of 'write' shadows a global declaration

- smb.c: Fixed compilation warnings
  
  smb.c:212: warning: unused parameter 'done'
  smb.c:380: warning: ISO C does not allow extra ';' outside of a function
  smb.c:812: warning: unused parameter 'premature'
  smb.c:822: warning: unused parameter 'dead'

- smb.c: Fixed compilation warnings
  
  smb.c:311: warning: conversion from 'unsigned __int64' to 'u_short',
             possible loss of data
  smb.c:425: warning: conversion from '__int64' to 'unsigned short',
             possible loss of data
  smb.c:452: warning: conversion from '__int64' to 'unsigned short',
             possible loss of data

- smb.c: Fixed compilation warnings
  
  smb.c:162: error: comma at end of enumerator list
  smb.c:469: warning: conversion from 'size_t' to 'unsigned short',
             possible loss of data
  smb.c:517: warning: conversion from 'curl_off_t' to 'unsigned int',
             possible loss of data
  smb.c:545: warning: conversion from 'curl_off_t' to 'unsigned int',
             possible loss of data

- [Bill Nagel brought this change]

  smb: Added initial SMB functionality
  
  Initial implementation of the SMB/CIFS protocol.

- [Bill Nagel brought this change]

  smb: Added SMB handler interfaces
  
  Added the SMB and SMBS handler interface structures and associated
  functions required for SMB/CIFS operation.

- transfer: Code style policing
  
  Prefer ! rather than NULL in if statements, added comments and updated
  function spacing, argument spacing and line spacing to be more readble.

- transfer: Fixed existing scratch buffer being checked for NULL twice
  
  If the scratch buffer already existed when the CRLF conversion was
  performed then the buffer pointer would be checked twice for NULL. This
  second check is only necessary if the call to malloc() was performed by
  the first check.

- smtp: Fixed dot stuffing being performed when no new data read
  
  Whilst I had moved the dot stuffing code from being performed before
  CRLF conversion takes place to after it, in commit 4bd860a001, I had
  moved it outside the 'when something read' block of code when meant
  it could perform the dot stuffing twice on partial send if nread
  happened to contain the right values. It also meant the function could
  potentially read past the end of buffer. This was highlighted by the
  following warning:
  
  warning: `nread' might be used uninitialized in this function

Daniel Stenberg (29 Nov 2014)
- smb.h: fixed picky compiler warning
  
  smb.h:30:16: error: comma at end of enumerator list [-Werror=pedantic]

Steve Holme (29 Nov 2014)
- tests: Disable test 1013 until SMB is fully added

- [Bill Nagel brought this change]

  smb: Added SMB protocol and port definitions
  
  Added the necessary protocol and port definitions in order to support
  SMB/CIFS.

- [Bill Nagel brought this change]

  smb: Added internal SMB definitions and structures
  
  Added the internal definitions and structures necessary for SMB/CIFS
  support.

- [Bill Nagel brought this change]

  smb: Added SMB connection structure
  
  Added the connection structure that will be required in urldata.h for
  SMB/CIFS based connections.

- [Bill Nagel brought this change]

  smb: Added initial source files for SMB
  
  Added the initial source files and updated the relevant project files in
  order to support SMB/CIFS.

- [Bill Nagel brought this change]

  smb: Added configuration options for SMB
  
  Added --enable-smb and --disable-smb configuration options for the
  upcoming SMB/CIFS protocol support.

Daniel Stenberg (28 Nov 2014)
- [Peter Wu brought this change]

  runtests.pl: fix startup of IPv6 servers
  
  Commit curl-7_23_1-143-g8218064 changed the parameter of
  responsive_http_server to accept types other than IPv6 (converting
  from a boolean to a string), but only considered the lower-case "ipv6"
  and not the "IPv6" variant. This caused all servers to start in IPv4
  mode instead.
  
  This patch converts the remaining cases to "ipv6". While not strictly
  necessary for the run*server variants, these got also converted for
  consistency and to prevent future errors.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  runtests.pl: fix warning message, remove duplicate value
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

Steve Holme (27 Nov 2014)
- http.c: Fixed compilation warnings from features being disabled
  
  warning: unused variable 'data'
  warning: variable 'addcookies' set but not used
  
  ...and some very minor coding style policing.

- RELEASE-NOTES: Synced with c5399c827d

- tests: Added SMTP with --crlf test case

- docs: Updated for commit 4bd860a001 and SMTP Unix line ending conversion

- smtp: Fixed const'ness of nread parameter in Curl_smtp_escape_eob()
  
  ...and some comment typos!

- smtp: Added support for the conversion of Unix newlines during mail send
  
  Added support for the automatic conversion of Unix newlines to CRLF
  during mail uploads.
  
  Feature: http://curl.haxx.se/bug/view.cgi?id=1456

- CURLOPT_CRLF.3: Fixed inclusion of SMTP in listed protocols

Daniel Stenberg (25 Nov 2014)
- curl*3: added small examples
  
  and some minor edits

- libcurl.3: fix formatting
  
  refer to functions with the man page section properly

- man pages: SEE ALSO curl_multi_wait

- curl_multi_wait.3: clarify numfds being used if not NULL

- multi-single.c: switch to use curl_multi_wait
  
  Makes the example much easier and straight-forward!

- testcurl: bump the version of this script!

- testcurl: skip reading the setup file if given enough cmdline info
  
  This makes it much easier to run multiple tests in the same directory,
  just altering the command lines used.

- select.c: fix compilation for VxWorks
  
  Reported-by: Brian
  Bug: http://curl.haxx.se/bug/view.cgi?id=1455

Patrick Monnerat (24 Nov 2014)
- [moparisthebest brought this change]

  SSL: Add PEM format support for public key pinning

Kamil Dudka (24 Nov 2014)
- Revert "repository: ignore patch files generated by git"
  
  This reverts commit 217024a687ce86eb6d2317822ed81c7e5abc4b61.
  
  Bug: https://github.com/bagder/curl/commit/217024a6#commitcomment-8693738

Steve Holme (23 Nov 2014)
- multi.c: Fixed compilation warnings when no verbose string support
  
  warning: variable 'connection_id' set but not used
  warning: unused parameter 'lineno'

- RELEASE-NOTES: Synced with 1450712e76

- sasl: Tidied up some parameter comments

- sasl: Reduced the need for two sets of NTLM functions

- ntlm: Moved NSS initialisation to base decode function

- http_ntlm: Fixed additional NSS initialisation call when decoding type-2
  
  After commit 48d19acb7c the HTTP code would call Curl_nss_force_init()
  twice when decoding a NTLM type-2 message, once directly and the other
  through the call to Curl_sasl_decode_ntlm_type2_message().

- ntlm: Fixed static'ness of local decode function

- ntlm: Corrected some parameter names and comments

- runtests.pl: Re-aligned feature support comments

- runtests.pl: Use Kerberos and SPNEGO as proxies for the crypto feature
  
  In addition to NTLM, use Kerberos and SPNEGO as proxies to the crypto
  feature.
  
  ...and converted tab characters, from commit 4b4e8a5853, to spaces.

- runtests.pl: Added support for SPNEGO

- runtests.pl: Added Kerberos detection

- runtests.pl: Added GSS-API detection

- FILEFORMAT: Added SSPI, GSS-API and Kerberos to the features list

- FILEFORMAT: Added test requires feature not present information
  
  Such as !SSPI as we do for the NTLM and Digest tests.

Daniel Stenberg (20 Nov 2014)
- http.c: log if it notices HTTP 1.1 after a upgrade to http2

- test1801: first real http2 test case

- sws: initial tiny steps toward http2 support

- FILEFORMAT: mention the new upgrade support

- test1800: first plain-text http2 test case
  
  Verifies the upgrade request, but gets a plain 1.1 response

- [Tatsuhiro Tsujikawa brought this change]

  http: Disable pipelining for HTTP/2 and upgraded connections
  
  This commit disables pipelining for HTTP/2 or upgraded connections.  For
  HTTP/2, we do not support multiplexing.  In general, requests cannot be
  pipelined in an upgraded connection, since it is now different protocol.

- [Brad Harder brought this change]

  CURLOPT_POSTFIELDS.3: mention the COPYPOSTFIELDS option

Steve Holme (19 Nov 2014)
- multi-uv.c: Updated for curl coding standards

- conncache: Fixed specifiers in infof() for long and size_t variables

- [Peter Wu brought this change]

  cmake: add Kerberos to the supported features
  
  Updated following commit eda919f and a4b7f71.
  
  Acked-by: Brad King <brad.king@kitware.com>
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: fix NTLM detection when CURL_DISABLE_HTTP defined
  
  Updated following changes in commit f0d860d.
  
  Acked-by: Brad King <brad.king@kitware.com>
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

Daniel Stenberg (19 Nov 2014)
- RELEASE-NOTES: synced with cb13fad733e

- [Jay Satiro brought this change]

  examples: Wait recommended 100ms when no file descriptors are ready
  
  Prior to this change when no file descriptors were ready on platforms
  other than Windows the multi examples would sleep whatever was in
  timeout, which may or may not have been less than the minimum
  recommended value [1] of 100ms.
  
  [1]: http://curl.haxx.se/libcurl/c/curl_multi_fdset.html

- [Waldek Kozba brought this change]

  multi-uv.c: close the file handle after download

- [Jon Spencer brought this change]

  multi: inform about closed sockets before they are closed
  
  When the connection code decides to close a socket it informs the multi
  system via the Curl_multi_closed function. The multi system may, in
  turn, invoke the CURLMOPT_SOCKETFUNCTION function with
  CURL_POLL_REMOVE. This happens after the socket has already been
  closed. Reorder the code so that CURL_POLL_REMOVE is called before the
  socket is closed.

Guenter Knauf (19 Nov 2014)
- build: in Makefile.m32 moved target autodetection.
  
  Moved target autodetection block after defining CC macro.

- build: in Makefile.m32 simplify platform flags.

- build: in Makefile.m32 try to detect 64bit target.

Daniel Stenberg (19 Nov 2014)
- [Brad King brought this change]

  CMake: Simplify if() conditions on check result variables
  
  Remove use of an old hack that takes advantage of the auto-dereference
  behavior of the if() command to detect if a variable is defined.  The
  hack has the form:
  
   if("${VAR} MATCHES "^${VAR}$")
  
  where "${VAR}" is a macro argument reference.  Use if(DEFINED) instead.
  This also avoids warnings for CMake Policy CMP0054 in CMake 3.1.

- TODO-RELEASE: removed

- [Carlo Wood brought this change]

  debug: added new connection cache output, plus fixups
  
  Debug output 'typo' fix.
  
  Don't print an extra "0x" in
    * Pipe broke: handle 0x0x2546d88, url = /
  
  Add debug output.
  Print the number of connections in the connection cache when
    adding one, and not only when one is removed.
  
  Fix typos in comments.

- multi: move the ending condition into the loop as well
  
  ... as it was before I changed the loop in commit e04ccbd50. It caused
  test 2030 and 2032 to fail.

Steve Holme (18 Nov 2014)
- multi: Prefer we don't use CURLE_OK and NULL in comparisons

Daniel Stenberg (18 Nov 2014)
- multi_runsingle: use 'result' for local CURLcode storage
  
  ... and assign data->result only at the end. Makes the code more compact
  (easier to read) and more similar to other code.

- multi_runsingle: rename result to rc
  
  save 'result' for CURLcode types

- multi: make multi_runsingle loop internally
  
  simplifies the use of this function at little cost.

- [Carlo Wood brought this change]

  multi: when leaving for timeout, close accordingly
  
  Fixes the problem when a transfer in a pipeline times out.

Guenter Knauf (18 Nov 2014)
- build: in Makefile.m32 add -m32 flag for 32bit.

- mk-ca-bundle.vbs: update copyright year.

- build: in Makefile.m32 pass -F flag to windres.

Steve Holme (17 Nov 2014)
- config-win32: Fixed build targets for the VS2012+ Windows XP toolset
  
  Even though commit 23e70e1cc6 mentioned the v110_xp toolset, I had
  forgotten to include the relevant pre-processor definitions.

- sasl_sspi: Removed note about the NTLM functions being a wrapper

- connect.c: Fixed compilation warning when no verbose string support
  
  warning: unused parameter 'reason'

- easy.c: Fixed compilation warning when no verbose string support
  
  warning: unused parameter 'easy'

- win32: Updated some legacy APIs to use the newer extended versions
  
  Updated the usage of some legacy APIs, that are preventing curl from
  compiling for Windows Store and Windows Phone build targets.
  
  Suggested-by: Stefan Neis
  Feature: http://sourceforge.net/p/curl/feature-requests/82/

- config-win32: Introduce build targets for VS2012+
  
  Visual Studio 2012 introduced support for Windows Store apps as well as
  supporting Windows Phone 8. Introduced build targets that allow more
  modern APIs to be used as certain legacy ones are not available on these
  new platforms.

- sasl_sspi: Fixed compilation warnings when no verbose string support

- sasl_sspi: Added base64 decoding debug failure messages
  
  Just like in the NTLM code, added infof() failure messages for
  DIGEST-MD5 and GSSAPI authentication when base64 decoding fails.

- ntlm: Moved the SSPI based Type-3 message generation into the SASL module

- ntlm: Moved the SSPI based Type-2 message decoding into the SASL module

- ntlm: Moved the SSPI based Type-1 message generation into the SASL module

- [Michael Osipov brought this change]

  kerberos: Use symbol qualified with _KERBEROS5
  
  For consistency renamed USE_KRB5 to USE_KERBEROS5.

Daniel Stenberg (15 Nov 2014)
- [Jay Satiro brought this change]

  examples: Don't call select() to sleep on windows
  
  Windows does not support using select() for sleeping without a dummy
  socket. Instead use Windows' Sleep() and sleep for 100ms which is the
  minimum suggested value in the curl_multi_fdset() doc.
  
  Prior to this change the multi examples would exit prematurely since
  select() would error instead of sleeping when called without an fd.
  
  Reported-by: Johan Lantz
  Bug: http://curl.haxx.se/mail/lib-2014-11/0221.html

- [Tatsuhiro Tsujikawa brought this change]

  http2: Don't send Upgrade headers when we already do HTTP/2

Steve Holme (15 Nov 2014)
- sasl: Corrected Curl_sasl_build_spn() function description
  
  There was a mismatch in function parameter names.

- tool: Removed krb4 from the supported features
  
  Although libcurl would never return CURL_VERSION_KERBEROS4 after 7.33,
  so would not be output with --version, removed krb4 from the supported
  features output.

- [Michael Osipov brought this change]

  tool: Use Kerberos for supported features

- urldata: Don't define sec_complete when no GSS-API support present
  
  This variable is only used with HAVE_GSSAPI is defined by the FTP code
  so let's place the definition with the other GSS-API based variables.

- [Michael Osipov brought this change]

  docs: Use consistent naming for Kerberos

- TODO: Lets support QOP options in GSSAPI authentication

- sasl_sspi: Corrected a couple of comment typos

- sasl: Moved Curl_sasl_gssapi_cleanup() definition into header file
  
  Rather than define the function as extern in the source files that use
  it, moved the function declaration into the SASL header file just like
  the Digest and NTLM clean-up functions.
  
  Additionally, added a function description comment block.

- sasl_sspi: Added missing RFC reference for HTTP Digest authentication

- ntlm: Clean-up and standardisation of base64 decoding

- ntlm: We prefer 'CURLcode result'

Daniel Stenberg (13 Nov 2014)
- [Brad King brought this change]

  CMake: Restore order-dependent library checks
  
  Revert commit 2257deb502 (Cmake: Avoid cycle directory dependencies,
  2014-08-22) and add a comment explaining the purpose of the original
  code.
  
  The check_library_exists_concat macro is intended to be called multiple
  times on a sequence of possibly dependent libraries.  Later libraries
  may depend on earlier libraries when they are static.  They cannot be
  safely linked in reverse order on some platforms.
  
  Signed-off-by: Brad King <brad.king@kitware.com>

- [Brad King brought this change]

  CMake: Restore order-dependent header checks
  
  Revert commit 1269df2e3b (Cmake: Don't check for all headers each
  time, 2014-08-15) and add a comment explaining the purpose of the
  original code.
  
  The check_include_file_concat macro is intended to be called multiple
  times on a sequence of possibly dependent headers.  Later headers
  may depend on earlier headers to provide declarations.  They cannot
  be safely included independently on some platforms.
  
  For example, many POSIX APIs document including sys/types.h before some
  other headers.  Also on some OS X versions sys/socket.h must be included
  before net/if.h or the check for the latter will fail.
  
  Signed-off-by: Brad King <brad.king@kitware.com>

- [Peter Wu brought this change]

  test22: expand a backtick command
  
  This is the only user of the backtick operator in the command. As the
  commands will soon not be executed by a shell anymore (but by perl),
  replace the command with its output.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- RELEASE-NOTES: synced with 2ee3c63b13

- http2: fix switched macro when http2 is not enabled

- [Tatsuhiro Tsujikawa brought this change]

  http2: Deal with HTTP/2 data inside response header buffer
  
  Previously if HTTP/2 traffic is appended to HTTP Upgrade response header
  (thus they are in the same buffer), the trailing HTTP/2 traffic is not
  processed and lost.  The appended data is most likely SETTINGS frame.
  If it is lost, nghttp2 library complains server does not obey the HTTP/2
  protocol and issues GOAWAY frame and curl eventually drops connection.
  This commit fixes this problem and now trailing data is processed.

Steve Holme (11 Nov 2014)
- configure: Fixed inclusion of krb5 when CURL_DISABLE_CRYPTO_AUTH is defined
  
  Commit fe0f8967bf fixed a problem with krb5 not being defined as a
  supported feature when HAVE_GSSAPI is defined, however, it should
  only be included if CURL_DISABLE_CRYPTO_AUTH is not set, like when
  SPNEGO is listed as a feature.

Daniel Stenberg (10 Nov 2014)
- multi: removed Curl_multi_set_easy_connection
  
  It isn't used anywhere!
  
  Reported-by: Carlo Wood

- [Peter Wu brought this change]

  symbol-scan.pl: do not require autotools
  
  Makes test1119 pass when building with cmake.
  
  configurehelp.pm is generated by configure (autotools). As cmake does
  not provide a separate variable for the C preprocessor, default to cpp.
  Before commit ef24ecde68a5f577a7f0f423a767620f09a0ab16 ("symbol-scan:
  use configure script knowledge about how to run the C preprocessor"),
  this tool would also use 'cpp'.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: add ENABLE_THREADED_RESOLVER, rename ARES
  
  Fix detection of the AsynchDNS feature which not just depends on
  pthreads support, but also on whether USE_POSIX_THREADS is set or not.
  Caught by test 1014.
  
  This patch adds a new ENABLE_THREADED_RESOLVER option (corresponding to
  --enable-threaded-resolver of autotools) which also needs a check for
  HAVE_PTHREAD_H.
  
  For symmetry with autotools, CURL_USE_ARES is renamed to ENABLE_ARES
  (--enable-ares). Checks that test for the availability actually use
  USE_ARES instead as that is the result of whether a-res is available or
  not (in practice this does not matter as CARES is marked as required
  package, but nevertheless it is better to write the intent).
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: build libhostname for test suite
  
  Used by some test cases via LD_PRELOAD in order to fake the host name.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: fix HAVE_GETHOSTNAME definition
  
  Otherwise Curl_gethostname always fails. Windows has gethostname
  since Vista according to
  http://msdn.microsoft.com/en-us/library/ms738527%28VS.85%29.aspx, but
  accordings to byte_bucket's VC 2005 documentation, it is available even
  in Windows 95. (possibly after installing a Platform SDK, the
  Windows Server 2003 SP1 Platform SDK should be sufficient).
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  tests: fix libhostname visibility
  
  I noticed that a patched cmake build would pass tests with a fake local
  hostname, but the autotools build skips them:
  
      got unexpected host name back, LD_PRELOAD failed
  
  It turns out that -fvisibility=hidden hides the symbol, and since the
  tests are not part of libcurl, it fails too. Just remove the LIBCURL
  guard.
  
  Broken since cURL 7.30 (commit 83a42ee20ea7fc25abb61c0b7ef56ebe712d7093,
  "curl.h: stricter CURL_EXTERN linkage decorations logic").
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  tests: fix memleak in server/resolve.c
  
  This makes LeakSanitizer happy.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- configure: assume krb5 when gss-api works
  
  To please test 1014 while we work out if this is truly the a correct
  assumption.

Steve Holme (9 Nov 2014)
- vtls.h: Fixed compiler warning when compiled without SSL
  
  vtls.c:185:46: warning: unused parameter 'data'

- RELEASE-NOTES: Synced with 2fbf23875f

- ntlm: Added separate SSPI based functions
  
  In preparation for moving the NTLM message code into the SASL module,
  and separating the native code from the SSPI code, added functions that
  simply call the functions in curl_ntlm_msg.c.

- http_ntlm: Use the SASL functions instead
  
  In preparation for moving the NTLM message code into the SASL module
  use the SASL functions in the HTTP code instead.

Daniel Stenberg (9 Nov 2014)
- libssh2: detect features based on version, not configure checks
  
  ... so that non-configure builds get the correct functions too based on
  the libssh2 version used.

- [Nobuhiro Ban brought this change]

  SSH: use the port number as well for known_known checks
  
  ... if the libssh2 version is new enough.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1448

Steve Holme (9 Nov 2014)
- INSTALL: Updated pre-processor references to the old VC6 project files
  
  Reworked the two sections that discuss modifying the Visual Studio pre-
  processor settings, and vc6libcurl.dsw/vc6libcurl.dsp, to remove the
  project files references as they have been superseded by a more thorough
  set of project files for VC6 through VC12, but to also give the correct
  reference to this setting in later versions of Visual Studio.

- INSTALL: Added email protocols to the "Disabling in Win32 builds" section

- configure: Fixed NTLM missing from features when CURL_DISABLE_HTTP defined

- build: Fixed no NTLM support for email when CURL_DISABLE_HTTP is defined
  
  USE_NTLM would only be defined if: HTTP support was enabled, NTLM and
  cryptography weren't disabled, and either a supporting cryptography
  library or Windows SSPI was being compiled against.
  
  This means it was not possible to build libcurl without HTTP support
  and use NTLM for other protocols such as IMAP, POP3 and SMTP. Rather
  than introduce a new SASL pre-processor definition, removed the HTTP
  prerequisite just like USE_SPNEGO and USE_KRB5.
  
  Note: Winbind support still needs to be dependent on CURL_DISABLE_HTTP
  as it is only available to HTTP at present.
  
  This bug dates back to August 2011 when I started to add support for
  NTLM to SMTP.

- ntlm: Removed an unnecessary free of native Target Info
  
  Due to commit 40ee1ba0dc the free in Curl_ntlm_decode_type2_target() is
  longer required.

- ntlm: Moved the native Target Info clean-up from HTTP specific function

- ntlm: Moved SSPI clean-up code into SASL module

- Makefile.dist: Added support for WinIDN

- Makefile.vc6: Added support for WinIDN

- Makefile.dist: Added some missing SSPI configurations

- Makefile.dist: Separated the groups of SSL configurations from each other

- Makefile.dist: Grouped the x64 configurations next to their x86 counterparts

- curl.h: Tidy up of CURL_VERSION_* flags
  
  As the list has gotten a little messy and hard to read, especially with
  the introduction of deprecated items, aligned the values and comments
  into clean columns and reworked some of the comments in the process.

- curl_tool: Added krb5 to the supported features

- configure: Added krb5 to the supported features

- version info: Added Kerberos V5 to the supported features

Guenter Knauf (7 Nov 2014)
- mk-ca-bundle.vbs: switch to new certdata.txt url.

Steve Holme (7 Nov 2014)
- RELEASE-NOTES: Synced with dcad09e125

- http_digest: Fixed some memory leaks introduced in commit 6f8d8131b1
  
  Fixed a couple of memory leaks as a result of moving code that used to
  populate allocuserpwd and relied on it's clean up.

- docs: Updated following the addition of SSPI based HTTP digest auth

- sasl_sspi: Tidy up of the existing digest code
  
  Following the addition of SSPI support for HTTP digest, synchronised
  elements of the email digest code with that of the new HTTP code.

- http_digest: Post SSPI support tidy up
  
  Post tidy up to ensure commonality of code style and variable names.

Dan Fandrich (6 Nov 2014)
- test552: Don't run HTTP digest tests for SSPI based builds
  
  Technical difficulties prevented this from going into the
  previous commit.

Steve Holme (6 Nov 2014)
- tests: Don't run HTTP digest tests for SSPI based builds
  
  Added !SSPI to the features list of the HTTP digest tests, as SSPI
  based builds now use the Windows SSPI messaging API rather than the
  internal functions, and we can't control the random numbers that get
  used as part of the digest.

Daniel Stenberg (6 Nov 2014)
- curl.1: show zone index use in a URL

Steve Holme (6 Nov 2014)
- http_digest: Fixed auth retry loop when SSPI based authentication fails

- http_digest: Reworked the SSPI based input token storage
  
  Reworked the input token (challenge message) storage as what is passed
  to the buf and desc in the response generation are typically blobs of
  data rather than strings, so this is more in keeping with other areas
  of the SSPI code, such as the NTLM message functions.

- sasl_sspi: Fixed compilation warning from commit 2d2a62e3d9
  
  Added void reference to unused 'data' parameter back to fix compilation
  warning.

- sspi: Align definition values to even columns as we use 2 char spacing

- sspi: Fixed missing definition of ISC_REQ_USE_HTTP_STYLE
  
  Some versions of Microsoft's sspi.h don't define this.

- sasl: Removed non-SSPI Digest functions and defines from SSPI based builds
  
  Introduced in commit 7e6d51a73c these functions and definitions are only
  required by the internal challenge-response functions now.

- sasl_sspi: Added HTTP digest response generation code

- http_digest: Added SSPI based challenge decoding code

- http_digest: Added SSPI based clean-up code

- http_digest: Added SSPI based authentication functions
  
  This temporarily breaks HTTP digest authentication in SSPI based builds,
  causing CURLE_NOT_BUILT_IN to be returned. A follow up commit will
  resume normal operation.

- http_digest: Added required SSPI based variables to digest structure

Daniel Stenberg (6 Nov 2014)
- [Frank Gevaerts brought this change]

  contributors.sh: --releasenotes reads in names from RELEASE-NOTES
  
  This is very handy when updating the RELEASE-NOTES as then we sometimes
  have names added manually in the existing list and we use this script to
  update the set.

- RELEASE-NOTES: synced with 68542e72a9

- curl_easy_setopt.3: add CURLOPT_PINNEDPUBLICKEY
  
  Reported-by: Christian Hägele
  Bug: http://curl.haxx.se/mail/lib-2014-11/0078.html

Steve Holme (5 Nov 2014)
- build: Fixed Visual Studio project file generation of strdup.[c|h]
  
  As the curl command-line tool now includes it's own version of strdup(),
  for platforms that don't have it, fixed up the git respository Visual
  Studio project file generator to not include the version from lib in the
  tool project files, rather than having both lib\strdup.[c|h] and
  src\tool_strdup.[c|h] present.

Daniel Stenberg (5 Nov 2014)
- tool_strdup.c: include the tool strdup.h
  
  ... not the lib/ one that the tool no longer uses!

- THANKS-filter: added another Michał Górny version we've used

- contributors.sh: split lists using " and "
  
  ... and require the space after the filtering to make the filter able to
  remove names.

Steve Holme (5 Nov 2014)
- http_digest: Fixed memory leaks from commit 6f8d8131b1

- sasl: Fixed compilation warning from commit 25264131e2
  
  Added forward declaration of digestdata to overcome the following
  compilation warning:
  
  warning: 'struct digestdata' declared inside parameter list
  
  Additionally made the ntlmdata forward declaration dependent on
  USE_NTLM similar to how digestdata and kerberosdata are.

- sasl: Fixed HTTP digest challenges with spaces between auth parameters
  
  Broken as part of the rework, in commit 7e6d51a73c, to assist with the
  addition of HTTP digest via Windows SSPI.

- http_digest: Fixed compilation errors from commit 6f8d8131b1
  
  error: invalid operands to binary
  warning: pointer targets in assignment differ in signedness

- http_digest: Moved response generation into SASL module

- http_digest: Moved challenge decoding into SASL module

- http_digest: Moved clean-up function into SASL module

- http_digest: Moved algorithm definitions to SASL module

- [Gisle Vanem brought this change]

  ssh: Fixed build on platforms where R_OK is not defined
  
  Bug: http://curl.haxx.se/mail/lib-2014-11/0035.html
  Reported-by: Jan Ehrhardt

- strdup: Removed irrelevant comment
  
  ...as Curl_memdup() duplicates an area of fix size memory, that may be
  binary, and not a null terminated string.

- url.c: Fixed compilation warning
  
  conversion from 'curl_off_t' to 'size_t', possible loss of data

- http_digest: Use CURLcode instead of CURLdigest
  
  To provide consistent behaviour between the various HTTP authentication
  functions use CURLcode based error codes for Curl_input_digest()
  especially as the calling code doesn't use the specific error code just
  that it failed.

Daniel Stenberg (5 Nov 2014)
- contributors.sh: filter common alternative name spellings
  
  docs/THANKS-filter is a new filter file for converting contributor names
  we get or have recorded in alternative formats to the one we already use
  in THANKS. To help us show individual contributors using a single
  presentation of their names.

- THANKS: added missing contributor from 2012

- [Frank Gevaerts brought this change]

  Remove duplicate names.
  
  The removed names also appear as:
  Andrés García, François Charlier, Gökhan Şengün, Michał Górny, Sébastien
  Willemijns, Christopher Conroy, John E. Malmberg, Luca Altea, Peter Su,
  S. Moonesamy, Samuel Listopad, Yasuharu Yamada, Karl Moerder

Steve Holme (5 Nov 2014)
- sspi: Define authentication package name constants
  
  These were previously hard coded, and whilst defined in security.h,
  they may or may not be present in old header files given that these
  defines were never used in the original code.
  
  Not only that, but there appears to be some ambiguity between the ANSI
  and UNICODE NTLM definition name in security.h.

Patrick Monnerat (5 Nov 2014)
- Adjust OS400-specific support to last release

Daniel Stenberg (5 Nov 2014)
- THANKS: added two missing names and removed a duplicate
  
  ./contributors.sh found these extra ones that somehow had fallen
  through the cracks and never gotten added here.
  
  Reported-by: Frank Gevaerts

- bump: towards next release

- THANKS: added names from 7.39.0 release notes

Version 7.39.0 (5 Nov 2014)

Daniel Stenberg (5 Nov 2014)
- RELEASE-NOTES: 7.39.0 release (commit b3875606925)

- curl_easy_duphandle: CURLOPT_COPYPOSTFIELDS read out of bounds
  
  When duplicating a handle, the data to post was duplicated using
  strdup() when it could be binary and contain zeroes and it was not even
  zero terminated! This caused read out of bounds crashes/segfaults.
  
  Since the lib/strdup.c file no longer is easily shared with the curl
  tool with this change, it now uses its own version instead.
  
  Bug: http://curl.haxx.se/docs/adv_20141105.html
  CVE: CVE-2014-3707
  Reported-By: Symeon Paraschoudis

- lib544.c: use duphandle for test 545
  
  To verify that curl_easy_duphandle() works fine on a handle that has
  gotten data stored with *_COPYPOSTFIELDS.

- tests: add new feature 'SSLpinning'
  
  ... and make test 2034 and 2035 require it, and have it set when built
  with OpenSSL or GnuTLS.

- buildconf: update copyright year

Steve Holme (4 Nov 2014)
- INSTALL: Consistent spacing in section headings, paragraphs and examples

Daniel Stenberg (4 Nov 2014)
- buildconf: stop checking for libtool
  
  As we only use libtoolize, only check for that!

Steve Holme (4 Nov 2014)
- INSTALL: Corrected MIT Kerberos and Heimdal package names

- README: Corrected inconsistent use of --help

- INSTALL: Use GSS-API rather than GSSAPI
  
  As implementations are refereed to GSS-API libraries as per the RFC and
  GSSAPI typically refers to the SASL authentication mechanism.
  
  ...and minor rewording on the same paragraph.

- README: Added note about using Visual Studio projects out of git repository

Daniel Stenberg (4 Nov 2014)
- [K. R. Walker brought this change]

  cmake: fix ZLIB_INCLUDE_DIRS use
  
  CMake 2.8's FindZLIB.cmake documents ZLIB_INCLUDE_DIRS, see
  http://www.cmake.org/cmake/help/v2.8.0/cmake.html#module:FindZLIB
  
  Bug: https://github.com/bagder/curl/pull/123

- [Jay Satiro brought this change]

  SSL: PolarSSL default min SSL version TLS 1.0
  
  - Prior to this change no SSL minimum version was set by default at
  runtime for PolarSSL. Therefore in most cases PolarSSL would probably
  have defaulted to a minimum version of SSLv3 which is no longer secure.

- opts-Makefile: put more man pages into dist and make hmtl+pdf

- curl_multi_setopt.3: refer to stand-alone pages
  
  ... instead of duplicating info.

- opts: more multi options as stand-alone man pages

- Makefile.am: two cmake files are gone
  
  8cb010144 removed the CurlCheckCSourceCompiles.cmake and
  CurlCheckCSourceRuns.cmake files

- opts: made stand-alone man-pages for several multi options

- [Carlo Wood brought this change]

  Curl_single_getsock: fix hold/pause sock handling
  
  The previous condition that checked if the socket was marked as readable
  when also adding a writable one, was incorrect and didn't take the pause
  bits properly into account.

- [Peter Wu brought this change]

  cmake: fix struct sockaddr_storage check
  
  CHECK_TYPE_SIZE_PREINCLUDE is an internal, undocumented variable which
  was removed in cmake 2.8.1. According to the MSDN docs[1], inclusion
  of winsock2.h is sufficient. WIN32_LEAN_AND_MEAN does not really seem
  to affect the tests, so remove it too[2].
  
  For the non-windows case, remove inet headers as POSIX only requires
  sys/socket.h.
  
   [1]: http://msdn.microsoft.com/en-us/library/windows/desktop/ms740504%28v=vs.85%29.aspx
   [2]: http://stackoverflow.com/questions/11040133/what-does-defining-win32-lean-and-mean-exclude-exactly
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: clean OtherTests, fixing -Werror
  
  There were several -Wunused warnings and one duplicate macro definition.
  The EXTRA_DEFINES variable of the CurlCheckCSources macro was being
  abused ("__unused1\n#undef inline\n#define __unused2", seriously?) to
  insert extra C code. Avoid this broken abstraction and use cmake's
  check_c_source_compiles directly (works fine with CMake 2.8, maybe
  even cmake 2.6).
  
  After cleaning up all related variables (EXTRA_DEFINES,
  HEADER_INCLUDES, auxiliary headers_hack), also remove a duplicate
  add_headers_include macro and remove duplicate header additions before
  the struct timeval check.
  
  Oh, and now the code is converted to use CheckCSourceRuns and
  CheckCSourceCompiles, the two curl-specific helpers can be removed.
  Unfortunately, the cmake output is now slightly more verbose. Before:
  
      Performing Test int send(int, const void *, size_t, int) (curl_cv_func_send_test)
      Performing Test int send(int, const void *, size_t, int) (curl_cv_func_send_test) - Failed
  
  Since check_c_source_compiles prints the varname, now you see:
  
      Performing Test curl_cv_func_send_test
      Performing Test curl_cv_func_send_test - Failed
      Tested: int send(int, const void *, size_t, int)
  
  Compared cmake output with each other using vimdiff, no functional
  differences were found. Tested with GCC 4.9.1 and Clang 3.5.0.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: fix gethostby{addr,name}_r in CurlTests
  
  This patch cleans up the automatically-generated (?) code and fixes one
  case that will always fail due to syntax error.
  
  HAVE_GETHOSTBYADDR_R_5_REENTRANT always failed because of a trailing
  character ("int length;q"). Several parameter type and unused variable
  warnings popped up. This causes a detection failure with -Werror.
  
  Observe that the REENTRANT cases are exactly the same as their
  non-REENTRANT cases except for a `_REENTRANT` macro definition.
  Merge all these pieces and build one big main function with different
  cases, but reusing variables where logical.
  
  For the cases where the parameters where NULL, I looked at
  lib/hostip4.c to get an idea of the parameters types.
  
  void-cast variables such as 'rc' to avoid -Wuninitialized errors.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: drop _BSD_SOURCE macro usage
  
  autotools does not use features.h nor _BSD_SOURCE. As this macro
  triggers warnings since glibc 2.20, remove it. It should not have
  functional differences.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

Steve Holme (2 Nov 2014)
- RELEASE-NOTES: Synced with d71ea7c01e
  
  Additionally, updated "GSSAPI" to "GSS-API" for a Cmake related change
  as GSSAPI can be confused with the authentication mechanism rather than
  a GSS-API implementation library such as MIT or Heimdal.

- build: Added WinIDN build configuration options
  
  Added support for WinIDN build configurations to the VC6 project files.

- build: Added WinIDN build configuration options
  
  Added support for WinIDN build configurations to the VC7 and VC7.1
  project files.

- build: Fixed the pre-processor separator in Visual Studio project files
  
  A left over from the VC6 project files, so mainly cosmetic in Visual
  Studio .NET as it can handle both comma and semi-colon characters for
  separating multiple pre-processor definitions.
  
  However, the IDE uses semi-colons if the value is edited, and as such,
  this may cause problems in future for anyone updating the files or
  merging patches.
  
  Used the Visual Studio IDE to correct the separator character.

- build: Added optional specific version generation of VC project files
  
  ..when working from the git repository. This is particularly useful
  for single development environments where the project files for all
  supported versions of Visual Studio may not be required.

- [Jay Satiro brought this change]

  build-openssl.bat: Fix x64 release build
  
  Prior to this change if x64 release was specified a failed attempt was
  made to build x86 release instead.

- CURLOPT_XOAUTH2_BEARER.3: Corrected the OAuth version number

- CURLOPT_SASL_IR.3: Added supported mechanism information
  
  ...and removed duplication of what protocols are supported from the
  description text.

- opts: Use common wording for MAIL related names

- opts: Use common wording for TLS user/password option names
  
  ...and revised the proxy wording a little as well.

- CURLOPT_MAXCONNECTS.3: Reworked the description to be less confusing
  
  ...and corrected a related typo in curl_easy_setopt.3.

Guenter Knauf (2 Nov 2014)
- RELEASE-NOTES: removed obsolete entry; fixed entry.

Steve Holme (2 Nov 2014)
- RELEASE-NOTES: Synced with e7da67f5d3

- docs: Added mention of Kerberos for CURL_VERSION_SSPI
  
  As this has been present for SOCKSv5 proxy since v7.19.4 and for IMAP,
  POP3 and SMTP authentication since v7.38.0.

- CURL_VERSION_KERBEROS4: Mark as deprecated
  
  Support for Kerberos V4 was removed in v7.33.0.

- sasl: Fixed Kerberos V5 inclusion when CURL_DISABLE_CRYPTO_AUTH is used
  
  Typically the USE_WINDOWS_SSPI definition would not be used when the
  CURL_DISABLE_CRYPTO_AUTH define is, however, it is still a valid build
  configuration and, as such, the SASL Kerberos V5 (GSSAPI) authentication
  data structures and functions would incorrectly be used when they
  shouldn't be.
  
  Introduced a new USE_KRB5 definition that takes into account the use of
  CURL_DISABLE_CRYPTO_AUTH like USE_SPNEGO and USE_NTLM do.

- openssl: Use 'CURLcode result'
  
  More CURLcode fixes.

Daniel Stenberg (1 Nov 2014)
- resume: consider a resume from [content-length] to be OK
  
  Basically since servers often then don't respond well to this and
  instead send the full contents and then libcurl would instead error out
  with the assumption that the server doesn't support resume. As the data
  is then already transfered, this is now considered fine.
  
  Test case 1434 added to verify this. Test case 1042 slightly modified.
  
  Reported-by: hugo
  Bug: http://curl.haxx.se/bug/view.cgi?id=1443

Steve Holme (1 Nov 2014)
- openssl: Use 'CURLcode result'
  
  More standardisation of CURLcode usage and coding style.

- openssl: Use 'CURLcode result'
  
  ...and some minor code style changes.

- ftplistparser: We prefer 'CURLcode result'

- opts: Use common wording for user/password option names

- CURLOPT_CONNECT_ONLY.3: Removed "This option is implemented for..." text
  
  As this is covered by the PROTOCOLS section and saves having to update
  two parts of the document with the same information in future.

- CURLOPT_GSSAPI_DELEGATION.3: Use GSS-API rather than GSSAPI
  
  As implementations are refereed to GSS-API libraries as per the RFC and
  GSSAPI typically refers to an authentication mechanism.

- CURLOPT_CONNECT_ONLY.3: Fixed incomplete protocol list
  
  Added missing IMAP to the protocol list.

- code cleanup: Use 'CURLcode result'

- curl_easy_setopt.3: Fixed lots of typos

- curl_easy_setopt.3: Moved CURLOPT_DIRLISTONLY into PROTOCOL OPTIONS
  
  ...as this option affects more that just FTP.

Guenter Knauf (30 Oct 2014)
- build: added Watcom support to build with WinSSL.

Daniel Stenberg (30 Oct 2014)
- CURLOPT_PINNEDPUBLICKEY.3: added details

Steve Holme (30 Oct 2014)
- CURLOPT_CUSTOMREQUEST.3: Fixed incomplete protocol list
  
  Whilst the description included information about SMTP, the protocol
  list only showed "TTP, FTP, IMAP, POP3".

- CURLOPT_DIRLISTONLY.3: Added information about the usage in POP3

Daniel Stenberg (29 Oct 2014)
- openssl: enable NPN separately from ALPN
  
  ... and allow building with nghttp2 but completely without NPN and ALPN,
  as nghttp2 can still be used for plain-text HTTP.
  
  Reported-by: Lucas Pardue

- configure.ac: remove checks for OpenSSL NPN/ALPN funcs again
  
  ... since the conditional in the code are now based on OpenSSL versions
  instead to better support non-configure builds.

- opts: added some "SEE ALSO" references

Steve Holme (29 Oct 2014)
- RELEASE-NOTES: Synced with 32913182dc

- vtls.c: Fixed compilation warning
  
  conversion from 'size_t' to 'unsigned int', possible loss of data

- sspi: Return CURLE_LOGIN_DENIED on AcquireCredentialsHandle() failure
  
  Return a more appropriate error, rather than CURLE_OUT_OF_MEMORY when
  acquiring the credentials handle fails. This is then consistent with
  the code prior to commit f7e24683c4 when log-in credentials were empty.

- sasl_sspi: Allow DIGEST-MD5 to use current windows credentials
  
  Fixed the ability to use the current log-in credentials with DIGEST-MD5.
  I had previously disabled this functionality in commit 607883f13c as I
  couldn't get this to work under Windows 8, however, from testing HTTP
  Digest authentication through Windows SSPI and then further testing of
  this code I have found it works in Windows 7.
  
  Some further investigation is required to see what the differences are
  between Windows 7 and 8, but for now enable this functionality as the
  code will return an error when AcquireCredentialsHandle() fails.

Kamil Dudka (29 Oct 2014)
- transfer: drop the code handling the ssl_connect_retry flag
  
  Its last use has been removed by the previous commit.

- nss: drop the code for libcurl-level downgrade to SSLv3
  
  This code was already deactivated by commit
  ec783dc142129d3860e542b443caaa78a6172d56.

- openssl: fix a line length warning

Guenter Knauf (29 Oct 2014)
- Added NetWare support to build with nghttp2.

- Fixed error message since we require ALPN support.

- Check for ALPN via OpenSSL version number.
  
  This check works also with to non-configure platforms.

Steve Holme (28 Oct 2014)
- sasl_sspi: Fixed typo in comment

- code cleanup: We prefer 'CURLcode result'

Daniel Stenberg (28 Oct 2014)
- TODO: consider supporting STAT

- mk-ca-bundle: spell fix "version"

- HTTP: return larger than 3 digit response codes too
  
  HTTP 1.1 is clearly specified to only allow three digit response codes,
  and libcurl used sscanf("%3d") for that purpose. This made libcurl
  support smaller numbers but not larger. It does now, but we will not
  make any specific promises nor document this further since it is going
  outside of what HTTP is.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1441
  Reported-by: Balaji

- src/: remove version.h.dist from gitignore
  
  It has not been used since commit f7bfdbab in 2011

Steve Holme (26 Oct 2014)
- ntlm: We prefer 'CURLcode result'
  
  Continuing commit 0eb3d15ccb more return code variable name changes.

Guenter Knauf (26 Oct 2014)
- Cosmetics: lowercase non-special subroutine names.

Steve Holme (26 Oct 2014)
- RELEASE-NOTES: Synced with 07ac29a058

- http_negotiate: We prefer 'CURLcode result'
  
  Continuing commit 0eb3d15ccb more return code variable name changes.

- http_negotiate: Fixed missing check for USE_SPNEGO

- sspi: Synchronization of cleanup code between auth mechanisms

- sspi: Renamed max token length variables
  
  Code cleanup to try and synchronise code between the different SSPI
  based authentication mechanisms.

- sspi: Renamed expiry time stamp variables
  
  Code cleanup to try and synchronise code between the different SSPI
  based authentication mechanisms.

- sspi: Only call CompleteAuthToken() when complete is needed
  
  Don't call CompleteAuthToken() after InitializeSecurityContext() has
  returned SEC_I_CONTINUE_NEEDED as this return code only indicates the
  function should be called again after receiving a response back from
  the server.
  
  This only affected the Digest and NTLM authentication code.

Dan Fandrich (26 Oct 2014)
- Added the "flaky" keyword to a number of tests
  
  Each shows evidence of flakiness on at least one platform on
  the autobuilds. Users can use this keyword to skip these tests
  if desired.

Steve Holme (26 Oct 2014)
- ntlm: Return all errors from Curl_ntlm_core_mk_nt_hash()
  
  For consistency with other areas of the NTLM code propagate all errors
  from Curl_ntlm_core_mk_nt_hash() up the call stack rather than just
  CURLE_OUT_OF_MEMORY.

- ntlm: Return CURLcode from Curl_ntlm_core_mk_lm_hash()

- ntlm: Use 'CURLcode result'
  
  Continuing commit 0eb3d15ccb more return code variable name changes.

- ntlm: Only define ntlm data structure when USE_NTLM is defined

- ntlm: Changed handles to be dynamic like other SSPI handles
  
  Code cleanup to try and synchronise code between the different SSPI
  based authentication mechanisms.

- ntlm: Renamed handle variables to match other SSPI structures
  
  Code cleanup to try and synchronise code between the different SSPI
  based authentication mechanisms.

- ntlm: Renamed SSPI based input token variables
  
  Code cleanup to try and synchronise code between the different SSPI
  based authentication mechanisms.

- ntlm: We prefer 'CURLcode result'
  
  Continuing commit 0eb3d15ccb more return code variable name changes.

- build: Added WinIDN build configuration options
  
  Added support for WinIDN build configurations to the VC8 and VC9
  project files.

Nick Zitzmann (24 Oct 2014)
- darwinssl: detect possible future removal of SSLv3 from the framework
  
  If Apple ever drops SSLv3 support from the Security framework, we'll fail with an error if the user insists on using SSLv3.

Patrick Monnerat (24 Oct 2014)
- gskit.c: remove SSLv3 from SSL default.

- gskit.c: use 'CURLcode result'

Daniel Stenberg (24 Oct 2014)
- [Jay Satiro brought this change]

  SSL: Remove SSLv3 from SSL default due to POODLE attack
  
  - Remove SSLv3 from SSL default in darwinssl, schannel, cyassl, nss,
  openssl effectively making the default TLS 1.x. axTLS is not affected
  since it supports only TLS, and gnutls is not affected since it already
  defaults to TLS 1.x.
  
  - Update CURLOPT_SSLVERSION doc

- pipelining: only output "is not blacklisted" in debug builds

- *.3: add/extend "SEE ALSO" sections

- curl_easy_pause.3: minor wording edit

- curl_getdate.3: provide a "SEE ALSO" section

- curl_global_init.3: minor formatting fix, add version info

- url.c: use 'CURLcode result'

- code cleanup: we prefer 'CURLcode result'
  
  ... for the local variable name in functions holding the return
  code. Using the same name universally makes code easier to read and
  follow.
  
  Also, unify code for checking for CURLcode errors with:
  
   if(result) or if(!result)
  
  instead of
  
   if(result == CURLE_OK), if(CURLE_OK == result) or if(result != CURLE_OK)

- Curl_add_timecondition: skip superfluous varible assignment
  
  Detected by cppcheck.

- Curl_pp_flushsend: skip superfluous assignment
  
  Detected by cppcheck.

- Curl_pp_readresp: remove superfluous assignment
  
  Variable already assigned a few lines up.
  
  Detected by cppcheck.

- Curl_proxyCONNECT: remove superfluous statement
  
  The variable is already assigned, skip the duplicate assignment.
  
  Pointed out by cppcheck.

Guenter Knauf (24 Oct 2014)
- Added MinGW support to build with nghttp2.

- Added VC ssh2 target to main Makefile.

- Some cosmetics and simplifies.

- Remove dependency on openssl and cut.
  
  Prefer usage of Perl modules for sha1 calculation since there
  might be systems where openssl is not installed or not in path.
  If openssl is used for sha1 calculation then dont rely on cut
  since it is usually not available on other systems than Linux.

Daniel Stenberg (23 Oct 2014)
- RELEASE-NOTES: synced with e116d0a62

- CURLOPT_RESOLVE.3: add an example

- gnutls: removed dead code
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1437
  Reported-by: Julien

- Curl_rand: Uninitialized variable: r
  
  This is not actually used uninitialized but we silence warnings.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1437
  Reported-by: Julien

- opts: provide more and updated examples

- CURLOPT_RANGE.3: works for SFTP as well
  
  ... and added a small example

- curl.1: edited for clarity

- CURLOPT_SSLVERSION.3: provide an example

- docs/libcurl/ABI: more markdown friendly

- docs: edited lots of libcurl docs for clarity

- opts: added examples

- HISTORY: two glimpses in 2014

Kamil Dudka (20 Oct 2014)
- nss: reset SSL handshake state machine
  
  ... when the handshake succeeds
  
  This fixes a connection failure when FTPS handle is reused.

Daniel Stenberg (20 Oct 2014)
- [Peter Wu brought this change]

  cmake: generate pkg-config and curl-config
  
  Initial work to generate a pkg-config and curl-config script. Static
  linking (`curl-config --static-libs` and `pkg-config --shared --libs
  libcurl`) is broken and therefore disabled.
  
  CONFIGURE_OPTIONS does not make sense for CMake, use an empty string
  for now.
  
  At least `curl-config --features` and `curl-config --protocols` work
  which is needed by runtests.pl.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: use LIBCURL_VERSION from curlver.h
  
  This matches the behavior from autotools. The auxiliary major, minor
  and patch components are not needed anymore and therefore removed.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: add SUPPORT_FEATURES and SUPPORT_PROTOCOLS
  
  For compatibility with autoconf, it will be used later for curl-config
  and pkg-config. Not all features and or protocols can be enabled as
  these are missing additional checks (see new TODOs).
  
  SUPPORT_PROTOCOLS is partially scripted (grep for SUPPORT_PROTOCOLS=)
  and manually verified/modified. SUPPORT_FEATURES is manually added.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- cmake: add CMake/Macros.cmake to the release tarball

- test545: make it not use a trailing zero
  
  CURLOPT_COPYPOSTFIELDS with a given CURLOPT_POSTFIELDSIZE does not
  require a trailing zero of the data and by making sure this test doesn't
  use one we know it works (combined with valgrind).

Steve Holme (16 Oct 2014)
- ntlm: Fixed empty type-2 decoded message info text
  
  Updated the info text when the base-64 decode of the type-2 message
  returns a null buffer to be more specific.

- ntlm: Fixed empty/bad base-64 decoded buffer return codes

- ntlm: Avoid unnecessary buffer allocation for SSPI based type-2 token

Daniel Stenberg (16 Oct 2014)
- httpcustomheader.c: make use of more CURLOPT_HTTPHEADER features
  
  ... and only do a single request for clarity.

Steve Holme (15 Oct 2014)
- sasl_sspi: Fixed some typos

- sasl_sspi: Fixed Kerberos response buffer not being allocated when using SSO

Daniel Stenberg (15 Oct 2014)
- [Bruno Thomsen brought this change]

  mk-ca-bundle: added SHA-384 signature algorithm
  
  Certificates based on SHA-1 are being phased out[1].
  So we should expect a rise in certificates based on SHA-2.
  Adding SHA-384 as a valid signature algorithm.
  
  [1] https://blog.mozilla.org/security/2014/09/23/phasing-out-certificates-with-sha-1-based-signature-algorithms/
  
  Signed-off-by: Bruno Thomsen <bth@kamstrup.dk>

Patrick Monnerat (14 Oct 2014)
- OS400: fix bugs in curl_*escape_ccsid() and reduce variables scope

- Implement pinned public key in GSKit backend

Daniel Stenberg (14 Oct 2014)
- CURLOPT_TLSAUTH_*.3: fix reference typos

- cleanups: reduce variable scope
  
  cppcheck pointed these out.

- singleipconnect: remove dead assignment never used
  
  cppcheck pointed this out.

- pinning: minor code style policing

Patrick Monnerat (13 Oct 2014)
- Factorize pinned public key code into generic file handling and backend specific

- vtls: remove QsoSSL

- gskit: supply dummy randomization function

- vtls/*: deprecate have_curlssl_md5sum and set-up default md5sum implementation

Daniel Stenberg (13 Oct 2014)
- [Peter Wu brought this change]

  tests: move TESTCASES to Makefile.inc, add show for cmake
  
  This change allows runtests.pl to be run from the CMake builddir:
  
      export srcdir=/tmp/curl/tests;
      perl -I$srcdir $srcdir/runtests.pl -l
  
  In order to make this possible, all test cases have been moved from
  Makefile.am to Makefile.inc.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: enable IPv6 by default if available
  
  ENABLE_IPV6 depends on HAVE_GETADDRINFO or you will get a
  Curl_getaddrinfo_ex error. Enable IPv6 by default, disabling it if
  struct sockaddr_in6 is not found in netinet/in.h.
  
  Note that HAVE_GETADDRINFO_THREADSAFE is still not set as it needs more
  platform checks even though POSIX requires a thread-safe getaddrinfo.
  
  Verified on Arch Linux x86_64 with glibc 2.20-2 and Linux 3.16-rc7.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  cmake: build tool_hugehelp (ENABLE_MANUAL)
  
  Rather than always outputting an empty manual page for the '-M' option,
  generate a full manual page as done by autotools. For simplicity in
  CMake, always generate the gzipped page as it will not be used anyway
  when zlib is not available.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- [Peter Wu brought this change]

  tests/http_pipe.py: Python 3 support
  
  The 2to3 tool converted socketserver (which I manually fixed up with an
  import fallback) and the print(e) line. The xrange option was converted
  to range, but it seems better to use the '*' operator here for
  simplicity.
  
  Signed-off-by: Peter Wu <peter@lekensteyn.nl>

- SECURITY: slightly nicer markdown format

- RELEASE-PROCEDURE: better markdown, more content

- RELEASE-NOTES: synced with 6637b237e6eb
  
  ... and bumped the planned release version.

- vtls: have vtls.h include the backend header files
  
  It turned out some features were not enabled in the build since for
  example url.c #ifdefs on features that are defined on a per-backend
  basis but vtls.h didn't include the backend headers.
  
  CURLOPT_CERTINFO was one such feature that was accidentally disabled.

- test2036: verify -O with no slash at all in the URL
  
  Similar to test 76 but that test's URL has a slash just no file name
  part.

- get_url_file_name: make no slash equal empty string

- get_url_file_name: never return a NULL string *and* OK
  
  Change 987a4a73 assumes that as it simplifies life in the calling
  function.
  
  Reported-by: Fabian Keil

- [Jakub Zakrzewski brought this change]

  Cmake: Build with GSSAPI (MIT or Heimdal)
  
  It tries hard to recognise SDK's on different platforms. On windows MIT
  Kerberos installs SDK with other things and puts path into registry.
  Heimdal have separate zip archive. On linux pkg-config is tried, then
  krb5-config script and finally old-style libs and headers detection.
  
  Command line args:
  * CMAKE_USE_GSSAPI - enables GSSAPI detection
  * GSS_ROOT_DIR - if set, should point to the root of GSSAPI installation
                   (the one with include and lib directories)

- [Jakub Zakrzewski brought this change]

  Cmake: Got rid of setup_curl_dependencies
  
  There is no need for such function. Include_directories propagate by
  themselves and having a function with one simple link statement makes
  little sense.

- [Jakub Zakrzewski brought this change]

  Cmake: Avoid cycle directory dependencies.
  
  Because we prepended libraries to list, CMake had troubles resolving
  link directory order as it detected some cycles. Appending to list ensures
  that dependencies will preceed dependees.

- [Jakub Zakrzewski brought this change]

  Cmake: Fix library list provided to cURL tests.
  
  The list must be set after those nice CMake tests as we mess with
  CMAKE_REQUIRED_LIBRARIES there.

- [Jakub Zakrzewski brought this change]

  Cmake: Check for OpenSSL before OpenLDAP.
  
  OpenLDAP might have been build with OpenSSL. Checking for OpenLDAP first
  may result in undefined symbols. Of course, the found OpenSSL libraries
  must also be linked whenever OpenLDAP is.

- curl_multi_fdset.3: improved the formatting slightly

- curl_multi_fdset: explain the fd_set arguments

Kamil Dudka (8 Oct 2014)
- nss: do not fail if a CRL is already cached
  
  This fixes a copy-paste mistake from commit 2968f957.

Patrick Monnerat (8 Oct 2014)
- OS400: upgrade interface for pinned public key (no implementation yet)

Daniel Stenberg (8 Oct 2014)
- FormAdd: precaution against memdup() of NULL pointer
  
  Coverity CID 252518. This function is in general far too complicated for
  its own good and really should be broken down into several smaller
  funcitons instead - but I'm adding this protection here now since it
  seems there's a risk the code flow can end up here and dereference a
  NULL pointer.

- operate: avoid NULL dereference
  
  Coverity CID 1241948. dumpeasysrc() would get called with
  config->current set to NULL which could be dereferenced by a warnf()
  call.

- do_sec_send: remove dead code
  
  Coverity CID 1241951. The condition 'len >= 0' would always be true at
  that point and thus not necessary to check for.

- krb5_encode: remove unused argument
  
  Coverity CID 1241957. Removed the unused argument. As this struct and
  pointer now are used only for krb5, there's no need to keep unused
  function arguments around.

- operate_do: skip superfluous check for NULL pointer
  
  Coverity CID 1243583. get_url_file_name() cannot fail and return a NULL
  file name pointer so skip the check for that - it tricks coverity into
  believing it can happen and it then warns later on when we use 'outfile'
  without checking for NULL.

- curl_easy_getinfo.3: spell-fix
  
  Reported-By: Luan Cestari

- [moparisthebest brought this change]

  GnuTLS: Implement public key pinning

- [moparisthebest brought this change]

  SSL: implement public key pinning
  
  Option --pinnedpubkey takes a path to a public key in DER format and
  only connect if it matches (currently only implemented with OpenSSL).
  
  Provides CURLOPT_PINNEDPUBLICKEY for curl_easy_setopt().
  
  Extract a public RSA key from a website like so:
  openssl s_client -connect google.com:443 2>&1 < /dev/null | \
  sed -n '/-----BEGIN/,/-----END/p' | openssl x509 -noout -pubkey \
  | openssl rsa -pubin -outform DER > google.com.der

- multi_runsingle: fix possible memory leak
  
  Coverity CID 1202837. 'newurl' can in fact be allocated even when
  Curl_retry_request() returns failure so free it if need be.

- ares::Curl_resolver_cancel: skip checking for NULL conn
  
  Coverity CID 1243581. 'conn' will never be NULL here, and if it would be
  the subsequent statement would dereference it!

- parseconfig: skip a NULL check
  
  Coverity CID 1154198. This NULL check implies that the pointer _can_ be
  NULL at this point, which it can't. Thus it is dead code. It tricks
  static analyzers to warn about dereferencing the pointer since the code
  seems to imply it can be NULL.

- [Waldek Kozba brought this change]

  multi-uv.c: call curl_multi_info_read() better
  
  Improves it for low-latency cases (like the communication with
  localhost)

- tool_go_sleep: use (void) to spell out we ignore the return value
  
  Coverity CID 1222080.

- ssh_statemach_act: split out assignment from check
  
  just a minor code style thing to make the code clearer

Marc Hoersken (4 Oct 2014)
- curl_schannel.c: Fixed possible memory or handle leak
  
  First try to fix possible memory leaks, in this case:
  Only connssl->ctxt xor onnssl->cred being initialized.

Daniel Stenberg (4 Oct 2014)
- getparameter: remove dead code
  
  Coverity CID 1061126. 'parse' will always be non-NULL here.

- getparameter: comment a switch FALLTHROUGH
  
  Coverity CID 1061118. Point out that it is on purpose.

- choose_mech: fix return code
  
  Coverity CID 1241950. The pointer is never NULL but it might point to
  NULL.

- Curl_sec_read_msg: spell out that we ignore return code
  
  Coverity CID 1241947. Since if sscanf() fails, the previously set value
  remains set.

- nonblock: call with (void) to show we ignore the return code
  
  Coverity pointed out several of these.

- parse_proxy: remove dead code.
  
  Coverity CID 982331.

- Curl_debug: document switch fallthroughs

- curl_multi_remove_handle: remove dead code
  
  Coverify CID 1157776. Removed a superfluous if() that always evaluated
  true (and an else clause that never ran), and then re-indented the
  function accordingly.

- Curl_pipeline_server_blacklisted: handle a NULL server name
  
  Coverity CID 1215284. The server name is extracted with
  Curl_copy_header_value() and passed in to this function, and
  copy_header_value can actually can fail and return NULL.

- ssh: comment "fallthrough" in switch statement

- [Jeremy Lin brought this change]

  ssh: improve key file search
  
  For private keys, use the first match from: user-specified key file
  (if provided), ~/.ssh/id_rsa, ~/.ssh/id_dsa, ./id_rsa, ./id_dsa
  
  Note that the previous code only looked for id_dsa files. id_rsa is
  now generally preferred, as it supports larger key sizes.
  
  For public keys, use the user-specified key file, if provided.
  Otherwise, try to extract the public key from the private key file.
  This means that passing --pubkey is typically no longer required,
  and makes the key-handling behavior more like OpenSSH.

- CURLOPT_HTTPHEADER.3: libcurl doesn't copy the whole list

- detect_proxy: fix possible single-byte memory leak
  
  Coverity CID 1202836. If the proxy environment variable returned an empty
  string, it would be leaked. While an empty string is not really a proxy, other
  logic in this function already allows a blank string to be returned so allow
  that here to avoid the leak.

- multi_runsingle: fix memory leak
  
  Coverity CID 1202837. There's a potential risk that 'newurl' gets
  overwritten when it was already pointing to allocated memory.

- pop3_perform_authentication: fix memory leak
  
  Coverity CID 1215287. There's a potential risk for a memory leak in
  here, and moving the free call to be unconditional seems like a cheap
  price to remove the risk.

- imap_perform_authentication: fix memory leak
  
  Coverity CID 1215296. There's a potential risk for a memory leak in
  here, and moving the free call to be unconditional seems like a cheap
  price to remove the risk.

- wait_or_timeout: return failure when Curl_poll() fails
  
  Coverity detected this. CID 1241954. When Curl_poll() returns a negative value
  'mcode' was uninitialized. Pretty harmless since this is debug code only and
  would at worst cause an error to _not_ be returned...

- curl.1: mention quoting in the URL section
  
  and separate the example URLs with newlines

Steve Holme (30 Sep 2014)
- [Bill Nagel brought this change]

  smtp: Fixed intermittent "SSL3_WRITE_PENDING: bad write retry" error
  
  This patch fixes the "SSL3_WRITE_PENDING: bad write retry" error that
  sometimes occurs when sending an email over SMTPS with OpenSSL. OpenSSL
  appears to require the same pointer on a write that follows a retry
  (CURLE_AGAIN) as discussed here:
  
  http://stackoverflow.com/questions/2997218/why-am-i-getting-error1409f07fssl-routinesssl3-write-pending-bad-write-retr

Daniel Stenberg (30 Sep 2014)
- RELEASE-NOTES: synced with 53cbea22310f15

- file: reject paths using embedded %00
  
  Mostly because we use C strings and they end at a binary zero so we know
  we can't open a file name using an embedded binary zero.
  
  Reported-by: research@g0blin.co.uk

Dan Fandrich (26 Sep 2014)
- test506: Fixed a couple of memory leaks in test

Daniel Stenberg (25 Sep 2014)
- [Yousuke Kimoto brought this change]

  CURLOPT_COOKIELIST: Added "RELOAD" command

- [Michael Wallner brought this change]

  CURLOPT_POSTREDIR.3: Added availability for CURL_REDIR_POST_303

- threaded-resolver: revert Curl_expire_latest() switch
  
  The switch to using Curl_expire_latest() in commit cacdc27f52b was a
  mistake and was against the advice even mentioned in that commit. The
  comparison in asyn-thread.c:Curl_resolver_is_resolved() makes
  Curl_expire() the suitable function to use.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1426
  Reported-By: graysky

- libcurl docs: improvements all over

Steve Holme (19 Sep 2014)
- build: Added WinIDN build configuration options
  
  Added initial support for WinIDN build configurations to the VC10+
  project files.

Daniel Stenberg (19 Sep 2014)
- tutorial: signals aren't used for the threaded resolver

- FAQ: update the pronunciation section
  
  As we weren't using the correct phonetic description and doing it correctly
  involves funny letters that I'm sure will cause problems for people in a text
  document so I instead rephrased it and link to a WAV file with a person
  actually saying 'curl'.
  
  Reported-By: Dimitar Boevski

- CURLOPT_COOKIE*: added more cross-references

- BINDINGS: add node-libcurl
  
  Reported-By: Jonathan Cardoso Machado
  URL: http://curl.haxx.se/mail/lib-2014-09/0102.html

- README.http2: updated to reflect current status

- formdata: removed unnecessary USE_SSLEAY use

- curlssl: make tls backend symbols use curlssl in the name

- url: let the backend decide CURLOPT_SSL_CTX_ support
  
  ... to further remove specific TLS backend knowledge from url.c

- vtls: have the backend tell if it supports CERTINFO

- [Catalin Patulea brought this change]

  configure: allow --with-ca-path with PolarSSL too
  
  Missed this in af45542c.
  
  Signed-off-by: Catalin Patulea <cat@vv.carleton.ca>

- CURLOPT_CAPATH: return failure if set without backend support

- [Tatsuhiro Tsujikawa brought this change]

  http2: Fix busy loop when EOF is encountered
  
  Previously we did not handle EOF from underlying transport socket and
  wrongly just returned error code CURL_AGAIN from http2_recv, which
  caused busy loop since socket has been closed.  This patch adds the
  code to handle EOF situation and tells the upper layer that we got
  EOF.

Steve Holme (13 Sep 2014)
- build: Added batch wrapper to checksrc.pl

- RELEASE-NOTES: Synced with bd3df5ec6d

- [Marcel Raad brought this change]

  sasl_sspi: Fixed Unicode build
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1422
  Verified-by: Steve Holme

Daniel Stenberg (12 Sep 2014)
- libcurl-tutorial.3: fix GnuTLS link to thread-safety guidelines
  
  The former link was turned into a 404 at some point.
  
  Reported-By: Askar Safin

- contributors.sh: split list of names at comma
  
  ... to support a list of names provided in a commit message.

Steve Holme (12 Sep 2014)
- [Ulrich Telle brought this change]

  ntlm: Fixed HTTP proxy authentication when using Windows SSPI
  
  Removed ISC_REQ_* flags from calls to InitializeSecurityContext to fix
  bug in NTLM handshake for HTTP proxy authentication.
  
  NTLM handshake for HTTP proxy authentication failed with error
  SEC_E_INVALID_TOKEN from InitializeSecurityContext for certain proxy
  servers on generating the NTLM Type-3 message.
  
  The flag ISC_REQ_CONFIDENTIALITY seems to cause the problem according
  to the observations and suggestions made in a bug report for the
  QT project (https://bugreports.qt-project.org/browse/QTBUG-17322).
  
  Removing all the flags solved the problem.
  
  Bug: http://curl.haxx.se/mail/lib-2014-08/0273.html
  Reported-by: Ulrich Telle
  Assisted-by: Steve Holme, Daniel Stenberg

Daniel Stenberg (12 Sep 2014)
- [Ray Satiro brought this change]

  newlines: fix mixed newlines to LF-only
  
  I use the curl repo mainly on Windows with the typical Windows git
  checkout which converts the LF line endings in the curl repo to CRLF
  automatically on checkout. The automatic conversion is not done on files
  in the repo with mixed line endings. I recently noticed some weird
  output with projects/build-openssl.bat that I traced back to mixed line
  endings, so I scanned the repo and there are files (excluding the
  test data) that have mixed line endings.
  
  I used this command below to do the scan. Unfortunately it's not as easy
  as git grep, at least not on Windows. This gets the names of all the
  files in the repo's HEAD, gets each of those files raw from HEAD, checks
  for mixed line endings of both LF and CRLF, and prints the name if
  mixed. I excluded path tests/data/test* because those can have mixed
  line endings if I understand correctly.
  
  for f in `git ls-tree --name-only --full-tree -r HEAD`;
  do if [ -n "${f##tests/data/test*}" ];
      then git show "HEAD:$f" | \
          perl -0777 -ne 'exit 1 if /([^\r]\n.*\r\n)|(\r\n.*[^\r]\n)/';
      if [ $? -ne 0 ];
          then echo "$f";
      fi;
  fi;
  done

- [Viktor Szakáts brought this change]

  mk-ca-bundle.pl: converted tabs to spaces, deleted trailing spaces

- ROADMAP: markdown eats underscores
  
  It interprets them as italic indictors unless we backtick the word.

- ROADMAP: tiny formatting edit for nicer web output

Steve Holme (10 Sep 2014)
- ROADMAP.md: Updated GSSAPI authentication following 7.38.0 additions

- INTERNALS: Added email and updated Kerberos details

- FEATURES: Updated Kerberos details
  
  Added support for Kerberos 5 to the email protocols following the recent
  additions in 7.38.0.
  
  Removed Kerberos 4 as this has been gone for a while now.

Daniel Stenberg (10 Sep 2014)
- [Paul Howarth brought this change]

  openssl: build fix for versions < 0.9.8e
  
  Bug: http://curl.haxx.se/mail/lib-2014-09/0064.html

- mk-ca-bundle.pl: first, try downloading HTTPS with curl
  
  As a sort of step forward, this script will now first try to get the
  data from the HTTPS URL using curl, and only if that fails it will
  switch back to the HTTP transfer using perl's native LWP functionality.
  To reduce the risk of this script being tricked.
  
  Using HTTPS to get a cert bundle introduces a chicken-and-egg problem so
  we can't really ever completely disable HTTP, but chances are that most
  users already have a ca cert bundle that trusts the mozilla.org site
  that this script downloads from.
  
  A future version of this script will probably switch to require a
  dedicated "insecure" command line option to allow downloading over HTTP
  (or unverified HTTPS).

- LICENSE-MIXING: removed krb4 info
  
  krb4 has been dropped since a while now

- bump: on the 7.38.1-DEV train now!

- SSLCERTS: minor updates
  
  Edited format to look better on the web, added a "it is about trust"
  section.

Version 7.38.0 (10 Sep 2014)

Daniel Stenberg (10 Sep 2014)
- dist: two cmake files are no more
  
  CMake/FindOpenSSL.cmake and FindZLIB.cmake are gone since 14aa8f0c117b

- RELEASE-NOTES: final update for 7.38.0

- cookies: reject incoming cookies set for TLDs
  
  Test 61 was modified to verify this.
  
  CVE-2014-3620
  
  Reported-by: Tim Ruehsen
  URL: http://curl.haxx.se/docs/adv_20140910B.html

- [Tim Ruehsen brought this change]

  cookies: only use full host matches for hosts used as IP address
  
  By not detecting and rejecting domain names for partial literal IP
  addresses properly when parsing received HTTP cookies, libcurl can be
  fooled to both send cookies to wrong sites and to allow arbitrary sites
  to set cookies for others.
  
  CVE-2014-3613
  
  Bug: http://curl.haxx.se/docs/adv_20140910A.html

- HISTORY: fix the 1998 title position

- HISTORY: extended and now markdown

- SSLCERTS: converted to markdown
  
  Only minor edits to make it generate nice HTML output using markdown, as
  this document serves both in source release tarballs as on the web site.
  
  URL: http://curl.haxx.se/docs/sslcerts.html

- ftp-wildcard.c: spell fix
  
  Reported-By: Frank Gevaerts

- RELEASE-NOTES: synced with 921a0c22a6f

- THANKS: synced with RELEASE-NOTES for 921a0c22a6f

- polarassl: avoid memset() when clearing the first byte is enough

- [Catalin Patulea brought this change]

  polarssl: support CURLOPT_CAPATH / --capath
  
  Signed-off-by: Catalin Patulea <cat@vv.carleton.ca>

- SECURITY: eh, make more sense!

- SECURITY: how to join the curl-security list

- RELEASE-NOTES: fix the required nghttp2 version typo

- [Brandon Casey brought this change]

  Ensure progress.size_dl/progress.size_ul are always >= 0
  
  Historically the default "unknown" value for progress.size_dl and
  progress.size_ul has been zero, since these values are initialized
  implicitly by the calloc that allocates the curl handle that these
  variables are a part of.  Users of curl that install progress
  callbacks may expect these values to always be >= 0.
  
  Currently it is possible for progress.size_dl and progress.size_ul
  to by set to a value of -1, if Curl_pgrsSetDownloadSize() or
  Curl_pgrsSetUploadSize() are passed a "size" of -1 (which a few
  places currently do, and a following patch will add more).  So
  lets update Curl_pgrsSetDownloadSize() and Curl_pgrsSetUploadSize()
  so they make sure that these variables always contain a value that
  is >= 0.
  
  Updates test579 and test599.
  
  Signed-off-by: Brandon Casey <drafnel@gmail.com>

Steve Holme (7 Sep 2014)
- tests: Added test1420 to the makefile

- test1420: Removed unnecessary CURLOPT setting

- tests: Added more "Clear Text" authentication keywords

- tests: Updated "based on" text due to email test renumbering

- tests: For consistency added --libcurl to test name

- tests: Added --libcurl for IMAP test case

- multi.c: Avoid invalid memory read after free() from commit 3c8c873252
  
  As the current element in the list is free()d by Curl_llist_remove(),
  when the associated connection is pending, reworked the loop to avoid
  accessing the next element through e->next afterward.

- multi.c: Fixed compilation warning from commit 3c8c873252
  
  warning: implicit conversion from enumeration type 'CURLMcode' to
  different enumeration type 'CURLcode'

- url.c: Use CURLAUTH_NONE constant rather than 0
  
  Small follow up to commit 898808fa8c to use auth constants rather than
  hard code value when clearing picked authentication mechanism.

- RELEASE-NOTES: Synced with fd1ce3856a

Nick Zitzmann (4 Sep 2014)
- [Vilmos Nebehaj brought this change]

  darwinssl: Use CopyCertSubject() to check CA cert.
  
  SecCertificateCopyPublicKey() is not available on iPhone. Use
  CopyCertSubject() instead to see if the certificate returned by
  SecCertificateCreateWithData() is valid.
  
  Reported-by: Toby Peterson

Steve Holme (4 Sep 2014)
- RELEASE-NOTES: Clarify email Kerberos support is currently via Windows SSPI

Daniel Stenberg (4 Sep 2014)
- MAIL-ETIQUETTE: "1.8 I posted, now what?"

- CURLOPT_CA*: better refering between *CAINFO and *CAPATH
  
  ... and a minor wording edit

- THANKS: added Dennis Clarke
  
  Dennis Clarke from Blastwave.org for ensuring that nightly builds run
  smooth on Solaris!

- curl_multi_cleanup: remove superfluous NULL assigns
  
  ... as the struct is free()d in the end anyway. It was first pointed out
  to me that one of the ->msglist assignments were supposed to have been
  ->pending but was a copy and paste mistake when I realized none of the
  clearing of pointers had to be there.

- multi: convert CURLM_STATE_CONNECT_PEND handling to a list
  
  ... instead of scanning through all handles, stash only the actual
  handles that are in that state in the new ->pending list and scan that
  list only. It should be mostly empty or very short. And only used for
  pipelining.
  
  This avoids a rather hefty slow-down especially notable if you add many
  handles to the same multi handle. Regression introduced in commit
  0f147887 (version 7.30.0).
  
  Bug: http://curl.haxx.se/mail/lib-2014-07/0206.html
  Reported-by: David Meyer

- RELEASE-NOTES: synced with e608324f9f9

- [Andre Heinecke brought this change]

  polarssl: implement CURLOPT_SSLVERSION
  
  Forwards the setting as minimum ssl version (if set) to polarssl.  If
  the server does not support the requested version the SSL Handshake will
  fail.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1419

nickzman (1 Sep 2014)
- Merge pull request #115 from ldx/darwinsslfixpr
  
  darwinssl: now accepts cacert bundles in PEM format in addition to single certs

Vilmos Nebehaj (1 Sep 2014)
- Check CA certificate in curl_darwinssl.c.
  
  SecCertificateCreateWithData() returns a non-NULL SecCertificateRef even
  if the buffer holds an invalid or corrupt certificate. Call
  SecCertificateCopyPublicKey() to make sure cacert is a valid
  certificate.

Daniel Stenberg (31 Aug 2014)
- low-speed-limit: avoid timeout flood
  
  Introducing Curl_expire_latest(). To be used when we the code flow only
  wants to get called at a later time that is "no later than X" so that
  something can be checked (and another timeout be added).
  
  The low-speed logic for example could easily be made to set very many
  expire timeouts if it would be called faster or sooner than what it had
  set its own timer and this goes for a few other timers too that aren't
  explictiy checked for timer expiration in the code.
  
  If there's no condition the code that says if(time-passed >= TIME), then
  Curl_expire_latest() is preferred to Curl_expire().
  
  If there exists such a condition, it is on the other hand important that
  Curl_expire() is used and not the other.
  
  Bug: http://curl.haxx.se/mail/lib-2014-06/0235.html
  Reported-by: Florian Weimer

- [Michael Wallner brought this change]

  resolve: cache lookup for async resolvers
  
  While waiting for a host resolve, check if the host cache may have
  gotten the name already (by someone else), for when the same name is
  resolved by several simultanoues requests.
  
  The resolver thread occasionally gets stuck in getaddrinfo() when the
  DNS or anything else is crappy or slow, so when a host is found in the
  DNS cache, leave the thread alone and let itself cleanup the mess.

Vilmos Nebehaj (30 Aug 2014)
- Fix CA certificate bundle handling in darwinssl.
  
  If the --cacert option is used with a CA certificate bundle that
  contains multiple CA certificates, iterate through it, adding each
  certificate as a trusted root CA.

Daniel Stenberg (29 Aug 2014)
- [Askar Safin brought this change]

  getinfo-times: Typo fixed

- [Askar Safin brought this change]

  libcurl.3: Typo fixed

- curl_formadd.3: setting CURLFORM_CONTENTSLENGTH 0 zero means strlen

- curl.1: add an example for -H

- FAQ: mention -w in the 4.20 answer as well

- FAQ: 4.20 curl doesn't return error for HTTP non-200 responses

- CURLOPT_NOBODY.3: clarify this option is for downloads
  
  When enabling CURLOPT_NOBODY, libcurl effectively switches off upload
  mode and will do a download (without a body). This is now better
  explained in this man page.
  
  Bug: http://curl.haxx.se/mail/lib-2014-08/0236.html
  Reported-by: John Coffey

- INTERNALS: nghttp2 must be 0.6.0 or later

- [Tatsuhiro Tsujikawa brought this change]

  Compile with latest nghttp2

Dan Fandrich (26 Aug 2014)
- THANKS: removed a few more duplicates

Daniel Stenberg (26 Aug 2014)
- RELEASE-NOTES: synced with 007242257683a
  
  ... and bumped the contributor amount after recount

- THANKS: added 52 missing contributors
  
  I re-ran contributors.sh on all changes since 7.10 and I found these
  contributors who are mentioned in the commits but never were added to
  THANKS before!
  
  I also removed a couple of duplicates (mostly due to different
  spellings).

- contributors: grep and sort case insensitively

- [Michael Osipov brought this change]

  configure.ac: Add support for recent GSS-API implementations for HP-UX
  
  By default, configure script assumes that libcurl will use the
  HP-supplied GSS-API implementation which does not have krb5-config.
  If a dev needs a more recent version which has that config script,
  the change will allow to pass an appropriate GSSAPI_ROOT.

- CONNECT: close proxy connections that fail to CONNECT
  
  This is usually due to failed auth. There's no point in us keeping such
  a connection alive since it shouldn't be re-used anyway.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1381
  Reported-by: Marcel Raad

- RELEASE-NOTES: added two missing HTTP/2 bug fixes
  
  And renamed all http2 references to HTTP/2 in this file

- RELEASE-NOTES: synced with f646e9075f47

- [Jakub Zakrzewski brought this change]

  Cmake: Possibility to use OpenLDAP, OpenSSL, LibSSH2 on windows
  
  At this point I can build libcurl on windows. It provides at least the same
  list of protocols as for linux build and works with our software.

- [Jakub Zakrzewski brought this change]

  Cmake: Removed repeated content from ending blocks
  
  They are unnecesary in modern CMake and removing them improves readability.

- [Jakub Zakrzewski brought this change]

  Cmake: Removed some useless empty SET statements.
  
  Undefined variables resolve to empty strings and we do not ever test if
  the variable is defined thus those SETs are superfluous.

- [Jakub Zakrzewski brought this change]

  Cmake: Removed useless comments from CMakeLists.txt
  
  They look like some relics after changes.

- [Jakub Zakrzewski brought this change]

  Cmake: Don't check for all headers each time
  
  One header at a time is the right way. Apart from that the output on
  windows goes from:
  ...
  -- Looking for include files I:/src/libssh2-1.4.3/include/libssh2.h, ws2tcpip.h
  -- Looking for include files I:/src/libssh2-1.4.3/include/libssh2.h, ws2tcpip.h
  - found
  -- Looking for 3 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wins
  ock2.h
  -- Looking for 3 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wins
  ock2.h - found
  -- Looking for 4 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., stdi
  o.h
  -- Looking for 4 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., stdi
  o.h - found
  -- Looking for 5 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wind
  ows.h
  -- Looking for 5 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wind
  ows.h - found
  -- Looking for 6 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wins
  ock.h
  -- Looking for 6 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., wins
  ock.h - found
  -- Looking for 7 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., sys/
  filio.h
  -- Looking for 7 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., sys/
  filio.h - not found
  -- Looking for 7 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., sys/
  ioctl.h
  -- Looking for 7 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., sys/
  ioctl.h - not found
  -- Looking for 7 include files I:/src/libssh2-1.4.3/include/libssh2.h, ..., sys/
  resource.h
  ...
  
  To much nicer:
  ...
  -- Looking for ws2tcpip.h
  -- Looking for ws2tcpip.h - found
  -- Looking for winsock2.h
  -- Looking for winsock2.h - found
  -- Looking for stdio.h
  -- Looking for stdio.h - found
  -- Looking for windows.h
  -- Looking for windows.h - found
  -- Looking for winsock.h
  -- Looking for winsock.h - found
  -- Looking for sys/filio.h
  -- Looking for sys/filio.h - not found
  -- Looking for sys/ioctl.h
  -- Looking for sys/ioctl.h - not found
  -- Looking for sys/resource.h

- [Jakub Zakrzewski brought this change]

  Cmake: Append OpenSSL include directory to search path
  
  At this point I can build libcurl with OpenSSL, OpenLDAP and LibSSH2.
  Supported protocols are at least:
  HTTP, HTTPS, FTP, SFTP, TFTP, LDAP, LDAPS, POP3, SMTP
  (those are the ones we have regression tests for
  in our product's testsuite)

- [Jakub Zakrzewski brought this change]

  Cmake: Search for liblber, LDAP SSL headers, swith for using OpenLDAP code.

- [Jakub Zakrzewski brought this change]

  Cmake: LibSSH2 detection and use.

- [Jakub Zakrzewski brought this change]

  Cmake: Moved macros out of the main CMakeLists.txt

- [Jakub Zakrzewski brought this change]

  Cmake: Added missing protocol-disable switches
  
  They already have their defines in config.h. This makes it possible to
  disable the protocols from command line during configure step.

- [Jakub Zakrzewski brought this change]

  Cmake: Made boolean defines be defined to "1" instead of "ON"
  
  It's by convention, for compatibility and because the comments say so.
  Just mabe someone have written a test like "#if HAVE_XX==1"

- [Jakub Zakrzewski brought this change]

  Cmake: Require at least CMake 2.8.
  
  CMake 2.6 is already a bit old. Many bugs have been fixed since
  its release. We use 2.8 in our company and we have no intention
  of polluting our environment with old software, so 2.6 would
  not be tested. This shouldn't be a problem since all one need
  to build CMake from source is C and C++ compiler.

- disconnect: don't touch easy-related state on disconnects
  
  This was done to make sure NTLM state that is bound to a connection
  doesn't survive and gets used for the subsequent request - but
  disconnects can also be done to for example make room in the connection
  cache and thus that connection is not strictly related to the easy
  handle's current operation.
  
  The http authentication state is still kept in the easy handle since all
  http auth _except_ NTLM is connection independent and thus survive over
  multiple connections.
  
  Bug: http://curl.haxx.se/mail/lib-2014-08/0148.html
  Reported-by: Paras S

- curl.1: clarify --limit-rate's effect on both directions
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1414
  Reported-by: teo8976

- curl.1: mention the --post30x options within the --location desc

Dan Fandrich (22 Aug 2014)
- sasl: Fixed a memory leak on OOM

Daniel Stenberg (22 Aug 2014)
- [Frank Meier brought this change]

  NTLM: ignore CURLOPT_FORBID_REUSE during NTLM HTTP auth
  
  Problem: if CURLOPT_FORBID_REUSE is set, requests using NTLM failed
  since NTLM requires multiple requests that re-use the same connection
  for the authentication to work
  
  Solution: Ignore the forbid reuse flag in case the NTLM authentication
  handshake is in progress, according to the NTLM state flag.
  
  Fixed known bug #77.

Steve Holme (22 Aug 2014)
- openssl.c: Fixed longer than 79 columns

- openssl.c: Fixed compilation warning
  
  warning: declaration of 'minor' shadows a global declaration

Daniel Stenberg (21 Aug 2014)
- [Haris Okanovic brought this change]

  win32: Fixed WinSock 2 #if
  
  A conditionally compiled block in connect.c references WinSock 2
  symbols, but used `#ifdef HAVE_WINSOCK_H` instead of `#ifdef
  HAVE_WINSOCK2_H`.
  
  Bug: http://curl.haxx.se/mail/lib-2014-08/0155.html

- Curl_disconnect: don't free the URL
  
  The URL is not a property of the connection so it should not be freed in
  the connection disconnect but in the Curl_close() that frees the easy
  handle.
  
  Bug: http://curl.haxx.se/mail/lib-2014-08/0148.html
  Reported-by: Paras S

- help output: minor whitespace edits
  
  Should've been amended in the previous commit but wasn't due to a
  mistake.

- [Zearin brought this change]

  help output: use ≥2 spaces between option and description
  
  ... and some other cleanups

- FAQ: some actually sometimes get paid...

Steve Holme (17 Aug 2014)
- sasl_sspi: Fixed a memory leak with the GSSAPI base-64 decoded challenge

- sasl_sspi: Renamed GSSAPI mutual authentication parameter
  
  ...From "mutual" to "mutual_auth" which better describes what it is.

- sasl_sspi: Corrected some of the GSSAPI security message error codes
  
  Corrected a number of the error codes that can be returned from the
  Curl_sasl_create_gssapi_security_message() function when things go
  wrong.
  
  It makes more sense to return CURLE_BAD_CONTENT_ENCODING when the
  inbound security challenge can't be decoded correctly or doesn't
  contain the KERB_WRAP_NO_ENCRYPT flag and CURLE_OUT_OF_MEMORY when
  EncryptMessage() fails. Unfortunately the previous error code of
  CURLE_RECV_ERROR was a copy and paste mistakes on my part and should
  have been correct in commit 4b491c675f :(

- docs: Escaped single backslash

- TODO: Updated following GSSAPI (Kerberos V5) additions
  
  Updated "FTP 4.6 GSSAPI via Windows SSPI" and "SASL 14.1 Other
  authentication mechanisms" following recent additions.
  
  Added SASL 14.2 GSSAPI via GSS-API libraries.

- CURLOPT_USERNAME.3: Added Kerberos V5 and NTLM domain information
  
  This repeats what has already been documented in both the curl manpage
  and CURLOPT_USERPWD documentation but is provided here for completeness
  as someone may not especially read the latter when using libcurl.

- CURLOPT_USERPWD.3: Updated following Kerberos V5 SSPI changes
  
  Added information about Kerberos V5 requiring the domain part in the
  user name.
  
  Mentioned that the user name can be specified in UPN format, and not
  just in Down-Level Logon Name format, following the information
  added in commit 7679cb3fa8 reworking the exisitng information in the
  process.

- docs: Added Kerberos V5 and NTLM domain information to --user

- docs: Added Kerberos V5 to the --user SSPI current credentials usage

- sasl_sspi: Tell the server we don't support a GSSAPI receive buffer

- smtp: Added support for GSSAPI (Kerberos V5) authentication via Windows SSPI

- pop3: Added support for GSSAPI (Kerberos V5) authentication via Windows SSPI

- imap: Added support for GSSAPI (Kerberos V5) authentication via Windows SSPI

- email: Added mutual authentication flag

Daniel Stenberg (15 Aug 2014)
- RELEASE-NOTES: synced with 0187c9e11d079

- http: fix the Content-Range: parser
  
  ... to handle "*/[total]". Also, removed the strange hack that made
  CURLOPT_FAILONERROR on a 416 response after a *RESUME_FROM return
  CURLE_OK.
  
  Reported-by: Dimitrios Siganos
  Bug: http://curl.haxx.se/mail/lib-2014-06/0221.html

Steve Holme (14 Aug 2014)
- email: Introduced the GSSAPI states

- curl_sasl_sspi.c: Fixed more compilation warnings from commit 4b491c675f
  
  warning: unused variable 'resp'
  
  warning: no previous prototype for 'Curl_sasl_gssapi_cleanup'

- SHA-1: 61c93383b7f6cf79d12ff99e9dced1d1cc2a7064
  
  * curl_sasl_sspi.c: Fixed compilation warning from commit 4b491c675f
  
  warning: declaration of 'result' shadows a previous local

- curl_sasl.h: Fixed compilation error from commit 4b491c675f
  
  warning: 'struct kerberos5data' declared inside parameter list
  
  Due to missing forward declaration.

- urldata.h: Fixed compilation warnings from commit 3ec253532e
  
  warning: extra tokens at end of #endif directive

- sasl_sspi: Added GSSAPI message functions

- urldata: Introduced a GSSAPI (Kerberos V5) data structure
  
  Added a kerberos5data structure which is similar in nature to the
  ntlmdata and negotiatedata structures.

- sspi: Moved KERB_WRAP_NO_ENCRYPT from socks_sspi module
  
  In preparation for the upcoming SSPI implementation of GSSAPI
  authentication, moved the definition of KERB_WRAP_NO_ENCRYPT from
  socks_sspi.c to curl_sspi.h allowing it to be shared amongst other
  SSPI based code.

Daniel Stenberg (13 Aug 2014)
- mk-ca-bundle.pl: add missing $

- mk-ca-bundle.pl: switched to using hg.mozilla.org
  
  ... as mxr.mozilla.org is due to be retired.
  
  The new host doesn't support If-Modified-Since nor ETags, meaning that
  the script will now defer to download and do a post-transfer checksum
  check to see if a new output is to be generated. The new output format
  will hold the SHA1 checksum of the source file for that purpose.
  
  We call this version 1.22
  
  Reported-by: Ed Morley
  Bug: http://curl.haxx.se/bug/view.cgi?id=1409

- [Jose Alf brought this change]

  openssl: fix version report for the 0.9.8 branch
  
  Fixed libcurl to correctly output the newer versions of OpenSSL 0.9.8,
  starting from openssl-0.9.8za.

- [Frank Meier brought this change]

  create_conn: prune dead connections
  
  Bringing back the old functionality that was mistakenly removed when the
  connection cache was remade. When creating a new connection, all the
  existing ones are checked and those that are known to be dead get
  disconnected for real and removed from the connection cache. It helps
  the cache from holding on to very many stale connections and aids in
  keeping down the number of system sockets in wait states.
  
  Help-by: Jonatan Vela <jonatan.vela@ergon.ch>
  
  Bug: http://curl.haxx.se/mail/lib-2014-06/0189.html

Kamil Dudka (11 Aug 2014)
- docs/SSLCERTS: update the section about NSS database
  
  Bug: http://curl.haxx.se/mail/lib-2014-07/0335.html
  Reported-by: David Shaw

Daniel Stenberg (11 Aug 2014)
- [Peter Wang brought this change]

  Curl_poll + Curl_wait_ms: fix timeout return value
  
  Curl_poll and Curl_wait_ms require the fix applied to Curl_socket_check
  in commits b61e8b8 and c771968:
  
  When poll or select are interrupted and coincides with the timeout
  elapsing, the functions return -1 indicating an error instead of 0 for
  the timeout.

Steve Holme (10 Aug 2014)
- config-tpf.h: Fixed up line lengths > 79 characters

- config-symbian.h: Fixed up line lengths > 79 characters

- tool_hugehelp.c.cvs: Added copyright
  
  Added copyright due to warning from checksrc.pl.

- RELEASE-NOTES: Synced with cd6ecf6a89

- sasl_sspi: Fixed hard coded buffer for response generation
  
  Given the SSPI package info query indicates a token size of 4096 bytes,
  updated to use a dynamic buffer for the response message generation
  rather than a fixed buffer of 1024 bytes.

- sasl_sspi: Fixed missing free of challenge buffer on SPN failure

- http_negotiate_sspi: Tidy up to remove the get_gss_name() function
  
  Due to the reduction of code in commit 3b924b29 of get_gss_name() the
  function isn't necessary anymore.

- http_negotiate_sspi: Use a dynamic buffer for SPN generation
  
  Updated to use a dynamic buffer for the SPN generation via the recently
  introduced Curl_sasl_build_spn() function rather than a fixed buffer of
  1024 characters, which should have been more than enough, but by using
  the new function removes the need for another variable sname to do the
  wide character conversion in Unicode builds.

- sasl: Tidy up to rename SPN variable from URI

- sasl: Use a dynamic buffer for SPN generation
  
  Updated Curl_sasl_create_digest_md5_message() to use a dynamic buffer
  for the SPN generation via the recently introduced Curl_sasl_build_spn()
  function rather than a fixed buffer of 128 characters.

- sasl_sspi: Fixed SPN not being converted to wchar under Unicode builds
  
  Curl_sasl_create_digest_md5_message() would simply cast the SPN variable
  to a TCHAR when calling InitializeSecurityContext(). This meant that,
  under Unicode builds, it would not be valid wide character string.
  
  Updated to use the recently introduced Curl_sasl_build_spn() function
  which performs the correct conversion for us.

- sasl: Introduced Curl_sasl_build_spn() for building a SPN
  
  Various parts of the libcurl source code build a SPN for inclusion in
  authentication data. This information is either used by our own native
  generation routines or passed to authentication functions in third-party
  libraries such as SSPI. However, some of these instances use fixed
  buffers rather than dynamically allocated ones and not all of those that
  should, convert to wide character strings in Unicode builds.
  
  Implemented a common function that generates a SPN and performs the
  wide character conversion where necessary.

- sasl_sspi: Fixed memory leak with not releasing Package Info struct
  
  Curl_sasl_create_digest_md5_message() wouldn't free the Package Info
  structure after QuerySecurityPackageInfo() had allocated it.

- [Michael Osipov brought this change]

  docs: Update SPNEGO and GSS-API related doc sections
  
  Reflect recent changes in SPNEGO and GSS-API code in the docs.
  Update them with appropriate namings and remove visible spots for
  GSS-Negotiate.

- sspi: Minor code tidy up to standardise coding style
  
  Following the recent changes and in attempt to align the SSPI based
  authentication code performed the following:
  
  * Use NULL and SECBUFFVERSION rather than hard coded constants.
  * Avoid comparison of zero in if statements.
  * Standardised the buf and desc setup code.

- schannel: Fixed compilation warning in vtls.c
  
  vtls.c:688:43: warning: unused parameter 'data'

- tool_getparam.c: Fixed compilation warning
  
  warning: `orig_opt' might be used uninitialized in this function

- RELEASE-NOTES: Synced with 159c3aafd8

Daniel Stenberg (8 Aug 2014)
- curl_ntlm_msgs: make < 80 columns wide

Steve Holme (8 Aug 2014)
- ntlm: Fixed hard coded buffer for SSPI based auth packet generation
  
  Given the SSPI package info query indicates a token size of 2888 bytes,
  and as with the Winbind code and commit 9008f3d56, use a dynamic buffer
  for the Type-1 and Type-3 message generation rather than a fixed buffer
  of 1024 bytes.

- ntlm: Added support for SSPI package info query
  
  Just as with the SSPI implementations of Digest and Negotiate added a
  package info query so that libcurl can a) return a more appropriate
  error code when the NTLM package is not supported and b) it can be of
  use later to allocate a dynamic buffer for the Type-1 and Type-3
  output tokens rather than use a fixed buffer of 1024 bytes.

Daniel Stenberg (7 Aug 2014)
- http2: added some more logging for debugging stream problems

- [Tatsuhiro Tsujikawa brought this change]

  HTTP/2: Reset promised stream, not its associated stream.

- [Tatsuhiro Tsujikawa brought this change]

  HTTP/2: Move :authority before non-pseudo header fields

- http2: show the received header for better debugging

- openssl: replace call to OPENSSL_config
  
  OPENSSL_config() is "strongly recommended" to use but unfortunately that
  function makes an exit() call on wrongly formatted config files which
  makes it hard to use in some situations. OPENSSL_config() itself calls
  CONF_modules_load_file() and we use that instead and we ignore its
  return code!
  
  Reported-by: Jan Ehrhardt
  Bug: http://curl.haxx.se/bug/view.cgi?id=1401

Dan Fandrich (7 Aug 2014)
- [Fabian Keil brought this change]

  runtests.pl: Pad test case numbers with up to three zeroes
  
  Test case numbers with four digits have been available for a
  while now.

Steve Holme (7 Aug 2014)
- docs: Added Negotiate to the SSPI current credentials usage description

- TODO: HTTP Digest via Windows SSPI

- TODO: FTP GSSAPI via Windows SSPI

- http_negotiate_sspi: Fixed specific username and password not working
  
  Bug: http://curl.haxx.se/mail/lib-2014-06/0224.html
  Reported-by: Leonardo Rosati

- http_negotiate_sspi: Fixed endless unauthorized loop in commit 6bc76194e8
  
  If the server rejects our authentication attempt and curl hasn't
  called CompleteAuthToken() then the status variable will be
  SEC_I_CONTINUE_NEEDED and not SEC_E_OK.
  
  As such the existing detection mechanism for determining whether or not
  the authentication process has finished is not sufficient.
  
  However, the WWW-Authenticate: Negotiate header line will not contain
  any data when the server has exhausted the negotiation, so we can use
  that coupled with the already allocated context pointer.

Daniel Stenberg (5 Aug 2014)
- RELEASE-NOTES: synced with 5b37db44a3eb

Dan Fandrich (5 Aug 2014)
- parsedate.c: fix the return code for an overflow edge condition

Daniel Stenberg (5 Aug 2014)
- [Toby Peterson brought this change]

  darwinssl: don't use strtok()
  
  The GetDarwinVersionNumber() function uses strtok, which is not
  thread-safe.

- Curl_ossl_version: adapted to detect BoringSSL
  
  This seems to be the way it should work. Right now we can't build with
  BoringSSL and try this out properly due to a minor API breakage.

- Curl_ossl_version: detect and show libressl
  
  LibreSSL is otherwise OpenSSL API compliant (so far)

- [Tatsuhiro Tsujikawa brought this change]

  HTTP/2: Fix infinite loop in readwrite_data()
  
  To prevent infinite loop in readwrite_data() function when stream is
  reset before any response body comes, reset closed flag to false once
  it is evaluated to true.

Dan Fandrich (3 Aug 2014)
- gtls: only define Curl_gtls_seed if Nettle is not being used

- ssl: provide Curl_ssl_backend even if no SSL library is available

Daniel Stenberg (2 Aug 2014)
- [Tatsuhiro Tsujikawa brought this change]

  HTTP2: Support expect: 100-continue
  
  "Expect: 100-continue", which was once deprecated in HTTP/2, is now
  resurrected in HTTP/2 draft 14.  This change adds its support to
  HTTP/2 code.  This change also includes stricter header field
  checking.

- CURLOPT_SSL_VERIFYPEER.3. add a warning about disabling it

- FEATURES: minor update

- openssl: make ossl_send return CURLE_OK better
  
  Previously it only returned a CURLcode for errors, which is when it
  returns a different size than what was passed in to it.
  
  The http2 code only checked the curlcode and thus failed.

- RELEASE-NOTES: synced with 7bb4c8cadb5d0

- [Michael Wallner brought this change]

  CURLOPT_HEADEROPT.3: typo: do -> to

- [Marcel Raad brought this change]

  schannel: use CryptGenRandom for random numbers
  
  This function is available for every Windows version since Windows 95/NT.
  
  reference:
  http://msdn.microsoft.com/en-us/library/windows/desktop/aa379942.aspx

- curl_version_info.3: 'ssl_version_num' is always 0
  
  ... and has been so since 2005

- ssl: generalize how the ssl backend identifier is set
  
  Each backend now defines CURL_SSL_BACKEND accordingly. Added the *AXTLS
  one which was missing previously.

Dan Fandrich (31 Jul 2014)
- axtls: define curlssl_random using axTLS's PRNG

- cyassl: fix the test for ASN_NO_SIGNER_E
  
  It's an enum so a macro test won't work. The CyaSSL changelog doesn't
  say exactly when this error code was introduced, but it's likely
  to be 2.7.0.

- cyassl: use RNG_GenerateBlock to generate a good random number

- opts: fixed some typos

- smtp: fixed a segfault during test 1320 torture test
  
  Under these circumstances, the connection hasn't been fully established
  and smtp_connect hasn't been called, yet smtp_done still calls the state
  machine which dereferences the NULL conn pointer in struct pingpong.

Daniel Stenberg (30 Jul 2014)
- vtls: repair build without TLS support
  
  ... by defining Curl_ssl_random() properly

- polarssl: provide a (weak) random function
  
  This now provides a weak random function since PolarSSL doesn't have a
  quick and easy way to provide a good one. It does however provide the
  framework to make one so it _can_ and _should_ be done...

- [Michael Wallner brought this change]

  curl_tlsinfo -> curl_tlssessioninfo

- cyassl: use the default (weeker) random
  
  I couldn't find any dedicated function in its API to get a "good" random
  with.

- cyassl: made it compile with version 2.0.6 again
  
  ASN_NO_SIGNER_E didn't exist back then!

- vtls: make the random function mandatory in the TLS backend
  
  To force each backend implementation to really attempt to provide proper
  random. If a proper random function is missing, then we can explicitly
  make use of the default one we use when TLS support is missing.
  
  This commit makes sure it works for darwinssl, gnutls, nss and openssl.

- libcurl.m4: include the standard source header
  
  ... with permission from David Shaw

Kamil Dudka (28 Jul 2014)
- nss: do not check the version of NSS at run time
  
  The minimal required version of NSS is 3.14.x so it does not make sense
  to check for NSS 3.12.0+ at run time.

Daniel Stenberg (28 Jul 2014)
- [Anthon Pang brought this change]

  curl.h: bring back CURLE_OBSOLETE16
  
  Removing defines, even obsolete ones that haven't been used for a very
  long time, still break a lot of applications.
  
  Bug: https://github.com/bagder/curl/pull/106

Dan Fandrich (26 Jul 2014)
- [Fabian Keil brought this change]

  tests: Fix a couple of incomplete response lines

- [Fabian Keil brought this change]

  runtests.pl: Remove filteroff() which hasn't been used since 2001

- [Fabian Keil brought this change]

  runtests.pl: Don't expect $TESTDIR/DISABLED to exist
  
  If a non-standard $TESTDIR is used the file may not be necessary.
  
  Previously a "missing" file resulted in the warning:
  readline() on closed filehandle D at ./runtests.pl line 4940.

- [Fabian Keil brought this change]

  getpart.pm: Fix a comment typo

Daniel Stenberg (25 Jul 2014)
- c-ares: fix build without IPv6 support
  
  Bug: http://curl.haxx.se/mail/lib-2014-07/0337.html
  Reported-by: Spork Schivago

- Curl_base64url_encode: unit-tested in 1302

- base64: added Curl_base64url_encode()
  
  This is now used by the http2 code. It has two different symbols at the
  end of the base64 table to make the output "url safe".
  
  Bug: https://github.com/tatsuhiro-t/nghttp2/issues/62

- [Marcel Raad brought this change]

  SSPI Negotiate: Fix 3 memory leaks
  
  Curl_base64_decode allocates the output string by itself and two other
  strings were not freed either.

- symbols: CURL_VERSION_GSSNEGOTIATE is deprecated

- test1013.pl: GSS-Negotiate doesn't exist as a feature anymore

- [Sergey Nikulov brought this change]

  libtest: fixed duplicated line in Makefile
  
  Bug: https://github.com/bagder/curl/pull/105

Patrick Monnerat (23 Jul 2014)
- GSSAPI: remove useless *_MECHANISM defines.

Daniel Stenberg (23 Jul 2014)
- findprotocol: show unsupported protocol within quotes
  
  ... to aid when for example prefixed with a space or other weird
  character.

Patrick Monnerat (23 Jul 2014)
- GSSAPI: private export mechanisms OIDs. OS400: Make RPG binding up to date.

Daniel Stenberg (23 Jul 2014)
- [Marcel Raad brought this change]

  conncache: fix compiler warning
  
  warning C4267: '=' : conversion from 'size_t' to 'long', possible loss
  of data
  
  The member connection_id of struct connectdata is a long (always a
  32-bit signed integer on Visual C++) and the member next_connection_id
  of struct conncache is a size_t, so one of them should be changed to
  match the other.
  
  This patch the size_t in struct conncache to long (the less invasive
  change as that variable is only ever used in a single code line).
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1399

- RELEASE-NOTES: synced with 81cd24adb8b

- http2: more and better error checking
  
  1 - fixes the warnings when built without http2 support
  
  2 - adds CURLE_HTTP2, a new error code for errors detected by nghttp2
  basically when they are about http2 specific things.

Dan Fandrich (23 Jul 2014)
- cyassl.c: return the correct error code on no CA cert
  
  CyaSSL 3.0.0 returns a unique error code if no CA cert is available,
  so translate that into CURLE_SSL_CACERT_BADFILE when peer verification
  is requested.

Daniel Stenberg (23 Jul 2014)
- symbols-in-versions: new SPNEGO/GSS-API symbols in 7.38.0

- test1013.pl: remove SPNEGO/GSS-API tweaks
  
  No longer necessary after Michael Osipov's rework

- http_negotiate: remove unused variable

- [Michael Osipov brought this change]

  docs: Improve inline GSS-API naming in code documentation

- [Michael Osipov brought this change]

  curl.h/features: Deprecate GSS-Negotiate macros due to bad naming
  
  - Replace CURLAUTH_GSSNEGOTIATE with CURLAUTH_NEGOTIATE
  - CURL_VERSION_GSSNEGOTIATE is deprecated which
    is served by CURL_VERSION_SSPI, CURL_VERSION_GSSAPI and
    CURUL_VERSION_SPNEGO now.
  - Remove display of feature 'GSS-Negotiate'

- [Michael Osipov brought this change]

  configure/features: Add feature and version info for GSS-API and SPNEGO

- [Michael Osipov brought this change]

  HTTP: Remove checkprefix("GSS-Negotiate")
  
  That auth mech has never existed neither on MS nor on Unix side.
  There is only Negotiate over SPNEGO.

- [Michael Osipov brought this change]

  curl_gssapi: Add macros for common mechs and pass them appropriately
  
  Macros defined: KRB5_MECHANISM and SPNEGO_MECHANISM called from
  HTTP, FTP and SOCKS on Unix

- CONNECT: Revert Curl_proxyCONNECT back to 7.29.0 design
  
  This reverts commit cb3e6dfa3511 and instead fixes the problem
  differently.
  
  The reverted commit addressed a test failure in test 1021 by simplifying
  and generalizing the code flow in a way that damaged the
  performance. Now we modify the flow so that Curl_proxyCONNECT() again
  does as much as possible in one go, yet still do test 1021 with and
  without valgrind. It failed due to mistakes in the multi state machine.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1397
  Reported-by: Paul Saab

- [Marcel Raad brought this change]

  url.c: use the preferred symbol name: *READDATA
  
  with CURL_NO_OLDIES defined, it doesn't compile because this deprecated
  symbol (*INFILE) is used
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1398

Dan Fandrich (19 Jul 2014)
- [Alessandro Ghedini brought this change]

  CURLOPT_CHUNK_BGN_FUNCTION: fix typo

Kamil Dudka (18 Jul 2014)
- [Alessandro Ghedini brought this change]

  build: link curl to NSS libraries when NSS support is enabled
  
  This fixes a build failure on Debian caused by commit
  24c3cdce88f39731506c287cb276e8bf4a1ce393.
  
  Bug: http://curl.haxx.se/mail/lib-2014-07/0209.html

Steve Holme (17 Jul 2014)
- build: Removed unnecessary XML Documentation file directive from VC8 to VC12
  
  The curl tool project files for VC8 to VC12 would set this setting to
  $(IntDir) which is the Visual Studio default value. To avoid confusion
  when viewing settings from within Visual Studio and for consistency
  with the libcurl project files removed this setting.
  
  Conflicts:
          projects/Windows/VC10/src/curlsrc.tmpl
          projects/Windows/VC11/src/curlsrc.tmpl
          projects/Windows/VC12/src/curlsrc.tmpl
          projects/Windows/VC8/src/curlsrc.tmpl
          projects/Windows/VC9/src/curlsrc.tmpl

- build: Removed unnecessary Precompiled Header file directive in VC7 to VC12
  
  The curl tool project files for VC7 to VC12 would set this settings to
  $(IntDir)$(TargetName).pch which is the Visual Studio default value. To
  avoid confusion when viewing settings from within Visual Studio and for
  consistency with the libcurl project files removed this setting.
  
  Conflicts:
          projects/Windows/VC10/src/curlsrc.tmpl
          projects/Windows/VC11/src/curlsrc.tmpl
          projects/Windows/VC12/src/curlsrc.tmpl
          projects/Windows/VC8/src/curlsrc.tmpl
          projects/Windows/VC9/src/curlsrc.tmpl

- build: Removed unnecessary ASM and Object file directives in VC7 to VC12
  
  The curl tool project files for VC7 to VC12 would set these settings to
  $(IntDir) which is the Visual Studio default value. To avoid confusion
  when viewing settings from within Visual Studio and for consistency
  with the libcurl project files removed these two settings.

Daniel Stenberg (17 Jul 2014)
- [Dave Reisner brought this change]

  src/Makefile.am: add .DELETE_ON_ERROR
  
  This prevents targets like tool_hugehelp.c from leaving around
  half-constructed files if the rule fails with GNU make.
  
  Reported-by: Rafaël Carré <funman@videolan.org>

- THANKS: added new contributors from 7.37.1 announcement

Dan Fandrich (17 Jul 2014)
- testcurl.pl: log the value of --runtestopts in the test header

Daniel Stenberg (16 Jul 2014)
- RELEASE-NOTES: cleared, working towards next release

- curl_gssapi.c: make line shorter than 80 columns

- [David Woodhouse brought this change]

  Fix negotiate auth to proxies to track correct state

- [David Woodhouse brought this change]

  Don't abort Negotiate auth when the server has a response for us
  
  It's wrong to assume that we can send a single SPNEGO packet which will
  complete the authentication. It's a *negotiation* — the clue is in the
  name. So make sure we handle responses from the server.
  
  Curl_input_negotiate() will already handle bailing out if it thinks the
  state is GSS_S_COMPLETE (or SEC_E_OK on Windows) and the server keeps
  talking to us, so we should avoid endless loops that way.

- [David Woodhouse brought this change]

  Don't clear GSSAPI state between each exchange in the negotiation
  
  GSSAPI doesn't work very well if we forget everything ever time.
  
  XX: Is Curl_http_done() the right place to do the final cleanup?

- [David Woodhouse brought this change]

  Use SPNEGO for HTTP Negotiate
  
  This is the correct way to do SPNEGO. Just ask for it
  
  Now I correctly see it trying NTLMSSP authentication when a Kerberos ticket
  isn't available. Of course, we bail out when the server responds with the
  challenge packet, since we don't expect that. But I'll fix that bug next...

- [David Woodhouse brought this change]

  Remove all traces of FBOpenSSL SPNEGO support
  
  This is just fundamentally broken. SPNEGO (RFC4178) is a protocol which
  allows client and server to negotiate the underlying mechanism which will
  actually be used to authenticate. This is *often* Kerberos, and can also
  be NTLM and other things. And to complicate matters, there are various
  different OIDs which can be used to specify the Kerberos mechanism too.
  
  A SPNEGO exchange will identify *which* GSSAPI mechanism is being used,
  and will exchange GSSAPI tokens which are appropriate for that mechanism.
  
  But this SPNEGO implementation just strips the incoming SPNEGO packet
  and extracts the token, if any. And completely discards the information
  about *which* mechanism is being used. Then we *assume* it was Kerberos,
  and feed the token into gss_init_sec_context() with the default
  mechanism (GSS_S_NO_OID for the mech_type argument).
  
  Furthermore... broken as this code is, it was never even *used* for input
  tokens anyway, because higher layers of curl would just bail out if the
  server actually said anything *back* to us in the negotiation. We assume
  that we send a single token to the server, and it accepts it. If the server
  wants to continue the exchange (as is required for NTLM and for SPNEGO
  to do anything useful), then curl was broken anyway.
  
  So the only bit which actually did anything was the bit in
  Curl_output_negotiate(), which always generates an *initial* SPNEGO
  token saying "Hey, I support only the Kerberos mechanism and this is its
  token".
  
  You could have done that by manually just prefixing the Kerberos token
  with the appropriate bytes, if you weren't going to do any proper SPNEGO
  handling. There's no need for the FBOpenSSL library at all.
  
  The sane way to do SPNEGO is just to *ask* the GSSAPI library to do
  SPNEGO. That's what the 'mech_type' argument to gss_init_sec_context()
  is for. And then it should all Just Work™.
  
  That 'sane way' will be added in a subsequent patch, as will bug fixes
  for our failure to handle any exchange other than a single outbound
  token to the server which results in immediate success.

- [David Woodhouse brought this change]

  ntlm_wb: Avoid invoking ntlm_auth helper with empty username

- [David Woodhouse brought this change]

  ntlm_wb: Fix hard-coded limit on NTLM auth packet size
  
  Bumping it to 1KiB in commit aaaf9e50ec is all very well, but having hit
  a hard limit once let's just make it cope by reallocating as necessary.

Version 7.37.1 (16 Jul 2014)

Daniel Stenberg (16 Jul 2014)
- RELEASE-NOTES: synced with 4cb2521595

- test506: verify aa6884845168
  
  After the fixed cookie lock deadlock, this test now passes and it
  detects double-locking and double-unlocking of mutexes.

- [Yousuke Kimoto brought this change]

  cookie: avoid mutex deadlock
  
  ... by removing the extra mutex locks around th call to
  Curl_flush_cookies() which takes care of the locking itself already.
  
  Bug: http://curl.haxx.se/mail/lib-2014-02/0184.html

- gnutls: fix compiler warning
  
  conversion to 'int' from 'long int' may alter its value

Dan Fandrich (15 Jul 2014)
- test320: strip off the actual negotiated cipher width
  
  It's irrelevant to the test, and will change depending on which SSL
  library is being used by libcurl.

- gnutls: detect lack of SRP support in GnuTLS at run-time and try without
  
  Reported-by: David Woodhouse

Daniel Stenberg (14 Jul 2014)
- [Michał Górny brought this change]

  configure: respect host tool prefix for krb5-config
  
  Use ${host_alias}-krb5-config if available. This improves cross-
  compilation support and fixes multilib on Gentoo (at least).

- [David Woodhouse brought this change]

  gnutls: handle IP address in cert name check
  
  Before GnuTLS 3.3.6, the gnutls_x509_crt_check_hostname() function
  didn't actually check IP addresses in SubjectAltName, even though it was
  explicitly documented as doing so. So do it ourselves...

Dan Fandrich (14 Jul 2014)
- build: set _POSIX_PTHREAD_SEMANTICS on Solaris to get proper getpwuid_r

Daniel Stenberg (14 Jul 2014)
- RELEASE-NOTES: next one is called 7.37.1

Dan Fandrich (13 Jul 2014)
- gnutls: improved error message if setting cipher list fails
  
  Reported-by: David Woodhouse

- netrc: fixed thread safety problem by using getpwuid_r if available
  
  The old way using getpwuid could cause problems in programs that enable
  reading from netrc files simultaneously in multiple threads.
  
  Reported-by: David Woodhouse

- RELEASE-NOTES: add the reporter of the previous bug fix

- netrc: treat failure to find home dir same as missing netrc file
  
  This previously caused a fatal error (with a confusing error code, at
  that).
  
  Reported by: Glen A Johnson Jr.

Steve Holme (12 Jul 2014)
- RELEASE-NOTES: Synced with aaaf9e50ec

- ntlm_wb: Fixed buffer size not being large enough for NTLMv2 sessions
  
  Bug: http://curl.haxx.se/mail/lib-2014-07/0103.html
  Reported-by: David Woodhouse

- build: Fixed overridden compiler PDB settings in VC7 to VC12
  
  The curl tool project files for VC7 to VC12 would override the default
  setting with the output filename being the same as the linker PDB file.
  As such the compiler file would be overwritten with the linker file
  for all debug builds.
  
  To avoid this overwrite and for consistency with the libcurl project
  files, removed the setting to force the default filename to be used.

Dan Fandrich (12 Jul 2014)
- tests: added globbing keyword to URL globbing tests

- Fixed some "statement not reached" warnings

- gnutls: fixed a couple of uninitialized variable references

- gnutls: fixed compilation against versions < 2.12.0
  
  The AES-GCM ciphers were added to GnuTLS as late as ver. 3.0.1 but
  the code path in which they're referenced here is only ever used for
  somewhat older GnuTLS versions. This caused undeclared identifier errors
  when compiling against those.

- gnutls: explicitly added SRP to the priority string
  
  This seems to have become necessary for SRP support to work starting
  with GnuTLS ver. 2.99.0. Since support for SRP was added to GnuTLS
  before the function that takes this priority string, there should be no
  issue with backward compatibility.

- tests: adjust for capitalization differences in newer gnutls-serv

- test320/1/2/4: fix the port number substitution variables
  
  These tests have been broken since commit 1958fe57 in Oct. 2011

- tests: document more test identifiers and variables

- gnutls: ignore invalid certificate dates with VERIFYPEER disabled
  
  This makes the behaviour consistent with what happens if a date can
  be extracted from the certificate but is expired.

Steve Holme (10 Jul 2014)
- CURLOPT_UPLOAD: Corrected argument type

Daniel Stenberg (9 Jul 2014)
- FAQ: expand the thread-safe section
  
  ... with a mention of *NOSIGNAL, based on talk in bug #1386

Dan Fandrich (9 Jul 2014)
- url.c: Fixed memory leak on OOM
  
  This showed itself on some systems with torture failures
  in tests 1060 and 1061

- Update instances of some obsolete CURLOPTs to their new names

Daniel Stenberg (5 Jul 2014)
- [Marcel Raad brought this change]

  compiler warnings: potentially uninitialized variables
  
  ... pointed out by MSVC2013
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1391

Kamil Dudka (4 Jul 2014)
- nss: make the list of CRL items global
  
  Otherwise NSS could use an already freed item for another connection.

- nss: fix a memory leak when CURLOPT_CRLFILE is used

- nss: make crl_der allocated on heap
  
  ... and spell it as crl_der instead of crlDER

- nss: let nss_{cache,load}_crl return CURLcode

- tool: oops, forgot to include <plarenas.h>
  
  ... that contains the declaration of PL_ArenaFinish()

- tool: call PL_ArenaFinish() on exit if NSPR is used
  
  This prevents valgrind from reporting still reachable memory allocated
  by NSPR arenas (mainly the freelist).
  
  Reported-by: Hubert Kario

Daniel Stenberg (3 Jul 2014)
- [Dimitrios Siganos brought this change]

  example: use correct type (long) for CURLOPT_FOLLOWLOCATION

- [Dimitrios Siganos brought this change]

  Document type of argument for CURLOPT_FOLLOWLOCATION.

- [Dimitrios Siganos brought this change]

  Document type of argument for CURLOPT_ERRORBUFFER.

- [Dimitrios Siganos brought this change]

  Document type of argument for CURLOPT_COPYPOSTFIELDS.

- [Dimitrios Siganos brought this change]

  Document type of argument for CURLOPT_ADDRESS_SCOPE.

- curl.1: minor language fix
  
  Bug: http://curl.haxx.se/mail/archive-2014-07/0006.html

- [Ray Satiro brought this change]

  progress callback: skip last callback update on errors
  
  When an error has been detected, skip the final forced call to the
  progress callback by making sure to pass the current return code
  variable in the Curl_done() call in the CURLM_STATE_DONE state.
  
  This avoids the "extra" callback that could occur even if you returned
  error from the progress callback.
  
  Bug: http://curl.haxx.se/mail/lib-2014-06/0062.html
  Reported by: Jonathan Cardoso Machado

Dan Fandrich (2 Jul 2014)
- opts: fixed some CURLOPT references so they get turned into links

Kamil Dudka (2 Jul 2014)
- tool: call PR_Cleanup() on exit if NSPR is used
  
  This prevents valgrind from reporting possibly lost memory that NSPR
  uses for file descriptor cache and other globally allocated internal
  data structures.

- nss: make the fallback to SSLv3 work again
  
  This feature was unintentionally disabled by commit ff92fcfb.

- nss: do not abort on connection failure
  
  ... due to calling SSL_VersionRangeGet() with NULL file descriptor
  
  reported-by: upstream tests 305 and 404

Dan Fandrich (1 Jul 2014)
- opts: Document the socket callback function parameters

Steve Holme (28 Jun 2014)
- opts: Fixed some typos

Dan Fandrich (25 Jun 2014)
- curl_easy_setopt.3: fixed the error code for an unsupported option

- opts: added some DEFAULT and RETURN VALUE sections

Daniel Stenberg (21 Jun 2014)
- libcurl docs: man page edits
  
  mainly to improve how the web versions render

Dan Fandrich (21 Jun 2014)
- curl_easy_setopt.3: fixed some typos

Daniel Stenberg (21 Jun 2014)
- lib man pages: update easy setopt option references
  
  ... by using the "\fIopt(3)\fP" syntax they will be linked properly when
  the web version of the page is generated.

- opts: the CURLOPT_SSL_ENABLE_*PN options are enabled by default

- [Colin Hogben brought this change]

  lib: documentation updates in README.hostip
  
  c-ares now does support IPv6;
  avoid implying threaded resolver is Windows-only;
  two referenced source files were renamed in 7de2f92

- curl_easy_setopt.3: CURLOPT_POSTFIELDS is the exception
  
  ... to the always-copy-char *-argument.
  
  And fix some minor mistakes.

- curl_easy_setopt.3: refer to the individual man pages
  
  With all the new individual option man pages created, this now refers to
  each separate one instead of duplicaing the info. Also makes this page
  easier to overview.

Dan Fandrich (21 Jun 2014)
- opts: fixed mancheck for out-of-tree builds

Daniel Stenberg (21 Jun 2014)
- curl_easy_setopt.3: shorten
  
  shorten descriptions, mostly refer to the separate descriptions

- CURLOPT_DNS_LOCAL_IP4.3: better short desc

Dan Fandrich (20 Jun 2014)
- opts: document CURLE_OUT_OF_MEMORY among other return values

- opts: fixed some typos

Daniel Stenberg (20 Jun 2014)
- opts: various corrections

- opts: add the rest of the options
  
  ... and fixed mancheck to ignore obsolete options

- opts: the final bunch of options as man pages
  
  Now all current options have their own man pages.

- opts: 37 additional man pages

- CURLOPT_URL: move up the text from "Notes"

- ROADMAP: removed, now ROADMAP.md

- ROADMAP.md: make it markdown formatted

- ROADMAP: initial commit of "curl the next few years"
  
  To be further discussed, debated and edited

- opts: more man pages

- CURLOPT_UNRESTRICTED_AUTH.3: added missing 'T'

- opts: makefile now includes all current man pages

- opts: 11 more man pages

Dan Fandrich (18 Jun 2014)
- opts: document CURLE_OUT_OF_MEMORY as RETURN VALUE

- opts: fixed a couple of typos

Patrick Monnerat (18 Jun 2014)
- OS400: make it compilable again. Make RPG binding up to date.

- buildconf: do not search tools in current directory.

Dan Fandrich (18 Jun 2014)
- curl.h: renamed CURLOPT_DEPRECATEDx to CURLOPT_OBSOLETEx
  
  This is consistent with the existing obsolete error code naming
  convention.

Daniel Stenberg (18 Jun 2014)
- opts: 16 more man pages

- opts: more man pages

- CURLOPT_READFUNCTION.3: add short desc

- CURLOPT_LOW_SPEED_LIMIT.3: language

- opts: 4 more man pages

- opts: add all existing man pages to the dist

- libcurl build: use correct dir when cd'ing to opts for pdf building

Dan Fandrich (18 Jun 2014)
- tests: Use CURLOPT_READDATA instead of the obsolete CURLOPT_INFILE

- opts: fixed a few typos

Daniel Stenberg (18 Jun 2014)
- opts: 29 more options as man pages

- curl.h: moved two really old deprecated symbols
  
  ... from the CINIT() enum

- opts: 9 more options as separate man pages

- opts: 3 more options as man pages

- opts: 7 more setopt options as individual man pages

- opts template: provide a filled in error code phrase

- CURLOPT_SOCKOPTFUNCTION.3: clarify return code

- curl.h: reverse the enum/define setup for old symbols
  
  We now provide the "real" names in the CINIT() macro setup for CURLOPT_*
  symbols, and we provide backwards compatibility defines for the old
  symbols as defines instead of vice versa.
  
  This allows us to better use the CINIT() list to check for existing and
  current option names.

- CURLOPT_WRITEDATA.3: move version info to AVAILABILITY

- opts: 4 more options with stand-alone man pages

- CURLOPT_READFUNCTION.3: see also the seekfunction

- CURLOPT_IOCTLFUNCTION.3: fill in short desc

Dan Fandrich (17 Jun 2014)
- CURLOPT_READDATA.3: fixed typo

Daniel Stenberg (17 Jun 2014)
- [Michał Górny brought this change]

  tool_metalink: Support polarssl as digest provider

- opts: initial makefile
  
  with a bonus first rough 'mancheck' target to see which man pages that
  are still missing

- CURLOPT_IOCTLFUNCTION.3: initial man page

- CURLOPT_WRITEFUNCTION: changed the order of some sentences
  
  First explain the data then describe what the callback should return.

- CURLOPT_WRITEFUNCTION.3: improved language
  
  Suggestions-by: Jeff Pohlmeyer

- opts docs: 3 more options in their own man pages

- template: a template for adding new option man pages
  
  Inludes all the sections to consider.

- CURLOPT_WRITEFUNCTION: add RETURN VALUE and DEFAULT sections

- [MAN-AT-ARMS brought this change]

  curlbuild: fix GCC build on SPARC systems without configure script

- CURLOPT_WRITEFUNCTION: initial man page

- CURLOPT_WILDCARDMATCH: initial man page

- CURLOPT_VERBOSE: initial man page

- CURLOPT_NOSIGNAL: initial man page

- CURLOPT_NOPROGRESS: initial man page

- CURLOPT_HEADER: initial man page

Dan Fandrich (15 Jun 2014)
- sasl: Added back qop argument mistakenly removed in e95ca7ce
  
  This caused segfaults on tests 823 869 907.

- test1398: Added test to Makefile.am

- https: Fix build when http2 is disabled

Daniel Stenberg (14 Jun 2014)
- http2: better return code error checking

- [Lindley French brought this change]

  conncache: move the connection counter to the cache struct
  
  The static connection counter caused a race condition. Moving the
  connection id counter into conncache solves it, as well as simplifying
  the related logic.

- http2: avoid segfault when usint the plain-text http2
  
  This regression was introduced when *init was split into *init and
  *setup...

Steve Holme (11 Jun 2014)
- RELEASE-NOTES: Synced with 3aa1329e0a

Daniel Stenberg (11 Jun 2014)
- curl_sasl: revert the goto for error bailout
  
  They were added because of an older code path that used allocations and
  should not have been left in the code. With this change the logic goes
  back to how it was.

- NTLM: set a fake entropy for debug builds with CURL_ENTROPY set
  
  Curl_rand() will return a dummy and repatable random value for this
  case. Makes it possible to write test cases that verify output.
  
  Also, fake timestamp with CURL_FORCETIME set.
  
  Only when built debug enabled of course.
  
  Curl_ssl_random() was not used anymore so it has been
  removed. Curl_rand() is enough.
  
  create_digest_md5_message: generate base64 instead of hex string
  
  curl_sasl: also fix memory leaks in some OOM situations

Steve Holme (11 Jun 2014)
- tests: Disabled NTLM tests for non-debug builds
  
  Added required "debug" feature, missed in commit 1c9aaa0bac, as NTLMv2
  calls Curl_rand() which can only be fixed to a specific entropy in
  debug builds.

- Curl_rand: Use a fake entropy for debug builds when CURL_ENTROPY set

Daniel Stenberg (10 Jun 2014)
- [Marcel Raad brought this change]

  getinfo: HTTP CONNECT code not reset between transfers
  
  httpproxycode is not reset in Curl_initinfo, so a 407 is not reset even
  if curl_easy_reset is called between transfers.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1380

- [Alessandro Ghedini brought this change]

  transfer: fix info messages when switching method on 301 and 302
  
  The method change is forbidden by the obsolete RFC2616, but libcurl did
  it anyway for compatibility reasons. The new RFC7231 allows this
  behaviour so there's no need for the scary "Violate RFC 2616/10.3.x"
  notice. Also update the comments accordingly.

Steve Holme (6 Jun 2014)
- winbuild: Don't USE_WINSSL when WITH_SSL is being used
  
  Regression of commit d39bbcfa8d when compiling against OpenSSL.

- RELEASE-NOTES: Synced with 99303bcde5

- build: Fixed Visual Studio static OpenSSL builds following commit c50ce85918

- winbuild: Fixed static OpenSSL builds following commit c50ce85918

- config-win32.h: Updated for VC12
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1378
  Reported and Patched-by: Marcel Raad

Daniel Stenberg (4 Jun 2014)
- KNOWN_BUGS: #83 was addressed with commit c50ce859187ca

- Curl_ossl_init: call OPENSSL_config for initing engines
  
  Bug: http://curl.haxx.se/mail/lib-2014-06/0003.html
  Reported-by: Дмитрий Фалько

- random: use Curl_rand() for proper random data
  
  The SASL/Digest previously used the current time's seconds +
  microseconds to add randomness but it is much better to instead get more
  data from Curl_rand().
  
  It will also allow us to easier "fake" that for debug builds on demand
  in a future.

Steve Holme (2 Jun 2014)
- curl_sasl: Fixed copy/paste error of now.tv_sec in commit eefeb73af4

Daniel Stenberg (2 Jun 2014)
- RELEASE-NOTES: synced with d603ed67535

- KNOWN_BUGS: #30 was fixed in 0bc4938eeccce, 7.37.0

Steve Holme (1 Jun 2014)
- curl_sasl: Fixed compilation warning under DEBUGBUILD

- tests: Fixed up DIGEST-MD5 tests following commit eefeb73af4

- curl_sasl: Extended native DIGEST-MD5 cnonce to be a 32-byte hex string
  
  Rather than use a short 8-byte hex string, extended the cnonce to be
  32-bytes long, like Windows SSPI does.
  
  Used a combination of random data as well as the current date and
  time for the generation.

- curl_sasl_sspi: Fixed corrupt hostname in DIGEST-MD5 SPN generation

Dan Fandrich (29 May 2014)
- tests: Fix portability issue with the tftpd server and timeouts
  
  gcc spit out warning: variable 'x' might be clobbered by 'longjmp' or
  'vfork' messages for a few variables.  These automatic variables were
  expected to be changed between a setjmp/longjmp and hold their values,
  so are now marked volatile.

Steve Holme (28 May 2014)
- RELEASE-NOTES: Synced with 2a615a2b64

- build: Use $(TargetDir) and $(TargetName) macros for VC .lib output files
  
  As with commit 11397eb6dd, use $(TargetDir) and $(TargetName) for the
  Import Library output rather than $(OutDir)\$(ProjectName)d.lib and
  $(OutDir)\$(ProjectName).lib.

- build: Use $(TargetDir) and $(TargetName) macros for VC .pdb output files
  
  Like with the curl tool project files use $(TargetDir)$(TargetName).pdb
  rather than $(OutDir)$(ProjectName)d.pdb for the Program Database File
  output.

Daniel Stenberg (28 May 2014)
- gnutls: allow building with nghttp2 but without ALPN support
  
  It might not be the most useful combo, but...

- [Alessandro Ghedini brought this change]

  gnutls: don't use deprecated type names anymore

- [Brad Spencer brought this change]

  select: with winsock, avoid passing unsupported arguments to select()
  
  "Any two of the parameters, readfds, writefds, or exceptfds, can be
  given as null. At least one must be non-null, and any non-null
  descriptor set must contain at least one handle to a socket."
  
  http://msdn.microsoft.com/en-ca/library/windows/desktop/ms740141(v=vs.85).aspx
  
  When using select(), cURL doesn't adhere to this (WinSock-specific)
  rule, and can ask to monitor empty fd_sets, which leads to select()
  returning WSAEINVAL (i.e. EINVAL) and connections failing in mysterious
  ways as a result (at least when using the curl_multi_socket_action()
  interface).
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0278.html

- url-parser: only use if_nametoindex if detected by configure
  
  The previous #ifdef detection wasn't good enough.
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0260.html
  Reported-by: Chris Young

- curl_version_info.3: returns a pointer to a static struct
  
  And clarify that age 3 means 7.16.1 or later.

- [Fabian Frank brought this change]

  polarssl: add ALPN support
  
  PolarSSL added ALPN support in their 1.3.6 release.
  
  See:
  https://polarssl.org/tech-updates/releases/polarssl-1.3.6-released

- curl_easy_reset: reset the URL
  
  Make sure that the URL is reset and cleared.
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0235.html
  Reported-by: Jonathan Cardoso Machado

- configure: fix the nghttp2 detection when not found

- configure: detect nghttp2 by default

- [Tatsuhiro Tsujikawa brought this change]

  openssl: Fix uninitialized variable use in NPN callback
  
  OpenSSL passes out and outlen variable uninitialized to
  select_next_proto_cb callback function.  If the callback function
  returns SSL_TLSEXT_ERR_OK, the caller assumes the callback filled
  values in out and outlen and processes as such.  Previously, if there
  is no overlap in protocol lists, curl code does not fill any values in
  these variables and returns SSL_TLSEXT_ERR_OK, which means we are
  triggering undefined behavior.  valgrind warns this.
  
  This patch fixes this issue by fallback to HTTP/1.1 if there is no
  overlap.

- curl.1: clarify that -u can't specify a user with colon

Steve Holme (22 May 2014)
- README: Added Test Suite to the TODO list

- build: Use CURLX_* file lists for Visual Studio curl tool project generation

- tool_getparam.c: Fixed compilation warnings
  
  There is an implicit conversion from "unsigned long" to "long"

- RELEASE-NOTES: Synced with f634355868

Dan Fandrich (22 May 2014)
- http: Fix a compiler warning when http2 support is disabled

Steve Holme (22 May 2014)
- build: Fixed incorrect reference to curl_setup.h in Visual Studio files
  
  Fixed a copy / paste error from my 2011 project files.

Nick Zitzmann (21 May 2014)
- darwinssl: fix lint & build warnings in the previous commit

- [Vilmos Nebehaj brought this change]

  Add support for --cacert in DarwinSSL.
  
  Security Framework on OS X makes it possible to supply extra anchor (CA)
  certificates via the Certificate, Key, and Trust Services API. This
  commit makes the '--cacert' option work using this API.
  
  More information:
  
  https://developer.apple.com/library/mac/documentation/security/Reference/certifkeytrustservices/Reference/reference.html
  
  The HTTPS tests now pass on OS X except 314, which requires the '--crl'
  option to work.

Steve Holme (22 May 2014)
- http.c: Fixed compilation warning
  
  warning: suggest braces around empty body in an 'else' statement

- bits.close: Fixed compilation warning
  
  warning: implicit declaration of function 'connclose'

Daniel Stenberg (22 May 2014)
- bits.close: introduce connection close tracking
  
  Make all code use connclose() and connkeep() when changing the "close
  state" for a connection. These two macros take a string argument with an
  explanation, and debug builds of curl will include that in the debug
  output. Helps tracking connection re-use/close issues.

Steve Holme (21 May 2014)
- Makefile.inc: Added curlx headers to assist Visual Studio project generation

- build: Renamed CURLX_ONES file list definition to CURLX_CFILES
  
  Renamed the CURLX_ONES file list definition in order to a) try and be
  consistent with other file lists and b) to allow for the addition of
  the curlx header files, which will assist with Visual Studio project
  files generation rather than hard coding those files.

- bump: Start working on the next release

Version 7.37.0 (20 May 2014)

Daniel Stenberg (20 May 2014)
- THANKS: 18 new contributors for 7.37.0

- RELEASE-NOTES: synced with 85f4075bdbf3
  
  Possibly the final update before release...

Steve Holme (20 May 2014)
- README: Added some outstanding tasks to the TODO list
  
  Added a couple of outstanding tasks to the TODO section that we didn't
  get time to do before the release.

Daniel Stenberg (20 May 2014)
- http2: make connection re-use work
  
  Http2 connections would wrongly get closed after each individual
  request.
  
  Co-authored-by: Tatsuhiro Tsujikawa
  Bug: http://curl.haxx.se/bug/view.cgi?id=1374

- [Fabian Frank brought this change]

  ALPN: fix typo in http/1.1 identifier
  
  According to https://tools.ietf.org/html/draft-ietf-tls-applayerprotoneg-05
  it is "http/1.1" and not "http/1.0".

Steve Holme (20 May 2014)
- build-openssl.bat: Added check for OpenSSL source directory

- build-openssl.bat: Added default source directory when not specified
  
  Added a default source directory so the user doesn't have to specify
  one - the same as that, which the Visual Studio project files expect
  the OpenSSL dependencies to be in.

- Makefile.am: Fixed missing / in VC10+ project file generation

- INSTALL: Updated MSVC 6 caveats
  
  To use an up to date download link as well as remove duplicate
  information.

- INSTALL: Updated for new Visual Studio project files

- build: Slight rename of new LIB_* makefile file variables
  
  In order to try and be consistent between curl and libcurl renamed the
  recently introduced LIB_* makefile file variables.

- build: Removed old Visual Studio project files

Daniel Stenberg (18 May 2014)
- maketgz: two more CRLF
  
  grrr, missed them in my previous fix

- test1014: GSS-API is only in curl-config. not in curl
  
  Follow-up to commit 121bcfee5d1. curl-config --features now lists
  GSS-API but it is not a listed feature in curl -V. This should probably
  be synchronized.

- test1134: verify CREDSPERREQUEST for HTTP
  
  Verifies that the change in 68f0166a92 works as intended and that
  different HTTP auth credentials to the same host still re-uses the
  connection properly.

- maketgz: remove CRLF newlines

Steve Holme (18 May 2014)
- Makefile.am: Corrected a couple of grammar errors

- Makefile.am: Added new Visual Studio project file generation for curl tool

- Makefile.inc: Added resource file to assist Visual Studio project generation

- [Daniel Stenberg brought this change]

  maketgz: run make vc-ide before make dist
  
  To get the VC project files generated before packaging!

- Makefile.am: Added new Visual Studio project file generation for libcurl

- Makefile.am: Removed old Visual Studio project file generation

Daniel Stenberg (17 May 2014)
- RELEASE-NOTES: synced with 831f6dd1d986c9

Steve Holme (17 May 2014)
- build: Fixed another tabulation issue in the Visual Studio file generator

Dan Fandrich (17 May 2014)
- axtls: Fixed too long source line

Daniel Stenberg (17 May 2014)
- configure: add GSS-API to supported features
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1344
  Reported-by: Michael Osipov

- configure: add SPNEGO to supported features
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1343
  Reported-by: Michael Osipov

Dan Fandrich (16 May 2014)
- axtls: Add a TODO to a potential blocking call with no timeout

Daniel Stenberg (16 May 2014)
- curl_easy_getinfo.3: clarify CURLINFO_SIZE_DOWNLOAD
  
  It counts "body" data only, no meta data, no headers.

- curl_easy_setopt.3: prefer XFERINFOFUNCTION to PROGRESSFUNCTION

- HTTP: CREDSPERREQUEST is for HTTP too
  
  Commit 517b06d657ace (in 7.36.0) that brought the CREDSPERREQUEST flag
  only set it for HTTPS, making HTTP less good at doing connection re-use
  than it should be. Now set it for HTTP as well.
  
  Simple test case
  
  "curl -v -u foo:bar localhost --next -u bar:foo localhos"
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0127.html
  Reported-by: Kamil Dudka

- RELEASE-NOTES: synced with 53a5b95c21586

- CURLINFO_SSL_VERIFYRESULT: assign at first connect call
  
  The variable wasn't assigned at all until step3 which would lead to a
  failed connect never assigning the variable and thus returning a bad
  value.
  
  Reported-by: Larry Lin
  Bug: http://curl.haxx.se/mail/lib-2014-04/0203.html

- timers: fix timer regression involving redirects / reconnects
  
  In commit 0b3750b5c23c25f (released in 7.36.0) we fixed a timeout issue
  but instead broke the timings.
  
  To fix this, I introduce a new timestamp to use for the timeouts and
  restored the previous timestamp and timestamp position so that the old
  timer functionality is restored.
  
  In addition to that, that change also broke connection timeouts for when
  more than one connect was used (as it would then count the total time
  from the first connect and not for the most recent one). Now
  Curl_timeleft() has been modified so that it checks against different
  start times depending on which timeout it checks.
  
  Test 1303 is updated accordingly.
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0147.html
  Reported-by: Ryan Braud

Steve Holme (15 May 2014)
- darwinssl: Updated copyright following recent changes

Nick Zitzmann (14 May 2014)
- darwinssl: fix potential crash when attempting to copy an identity
  from a P12 file
  
  This could've happened if SecPKCS12Import() returned noErr _and_ no
  identity.

Steve Holme (12 May 2014)
- RELEASE-NOTES: Synced with 52d16c84d2

Daniel Stenberg (12 May 2014)
- openssl: unbreak PKCS12 support
  
  Regression introduced in ce362e8eb9c (7.31.0)
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1371
  Reported-by: Dmitry

Steve Holme (11 May 2014)
- Makefile.inc: Added resource file to assist Visual Studio project generation

- build: Fixed some tabulation issues in the Visual Studio file generator

- tests: Fixed up DIGEST-MD5 tests following commit 8342b6e1dc

- sasl: Fixed missing qop in the client's challenge-response message
  
  Whilst the qop directive isn't required to be present in a client's
  response, as servers should assume a qop of "auth" if it isn't
  specified, some may return authentication failure if it is missing.

- tool_operate.c: Fixed compilation warning
  
  An enumerated type is mixed with another type.

- Makefile.inc: Separated the lib and lib/vtls source file variables
  
  To cater for the automatic generation of the new Visual Studio project
  files, moved the lib file list into a separated variable so that lib
  and lib/vtls can be referenced independently.

- RELEASE-NOTES: Synced with 0ab2c444b5

- Makefile.b32: Fixed for vtls changes
  
  Follow up fix to commits a47c142a88, 11e8066ef9 and 92b9ae5c5d.
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0025.html
  Reported and assisted by: Jon Torrey

Daniel Stenberg (9 May 2014)
- lib1506: make sure the transfers are not within the same ms
  
  Just to make sure the test is properly repeatable.
  
  Bug: http://curl.haxx.se/mail/lib-2014-05/0081.html
  Reported-by: Henrik

- libtests: add a wait_ms() function
  
  This allows a libcurl test to portably sleep for a given number of
  milliseconds.

Steve Holme (9 May 2014)
- tool_operate.c: Fixed TAB is white space from commit 5b8ae0a985

- tool_urlglob.c: Fixed compilation warning
  
  An enumerated type is mixed with another type.

- tool_operate.c: Fixed compilation warnings
  
  An enumerated type is mixed with another type.

- getinfo.c: Fixed compilation warning
  
  The indicated statement is not reachable.

Daniel Stenberg (9 May 2014)
- CONTRIBUTE: mention our Bug/Reported-by commit style

Kamil Dudka (9 May 2014)
- http: avoid auth failure on a duplicated header
  
  ... 'WWW-Authenticate: Negotiate' received from server
  
  Reported by: David Woodhouse
  Bug: https://bugzilla.redhat.com/1093348

Daniel Stenberg (9 May 2014)
- cacertinmem: fix memory leak
  
  While "just" an example it still isn't nice to leak memory.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1368
  Fixed-by: Marko

- TODO: firefox will soon support SSL (HTTPS) to proxy

Dan Fandrich (9 May 2014)
- test87: Get rid of extraneous square brackets in tag

Daniel Stenberg (8 May 2014)
- [Patrick Watson brought this change]

  mk-ca-bundle: added -p
  
  -p takes a list of Mozilla trust purposes and levels for certificates to
  include in output.  Takes the form of a comma separated list of
  purposes, a colon, and a comma separated list of levels.

- FAQ: Added 5.18 Does libcurl use threads?

Dan Fandrich (7 May 2014)
- RELEASE-NOTES: Added contributor

- [Aaro Koskinen brought this change]

  configure: Don't set LD_LIBRARY_PATH when cross-compiling
  
  Most of LD_LIBRARY_PATH adjustments are already guarded, but not all.
  
  The patch fixes cross-compilation failure when libidn is present.

Steve Holme (7 May 2014)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Compile with latest nghttp2
  
  Now nghttp2_submit_request returns assigned stream ID, we don't have
  to check stream ID using before_stream_send_callback.  The
  adjust_priority_callback was removed.

- curl.1: Added missing --login-options option
  
  ...and removed ;OPTIONS from --user as that functionality was removed
  in 7.34.0.

- tool_help: Fixed missing --login-options option
  
  ...and removed ;OPTIONS from --user as that functionality was removed
  in 7.34.0.

- url.c: Fixed compilation warning/error
  
  Depending on compiler line 3505 could generate the following warning or
  error:
  
  * warning: ISO C90 forbids mixed declarations and code
  * A declaration cannot appear after an executable statement in a block
  * error C2275: 'size_t' : illegal use of this type as an expression

- TODO: Fixed some spelling mistakes

- TODO: Add support for concurrent connections in ftpserver.pl

- build: Fixed file format version number in VC12 solution files
  
  Unlike previous versions of Visual Studio the VC12 solution file format
  does not increment the format version number, but instead, only changes
  the version comment text.
  
  This incorrectly set version number would cause problems for any third
  party piece of software that would read the solution file expecting the
  version number to be 12.00 and found it to be 13.00, such as some build
  accelerators.
  
  Verified against a freshly created solution file which was generated
  with VC12.

- [Ivo Bellin Salarin brought this change]

  build-openssl.bat: Corrected use of angled brackets in help output
  
  Angled brackets were used in the help output to indicate that the
  compiler and platform arguments are mandatory. Unfortunately this
  caused a "< was unexpected at this time" error as the characters are
  interpreted as re-direction characters when not escaped.

Dan Fandrich (6 May 2014)
- RELEASE-NOTES: changed encoding to UTF-8

Daniel Stenberg (6 May 2014)
- RELEASE-NOTES: synced with 5de8d84098db1bd2

- fix_hostname: strip off a single trailing dot from host name
  
  Primarily for SNI, we need the host name without a trailing dot.
  "https://www.example.com." resolves fine but fails on SNI unless the dot
  is removed.
  
  Reported-by: Leon Winter
  Bug: http://curl.haxx.se/mail/lib-2014-04/0161.html

- curl: bail on cookie use when built with disabled cookies

- [Daniel Johnson brought this change]

  Enable poll on darwin13
  
  Poll has long been broken on Mac OS X. Starting with 10.9 (darwin13) it
  now works correctly so this patch enables it there.

- curl_easy_setopt.3: added the proto for CURLOPT_SSH_KNOWNHOSTS

Dan Fandrich (5 May 2014)
- tests: Use standard libtest return codes when relevant

- test1513: Don't return an uninitialized variable on init failure

Daniel Stenberg (5 May 2014)
- [Jeff King brought this change]

  curl_multi_cleanup: ignore SIGPIPE better
  
  When looping and closing each individual connection left open, the
  SIGPIPE ignoring was not done and could thus lead to death by signal 13.
  
  Bug: http://thread.gmane.org/gmane.comp.version-control.git/238242

- TODO: the FTP HOST command is now in RFC 7151

- TODO: Update date and version in man pages
  
  Mentioned in bug #1342

- schannel: don't use the connect-timeout during send
  
  As there's a default connection timeout and this wrongly used the
  connection timeout during a transfer after the connection is completed,
  this function would trigger timeouts during transfers erroneously.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1352
  Figured-out-by: Radu Simionescu

- mprintf: allow %.s with data not being zero terminated
  
  If the precision is indeed shorter than the string, don't strlen() to
  find the end because that's not how the precision operator works.
  
  I also added a unit test for curl_msnprintf to make sure this works and
  that the fix doesn't a few other basic use cases. I found a POSIX
  compliance problem that I marked TODO in the unit test, and I figure we
  need to add more tests in the future.
  
  Reported-by: Török Edwin

Steve Holme (4 May 2014)
- RELEASE-NOTES: Synced with 4febbedc5a

- curl_ntlm_core: Fixed use of long long for VC6 and VC7
  
  Commit 07b66cbfa4 unfortunately broke native NTLM message support in
  compilers, such as VC6, VC7 and others, that don't support long long
  type declarations. This commit fixes VC6 and VC7 as they support the
  __int64 extension, however, we should consider an additional fix for
  other compilers that don't support this.

- config-win32.h: Fixed HAVE_LONGLONG for Visual Studio .NET 2003 and up
  
  Fixed the HAVE_LONGLONG declaration as long long is supported in Visual
  Studio .NET 2003 (VC7.1) onwards.

Daniel Stenberg (4 May 2014)
- openssl: biomem->data is not zero terminated
  
  So printf(%s) on it or reading before bounds checking is wrong, fixing
  it. Could previously lead to reading out of boundary.
  
  Reported-by: Török Edwin

- BUILD.WINDOWS: update URL for windows prereqs

- easy_perform: spelling mistake in error message

Steve Holme (1 May 2014)
- Makefile.am: Added build-openssl.bat as README file references it
  
  Missed in commit dce748d3f1.

- build: Fixed Visual Studio project file generator missing some files
  
  As of commit 6cdd88f22c the Visual Studio project file generator would
  skip the first and last file from each group of files.

- build: Added OpenSSL VC build helper for side-by-side compilations

- build: Added Visual Studio 2003 .NET (VC7.1) project files
  
  Carrying on from commit 11025613b9 added VC7.1 project files which are
  capable of supporting side-by-side compilation, as well as support for
  some of the third-party libraries curl uses.

Dan Fandrich (1 May 2014)
- test585: Fixed NULL pointer dereference in fopen

Steve Holme (30 Apr 2014)
- build: Fixed generation when source file names contain spaces
  
  This shouldn't happen with the source files in the repository, but
  fixed the output when there are spurious files lying around that
  contain spaces. For example "pop3 - Copy.c"
  
  By including the offending source file in the project files the user
  can then see the file and remove it if necessary.

- build: Added VC7 and VC7.1 support to the project file generator
  
  Note: VC7.1 templates are currently not available.

- build: Added VC6 and VC12 support to the project file generator

- build: Added VC11 support to the project file generator

- build: Added VC9 and VC10 support to the project file generator

- build: Added Visual Studio project file generator
  
  Added a batch file for generating the Visual Studio project files from
  the new template files.

- copyright: Updated following recent edits

Dan Fandrich (29 Apr 2014)
- runtests.pl: Improved the check for a crash during torture tests

- Added a few more const where possible

- unit1395: Fixed null pointer dereference on torture test

Daniel Stenberg (27 Apr 2014)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Compile with latest nghttp2
  
  commit 6d5f40238028f2d8c (Apr 27) or later nghttp2 is now required

Steve Holme (27 Apr 2014)
- build: Added other VC6 output files to the .gitignore list

- build: Corrected libcurl PDB file name for x64 builds in VC8 through VC12

- build: Added Visual Studio .NET (VC7) project files
  
  Carrying on from commit 11025613b9 added VC7 project files which are
  capable of supporting side-by-side compilation, as well as support for
  some of the third-party libraries curl uses.

- build: Added Visual Studio 6.0 (VC6) project files
  
  Carrying on from commit 11025613b9 added a more thorough version of
  the VC6 project files which are capable of supporting side-by-side
  compilation, as well as support for some of the third-party libraries
  curl uses.

Daniel Stenberg (26 Apr 2014)
- INFILESIZE: fields in UserDefined must not be changed run-time
  
  set.infilesize in this case was modified in several places, which could
  lead to repeated requests using the same handle to get unintendent/wrong
  consequences based on what the previous request did!

Kamil Dudka (25 Apr 2014)
- nss: propagate blocking direction from NSPR I/O
  
  ... during the non-blocking SSL handshake

Daniel Stenberg (23 Apr 2014)
- test325: verify --proto-redir https=>http

- handler: make 'protocol' always specified as a single bit
  
  This makes the findprotocol() function work as intended so that libcurl
  can properly be restricted to not support HTTP while still supporting
  HTTPS - since the HTTPS handler previously set both the HTTP and HTTPS
  bits in the protocol field.
  
  This fixes --proto and --proto-redir for most SSL protocols.
  
  This is done by adding a few new convenience defines that groups HTTP
  and HTTPS, FTP and FTPS etc that should then be used when the code wants
  to check for both protocols at once. PROTO_FAMILY_[protocol] style.
  
  Bug: https://github.com/bagder/curl/pull/97
  Reported-by: drizzt

Steve Holme (23 Apr 2014)
- build: Added Visual Studio 2013 (VC12) project files
  
  Carrying on from commit 11025613b9 added VC12 project files which are
  capable of supporting side-by-side compilation, 32-bit and 64-bit
  builds as well as support for some of the third-party libraries curl
  uses.

Dan Fandrich (23 Apr 2014)
- cyassl: Use error-ssl.h when available
  
  Versions since at least 2.9.4 renamed error.h to error-ssl.h, so use
  whichever one is available.

Steve Holme (22 Apr 2014)
- RELEASE-NOTES: Synced with 386ed2d590

Daniel Stenberg (22 Apr 2014)
- gtls: fix NULL pointer dereference
  
  gnutls_x509_crt_import() must not be called with a NULL certificate
  
  Bug: http://curl.haxx.se/mail/lib-2014-04/0145.html
  Reported-by: Damian Dixon

- curl_global_init_mem: bump initialized even if already initialized
  
  As this makes curl_global_init_mem() behave the same way as
  curl_global_init() already does in that aspect - the same number of
  curl_global_cleanup() calls is then required to again decrease the
  counter and then eventually do the cleanup.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1362
  Reported-by: Tristan

Kamil Dudka (22 Apr 2014)
- nss: implement non-blocking SSL handshake

- nss: split Curl_nss_connect() into 4 functions

Dan Fandrich (22 Apr 2014)
- tests: Fixed torture test for tests 1526 & 1527

Marc Hoersken (22 Apr 2014)
- sockfilt.c: clean up threaded approach and add documentation

- sockfilt.c: zero initialize variable

- sockfilt.c: fixed getting stuck waiting for MinGW stdin pipe

Daniel Stenberg (22 Apr 2014)
- configure: use the nghttp2 path correctly with pkg-config
  
  When --with-nghttp2 was used (without a given path), the
  PKG_CONFIG_LIBDIR varialbe could get clobbered and ruin a proper
  detection of the library.
  
  Reported-by: Dilyan Palauzov
  Bug: http://curl.haxx.se/mail/lib-2014-04/0159.html

- [Dilyan Palauzov brought this change]

  configure: fix wrong comment
  
  copy and paste error

Steve Holme (21 Apr 2014)
- build: Fixed output name for Release builds in VC10 and VC11

Marc Hoersken (20 Apr 2014)
- sockfilt.c: properly handle disk files, pipes and character input

- sockfilt.c: ignore non-key-events and continue waiting for input

- sockfilt.c: free memory in case of memory allocation errors

- multi.c: fix possible invalid memory access in case nfds overflows
  
  ufds might not be allocated in case nfds overflows to zero while
  extra_nfds is still non-zero. udfs is then accessed within the
  extra_nfds-based for loop.

- netrc.c: fix multiple possible dereferences of null pointers

- parsedate.c: check sscanf result before passing it to strlen

- telnet.c: check sscanf results before passing them to snprintf

- telnet.c: fix possible use of uninitialized variable

- telnet.c: fix possible use of non-null-terminated strings

- url.c: fix possible use of non-null-terminated string with strlen
  
  Follow up on b0e742544be22ede33206a597b22682e51e0c676

- tool_writeout.c: initialize string pointer variable

- tool_formparse.c: fix possible use of non-null-terminated strings

- url.c: fix possible use of non-null-terminated string with strlen

- connect.c: fix multiple possible dereferences of null pointers
  
  In case the first address in the tempaddr array is NULL,
  the code would previously dereference an unchecked null pointer.

- tftp.c: fix possible dereference of null pointer

- tool_urlglob.c: added some comments to clarify for loop conditions
  
  I was tempted to change those to >= 0 until I saw that this is
  actually a for loop that terminates once i underflows.

- socks_sspi.c: added pointer guards to FreeContextBuffer calls
  
  The FreeContextBuffer SAL declaration does not declare the pointer
  as optional, therefore it must not be NULL.

- md5.c: fix use of uninitialized variable

- curl_schannel.c: added explicit cast of structure pointers

- curl_schannel.c: fix possible dereference of null pointer

Steve Holme (18 Apr 2014)
- RELEASE-NOTES: Synced with 33e0cba8f1

- curl_easy_setopt: Updated CURLOPT_URL to include IMAP PARTIAL FETCH example

- imap: Extended FETCH support to include PARTIAL URL specifier

- url.c: Fixed typo in comment

- curl_easy_setopt: Updated CURLOPT_URL to include IMAP query string examples

- test810: Updated to use new IMAP URL query string functionality

- imap: Expanded mailbox SEARCH support to use URL query strings

- imap: Added support for parsing URL query strings
  
  Added support for parsing query strings from the URL as defined by
  RFC-5092.

- imap: Introduced the SEARCH state

- imap: Fixed untagged response detection when no data after command
  
  Should a command return untagged responses that contained no data then
  the imap_matchresp() function would not detect them as valid responses,
  as it wasn't taking the CRLF characters into account at the end of each
  line.

- build: Added Visual Studio 2012 (VC11) project files
  
  Carrying on from commit 11025613b9 added VC11 project files which are
  capable of supporting side-by-side compilation, 32-bit and 64-bit
  builds as well as support for some of the third-party libraries curl
  uses.

- build: Corrected Visual Studio solutions for DLL Release x64

Daniel Stenberg (17 Apr 2014)
- README.http2: mention some alt-svc thoughts

Steve Holme (16 Apr 2014)
- Makefile.am: Missed separator in commit fbaa2f8660

- build: Added Visual Studio 2010 (VC10) project files
  
  Carrying on from commit 11025613b9 added VC10 project files which are
  capable of supporting side-by-side compilation, 32-bit and 64-bit
  builds as well as support for some of the third-party libraries curl
  uses.

Dan Fandrich (14 Apr 2014)
- url: only use if_nametoindex() if IFNAMSIZ is available

- symbian: fixed typo in comment

Steve Holme (9 Apr 2014)
- build: Added Visual Studio 2008 (VC9) project files
  
  Carrying on from commit 11025613b9, added VC9 project files which are
  capable of supporting side-by-side compilation, 32-bit and 64-bit
  builds as well as support for some of the third-party libraries curl
  uses.

- sas: Added DIGEST-MD5 qop-option validation in native challange handling
  
  Given that we presently support "auth" and not "auth-int" or "auth-conf"
  for native challenge-response messages, added client side validation of
  the quality-of-protection options from the server's challenge message.

Daniel Stenberg (8 Apr 2014)
- dist: include the projects/ files in releases
  
  ... the recent MSVC project files added by Steve Holme

- strerror: fix comment about vxworks' strerror_r buffer size
  
  Bug: http://curl.haxx.se/mail/lib-2014-04/0063.html
  Reported-by: Jeroen Koekkoek

Steve Holme (6 Apr 2014)
- sasl: Added forward declaration of structures following recent changes
  
  To avoid urldata.h being included from the header file or that the
  source file has the correct include order as highlighted by one of
  the auto builds recently.

- RELEASE-NOTES: Synced with 5cdb61abb2

- tests: Disabled DIGEST-MD5 tests when running with SSPI enabled

- sasl: Fixed compilation warning
  
  warning: no previous prototype for 'Curl_sasl_create_digest_md5_message'

- sasl: Added curl_memory.h include as per test 1132

- sasl: Fixed compilation warning in SSPI builds
  
  warning: 'sasl_digest_get_key_value' defined but not used

- sasl: Corrected missing free of decoded challenge message from 607883f13c

- sasl: Corrected add of Curl_sasl_decode_digest_md5_message() from 2c49e96092

- sasl: Post DIGEST-MD5 SSPI code tidy up
  
  * Added comments to SSPI NTLM message generation
  * Added comments to native DIGEST-MD5 code
  * Removed redundant identity pointer

- sasl: Corrected pre-processor inclusion of SSPI based DIGEST-MD5 code
  
  When CURL_DISABLE_CRYPTO_AUTH is defined the DIGEST-MD5 code should not
  be included, regardless of whether USE__WINDOWS_SSPI is defined or not.
  This is indicated by the definition of USE_HTTP_NEGOTIATE and USE_NTLM
  in curl_setup.h.

- sasl: Added support for DIGEST-MD5 via Windows SSPI

- http_negotiate_sspi: Fixed compilation when USE_HTTP_NEGOTIATE not defined

- Makefile.vc6: Added curl_sasl_sspi.c

- Makefile.vc6: Follow up fix to commit 45d3f00803

- ntlm: Moved the identity generation into shared SSPI code

- sasl: Renamed SSPI module following short name clash

- sasl: Added initial stub functions for SSPI DIGEST-MD support

- sasl: Combined DIGEST-MD5 message decoding and generation

Marc Hoersken (5 Apr 2014)
- Makefile.vc6: added warnless.c to fix build

Steve Holme (5 Apr 2014)
- winbuild: Updated the VC++ make instructions following commit 11025613b9
  
  * Added information regarding the February 2003 Platform SDK for VC6
  * Updated the introduction to be similar to the IDE projects README

Daniel Stenberg (5 Apr 2014)
- [Tatsuhiro Tsujikawa brought this change]

  http2: Compile with current nghttp2, which supports h2-11

Steve Holme (5 Apr 2014)
- winbuild: Added Visual Studio 2005 (VC8) project files
  
  Added a more thorough version of the VC8 project files that exist in
  the "vs" folder with the intention to add support for other versions of
  Visual Studio. These files support side-by-side compilation, 32-bit and
  64-bit builds as well as support for some of the third-party libraries
  curl uses.

Daniel Stenberg (4 Apr 2014)
- curl_easy_setopt: fix wrong version number references

- docs: this is for 7.37.0
  
  And clarify for curl that --proxy-header now must be used for headers
  that are meant for a proxy, and they will not be included if the request
  is not for a proxy.

- PROXYHEADER: send these headers in "normal" proxy requests too
  
  Updated the docs to clarify and the code accordingly, with test 1528 to
  verify:
  
  When CURLHEADER_SEPARATE is set and libcurl is asked to send a request
  to a proxy but it isn't CONNECT, then _both_ header lists
  (CURLOPT_HTTPHEADER and CURLOPT_PROXYHEADER) will be used since the
  single request is then made for both the proxy and the server.

- test1428: verify --proxy-header

- curl.1: documented --proxy-header

- [Maciej Puzio brought this change]

  curl: add --proxy-header

- symbols-in-versions: Added CURLHEADER_*
  
  ... and sorted the list

- CURLOPT_HEADEROPT: added
  
  Modified the logic so that CURLOPT_HEADEROPT now controls if PROXYHEADER
  is actually used or not.

- CURLOPT_PROXYHEADER: set headers for proxy-only
  
  Includes docs and new test cases: 1525, 1526 and 1527
  
  Co-written-by: Vijay Panghal

- HTTP: don't send Content-Length: 0 _and_ Expect: 100-continue
  
  Without request body there's no point in asking for 100-continue.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1349
  Reported-by: JimS

- ftp: in passive data connect wait for happy eyeballs sockets
  
  When doing passive FTP, the multi state function needs to extract and
  use the happy eyeballs sockets to wait for to check for completion!
  
  Bug: http://curl.haxx.se/mail/lib-2014-02/0135.html (ruined)
  Reported-by: Alan

- http2+openssl: fix compiler warnings in ALPN using code

Dan Fandrich (3 Apr 2014)
- tests: unified use of some keywords

- tests: added some missing closing tags

Daniel Stenberg (3 Apr 2014)
- runtests: insist on a <keywords> section
  
  Since all present tests now have <keywords> listed, this script will now
  refuse to run a given test case if no such section is provided.
  Hopefully this will help us make sure new test cases get keywords added
  at start.

- tests: add keywords to the last 7 tests lacking them

Steve Holme (1 Apr 2014)
- smtp: Fixed login denied with a RFC-821 based server
  
  In addition to commit fe260b75e7 fixed the same issue for RFC-821 based
  SMTP servers and allow the credientials to be given to curl even though
  they are not used with the server.

- tests: Added SMTP with credientials test when not supported by server

Daniel Stenberg (1 Apr 2014)
- urldata: spellfix comment
  
  Reported-by: Melissa

Steve Holme (31 Mar 2014)
- RELEASE-NOTES: Synced with dd07e79023

- tests: Added SMTP with credentials test for RFC-821 based server
  
  Added SMTP (RFC-821 only) based test case as a reference for the fix
  provided by commit fe260b75e7.

Daniel Stenberg (31 Mar 2014)
- ipv6: strip off zone identifiers in redirects too
  
  Follow up to 9317eced984 makes test 1056 work again.

Dan Fandrich (31 Mar 2014)
- docs: Removed mention of -g hack when using IPv6 literals
  
  This limitation was removed in commit 0bc4938e

Daniel Stenberg (31 Mar 2014)
- http2: let openssl mention the exact protocol negotiated
  
  Remove a superfluous "negotiated http2" info line

- http2: remove _DRAFT09 from the NPN_HTTP2 enum
  
  We're progressing throught drafts so there's no point in having a fixed
  one in a symbol that'll survive.

- [Till Maas brought this change]

  URL parser: IPv6 zone identifiers are now supported

- [Paul Marks brought this change]

  curl: stop interpreting IPv6 literals as glob patterns.
  
  This makes it possible to fetch from an IPv6 literal without specifying
  the -g option.  Globbing remains available elsehwere in the URL.
  
  For example:
    curl http://[::1]/file[1-3].txt
  
  This creates no ambiguity, because there is no overlap between the
  syntax of valid globs and valid IPv6 literals.  Globs contain hyphens
  and at most 1 colon, while IPv6 literals have no hyphens, and at least 2
  colons.
  
  The peek_ipv6() parser simply whitelists a set of characters and counts
  colons, because the real validation happens later on.  The character set
  includes A-Z, in case someone decides to implement support for scopes
  like [fe80::1%25eth0] in the future.
  
  Signed-off-by: Paul Marks <pmarks@google.com>

Steve Holme (30 Mar 2014)
- test938: Updated to use file input for upload
  
  As the second URL won't be passed input from stdin.

- test836: Fixed incorrect username in expected output

Daniel Stenberg (30 Mar 2014)
- DISABLED: 836, 882 and 938 hang

- runtests: check protocol before data
  
  When the protocol part fails, the data usually does too but the protocol
  part is often more fundamental and often provide the clues you need to
  fix the test case.

Steve Holme (30 Mar 2014)
- ftpserver.pl: Extended the full text reply regular expression
  
  Extended the regex to include other valid characters such as those used
  in the reply text of Test 836.

Daniel Stenberg (30 Mar 2014)
- keywords: sort case insensitive

- tests: remove trailing CRs from keywords

- keywords: sort keywords alphabetically

- keywords: don't use STDERR for good info

Steve Holme (30 Mar 2014)
- tests: Added email unit tests to verify login credential connection re-use

- tests: Corrected "APOP" authentication keyword

- tests: Replaced email authentication keywords with SASL based keywords
  
  As the email protocols implement SASL authentication rather than IMAP,
  POP3 and SMTP specific authentication, updated the authentication
  keywords to reflect this.

- tests: Added "Clear Text" authentication keyword

- tests: Added "SASL" authentication keyword

- imap-append.c: Fixed compilation errors on some platforms
  
  In the initializer for len, there is no prototype for "strlen".
  In this statement, there is no prototype for "memcpy".

- ftpserver.pl: Removed some unused variables

- ftpserver.pl: Reworked some variable names to be more meaningful

- ftpserver.pl: Corrected some indentation in senddata()

Daniel Stenberg (29 Mar 2014)
- lib1513: fix callback proto to silence warning

Steve Holme (29 Mar 2014)
- ftpserver.pl: Added fallback to <data> support when using multiple URLs
  
  Added support for falling back to <data> when <data1>, <data2>, etc...
  don't exist in the <reply> section of a unit test.

- ftpserver.pl: Updated email based get reply data code to use new method

- ftpserver.pl: Fixed syntax error from commit 3a29ee41

- ftpserver.pl: Updated argument code in STATUS_imap() to be more meaningful

- ftpserver.pl: Introduced common method for getting a test's reply data

- smtp: Fixed login denied when server doesn't support AUTH capability
  
  Specifying user credentials when the SMTP server doesn't support
  authentication would cause curl to display "No known authentication
  mechanisms supported!" and return CURLE_LOGIN_DENIED.
  
  Reported-by: Tom Sparrow
  Bug: http://curl.haxx.se/mail/lib-2014-03/0173.html

Daniel Stenberg (28 Mar 2014)
- [Cody Mack brought this change]

  winbuild: added warnless.c to fix build

Dan Fandrich (26 Mar 2014)
- hostcheck: added a system include to define struct in_addr

- test1397: Fixed compilation with some SSL backends
  
  The test is only valid when one of four SSL backends is in use,
  and must otherwise return success.

- test815/816: Use authentication for both URLs
  
  The improved connection reuse logic would otherwise create a new
  connection for each one, which isn't supported by the test
  server, nor expected by the test.

Daniel Stenberg (26 Mar 2014)
- mkhelp: generate code for --disable-manual as well
  
  This allows configure --disable-manual to run and build without having
  to regenerate the src/tool_hugehelp.c file which otherwise is necessary
  since we ship tarballs with that file present.
  
  Reported-by: Remi Gacogne
  Bug: http://curl.haxx.se/bug/view.cgi?id=1350

- bump: start the 7.37.0 race

Version 7.36.0 (26 Mar 2014)

Daniel Stenberg (26 Mar 2014)
- RELEASE-NOTES: 7.36.0

- [Richard J. Moore brought this change]

  test1397: unit test for certificate name wildcard handling

- Curl_cert_hostcheck: strip trailing dots in host name and wildcard
  
  Reported-by: Richard Moore

- Curl_cert_hostcheck: reject IP address wildcard matches
  
  There are server certificates used with IP address in the CN field, but
  we MUST not allow wild cart certs for hostnames given as IP addresses
  only. Therefore we must make Curl_cert_hostcheck() fail such attempts.
  
  Bug: http://curl.haxx.se/docs/adv_20140326B.html
  Reported-by: Richard Moore

- [Steve Holme brought this change]

  url: Fixed connection re-use when using different log-in credentials
  
  In addition to FTP, other connection based protocols such as IMAP, POP3,
  SMTP, SCP, SFTP and LDAP require a new connection when different log-in
  credentials are specified. Fixed the detection logic to include these
  other protocols.
  
  Bug: http://curl.haxx.se/docs/adv_20140326A.html

- THANKS: 14 new friends from the 7.36.0 announcement

- RELEASE-NOTES: synced with 3ebfaf6a0399b6a

Steve Holme (23 Mar 2014)
- tool_operate: Fixed uninitialised variable under some error situations
  
  For example when a URL is not specified or the headers file fails to
  open.

- tool_parsecfg: Reworked error handling from commit fc59a9e1

- tool_getparam: Removed "dead assignment" code introduced in commit 1a9b58fc

Daniel Stenberg (22 Mar 2014)
- [Gisle Vanem brought this change]

  polarssl: avoid extra newlines in debug messages
  
  The debug messages printed inside PolarSSL always seems to end with a
  newline. So 'infof()' should not add one. Besides the trace 'line'
  should be 'const'.

- rtsp: parse "Session:" header properly
  
  The parser skipped the initial letter, which presumably often is
  whitespace but doesn't have to be.
  
  Reported-by: Mike Hasselberg
  Bug: http://curl.haxx.se/mail/lib-2014-03/0134.html

- runtests.pl: verify specified test cases
  
  To better allow arguments like "1 to 9999" without flooding the terminal
  with error messages, the given test cases range is now checked and only
  test numbers with existing files are actually run.

Dan Fandrich (19 Mar 2014)
- RELEASE-NOTES: fixed typo

Daniel Stenberg (19 Mar 2014)
- trynextip: don't store 'ai' on failed connects...
  
  It leads to the "next family" tries starting from the wrong point and thus
  fails!
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1337
  Reported-by: ricker

- RELEASE-NOTES: synced with 47f8e99e78c

- [Gaël PORTAY brought this change]

  polarssl: fix possible handshake timeout issue in multi.
  
  Because of the socket is unblocking, PolarSSL does need call to getsock to
  get the action to perform in multi environment.
  
  In some cases, it might happen we have not received yet all data to perform
  the handshake. ssh_handshake returns POLARSSL_ERR_NET_WANT_READ, the state
  is updated but because of the getsock has not the proper #define macro to,
  the library never prevents to select socket for input thus the socket will
  never be awaken when last data is available. Thus it leads to timeout.

- [Gaël PORTAY brought this change]

  polarssl: break compatibility with version older than 1.3.
  
  Remove all #ifdef/else/endif macros that ensure compatibility with polarssl
  version previous than 1.3.

- [Gaël PORTAY brought this change]

  polarssl: drop use of 1.2 compatibility header.
  
  API has changed since version 1.3. A compatibility header has been created
  to ensure forward compatibility for code using old API:
   * x509 certificate structure has been renamed to from x509_cert to
     x509_crt
   * new dedicated setter for RSA certificates ssl_set_own_cert_rsa,
     ssl_set_own_cert is for generic keys
   * ssl_default_ciphersuites has been replaced by function
     ssl_list_ciphersuites()
  
  This patch drops the use of the compatibly header.

- polarssl: added missing end-of-comment from previous commit

- polarssl: now require 1.3.0+
  
  Also fixed a function name change in the version requirement bump

- [hasufell brought this change]

  polarssl: fix compilation
  
  Rename x509_cert to x509_crt and add "compat-1.2.h"
  include.
  This would still need some more thorough conversion
  in order to drop "compat-1.2.h" include.

Kamil Dudka (15 Mar 2014)
- nss: allow to enable/disable new AES GCM cipher-suites
  
  ... if built against a new enough version of NSS

- nss: allow to enable/disable new HMAC-SHA256 cipher-suites
  
  ... if built against a new enough version of NSS

- nss: do not enable AES cipher-suites by default
  
  ... but allow them to be enabled/disabled explicitly.  The default
  policy should be maintained at the NSS level.

Dan Fandrich (15 Mar 2014)
- tests: made the SASL modes separate keywords

- tests: added missing HTTP NTLM auth keywords
  
  Also, removed an unneeded strippart

- tests: disable valgrind on the remaining scp/sftp tests

- valgrind.supp: added another test 165 suppression
  
  This one seems to come and go as the optimizer decides how best
  to inline some functions.

- ssh: prevent a logic error that could result in an infinite loop

- docs: fixed a bunch of typos

- test640/1: add tests for --head with sftp and scp
  
  This option is currently rather useless with these protocols
  when no quote command is given, but it is valid.

- ssh: removed a redundant close state transition

- ssh: abort immediately on a header callback error

Daniel Stenberg (14 Mar 2014)
- chunked-encoding: provide a readable error string for chunked errors

- TODO: remove http2, we now have it

- [Tatsuhiro Tsujikawa brought this change]

  http2: free resources on disconnect
  
  ... and use Curl_safefree() instead of free()

- openssl: info massage with SSL version used
  
  Patch-by: byte_bucket

Steve Holme (9 Mar 2014)
- RELEASE-NOTES: Synced with 8ddda0e999

Daniel Stenberg (9 Mar 2014)
- README.http2: clarify the build prerequisites

- SSL-PROBLEMS: add "missing intermediate certificates" piece

- SSL-PROBLEMS: describes common curl+SSL problems

Nick Zitzmann (8 Mar 2014)
- docs: remove documentation on setting up krb4 support
  
  The information about building with Kerberos4 support was half a year out
  of date. We dropped support for that.

Daniel Stenberg (6 Mar 2014)
- ssh: fix compiler warning converting ssize_t to int

Dan Fandrich (6 Mar 2014)
- ssh: Fixed a style warning
  
  Also, combined a couple of #ifdef sections

- ssh: Pass errors from libssh2_sftp_read up the stack

Daniel Stenberg (6 Mar 2014)
- parse_remote_port: error out on illegal port numbers better

- remote_port: allow connect to port 0
  
  Port number zero is perfectly allowed to connect to. I moved to storing
  the remote port number in an int so that -1 means undefined and 0-65535
  can be used for legitimate port numbers.

- multi_runsingle: move timestamp into INIT
  
  Setting the TIMER_STARTSINGLE timestamp first in CONNECT has the
  drawback that for actions that go back to the CONNECT state, the time
  stamp is reset and for the multi_socket API there's no corresponding
  Curl_expire() then so the timeout logic gets wrong!
  
  Reported-by: Brad Spencer
  Bug: http://curl.haxx.se/mail/lib-2014-02/0036.html

- hostcheck: update comment after previous change

- hostcheck: Curl_cert_hostcheck is not used by NSS builds

- [Michael Osipov brought this change]

  configure: call it GSS-API
  
  ... since that’s how the RFC calls it.

- x509asn: moved out Curl_verifyhost from NSS builds
  
  ... as it isn't used then!

- NSS: avoid compiler warnings when built without http2 support

- [Jiri Malak brought this change]

  Rework Open Watcom make files to use standard Wmake features
  
  Remove slash/backslash problem, now only slashes are used,
  Wmake automaticaly translate slash/backslash to proper version or tools are not sensitive for it.
  Enable spaces in path.
  Use internal rm command for all host platforms
  Add error message if old Open Watcom version is used. Some old versions exhibit build problems for Curl latest version. Now only versions 1.8, 1.9 and 2.O beta are supported

- [Jiri Malak brought this change]

  parsedate: Fixed compilation warning
  
  Remove compilation message for platforms where size of long type
  is equal size of int type.

Steve Holme (2 Mar 2014)
- RELEASE-NOTES: Synced with 7fef4016de

- tool: Do not output libcurl source for the information only parameters
  
  Ensure a source file isn't generated for the following informational
  command line parameters when --libcurl is specified:
  
  --help, --manual, --version and --engine list
  
  As the output would only include a fairly empty looking main() function
  and a call to curl_easy_init() and curl_easy_cleanup() when performed
  with --engine list.

- tool: Fixed libcurl source output for multiple operations
  
  Correctly output libcurl source code that includes multiply operations
  as specified by --next. Note that each operation evaluates to a single
  curl_easy_perform() in source code form.
  
  Also note that the output could be optimised a little so global config
  options are only output once rather than per operation as is presently
  the case.

- tool_metalink.h: Fixed compilation warning
  
  warning: declaration of 'struct GlobalConfig' will not be visible
  outside of this function

- tool: Moved internal variable isatty to the global config

- tool_operate.c: Fixed compilation error
  
  incompatible types - from 'OperationConfig *' to 'GlobalConfig *'

- tool: Moved --libcurl to the global config

- tool: Moved --progress-bar to the global config

- tool: Moved --stderr to the global config

- transfer.c: Fixed non-HTTP2 builds from commit cde0cf7c5e

Daniel Stenberg (28 Feb 2014)
- [Tatsuhiro Tsujikawa brought this change]

  Fix bug that HTTP/2 hangs if whole response body is read with headers
  
  For HTTP/2, we may read up everything including responde body with
  header fields in Curl_http_readwrite_headers. If no content-length is
  provided, curl waits for the connection close, which we emulate it
  using conn->proto.httpc.closed = TRUE. The thing is if we read
  everything, then http2_recv won't be called and we cannot signal the
  HTTP/2 stream has closed. As a workaround, we return nonzero from
  data_pending to call http2_recv.

- http2: build with current nghttp2 version
  
  nghttp2 has yet again extended its callback struct and this is an
  attempt to make curl compile with nghttp2 from current git

Dan Fandrich (28 Feb 2014)
- tool_main: Fixed a memory leak on main_init error

Steve Holme (28 Feb 2014)
- test96: Updated accordly for recent changes

- tool_cfgable: Code policing of structure pointers

- tool: Moved --trace and --verbose to the global config

- tool_main: Forgot to initialise the first operation's global pointer

- tool: Moved --silient to the global config
  
  Other global options such as --libcurl, --trace and --verbose to
  follow.

- tool_cfgable: Added GlobalConfig pointer to OperationConfig
  
  In order to ease the moving of global options such as the error stream,
  updated the OperationConfig structure to point to the GlobalConfig.

- tool: Added support to .curlrc for URL specific options
  
  In addition to adding support for URL specific options via the command
  line with --next it is now possible to specify "next" in .curlrc.

- tool: Reworked argument parsing to use --next/-:
  
  Follow up to commit 1a9b58fcb2 to replace the : command line option
  with --next and -:.

- tool_getparam: Added initial support for --next/-:
  
  Added initial support for --next/-: which will be used to replace the
  rather confusing : command line operation what was used for the URL
  specific options prototype.

Dan Fandrich (26 Feb 2014)
- valgrind.supp: tweaked a test 165 suppression
  
  A recent change seems to have slightly changed the call stack
  produced by the gcc optimizer.

nickzman (25 Feb 2014)
- Merge pull request #93 from d235j/darwinssl_ip_address_fix
  
  darwinssl: don't omit CN verification when an IP address is used

Daniel Stenberg (25 Feb 2014)
- parse_args: fix a too long source code line

- [naota brought this change]

  configure: Tiny fix to honor POSIX
  
  Change "==" to "=" to honor POSIX test construction.

Steve Holme (25 Feb 2014)
- tool_help: Moved --no-alpn and --no-npn to be listed alphabetically
  
  ...and added the HTTP suffix as these options are only used for HTTP2
  based connections.

- tool: Moved --showerror to the global config
  
  Other global options such as --libcurl, --trace and --verbose to
  follow.

- tool_getparam: Added global config to getparameter()
  
  In preparation for parsing global options added the GlobalConfig
  structure to the getparameter() function.

- tool_getparam.h: Fixed compilation warning
  
  warning: declaration of 'struct GlobalConfig' will not be visible
  outside of this function

Marc Hoersken (24 Feb 2014)
- RELEASE-NOTES: Updated for 63fc8ee7

Steve Holme (24 Feb 2014)
- tool_cfgable: Added support for knowing the current operation

Marc Hoersken (24 Feb 2014)
- curl_schannel.c: Updated copyright years

- [David Ryskalczyk brought this change]

  winssl: Enable hostname verification of IP address using SAN or CN
  
  Original commit message was:
   Don't omit CN verification in SChannel when an IP address is used.
  
  Side-effect of this change:
   SChannel and CryptoAPI do not support the iPAddress subjectAltName
   according to RFC 2818. If present, SChannel will first compare the
   IP address to the dNSName subjectAltNames and then fallback to the
   most specific Common Name in the Subject field of the certificate.
  
   This means that after this change curl will not connect to SSL/TLS
   hosts as long as the IP address is not specified in the SAN or CN
   of the server certificate or the verifyhost option is disabled.

Steve Holme (24 Feb 2014)
- tool_operate: Moved easy handle cleanup into tool_main

Marc Hoersken (24 Feb 2014)
- tool_hugehelp: partially reverted 24e22e10
  
  Compilation was not possible if manuel is disabled due this error:
   error: macro "hugehelp" passed 1 arguments, but takes just 0
    void hugehelp(void) {}

Steve Holme (24 Feb 2014)
- tool_main: Moved easy handle into global config structure

David Ryskalczyk (23 Feb 2014)
- Don't omit CN verification in DarwinSSL when an IP address is used.

Steve Holme (23 Feb 2014)
- tool: Fixed line longer than 79 characters from commit 705a4cb549

- tool_main: Corrected typo from commit d6b9f054e9 in Symbian code

- tool_main: Moved OperateConfig cleanup into main_free()

- tool_main: Moved initial OperateConfig creation into main_init()

- tool_cfgable: Added global config structure

- tool_cfgable: Renamed Configurable structure to OperationConfig
  
  To allow for the addition of a global config structure and prevent
  confusion between the two.

- tool: Fixed incorrect return code with --version from commit c10bf9bb36

- RELEASE-NOTES: Synced with 8c80840d01

- tool_getparam: Moved tool_help() call into operate()

- tool_getparam: Moved hugehelp() call into operate()

- tool_getparam: Moved tool_version_info() call into operate()

- tool_cfgable: Removed list_engine flag from config structure
  
  In preparation for separating the global config options from the per
  operation config options, reworked the list engines code to not use a
  member variable in the Configurable structure.

- tool_operate: Start to use CURLcode rather than int for return codes
  
  To help assist with the detection of incorrect return codes, as per
  commits ee23d13a79, 33b8960dc8 and aba98991a5, updated the operate
  based functions to return CURLcode error codes.

- tool: Fixed incorrect return code when setting HTTP request fails
  
  During initialisation SetHTTPrequest() may fail and cURL would return
  PARAM_BAD_USE, which is equivalent to CURLE_NOT_BUILT_IN in cURL error
  terms.
  
  Instead, return CURLE_FAILED_INIT as we do for other functions that may
  fail during initialisation.

- tool_getparam: Moved version information into separate function in tool_help

- tool_operhlp.h: Fixed compilation warning
  
  warning: 'struct Configurable' declared inside parameter list

- tool_operhlp: Consolidated engine output code into tool_help

- tool_operate: Moved list engines into separate function in tool_help

Marc Hoersken (22 Feb 2014)
- RELEASE-NOTES: added note about impact of changes to WinSSL defaults

- stunnel: regenerated self-signed test certificate with SHA1 hash
  
  The previous test certificate contained a MD5 hash which is not
  supported using TLSv1.2 with Schannel on Windows 7 or newer.
  
  See the update to this blog post on IEInternals / MSDN:
  http://blogs.msdn.com/b/ieinternals/archive/2011/03/25/
  misbehaving-https-servers-impair-tls-1.1-and-tls-1.2.aspx
  
  "Update: If the server negotiates a TLS1.2 connection with a
  Windows 7 or 8 schannel.dll-using client application, and it
  provides a certificate chain which uses the (weak) MD5 hash
  algorithm, the client will abort the connection (TCP/IP FIN)
  upon receipt of the certificate."

Dan Fandrich (22 Feb 2014)
- easy: Fixed a memory leak on OOM condition

Steve Holme (20 Feb 2014)
- tool_paramhlp: Fixed compilation warnings
  
  declaration of 'index' shadows a global declaration

- lib1515.c: Fixed #include path in commit 647f83e809

Daniel Stenberg (19 Feb 2014)
- [Maks Naumov brought this change]

  test1515: fix compilation with msvc
  
  ... or any other systems lacking a native snprintf

- SFTP: skip reading the dir when NOBODY=1
  
  When asking for an SFTP directory with NOBODY set, no directory contents
  should be retrieved.
  
  Bug: http://curl.haxx.se/mail/lib-2014-02/0155.html

Dan Fandrich (18 Feb 2014)
- axtls: comment the call ssl_read repeatedly loop

Kamil Dudka (18 Feb 2014)
- curl.1: update the description of --tlsv1
  
  ... and mention the --tlsv1.[0-2] options in the --tslv1 entry
  
  Reported-by: Hubert Kario

Daniel Stenberg (18 Feb 2014)
- curl_version.3: recommend using curl_version_info() instead

- curl_version_info.3: added *HTTP2
  
  ... and edited language slightly

- curl_multi_assign.3: updated language

- libcurl.3: edited slightly to improve readability

- curl_easy_perform.3: extended and clarified

- curl_multi_add_handle.3: clarify multi vs easy use
  
  it is only WHILE added to a multi handle that it can't be used with the
  easy interface

- [Tatsuhiro Tsujikawa brought this change]

  http2: Support HTTP POST/PUT
  
  This patch enables HTTP POST/PUT in HTTP2.
  We disabled Expect header field and  chunked transfer encoding
  since HTTP2 forbids them.
  In HTTP1, Curl sends small upload data with request headers, but
  HTTP2 requires upload data must be in DATA frame separately.
  So we added some conditionals to achieve this.

- RELEASE-NOTES: synced with 854aca5420f

- multi: ignore sigpipe internally
  
  When the multi API is used we must also ignore SIGPIPE signals when
  caused by things we do, like they can easily be generated by OpenSSL.

Dan Fandrich (17 Feb 2014)
- tests: Made the crypto test feature usable
  
  This feature specifies the availability of cryptographic
  authentication, which can be disabled at compile-time

- configure: Fix the --disable-crypto-auth option
  
  It now disables NTLM and GSS authentication methods, and produces
  compilable code when SSL is enabled.

Daniel Stenberg (17 Feb 2014)
- curl_multi_setopt.3: clarify CURLMOPT_MAXCONNECTS

- [Shao Shuchao brought this change]

  ConnectionDone: default maxconnects to 4 x number of easy handles
  
  ... as documented!

- examples: remove all use of CURLM_CALL_MULTI_PERFORM
  
  ... since it is never returned since a long while back.

- [Colin Hogben brought this change]

  curl_easy_setopt.3: Add another non-matching hostname
  
  For the avoidance of doubt, show a domain which contains the no-proxy
  pattern but not at the top level.

- axtls: bump copyright year

- [Fabian Frank brought this change]

  axtls: call ssl_read repeatedly
  
  Perform more work in between sleeps. This is work around the
  fact that axtls does not expose any knowledge about when work needs
  to be performed. Depending on connection and how often perform is
  being called this can save ~25% of time on SSL handshakes (measured
  on 20ms latency connection calling perform roughly every 10ms).

- [Yehezkel Horowitz brought this change]

  url_easy_setopt.3: Add undocumented values of curl_infotype
  
  ... for debug function

- ConnectionExists: re-use connections better
  
  When allowing NTLM, the re-use connection logic was too focused on
  finding an existing NTLM connection to use and didn't properly allow
  re-use of other ones. This made the logic not re-use perfectly re-usable
  connections.
  
  Added test case 1418 and 1419 to verify.
  
  Regression brought in 8ae35102c (curl 7.35.0)
  
  Reported-by: Jeff King
  Bug: http://thread.gmane.org/gmane.comp.version-control.git/242213

Steve Holme (16 Feb 2014)
- tool_paramhlp: Added URL index to password prompt for multiple operations

Marc Hoersken (16 Feb 2014)
- sockfilt.c: add undefs which are required after 6239146e

Steve Holme (16 Feb 2014)
- warnless: Updated copyright year for recent changes

Marc Hoersken (16 Feb 2014)
- warnless: add wrapper function for read and write on Windows

Steve Holme (16 Feb 2014)
- examples: Added IMAP LSUB example

- tool_operate: Changed the required argument check/get to be upfront
  
  Rather than check for required arguments, and prompt for any host and
  proxy passwords, as each operation is performed, changed the code so
  all configurations are checked before any operations are performed.
  
  This allows the user to input all the required passwords, for example,
  upfront rather than wait for each operation.

- tool_operate: Moved required argument getting into separate function

Dan Fandrich (15 Feb 2014)
- valgrind: added another test 165 suppression
  
  This one is needed with the gcc options -fstack-protector-all -O2
  That brings the number of suppressions for test 165 to four, and I
  suspect I could find another two missing without trying very hard. I'm
  beginning to think suppressions isn't the best way to handle these
  kinds of cases.

Marc Hoersken (15 Feb 2014)
- testsuite: more Windows line-endings fixes

- test1114: fix line-endings checks on Windows after 75f00de

- test1113: fix line-endings checks on Windows after 75f00de5

- lib1515.c: Added support for Windows using the Sleep function

- HTTP tests: use CRLF as header seperator according to RFC 2616
  
  Updates the test suite to handle binary-mode header output.

- curl: output protocol headers using binary mode
  
  Since protocol headers contain explicit line-endings there should
  be no automatic conversion to ASCII text or CRLF line-endings.
  
  This might break third party tools that already depend on this
  behaviour. We might need to introduce an option to make this optional.

- HTTP tests: use CRLF as header seperator according to RFC 2616
  
  Changes LF to CRLF and disables automatic output conversion.

- testsuite: use binary output mode for custom curl test tools
  
  Do not try to convert line-endings to CRLF on Windows by setting stdout
  to binary mode, just like the curl tool does if --ascii is not specified.
  
  This should prevent corrupted stdout line-ending output like CRCRLF.
  
  In order to make the previously naive text-aware tests work with
  binary mode on Windows, text-mode is disabled for them if it is not
  actually part of the test case and line-endings are corrected.

- testsuite: changed HTTP and RTSP header line-endings to CRLF
  
  According to RFC 2616 and RFC 2326 individual protocol elements, like
  headers and except the actual content, are terminated by using CRLF.
  
  Therefore the test data files for these protocols need to contain
  mixed line-endings if the actual protocol elements use CRLF while
  the file uses LF.

Daniel Stenberg (14 Feb 2014)
- [Colin Hogben brought this change]

  curl_easy_setopt.3: Fix word order of CURLOPT_PROXY section
  
  The word CURLOPT_PROXYPORT became detached from its sentence when the
  note about the default was added.

Patrick Monnerat (14 Feb 2014)
- OS400: Add new options to RPG binding.

Dan Fandrich (14 Feb 2014)
- valgrind: added suppression on optimized code
  
  gcc 4.7.2 with -O2 will optimize Curl_connect by inlining some
  functions two levels deep, which makes the valgrind suppression
  fail to match. The underlying reason for these idna suppressions is
  a gcc strlen optimization when compiling libidn; compiling it with
  -fno-builtin-strlen makes this suppression unnecessary.

Daniel Stenberg (14 Feb 2014)
- [Arvid Norberg brought this change]

  dict: fix memory leak in OOM exit path
  
  Bug: https://github.com/bagder/curl/pull/90

- Curl_urldecode: don't allow NULL as receiver
  
  For a function that returns a decoded version of a string, it seems
  really strange to allow a NULL pointer to get passed in which then
  prevents the decoded data from being returned!
  
  This functionality was not documented anywhere either.
  
  If anyone would use it that way, that memory would've been leaked.
  
  Bug: https://github.com/bagder/curl/pull/90
  Reported-by: Arvid Norberg

- RELEASE-NOTES: synced with 378af08c992

- ConnectionExists: reusing possible HTTP+NTLM connections better
  
  Make sure that the special NTLM magic we do is for HTTP+NTLM only since
  that's where the authenticated connection is a weird non-standard
  paradigm.
  
  Regression brought in 8ae35102c (curl 7.35.0)
  
  Bug: http://curl.haxx.se/mail/lib-2014-02/0100.html
  Reported-by: Dan Fandrich

- [Tiit Pikma brought this change]

  transfer: make Expect: 100-continue timeout configurable.
  
  Replaced the #define CURL_TIMEOUT_EXPECT_100 in transfer.c with the
  CURLOPT_EXPECT_100_TIMEOUT_MS option to make the timeout configurable.

- [Thomas Braun brought this change]

  Fix compilation with make mingw32
  
  The source files from lib/vtls where generated in lib instead of lib/vtls.
  
  Verified-by: Thomas Braun <thomas.braun@virtuell-zuhause.de>

- chunked decoder: track overflows correctly
  
  The code didn't properly check the return codes to detect overflows so
  it could trigger incorrectly. Like on mingw32.
  
  Regression introduced in 345891edba (curl 7.35.0)
  
  Bug: http://curl.haxx.se/mail/lib-2014-02/0097.html
  Reported-by: LM

- [Fabian Frank brought this change]

  curl_easy_setopt.3: add CURL_HTTP_VERSION_2_0

- [Fabian Frank brought this change]

  openssl: honor --[no-]alpn|npn command line switch
  
  Disable ALPN or NPN if requested by the user.

- [Fabian Frank brought this change]

  gtls: honor --[no-]alpn command line switch
  
  Disable ALPN if requested by the user.

Dan Fandrich (11 Feb 2014)
- tests: Disabled broken test 1316
  
  See http://curl.haxx.se/mail/lib-2014-02/0004.html for a
  discussion on the problem.

Daniel Stenberg (11 Feb 2014)
- version: next release will become 7.36.0

- curl_easy_setopt.3: add CURLOPT_SSL_ENABLE_ALPN/NPN

Steve Holme (10 Feb 2014)
- tool_cfgable: Moved easy handle cleanup to fix pingpong logout issues
  
  Commmit c5f8e2f5f4 removed the easy handle clean-up from tool_operate,
  letting the code that was already present in free_config_fields()
  perform the task. Unfortunately, this wasn't the correct place to do
  this as it broke protocols, that would perform a logout, as the main
  clean-up in tool_main had already been called.

Dan Fandrich (10 Feb 2014)
- secureserver: Only set stunnel FIPS option when available
  
  It seems the fips config option causes an error if FIPS mode was
  not enabled at stunnel compile-time.  FIPS support was disabled
  by default in stunnel 5.00, so this is probably really only needed
  on versions between 4.32 and 5.00.

Daniel Stenberg (10 Feb 2014)
- [Fabian Frank brought this change]

  NPN/ALPN: allow disabling via command line
  
  when using --http2 one can now selectively disable NPN or ALPN with
  --no-alpn and --no-npn. for now honored with NSS only.
  
  TODO: honor this option with GnuTLS and OpenSSL

- [Fabian Frank brought this change]

  nss: use correct preprocessor macro
  
  SSL_ENABLE_ALPN can be used for preprocessor ALPN feature detection,
  but not SSL_NEXT_PROTO_SELECTED, since it is an enum value and not a
  preprocessor macro.

Steve Holme (9 Feb 2014)
- tests: Added test for IMAP LSUB command

- tests: Removed test 807 as it has been superseded by tests 815 and 816

- tests: Updated the titles of tests 815 and 816

Daniel Stenberg (9 Feb 2014)
- tool_metalink: fix compiler warning when built without metalink

Steve Holme (9 Feb 2014)
- tool_operate: Move the trace and error file closure to tool_cfgable

- TODO: Removed url-specific options

- tests: Re-enabled IMAP tests that require URL specific option support

- RELEASE-NOTES: Synced with 8e62f7a6503a

Marc Hoersken (9 Feb 2014)
- secureserver: FIPS option is only supported since stunnel 5.00

Steve Holme (9 Feb 2014)
- tool_operate: Added support for performing URL specific operations

- tool_operate: Let curl handle cleanup take place in config_free()

Dan Fandrich (9 Feb 2014)
- formdata: Must use Curl_safefree instead of free

Daniel Stenberg (8 Feb 2014)
- test96: updated according to recent changes

- runtests: allow <strippart> to remove lines
  
  For verify file, if the strippart condition removes the line completely
  it is now removed from the array.

Steve Holme (8 Feb 2014)
- tool_getparam: Added support for parsing of specific URL options

Dan Fandrich (8 Feb 2014)
- secureserver: Disable FIPS mode for stunnel
  
  It's unnecessary for curl testing, and it can otherwise cause
  stunnel to fail to start if OpenSSL doesn't support FIPS mode.

- formdata: Fixed memory leak on OOM condition

- runtests: Disable valgrind when debugging
  
  This was already mostly being done, except that analysis after the
  test still assumed that the valgrind log files would be available. An
  alternative way to handle the valgrind + gdb combination could be to
  enable one of the valgrind debugger hooks.

Steve Holme (7 Feb 2014)
- tool_cfgable: For consistency renamed init_config() to config_init()

- tool_cfgable: Introduced config_free() function

Daniel Stenberg (7 Feb 2014)
- --help: add missing --tlsv1.x options

Steve Holme (7 Feb 2014)
- lib1515.c: Fixed various compilation warnings
  
  lib1515.c:38:26 warning: unused parameter 'curl'
  lib1515.c:38:81 warning: unused parameter 'ptr'
  lib1515.c:38:5 warning: no previous prototype for 'debug_callback'
  lib1515.c:46:5 warning: no previous prototype for 'do_one_request'
  lib1515.c:120:3  warning: ISO C90 forbids mixed declarations and code
  
  As well as some code policing such as white space and braces.

Daniel Stenberg (7 Feb 2014)
- http2: updated README after NSS addition
  
  Changed the support to a little matrix and added brief explanation of
  what ALPN and NPN are for.

- nss: support pre-ALPN versions

- [Fabian Frank brought this change]

  nss: ALPN and NPN support
  
  Add ALPN and NPN support for NSS. This allows cURL to negotiate
  HTTP/2.0 connections when built with NSS.

- formpost: use semicolon in multipart/mixed
  
  Not comma, which is an inconsistency and a mistake probably inherited
  from the examples section of RFC1867.
  
  This bug has been present since the day curl started to support
  multipart formposts, back in the 90s.
  
  Reported-by: Rob Davies
  Bug: http://curl.haxx.se/bug/view.cgi?id=1333

Dan Fandrich (6 Feb 2014)
- tests: Document use of the MEMDEBUG_LOG_SYNC macro

- ssh: Fixed a NULL pointer dereference on OOM condition

Steve Holme (6 Feb 2014)
- nss: Updated copyright year for recent edits

Daniel Stenberg (6 Feb 2014)
- [Remi Gacogne brought this change]

  100-continue: fix timeout condition
  
  When using the multi socket interface, libcurl calls the
  curl_multi_timer_callback asking to be woken up after
  CURL_TIMEOUT_EXPECT_100 milliseconds.
  
  After the timeout has expired, calling curl_multi_socket_action with
  CURL_SOCKET_TIMEOUT as sockfd leads libcurl to check expired
  timeouts. When handling the 100-continue one, the following check in
  Curl_readwrite() fails if exactly CURL_TIMEOUT_EXPECT_100 milliseconds
  passed since the timeout has been set!
  
  It seems logical to consider that having waited for exactly
  CURL_TIMEOUT_EXPECT_100 ms is enough.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1334

- [Fabian Frank brought this change]

  nss: prefer highest available TLS version
  
  Offer TLSv1.0 to 1.2 by default, still fall back to SSLv3
  if --tlsv1[.N] was not specified on the command line.

- [Romulo A. Ceccon brought this change]

  tests: add test for bug #1327 (dns cache timeout)
  
  Fix for bug #1303 (030a2b8cb) was not complete.
  libcurl still pruned DNS entries added manually
  after detecting a dead connection. This test
  checks such behavior.

- [Romulo A. Ceccon brought this change]

  tests: add test for bug #1303 (dns cache timeout)
  
  Test-case 1515 reproduces bug #1303, where libcurl
  would incorrectly prune DNS entries added via
  CURLOPT_RESOLVE after the DNS_CACHE_TIMEOUT had
  expired.

- http2: spell fixed README and added version requirement

Steve Holme (6 Feb 2014)
- tool_operate: Removed unused argument parameters from operate_do()

- tool_operate: Moved list SSL engines code into operate()

- tool_operate: Moved argument parsing into operate()

Daniel Stenberg (5 Feb 2014)
- runtests: add suppression generator help
  
  Leave the valgrind --gen-suppressions option in there, commented, to
  make it easier for next update.

- valgrind: updated suppressions file
  
  The call stack was modified in 2dc7ad23 so the supressions didn't work
  anymore.

- runtests: detect 'ares' better
  
  ... caused false detections of the threaded resolver otherwise

Steve Holme (5 Feb 2014)
- tool_operate: Moved .curlrc parsing code into operate()

- tool_operate: Moved locale setup code into operate_init()

Daniel Stenberg (5 Feb 2014)
- http2: minor update of the README

- [Fabian Frank brought this change]

  http2: rely on content-encoding header
  
  A server might respond with a content-encoding header and a response
  that was encoded accordingly in HTTP-draft-09/2.0 mode, even if the
  client did not send an accept-encoding header earlier. The server might
  not send a content-encoding header if the identity encoding was used to
  encode the response.
  
  See:
  http://tools.ietf.org/html/draft-ietf-httpbis-http2-09#section-9.3

Dan Fandrich (4 Feb 2014)
- tool_operate: shortened too-long source line

Steve Holme (4 Feb 2014)
- tool_operate: Introduced operate_free() function

- tool_operate: Introduced operate_init() function

- tool_operate: Introduced new operate() function

Daniel Stenberg (4 Feb 2014)
- http2: enforce gzip auto-decompress
  
  As this is mandated by the http2 spec draft-09

- [Tatsuhiro Tsujikawa brought this change]

  http2: handle incoming data larger than remaining buffer

- [Tatsuhiro Tsujikawa brought this change]

  http2: Check stream ID we are interested in

- [Tatsuhiro Tsujikawa brought this change]

  http2: store response header in temporary buffer

- [Tatsuhiro Tsujikawa brought this change]

  HTTP2: add layer between existing http and socket(TLS) layer
  
  This patch chooses different approach to integrate HTTP2 into HTTP curl
  stack. The idea is that we insert HTTP2 layer between HTTP code and
  socket(TLS) layer. When HTTP2 is initialized (either in NPN or Upgrade),
  we replace the Curl_recv/Curl_send callbacks with HTTP2's, but keep the
  original callbacks in http_conn struct. When sending serialized data by
  nghttp2, we use original Curl_send callback. Likewise, when reading data
  from network, we use original Curl_recv callback. In this way we can
  treat both TLS and non-TLS connections.
  
  With this patch, one can transfer contents from https://twitter.com and
  from nghttp2 test server in plain HTTP as well.
  
  The code still has rough edges. The notable one is I could not figure
  out how to call nghttp2_session_send() when underlying socket is
  writable.

- [Fabian Frank brought this change]

  gtls: add ALPN support
  
  Add ALPN support when using GnuTLS >= 3.2.0. This allows
  libcurl to negotiate HTTP/2.0 for https connections when
  built with GnuTLS.
  
  See:
  http://www.gnutls.org/manual/gnutls.html#Application-Layer-Protocol-Negotiation-_0028ALPN_0029
  http://tools.ietf.org/html/draft-ietf-tls-applayerprotoneg-04

Steve Holme (3 Feb 2014)
- tool_operate: Moved libcurl information gathering to tool_main

Daniel Stenberg (3 Feb 2014)
- [Fabian Frank brought this change]

  openssl: add ALPN support
  
  Add ALPN support when using OpenSSL. This will offer ALPN and NPN to the
  server, who can respond with either one or none of the two. OpenSSL >=
  1.0.2 is required, which means as of today obtaining a snapshot from
  ftp://ftp.openssl.org/snapshot/.
  
  See:
  http://tools.ietf.org/html/draft-ietf-tls-applayerprotoneg-04
  https://github.com/openssl/openssl/blob/ba168244a14bbd056e502d7daa04cae4aabe9d0d/ssl/ssl_lib.c#L1787

Steve Holme (3 Feb 2014)
- tool_operate: Moved command line argument parsing into separate function

- tool_operate: Simplified parse .curlrc decision logic

- tool_operate: Moved main initialisation and cleanup code into tool_main

- tool_main: Fixed compilation warning from commit 0104678c79
  
  no previous prototype for function 'memory_tracking_init'

- tool_main: Changed stack based config struct to be heap based

Dan Fandrich (3 Feb 2014)
- tests: Moved some comments so the test data files parse as XML

Steve Holme (2 Feb 2014)
- tool_operate: Moved memory tracking initialisation into tool_main

- tests: Fixed test172 cookie expiry
  
  The test contains a cookie jar file where one of the cookies has an
  expiry date of 1391252187 -- Sat, 1 Feb 2014 10:56:27 GMT which has
  now expired. Updated to Wed, 14 Oct 2037 16:36:33 GMT as per test
  179.
  
  Reported-by: Adam Sampson
  Bug: http://curl.haxx.se/bug/view.cgi?id=1330

- tool_operate: Moved initial config setup into new init_config() function

- tool_main: Moved config struct initialisation into a separate function
  
  In preparation for adding URL specific options moved the initialisation
  of the Configurable structure into a separate function in tool_cfgable.

Marc Hoersken (1 Feb 2014)
- test 500: workaround low timer resolution on Windows
  
  Since the timer resolution is lower, there are actually cases that
  the compared values are equal. Therefore we check for previous
  timestamps being greater than the current one instead.

- test suite: stop conversion of valid output to CRLF on Windows
  
  Since the output isn't actually being written in text-mode and it
  was rather used as a workaround, disable text-mode for these tests.

- HTTP tests: use CRLF as header seperator according to RFC 2616

- FTP tests: enable text-mode for more datacheck sections

- FTP tests: enable text-mode for data and datacheck sections

- runtests.pl: added support for text-mode within datacheck section

- ftpserver.pl: directory LISTings use [CR][LF] for ASCII transfer
  
  According to section 2.2 of RFC959 the End-of-Line is defined as:
   The end-of-line sequence defines the separation of printing
   lines.  The sequence is Carriage Return, followed by Line Feed.
  
  Verified by sniffing traffic between a Windows FTP client (FileZilla)
  and Unix-hosted FTP server (ProFTPD).

- runtests.pl: reverse line-ending conversion on Windows
  
  It makes more sense to convert the expected output to [CR][LF] on
  Windows than to force the actual, probably correct, output to [LF].
  
  This way it is actually possible to see if curl outputs the correct
  line-ending excepted by a text-aware test case.

- winssl: improved default SSL/TLS protocol selection
  
  For some reason Windows 7 SP1 chooses TLS 1.0 instead of TLS 1.2
  if it is not explicitly enabled within grbitEnabledProtocols.
  
  More information can be found on MSDN:
  http://msdn.microsoft.com/library/windows/desktop/aa379810.aspx

Steve Holme (31 Jan 2014)
- INSTALL: Corrected mentioned version number as release 7.34.1 became 7.35.0

- RELEASE-NOTES: Synced with 0f213fdca1

Dan Fandrich (31 Jan 2014)
- pipeline: Fixed a NULL pointer dereference on OOM

- tests: make the authorization retry tests pass the torture tests

- ftp: fixed a memory leak on wildcard error path

- netrc: Fixed a memory leak in an OOM condition

Steve Holme (30 Jan 2014)
- ntlm: Fixed a memory leak when using NTLM with a proxy server

- tests: Missed updating a type-3 message in commit 1c9aaa0bac

Daniel Stenberg (30 Jan 2014)
- http2: fix size check in on_data_chunk_recv

- http2: add CRLF when first data arrives

Steve Holme (30 Jan 2014)
- tests: Updated NTLM tests for NTLMv2 type-3 message

Daniel Stenberg (30 Jan 2014)
- [Tatsuhiro Tsujikawa brought this change]

  http2_recv: Return written length on CURLE_AGAIN

- [Tatsuhiro Tsujikawa brought this change]

  http2: Use nghttp2_session_mem_recv and nghttp2_session_upgrade

- http2: call it "HTTP 2" and not 2.0
  
  The minor version will be dropped for HTTP 2 so it will make sense to
  avoid using it in option names etc.

- http2: basic version of receiving DATA

- http2: convert HEADER frames to HTTP1-like headers
  
  ... and then go through the "normal" HTTP engine.

- http2: fix EWOULDBLOCK in recv_callback()

- http2: do the POST Upgrade dance properly

Steve Holme (30 Jan 2014)
- ntlm: Use static client nonce for the test suite

Daniel Stenberg (30 Jan 2014)
- http2.h: provide empty macros for non-http2 builds

- [Fabian Frank brought this change]

  http2: switch into http2 mode if NPN indicates
  
  Check the NPN result before preparing an HTTP request and switch into
  HTTP/2.0 mode if necessary. This is a work in progress, the actual code
  to prepare and send the request using nghttp2 is still missing from
  Curl_http2_send_request().

- http2: s/Curl_http2_request/Curl_http2_request_upgrade
  
  To better reflect its purpose

- http2-openssl: verify that NPN functionality is present

- [Fabian Frank brought this change]

  openssl: set up hooks with to perform NPN
  
  NPN is what is available in the wild today to negotiate SPDY or HTTP/2.0
  connections. It is expected to be replaced by ALPN in the future. If
  HTTP/2.0 is negotiated, this is indicated for the entire connection and
  http.c is expected to initialize itself for HTTP/2.0 instead of
  HTTP/1.1.
  
  see:
  http://technotes.googlecode.com/git/nextprotoneg.html
  http://tools.ietf.org/html/draft-ietf-tls-applayerprotoneg-04

- http2: added stubs for all nghttp2 callbacks
  
  This makes it easier to trace what's happening.

- http2: use FIRSTSOCKET instead of 0 to index the sockets array

- http2: receive and log the received header frames

- http2_recv: log nghttp2 return codes for debugging purposes

- HTTP2: reject nghttp2 versions before 0.3.0

- [Gisle Vanem brought this change]

  http2: adjusted to newer nghttp2_session_callbacks struct
  
  the number of elements in the 'nghttp2_session_callbacks' structure is
  now reduced by 2 in version 0.3.0 (I'm not sure when the change
  happened, but checking for ver 0.3.0 work for me).

- [Gisle Vanem brought this change]

  HTTP2: Wrong NgHTTP2 user-data
  
  Something is wrong in 'userp' for the HTTP2 recv_callback().  The
  session is created using bogus user-data; '&conn' and not 'conn'.
  
  I noticed this since the socket-value in Curl_read_plain() was set to a
  impossible high value.

- NTLM: error: conversion to 'int' from 'long int' may alter its value
  
  Fixed two compiler nits

Steve Holme (29 Jan 2014)
- ntlm: Coding style policing dating back to 2011

- ntlm: Use a timestamp of 01/01/1970 for the test suite

- ntlm: Updated Curl_ntlm_core_mk_ntlmv2_resp() to use local variables
  
  ...until the function is successful when it returns them in the out
  parameters.

- ntlm: Added cross platform support for writing NTLMv2 timestamp in buffer
  
  Added conversion functions write32_le() and write64_le() to ensure the
  NTLMv2 timestamp is always written in little-endian.

- [Prash Dush brought this change]

  ntlm: Added support for NTLMv2

Kamil Dudka (29 Jan 2014)
- nss: do not use the NSS_ENABLE_ECC define
  
  It is not provided by NSS public headers.
  
  Bug: https://bugzilla.redhat.com/1058776

- nss: do not fail if NSS does not implement a cipher
  
  ... that the user does not ask for

Daniel Stenberg (29 Jan 2014)
- http2: switch recv/send functions to http2 ones after 101

- http2: handle 101 responses and switch to HTTP2

- examples: gitignore more binaries

- bump: start working on 7.35.1

- THANKS: 19 new contributors from the 7.35.0 release notes

Version 7.35.0 (29 Jan 2014)

Daniel Stenberg (29 Jan 2014)
- RELEASE-NOTES: done for 7.35.0

Dan Fandrich (29 Jan 2014)
- tests: make a few lib15?? tests pass the OOM torture tests

- lib1900: make the test pass the OOM torture tests

- oauth2: Fixed a memory leak in an OOM condition

- unit1304: make the test pass the OOM torture tests

- unit1396: make the test pass the OOM torture tests

Daniel Stenberg (28 Jan 2014)
- [Romulo A. Ceccon brought this change]

  hostip: don't remove DNS entries that are in use
  
  hostcache_timestamp_remove() should remove old *unused* entries from the
  host cache, but it never checked whether the entry was actually in
  use. This complements commit 030a2b8cb.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1327

Dan Fandrich (28 Jan 2014)
- RELEASE-NOTES: changed encoding to UTF-8 like previous releases

Daniel Stenberg (28 Jan 2014)
- TFTP: fix crash on time-out
  
  tftp_done() can get called with its TFTP state pointer still being NULL
  on an early time-out, which caused a segfault when dereferenced.
  
  Reported-by: Glenn Sheridan
  Bug: http://curl.haxx.se/mail/lib-2014-01/0246.html

Steve Holme (28 Jan 2014)
- RELEASE-NOTES: Synced with 5a47062cada9

Daniel Stenberg (28 Jan 2014)
- [Maks Naumov brought this change]

  getpass: fix password parsing from console
  
  Incorrect password if use backspace while entered the password.
  
  Regression from f7bfdbabf2d5398f4c266eabb0992a04af661f22
  
  The '?:' operator has lower priority than the '-' operator

Dan Fandrich (26 Jan 2014)
- docs/INSTALL: Updated example minimal binary sizes

Marc Hoersken (26 Jan 2014)
- testsuite: visualize line-endings in output comparison diffs

- sockfilt.c: follow up cleanup commit on 49b63cf3

- http-pipe tests: use text as output data mode to support Windows

- sockfilt.c: fixed and simplified Windows select function
  
  Since the previous complex select function with initial support for
  non-socket file descriptors, did not actually work correctly for
  Console handles, this change simplifies the whole procedure by using
  an internal waiting thread for the stdin console handle.
  
  The previous implementation made it continuously trigger for the stdin
  handle if it was being redirected to a parent process instead of
  an actual Console input window.
  
  This approach supports actual Console input handles as well as
  anonymous Pipe handles which are used during input redirection.
  
  It depends on the fact that ReadFile supports trying to read zero bytes
  which makes it wait for the handle to become ready for reading.

- http_pipe.py: replaced epoll with select to support Windows
  
  Removed Unix-specific functionality in order to support Windows:
  - select.epoll replaced with select.select
  - SocketServer.ForkingMixIn replaced with SocketServer.ForkingMixIn
  - socket.MSG_DONTWAIT replaced with socket.setblocking(False)
  
  Even though epoll has a better performance and improved socket handling
  than select, this change should not affect the actual test case.

Dan Fandrich (25 Jan 2014)
- tests: Added missing HTTP proxy keywords

- tests: added missing <features> http to a number of tests

- tests: Added a keyword for tests depending on internal info logs

- runtests: Don't log command every torture iteration in verbose

- tests: Added missing http feature to tests 509 & 1513

- netrc: Fixed a memory and file descriptor leak on OOM

- test1514: Used the macros for host and port number

- multi: Fixed a memory leak on OOM condition

Daniel Stenberg (23 Jan 2014)
- curl_easy_setopt.3: remove what auth types that work for CURLOPT_PROXYAUTH
  
  The list was out of date and the paragraph already refers to the
  CURLOPT_HTTPAUTH explanation. All the auth bits are explained properly
  there.
  
  It also removes the ambiguity for what the "added" phrase refers to.
  
  This change based on pull request #85 on github
  
  URL: https://github.com/bagder/curl/pull/85
  Reported-by: gnawhleinad

Dan Fandrich (22 Jan 2014)
- test1514: Got rid of a non-const initializer C99ism

Steve Holme (21 Jan 2014)
- RELEASE-NOTES: added another missing bug ref

Daniel Stenberg (21 Jan 2014)
- RELEASE-NOTES: added missing bug ref

- [Fabian Frank brought this change]

  axtls: fix compiler warning on conversion ssize_t => int

- [Fabian Frank brought this change]

  SFTP: stat remote file also when CURLOPT_NOBODY is 1
  
  Make it possible to call
  curl_easy_getinfo(curl, CURLINFO_CONTENT_LENGTH_DOWNLOAD, &filesize)
  and related functions on remote sftp:// files, without downloading them.
  
  Reported-by: Yingwei Liu
  Bug: http://curl.haxx.se/mail/lib-2014-01/0139.html

- RELEASE-NOTES: synced with 12ecd56da77

- contributors.sh: output list RELEASE-NOTES formatted

- [Cédric Deltheil brought this change]

  test1514: added - no more negative Content-Length (HTTP POST)
  
  This covers changes from commit afd288b2.

- [Cédric Deltheil brought this change]

  HTTP POST: omit Content-Length if data size is unknown
  
  This prevents sending a `Content-Length: -1` header, e.g this ocurred
  with the following combination:
  
  * standard HTTP POST (no chunked encoding),
  * user-defined read function set,
  * `CURLOPT_POSTFIELDSIZE(_LARGE)` NOT set.
  
  With this fix it now behaves like HTTP PUT.

- [Fabian Frank brought this change]

  disable GnuTLS insecure ciphers
  
  Make GnuTLS old and new consistent, specify the desired protocol, cipher
  and certificate type in always in both modes. Disable insecure ciphers
  as reported by howsmyssl.com. Honor not only --sslv3, but also the
  --tlsv1[.N] switches.
  
  Related Bug: http://curl.haxx.se/bug/view.cgi?id=1323

- curl_getdate.3: edited, removed references to pre 7.12.2 functionality

- gtls: fix compiler warnings on conversions size_t => unsigned int

Steve Holme (19 Jan 2014)
- tool: Fixed incorrect return code if password prompting runs out of memory
  
  Due to the changes in commit 3c929ff9f6ea and lack of subsequent
  updates, curl could return a CURLE_FTP_ACCEPT_FAILED error if
  checkpasswd() ran out of memory in versions 7.33.0 and 7.34.0.
  
  Updated the function declaration and return code to return
  CURLE_OUT_OF_MEMORY and CURLE_OK where appropriate.

- RELEASE-NOTES: Synced with 2cac75c4e400

- http_chunks.c: Fixed compilation warnings under some 32-bit systems
  
  conversion from 'curl_off_t' to 'size_t', possible loss of data
  
  Where curl_off_t is a 64-bit word and size_t is 32-bit - for example
  with 32-bit Windows builds.

- tool: Fixed incorrect return code if command line parser runs out of memory
  
  In the rare instance where getparameter() may return PARAM_NO_MEM whilst
  parsing a URL, cURL would return this error code, which is equivalent to
  CURLE_FTP_ACCEPT_FAILED in cURL error codes terms.
  
  Instead, return CURLE_FAILED_INIT and output the failure reason as per
  the other usage of getparameter().

Daniel Stenberg (18 Jan 2014)
- [Tobias Markus brought this change]

  Subject: progress bar: increase update frequency to 10Hz
  
  Increasing the update frequency of the progress bar to 10Hz greatly
  improves the visual appearance of the progress bar (at least in my
  impression).
  
  Signed-off-by: Tobias Markus <tobias@markus-regensburg.de>

- [Tobias Markus brought this change]

  progress bar: always update when at 100%
  
  Currently, the progress bar is updated at 5Hz. Because it is often not
  updated to 100% when the download is finished and curl exits, the bar
  is often "stuck" at 90-something, thus irritating the user.
  
  This patch fixes this by always updating the progress bar (instead of
  waiting for 200ms to have elapsed) while the download is finished but
  curl has not yet exited. This should not greatly affect performance
  because that moment is rather short.
  
  Signed-off-by: Tobias Markus <tobias@markus-regensburg.de>

Steve Holme (18 Jan 2014)
- win32: Added additional preprocessor check for Version Helper API
  
  A follow up patch to commit d2671340a613 as _WIN32_WINNT_WIN2K and
  _WIN32_WINNT_WIN2K may not be defined on all systems.

- win32: Corrected the preprocessor check for Version Helper API
  
  Following some auto build failures after commit c7a76bb056f31e changed
  the preprocessor check to use _WIN32_WINNT.

Daniel Stenberg (17 Jan 2014)
- cookie: max-age fixes
  
  1 - allow >31 bit max-age values
  
  2 - don't overflow on extremely large max-age values when we add the
  value to the current time
  
  3 - make sure max-age takes precedence over expires as dictated by
  RFC6265
  
  Bug: http://curl.haxx.se/mail/lib-2014-01/0130.html
  Reported-by: Chen Prog

- test1417: verify chunked-encoding transfer without CR
  
  As was introduced in 8f6b4be8af04

- chunked parsing: relax the CR strictness
  
  Allow for chunked-encoding data to get parsed with only LF line endings.
  This is allowed by browsers.

- test1416: verify the chunked size overflow detection

- chunked-parser: abort on overflows, allow 64 bit chunks

Dan Fandrich (17 Jan 2014)
- Fixed some XML syntax issues in the test data
  
  Also, make the ftp server return a canned response that doesn't
  cause XML verification problems.  Although the test file format
  isn't technically XML, it's still handy to be able to use XML
  tools to verify and manipulate them.

Daniel Stenberg (16 Jan 2014)
- [Michael Osipov brought this change]

  configure: fix gssapi linking on HP-UX
  
  The issue is with HP-UX that is comes with HP flavor of MIT
  Kerberos. This means that there is no krb5-config and the lib is called
  libgss.so
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1321

- Curl_cookie_add: remove 'now' from curl_getdate() call
  
  The now argument is unused by curl_getdate()

Steve Holme (15 Jan 2014)
- pop3-dele.c: Added missing CURLOPT_NOBODY following feedback

Daniel Stenberg (16 Jan 2014)
- connect.c:942:84: warning: Longer than 79 columns

Steve Holme (15 Jan 2014)
- connect.c: Corrected version compare in commit c7a76bb056f31e

- RELEASE-NOTES: Synced with c7a76bb056f31e

- win32: Fixed use of deprecated function 'GetVersionInfoEx' for VC12
  
  Starting with Visual Studio 2013 (VC12) and Windows 8.1 the
  GetVersionInfoEx() function has been marked as deprecated and it's
  return value atered. Updated connect.c and curl_sspi.c to use
  VerifyVersionInfo() where possible, which has been available since
  Windows 2000.

Daniel Stenberg (14 Jan 2014)
- curl_easy_setopt.3: mention how to unset CURLOPT_INFILESIZE*

- TODO: Allow SSL (HTTPS) to proxy

- TODO: remove FTP proxy and more SSL libraries

- TODO: Detect when called from witin callbacks

Marc Hoersken (13 Jan 2014)
- secureserver.pl: follow up fix for 87ade5f
  
  Since /dev/stdout is not always emulated on Windows,
  just skip the output option on Windows.
  
  MinGW/msys support /dev/stdout only from a new login shell.

Daniel Stenberg (13 Jan 2014)
- [Colin Hogben brought this change]

  error message: Sensible message on timeout when transfer size unknown
  
  A transfer timeout could result in an error message such as "Operation
  timed out after 3000 milliseconds with 19 bytes of -1 received".  This
  patch removes the non-sensical "of -1" when the size of the transfer
  is unknown, mirroring the logic in lib/transfer.c

Marc Hoersken (13 Jan 2014)
- secureserver.pl: added full support for tstunnel on Windows
  
  tstunnel on Windows does not support the pid option and is unable
  to write to an output log that is already being used as a redirection
  target for stdout. Therefore it does now output all log data to stdout
  by default and secureserver.pl creates a fake pidfile on Windows.

Steve Holme (12 Jan 2014)
- examples: Fixed compilation errors
  
  error: 'MULTI_PERFORM_HANG_TIMEOUT' undeclared

- imap-multi.c: Corrected typo

- smtp-multi.c: Minor coding style tidyup following POP3 and IMAP additions

- examples: Added IMAP multi example

- pop3-multi.c: Corrected copy/paste typo

- examples: Added POP3 multi example

- examples: Added comments to SMTP multi example based on other MAIL examples

- examples: Removed user information and TLS setup from SMTP multi example
  
  Simplified the SMTP multi example as this example should demonstrate
  the differences the easy and multi interfaces rather than introduce new
  concepts such as user authentication and TLS which are shown in the TLS
  and SSL examples.

- examples: Updated SMTP MAIL example to return libcurl result code

- examples: Synchronised comments between SMTP MAIL examples

- examples: Updated SMTP MAIL example to use a read function for data
  
  Updated to read data from a callback rather than from stdio as this is
  more realistic to most use cases.

Daniel Stenberg (12 Jan 2014)
- OpenSSL: deselect weak ciphers by default
  
  By default even recent versions of OpenSSL support and accept both
  "export strength" ciphers, small-bitsize ciphers as well as downright
  deprecated ones.
  
  This change sets a default cipher set that avoids the worst ciphers, and
  subsequently makes https://www.howsmyssl.com/a/check no longer grade
  curl/OpenSSL connects as 'Bad'.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1323
  Reported-by: Jeff Hodges

- multi: remove MULTI_TIMEOUT_INACCURACY
  
  With the recently added timeout "reminder" functionality, there's no
  reason left for us to execute timeout code before the time is
  ripe. Simplifies the handling too.
  
  This will make the *TIMEOUT and *CONNECTTIMEOUT options more accurate
  again, which probably is most important when the *_MS versions are used.
  
  In multi_socket, make sure to update 'now' after having handled activity
  on a socket.

Steve Holme (11 Jan 2014)
- Makefile.dist: Added support for VC7
  
  Currently VC7 and VC7.1 builds have to be ran with the VC variable set
  to vc6 which is not only inconsistent with the nmake winbuild system
  but also with newer versions of Visual Studio supported by this file.
  
  Note: This doesn't break the build for anyone still running with the
  VC variable set to vc6 or not set (which defaults to vc6).

- RELEASE-NOTES: Synced with 980659a2caa285

Daniel Stenberg (10 Jan 2014)
- multi_socket: remind app if timeout didn't run
  
  BACKGROUND:
  
  We have learned that on some systems timeout timers are inaccurate and
  might occasionally fire off too early. To make the multi_socket API work
  with this, we made libcurl execute timeout actions a bit early too if
  they are within our MULTI_TIMEOUT_INACCURACY. (added in commit
  2c72732ebf, present since 7.21.0)
  
  Switching everything to the multi API made this inaccuracy problem
  slightly more notable as now everyone can be affected.
  
  Recently (commit 21091549c02) we tweaked that inaccuracy value to make
  timeouts more accurate and made it platform specific. We also figured
  out that we have code at places that check for fixed timeout values so
  they MUST NOT run too early as then they will not trigger at all (see
  commit be28223f35 and a691e044705) - so there are definitately problems
  with running timeouts before they're supposed to run. (We've handled
  that so far by adding the inaccuracy margin to those specific timeouts.)
  
  The libcurl multi_socket API tells the application with a callback that
  a timeout expires in N milliseconds (and it explicitly will not tell it
  again for the same timeout), and the application is then supposed to
  call libcurl when that timeout expires. When libcurl subsequently gets
  called with curl_multi_socket_action(...CURL_SOCKET_TIMEOUT...), it
  knows that the application thinks the timeout expired - and alas, if it
  is within the inaccuracy level libcurl will run code handling that
  handle.
  
  If the application says CURL_SOCKET_TIMEOUT to libcurl and _isn't_
  within the inaccuracy level, libcurl will not consider the timeout
  expired and it will not tell the application again since the timeout
  value is still the same.
  
  NOW:
  
  This change introduces a modified behavior here. If the application says
  CURL_SOCKET_TIMEOUT and libcurl finds no timeout code to run, it will
  inform the application about the timeout value - *again* even if it is
  the same timeout that it already told about before (although libcurl
  will of course tell it the updated time so that it'll still get the
  correct remaining time). This way, we will not risk that the application
  believes it has done its job and libcurl thinks the time hasn't come yet
  to run any code and both just sit waiting. This also allows us to
  decrease the MULTI_TIMEOUT_INACCURACY margin, but that will be handled
  in a separate commit.
  
  A repeated timeout update to the application risk that the timeout will
  then fire again immediately and we have what basically is a busy-loop
  until the time is fine even for libcurl. If that becomes a problem, we
  need to address it.

- threaded-resolver: never use NULL hints with getaddrinfo
  
  The net effect of this bug as it appeared to users, would be that
  libcurl would timeout in the connect phase.
  
  When disabling IPv6 use but still using getaddrinfo, libcurl would
  wrongly not init the "hints" struct field in init_thread_sync() which
  would subsequently lead to a getaddrinfo() invoke with a zeroed hints
  with ai_socktype set to 0 instead of SOCK_STREAM. This would lead to
  different behaviors on different platforms but basically incorrect
  output.
  
  This code was introduced in 483ff1ca75cbea, released in curl 7.20.0.
  
  This bug became a problem now due to the happy eyeballs code and how
  libcurl now traverses the getaddrinfo() results differently.
  
  Bug: http://curl.haxx.se/mail/lib-2014-01/0061.html
  Reported-by: Fabian Frank
  Debugged-by: Fabian Frank

Nick Zitzmann (9 Jan 2014)
- darwinssl: un-break Leopard build after PKCS#12 change
  
  It turns out errSecDecode wasn't defined in Leopard's headers. So
  we use the enum's value instead.
  
  Bug: http://curl.haxx.se/mail/lib-2013-12/0150.html
  Reported by: Abram Pousada

Daniel Stenberg (8 Jan 2014)
- Curl_updateconninfo: don't do anything for UDP "connections"
  
  getpeername() doesn't work for UDP sockets since they're not connected
  
  Reported-by: Priyanka Shah
  Bug: http://curl.haxx.se/mail/archive-2014-01/0016.html

- info: remove debug output
  
  Removed some of the infof() calls that were added with the recent
  pipeline improvements but they're not useful to the vast majority of
  readers and the pipelining seems to fundamentaly work - the debugging
  outputs can easily be added there if debugging these functions is needed
  again.

- runtests: disable memory tracking with threaded resolver
  
  The built-in memory debug system doesn't work with multi-threaded use so
  instead of causing annoying false positives, disable the memory tracking
  if the threaded resolver is used.

- trynextip: fix build for non-IPV6 capable systems
  
  AF_INET6 may not exist then
  
  Patched-by: Iida Yosiaki
  Bug: http://curl.haxx.se/bug/view.cgi?id=1322

Steve Holme (8 Jan 2014)
- makefile: Added support for VC12

- makefile: Added support for VC11

- winbuild: Follow up fix for a47c142a88c0, 11e8066ef956 and 92b9ae5c5d59

Daniel Stenberg (7 Jan 2014)
- mk-ca-bundle.1: document -d

Steve Holme (7 Jan 2014)
- RELEASE-NOTES: Synced with 8ae35102c43d8d

Daniel Stenberg (7 Jan 2014)
- ConnectionExists: fix NTLM check for new connection
  
  When the requested authentication bitmask includes NTLM, we cannot
  re-use a connection for another username/password as we then risk
  re-using NTLM (connection-based auth).
  
  This has the unfortunate downside that if you include NTLM as a possible
  auth, you cannot re-use connections for other usernames/passwords even
  if NTLM doesn't end up the auth type used.
  
  Reported-by: Paras S
  Patched-by: Paras S
  Bug: http://curl.haxx.se/mail/lib-2014-01/0046.html

Steve Holme (5 Jan 2014)
- examples: Added required libcurl version information to SMTP examples

Daniel Stenberg (5 Jan 2014)
- mk-ca-bundle.pl: avoid warnings with -d without parameter

- [Leif W brought this change]

  mk-ca-bundle: introduces -d and warns about using this script

Steve Holme (5 Jan 2014)
- Makefile: Added missing WinSSL and x64 configurations

Marc Hoersken (5 Jan 2014)
- docs/INTERNALS: follow up fix for 11e8066 and 92b9ae5

- packages: follow up fix for a47c142, 11e8066 and 92b9ae5

- multi.c: fix possible dereference of null pointer

Steve Holme (5 Jan 2014)
- Examples: Renamed SMTP MAIL example to match other email examples

- examples: Added POP3 TLS example

- examples: Added IMAP NOOP example

- examples: Added POP3 NOOP example

- pop3-stat.c: Corrected small typo from commit 91d62e9abd761c

- examples: Added POP3 STAT example

- examples: Added POP3 TOP example

- examples: Added POP3 DELE example

- examples: Added POP3 UIDL example

- examples: Added POP3 RETR example

- examples: Added return of error code in POP3 examples

- runtests.pl: Updated copyright year after edit from d718abd968aeb4

- examples: Reworked POP3 examples for additional upcoming POP3 examples

- examples: Added SMTP SSL example

- examples: Added IMAP SSL and TLS examples

Marc Hoersken (5 Jan 2014)
- runtests.pl: check for tstunnel command on Windows
  
  The Windows console version of stunnel is called "tstunnel", while
  running "stunnel" on Windows spawns a new console window which
  cannot be handled by the testsuite.

- testcurl.pl: always show the last 5 commits even with --nogitpull

Daniel Stenberg (4 Jan 2014)
- ftp tests: provide LIST responses in the test file itself
  
  Previously LIST always returned a fixed hardcoded list that the ftp
  server code knew about, mostly since the server didn't get any test case
  number in the LIST scenario. Starting now, doing a CWD to a directory
  named test-[number] will make the test server remember that number and
  consider it a test case so that a subsequent LIST command will send the
  <data> section of that test case back.
  
  It allows LIST tests to be made more similar to how all other tests
  work.
  
  Test 100 was updated to provide its own directory listing.

Steve Holme (4 Jan 2014)
- examples: Standardised username and password settings for all email examples
  
  Replaced the use of CURLOPT_USERPWD for the preferred CURLOPT_USERNAME
  and CURLOPT_PASSWORD options and used the same username and password for
  all email examples which is the same as that used in the test suite.

- Updated copyright year for recent changes

Marc Hoersken (4 Jan 2014)
- secureserver.pl: support for stunnel-path with nun-alphanum chars
  
  This is desired to support stunnel installations on Windows.

- conncache.c: fix possible dereference of null pointer

- docs: primarily refer to schannel as WinSSL

Steve Holme (4 Jan 2014)
- examples: Added IMAP COPY example

- examples: Added IMAP DELETE example

- examples: Added IMAP CREATE example

Daniel Stenberg (4 Jan 2014)
- FTP parselist: fix "total" parser
  
  A regression introduced in 7f3b87d8782eae1 (present in the 7.21.4 release)
  broke the total parser. Now skip the whitespace and the digits.
  
  Reported-by: Justin Maggard
  Bug: http://curl.haxx.se/mail/lib-2014-01/0019.html

- test1513: fix spelling

Marc Hoersken (3 Jan 2014)
- Makefile.vc6: follow up fix for 11e8066 and 92b9ae5

Daniel Stenberg (3 Jan 2014)
- test1513: added - verify early progress callback return fail
  
  Verify the change brought in commit 8e11731653061. It makes sure that
  returning a failure from the progress callback even very early results
  in the correct return code.

- progresscallback: make CURLE_ABORTED_BY_CALLBACK get returned better
  
  When the progress callback returned 1 at a very early state, the code
  would not make CURLE_ABORTED_BY_CALLBACK get returned but the process
  would still be interrupted. In the HTTP case, this would then cause a
  CURLE_GOT_NOTHING to erroneously get returned instead.
  
  Reported-by: Petr Novak
  Bug: http://curl.haxx.se/bug/view.cgi?id=1318

Marc Hoersken (3 Jan 2014)
- unittests: do not include curl_memory.h
  
  memdebug.h already contains all required definitions and including
  curl_memory.h causes errors like the following:
  
  tests/unit/unit1394.c:119: undefined reference to `Curl_cfree'
  tests/unit/unit1394.c:120: undefined reference to `Curl_cfree'

Daniel Stenberg (3 Jan 2014)
- pipeline: remove print_pipeline()
  
  This is a debug function only and serves no purpose in production code,
  it only slows things down. I left the code #ifdef'ed for possible future
  pipeline debugging.
  
  Also, this was a global function without proper namespace usage.
  
  Reported-by: He Qin
  Bug: http://curl.haxx.se/bug/view.cgi?id=1320

- openssl: allow explicit sslv2 selection
  
  If OpenSSL is built to support SSLv2 this brings back the ability to
  explicitly select that as a protocol level.
  
  Reported-by: Steve Holme
  Bug: http://curl.haxx.se/mail/lib-2014-01/0013.html

Steve Holme (2 Jan 2014)
- Bumped copyright year to 2014

- Updated copyright year for recent changes

Marc Hoersken (3 Jan 2014)
- vtls/nssg.h: fixed include references to moved file

Daniel Stenberg (3 Jan 2014)
- [Christian Weisgerber brought this change]

  curl_easy_setopt.3: fix formatting mistakes
  
  This fixes two markup typos I noticed in curl_easy_setopt.3.  (The use
  of bold vs. italics seems a bit inconsistent in that page, but it should
  at least be valid man syntax.)

- [Barry Abrahamson brought this change]

  OpenSSL: Fix forcing SSLv3 connections
  
  Some feedback provided by byte_bucket on IRC pointed out that commit
  db11750cfa5b1 wasn’t really correct because it allows for “upgrading” to a
  newer protocol when it should be only allowing for SSLv3.
  
  This change fixes that.
  
  When SSLv3 connection is forced, don't allow SSL negotiations for newer
  versions.  Feedback provided by byte_bucket in #curl.  This behavior is
  also consistent with the other force flags like --tlsv1.1 which doesn't
  allow for TLSv1.2 negotiation, etc
  
  Feedback-by: byte_bucket
  Bug: http://curl.haxx.se/bug/view.cgi?id=1319

Guenter Knauf (2 Jan 2014)
- Trial to fix the nmake Makefile for vtls files.

Steve Holme (2 Jan 2014)
- examples: Added IMAP SEARCH example

- examples: Added IMAP EXAMINE mailbox folder example

Guenter Knauf (2 Jan 2014)
- Fix NetWare build for vtls files.

Daniel Stenberg (1 Jan 2014)
- CMakeLists.txt: add standard curl source code header

- CMakeLists.txt: add warning about the cmake build's state

Steve Holme (1 Jan 2014)
- examples: Updated SMTP multi example to be more realistic
  
  Updated the contents of the email and payload callback as per the IMAP
  and other SMTP examples.

Daniel Stenberg (1 Jan 2014)
- [Barry Abrahamson brought this change]

  OpenSSL: Fix forcing SSLv3 connections
  
  Since ad34a2d5c87c7f4b14e8dded3 (present in 7.34.0 release) forcing
  SSLv3 will always return the error "curl: (35) Unsupported SSL protocol
  version" Can be replicated with `curl -I -3 https://www.google.com/`.
  This fix simply allows for v3 to be forced.

Steve Holme (1 Jan 2014)
- examples: Corrected unescaped backslash in imap-store.c

- examples: Update SMTP TLS example mail content to be RFC-2821 compliant
  
  ...and made some minor coding style changes to better match the curl
  coding standards as well as the other email related examples.

- examples: Added IMAP APPEND example

- examples: Added IMAP STORE example

- RELEASE-NOTES: Synced with 7de2e032584d44

- examples: Added IMAP LIST mailbox example

- examples: Updated IMAP fetch example for libcurl 7.30.0

- examples: Rename before adding additional email examples

- examples: Added SMTP EXPN command example

- examples: Added SMTP email verification example

- imap: Fixed line length warning

- mprintf: Replaced internal usage of FORMAT_OFF_T and FORMAT_OFF_TU
  
  Following commit 0aafd77fa4c6f2, replaced the internal usage of
  FORMAT_OFF_T and FORMAT_OFF_TU with the external versions that we
  expect API programmers to use.
  
  This negates the need for separate definitions which were subtly
  different under different platforms/compilers.

- examples: Updated copyright year for recent edits

- examples: Corrected incorrect indentation in smtp-multi.c

- examples: Updated SMTP examples to set CURLOPT_UPLOAD

- mprintf: Added support for I, I32 and I64 size specifiers
  
  Added support to the built-in printf() replacement functions, for these
  non-ANSI extensions when compiling under Visual Studio, Borland, Watcom
  and MinGW.
  
  This fixes problems when generating libcurl source code that contains
  curl_off_t variables.

- curl_easy_setopt.3: Added SMTP information to CURLOPT_INFILESIZE_LARGE
  
  Although added to CURLOPT_INFILESIZE in commit ee3d3adc6fe155 it was
  never added to CURLOPT_INFILESIZE_LARGE.

- tests: Disabled NTLM tests when running with SSPI enabled

- connect.c: Fixed compilation warning
  
  warning: 'res' may be used uninitialized in this function

- runtests.pl: Fixed slightly incorrect regex in commit 28dd47d4d41900

- [Björn Stenberg brought this change]

  connect: Try all addresses in first connection attempt
  
  Fixes a bug when all addresses in the first family fail immediately, due
  to "Network unreachable" for example, curl would hang and never try the
  next address family.
  
  Iterate through all address families when to trying establish the first
  connection attempt.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1315
  Reported-by: Michal Górny and Anthony G. Basile

- runtests.pl: Optimised feature present checking code
  
  ...to exclude not present features.

- runtests.pl: Added the ability to run tests when a feature is not present

- ftpserver.pl: Fixed compilation error
  
  Unmatched right curly bracket at line 758, at end of line

- ftpserver.pl: Reworked SMTP verified server detection
  
  Following the addition of informational commands to the SMTP protocol,
  the test server is no longer required to return the verified server
  information in responses that curl only outputs in verbose mode.
  
  Instead, a similar detection mechanism to that used by FTP, IMAP and
  POP3 can now be used.

- sendf.c: Fixed compilation warning from f2d234a4dd9bcc
  
  sendf.c:450:81: warning: Longer than 79 columns

- FILE: Fixed sending of data would always return CURLE_WRITE_ERROR
  
  Introduced in commit 2a4ee0d2215556 sending of data via the FILE
  protocol would always return CURLE_WRITE_ERROR regardless of whether
  CURL_WRITEFUNC_PAUSE was returned from the callback function or not.

Daniel Stenberg (26 Dec 2013)
- FILE: we don't support paused transfers using this protocol
  
  Make sure that we detect such attempts and return a proper error code
  instead of silently handling this in problematic ways.
  
  Updated the documentation to mention this limitation.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1286

Steve Holme (26 Dec 2013)
- vtls: Updated comments referencing sslgen.c and ssluse.c

- vtls: Fixed up include of vtls.h

Daniel Stenberg (25 Dec 2013)
- curl_dofree: allow free(NULL)
  
  Previously this memdebug free() replacement didn't properly work with a
  NULL argument which has made us write code that avoids calling
  free(NULL) - which causes some extra nuisance and unnecessary code.
  Starting now, we should allow free(NULL) even when built with the
  memdebug system enabled.
  
  free(NULL) is permitted by POSIX

Steve Holme (25 Dec 2013)
- RELEASE-NOTES: Synced with 0ff0a994ada62a

Daniel Stenberg (25 Dec 2013)
- Curl_thread_create: use Curl_safefree to allow NULL better
  
  free() itself allows a NULL input but our memory debug system requires
  Curl_safefree() to be used instead when a "legitimate" NULL may be freed. Like
  in the code here.
  
  Pointed-out-by: Steve Holme

- [Luke Dashjr brought this change]

  threaded resolver: Use pthread_t * for curl_thread_t
  
  ... since pthread_t may be non-scalar and/or may represent a real thread
  with scalar 0.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1314

Steve Holme (24 Dec 2013)
- imap: Fixed auth preference not being honored when CAPABILITY not supported
  
  If a user indicated they preferred to authenticate using a SASL
  mechanism, but SASL authentication wasn't supported by the server, curl
  would always fall back to clear text when CAPABILITY wasn't supported,
  even though the user didn't want to use this.

- pop3: Fixed auth preference not being honored when CAPA not supported
  
  If a user indicated they preferred to authenticate using APOP or a SASL
  mechanism, but neither were supported by the server, curl would always
  fall back to clear text when CAPA wasn't supported, even though the
  user didn't want to use this.
  
  This also fixes the auto build failure caused by commit 6f2d5f0562f64a.

Daniel Stenberg (24 Dec 2013)
- TheArtOfHttpScripting: major update, converted layout and more

- Curl_pp_readresp: use memmove not memcpy, possibly overlapping areas
  
  Fixes commit 1deac31eba7

Steve Holme (24 Dec 2013)
- RELEASE-NOTES: Corrected copy/paste typo

- pop3: Fixed APOP being determined by CAPA response rather than by timestamp
  
  This commit replaces that of 9f260b5d6610f3 because according to RFC-2449,
  section 6, there is no APOP capability "...even though APOP is an
  optional command in [POP3].  Clients discover server support of APOP by
  the presence in the greeting banner of an initial challenge enclosed in
  angle brackets."

- tests: Removed APOP timestamp from default server greeting

- test936: Corrected login details from commit 7246255416617a

- ftpserver.pl: Updated custom full text REPLY regex
  
  SASL downgrade tests: 833, 835, 879, 881, 935 and 937 would fail as
  they contained a minus sign in their authentication mechanism and this
  would be missed by the custom reply parser.

- tests: Corrected syntax error from commit 7246255416617a

- tests: Added SMTP SASL downgrade tests

- tests: Added POP3 SASL downgrade tests

- tests: Added IMAP SASL downgrade tests

Daniel Stenberg (22 Dec 2013)
- docs: mention CURLOPT_MAX_RECV/SEND_SPEED_LARGE don't work for FILE://

- FILE: don't wait due to CURLOPT_MAX_RECV_SPEED_LARGE
  
  The FILE:// code doesn't support this option - and it doesn't make sense
  to support it as long as it works as it does since then it'd only block
  even longer.
  
  But: setting CURLOPT_MAX_RECV_SPEED_LARGE would make the transfer first
  get done and then libcurl would wait until the average speed would get
  low enough. This happened because the transfer happens completely in the
  DO state for FILE:// but then it would still unconditionally continue in
  to the PERFORM state where the speed check is made.
  
  Starting now, the code will skip from DO_DONE to DONE immediately if no
  socket is set to be recv()ed or send()ed to.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1312
  Reported-by: Mohammad AlSaleh

Steve Holme (22 Dec 2013)
- ftpserver.pl: Fixed runtime warning from commit 7da9c95bcf1fe6
  
  Use of uninitialized value $FTPARG in concatenation (.) or string at
  line 3255.

- ftpserver.pl: Added the ability to send custom full text replies

- ftpserver.pl: Added the ability to specify custom full text replies

- ftpserver.pl: Renamed commandreply variable from customreply

- tests: Added SASL cancellation keywords
  
  Added SASL CANCELLATION keywords to differentiate these tests from the
  upcoming SASL downgrade tests.

- email: Fixed segfault introduced in commit 195b63f99c2fe3

Daniel Stenberg (22 Dec 2013)
- code police: fix indent level to silence checksrc complaints

Steve Holme (21 Dec 2013)
- email: Extended the login options to support multiple auth mechanisms

Daniel Stenberg (22 Dec 2013)
- Curl_pp_readresp: replace stupid loop with memcpy

- Curl_pp_readresp: zero terminate line
  
  The comment in the code mentions the zero terminating after having
  copied data, but it mistakingly zero terminated the source data and not
  the destination! This caused the test 864 problem discussed on the list:
  
  http://curl.haxx.se/mail/lib-2013-12/0113.html
  Signed-off-by: Daniel Stenberg <daniel@haxx.se>

Steve Holme (21 Dec 2013)
- Revert "pop3: Added debug information to assist with test864 failure"
  
  This reverts commit 727d798d680f29c8b3cb7d7f03d6b6a3eb4356da.

- pop3: Added debug information to assist with test864 failure

- RELEASE-NOTES: Synced with 812c5ace759d04

- pop3: Fixed APOP timestamp detection from commit 1cfb436a2f1795

Daniel Stenberg (20 Dec 2013)
- Makefile.inc: use standard source header

- Makefile.inc: specify the vtls sources+headers separately

- vtls: renamed sslgen.[ch] to vtls.[ch]

- openssl: renamed backend files to openssl.[ch]

- vtls: moved all TLS/SSL source and header files into subdir

- vtls: created subdir, moved sslgen.[ch] there, updated all include lines

Steve Holme (20 Dec 2013)
- pop3: Fixed selection of APOP when server replies with an invalid timestamp
  
  Although highlighted by a bug in commit 1cfb436a2f1795, APOP
  authentication could be chosen if the server was to reply with an empty
  or missing timestamp in the server greeting and APOP was given in the
  capability list by the server.

- pop3: Fixed processing of more than one response when sent in same packet
  
  Added a loop to pop3_statemach_act() in which Curl_pp_readresp() is
  called until the cache is drained. Without this multiple responses
  received in a single packet could result in a hang or delay.

- pop3: Moved CAPA response handling to pop3_state_capa_resp()
  
  Similar to the processing of untagged CAPABILITY responses in IMAP and
  multi-line EHLO responses in SMTP, moved the processing of multi-line
  CAPA responses to pop3_state_capa_resp().

- pop3: Moved APOP detection into pop3_state_servergreet_resp()
  
  In an effort to reduce what pop3_endofresp() does and bring the POP3
  source back inline with the IMAP and SMTP protocols, moved the APOP
  detection into pop3_state_servergreet_resp().

- curl_easy_setopt: Fixed OAuth 2.0 Bearer option name
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1313
  Reported-by: Viktor Szakáts

Daniel Stenberg (18 Dec 2013)
- curl.1: remove URL encoding phrase from --data description
  
  ... it could be misleading a reader into thinking it _has_ to be encoded.

Steve Holme (18 Dec 2013)
- imap/pop3/smtp: Added support for SASL authentication downgrades
  
  Added support for downgrading the SASL authentication mechanism when the
  decoding of CRAM-MD5, DIGEST-MD5 and NTLM messages fails. This enhances
  the previously added support for graceful cancellation by allowing the
  client to retry a lesser SASL mechanism such as LOGIN or PLAIN, or even
  APOP / clear text (in the case of POP3 and IMAP) when supported by the
  server.

Daniel Stenberg (18 Dec 2013)
- RELEASE-PROCEDURE: new document

- gitignore: ignore .dirstamp files

- smtp: fix compiler warning
  
  smtp.c:478:21: error: unused variable 'smtpc' [-Werror=unused-variable]

Steve Holme (18 Dec 2013)
- smtp: Moved the calculation of SASL login details into a separate function

- pop3: Moved the calculation of SASL login details into a separate function

- imap: Moved the calculation of SASL login details into a separate function

- smtp: Moved the sending of the AUTH command into a separate function

- pop3: Moved the sending of the AUTH command into a separate function

- imap: Moved the sending of the AUTHENICATE command into a separate function

- email: Renamed *_perform_authenticate() functions
  
  In preparation for the upcoming SASL downgrade feature renamed the
  imap__perform_authenticate(), pop3__perform_authenticate() and
  smtp__perform_authenticate() functions.

Daniel Stenberg (17 Dec 2013)
- bump: start working on the next release

Version 7.34.0 (16 Dec 2013)

Daniel Stenberg (16 Dec 2013)
- RELEASE-NOTES: synced with c0ef05e67
  
  ... for the pending 7.34.0 release
  
  Upped the contributor count

- THANKS: add contributors from 7.34.0 release
  
  24 new great friends

- gtls: respect *VERIFYHOST independently of *VERIFYPEER
  
  Security flaw CVE-2013-6422
  
  This is conceptually the same problem and fix that 3c3622b6 brought to the
  OpenSSL backend and that resulted in CVE-2013-4545.
  
  This version of the problem was independently introduced to the GnuTLS
  backend with commit 59cf93cc, present in the code since the libcurl
  7.21.4 release.
  
  Advisory: http://curl.haxx.se/docs/adv_20131217.html
  Bug: http://curl.haxx.se/mail/lib-2013-11/0214.html
  Reported-by: Marc Deslauriers

- curl.1 document -J doesn't %-decode
  
  ...also added as KNOWN_BUG #87 with reference to bug #1294

- multi: add timer inaccuracy margin to timeout/connecttimeout
  
  Since all systems have inaccuracy in the timeout handling it is
  imperative that we add an inaccuracy margin to the general timeout and
  connecttimeout handling with the multi interface. This way, when the
  timeout fires we should be fairly sure that it has passed the timeout
  value and will be suitably detected.
  
  For cases where the timeout fire before the actual timeout, we would
  otherwise consume the timeout action and still not run the timeout code
  since the condition wasn't met.
  
  Reported-by: He Qin
  Bug: http://curl.haxx.se/bug/view.cgi?id=1298

- RELEASE-NOTES: synced with dd4d9ea542

- curl_easy_setopt: clarify some USERPWD and PROXYUSERPWD details

- login options: remove the ;[options] support from CURLOPT_USERPWD
  
  To avoid the regression when users pass in passwords containing semi-
  colons, we now drop the ability to set the login options with the same
  options. Support for login options in CURLOPT_USERPWD was added in
  7.31.0.
  
  Test case 83 was modified to verify that colons and semi-colons can be
  used as part of the password when using -u (CURLOPT_USERPWD).
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1311
  Reported-by: Petr Bahula
  Assisted-by: Steve Holme
  Signed-off-by: Daniel Stenberg <daniel@haxx.se>

Steve Holme (14 Dec 2013)
- imap: Fixed exclude of clear text when using auth=* in commit 75cd7fd66762bb
  
  It is not 100% clear whether * should include clear text LOGIN or not
  from RFC-5092, however, including it is then consistent with current
  POP3 behaviour where clear text, APOP or SASL may be chosen.

- imap: Fixed incorrect fallback to clear text authentication
  
  If a specific SASL authentication mechanism was requested by the user
  as part of the login options but wasn't supported by the server then
  curl would fallback to clear text, when it shouldn't, rather than
  reporting "No known authentication mechanisms supported" as the POP3
  and SMTP protocols do.

Daniel Stenberg (11 Dec 2013)
- [Eric Lubin brought this change]

  parsedate: avoid integer overflow
  
  In C, signed integer overflow is undefined behavior. Thus, the compiler
  is allowed to assume that it will not occur. In the check for an
  overflow, the developer assumes that the signed integer of type time_t
  will wrap around if it overflows. However, this behavior is undefined in
  the C standard. Thus, when the compiler sees this, it simplifies t +
  delta < t to delta < 0. Since delta > 0 and delta < 0 can't both be
  true, the entire if statement is optimized out under certain
  optimization levels. Thus, the parsedate function would return
  PARSEDATE_OK with an undefined value in the time, instead of return -1 =
  PARSEDATE_FAIL.

- parseconfig: warn if unquoted white spaces are detected
  
  Commit 0db811b6 made some existing config files pass on unexpected
  values to libcurl that made it somewhat hard to track down what was
  really going on.
  
  This code detects unquoted white spaces in the parameter when parsing a
  config file as that would be one symptom and it is generally a bad
  syntax anyway.

- RELEASE-NOTES: recount contributors and libcurl options

- RELEASE-NOTES: synced with c4f46e97ca6c

- [James Dury brought this change]

  TFTP: let tftp_multi_statemach()'s return codes through
  
  It would otherwise always clobber the return code with new function
  calls and it couldn't return timeout etc.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1310

Nick Zitzmann (7 Dec 2013)
- [Melissa Mears brought this change]

  darwinssl: Fix #if 10.6.0 for SecKeychainSearch
  
  The comment here says that SecKeychainSearch causes a deprecation
  warning when used with a minimum Mac OS X SDK version of 10.7.0, which
  is correct.  However, the #if guard did not match.  It was intended to
  only use the code if 10.6.0 support was enabled, but it had 10.7.0
  instead.  This caused a warning if the minimum was exactly 10.7.0.

Daniel Stenberg (6 Dec 2013)
- [Christian Weisgerber brought this change]

  curl.h: <sys/select.h> for OpenBSD
  
  curl.h should also include <sys/select.h> on OpenBSD to reliably
  pull in select().  Typically, including <sys/time.h> will be enough,
  but not if strict standards-compliance is requested (e.g. by defining
  _XOPEN_SOURCE).

- digest: fix CURLAUTH_DIGEST_IE
  
  The URI that is passed in as part of the Authorization: header needs to
  be cut off at '?' if CURLAUTH_DIGEST_IE is set. Previously the code only
  did when calculating the MD5sum.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1308
  Patched-by: Sergey Tatarincev

- Curl_is_connected: use proxy name in error message when proxy is used
  
  (bug introduced in 255826c4, never present in a release)
  
  Reported-by: Dima Tisnek
  Bug: http://curl.haxx.se/mail/lib-2013-12/0006.html

Steve Holme (4 Dec 2013)
- imap/pop3: Post graceful cancellation consistency changes

- [Melissa Mears brought this change]

  pop3: Fix POP3_TYPE_ANY signed compilation warning
  
  POP3_TYPE_ANY, or ~0, is written to pop3c->preftype in lib/pop3c.c, an
  unsigned int variable.  The result of ~0 is -1, which caused a warning
  due to writing a negative number to an unsigned variable.  To fix this,
  make the expression ~0U so that its value is considered the unsigned
  number UINT_MAX which is what SASL_AUTH_ANY does in curl_sasl.h.

Kamil Dudka (2 Dec 2013)
- tool_metalink: do not use HAVE_NSS_INITCONTEXT
  
  ... no longer provided by the configure script

- nss: make sure that 'sslver' is always initialized

- nss: unconditionally require NSS_InitContext()
  
  ... since we depend on NSS 3.14+ because of SSL_VersionRangeSet() anyway

- nss: allow to use TLS > 1.0 if built against recent NSS
  
  Bug: http://curl.haxx.se/mail/lib-2013-11/0162.html

- nss: put SSL version selection into separate fnc

- nss: use a better API for controlling SSL version
  
  This change introduces a dependency on NSS 3.14+.

Patrick Monnerat (2 Dec 2013)
- OS400: sync wrappers and RPG binding.

Steve Holme (1 Dec 2013)
- multi.c: Fixed compilation warning
  
  warning: declaration of 'pipe' shadows a global declaration

- RELEASE-NOTES: Synced with ad3836448efbb7

- base64: Corrected typo from commit f3ee587775c88a

- base64: Post extended extended validation tidy up
  
  Reduced the separate processing of the last quantum to be performed in
  the main decoding loop and renamed some variables for consistency.

- base64: Extended validation to look for invalid characters
  
  Extended the basic validation in commit e17c1b25bc33eb to return a
  failure when invalid base64 characters are included.

- base64: Post basic validation tidy up
  
  Due to the length checks introduced in commit e17c1b25bc33eb there is no
  need to allow for extra space in the output buffer for a non-padded last
  quantum.

- curl_easy_getinfo: Post CURLINFO_TLS_SESSION tidy up
  
  1) Renamed curl_tlsinfo to curl_tlssessioninfo as discussed on the
  mailing list.
  2) Renamed curl_ssl_backend to curl_sslbackend so it doesn't follow our
  function naming convention.
  3) Updated sessioninfo.c example accordingly.

Daniel Stenberg (29 Nov 2013)
- parseconfig: dash options can't specified with colon or equals
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1297
  Reported-by: Michael Osipov

- curl.1: -G also takes --data-urlencode data

- globbing: curl glob counter mismatch with {} list use
  
  The "fixed string" function wrongly bumped the "urlnum" counter which
  made curl output the total number of URLs wrong when using
  {one,two,three} lists in globs.
  
  Reported-by: Michael-O
  Bug: http://curl.haxx.se/bug/view.cgi?id=1305

Steve Holme (28 Nov 2013)
- [Christian Grothoff brought this change]

  sessioninfo.c: Added sample code for CURLINFO_TLS_SESSION
  
  Added a simple example to show how one can use CURLINFO_TLS_SESSION for
  obtaining extensive TLS certificate information.

- multi.c: Fixed compilation error introduced in commit a900d45489fc14
  
  Systems that define SIGPIPE_VARIABLE as a noop would not compile as
  restore_pipe was defined afterwards.

- [Christian Grothoff brought this change]

  curl_easy_getopt: Handle API violation gracefully
  
  This fixes a NULL dereference in the case where the client asks for
  CURLINFO_TLS_SESSION data after the (TLS) session has already been
  destroyed (i.e. curl_easy_perform has already completed for this
  handle). Instead of crashing, we now return a CURLSSLBACKEND_NONE
  error.

- KNOWN_BUGS: #86: Disconnect commands may not be sent by IMAP, POP3 and SMTP

Daniel Stenberg (27 Nov 2013)
- [Jeff King brought this change]

  curl_multi_cleanup: ignore SIGPIPE
  
  This is an extension to the fix in 7d80ed64e43515. We may
  call Curl_disconnect() while cleaning up the multi handle,
  which could lead to openssl sending packets, which could get
  a SIGPIPE.
  
  Signed-off-by: Jeff King <peff@peff.net>

- [Jeff King brought this change]

  sigpipe: factor out sigpipe_reset from easy.c
  
  Commit 7d80ed64e43515 introduced some helpers to handle
  sigpipe in easy.c. However, that fix was incomplete, and we
  need to add more callers in other files. The first step is
  making the helpers globally accessible.
  
  Since the functions are small and should generally end up
  inlined anyway, we simply define them in the header as
  static functions.
  
  Signed-off-by: Jeff King <peff@peff.net>

- [Björn Stenberg brought this change]

  connect: Try next ip directly after immediate connect fail
  
  This fixes a rare Happy Eyeballs bug where if the first IP family runs
  out of addresses before the second-family-timer fires, and the second
  IP family's first connect fails immediately, no further IPs of the
  second family are attempted.

- hostip: don't prune DNS cache entries that are in use
  
  When adding entries to the DNS cache with CURLOPT_RESOLVE, they are
  marked 'inuse' forever to prevent them from ever being removed in normal
  operations. Still, the code that pruned out-of-date DNS entries didn't
  care for the 'inuse' struct field and pruned it anyway!
  
  Reported-by: Romulo A. Ceccon
  Bug: http://curl.haxx.se/bug/view.cgi?id=1303

Steve Holme (24 Nov 2013)
- RELEASE-NOTES: Synced with 35e476a3f6cdd5

- tests: Re-ordered test arguments to match other IMAP tests

- tests: Corrected login "username" authentication responses

- tests: Added error code explanation comments

- tests: Removed expected QUIT response from graceful cancellation tests
  
  A failure during authentication, which is performed as part of the
  CONNECT phrase (for IMAP, POP3 and SMTP) is considered by the multi-
  interface as being closed prematurely (aka a dead connection). As such
  these protocols cannot issue the relevant QUIT or LOGOUT command.
  
  Temporarily fixed the test cases until we can fix this properly.

- tests: Added SMTP graceful authentication cancellation tests

- tests: Added POP3 graceful authentication cancellation tests

- ftpserver.pl: Reworked fix from commit 7a36b2abc06862

- ftpserver.pl: Fixed unknown IMAP command "*"

- ftpserver.pl: Fixed servercmd REPLY with * detection

- tests: Added IMAP graceful authentication cancellation tests

- tests: Moved CR LF in URL tests to their respective protocol groups

- smtp: Post SMTP command expansion tidy up
  
  Removed unnecessary SMTP_STOP state changes on failure.
  
  Removed hard return on failure in smtp_state_data_resp().

- symbols-in-versions: Added missing CURLSSLBACKEND_* symbols

- symbols-in-versions: Fixed missing CURLINFO_TLS_SESSION

- [Christian Grothoff brought this change]

  curl_easy_getinfo: Added CURLINFO_TLS_SESSION for accessing TLS internals
  
  Added new API for returning a SSL backend type and pointer, in order to
  allow access to the TLS internals, that may then be used to obtain X509
  certificate information for example.

- RELEASE-NOTES: Synced with 8191800a0c8ff7

- smtp: Fixed space being sent in non --mail-rcpt based requests
  
  Commands such as NOOP, RSET and HELP would be sent with a space at the
  end of the command, for example: "NOOP ".

- tests: Added SMTP NOOP and RSET tests

- test928: Corrected typo in expected data from commit df58084695ce9b

- tests: Added SMTP HELP test

- smtp: Changed the default command to HELP when no options are specified
  
  Otherwise a NOOP operation would be performed which a) only returns a
  single line response and not a multiline response where -I needs to be
  used, and b) provides an inconsistent user experience compared to that
  of the POP3 and IMAP protocols.

- smtp:Fixed memory leak from commit dac01ff6d788b2
  
  The buffer allocated by smtp_parse_custom_request() was not freed.

- connect: Close open but unconnected socket in singleipconnect()
  
  singleipconnect() could return the file descriptor of an open socket
  even though the function returned a CURLE_COULDNT_CONNECT error code
  from commit ed1662c374361a and 02fbc26d59c591.
  
  This could cause tests 19, 704 and 1233 to fail on FreeBSD, AIX and
  Solaris.

- tests: Added SMTP EXPN command test

- test926: Corrected unknown user reply from commit 0d735c29f92748
  
  The error code should not be sent as data as it isn't passed onto the
  client as body data, so cannot be compared in the test suite against
  expected data.

- tests: Corrected missing data reply sections from 3d50e91aeef8cc

- tests: Added SMTP VRFY command tests

- ftpserver.pl: Added support for new SMTP commands

- smtp: Fixed broken RCPT TO from commit 0ea4a80bb23666

Daniel Stenberg (15 Nov 2013)
- smtp_state_mail_resp: removed unused variable 'smtp'

Steve Holme (15 Nov 2013)
- DOCS: Updated curl_easy_setopt.3 following recent SMTP changes
  
  * Added information about the verify and expand commands to
    CURLOPT_MAIL_RCPT.
  * Reworked CURLOPT_CUSTOMREQUEST section, adding information about IMAP
    and SMTP custom commands.

- DOCS: Updated manpage following recent SMTP modifications
  
  * Added SMTP section to --request
  * Expanded --mail-rcpt to describe the usage when using the verify and
    expand commands.

- smtp: Simplified the next RCPT TO logic

- lib1507.c: Added missing set of CURLOPT_UPLOAD option
  
  Although this option should have already been set, the SMTP module can
  now download information from and send instructional commands to, an
  SMTP server, requiring the option to be set in order to perform a mail
  transfer.

- smtp.c: Fixed trailing whitespace

- smtp: Added support for VRFY and EXPN commands

- smtp: Added support for NOOP and RSET commands

- smtp: Fixed handling of multiline server greeting responses
  
  Incorrectly processed multiline server greeting responses as "wanted"
  continue responses in smtp_endofresp(), from commit f16c0de4e9bbe3,
  which in turn broke the SMTP server detection in the test suite,
  because the EHLO command would not be sent.

- smtp.c: Fixed compilation error from commit f16c0de4e9bbe3
  
  warning: unused variable 'smtpc'

- smtp: Fixed processing of more than one response when sent in same packet
  
  Added a loop to smtp_statemach_act() in which Curl_pp_readresp() is
  called until the cache is drained. Without this multiple responses
  received in a single packet could result in a hang or delay.

- smtp: Moved EHLO response handling to smtp_state_ehlo_resp()
  
  Similar to the processing of untagged CAPABILITY responses in IMAP moved
  the processing of multiline EHLO responses to smtp_state_ehlo_resp() and
  introduced an internal response code of one to differentiate a multiline
  continuation from the end of command. This also allows for the separate
  processing of multiline responses from commands such as VRFY and EXPN.

- connect: Forgot to correct line endings before push in commit ed1662c374361a

- [Björn Stenberg brought this change]

  connect: Return the socket descriptor even on fail
  
  singleipconnect() did not return the open socket descriptor on some
  errors, thereby sometimes causing a socket leak. This patch ensures
  the socket is always returned.

Daniel Stenberg (13 Nov 2013)
- configure: Fix test with -Werror=implicit-function-declaration
  
  The ipv6 auto-detect test in configure returns a false negative when
  CFLAGS contains -Werror=implicit-function-declaration. (I have been
  using this flag to detect code issues that would result in SEGVs on
  x86_64-cygwin.)
  
  Patch-by: Yaakov Selkowitz
  Bug: http://curl.haxx.se/bug/view.cgi?id=1304

Steve Holme (13 Nov 2013)
- test825: Corrected typo from commit b29217d0d682d4

- RELEASE-NOTES: Synced with bde901ad89a6f1

- test922: Corrected title to match other OAuth 2.0 tests

- tests: Added IMAP OAuth 2.0 authentication with initial response test

- tests: Added IMAP NTLM authentication with initial response test

- tests: Added IMAP login authentication with initial response test

- tests: Added IMAP plain authentication with initial response test

- test873: Use proper padding in NTLM responses

Nick Zitzmann (12 Nov 2013)
- darwinssl: check for SSLSetSessionOption() presence when toggling BEAST
  
  Even though this is only a formality (since not many people build on
  Mavericks while targeting Leopard), since we still support Leopard
  at the earliest, we might as well be pedantic.

- darwinssl: PKCS#12 import feature now requires Lion or later
  
  It turns out that some of the constants necessary to make this feature
  work are missing from Snow Leopard's Security framework even though
  they are defined in the headers.
  
  Bug: http://curl.haxx.se/mail/lib-2013-11/0076.html
  Reported by: myriachan

Steve Holme (13 Nov 2013)
- tests: Added POP3 OAuth 2.0 authentication with initial response test

- tests: Added POP3 NTLM authentication with initial response test

- tests: Added POP3 login authentication with initial response test

- tests: Added POP3 plain authentication with initial response test

- TODO: Added auth= in URLs to the wish list for HTTP

- curl_easy_setopt: Added the ability to set the login options separately
  
  Rather than set the authentication options as part of the login details
  specified in the URL, or via the older CURLOPT_USERPWD option, added a
  new libcurl option to allow the login options to be set separately.

Daniel Stenberg (12 Nov 2013)
- curl.1: mention that -O does no URL decoding

Kamil Dudka (12 Nov 2013)
- [Tomas Hoger brought this change]

  curl_easy_setopt.3: clarify CURLOPT_SSL_VERIFYHOST documentation
  
  - better describe what happens when 1 is specified as parameter
  - clarify what "is ignored" means for NSS builds

Steve Holme (12 Nov 2013)
- runtests.pl: Added SSPI detection

- multi: Small code tidy up to avoid hard return

- tests: Updated CRAM-MD5 tests to use test user details

- [Björn Stenberg brought this change]

  multi: Set read socket when returning READSOCK(0)
  
  This patch fixes and issue introduced in commit 7d7df831981fee, if the
  tunnel state was TUNNEL_CONNECT, waitconnect_getsock() would return a
  bitmask indicating a readable socket but never stored the socket in the
  return array.

Daniel Stenberg (11 Nov 2013)
- bump: next release will be 7.34.0
  
  Due to all the news and changes.

Steve Holme (10 Nov 2013)
- [Björn Stenberg brought this change]

  connect: Close temporary sockets in conn_free()
  
  The temporary sockets used for Happy Eyeballs were not closed properly,
  if curl exited prematurely, which this patch fixes.

- tests: Corrected titles of POP3 and SMTP OAuth 2.0 tests

- test823: Fixed expected authentication text from commit e10a26a9d6d6de
  
  Fixed authentication text due to incorrect digest-uri property.

- test821: Fixed expected authentication text from commit 2d5455feac9984

- RELEASE-NOTES: Synced with 0f81fbe5da6643

- [Kim Vandry brought this change]

  ares: Fixed compilation under Visual Studio 2012

- tests: Added IMAP OAuth 2.0 authentication test

- tests: Added IMAP DIGEST-MD5 authentication test

- tests: Added IMAP NTLM authentication test

- tests: Added IMAP CRAM-MD5 authentication test

- test819: Fixed expected authentication text from commit 76f924131c9fd3

- ftpserver.pl: Reworked custom reply handling code
  
  1) To fix issues with IMAP custom replies
  2) So initial space is not required in IMAP display text
  3) To be more readable and understandable

- ftpserver.pl: Reworked unrecognised command responses
  
  As the IMAP regex could fail and $1 would not contain the command id
  updated the unrecognised command response to be more generic and
  realistic (like those used in the command handlers).
  
  Additionally updated the POP3, SMTP and FTP responses.

- ftpserver.pl: Fixed processing of IMAP authentication strings

Daniel Stenberg (9 Nov 2013)
- cmake: fix Windows build with IPv6 support
  
  Patch-by: "Z98"

Steve Holme (6 Nov 2013)
- Revert "ftpserver.pl: Corrected logic from commit 27b7b1062f9d97"
  
  This reverts commit 558034ab7002d1 as it appears to break the auto
  builds. More thought is required for this!

- ftpserver.pl: Corrected logic from commit 27b7b1062f9d97

- ftpserver.pl: Fixed IMAP cmdid being sent on custom responses

- tests: Added IMAP login authentication test

- tests: Added IMAP plain authentication test

- url.c: Very small amount of policing

- [Björn Stenberg brought this change]

  url.c: Remove superfluous for loop
  
  The reason for this loop's existence was removed in commit
  02fbc26d59c591.

Daniel Stenberg (5 Nov 2013)
- KNOWN_BUGS: STARTTRANSFER for POST requests
  
  added 85. Wrong STARTTRANSFER timer accounting for POST requests

- Curl_ssl_push_certinfo_len: don't %.*s non-zero-terminated string
  
  Our own printf() replacement clearly can't properly handle %.*s with a
  string that isn't zero terminated. Instead of fixing the printf code or
  even figuring out what the proper posix behavior is, I reverted this
  piece of the code back to the previous version where it does malloc +
  memcpy instead.
  
  Regression added in e839446c2a5, released in curl 7.32.0.
  
  Reported-by: Felix Yan
  Bug: http://curl.haxx.se/bug/view.cgi?id=1295

Steve Holme (5 Nov 2013)
- RELEASE-NOTES: Synced with 7fc3b2ce382ed6

- connect.h: Updated copyright year for last edit

Daniel Stenberg (4 Nov 2013)
- [Björn Stenberg brought this change]

  connect: Add connection delay to Happy Eyeballs.
  
  This patch adds a 200ms delay between the first and second address
  family socket connection attempts.
  
  It also iterates over IP addresses in the order returned by the
  system, meaning most dual-stack systems will try IPv6 first.
  
  Additionally, it refactors the connect code, removing most code that
  handled synchronous connects. Since all sockets are now non-blocking,
  the logic can be made simpler.

Steve Holme (4 Nov 2013)
- winbind: Fixed ntlm_auth expecting eol following commit e17c1b25bc33eb

- nss.c: Fixed compilation warnings (Take Two)
  
  nss.c:702: warning: pointer targets in passing argument 3 of
  'Curl_extract_certinfo' differ in signedness
  
  nss.c:702: warning: pointer targets in passing argument 4 of
  'Curl_extract_certinfo' differ in signedness
  
  Made sure the cast was correctly "unsigned char *" to "char *" and not
  "unsigned char *" to "unsigned char *".

- nss.c: Fixed compilation warnings
  
  nss.c:700: warning: pointer targets in passing argument 3 of
  'Curl_extract_certinfo' differ in signedness
  
  nss.c:700: warning: pointer targets in passing argument 4 of
  'Curl_extract_certinfo' differ in signedness

- tests: Added test for IMAP NOOP command

- tests: Added test for IMAP COPY command

- tests: Disable IMAP CLOSE and EXPUNGE command tests
  
  This is temporary until curl supports either multiple custom commands
  or post-quote commands in IMAP.

- tests: Added tests for IMAP CLOSE and EXPUNGE commands

- connect.c: Code policing on commit 5094bb53f4a027
  
  No need for a rhs condition on a bitwise compare.

- nss.c: Fixed compilation warnings
  
  warning: implicit declaration of function 'Curl_extract_certinfo'

- x509asn1.c: Fixed compilation warnings
  
  warning: declaration of 'chsize' shadows a global declaration

- DOCS: Expanded --request description to include POP3 and IMAP details

- tool_help: Updated --list-only description to include POP3

- DOCS: Updated --list-only description to include POP3
  
  Additionally corrected typos in --oauth2-bearer protocol list.

- base64: Fixed compilation warnings when using Curl_base64_decode()
  
  curl_sasl.c:294: warning: dereferencing type-punned pointer will break
  strict-aliasing rules
  
  getpart.c:201: warning: dereferencing type-punned pointer will break
  strict-aliasing rules

- connect: Fixed "Whut?" no server connection failures
  
  Introduced in commit 7d7df831981fee curl would loop displaying "Whut?"
  if it was trying to connect to an address and port that didn't have
  anything listening on it.

- http: Post base64 decoding tidy up
  
  Renamed copy_header_value() to Curl_copy_header_value() as this
  function is now non static.
  
  Simplified proxy flag in Curl_http_input_auth() when calling
  sub-functions.
  
  Removed unnecessary white space removal when using negotiate as it had
  been missed in commit cdccb422671aeb.

Daniel Stenberg (3 Nov 2013)
- glob_range: pass the closing bracket for a-z ranges
  
  Regression since commit 5ca96cb844102 (release in 7.33.0)
  
  Reported-by: Marcin Gryszkalis

Steve Holme (2 Nov 2013)
- getpart: Fixed base64 encoded parts following commit e17c1b25bc33eb

- http: Added proxy tunnel authentication message header value extraction
  
  ...following recent changes to Curl_base64_decode() rather than trying
  to parse a header line for the authentication mechanisms which is CRLF
  terminated and inline zero terminate it.

- http: Added authentication message header value extraction
  
  ...following recent changes to Curl_base64_decode() rather than trying
  to parse a header line for the authentication mechanisms which is CRLF
  terminated and inline zero terminate it.

Daniel Stenberg (30 Oct 2013)
- curl_multi_wait: accept 0 from multi_timeout() as valid timeout
  
  The code rejected 0 as a valid timeout while in fact the function could
  indeed legitimately return that and it should be respected.
  
  Reported-by: Bjorn Stenberg

Steve Holme (30 Oct 2013)
- email: Corrected a couple of typos from commit aa0eaef4838ccd

- TODO: Removed the 'Graceful base64 decoding failure' sections
  
  Updated following the recent changes to support graceful failures
  during the authentication phrase.

- email: Post graceful SASL authentication cancellation tidy up

- [Kamil Dudka brought this change]

  tests: use proper padding in NTLM responses

Patrick Monnerat (30 Oct 2013)
- NSS: support for CERTINFO feature

Daniel Stenberg (30 Oct 2013)
- base64: removed trailing white space
  
  and updated copyright year

Steve Holme (30 Oct 2013)
- base64: Added basic validation to base64 input string when decoding
  
  A base64 string should be a multiple of 4 characters in length, not
  contain any more than 2 padding characters and only contain padding
  characters at the end of string. For example: Y3VybA==
  
  Strings such as the following are considered invalid:
  
  Y=   - Invalid length
  Y==  - Invalid length
  Y=== - More than two padding characters
  Y=x= - Padding character contained within string

Daniel Stenberg (29 Oct 2013)
- RELEASE-NOTES: synced with 255826c40f9316

- [Björn Stenberg brought this change]

  bugfix: Don't block waiting for socket1 connect.
  
  This patch fixes a bug in Happy Eyeballs where curl would wait for a
  connect response from socket1 before checking socket2.
  
  Also, it updates error messages for failed connections, showing the ip
  addresses that failed rather than just the host name repeatedly.
  
  Bug: http://curl.haxx.se/mail/lib-2013-10/0236.html
  Reported-by: Paul Marks

Steve Holme (28 Oct 2013)
- sasl: Updated create_digest_md5_message() to use a dynamic buffer

Daniel Stenberg (28 Oct 2013)
- SECURITY: "curl security for developers"
  
  Describes our security process from a project and curl developer's
  perspective.

Patrick Monnerat (28 Oct 2013)
- OS400: coding style standards

Steve Holme (27 Oct 2013)
- email: Added support for cancelling NTLM authentication

- sasl: Removed unused variables from commit b87ba2c94217c0

- email: Added support for cancelling DIGEST-MD5 authentication

- email: Corrected a couple of typos from 1e39b95682781f

Daniel Stenberg (27 Oct 2013)
- [Gisle Vanem brought this change]

  docs/examples/httpput.c: fix build for MSVC
  
  "Dan Fandrich" <dan@coneharvesters.com> wrote:
  
  >> But I'm not sure <unistd.h> is needed at all.
  >
  > It's needed for close(2). But the only reason that's needed is because fstat
  > is used instead of stat(2); if you fix that, then you could remove that
  > include altogether.
  
  Okay. I've tested the following with MSVC and MingW. htttput.c now
  simply uses stat():

Steve Holme (27 Oct 2013)
- email: Added support for canceling CRAM-MD5 authentication

Daniel Stenberg (27 Oct 2013)
- [Björn Stenberg brought this change]

  Typo fix in trynextip().

- TODO: remove "Happy Eyeball dual stack connect"
  
  ... as it was just merged in commit 7d7df

- [Björn Stenberg brought this change]

  Add "Happy Eyeballs" for IPv4/IPv6.
  
  This patch invokes two socket connect()s nearly simultaneously, and
  the socket that is first connected "wins" and is subsequently used for
  the connection. The other is terminated.
  
  There is a very slight IPv4 preference, in that if both sockets connect
  simultaneously IPv4 is checked first and thus will win.

Steve Holme (27 Oct 2013)
- email: Added initial support for cancelling authentication
  
  Should a client application fail to decode an authentication message
  received from a server, or not support any of the parameters given by
  the server in the message, then the authentication phrase should be
  cancelled gracefully by the client rather than simply terminating the
  connection.
  
  The authentication phrase should be cancelled by simply sending a '*'
  to the server, in response to erroneous data being received, as per
  RFC-3501, RFC-4954 and RFC-5034.
  
  This patch adds the necessary state machine constants and appropriate
  response handlers in order to add this functionality for the CRAM-MD5,
  DIGEST-MD5 and NTLM authentication mechanisms.

- email: Moved authentication message parsing into a separate function
  
  ...in preparation for upcoming modifications.

- ftp: Fixed compiler warning
  
  warning: 'result' may be used uninitialized in this function

Daniel Stenberg (26 Oct 2013)
- FTP: make the data connection work when going through proxy
  
  This is a regression since the switch to always-multi internally
  c43127414d89c.
  
  Test 1316 was modified since we now clearly call the Curl_client_write()
  function when doing the LIST transfer part and then the
  handler->protocol says FTP and ftpc.transfertype is 'A' which implies
  text converting even though that the response is initially a HTTP
  CONNECT response in this case.

Steve Holme (26 Oct 2013)
- tool_help: Added login options to --user description

- email: Added references to SASL LOGIN authentication draft proposal

- tests: Tidy up of SMTP and POP3 tests
  
  Corrected line endings, RFC references and standardised on user names
  and passwords used in the tests.

- tool_help: Added clarity to the --oauth2-bearer option
  
  ...as XOAUTH2 is the extended (or non-standard) SASL identifier and
  OAuth 2 is the protocol name (and version).

- smtp: Fixed response code parsing for bad AUTH continuation responses
  
  This workaround had been previously been implemented for IMAP and POP3
  but not SMTP. Some of the recent test case additions implemented this
  behaviour to emulate a bad server and the SMTP code didn't cope with it.

- gskit.c: Code policing following commit 2cc9246477285d
  
  Corrected 80 character line length error and pointer declarations (some
  of which were previously incorrect)

- test907: Corrected DIGEST-MD5 response given in commit 820ed48a0088cd
  
  As the URI, which is contained within the DIGEST-MD5 response, is
  constructed from the service and realm, the encoded message differs
  from that generated under POP3.

- RELEASE-NOTES: Synced with d24b7953c2132a

- tests: Added SMTP OAUTH2 authentication with initial response test

- tests: Added SMTP NTLM authentication with initial response test

- tests: Added SMTP OAUTH2 authentication test

- tests: Added SMTP DIGEST-MD5 authentication test

- tests: Regrouped SMTP authentication tests

Patrick Monnerat (25 Oct 2013)
- OS400: sync RPG wrapper, zlib support, fix header file names, ...
  IFS compilation support, SSL GSKit backend by default, TLSv1.[12] support in
    GSKit for OS400 >= V7R1, no more tabs in make scripts.

Steve Holme (24 Oct 2013)
- sasl: Fixed memory leak in OAUTH2 message creation

- ftpserver.pl: Added support for empty pop3 authentication data

Daniel Stenberg (23 Oct 2013)
- CURLOPT_RESOLVE: mention they don't time-out
  
  Clarify in the documentation that DNS entries added with CURLOPT_RESOLVE
  won't time-out.
  
  Bug: http://curl.haxx.se/mail/lib-2013-10/0062.html
  Reported-by: Romulo Ceccon

Steve Holme (23 Oct 2013)
- tests: Added POP3 OAUTH2 authentication test

- tests: Added empty response support to custom replies
  
  ...and fixed up test869 as DIGEST-MD transcript is as follows:
  
  S: Challenge
  C: Authentication String
  S: Continue Response
  C: Empty String

Daniel Stenberg (23 Oct 2013)
- sasl: fix compiler warning
  
  error: unused variable 'table16'

Steve Holme (23 Oct 2013)
- tests: Added POP3 DIGEST-MD5 authentication test

Daniel Stenberg (22 Oct 2013)
- configure: check for long long when building with cyassl
  
  cyassl/ctaocrypt/types.h needs SIZEOF_LONG_LONG
  
  Reported-by: Chris Conlon

- test1240: verify 867b52a7ac52 (glob ranges with text to the right)

- glob: fix regression from commit 5ca96cb844
  
  Plain strings after glob ranges/lists weren't treated correctly but
  caused broken URLs to get used.
  
  Reported-by: Javier Barroso

- [Rémy Léone brought this change]

  Adding a .travis.yml file to use the travis-ci.org
  
  From wikipedia:
  
  Travis CI is a hosted, distributed continuous integration service used
  to build and test projects hosted at GitHub.
  
  Travis CI is configured by adding a file named .travis.yml, which is a
  YAML format text file, to the root directory of the GitHub repository.
  
  Travis CI automatically detects when a commit has been made and pushed
  to a GitHub repository that is using Travis CI, and each time this
  happens, it will try to build the project and run tests. This includes
  commits to all branches, not just to the master branch. When that
  process has completed, it will notify a developer in the way it has been
  configured to do so — for example, by sending an email containing the
  test results (showing success or failure), or by posting a message on an
  IRC channel. It can be configured to run the tests on a range of
  different machines, with different software installed (such as older
  versions of a programming language, to test for compatibility).

Kamil Dudka (21 Oct 2013)
- ssh: initialize per-handle data in ssh_connect()
  
  ... if not already initialized.  This fixes a regression introduced by
  commit 4ad8e142da463ab208d5b5565e53291c8e5ef038, which caused test619
  to intermittently fail on certain machines (namely Fedora build hosts).

Daniel Stenberg (20 Oct 2013)
- [Gisle Vanem brought this change]

  curl.1: add missing exit-code
  
  I noted a missing text for exit-code 89 in docs/curl.1

- cmake: unbreak for non-Windows platforms
  
  Patch-by: Oliver Kuckertz
  Bug: http://curl.haxx.se/bug/view.cgi?id=1292

Steve Holme (20 Oct 2013)
- ftpserver.pl: Fixed syntax error from commit 5b31b38c27bb7a

- test866: Fixed user response from commit 7f7fbe7fbdb449

- ftpserver.pl: Fixed processing of POP3 authentication strings
  
  ...and corrected response when check fails from 500 to -ERR.

- tests: Added POP3 NTLM authentication test

- tests: Added POP3 CRAM-MD5 authentication test

- tests: Added POP3 login authentication test

- tests: Added POP3 plain authentication test

- tests: Added POP3 APOP authentication test

- ftpserver.pl: Added support for APOP POP3 authentication

- tests: Added POP3 RSET test

- RELEASE-NOTES: Synced with ce61510127ea60

- email: Fixed QUIT / LOGOUT being sent when SSL connect fails

Kamil Dudka (18 Oct 2013)
- curl_sasl: initialize NSS before using crypto

Steve Holme (17 Oct 2013)
- SSL: Follow up work to commits 6a1363128f1107 and 87861c9b0e8155
  
  Changed the failure code when TLS v1.1 and v1.2 is requested but not
  supported by older OpenSSL versions, following review from libcurl
  peers, and reduced the number of required preprocessor if statements.

- SSL: Added unsupported cipher version check for OpenSSL
  
  ...with the use of CURL_SSLVERSION_TLSv1_1 and CURL_SSLVERSION_TLSv1_2
  being conditional on OpenSSL v1.0.1 as the appropriate flags are not
  supported under earlier versions.

- DOCS: Added libcurl version number to CURLOPT_SSLVERSION

- SSL: Corrected version number for new symbols from commit ad34a2d5c87c7f

- SSL: Corrected typo from commit 87861c9b0e8155

- SSL: Fixed OpenSSL builds prior to v1.0.1
  
  Commit ad34a2d5c87c7f relies on definitions that are only present in
  OpenSSL v1.0.1 and up. This quick fix allows the builds that use
  older versions of OpenSSL to continue building.

- test906: Fixed failing test on some platforms
  
  Bug: http://sourceforge.net/p/curl/bugs/1291
  Reported-by: David Walser

Daniel Stenberg (15 Oct 2013)
- [Paul Donohue brought this change]

  NSS: acknowledge the --no-sessionid/CURLOPT_SSL_SESSIONID_CACHE option

- [Tyler Hall brought this change]

  ssh: Handle successful SSH_USERAUTH_NONE
  
  According to the documentation for libssh2_userauth_list(), a NULL
  return value is not necessarily an error. You must call
  libssh2_userauth_authenticated() to determine if the SSH_USERAUTH_NONE
  request was successful.
  
  This fixes a segv when using sftp on a server that allows logins with an
  empty password. When NULL was interpreted as an error, it would
  free the session but not flag an error since the libssh2 errno would be
  clear. This resulted in dereferencing a NULL session pointer.
  
  Signed-off-by: Tyler Hall <tylerwhall@gmail.com>

- [Ishan SinghLevett brought this change]

  usercertinmem: fix memory leaks

- [Dave Reisner brought this change]

  build: distribute and install libcurl.m4 by default

- [Dave Reisner brought this change]

  tool: use XFERFUNCTION to save some casts

- [Alessandro Ghedini brought this change]

  curl.1: fix typo conjuction -> conjunction

- curl: document the new --tlsv1.[012] options

- [Gergely Nagy brought this change]

  SSL: protocol version can be specified more precisely
  
  CURL_SSLVERSION_TLSv1_0, CURL_SSLVERSION_TLSv1_1,
  CURL_SSLVERSION_TLSv1_2 enum values are added to force exact TLS version
  (CURL_SSLVERSION_TLSv1 means TLS 1.x).
  
  axTLS:
  axTLS only supports TLS 1.0 and 1.1 but it cannot be set that only one
  of these should be used, so we don't allow the new enum values.
  
  darwinssl:
  Added support for the new enum values.
  
  SChannel:
  Added support for the new enum values.
  
  CyaSSL:
  Added support for the new enum values.
  Bug: The original CURL_SSLVERSION_TLSv1 value enables only TLS 1.0 (it
  did the same before this commit), because CyaSSL cannot be configured to
  use TLS 1.0-1.2.
  
  GSKit:
  GSKit doesn't seem to support TLS 1.1 and TLS 1.2, so we do not allow
  those values.
  Bugfix: There was a typo that caused wrong SSL versions to be passed to
  GSKit.
  
  NSS:
  TLS minor version cannot be set, so we don't allow the new enum values.
  
  QsoSSL:
  TLS minor version cannot be set, so we don't allow the new enum values.
  
  OpenSSL:
  Added support for the new enum values.
  Bugfix: The original CURL_SSLVERSION_TLSv1 value enabled only TLS 1.0,
  now it enables 1.0-1.2.
  
  Command-line tool:
  Added command line options for the new values.

Nick Zitzmann (14 Oct 2013)
- darwinssl: un-break iOS build after PKCS#12 feature added
  
  SecPKCS12Import() returns a few errors that are enumerated in OS X's
  headers but not in iOS' headers for some reason.

Daniel Stenberg (14 Oct 2013)
- bump: start working on 7.33.1

- THANKS: added contributors from the 7.33.0 announcement

Version 7.33.0 (13 Oct 2013)

Daniel Stenberg (13 Oct 2013)
- RELEASE-NOTES: synced with 92cf6141ed0de

- curl: fix --oauth2-bearer in the --help output
  
  After the option rename in 5df04bfafd1

- OpenSSL: improve the grammar of the language in 39beaa5ffbcc
  
  Reported-by: Petr Pisar

- [Andrej E Baranov brought this change]

  OpenSSL: use failf() when subjectAltName mismatches
  
  Write to CURLOPT_ERRORBUFFER information about mismatch alternative
  certificate subject names.
  
  Signed-off-by: Andrej E Baranov <admin@andrej-andb.ru>

- curl: rename --bearer to --oauth2-bearer
  
  The option '--bearer' might be slightly ambiguous in name. It doesn't
  create any conflict that I am aware of at the moment, however, OAUTH v2
  is not the only authentication mechanism which uses "bearer" tokens.
  
  Reported-by: Kyle L. Huff
  URL: http://curl.haxx.se/mail/lib-2013-10/0064.html

- [Kamil Dudka brought this change]

  ssh: improve the logic for detecting blocking direction
  
  This fixes a regression introduced by commit 0feeab78 limiting the speed
  of SCP upload to 16384 B/s on a fast connection (such as localhost).

Dan Fandrich (12 Oct 2013)
- Fixed typo in Makefile.inc that left http2.h out of the tar ball

Daniel Stenberg (11 Oct 2013)
- [Heinrich Schaefer brought this change]

  minor fix in doc

- [Gisle Vanem brought this change]

  curl_setup_once: fix errno access for lwip on Windows
  
  lib/curl_setup_once.h assumed lwIP on Windows uses 'SetLastError()' to
  set network errors. It doesn't; it uses 'errno'.

- test1239: verify 4cd444e01ad and the simulated 304 response

- [Derek Higgins brought this change]

  HTTP: Output http response 304 when modified time is too old
  
  When using the -w '%{http_code}' flag and simulating a Not Modified then
  304 should be output.

- contributors: helper script to dig out contributors from git

- RELEASE-NOTES: add twos refs to bug reports

- RELEASE-NOTES: synced with 173160c0d068

Nick Zitzmann (2 Oct 2013)
- darwinssl: block TLS_RSA_WITH_NULL_SHA256 cipher
  
  Credit (for catching a cipher I forgot to add to the blocked ciphers list):
  https://www.ssllabs.com/ssltest/viewMyClient.html

Daniel Stenberg (2 Oct 2013)
- OpenSSL: acknowledge CURLOPT_SSL_VERIFYHOST without VERIFYPEER
  
  Setting only CURLOPT_SSL_VERIFYHOST without CURLOPT_SSL_VERIFYPEER set
  should still verify that the host name fields in the server certificate
  is fine or return failure.
  
  Bug: http://curl.haxx.se/mail/lib-2013-10/0002.html
  Reported-by: Ishan SinghLevett

- KNOWN_BUGS: #84: CURLINFO_SSL_VERIFYRESULT
  
  CURLINFO_SSL_VERIFYRESULT is only implemented for the OpenSSL and NSS
  backends and not for any other!

- [François Charlier brought this change]

  xattr: add support for FreeBSD xattr API

- curl_easy_setopt.3: slight clarification of SEEKFUNCTION

Steve Holme (29 Sep 2013)
- tests: Fixed typos from commit 25a0c96a494297

- tests: Updated email addresses in SMTP tests following recent changes

- test909: Removed custom EHLO response after recent changes
  
  ...as it is no longer required following capability and authentication
  changes and is now causing problems following commit 49341628b50007 as
  the test number is obtained from the client address in the EHLO.

- ftpserver.pl: Fixed compilation error from commit 49341628b50007

- ftpserver.pl: Moved specifying the test number from the RCPT address
  
  ...to the client address as this frees the RCPT strings to contain
  just an email address and by passing the test number into curl as the
  client address remains consistent with POP3 and IMAP tests as they are
  specified in the URL.

- ftpserver.pl: Added unwanted argument check to SMTP DATA command handler

Daniel Stenberg (29 Sep 2013)
- getinmemory: remove a comment
  
  The comment mentioned the need to free the data, but the example already
  does that free

- postinmemory: new example
  
  This is similar to getinmemory.c but with an initial POST.
  
  Combined-by: Ulf Samuelsson

- win32: fix Visual Studio 2010 build with WINVER >= 0x600
  
  If no WINVER and/or _WIN32_IWNNT define was set, the Windows platform
  SDK often defaults to high value, e.g. 0x601 (whoch may probably depend
  on the Windows version being used, in my case Windows 7).
  
  If WINVER >= 0x600 then winsock2.h includes some defines for WSAPoll(),
  e.g. POLLIN, POLLPRI, POLLOUT etc. These defines clash with cURL's
  lib/select.h.
  
  Make sure HAVE_STRUCT_POLLFD is defined then.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1282
  Reported-by: "kdekker"
  Patch-by: Marcel Raad

Steve Holme (28 Sep 2013)
- ssluse.c: Fixed compilation warnings when ENGINE not supported
  
  The function "ssl_ui_reader" was declared but never referenced
  The function "ssl_ui_writer" was declared but never referenced

Daniel Stenberg (27 Sep 2013)
- configure: use icc options without space
  
  The latest version(s) of the icc compiler no longer accept the extra
  space in the -we (warning enable), -wd (warning disable), etc.
  
  Reported-by: Elmira A Semenova
  Bug: http://curl.haxx.se/mail/lib-2013-09/0182.html

Steve Holme (25 Sep 2013)
- imap: Added clarification to the code about odd continuation responses

- ftp.c: Fixed compilation warning
  
  There is an implicit conversion from "unsigned long" to "long"

- sasl: Centralised the authentication mechanism strings
  
  Moved the standard SASL mechanism strings into curl_sasl.h rather than
  hard coding the same values over and over again in the protocols that
  use SASL authentication.
  
  For more information about the mechanism strings see:
  
  http://www.iana.org/assignments/sasl-mechanisms

Daniel Stenberg (23 Sep 2013)
- RELEASE-NOTES: added recent contributors missing

Steve Holme (23 Sep 2013)
- test906: Fixed type-2 response

- test915: Corrected test number from commit 22bccb0edaf041

- test906: Fixed type-1 message not handled error
  
  ...from commit f81d1e16664976 due to copy paste error.

- tests: Added SMTP AUTH NTLM test

- tests: Added SMTP multiple and invalid --mail-rcpt test

- tests: Added SMTP multiple --mail-rcpt test

- tests: Added SMTP invalid --mail-rcpt test

- tests: Regrouping of SMTP tests

Daniel Stenberg (22 Sep 2013)
- [Benoit Sigoure brought this change]

  test1112: Increase the timeout from 7s to 16s
  
  As someone reported on the mailing list a while back, the hard-coded
  arbitrary timeout of 7s in test 1112 is not sufficient in some build
  environments. At Arista Networks we build and test curl as part of our
  automated build system, and we've run into this timeout 170 times so
  far. Our build servers are typically quite busy building and testing a
  lot of code in parallel, so despite being beefy machines with 32 cores
  and 128GB of RAM we still hit this 7s timeout regularly.
  
  URL: http://curl.haxx.se/mail/lib-2010-02/0200.html

Steve Holme (22 Sep 2013)
- tests: Fixed smtp rcpt to addresses

- ftpserver.pl: Expanded the SMTP RCPT handler to validate TO addresses
  
  RCPT_smtp() will now check for a correctly formatted TO address which
  allows for invalid recipient addresses to be added.

- ftpserver.pl: Added cURL SMTP server detection to HELO command handler
  
  As curl will send a HELO command after an negative EHLO response, added
  the same detection from commit b07709f7417c3e to the HELO handler to
  ensure the test server is identified correctly and an upload isn't
  performed.

- ftpserver.pl: Corrected response code for successful RCPT command

- ftpserver.pl: Moved invalid RCPT TO: address detection to RCPT handler
  
  Rather than detecting the TO address as missing in the DATA handler,
  moved the detection to the RCPT command handler where an error response
  can be generated.

- RELEASE-NOTES: Corrected missed addition
  
  Somehow commit 60a20461629fda missed the last item in the sync list
  even though I'm sure I added it during editing.

- RELEASE-NOTES: Synced with 6dd8bd8d2f9729

- curl.1: Added information about optional login options to --user in manpage
  
  Added missing information, from curl 7.31.0, regarding the use of the
  optional login options that may be specified as part of --user.
  
  For example:
  
  --user 'user:password;auth=NTLM' in IMAP, POP3 and SMTP protocols.

- ftpserver.pl: Moved cURL SMTP server detection into EHLO command handler
  
  Moved the special SMTP server detection code from the DATA command
  handler, which happens further down the operation chain after EHLO,
  MAIL and RCPT commands, to the EHLO command as it is the first command
  to be generated by a SMTP operation as well as containing the special
  "verifiedserver" string from the URL.
  
  This not only makes it easier and quicker to detect but also means that
  cURL doesn't need to specify "verifiedserver" as --mail-from and
  --mail-rcpt arguments.
  
  More importantly, this also makes the upcoming verification changes to
  the RCPT handler easier to implement.

Daniel Stenberg (21 Sep 2013)
- openssl: use correct port number in error message
  
  In ossl_connect_step2() when the "Unknown SSL protocol error" occurs, it
  would output the local port number instead of the remote one which
  showed when doing SSL over a proxy (but with the correct remote host
  name). As libcurl only speaks SSL to the remote we know it is the remote
  port.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1281
  Reported-by: Gordon Marler

- test1415: adjusted to work for 32bit time_t
  
  The libcurl date parser returns INT_MAX for all dates > 2037 so this
  test is now made to use 2037 instead of 2038 to work the same for both
  32bit and 64bit time_t systems.

Steve Holme (21 Sep 2013)
- tests: Reworked existing SMTP tests to be single recipient based
  
  ...in preparation of upcoming multiple recipient tests.

- ftpserver.pl: Corrected SMTP QUIT response to be more realistic

Daniel Stenberg (20 Sep 2013)
- curl_easy_setopt.3: clarify that TIMEOUT and TIMEOUT_MS set the same value

- [Kim Vandry brought this change]

  Documented --dns-* options in curl manpage

Steve Holme (20 Sep 2013)
- pop3: Added basic SASL XOAUTH2 support
  
  Added the ability to use an XOAUTH2 bearer token [RFC6750] with POP3 for
  authentication using RFC6749 "OAuth 2.0 Authorization Framework".
  
  The bearer token is expected to be valid for the user specified in
  conn->user. If CURLOPT_XOAUTH2_BEARER is defined and the connection has
  an advertised auth mechanism of "XOAUTH2", the user and access token are
  formatted as a base64 encoded string and sent to the server as
  "AUTH XOAUTH2 <bearer token>".

- curl: Added clarification to the --mail options in the --help output
  
  ... that these options apply to SMTP only.

- ftpserver.pl: Moved SMTP RCPT response text into command handler

- tests: Added SMTP invalid --mail-from test

Nick Zitzmann (19 Sep 2013)
- darwinssl: enable BEAST workaround on iOS 7 & later
  
  iOS 7 finally added the option to enable 1/n-1 when using TLS 1.0
  and a CBC cipher, so we now always turn that on unless the user
  manually turns it off using CURLSSLOPT_ALLOW_BEAST.
  
  It appears Apple also added some new PSK ciphers, but no interface to
  use them yet, so we at least support printing them if we find them.

Steve Holme (19 Sep 2013)
- tests: Updated SMTP AUTH tests to use the new AUTH directive
  
  ...rather than specify a customised EHLO response.

- tests: Corrected test913 as the QUIT response is received

- tests: Added SMTP large message SIZE test

- ftpserver.pl: Updated email regex from commit 98f7ca7e971006
  
  ...to not be as strict as it was rejecting valid numeric email
  addresses.

- tests: Fixed smtp mail from addresses

- ftpserver.pl: Standardised CAPA and AUTH responses

- ftpserver.pl: Corrected POP3 QUIT reply to be more realistic

- runtests.pl: Fixed syntax error in commit c873375123343e
  
  Possible unintended interpolation in string at line 796

- runtests.pl: Fixed smtp mail from address
  
  Following changes to ftpserver.pl fixed the mail from address to be a
  correctly formatted address otherwise the server response will be 501
  Invalid address.

- ftpserver.pl: Fixed syntax error in commit 98f7ca7e971006
  
  Can't modify constant item in scalar assignment line 779, near "0;"

- ftpserver.pl: Expanded the SMTP MAIL handler to validate messages
  
  MAIl_smtp() will now check for a correctly formatted FROM address as
  well as the optional SIZE parameter comparing it against the server
  capability when specified.

Daniel Stenberg (17 Sep 2013)
- [YAMADA Yasuharu brought this change]

  cookies: add expiration
  
  Implement: Expired Cookies These following situation, curl removes
  cookie(s) from struct CookieInfo if the cookie expired.
   - Curl_cookie_add()
   - Curl_cookie_getlist()
   - cookie_output()

Steve Holme (17 Sep 2013)
- ftpserver.pl: Corrected response code for successful MAIL command

- ftpserver.pl: Moved SMTP MAIL handler into own function

- dns: fix compilation with MinGW from commit df69440d05f113
  
  Avoid 'interface' literal that some MinGW versions define as a macro
  
  Additionally, corrected some very, very minor coding style errors.

- tests: Fixed test 1406 following recent changes in ftpserver.pl
  
  By default the mail server doesn't send the SIZE capability but instead
  it has to be specified as a supported capability.

- tests: Added test for SMTP SIZE capability

- ftpserver.pl: Added the ability to include spaces in capabilities
  
  For example:
  
  CAPA "SIZE 1048576" 8BITMIME BINARYMIME
  
  will populate the capabilities list with the following in:
  
  SIZE 1048576
  8BITMIME
  BINARYMIME

- ftpserver.pl: Corrected response code for successful SMTP QUIT command

- ftpserver.pl: Fixed syntax error in commit 33c1f2876b9029
  
  Can't modify constant item in postincrement line 727, near "i++"

- ftpserver.pl: Added CAPA & AUTH directive support to the SMTP EHLO handler

- ftpserver.pl: Fixed SMTP QUIT handler from dadc495540946e

- ftpserver.pl: Moved SMTP EHLO and QUIT handlers in own functions

- ftpserver.pl: Added support for SMTP HELO command
  
  ...and updated test902 as explicit HELO response is no longer required.

- ftpserver.pl: Added mailbox check to IMAP SELECT handler

- ftpserver.pl: Corrected invalid user details check
  
  ...in both the IMAP LOGIN and POP3 PASS handlers introduced in commit
  187ac693744949 and 84ad1569e5fc93 respectively.

- ftpserver.pl: Moved IMAP LOGIN handler into own function

- ftpserver.pl: Moved POP3 USER and PASS handlers into own functions

- ftpserver.pl: Corrected invalid argument check in POP3 TOP handler
  
  ...which was accidentally introduced in commit 4d6ef6297ae9b6.

- ftpserver.pl: Added capability prerequisite for extended POP3 commands

- tests: Updated descriptions to be more meaningful

- ftpserver.pl: Added support for IMAP NOOP command

- imap: Fixed response check for NOOP command

- tests: Updated descriptions to be more meaningful

Daniel Stenberg (13 Sep 2013)
- curl.1: detail how short/long options work
  
  URL: http://curl.haxx.se/bug/view.cgi?id=1279
  Suggested-by: Jerry Krinock

Steve Holme (13 Sep 2013)
- curl: Fixed usage of DNS options when not using c-ares resolver
  
  Commit 32352ed6adddcb introduced various DNS options, however, these
  would cause curl to exit with CURLE_NOT_BUILT_IN when c-ares wasn't
  being used as the backend resolver even if the options weren't set
  by the user.
  
  Additionally corrected some minor coding style errors from the same
  commit.

Daniel Stenberg (13 Sep 2013)
- curl_easy_setopt.3: mention RTMP URL quirks
  
  URL: http://curl.haxx.se/bug/view.cgi?id=1278
  Reported-by: Gorilla Maguila

- [Ben Greear brought this change]

  curl: Add support for various DNS binding options.
  
  (Passed on to c-ares.)
  
  Allows something like this:
  
  curl --dns-interface sta8 --dns-ipv4-addr 8.8.1.111 --interface sta8 \
  --localaddr 8.8.1.111 --dns-servers 8.8.8.1 www.google.com
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Kim Vandry brought this change]

  libcurl: New options to bind DNS to local interfaces or IP addresses

- libcurl.3: for multi interface connections are held in the multi handle
  
  ... and a few more cleanups/clarifications

Steve Holme (12 Sep 2013)
- ftpserver.pl: Fixed missing comma from 7fd84b14d219b1

- ftpserver.pl: Fixed variable error introduced in 7fd84b14d219b1
  
  Global symbol "$mailbox" requires explicit package name

- ftpserver.pl: Added support for UID command

- ftpserver.pl: Added support for LSUB command

- imap: Fixed response check for LSUB and UID commands

- ftpserver.pl: Added support for IMAP COPY command

- ftpserver.pl: Added support for IMAP CLOSE and EXPUNGE commands

- ftpserver.pl: Added support for POP3 RSET command

- ftpserver.pl: Added the ability to remember what messages are deleted
  
  ...as this will be required for IMAP CLOSE and EXPUNGE commands as well
  as the POP3 RSET command.

Daniel Stenberg (10 Sep 2013)
- NI_MAXSERV: remove all use of it
  
  Solaris with the SunStudio Compiler is reportedly missing this define,
  but as we're using it without any good reason on all the places it was
  used I've now instead switched to just use sensible buffer sizes that
  fit a 32 bit decimal number. Which also happens to be smaller than the
  common NI_MAXSERV value which is 32 on most machines.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1277
  Reported-by: D.Flinkmann

- http2: use the support HTTP2 draft version in the upgrade header
  
  ... instead of HTTP/2.0 to work fine with the nghttpx proxy/server.

Steve Holme (10 Sep 2013)
- ldap.c: Fix compilation warning
  
  warning: comparison between signed and unsigned integer expressions

- [Jiri Hruska brought this change]

  imap/pop3/smtp: Speed up SSL connection initialization
  
  Don't wait for the next callback call (usually 1 second) before
  continuing with protocol specific connection initialization.

- ldap.c: Corrected build error from commit 857f999353f333

- RELEASE-NOTES: Corrected duplicate in bfefe2400a16b8

- RELEASE-NOTES: Corrected typo from bfefe2400a16b8

- RELEASE-NOTES: synced with 25c68903756d6b

Daniel Stenberg (10 Sep 2013)
- README.http2: explain nghttp2 a little

Steve Holme (9 Sep 2013)
- tests: Added test for POP3 TOP command

- ftpserver.pl: Added support for POP3 TOP command

- tests: Added test for POP3 UIDL command

- ftpserver.pl: Added support for POP3 UIDL command

Daniel Stenberg (9 Sep 2013)
- http2: adjust to new nghttp2_pack_settings_payload proto
  
  This function was modified in nghttp2 git commit a1c3f89c72e51

Kamil Dudka (9 Sep 2013)
- url: handle abortion by read/write callbacks, too
  
  Otherwise, the FTP protocol would unnecessarily hang 60 seconds if
  aborted in the CURLOPT_HEADERFUNCTION callback.
  
  Reported by: Tomas Mlcoch
  Bug: https://bugzilla.redhat.com/1005686

Daniel Stenberg (9 Sep 2013)
- ldap: fix the build for systems with ldap_url_parse()
  
  Make sure that the custom struct fields are only used by code that
  doesn't use a struct defintion from the outside.
  
  Attempts to fix the problem introduced in 3dc6fc42bfc61b

Steve Holme (9 Sep 2013)
- [Jiri Hruska brought this change]

  pingpong: Check SSL library buffers for already read data
  
  Otherwise the connection can get stuck during various phases, waiting
  for new data on the socket using select() etc., but it will never be
  received as the data has already been read into SSL library.

- imap: Fixed calculation of transfer when partial FETCH received
  
  The transfer size would be calculated incorrectly if the email contained
  within the FETCH response, had been partially received by the pingpong
  layer. As such the following, example output, would be seen if the
  amount remaining was smaller than the amount received:
  
  * Excess found in a non pipelined read: excess = 1394, size = 262,
    maxdownload = 262, bytecount = 1374
  * transfer closed with -1112 bytes remaining to read
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0170.html
  Reported-by: John Dunn

- ftpserver.pl: Fixed empty array checks
  
  ...from commits 28427b408326a1 and e8313697b6554b.

- ftpserver: Reworked AUTH support to allow for specifying the mechanisms
  
  Renamed SUPPORTAUTH to AUTH and added support for specifying a list of
  supported SASL mechanisms to return to the client.
  
  Additionally added the directive to the FILEFORMAT document.

- ftpserver: Reworked CAPA support to allow for specifying the capabilities
  
  Renamed SUPPORTCAPA to CAPA and added support for specifying a list of
  supported capabilities to return to the client.
  
  Additionally added the directive to the FILEFORMAT document.

- ftpserver.pl: Corrected POP3 LIST as message numbers should be contiguous
  
  The message numbers given in the LIST response are an index into the
  list, which are only valid for the current session, rather than being a
  unique message identifier. An index would only be missing from the LIST
  response if a DELE command had been issued within the same session and
  had not been committed by the end of session QUIT command. Once
  committed the POP3 server will regenerate the message numbers in the
  next session to be contiguous again. As such our LIST response should
  list message numbers contiguously until we support a DELE command in the
  same session.
  
  Should a POP3 user require the unique message ID for any or all
  messages then they should use the extended UIDL command. This command
  will be supported by the test ftpserver in an upcoming commit.

Daniel Stenberg (8 Sep 2013)
- [Clemens Gruber brought this change]

  curl_easy_pause: suggest one way to unpause

Steve Holme (8 Sep 2013)
- tests: Updated descriptions to be more meaningful

- tests: Added test for POP3 NOOP command

- ftpserver.pl: Added support for POP3 NOOP command

- ftpserver.pl: Fixed 'Use of uninitialized value $args in string ne'

- tests: Added test for POP3 STAT command

- ftpserver.pl: Added support for POP STAT command

- ftpserver.pl: Moved POP3 QUIT handler into own function

- ftpserver.pl: Reordered the POP3 handlers to be alphabetical
  
  In preparation for additional POP3 tests, re-ordered the command
  function defintions to be sorted alphabetically.

- ftpserver.pl: Corrected misaligned indentation in POP3 handlers
  
  Fixed incorrect indentation used in both the RETR_pop3 and LIST_pop3
  functions which was 5 and 9 characters rather than 4 and 8.

- tests: Added test for POP3 DELE command

unknown (7 Sep 2013)
- [Steve Holme brought this change]

  ftpserver.pl: Added support for POP3 DELE command

Daniel Stenberg (7 Sep 2013)
- http2: include curl_memory.h
  
  Detected by test 1132

Nick Zitzmann (7 Sep 2013)
- http: fix build warning under LLVM
  
  When building the code using LLVM Clang without NGHTTP2, I was getting
  this warning:
  ../lib/http.h:155:1: warning: empty struct is a GNU extension [-Wgnu]
  Placing a dummy variable into the data structure silenced the warning.

Daniel Stenberg (7 Sep 2013)
- http2: actually init nghttp2 and send HTTP2-Settings properly

- README.http2: how to use it best with the multi API?

- http2: first embryo toward Upgrade:

- http: rename use_http_1_1 to use_http_1_1plus
  
  Since it now actually says if 1.1 or a later version should be used.

- configure: improve CURL_CHECK_COMPILER_PROTOTYPE_MISMATCH
  
  The compiler test used a variable before it was assigned when it tried
  to see how it acts on a mismatching prototype, which could cause a false
  positive.

- [Petr Písař brought this change]

  Pass password to OpenSSL engine by user interface
  
  Recent OpenSSL uses user interface abstraction to negotiate access to
  private keys in the cryprographical engines. An OpenSSL application is
  expected to implement the user interface. Otherwise a default one
  provided by OpenSSL (interactive standard I/O) will be used and the
  aplication will have no way how to pass a password to the engine.
  
  Longer-desc: http://curl.haxx.se/mail/lib-2013-08/0265.html

- urlglob: improved error messages and column number on bad use
  
  Introduce a convenience macro and keep of the column better so that it
  can point out the offending column better.
  
  Updated test 75 accordingly.

- urlglob: avoid error code translation
  
  By using the correct values from the start we don't have to translate
  them!

- urlglob: avoid NULL pointer dereference
  
  Thanks to clang-analyzer

- [Gisle Vanem brought this change]

  http2: use correct include for snprintf
  
  Using the first little merge of nghttp2 into libcurl, I stumbeled on the
  missing 'snprintf' in MSVCRT. Isn't this how we do it for other libcurl
  files?  I.e. use 'curl_msnprintf' and not 'snprintf' directly:

- --data: mention CRLF treatment when reading from file

- [Geoff Beier brought this change]

  LDAP: fix bad free() when URL parsing failed
  
  When an error occurs parsing an LDAP URL, The ludp->lud_attrs[i] entries
  could be freed even though they sometimes point to data within an
  allocated area.
  
  This change introduces a lud_attrs_dup[] array for the duplicated string
  pointers, and it removes the unused lud_exts array.
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0209.html

Nick Zitzmann (5 Sep 2013)
- darwinssl: add support for PKCS#12 files for client authentication
  
  I also documented the fact that the OpenSSL engine also supports them.

Daniel Stenberg (5 Sep 2013)
- symbols: added HTTP2 symbols and sorted list
  
  CURL_HTTP_VERSION_2_0 and CURL_VERSION_HTTP2 are new

- configure: add HTTP2 as a curl-config --feature output
  
  Fixes the test 1014 failure

- curl: unbreak --http1.0 again
  
  I broke it in 2eabb7d590

- SASL: fix compiler warnings
  
  comparison between signed and unsigned integer expressions
  
  suggest parentheses around '&&' within '||' (twice)

- curl: add --http1.1 and --http2.0 options

- Curl_setopt: refuse CURL_HTTP_VERSION_2_0 if built without support

- http2: add http2.[ch] and add nghttp2 version output

- curl -V: output HTTP2 as a feature if present

- curl.h: add CURL_VERSION_HTTP2 as a feature
  
  It isn't added as a separate protocol as HTTP2 will be done over HTTP://
  URLs that can be upgraded to HTTP2 if the server supports it as well.

Steve Holme (4 Sep 2013)
- imap/smtp: Fixed incorrect SASL mechanism selection with XOAUTH2 servers
  
  XOAUTH2 would be selected in preference to LOGIN and PLAIN if the IMAP
  or SMTP server advertised support for it even though a user's password
  was supplied but bearer token wasn't.
  
  Modified the selection logic so that XOAUTH2 will only be selected if
  the server supports it and A) The curl user/libcurl programmer has
  specifically asked for XOAUTH via the ;AUTH=XOAUTH login option or 2)
  The bearer token is specified. Obviously if XOAUTH is asked for via
  the login option but no token is specified the user will receive a
  authentication failure which makes more sense than no known
  authentication mechanisms supported!

Daniel Stenberg (4 Sep 2013)
- curl.h: added CURL_HTTP_VERSION_2_0
  
  Initial library considerations documented in lib/README.http2

- configure: added --with-nghttp2

- acinclude: fix --without-ca-path when cross-compiling
  
  The commit 7b074a460b64811 to CURL_CHECK_CA_BUNDLE in 7.31 (don't check
  for paths when cross-compiling) causes --without-ca-path to no longer
  works when cross-compiling, since ca and capath only ever get set to
  "no" when not cross-compiling, I attach a patch that works for me. Also
  in the cross-compilation case, no ca-path seems to be a better default
  (IMVHO) than empty ca-path.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1273
  Patch-by: Stefan Neis

Steve Holme (2 Sep 2013)
- lib1512.c: Fixed compilation warning
  
  An enumerated type is mixed with another type.
  
  ...as well as a small coding style error.

Guenter Knauf (1 Sep 2013)
- Killed warning 'res' might be used uninitialized.

Steve Holme (1 Sep 2013)
- url.c: Fixed compilation warning
  
  An enumerated type is mixed with another type

- easy.c: Fixed compilation warning
  
  warning: `code' might be used uninitialized in this function

Daniel Stenberg (31 Aug 2013)
- -x: rephrased the --proxy section somewhat

Steve Holme (31 Aug 2013)
- tests: Added test for IMAP CHECK command

- ftpserver.pl: Added support for the IMAP CHECK command

Guenter Knauf (31 Aug 2013)
- Removed reference to krb4.c.

Steve Holme (31 Aug 2013)
- ftpserver.pl: Corrected flawed logic in commit 1ca6ed7b75cad0

- imap: Fixed response check for EXPUNGE command

- ftpserver.pl: Added argument check to IMAP command handlers
  
  Added BAD argument check to the following IMAP command handlers:
  
  APPEND, STORE, LIST, EXAMINE, STATUS and SEARCH

- ftpserver.pl: More whitespace corrections
  
  LIST_imap() had a second level of indentation at 9 characters and not 8.

- ftpserver.pl: Small correction tidy up
  
  Corrected some IMAP variable names and whitespace issues.

- [Kyle L. Huff brought this change]

  docs: Added documentation for CURLOPT_BEARER

- [Kyle L. Huff brought this change]

  curl.1: Add usage of '--bearer' option

- tests: Added tests for IMAP CREATE, DELETE and RENAME commands

Daniel Stenberg (30 Aug 2013)
- ftpserver: Bareword "to_mailbox" not allowed
  
  Added missing $

Steve Holme (30 Aug 2013)
- ftpserver.pl: Added support for IMAP CREATE, DELETE and RENAME commands

Daniel Stenberg (29 Aug 2013)
- FTP: fix getsock during DO_MORE state
  
  ... when doing upload it would return the wrong values at times. This
  commit attempts to cleanup the mess.
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0109.html
  Reported-by: Mike Mio

- curl_multi_remove_handle: allow multiple removes
  
  When removing an already removed handle, avoid that to ruin the
  internals and just return OK instead.

Steve Holme (29 Aug 2013)
- ftpserver.pl: Updated IMAP EXAMINE handler to use dynamic test data

Daniel Stenberg (29 Aug 2013)
- unit1304: include memdebug and free everything correctly

- Curl_parsenetrc: document that the arguments must be allocated

- easy: rename struct monitor to socketmonitor
  
  'struct monitor', introduced in 6cf8413e, already exists in an IRIX
  header file (sys/mon.h) which gets included via various standard headers
  by lib/easy.c
  
  cc-1101 cc: ERROR File = ../../curl/lib/easy.c, Line = 458
  "monitor" has already been declared in the current scope.
  
  Reported-by: Tor Arntsen

Steve Holme (29 Aug 2013)
- ftpserver.pl: Added SELECT check to IMAP FETCH and STORE handlers

- ftpserver.pl: Corrected accidental move of logmsg() call
  
  Corrected the call to logmsg() in the IMAP SEARCH handler from commit
  4ae7b7ea691497 as it should have been outputting the what argument and
  not the test number.

Daniel Stenberg (28 Aug 2013)
- ftpserver: add missing '}' from 4ae7b7ea69149

Steve Holme (28 Aug 2013)
- ftpserver.pl: Added SELECT check to IMAP SEARCH command

- ftpserver.pl: Fixed IMAP SEARCH command

Daniel Stenberg (28 Aug 2013)
- bump: next release is 7.33.0 due to added features

- symbols-in-versions: add CURLOPT_XOAUTH2_BEARER

Steve Holme (28 Aug 2013)
- tests: Added test for IMAP SEARCH command

Daniel Stenberg (28 Aug 2013)
- valgrind.supp: fix for regular curl_easy_perform too
  
  When we introduced curl_easy_perform_ev, this got a slightly modified
  call trace. Without this, test 165 causes a false positive valgrind
  error.

- valgrind.supp: add the event-based call stack-trace too
  
  Without this, test 165 triggers a valgrind error when ran with
  curl_easy_perform_ev

- multi_socket: improved 100-continue timeout handling
  
  When waiting for a 100-continue response from the server, the
  Curl_readwrite() will refuse to run if called until the timeout has been
  reached.
  
  We timeout code in multi_socket() allows code to run slightly before the
  actual timeout time, so for test 154 it could lead to the function being
  executed but refused in Curl_readwrite() and then the application would
  just sit idling forever.
  
  This was detected with runtests.pl -e on test 154.

Steve Holme (27 Aug 2013)
- ftpserver.pl: Added support for IMAP SEARCH command

- tool_operate.c: Fixed compilation warning
  
  warning: implicit declaration of function 'checkpasswd'

- curl: Moved check for password out of get parameter loop
  
  Moved the calls to checkpasswd() out of the getparameter() function
  which allows for any related arguments to be specified on the command
  line before or after --user (and --proxy-user).
  
  For example: --bearer doesn't need to be specified before --user to
  prevent curl from asking for an unnecessary password as is the case
  with commit e7dcc454c67a2f.

- RELEASE-NOTES: synced with acf59be7f09a7

- [Kyle L. Huff brought this change]

  curl: added --bearer option to help
  
  Added the --bearer option to the help output

- [Kyle L. Huff brought this change]

  curl: added basic SASL XOAUTH2 support
  
  Added the ability to specify an XOAUTH2 bearer token [RFC6750] via the
  --bearer option.
  
  Example usage:
    curl --url "imaps://imap.gmail.com:993/INBOX/;UID=1" --ssl-reqd
    --bearer ya29.AHES6Z...OMfsHYI --user username@example.com

- tool_urlglob.c: Fixed compiler warnings
  
  warning: 'variable' may be used uninitialized in this function

Daniel Stenberg (26 Aug 2013)
- security.h: rename to curl_sec.h to avoid name collision
  
  I brought back security.h in commit bb5529331334e. As we actually
  already found out back in 2005 in commit 62970da675249, the file name
  security.h causes problems so I renamed it curl_sec.h instead.

- runtests.pl: allow -vc point to a separate curl binary to verify with
  
  The specified curl binary will then be used to verify the running
  server(s) instead of the development version. This is very useful in
  some cases when the development version fails to verify correctly as
  then the test case may not run at all.
  
  The actual test will still be run with the "normal" curl executable
  (unless the test case specifies something differently).

Steve Holme (26 Aug 2013)
- [Kyle L. Huff brought this change]

  smtp: added basic SASL XOAUTH2 support
  
  Added the ability to use an XOAUTH2 bearer token [RFC6750] with SMTP for
  authentication using RFC6749 "OAuth 2.0 Authorization Framework".
  
  The bearer token is expected to be valid for the user specified in
  conn->user. If CURLOPT_XOAUTH2_BEARER is defined and the connection has
  an advertised auth mechanism of "XOAUTH2", the user and access token are
  formatted as a base64 encoded string and sent to the server as
  "AUTH XOAUTH2 <bearer token>".

- [Kyle L. Huff brought this change]

  imap: added basic SASL XOAUTH2 support
  
  Added the ability to use an XOAUTH2 bearer token [RFC6750] with IMAP for
  authentication using RFC6749 "OAuth 2.0 Authorization Framework".
  
  The bearer token is expected to be valid for the user specified in
  conn->user. If CURLOPT_XOAUTH2_BEARER is defined and the connection has
  an advertised auth mechanism of "XOAUTH2", the user and access token are
  formatted as a base64 encoded string and sent to the server as
  "A001 AUTHENTICATE XOAUTH2 <bearer token>".

- security.h: Fixed compilation warning
  
  ISO C forbids forward references to 'enum' types

Daniel Stenberg (26 Aug 2013)
- KNOWN_BUGS: refer to bug numbers with the existing number series
  
  The old numbers would still redirect but who knows for how long...

Steve Holme (25 Aug 2013)
- [Kyle L. Huff brought this change]

  options: added basic SASL XOAUTH2 support
  
  Added the ability to specify an XOAUTH2 bearer token [RFC6750] via the
  option CURLOPT_XOAUTH2_BEARER for authentication using RFC6749 "OAuth
  2.0 Authorization Framework".

- [Kyle L. Huff brought this change]

  sasl: added basic SASL XOAUTH2 support
  
  Added the ability to generated a base64 encoded XOAUTH2 token
  containing: "user=<username>^Aauth=Bearer <bearer token>^A^A"
  as per RFC6749 "OAuth 2.0 Authorization Framework".

Daniel Stenberg (25 Aug 2013)
- FTP: remove krb4 support
  
  We've announced this pending removal for a long time and we've
  repeatedly asked if anyone would care or if anyone objects. Nobody has
  objected. It has probably not even been working for a good while since
  nobody has tested/used this code recently.
  
  The stuff in krb4.h that was generic enough to be used by other sources
  is now present in security.h

- easy: define away easy_events() for non-debug builds

- FAQ: editorial updates
  
  Several language fixes. Several reformats that should make the HTML
  generation of this document look better.
  
  Reported-by: Dave Thompson

- RELEASE-NOTES: synced with 22adb46a32bee

- multi: move on from STATE_DONE faster
  
  Make sure we always return CURLM_CALL_MULTI_PERFORM when we reach
  CURLM_STATE_DONE since the state is transient and it can very well
  continue executing as there is nothing to wait for.
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0211.html
  Reported-by: Yi Huang

- curl.h: name space pollution by "enum type"
  
  Renamed to "enum curl_khtype" now. Will break compilation for programs
  that rely on the enum name.
  
  Bug: https://github.com/bagder/curl/pull/76
  Reported-by: Shawn Landden

- TFTP: make the CURLOPT_LOW_SPEED* options work
  
  ... this also makes sure that the progess callback gets called more
  often during TFTP transfers.
  
  Added test 1238 to verify.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1269
  Reported-by: Jo3

- tftpd: support "writedelay" within <servercmd>

- tftpd: convert 6 global variables into local ones

- [Gisle Vanem brought this change]

  curl_easy_perform_ev: make it CURL_EXTERN
  
  I build curl.exe (using MingW) with '-DCURLDEBUG' and by importing from
  libcurl.dll.  Which means the new curl_easy_perform_ev() must be
  exported from libcurl.dll.

- CURLM_ADDED_ALREADY: new error code
  
  Doing curl_multi_add_handle() on an easy handle that is already added to
  a multi handle now returns this error code. It previously returned
  CURLM_BAD_EASY_HANDLE for this condition.

- multi_init: moved init code here from add_handle
  
  The closure_handle is "owned" by the multi handle and it is
  unconditional so the setting up of it should be in the Curl_multi_handle
  function rather than curl_multi_add_handle.

- multi: remove dns cache creation code from *add_handle
  
  As it is done unconditionally in multi_init() this code will never run!

- curl_easy_perform_ev: debug/test function
  
  This function is meant to work *exactly* as curl_easy_perform() but will
  use the event-based libcurl API internally instead of
  curl_multi_perform(). To avoid relying on an actual event-based library
  and to not use non-portable functions (like epoll or similar), there's a
  rather inefficient emulation layer implemented on top of Curl_poll()
  instead.
  
  There's currently some convenience logging done in curl_easy_perform_ev
  which helps when tracking down problems. They may be suitable to remove
  or change once things seem to be fine enough.
  
  curl has a new --test-event option when built with debug enabled that
  then uses curl_easy_perform_ev() instead of curl_easy_perform(). If
  built without debug, using --test-event will only output a warning
  message.
  
  NOTE: curl_easy_perform_ev() is not part if the public API on purpose.
  It is only present in debug builds of libcurl and MUST NOT be considered
  stable even then. Use it for libcurl-testing purposes only.
  
  runtests.pl now features an -e command line option that makes it use
  --test-event for all curl command line tests. The man page is updated.

- [Gisle Vanem brought this change]

  transfer: the recent sessionhandle change broke CURL_DOES_CONVERSIONS

- test1237: verify 1000+ letter user name + passwords

- [Jonathan Nieder brought this change]

  url: handle arbitrary-length username and password before '@'
  
  libcurl quietly truncates usernames, passwords, and options from
  before an '@' sign in a URL to 255 (= MAX_CURL_PASSWORD_LENGTH - 1)
  characters to fit in fixed-size buffers on the stack.  Allocate a
  buffer large enough to fit the parsed fields on the fly instead to
  support longer passwords.
  
  After this change, there are no more uses of MAX_CURL_OPTIONS_LENGTH
  left, so stop defining that constant while at it.  The hardcoded max
  username and password length constants, on the other hand, are still
  used in HTTP proxy credential handling (which this patch doesn't
  touch).
  
  Reported-by: Colby Ranger

- [Jonathan Nieder brought this change]

  url: handle exceptional cases first in parse_url_login()
  
  Instead of nesting "if(success)" blocks and leaving the reader in
  suspense about what happens in the !success case, deal with failure
  cases early, usually with a simple goto to clean up and return from
  the function.
  
  No functional change intended.  The main effect is to decrease the
  indentation of this function slightly.

- [Jonathan Nieder brought this change]

  Curl_setopt: handle arbitrary-length username and password
  
  libcurl truncates usernames, passwords, and options set with
  curl_easy_setopt to 255 (= MAX_CURL_PASSWORD_LENGTH - 1) characters.
  This doesn't affect the return value from curl_easy_setopt(), so from
  the caller's point of view, there is no sign anything strange has
  happened, except that authentication fails.
  
  For example:
  
    # Prepare a long (300-char) password.
    s=0123456789; s=$s$s$s$s$s$s$s$s$s$s; s=$s$s$s;
    # Start a server.
    nc -l -p 8888 | tee out & pid=$!
    # Tell curl to pass the password to the server.
    curl --user me:$s http://localhost:8888 & sleep 1; kill $pid
    # Extract the password.
    userpass=$(
          awk '/Authorization: Basic/ {print $3}' <out |
          tr -d '\r' |
          base64 -d
    )
    password=${userpass#me:}
    echo ${#password}
  
  Expected result: 300
  Actual result: 255
  
  The fix is simple: allocate appropriately sized buffers on the heap
  instead of trying to squeeze the provided values into fixed-size
  on-stack buffers.
  
  Bug: http://bugs.debian.org/719856
  Reported-by: Colby Ranger

- [Jonathan Nieder brought this change]

  netrc: handle longer username and password
  
  libcurl truncates usernames and passwords it reads from .netrc to
  LOGINSIZE and PASSWORDSIZE (64) characters without any indication to
  the user, to ensure the values returned from Curl_parsenetrc fit in a
  caller-provided buffer.
  
  Fix the interface by passing back dynamically allocated buffers
  allocated to fit the user's input.  The parser still relies on a
  256-character buffer to read each line, though.
  
  So now you can include an ~246-character password in your .netrc,
  instead of the previous limit of 63 characters.
  
  Reported-by: Colby Ranger

- [Jonathan Nieder brought this change]

  url: allocate username, password, and options on the heap
  
  This makes it possible to increase the size of the buffers when needed
  in later patches.  No functional change yet.

- [Jonathan Nieder brought this change]

  url: use goto in create_conn() for exception handling
  
  Instead of remembering before each "return" statement which temporary
  allocations, if any, need to be freed, take care to set pointers to
  NULL when no longer needed and use a goto to a common block to exit
  the function and free all temporaries.
  
  No functional change intended.  Currently the only temporary buffer in
  this function is "proxy" which is already correctly freed when
  appropriate, but there will be more soon.

- [Jonathan Nieder brought this change]

  sasl: allow arbitrarily long username and password
  
  Use appropriately sized buffers on the heap instead of fixed-size
  buffers on the stack, to allow for longer usernames and passwords.
  
  Callers never pass anything longer than MAX_CURL_USER_LENGTH (resp.
  MAX_CURL_PASSWORD_LENGTH), so no functional change inteded yet.

Steve Holme (19 Aug 2013)
- [Alex McLellan brought this change]

  imap: Fixed response check for SEARCH command
  
  Adding this line allows libcurl to return the server response when
  performing a search command via a custom request.

Daniel Stenberg (16 Aug 2013)
- glob: error out on range overflow
  
  The new multiply() function detects range value overflows. 32bit
  machines will overflow on a 32bit boundary while 64bit hosts support
  ranges up to the full 64 bit range.
  
  Added test 1236 to verify.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1267
  Reported-by: Will Dietz

- urlglob: better detect unclosed braces, empty lists and overflows
  
  A rather big overhaul and cleanup.
  
  1 - curl wouldn't properly detect and reject globbing that ended with an
  open brace if there were brackets or braces before it. Like "{}{" or
  "[0-1]{"
  
  2 - curl wouldn't properly reject empty lists so that "{}{}" would
  result in curl getting (nil) strings in the output.
  
  3 - By using strtoul() instead of sscanf() the code will now detected
  over and underflows. It now also better parses the step argument to only
  accept positive numbers and only step counters that is smaller than the
  delta between the maximum and minimum numbers.
  
  4 - By switching to unsigned longs instead of signed ints for the
  counters, the max values for []-ranges are now very large (on 64bit
  machines).
  
  5 - Bumped the maximum number of globs in a single URL to 100 (from 10)
  
  6 - Simplified the code somewhat and now it stores fixed strings as
  single- entry lists. That's also one of the reasons why I did (5) as now
  all strings between "globs" will take a slot in the array.
  
  Added test 1234 and 1235 to verify. Updated test 87.
  
  This commit fixes three separate bug reports.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1264
  Bug: http://curl.haxx.se/bug/view.cgi?id=1265
  Bug: http://curl.haxx.se/bug/view.cgi?id=1266
  Reported-by: Will Dietz

- [John Malmberg brought this change]

  VMS: Add RELEASE-NOTES to vms document
  
  Add the curl release notes to the release note document generated for
  VMS packages.
  
  Add the different filenames generated by a daily build to the
  cleanup procedures.

- [Tor Arntsen brought this change]

  tests 2032, 2033: Don't hardcode port in expected output

- ftp: convert state names to a global array
  
  ... just to make them easier to print in debug ouputs while debugging.
  They are still within #ifdef [debugbuild].

- --help: fix the --sasl-ir in the help output

- ftp_domore_getsock: when passive mode, the second conn is already there
  
  This makes the socket callback get called with the proper bitmask as
  otherwise the application could be left hanging waiting for reading on
  an upload connection!
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0043.html
  Reported-by: Bill Doyle

- curl: make --no-[option] work properly for several options
  
  --create-dirs, --crlf, --socks5-gssapi-nec and --sasl-ir

Kamil Dudka (12 Aug 2013)
- nss: make sure that NSS is initialized
  
  ... prior to calling PK11_GenerateRandom()

Daniel Stenberg (12 Aug 2013)
- multi: s/easy/data
  
  With everything being struct SessionHandle pointers now, this rename
  makes multi.c use the library-wide practise of calling that pointer
  'data' instead of the previously used 'easy'.

- cleanup: removed one function, made one static
  
  Moved Curl_easy_addmulti() from easy.c to multi.c, renamed it to
  easy_addmulti and made it static.
  
  Removed Curl_easy_initHandleData() and uses of it since it was emptied
  in commit cdda92ab67b47d74a.

- SessionHandle: the protocol specific pointer is now a void *
  
  All protocol handler structs are now opaque (void *) in the
  SessionHandle struct and moved in the request-specific sub-struct
  'SingleRequest'. The intension is to keep the protocol specific
  knowledge in their own dedicated source files [protocol].c etc.
  
  There's some "leakage" where this policy is violated, to be addressed at
  a later point in time.

- urldata: clean up the use of the protocol specific structs
  
  1 - always allocate the struct in protocol->setup_connection. Some
  protocol handlers had to get this function added.
  
  2 - always free at the end of a request. This is also an attempt to keep
  less memory in the handle after it is completed.

- version number: bump to 7.32.1 for now
  
  Start working on the next version and up some counters.

Version 7.32.0 (11 Aug 2013)

Daniel Stenberg (11 Aug 2013)
- THANKS: added contributors from the 7.32.0 release notes

- [Fabian Keil brought this change]

  test1228: add 'HTTP proxy' to the keywords

- [Fabian Keil brought this change]

  tests: add keywords for a couple of FILE tests

- [Fabian Keil brought this change]

  tests: add 'FAILURE' keywords to tests 1409 and 1410

- [Fabian Keil brought this change]

  tests: add keywords for a couple of HTTP tests

- [Fabian Keil brought this change]

  tests: add keywords for a couple of FTP tests

- [Fabian Keil brought this change]

  test1511: consistently terminate headers with CRLF

- DISABLED: shut of test 1512 for now
  
  It shows intermittent failures and I haven't been able to track them
  down yet. Disable this test for now.

- curl_multi_add_handle.3: ... that timer callback is for event-based

- comments: remove old and wrong multi/easy interface statements

- curl_multi_add_handle.3: mention the CURLMOPT_TIMERFUNCTION use

- [John E. Malmberg brought this change]

  KNOWN_BUGS: 22 and 57 have been fixed and committed

- RELEASE-NOTES: synced with d20def20462e7

- global dns cache: fix memory leak
  
  The take down of the global dns cache didn't take CURLOPT_RESOLVE names
  into account.

- global dns cache: didn't work [regression]
  
  CURLOPT_DNS_USE_GLOBAL_CACHE broke in commit c43127414d89ccb (been
  broken since the libcurl 7.29.0 release). While this option has been
  documented as deprecated for almost a decade and nobody even reported
  this bug, it should remain functional.
  
  Added test case 1512 to verify

Yang Tse (8 Aug 2013)
- [John Malmberg brought this change]

  packages/vms: update VMS build files
  
  VMS modified files either missing from a previous commit and changes
  to remove references to CVS repositories.

Daniel Stenberg (8 Aug 2013)
- FTP: renamed several local functions
  
  The previous naming scheme ftp_state_post_XXXX() wasn't really helpful
  as it wasn't always immediately after 'xxxx' and it wasn't easy to
  understand what it does based on such a name.
  
  This new one is instead ftp_state_yyyy() where yyyy describes what it
  does or sends.

- mk-ca-bundle.1: don't install on make install
  
  Since the mk-ca-bundle tool itself isn't installed with make install,
  there's no point in installing its documentation.
  
  Bug: http://curl.haxx.se/mail/lib-2013-08/0057.html
  Reported-by: Guenter Knauf

Yang Tse (7 Aug 2013)
- packages/vms/Makefile.am: add latest file additions to EXTRA_DIST

- [John Malmberg brought this change]

  Building_vms_pcsi_kit
  
  These are the files needed to build VMS distribution packages known as
  PCSI kits.
  
  Also minor update to the existing files, mainly to the documentation and
  file clean up code.

Daniel Stenberg (6 Aug 2013)
- LIBCURL-STRUCTS: new document
  
  This is the first version of this new document, detailing the seven
  perhaps most important internal structs in libcurl source code:
  
    1.1 SessionHandle
    1.2 connectdata
    1.3 Curl_multi
    1.4 Curl_handler
    1.5 conncache
    1.6 Curl_share
    1.7 CookieInfo

- CONTRIBUTE: minor language polish

- FTP: when EPSV gets a 229 but fails to connect, retry with PASV
  
  This is a regression as this logic used to work. It isn't clear when it
  broke, but I'm assuming in 7.28.0 when we went all-multi internally.
  
  This likely never worked with the multi interface. As the failed
  connection is detected once the multi state has reached DO_MORE, the
  Curl_do_more() function was now expanded somewhat so that the
  ftp_do_more() function can request to go "back" to the previous state
  when it makes another attempt - using PASV.
  
  Added test case 1233 to verify this fix. It has the little issue that it
  assumes no service is listening/accepting connections on port 1...
  
  Reported-by: byte_bucket in the #curl IRC channel

Nick Zitzmann (5 Aug 2013)
- md5: remove use of CommonCrypto-to-OpenSSL macros for the benefit of Leopard
  
  For some reason, OS X 10.5's GCC suddenly stopped working correctly with
  macros that change MD5_Init etc. in the code to CC_MD5_Init etc., so I
  worked around this by removing use of the macros and inserting static
  functions that just call CommonCrypto's implementations of the functions
  instead.

Guenter Knauf (5 Aug 2013)
- Simplify check for trusted certificates.
  
  This changes the previous check for untrusted certs to a check for
  certs explicitely marked as trusted.
  The change is backward-compatible (tested with certdata.txt v1.80).

Daniel Stenberg (5 Aug 2013)
- configure: warn on bad env variable use, don't error
  
  Use XC_CHECK_BUILD_FLAGS instead XC_CHECK_USER_FLAGS.

- Revert "configure: don't error out on variable confusions, just warn"
  
  This reverts commit 6b27703b5f525eccdc0a8409f51de8595c75132a.

- formadd: wrong pointer for file name when CURLFORM_BUFFERPTR used
  
  The internal function that's used to detect known file extensions for
  the default Content-Type got the the wrong pointer passed in when
  CURLFORM_BUFFER + CURLFORM_BUFFERPTR were used. This had the effect that
  strlen() would be used which could lead to an out-of-bounds read (and
  thus segfault). In most cases it would only lead to it not finding or
  using the correct default content-type.
  
  It also showed that test 554 and test 587 were testing for the
  previous/wrong behavior and now they're updated as well.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1262
  Reported-by: Konstantin Isakov

Guenter Knauf (4 Aug 2013)
- Skip more untrusted certificates.
  
  Christian Heimes brought to our attention that the certdata.txt
  format has recently changed [1], causing ca-bundle.crt created
  with mk-ca-bundle.[pl|vbs] to include untrusted certs.
  
  [1] http://lists.debian.org/debian-release/2012/11/msg00411.html

Daniel Stenberg (4 Aug 2013)
- configure: don't error out on variable confusions, just warn

- configure: rephrase the notice in _XC_CHECK_VAR_*
  
  Instead of claiming it is an error, we call it a "note" to reduce the
  severity level. But the following text now says the [variable] "*should*
  only be used to specify"... instead of previously having said "may".

- multi: remove data->state.current_conn struct field
  
  Not needed

- multi: remove the one_easy struct field
  
  Since the merge of SessionHandle with Curl_one_easy, this indirection
  isn't used anymore.

- multi: rename all Curl_one_easy to SessionHandle

- multi: remove the multi_pos struct field
  
  Since Curl_one_easy is really a SessionHandle now, this indirection
  doesn't exist anymore.

- multi: remove easy_handle struct field
  
  It isn't needed anymore

- multi: remove 'Curl_one_easy' struct, phase 1
  
  The motivation for having a separate struct that keep track of an easy
  handle when using the multi handle was removed when we switched to
  always using the multi interface internally. Now they were just two
  separate struct that was always allocated for each easy handle.
  
  This first step just moves the Curl_one_easy struct members into the
  SessionHandle struct and hides this somehow (== keeps the source code
  changes to a minimum) by defining Curl_one_easy to SessionHandle
  
  The biggest changes in this commit are:
  
   1 - the linked list of easy handles had to be changed somewhat due
       to the new struct layout. This made the main linked list pointer
       get renamed to 'easyp' and there's also a new pointer to the last
       node, called easylp. It is no longer circular but ends with ->next
       pointing to NULL. New nodes are still added last.
  
   2 - easy->state is now called easy->mstate to avoid name collision

Steve Holme (2 Aug 2013)
- Revert "DOCS: Added IMAP URL example for listing new messages"
  
  This reverts commit 82ab5f1b0c7c3f as this was the wrong place to
  document the complexity of IMAP URLs and Custom Requests.

- DOCS: Added IMAP URL example for listing new messages
  
  In addition to listing the folder contents, in the URL examples, added
  an example to list the new messages waiting in the user's inbox.

Yang Tse (1 Aug 2013)
- packages/vms/Makefile.am: add latest file additions to EXTRA_DIST

- [John Malmberg brought this change]

  Add in the files needed to build libcurl shared images on VMS.
  
  Update the packages/vms/readme file to be current.
  
  Also some files for the GNV based build were either missing or needed an
  update.
  
  curl_crtl_init.c is a special file that is run before main() to
  set up the proper C runtime behavior.
  
  generate_vax_transfer.com generates the VAX transfer vector modules from
  the gnv_libcurl_symbols.opt file.
  
  gnv_conftest.c_first is a helper file needed for configure scripts to
  come up with the expected answers on VMS.
  
  gnv_libcurl_symbols.opt is the public symbols for the libcurl shared
  image.
  
  gnv_link_curl.com builds the shared libcurl image and rebuilds other
  programs to use it.
  
  macro32_exactcase.patch is a hack to make a local copy of the VMS Macro32
  assembler case sensitive, which is needed to build the VAX transfer modules.
  
  report_openssl_version.c is a tool for help verify that the libcurl
  shared image is being built for a minium version of openssl.

- curl: second follow-up for commit 5af2bfb9
  
  Display progress-bar unconditionally on first call

- curl: follow-up for commit 5af2bfb9
  
  Use tvnow() and tvdiff() to avoid introducing new linkage issues

Daniel Stenberg (31 Jul 2013)
- curl: --progress-bar max update frequency now at 5Hz

- curl: make --progress-bar update the line less frequently
  
  Also, use memset() instead of a lame loop.
  
  The previous logic that tried to avoid too many updates were very
  ineffective for really fast transfers, as then it could easily end up
  doing hundreds of updates per second that would make a significant
  impact in transfer performance!
  
  Bug: http://curl.haxx.se/mail/archive-2013-07/0031.html
  Reported-by: Marc Doughty

Nick Zitzmann (30 Jul 2013)
- darwinssl: added LFs to some strings passed into infof()
  
  (This doesn't need to appear in the release notes.) I noticed a few places
  where infof() was called, and there should've been an LF at the end of the
  string, but there wasn't.

- darwinssl: fix build error in crypto authentication under Snow Leopard
  
  It turns out Snow Leopard not only has SecItemCopyMatching() defined in
  a header not included by the omnibus header, but it won't work for our
  purposes, because searching for SecIdentityRef objects wasn't added
  to that API until Lion. So we now use the old SecKeychainSearch API
  instead if the user is building under, or running under, Snow Leopard.
  
  Bug: http://sourceforge.net/p/curl/bugs/1255/
  Reported by: Edward Rudd

- md5 & metalink: use better build macros on Apple operating systems
  
  Previously we used __MAC_10_X and __IPHONE_X to mark digest-generating
  code that was specific to OS X and iOS. Now we use
  __MAC_OS_X_VERSION_MAX_ALLOWED and __IPHONE_OS_VERSION_MAX_ALLOWED
  instead of those macros.
  
  Bug: http://sourceforge.net/p/curl/bugs/1255/
  Reported by: Edward Rudd

Yang Tse (29 Jul 2013)
- tool_operhlp.c: fix add_file_name_to_url() OOM handling

- tool_operate.c: fix brace placement for vi/emacs delimiter matching

- tool_operate.c: move <fabdef.h> header inclusion location

Daniel Stenberg (29 Jul 2013)
- RELEASE-NOTES: synced with b5478a0e033e7

- curl_easy_pause: on unpause, trigger mulit-socket handling
  
  When the multi-socket API is used, we need the handle to be checked
  again when it gets unpaused.
  
  Bug: http://curl.haxx.se/mail/lib-2013-07/0239.html
  Reported-by: Justin Karneges

- [John E. Malmberg brought this change]

  curl_formadd: fix file upload on VMS
  
  For the standard VMS text file formats, VMS needs to read the file to
  get the actual file size.
  
  For the standard VMS binary file formats, VMS needs a special format of
  fopen() call so that it stops reading at the logical end of file instead
  of at the end of the blocks allocated to the file.
  
  I structured the patch this way as I was not sure about changing the
  structures or parameters to the routines, but would prefer to only call
  the stat() function once and pass the information to where the fopen()
  call is made.
  
  Bug: https://sourceforge.net/p/curl/bugs/758/

- formadd: CURLFORM_FILECONTENT wrongly rejected some option combos
  
  The code for CURLFORM_FILECONTENT had its check for duplicate options
  wrong so that it would reject CURLFORM_PTRNAME if used in combination
  with it (but not CURLFORM_COPYNAME)! The flags field used for this
  purpose cannot be interpreted that broadly.
  
  Bug: http://curl.haxx.se/mail/lib-2013-07/0258.html
  Reported-by: Byrial Jensen

Yang Tse (25 Jul 2013)
- packages/vms/Makefile.am: add latest file additions to EXTRA_DIST

- [John E. Malmberg brought this change]

  VMS: intial set of files to allow building using GNV toolkit.

- string formatting: fix too many arguments for format

- string formatting: fix zero-length printf format string

- easy.c: curl_easy_getinfo() fix va_start/va_end matching

- imap.c: imap_sendf() fix va_start/va_end matching

- string formatting: fix 15+ printf-style format strings

Patrick Monnerat (24 Jul 2013)
- OS400: sync ILE/RPG binding with current curl.h

Yang Tse (24 Jul 2013)
- string formatting: fix 25+ printf-style format strings

Daniel Stenberg (23 Jul 2013)
- Makefile.am: use LDFLAGS as well when linking libcurl
  
  Linking on Solaris 10 x86 with Sun Studio 12 failed when we upgraded
  automake for the release builds.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1217
  Reported-by: Dagobert Michelsen

- [Fabian Keil brought this change]

  url.c: Fix dot file path cleanup when using an HTTP proxy
  
  Previously the path was cleaned, but the URL wasn't properly updated.

- [Fabian Keil brought this change]

  tests: test1232 verifies dotdot removal from path with proxy

- [Fabian Keil brought this change]

  dotdot.c: Fix a RFC section number in a comment for Curl_dedotdotify()

- [John E. Malmberg brought this change]

  build_vms.com: fix debug and float options
  
  In the reorganization of the build_vms.com the debug and float options
  were not fixed up correctly.

- [John E. Malmberg brought this change]

  curl: fix upload of a zip file in OpenVMS
  
  Two fixes:
  
  1. Force output file format to be stream-lf so that partial downloads
  can be continued.
  
  This should have minor impact as if the file does not exist, it was
  created with stream-lf format.  The only time this was an issue is if
  there was already an existing file with a different format.
  
  2. Fix file uploads are now fixed.
  
     a. VMS binary files such as ZIP archives are now uploaded
        correctly.
  
     b. VMS text files are read once to get the correct size
        and then converted to line-feed terminated records as
        they are read into curl.
  
  The default VMS text formats do not contain either line-feed or
  carriage-return terminated records.  Those delimiters are added by the
  operating system file read calls if the application requests them.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=496

Yang Tse (22 Jul 2013)
- libtest: fix data type of some *_setopt() 'long' arguments

- curl: fix symbolic names for CURL_NETRC_* enum in --libcurl output

- curl: fix symbolic names for CURLUSESSL_* enum in --libcurl output

- tool_operate.c: fix passing curl_easy_setopt long arg on some x64 ABIs
  
  We no longer pass our 'bool' data type variables nor constants as
  an argument to my_setopt(), instead we use proper 1L or 0L values.
  
  This also fixes macro used to pass string argument for CURLOPT_SSLCERT,
  CURLOPT_SSLKEY and CURLOPT_EGDSOCKET using my_setopt_str() instead of
  my_setopt().
  
  This also casts enum or int argument data types to long when passed to
  my_setopt_enum().

Daniel Stenberg (21 Jul 2013)
- curl_multi_wait: fix revents
  
  Commit 6d30f8ebed34e7276 didn't work properly. First, it used the wrong
  array index, but this fix also:
  
  1 - only does the copying if indeed there was any activity
  
  2 - makes sure to properly translate between internal and external
  bitfields, which are not guaranteed to match
  
  Reported-by: Evgeny Turnaev

- RELEASE-NOTES: synced with d529f3882b9bca

- curl_easy_perform: gradually increase the delay time
  
  Instead of going 50,100,150 etc millisecond delay time when nothing has
  been found to do or wait for, we now start lower and double each loop as
  in 4,8,16,32 etc.
  
  This lowers the minimum wait without sacrifizing the longer wait too
  much with unnecessary CPU cycles burnt.
  
  Bug: http://curl.haxx.se/mail/lib-2013-07/0103.html
  Reported-by: Andreas Malzahn

- ftp_do_more: consider DO_MORE complete when server connects back
  
  In the case of an active connection when ftp_do_more() detects that the
  server has connected back, it must make sure to mark it as complete so
  that the multi_runsingle() function will detect this and move on to the
  next state.
  
  Bug: http://curl.haxx.se/mail/lib-2013-07/0115.html
  Reported-by: Clemens Gruber

Yang Tse (19 Jul 2013)
- Makefile.b32: Borland makefile adjustments. Tested with BCC 5.5.1

- WIN32 MemoryTracking: require UNICODE for wide strdup code support

Daniel Stenberg (18 Jul 2013)
- CURLOPT_XFERINFOFUNCTION: introducing a new progress callback
  
  CURLOPT_XFERINFOFUNCTION is now the preferred progress callback function
  and CURLOPT_PROGRESSFUNCTION is considered deprecated.
  
  This new callback uses pure 'curl_off_t' arguments to pass on full
  resolution sizes. It otherwise retains the same characteristics: the
  same call rate, the same meanings for the arguments and the return code
  is used the same way.
  
  The progressfunc.c example is updated to show how to use the new
  callback for newer libcurls while supporting the older one if built with
  an older libcurl or even built with a newer libcurl while running with
  an older.

Yang Tse (18 Jul 2013)
- Reinstate "WIN32 MemoryTracking: track wcsdup() _wcsdup() and _tcsdup() usage".
  
  This reverts commit 7ed25cc, reinstating commit 8ec2cb5.
  
  As of 18-jul-2013 we still do have code in libcurl that makes use of these
  memory functions. Commit 8ec2cb5 comment still applies and is yet valid.
  
  These memory functions are solely used in Windows builds, so all related
  code is protected with '#ifdef WIN32' preprocessor conditional compilation
  directives.
  
  Specifically, wcsdup() _wcsdup() are used when building a Windows target with
  UNICODE and USE_WINDOWS_SSPI preprocessor symbols defined. This is the case
  when building a Windows UNICODE target with Windows native SSL/TLS support
  enabled.
  
  Realizing that wcsdup() _wcsdup() are used is a bit tricky given that usage
  of these is hidden behind _tcsdup() which is MS way of dealing with code
  that must tolerate UNICODE and non-UNICODE compilation. Additionally, MS
  header files and those compatible from other compilers use this preprocessor
  conditional compilation directive in order to select at compilation time
  whether 'wide' or 'ansi' MS API functions are used.
  
  Without this code, Windows build targets with Windows native SSL/TLS support
  enabled and MemoryTracking support enabled misbehave in tracking memory usage,
  regardless of being a UNICODE enabled build or not.

- xc-am-iface.m4: comments refinement

- configure: fix 'subdir-objects' distclean related issue
  
  See XC_AMEND_DISTCLEAN comments for details.

Daniel Stenberg (18 Jul 2013)
- [Evgeny Turnaev brought this change]

  curl_multi_wait: set revents for extra fds
  
  Pass back the revents that happened for the user-provided file
  descriptors.

- [Ben Greear brought this change]

  asyn-ares: Don't blank ares servers if none configured.
  
  Best to just let c-ares use it's defaults if none are configured
  in (lib)curl.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Sergei Nikulov brought this change]

  cmake: Fix for MSVC2010 project generation
  
  Fixed issue with static build for MSVC2010.
  
  After some investigation I've discovered known issue
  http://public.kitware.com/Bug/view.php?id=11240 When .rc file is linked
  to static lib it fails with following linker error
  
  LINK : warning LNK4068: /MACHINE not specified; defaulting to X86
  file.obj : fatal error LNK1112: module machine type 'x64' conflicts with
  target machine type 'X86'
  
  Fix add target property /MACHINE: for MSVC generation.
  
  Also removed old workarounds - it caused errors during msvc build.
  
  Bug: http://curl.haxx.se/mail/lib-2013-07/0046.html

- mk-ca-bundle.1: point out certdata.txt format docs

Yang Tse (16 Jul 2013)
- slist.c: Curl_slist_append_nodup() OOM handling fix

Daniel Stenberg (16 Jul 2013)
- test1414: FTP PORT download without SIZE support

Yang Tse (16 Jul 2013)
- tests/Makefile.am: add configurehelp.pm to DISTCLEANFILES

Patrick Monnerat (15 Jul 2013)
- curl_slist_append(): fix error detection

- slist.c: fix indentation

- OS400: new SSL backend GSKit

- OS400: add slist and certinfo EBCDIC support

- config-os400.h: enable system strdup(), strcmpi(), etc.

- x509asn1.c,x509asn1.h: new module to support ASN.1/X509 parsing & info extract
  Use from qssl backend

- ssluse.c,sslgen.c,sslgen.h: move certinfo support to generic SSL

- Merge branch 'master' of github.com:bagder/curl
  
  Merge for resync

- slist.c, slist.h, cookie.c: new internal procedure Curl_slist_append_nodup()

Yang Tse (15 Jul 2013)
- sslgen.c: fix Curl_rand() compiler warning
  
  Use simple seeding method upon RANDOM_FILE seeding method failure.

- sslgen.c: fix unreleased Curl_rand() infinite recursion

Daniel Stenberg (14 Jul 2013)
- [Dave Reisner brought this change]

  src/tool: allow timeouts to accept decimal values
  
  Implement wrappers around strtod to convert the user argument to a
  double with sane error checking. Use this to allow --max-time and
  --connect-timeout to accept decimal values instead of strictly integers.
  
  The manpage is updated to make mention of this feature and,
  additionally, forewarn that the actual timeout of the operation can
  vary in its precision (particularly as the value increases in its
  decimal precision).

- [Dave Reisner brought this change]

  curl.1: fix long line, found by checksrc.pl

- [Dave Reisner brought this change]

  src/tool_paramhlp: try harder to catch negatives
  
  strto* functions happily chomp off leading whitespace, so simply
  checking for str[0] can lead to false negatives. Do the full parse and
  check the out value instead.

- [John E. Malmberg brought this change]

  build_vms.com: detect and use zlib shared image
  
  Update the build_vms.com to detect and use zlib shared image installed
  by the ZLIB kit produced by Jean-Francois Pieronne, and the also the
  future ZLIB 1.2.8 kit in addition to the older ZLIB kits.
  
  Also fix the indentation to match one of the common standards used for
  VMS DCL command files and removed the hard tab characters.
  
  Tested on OpenVMS 8.4 Alpha and IA64, and OpenVMS 7.3 VAX.

Yang Tse (14 Jul 2013)
- url.c: fix parse_url_login() OOM handling

- http_digest.c: SIGSEGV and OOM handling fixes

- url.c: fix parse_login_details() OOM handling

- [John E. Malmberg brought this change]

  setup-vms.h: sk_pop symbol tweak
  
  Newer versions of curl are referencing a sk_pop symbol while the HP
  OpenSSL library has the symbol in uppercase only.

- getinfo.c: fix enumerated type mixed with another type

- test 1511: fix enumerated type mixed with another type

- url.c: fix SIGSEGV

- dotdot.c: fix global declaration shadowing

- easy.c: fix global declaration shadowing

Kamil Dudka (9 Jul 2013)
- Revert "curl.1: document the --time-cond option in the man page"
  
  This reverts commit 3a0e931fc715a80004958794a96b12cf90503f99 because
  the documentation of --time-cond was duplicated by mistake.
  
  Reported by: Dave Reisner

- curl.1: document the --sasl-ir option in the man page

- curl.1: document the --post303 option in the man page

- curl.1: document the --time-cond option in the man page

Yang Tse (9 Jul 2013)
- configure: automake 1.14 compatibility tweak (use XC_AUTOMAKE)

- xc-am-iface.m4: provide XC_AUTOMAKE macro

Guenter Knauf (8 Jul 2013)
- Added winssl-zlib target to VC builds.

- Synced Makefile.vc6 with recent changes.
  
  Issue posted to the list by malinowsky AT FTW DOT at.

- Added libmetalink URL; added Android versions.

Dan Fandrich (3 Jul 2013)
- examples: Moved usercertinmem.c to COMPLICATED_EXAMPLES
  
  This prevents it from being built during a "make check" since it
  depends on OpenSSL.

Nick Zitzmann (2 Jul 2013)
- Merge branch 'master' of https://github.com/bagder/curl

- darwinssl: SSLv2 connections are aborted if unsupported by the OS
  
  I just noticed that OS X no longer supports SSLv2. Other TLS engines return
  an error if the requested protocol isn't supported by the underlying
  engine, so we do that now for SSLv2 if the framework returns an error
  when trying to turn on SSLv2 support. (Note: As always, SSLv2 support is
  only enabled in curl when starting the app with the -2 argument; it's off
  by default. SSLv2 is really old and insecure.)

Marc Hoersken (1 Jul 2013)
- lib506.c: Fixed possible use of uninitialized variables

Kamil Dudka (30 Jun 2013)
- url: restore the functionality of 'curl -u :'
  
  This commit fixes a regression introduced in
  fddb7b44a79d78e05043e1c97e069308b6b85f79.
  
  Reported by: Markus Moeller
  Bug: http://curl.haxx.se/mail/archive-2013-06/0052.html

Daniel Stenberg (25 Jun 2013)
- digest: append the timer to the random for the nonce

- digest: improve nonce generation
  
  Use the new improved Curl_rand() to generate better random nonce for
  Digest auth.

- curl.1: fix typo in --xattr description
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1252
  Reported-by: Jean-Noël Rouvignac

- RELEASE-NOTES: synced with 365c5ba39591
  
  The 10 first bug fixes for the pending release...

- formpost: better random boundaries
  
  When doing multi-part formposts, libcurl used a pseudo-random value that
  was seeded with time(). This turns out to be bad for users who formpost
  data that is provided with users who then can guess how the boundary
  string will look like and then they can forge a different formpost part
  and trick the receiver.
  
  My advice to such implementors is (still even after this change) to not
  rely on the boundary strings being cryptographically strong. Fix your
  code and logic to not depend on them that much!
  
  I moved the Curl_rand() function into the sslgen.c source file now to be
  able to take advantage of the SSL library's random function if it
  provides one. If not, try to use the RANDOM_FILE for seeding and as a
  last resort keep the old logic, just modified to also add microseconds
  which makes it harder to properly guess the exact seed.
  
  The formboundary() function in formdata.c is now using 64 bit entropy
  for the boundary and therefore the string of dashes was reduced by 4
  letters and there are 16 hex digits following it. The total length is
  thus still the same.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1251
  Reported-by: "Floris"

- printf: make sure %x are treated unsigned
  
  When using %x, the number must be treated as unsigned as otherwise it
  would get sign-extended on for example 64bit machines and do wrong
  output. This problem showed when doing printf("%08x", 0xffeeddcc) on a
  64bit host.

- tests: add test1395 to the tarball

- SIGPIPE: don't use 'data' in sigpipe restore
  
  Follow-up fix from 7d80ed64e43515.
  
  The SessionHandle may not be around to use when we restore the sigpipe
  sighandler so we store the no_signal boolean in the local struct to know
  if/how to restore.

- TODO: 1.8 Modified buffer size approach
  
  Thoughts around buffer sizes and what might be possible to do...

- c-ares: improve error message on failed resolve
  
  When the c-ares based resolver backend failed to resolve a name, it
  tried to show the name that failed from existing structs. This caused
  the wrong output and shown hostname when for example --interface
  [hostname] was used and that name resolving failed.
  
  Now we use the hostname used in the actual resolve attempt in the error
  message as well.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1191
  Reported-by: Kim Vandry

- ossl_recv: check for an OpenSSL error, don't assume
  
  When we recently started to treat a zero return code from SSL_read() as
  an error we also got false positives - which primarily looks to be
  because the OpenSSL documentation is wrong and a zero return code is not
  at all an error case in many situations.
  
  Now ossl_recv() will check with ERR_get_error() to see if there is a
  stored error and only then consider it to be a true error if SSL_read()
  returned zero.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1249
  Reported-by: Nach M. S.
  Patch-by: Nach M. S.

Nick Zitzmann (22 Jun 2013)
- Merge branch 'master' of https://github.com/bagder/curl

- darwinssl: fix crash that started happening in Lion
  
  Something (a recent security update maybe?) changed in Lion, and now it
  has changed SSLCopyPeerTrust such that it may return noErr but also give
  us a null trust, which caught us off guard and caused an eventual crash.

Daniel Stenberg (22 Jun 2013)
- SIGPIPE: ignored while inside the library
  
  ... and restore the ordinary handling again when it returns. This is
  done for curl_easy_perform() and curl_easy_cleanup() only for now - and
  only when built to use OpenSSL as backend as this is the known culprit
  for the spurious SIGPIPEs people have received.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1180
  Reported by: Lluís Batlle i Rossell

- KNOWN_BUGS: #83 unable to load non-default openssl engines

- test1396: invoke the correct test tool!
  
  This erroneously run unit test 1310 instead of 1396!

Kamil Dudka (22 Jun 2013)
- test1230: avoid using hard-wired port number
  
  ... to prevent failure when a non-default -b option is given

- curl-config.in: replace tabs by spaces

Nick Zitzmann (22 Jun 2013)
- darwinssl: reform OS-specific #defines
  
  This doesn't need to be in the release notes. I cleaned up a lot of the #if
  lines in the code to use MAC_OS_X_VERSION_MIN_REQUIRED and
  MAC_OS_X_VERSION_MAX_ALLOWED instead of checking for whether things like
  __MAC_10_6 or whatever were defined, because for some SDKs Apple has released
  they were defined out of place.

Daniel Stenberg (22 Jun 2013)
- [Alessandro Ghedini brought this change]

  docs: fix typo in curl_easy_getinfo manpage

- dotdot: introducing dot file path cleanup
  
  RFC3986 details how a path part passed in as part of a URI should be
  "cleaned" from dot sequences before getting used. The described
  algorithm is now implemented in lib/dotdot.c with the accompanied test
  case in test 1395.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1200
  Reported-by: Alex Vinnik

- bump: start working towards what most likely will become 7.32.0

- THANKS: added 24 new contributors from the 7.31.0 release

Version 7.31.0 (22 Jun 2013)

Daniel Stenberg (22 Jun 2013)
- RELEASE-NOTES: synced with 0de7249bb39a2 - 7.31.0

- unit1396: unit tests to verify curl_easy_(un)escape

- Curl_urldecode: no peeking beyond end of input buffer
  
  Security problem: CVE-2013-2174
  
  If a program would give a string like "%FF" to curl_easy_unescape() but
  ask for it to decode only the first byte, it would still parse and
  decode the full hex sequence. The function then not only read beyond the
  allowed buffer but it would also deduct the *unsigned* counter variable
  for how many more bytes there's left to read in the buffer by two,
  making the counter wrap. Continuing this, the function would go on
  reading beyond the buffer and soon writing beyond the allocated target
  buffer...
  
  Bug: http://curl.haxx.se/docs/adv_20130622.html
  Reported-by: Timo Sirainen

Guenter Knauf (20 Jun 2013)
- Use opened body.out file and write content to it.

Daniel Stenberg (20 Jun 2013)
- multi_socket: react on socket close immediately
  
  As a remedy to the problem when a socket gets closed and a new one is
  opened with the same file descriptor number and as a result
  multi.c:singlesocket() doesn't detect the difference, the new function
  Curl_multi_closed() gets told when a socket is closed so that it can be
  removed from the socket hash. When the old one has been removed, a new
  socket should be detected fine by the singlesocket() on next invoke.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1248
  Reported-by: Erik Johansson

- RELEASE-NOTES: synced with e305f5ec715f

- TODO: mention the DANE patch from March

- CURLOPT_COOKIELIST: take cookie share lock
  
  When performing COOKIELIST operations the cookie lock needs to be taken
  for the cases where the cookies are shared among multiple handles!
  
  Verified by Benjamin Gilbert's updated test 506
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1215
  Reported-by: Benjamin Gilbert

- [Benjamin Gilbert brought this change]

  test506: verify that CURLOPT_COOKIELIST takes share lock
  
  It doesn't right now: http://curl.haxx.se/bug/view.cgi?id=1215

- TODO: HTTP2/SPDY support

- curl_easy_setopt.3: clarify CURLOPT_PROGRESSFUNCTION frequency
  
  Make it clearer that the CURLOPT_PROGRESSFUNCTION callback will be
  called more frequently than once per second when things are happening.

- RELEASE-NOTES: synced with 9c3e098259b82
  
  Mention 7 recent bug fixes and their associated contributors

- curl_multi_wait.3: clarify the numfds counter

- curl_easy_perform: avoid busy-looping
  
  When curl_multi_wait() finds no file descriptor to wait for, it returns
  instantly and this must be handled gracefully within curl_easy_perform()
  or cause a busy-loop. Starting now, repeated fast returns without any
  file descriptors is detected and a gradually increasing sleep will be
  used (up to a max of 1000 milliseconds) before continuing the loop.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1238
  Reported-by: Miguel Angel

- [YAMADA Yasuharu brought this change]

  cookies: follow-up fix for path checking
  
  The initial fix to only compare full path names were done in commit
  04f52e9b4db0 but found out to be incomplete. This takes should make the
  change more complete and there's now two additional tests to verify
  (test 31 and 62).

- [Sergei Nikulov brought this change]

  lib1900: use tutil_tvnow instead of gettimeofday
  
  Makes it build on windows

- [Eric Hu brought this change]

  axtls: now done non-blocking

- [Eric Hu brought this change]

  test2033: requires NTLM support

- KNOWN_BUGS: #82 failed build with Borland compiler

- Curl_output_digest: support auth-int for empty entity body
  
  By always returning the md5 for an empty body when auth-int is asked
  for, libcurl now at least sometimes does the right thing.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1235
  Patched-by: Nach M. S.

- multi_socket: reduce timeout inaccuracy margin
  
  Allow less room for "triggered too early" mistakes by applications /
  timers on non-windows platforms. Starting now, we assume that a timeout
  call is never made earlier than 3 milliseconds before the actual
  timeout. This greatly improves timeout accuracy on Linux.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1228
  Reported-by: Hang Su

- cert_stuff: avoid double free in the PKCS12 code
  
  In the pkcs12 code, we get a list of x509 records returned from
  PKCS12_parse but when iterating over the list and passing each to
  SSL_CTX_add_extra_chain_cert() we didn't also properly remove them from
  the "stack", which made them get freed twice (both in sk_X509_pop_free()
  and then later in SSL_CTX_free).
  
  This isn't really documented anywhere...
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1236
  Reported-by: Nikaiw

- cert_stuff: remove code duplication in the pkcs12 logic

- [Aleksey Tulinov brought this change]

  axtls: honor disabled VERIFYHOST
  
  When VERIFYHOST == 0, libcurl should let invalid certificates to pass.

- [Peter Gal brought this change]

  curl_easy_setopt.3: HTTP header with no content
  
  Update the documentation on how to specify a HTTP header with no
  content.

- RELEASE-NOTES: synced with 87cf677eca55
  
  Added 11 bugs and 7 contributors

- lib1500: remove bad check
  
  After curl_multi_wait() returns, this test checked that we got exactly
  one file descriptor told to read from, but we cannot be sure that is
  true. curl_multi_wait() will sometimes return earlier without any file
  descriptor to handle, just just because it is a suitable time to call
  *perform().
  
  This problem showed up with commit 29bf0598.
  
  Bug: http://curl.haxx.se/mail/lib-2013-06/0029.html
  Reported-by: Fabian Keil

- tests/Makefile: typo in the perlcheck target
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1239
  Reported-by: Christian Weisgerber

- test1230: verify CONNECT to a numerical ipv6-address

- sws: support extracting test number from CONNECT ipv6-address!
  
  If an ipv6-address is provided to CONNECT, the last hexadecimal group in
  the address will be used as the test number! For example the address
  "[1234::ff]" would be treated as test case 255.

- curl_multi_wait: only use internal timer if not -1
  
  commit 29bf0598aad5 introduced a problem when the "internal" timeout is
  prefered to the given if shorter, as it didn't consider the case where
  -1 was returned. Now the internal timeout is only considered if not -1.
  
  Reported-by: Tor Arntsen
  Bug: http://curl.haxx.se/mail/lib-2013-06/0015.html

Dan Fandrich (3 Jun 2013)
- libcurl-tutorial.3: added a section on IPv6
  
  Also added a (correctly-escaped) backslash to the autoexec.bat
  example file and a new Windows character device name with
  a colon as examples of other characters that are special
  and potentially dangerous (this reverts and reworks commit
  7d8d2a54).

Daniel Stenberg (3 Jun 2013)
- curl_multi_wait: reduce timeout if the multi handle wants to
  
  If the multi handle's pending timeout is less than what is passed into
  this function, it will now opt to use the shorter time anyway since it
  is a very good hint that the handle wants to process something in a
  shorter time than what otherwise would happen.
  
  curl_multi_wait.3 was updated accordingly to clarify
  
  This is the reason for bug #1224
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1224
  Reported-by: Andrii Moiseiev

- multi_runsingle: switch an if() condition for readability
  
  ... because there's an identical check right next to it so using the
  operators in the check in the same order increases readability.

Marc Hoersken (2 Jun 2013)
- curl_schannel.c: Removed variable unused since 35874298e4

- curl_setup.h: Fixed redefinition warning using mingw-w64

Daniel Stenberg (30 May 2013)
- multi_runsingle: add braces to clarify the code

- libcurl-tutorial.3: remove incorrect backslash
  
  A single backslash in the content is not legal nroff syntax.
  
  Reported and fixed by: Eric S. Raymond
  Bug: http://curl.haxx.se/bug/view.cgi?id=1234

- curl_formadd.3: fixed wrong "end-marker" syntax
  
  Reported and fixed by: Eric S. Raymond
  Bug: http://curl.haxx.se/bug/view.cgi?id=1233

- curl.1: clarify that --silent still outputs data

- Digest auth: escape user names with \ or " in them
  
  When sending the HTTP Authorization: header for digest, the user name
  needs to be escaped if it contains a double-quote or backslash.
  
  Test 1229 was added to verify
  
  Reported and fixed by: Nach M. S
  Bug: http://curl.haxx.se/bug/view.cgi?id=1230

- [Mike Giancola brought this change]

  ossl_recv: SSL_read() returning 0 is an error too
  
  SSL_read can return 0 for "not successful", according to the open SSL
  documentation: http://www.openssl.org/docs/ssl/SSL_read.html

- [Mike Giancola brought this change]

  ossl_send: SSL_write() returning 0 is an error too
  
  We found that in specific cases if the connection is abruptly closed,
  the underlying socket is listed in a close_wait state. We continue to
  call the curl_multi_perform, curl_mutli_fdset etc. None of these APIs
  report the socket closed / connection finished.  Since we have cases
  where the multi connection is only used once, this can pose a problem
  for us. I've read that if another connection was to come in, curl would
  see the socket as bad and attempt to close it at that time -
  unfortunately, this does not work for us.
  
  I found that in specific situations, if SSL_write returns 0, curl did
  not recognize the socket as closed (or errored out) and did not report
  it to the application. I believe we need to change the code slightly, to
  check if ssl_write returns 0. If so, treat it as an error - the same as
  a negative return code.
  
  For OpenSSL - the ssl_write documentation is here:
  http://www.openssl.org/docs/ssl/SSL_write.html

- KNOWN_BUGS: curl -OJC- fails to resume
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1169

- Curl_cookie_add: handle IPv6 hosts
  
  1 - don't skip host names with a colon in them in an attempt to bail out
  on HTTP headers in the cookie file parser. It was only a shortcut anyway
  and trying to parse a file with HTTP headers will still be handled, only
  slightly slower.
  
  2 - don't skip domain names based on number of dots. The original
  netscape cookie spec had this oddity mentioned and while our code
  decreased the check to only check for two, the existing cookie spec has
  no such dot counting required.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1221
  Reported-by: Stefan Neis

- curl_easy_setopt.3: expand the PROGRESSFUNCTION section
  
  Explain the callback and its arguments better and with more descriptive
  text.

- tests: add test1394 file to the tarball

- tarball: include the xmlstream example

- [David Strauss brought this change]

  xmlstream: XML stream parsing example source code
  
  Add an XML stream parsing example using Expat. Add missing ignore for
  the binary from an unrelated example.

- [YAMADA Yasuharu brought this change]

  cookies: only consider full path matches
  
  I found a bug which cURL sends cookies to the path not to aim at.
  For example:
  - cURL sends a request to http://example.fake/hoge/
  - server returns cookie which with path=/hoge;
    the point is there is NOT the '/' end of path string.
  - cURL sends a request to http://example.fake/hogege/ with the cookie.
  
  The reason for this old "feature" is because that behavior is what is
  described in the original netscape cookie spec:
  http://curl.haxx.se/rfc/cookie_spec.html
  
  The current cookie spec (RFC6265) clarifies the situation:
  http://tools.ietf.org/html/rfc6265#section-5.2.4

- [Eric Hu brought this change]

  axtls: prevent memleaks on SSL handshake failures

- Revert "WIN32 MemoryTracking: track wcsdup() _wcsdup() and _tcsdup() usage"
  
  This reverts commit 8ec2cb5544b86306b702484ea785b6b9596562ab.
  
  We don't have any code anywhere in libcurl (or the curl tool) that use
  wcsdup so there's no such memory use to track. It seems to cause mild
  problems with the Borland compiler though that we may avoid by reverting
  this change again.
  
  Bug: http://curl.haxx.se/mail/lib-2013-05/0070.html

- RELEASE-NOTES: synced with ae26ee3489588f0

Guenter Knauf (11 May 2013)
- Updated zlib version in build files.

Daniel Stenberg (9 May 2013)
- [Renaud Guillard brought this change]

  OS X framework: fix invalid symbolic link

Kamil Dudka (9 May 2013)
- [Daniel Stenberg brought this change]

  nss: give PR_INTERVAL_NO_WAIT instead of -1 to PR_Recv/PR_Send
  
  Reported by: David Strauss
  Bug: http://curl.haxx.se/mail/lib-2013-05/0088.html

Daniel Stenberg (8 May 2013)
- libtest: gitignore more binary files

- servercert: allow empty subject
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1220
  Patch by: John Gardiner Myers

- [Steve Holme brought this change]

  tests: Added new SMTP tests to verify commit 99b40451836d

- runtests.pl: support nonewline="yes" in client/stdin sections

- build: fixed unit1394 for debug and metlink builds

Kamil Dudka (6 May 2013)
- unit1394.c: plug the curl tool unit test in

- [Jared Jennings brought this change]

  unit1394.c: basis of a unit test for parse_cert_parameter()

- src/Makefile.am: build static lib for unit tests if enabled

- tool_getparam: ensure string termination in parse_cert_parameter()

- tool_getparam: fix memleak in handling the -E option

- tool_getparam: describe what parse_cert_parameter() does
  
  ... and de-duplicate the code initializing *passphrase

- curl.1: document escape sequences recognized by -E

- [Jared Jennings brought this change]

  curl -E: allow to escape ':' in cert nickname

Marc Hoersken (5 May 2013)
- curl_schannel.c: Fixed invalid memory access during SSL shutdown

Steve Holme (4 May 2013)
- smtp: Fix trailing whitespace warning

- smtp: Fix compilation warning
  
  comparison between signed and unsigned integer expressions

- RELEASE-NOTES: synced with 92ef5f19c801

- smtp: Updated RFC-2821 references to RFC-5321

- smtp: Fixed sending of double CRLF caused by first in EOB
  
  If the mail sent during the transfer contains a terminating <CRLF> then
  we should not send the first <CRLF> of the EOB as specified in RFC-5321.
  
  Additionally don't send the <CRLF> if there is "no mail data" as the
  DATA command already includes it.

- tests: Corrected MAIL SIZE for CRLF line endings
  
  ... which was missed in commit: f5c3d9538452

- tests: Corrected infilesize for CRLF line endings
  
  ... which was missed in commit: f5c3d9538452

- tests: Corrected test1406 to be RFC2821 compliant

- tests: Corrected test1320 to be RFC2821 compliant

- tests: Corrected typo in test909
  
  Introduced in commit: 514817669e9e

- tests: Corrected test909 to be RFC2821 compliant

- tests: Updated test references to 909 from 1411
  
  ...and removed references to libcurl and test1406.

- tests: Renamed test1411 to test909 as this is a main SMTP test

Daniel Stenberg (1 May 2013)
- [Lars Johannesen brought this change]

  bindlocal: move brace out of #ifdef
  
  The code within #ifdef HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID wrongly had two
  closing braces when it should only have one, so builds without that
  define would fail.
  
  Bug: http://curl.haxx.se/mail/lib-2013-05/0000.html

Steve Holme (30 Apr 2013)
- smtp: Tidy up to move the eob counter to the per-request structure
  
  Move the eob counter from the smtp_conn structure to the SMTP structure
  as it is associated with a SMTP payload on a per-request basis.

- TODO: Updated following the addition of CURLOPT_SASL_IR

- smtp: Fixed unknown percentage complete in progress bar
  
  The curl command line utility would display the the completed progress
  bar with a percentage of zero as the progress routines didn't know the
  size of the transfer.

Daniel Stenberg (29 Apr 2013)
- ftpserver: silence warnings
  
  Fix regressions in commit b56e3d43e5d. Make @data local and filter off
  non-numerical digits from $testno in STATUS_imap.

Steve Holme (29 Apr 2013)
- ftpserver.pl: Corrected the imap LOGIN response
  
  ...to be more realistic and consistent with the other imap responses.

- tests: Added imap STATUS command test

- tests: Corrected the SMTP tests to be RFC2821 compliant
  
  The emails that are sent to the server during these tests were
  incorrectly formatted as they contained one or more LF terminated lines
  rather than being CRLF terminated as per Section 2.3.7 of RFC-2821.
  
  This wasn't a problem for the test suite as the <stdin> data matched the
  <upload> data but anyone using these tests as reference would be sending
  incorrect data to a server.

- email: Tidy up of *_perform_authenticate()
  
  Removed the hard returns from imap and pop3 by using the same style for
  sending the authentication string as smtp. Moved the "Other mechanisms
  not supported" check in smtp to match that of imap and pop3 to provide
  consistency between the three email protocols.

- smtp: Updated limit check to be more readable like the check in pop3

- pop3: Added 255 octet limit check when sending initial response
  
  Added 255 octet limit check as per Section 4. Paragraph 8 of RFC-5034.

- DOCS: Corrected line length of recent Secure Transport changes

Nick Zitzmann (27 Apr 2013)
- darwinssl: add TLS crypto authentication
  
  Users using the Secure Transport (darwinssl) back-end can now use a
  certificate and private key to authenticate with a site using TLS. Because
  Apple's security system is based around the keychain and does not have any
  non-public function to create a SecIdentityRef data structure from data
  loaded outside of the Keychain, the certificate and private key have to be
  loaded into the Keychain first (using the certtool command line tool or
  the Security framework's C API) before we can find it and use it.

Steve Holme (27 Apr 2013)
- Corrected version numbers after bump

Daniel Stenberg (27 Apr 2013)
- bump version
  
  Since we're adding new stuff, the next release will bump the minor
  version and we're looking forward to 7.31.0

Steve Holme (27 Apr 2013)
- RELEASE-NOTES: synced with f4e6e201b146

- DOCS: Updated following the addition of CURLOPT_SASL_IR
  
  Documented the the option in curl_easy_setopt() and added it to
  symbols-in-versions.

- tests: Corrected command line arguments in test907 and test908

- tests: Added SMTP AUTH with initial response tests

- tests: Updated SMTP tests to decouple client initial response
  
  Updated test903 and test904 following the addition of CURLOPT_SASL_IR
  as the default behaviour of SMTP AUTH responses is now to not include
  the initial response. New tests with --sasl-ir support to follow.

- imap: Added support for overriding the SASL initial response
  
  In addition to checking for the SASL-IR capability the user can override
  the sending of the client's initial response in the AUTHENTICATION
  command with the use of CURLOPT_SASL_IR should the server erroneously
  not report SASL-IR when it does support it.

- smtp: Added support for disabling the SASL initial response
  
  Updated the default behaviour of sending the client's initial response in the AUTH
  command to not send it and added support for CURLOPT_SASL_IR to allow the user to
  specify including the response.
  
  Related Bug: http://curl.haxx.se/mail/lib-2012-03/0114.html
  Reported-by: Gokhan Sengun

- pop3: Added support for enabling the SASL initial response
  
  Allowed the user to specify whether to send the client's intial response
  in the AUTH command via CURLOPT_SASL_IR.

- sasl-ir: Added --sasl-ir option to curl command line tool

- sasl-ir: Added CURLOPT_SASL_IR to enable/disable the SASL initial response

Daniel Stenberg (26 Apr 2013)
- curl_easy_init: use less mallocs
  
  By introducing an internal alternative to curl_multi_init() that accepts
  parameters to set the hash sizes, easy handles will now use tiny socket
  and connection hash tables since it will only ever add a single easy
  handle to that multi handle.
  
  This decreased the number mallocs in test 40 (which is a rather simple
  and typical easy interface use case) from 1142 to 138. The maximum
  amount of memory allocated used went down from 118969 to 78805.

Steve Holme (26 Apr 2013)
- ftpserver.pl: Fixed imap logout confirmation data
  
  An IMAP server should response with the BYE continuation response before
  confirming the LOGOUT command was successful.

Daniel Stenberg (26 Apr 2013)
- ftp_state_pasv_resp: connect through proxy also when set by env
  
  When connecting back to an FTP server after having sent PASV/EPSV,
  libcurl sometimes didn't use the proxy properly even though the proxy
  was used for the initial connect.
  
  The function wrongly checked for the CURLOPT_PROXY variable to be set,
  which made it act wrongly if the proxy information was set with an
  environment variable.
  
  Added test case 711 to verify (based on 707 which uses --socks5). Also
  added test712 to verify another variation of setting the proxy: with
  --proxy socks5://
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1218
  Reported-by: Zekun Ni

Kamil Dudka (26 Apr 2013)
- [Zdenek Pavlas brought this change]

  url: initialize speed-check data for file:// protocol
  
  ... in order to prevent an artificial timeout event based on stale
  speed-check data from a previous network transfer.  This commit fixes
  a regression caused by 9dd85bced56f6951107f69e581c872c1e7e3e58e.
  
  Bug: https://bugzilla.redhat.com/906031

Daniel Stenberg (25 Apr 2013)
- test709: clarify the test in the name

- sshserver: disable StrictHostKeyChecking
  
  I couldn't figure out why the host key logic isn't working, but having
  it set to yes prevents my SSH-based test cases to run. I also don't see
  a strong need to use strict host key checking on this test server.
  
  So I disabled it.

- runtests: log more commands in verbose mode
  
  ... to aid tracking down failures

Steve Holme (25 Apr 2013)
- TODO: Corrected copy/paste typo

- TODO: Added new ideas for future SMTP, POP3 and IMAP features

- TODO: Updated following the addition of ;auth=<MECH> support

- DOCS: Minor rewording / clarification of host name protocol detection

- RELEASE-NOTES: synced with a8c92cb60890

- DOCS: Added reference to IETF draft for SMTP URL Interface
  
  ...when mentioning login options. Additional minor clarification of
  "Windows builds" to be "Windows builds with SSPI"as a way of enabling
  NTLM as Windows builds may be built with OpenSSL to enable NTLM or
  without NTLM support altogether.

Linus Nielsen Feltzing (23 Apr 2013)
- HISTORY: Fix spelling error.

Steve Holme (23 Apr 2013)
- DOCS: Reworked the scheme calculation explanation under CURLOPT_URL

- url: Added smtp and pop3 hostnames to the protocol detection list

Daniel Stenberg (23 Apr 2013)
- HISTORY: correct some years/dates
  
  Thanks to archive.org's wayback machine I updated this document with
  some facts from the early httpget/urlget web page:
  
  http://web.archive.org/web/19980216125115/http://www.inf.ufrgs.br/~sagula/urlget.html

- [Alessandro Ghedini brought this change]

  tests: add test1511 to check timecond clean-up
  
  Verifies the timecond fix in commit c49ed0b6c0f

- [Alessandro Ghedini brought this change]

  getinfo.c: reset timecond when clearing session-info variables
  
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=705783
  Reported-by: Ludovico Cavedon <cavedon@debian.org>

Steve Holme (22 Apr 2013)
- DOCS: Added information about login options to CURLOPT_USERPWD

- DOCS: Added information about login options in the URL

- url: Fixed missing length check in parse_proxy()
  
  Commit 11332577b3cb removed the length check that was performed by the
  old scanf() code.

- url: Fixed crash when no username or password supplied for proxy
  
  Fixed an issue in parse_proxy(), introduced in commit 11332577b3cb,
  where an empty username or password (For example: http://:@example.com)
  would cause a crash.

- url: Removed unused text length constants

- url: Updated proxy URL parsing to use parse_login_details()

- url: Tidy up of setstropt_userpwd() parameters
  
  Updated the naming convention of the login parameters to match those of
  other functions.

- url: Tidy up of code and comments following recent changes
  
  Tidy up of variable names and comments in setstropt_userpwd() and
  parse_login_details().

- url: Simplified setstropt_userpwd() following recent changes
  
  There is no need to perform separate clearing of data if a NULL option
  pointer is passed in. Instead this operation can be performed by simply
  not calling parse_login_details() and letting the rest of the code do
  the work.

- url: Correction to scope of if statements when setting data

- url: Fixed memory leak in setstropt_userpwd()
  
  setstropt_userpwd() was calling setstropt() in commit fddb7b44a79d to
  set each of the login details which would duplicate the strings and
  subsequently cause a memory leak.

- RELEASE-NOTES: synced with d535c4a2e1f7

- url: Added overriding of URL login options from CURLOPT_USERPWD

- tool_paramhlp: Fixed options being included in username
  
  Fix to prevent the options from being displayed when curl requests the
  user's password if the following command line is specified:
  
  --user username;options

- url: Added support for parsing login options from the CURLOPT_USERPWD
  
  In addition to parsing the optional login options from the URL, added
  support for parsing them from CURLOPT_USERPWD, to allow the following
  supported command line:
  
  --user username:password;options

- url: Added bounds checking to parse_login_details()
  
  Added bounds checking when searching for the separator characters within
  the login string as this string may not be NULL terminated (For example
  it is the login part of a URL). We do this in preference to allocating a
  new string to copy the login details into which could then be passed to
  parse_login_details() for performance reasons.

- url: Added size_t cast to pointer based length calculations

- url: Corrected minor typo in comment

Daniel Stenberg (18 Apr 2013)
- CURL_CHECK_CA_BUNDLE: don't check for paths when cross-compiling
  
  When cross-compiling we can't scan and detect existing files or paths.
  
  Bug: http://curl.haxx.se/mail/lib-2013-04/0294.html

- [Ishan SinghLevett brought this change]

  usercertinmem.c: add example showing user cert in memory
  
  Relies on CURLOPT_SSL_CTX_FUNCTION, which is OpenSSL specific

Steve Holme (18 Apr 2013)
- url: Fix chksrc longer than 79 columns warning

- url: Fix incorrect variable type for result code

- url: Fix compiler warning
  
  signed and unsigned type in conditional expression

- url: Moved parsing of login details out of parse_url_login()
  
  Separated the parsing of login details from the processing of them in
  parse_url_login() ready for use by setstropt_userpwd().

- url: Re-factored set_userpass() and parse_url_userpass()
  
  Re-factored these functions to reflect their new behaviour following the
  addition of login options.

- url: Reworked URL parsing to allow overriding by CURLOPT_USERPWD

Daniel Stenberg (18 Apr 2013)
- maketgz: make bzip2 creation work with Parallel BZIP2 too
  
  Apparently the previous usage didn't work with that implementation,
  while this updated version works with at least both Parallel BZIP2
  v1.1.8 and regular bzip "Version 1.0.6, 6-Sept-2010".

Linus Nielsen Feltzing (18 Apr 2013)
- Add tests/http_pipe.py to the tarball build

Steve Holme (16 Apr 2013)
- smtp: Re-factored all perform based functions
  
  Standardised the naming of all perform based functions to be in the form
  smtp_perform_something().

- smtp: Added description comments to all perform based functions

- smtp: Moved smtp_quit() to be with the other perform functions

- smtp: Moved smtp_rcpt_to() to be with the other perform functions

- smtp: Moved smtp_mail() to be with the other perform functions

Daniel Stenberg (16 Apr 2013)
- [Wouter Van Rooy brought this change]

  curl-config: don't output static libs when they are disabled
  
  Curl-config outputs static libraries even when they are disabled in
  configure.
  
  This causes problems with the build of pycurl.

- [Dave Reisner brought this change]

  docs/libcurl: fix formatting in manpage
  
  Commit c3ea3eb6 introduced some minor cosmetic errors in
  curl_mutli_socket_action(3).

- [Paul Howarth brought this change]

  Add extra libs for lib1900 and lib2033 test programs
  
  These are needed in cases where clock_gettime is used, from librt.

Dan Fandrich (15 Apr 2013)
- FAQ: mention that the network connection can be monitored
  
  Also note the prohibition on sharing handles across threads.

Steve Holme (15 Apr 2013)
- pop3: Added missing comment for pop3_state_apop_resp()

- smtp: Updated the coding style of smtp_state_servergreet_resp()
  
  Updated the coding style, in this function, to be consistant with other
  response functions rather then performing a hard return on failure.

- pop3: Updated the coding style of pop3_state_servergreet_resp()
  
  Updated the coding style, in this function, to be consistent with other
  response functions rather then performing a hard return on failure.

- pop3: Re-factored all perform based functions
  
  Standardised the naming of all perform based functions to be in the form
  pop3_perform_something() following the changes made to IMAP.

- pop3: Added description comments to all perform based functions

- pop3: Moved pop3_quit() to be with the other perform functions

- pop3: Moved pop3_command() to be with the other perform functions
  
  Started to apply the same tidy up to the POP3 code as applied to the
  IMAP code in the 7.30.0 release.

- RELEASE-NOTES: Removed erroneous spaces

- RELEASE-NOTES: synced with 8723cade21fb

- smtp: Added support for ;auth=<mech> in the URL
  
  Added support for specifying the preferred authentication mechanism in
  the URL as per Internet-Draft 'draft-earhart-url-smtp-00'.

- pop3: Reworked authentication type constants
  
  ... to use left-shifted values, like those defined in curl.h, rather
  than 16-bit hexadecimal values.

- pop3: Small consistency tidy up

- pop3: Added support for ;auth=<mech> in the URL
  
  Added support for specifying the preferred authentication type and SASL
  mechanism in the URL as per RFC-2384.

- imap: Added support for ;auth=<mech> in the URL
  
  Added support for specifying the preferred authentication mechanism in
  the URL as per RFC-5092.

- sasl: Reworked SASL mechanism constants
  
  ... to use left-shifted values, like those defined in curl.h, rather
  than 16-bit hexadecimal values.

- sasl: Added predefined preferred mechanism values
  
  In preparation for the upcoming changes to IMAP, POP3 and SMTP added
  preferred mechanism values.

- url: Added support for parsing login options from the URL
  
  As well as parsing the username and password from the URL, added support
  for parsing the optional options part from the login details, to allow
  the following supported URL format:
  
  schema://username:password;options@example.com/path?q=foobar
  
  This will only be used by IMAP, POP3 and SMTP at present but any
  protocol that may be given login options in the URL will be able to
  add support for them.

- smtp: Fix compiler warning
  
  warning: unused variable 'smtp' introduced in commit 73cbd21b5ee6.

- smtp: Moved parsing of url path into separate function

Daniel Stenberg (12 Apr 2013)
- FTP: handle a 230 welcome response
  
  ...instead of the 220 we otherwise expect.
  
  Made the ftpserver.pl support sending a custom "welcome" and then
  created test 1219 to verify this fix with such a 230 welcome.
  
  Bug: http://curl.haxx.se/mail/lib-2013-02/0102.html
  Reported by: Anders Havn

- configure: try pthread_create without -lpthread
  
  For libc variants without a spearate pthread lib (like bionic), try
  using pthreads without the pthreads lib first and only if that fails try
  the -lpthread linker flag.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1216
  Reported by: Duncan

- FTP: access files in root dir correctly
  
  Accessing a file with an absolute path in the root dir but with no
  directory specified was not handled correctly. This fix comes with four
  new test cases that verify it.
  
  Bug: http://curl.haxx.se/mail/lib-2013-04/0142.html
  Reported by: Sam Deane

Steve Holme (12 Apr 2013)
- pop3: Reworked the function description for Curl_pop3_write()

- pop3: Added function description to pop3_parse_custom_request()

- pop3: Moved utility functions to end of pop3.c

Nick Zitzmann (12 Apr 2013)
- darwinssl: add TLS session resumption
  
  This ought to speed up additional TLS handshakes, at least in theory.

Steve Holme (12 Apr 2013)
- imap: Added function description to imap_parse_custom_request()

- imap: Moved utility functions to end of imap.c (Part 3/3)
  
  Moved imap_is_bchar() be with the other utility based functions.

- imap: Moved utility functions to end of imap.c (Part 2/3)
  
  Moved imap_parse_url_path() and imap_parse_custom_request() to the end of the
  file allowing all utility functions to be grouped together.

- imap: Moved utility functions to end of imap.c (Part 1/3)
  
  Moved imap_atom() and imap_sendf() to the end of the file allowing all
  utility functions to be grouped together.

- imap: Corrected function description for imap_connect()

Kamil Dudka (12 Apr 2013)
- tests: prevent test206, test1060, and test1061 from failing
  
  ... in case runtests.pl is invoked with non-default -b option
  
  Fixes a regression caused by 1e29d275c643ef6aab7948f0f55a7a9397e56b42.

Daniel Stenberg (12 Apr 2013)
- [David Strauss brought this change]

  libcurl-share.3: update what it does and does not share.
  
  Update sharing interface documentation to provide exhaustive list of
  what it does and does not share.

- THANKS: remove duplicated names

- bump: start working towards next release

- THANKS: added people from the 7.30.0 RELEASE-NOTES

Version 7.30.0 (12 Apr 2013)

Daniel Stenberg (12 Apr 2013)
- RELEASE-NOTES: cleaned up for 7.30 (synced with 5c5e1a1cd20)
  
  Most notable the security advisory:
  http://curl.haxx.se/docs/adv_20130412.html

- test1218: another cookie tailmatch test
  
  ... and make 1216 also verify it with a file input
  
  These tests verify commit 3604fde3d3c9b0d, the fix for the "cookie
  domain tailmatch" vulnerability. See
  http://curl.haxx.se/docs/adv_20130412.html

- [YAMADA Yasuharu brought this change]

  cookie: fix tailmatching to prevent cross-domain leakage
  
  Cookies set for 'example.com' could accidentaly also be sent by libcurl
  to the 'bexample.com' (ie with a prefix to the first domain name).
  
  This is a security vulnerabilty, CVE-2013-1944.
  
  Bug: http://curl.haxx.se/docs/adv_20130412.html

Guenter Knauf (11 Apr 2013)
- Enabled MinGW sync resolver builds.

Yang Tse (10 Apr 2013)
- if2ip.c: fix compiler warning

Guenter Knauf (10 Apr 2013)
- Fixed lost OpenSSL output with "-t" - followup.
  
  The previously applied patch didnt work on Windows; we cant rely
  on shell commands like 'echo' since they act diffently on each
  platform and each shell.
  In order to keep this script platform-independent the code must
  only use pure Perl.

Daniel Stenberg (9 Apr 2013)
- test1217: verify parsing 257 responses with "rubbish" before path
  
  Test 1217 verifies commit e0fb2d86c9f78, and without that change this
  test fails.

- [Bill Middlecamp brought this change]

  FTP: handle "rubbish" in front of directory name in 257 responses
  
  When doing PWD, there's a 257 response which apparently some servers
  prefix with a comment before the path instead of after it as is
  otherwise the norm.
  
  Failing to parse this, several otherwise legitimate use cases break.
  
  Bug: http://curl.haxx.se/mail/lib-2013-04/0113.html

Guenter Knauf (9 Apr 2013)
- Fixed ares-enabled builds with static makefiles.

- Fixed lost OpenSSL output with "-t".
  
  The OpenSSL pipe wrote to the final CA bundle file, but the encoded PEM
  output wrote to a temporary file.  Consequently, the OpenSSL output was
  lost when the temp file was renamed to the final file at script finish
  (overwriting the final file written earlier by openssl).
  Patch posted to the list by Richard Michael (rmichael edgeofthenet org).

Daniel Stenberg (9 Apr 2013)
- test1216: test tailmatching cookie domains
  
  This test is an attempt to repeat the problem YAMADA Yasuharu reported
  at http://curl.haxx.se/mail/lib-2013-04/0108.html

- RELEASe-NOTES: synced with 29fdb2700f797
  
  added "tcpkeepalive on Mac OS X"

Nick Zitzmann (8 Apr 2013)
- darwinssl: disable insecure ciphers by default
  
  I noticed that aria2's SecureTransport code disables insecure ciphers such
  as NULL, anonymous, IDEA, and weak-key ciphers used by SSLv3 and later.
  That's a good idea, and now we do the same thing in order to prevent curl
  from accessing a "secure" site that only negotiates insecure ciphersuites.

Daniel Stenberg (8 Apr 2013)
- [Robert Wruck brought this change]

  tcpkeepalive: Support CURLOPT_TCP_KEEPIDLE on OSX
  
  MacOS X doesn't have TCP_KEEPIDLE/TCP_KEEPINTVL but only a single
  TCP_KEEPALIVE (see
  http://developer.apple.com/library/mac/#DOCUMENTATION/Darwin/Reference/ManPages/man4/tcp.4.html).
  Here is a patch for CURLOPT_TCP_KEEPIDLE on OSX platforms.

- configure: remove CURL_CHECK_FUNC_RECVFROM
  
  1 - We don't use the results from the test and we never did. recvfrom()
  is only used by the TFTP code and it has not caused any problems.
  
  2 - the CURL_CHECK_FUNC_RECVFROM function is extremely slow

Steve Holme (8 Apr 2013)
- RELEASE-NOTES: Corrected duplicate NTLM memory leaks

- RELEASE-NOTES: Removed trailing full stop

Daniel Stenberg (8 Apr 2013)
- [Fabian Keil brought this change]

  proxy: make ConnectionExists() check credential of proxyconnections too
  
  Previously it only compared credentials if the requested needle
  connection wasn't using a proxy. This caused NTLM authentication
  failures when using proxies as the authentication code wasn't send on
  the connection where the challenge arrived.
  
  Added test 1215 to verify: NTLM server authentication through a proxy
  (This is a modified copy of test 67)

- RELEASE-NOTES: sync with 704a5dfca9

- TODO-RELEASE: cleaned up, not really maintained lately

Marc Hoersken (7 Apr 2013)
- if2ip.c: Fixed another warning: unused parameter 'remote_scope'

Daniel Stenberg (7 Apr 2013)
- [Marc Hoersken brought this change]

  cookie.c: Made cookie sort function more deterministic
  
  Since qsort implementations vary with regards to handling the order
  of similiar elements, this change makes the internal sort function
  more deterministic by comparing path length first, then domain length
  and finally the cookie name. Spotted with testcase 62 on Windows.

Marc Hoersken (7 Apr 2013)
- curl_schannel.c: Follow up on memory leak fix ae4558d

- Revert "getpart.pm: Strip carriage returns to fix Windows support"
  
  This reverts commit e51b23c925a2721cf7c29b2b376d3d8903cfb067.
  As discussed on the mailinglist, this was not the correct approach.

- http_negotiate.c: Fixed passing argument from incompatible pointer type

- ftp.c: Added missing brackets around ABOR command logic

- sockfilt.c: Fixed detection of client-side connection close
  
  WINSOCK only:
  Since FD_CLOSE is only signaled once, it may trigger at the same
  time as FD_READ. Data actually being available makes it impossible
  to detect that the connection was closed by checking that recv returns
  zero. Another recv attempt could block the connection if it was
  not closed. This workaround abuses exceptfds in conjunction with
  readfds to signal that the connection has actually closed.

- curl_schannel.c: Fixed memory leak if connection was not successful

- if2ip.c: Fixed warning: unused parameter 'remote_scope'

- runtests.pl: Fixed --verbose parameter passed to http_pipe.py

- sockfilt.c: Reduce CPU load while running under a Windows PIPE

- tftpd.c: Apply sread timeout to the whole data transfer session

- getpart.pm: Strip carriage returns to fix Windows support

Daniel Stenberg (6 Apr 2013)
- ftp tests: libcurl returns CURLE_FTP_ACCEPT_FAILED better now
  
  Since commit 57aeabcc1a20f, it handles errors on the control connection
  while waiting for the data connection better.
  
  Test 591 and 592 are updated accordingly.

- FTP: wait on both connections during active STOR state
  
  When doing PORT and upload (STOR), this function needs to extract the
  file descriptor for both connections so that it will respond immediately
  when the server eventually connects back.
  
  This flaw caused active connections to become unnecessary slow but they
  would still often work due to the normal polling on a timeout. The bug
  also would not occur if the server connected back very fast, like when
  testing on local networks.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1183
  Reported by: Daniel Theron

Marc Hoersken (6 Apr 2013)
- tftpd.c: Follow up cleanup and restore of previous sockopt

Daniel Stenberg (6 Apr 2013)
- [Kim Vandry brought this change]

  connect: treat an interface bindlocal() problem as a non-fatal error
  
  I am using curl_easy_setopt(CURLOPT_INTERFACE, "if!something") to force
  transfers to use a particular interface but the transfer fails with
  CURLE_INTERFACE_FAILED, "Failed binding local connection end" if the
  interface I specify has no IPv6 address. The cause is as follows:
  
  The remote hostname resolves successfully and has an IPv6 address and an
  IPv4 address.
  
  cURL attempts to connect to the IPv6 address first.
  
  bindlocal (in lib/connect.c) fails because Curl_if2ip cannot find an
  IPv6 address on the interface.
  
  This is a fatal error in singleipconnect()
  
  This change will make cURL try the next IP address in the list.
  
  Also included are two changes related to IPv6 address scope:
  
  - Filter the choice of address in Curl_if2ip to only consider addresses
  with the same scope ID as the connection address (mismatched scope for
  local and remote address does not result in a working connection).
  
  - bindlocal was ignoring the scope ID of addresses returned by
  Curl_if2ip . Now it uses them.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1189

Marc Hoersken (6 Apr 2013)
- tftpd.c: Fixed sread timeout on Windows by setting it manually

- ftp.pm: Added tskill to support Windows XP Home

- runtests.pl: Modularization of MinGW/Msys compatibility functions

- ftp.pm: Made Perl testsuite able to handle Windows processes

- util.c: Revert workaround eeefcdf, 6eb56e7 and e3787e8

- ftp.pm: Made Perl testsuite able to kill Windows processes

- util.c: Follow up cleanup on eeefcdf

Daniel Stenberg (6 Apr 2013)
- cpp: use #ifdef __MINGW32__ to avoid compiler complaints
  
  ... instead of just #if

Marc Hoersken (6 Apr 2013)
- util.c: Made write_pidfile write the correct PID on MinGW/Msys
  
  This workaround fixes an issue on MinGW/Msys regarding the Perl
  testsuite scripts not being able to signal or control the server
  processes. The MinGW Perl runtime only sees the Msys processes and
  their corresponding PIDs, but sockfilt (and other servers) wrote the
  Windows PID into their PID-files. Since this PID is useless to the
  testsuite, the write_pidfile function was changed to search for the
  Msys PID and write that into the PID-file.

Daniel Stenberg (5 Apr 2013)
- RELEASE-NOTES: synced with 5e722b2d09087
  
  3 more bug fixes, 6 more contributors

Marc Hoersken (5 Apr 2013)
- sockfilt.c: Fixed handling of multiple fds being signaled

Kamil Dudka (5 Apr 2013)
- curl_global_init.3: improve description of CURL_GLOBAL_ALL
  
  Reported by: Tomas Mlcoch

- examples/multi-single.c: fix the order of destructions
  
  ... so that it adheres to the API documentation.
  
  Reported by: Tomas Mlcoch

Daniel Stenberg (5 Apr 2013)
- Curl_open: restore default MAXCONNECTS to 5
  
  At some point recently we lost the default value for the easy handle's
  connection cache, and this change puts it back to 5 - which is the
  former default value and it is documented in the curl_easy_setopt.3 man
  page.

Marc Hoersken (4 Apr 2013)
- sockfilt.c: Added wrapper functions to fix Windows console issues
  
  The new read and write wrapper functions support reading from stdin
  and writing to stdout/stderr on Windows by using the appropriate
  Windows API functions and data types.

Yang Tse (4 Apr 2013)
- lib1509.c: fix compiler warnings

- easy.c: fix compiler warning

Daniel Stenberg (4 Apr 2013)
- --engine: spellfix the help message
  
  Reported by: Fredrik Thulin

Yang Tse (4 Apr 2013)
- http_negotiate.c: follow-up for commit 3dcc1a9c

Linus Nielsen Feltzing (4 Apr 2013)
- easy: Fix the broken CURLOPT_MAXCONNECTS option
  
  Copy the CURLOPT_MAXCONNECTS option to CURLMOPT_MAXCONNECTS in
  curl_easy_perform().
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1212
  Reported-by: Steven Gu

Guenter Knauf (4 Apr 2013)
- Updated copyright date.

- Another small output fix for --help and --version.

Yang Tse (4 Apr 2013)
- http_negotiate.c: fix several SPNEGO memory handling issues

Guenter Knauf (4 Apr 2013)
- Added a cont to specify base64 line wrap.

- Fixed version output.

- Added support for --help and --version options.

- Added option to specify length of base64 output.
  
  Based on a patch posted to the list by Richard Michael.

Daniel Stenberg (3 Apr 2013)
- curl_easy_setopt.3: CURLOPT_HTTPGET disables CURLOPT_UPLOAD

- [Yasuharu Yamada brought this change]

  Curl_cookie_add: only increase numcookies for new cookies
  
  Count up numcookies in Curl_cookie_add() only when cookie is new one

- SO_SNDBUF: don't set SNDBUF for win32 versions vista or later
  
  The Microsoft knowledge-base article
  http://support.microsoft.com/kb/823764 describes how to use SNDBUF to
  overcome a performance shortcoming in winsock, but it doesn't apply to
  Windows Vista and later versions. If the described SNDBUF magic is
  applied when running on those more recent Windows versions, it seems to
  instead have the reversed effect in many cases and thus make libcurl
  perform less good on those systems.
  
  This fix thus adds a run-time version-check that does the SNDBUF magic
  conditionally depending if it is deemed necessary or not.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1188
  Reported by: Andrew Kurushin
  Tested by: Christian Hägele

Nick Zitzmann (1 Apr 2013)
- darwinssl: additional descriptive messages of SSL handshake errors
  
  (This doesn't need to appear in the release notes.)

Guenter Knauf (1 Apr 2013)
- Added dns and connect time to output.

Daniel Stenberg (1 Apr 2013)
- RELEASE-NOTES: synced with 0614b902136

- code-policed

- tcpkeepalive: support TCP_KEEPIDLE/TCP_KEEPINTVL on win32
  
  Patch by: Robert Wruck
  Bug: http://curl.haxx.se/bug/view.cgi?id=1209

- BINDINGS: BBHTTP is a cocoa binding, Julia has a binding

- ftp_sendquote: use PPSENDF, not FTPSENDF
  
  The last remaining code piece that still used FTPSENDF now uses PPSENDF.
  In the problematic case, a PREQUOTE series was done on a re-used
  connection when Curl_pp_init() hadn't been called so it had messed up
  pointers. The init call is done properly from Curl_pp_sendf() so this
  change fixes this particular crash.
  
  Bug: http://curl.haxx.se/mail/lib-2013-03/0319.html
  Reported by: Sam Deane

Steve Holme (27 Mar 2013)
- RELEASE-NOTES: Corrected typo

Daniel Stenberg (27 Mar 2013)
- [Clemens Gruber brought this change]

  multi-uv.c: remove unused variable

- RELEASE-NOTES: add two references

- test1509: verify proxy header response headers count
  
  Modified sws to support and use custom CONNECT responses instead of the
  previously naive hard-coded version. Made the HTTP test server able to
  extract test case number from the host name in a CONNECT request by
  finding the number after the last dot. It makes 'machine.moo.123' use
  test case 123.
  
  Adapted a larger amount of tests to the new <connect> style.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1204
  Reported by: Martin Jansen

- [Clemens Gruber brought this change]

  Added libuv example multi-uv.c

Yang Tse (25 Mar 2013)
- NTLM: fix several NTLM code paths memory leaks

- WIN32 MemoryTracking: track wcsdup() _wcsdup() and _tcsdup() usage
  
  As of 25-mar-2013 wcsdup() _wcsdup() and _tcsdup() are only used in
  WIN32 specific code, so tracking of these has not been extended for
  other build targets. Without this fix, memory tracking system on
  WIN32 builds, when using these functions, would provide misleading
  results.
  
  In order to properly extend this support for all targets curl.h
  would have to define curl_wcsdup_callback prototype and consequently
  wchar_t should be visible before that in curl.h.  IOW curl_wchar_t
  defined in curlbuild.h and this pulling whatever system header is
  required to get wchar_t definition.
  
  Additionally a new curl_global_init_mem() function that also receives
  user defined wcsdup() callback would be required.

- curl_ntlm_msgs.c: revert commit 463082bea4
  
  reverts unreleased invalid memory leak fix

Daniel Stenberg (23 Mar 2013)
- RELEASE-NOTES: synced with bc6037ed3ec02
  
  More changes, bugfixes and contributors!

- [Martin Jansen brought this change]

  Curl_proxyCONNECT: count received headers
  
  Proxy servers tend to add their own headers at the beginning of
  responses. The size of these headers was not taken into account by
  CURLINFO_HEADER_SIZE before this change.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1204

Steve Holme (21 Mar 2013)
- sasl: Corrected a few violations of the curl coding standards
  
  Corrected some incorrectly positioned pointer variable declarations to
  be "char *" rather than "char* ".

- multi.c: Corrected a couple of violations of the curl coding standards
  
  Corrected some incorrectly positioned pointer variable declarations to
  be "type *" rather than "type* ".

- imap-tests: Added CRLF to reply data to be compliant with RFC-822
  
  Updated the reply data in tests: 800, 801, 802, 804 and 1321 to possess
  the CRLF as per RFC-822.

- multi.c: Fix compilation warning
  
  warning: an enumerated type is mixed with another type

- multi.c: fix compilation error
  
  warning: conversion from enumeration type to different enumeration type

- lib1900.c: fix compilation warning
  
  warning: declaration of 'time' shadows a global declaration

Yang Tse (20 Mar 2013)
- [John E. Malmberg brought this change]

  build_vms.com: use existing curlbuild.h and parsing fix
  
  This patch removes building curlbuild.h from the build_vms.com procedure
  and uses the one in the daily or release tarball instead.
  
  packages/vms/build_curlbuild_h.com is obsolete with this change.
  
  Accessing the library module name "tool_main" needs different handling
  when the optional extended parsing is enabled.
  
  Tested on IA64/VMS 8.4 and VAX/VMS 7.3

Nick Zitzmann (19 Mar 2013)
- darwinssl: disable ECC ciphers under Mountain Lion by default
  
  I found out that ECC doesn't work as of OS X 10.8.3, so those ciphers are
  turned off until the next point release of OS X.

Steve Holme (18 Mar 2013)
- FEATURES: Small tidy up for constancy and grammar

Daniel Stenberg (18 Mar 2013)
- [Oliver Schindler brought this change]

  Curl_proxyCONNECT: clear 'rewindaftersend' on success
  
  After having done a POST over a CONNECT request, the 'rewindaftersend'
  boolean could be holding the previous value which could lead to badness.
  
  This should be tested for in a new test case!
  
  Bug: https://groups.google.com/d/msg/msysgit/B31LNftR4BI/KhRTz0iuGmUJ

Steve Holme (18 Mar 2013)
- TODO: Reordered the protocol and security sections
  
  Moved SMTP, POP3, IMAP and New Protocol sections to be listed after the
  other protocols (FTP, HTTP and TELNET) and SASL to be after SSL and
  GnuTLS as these are all security related.
  
  Additionally fixed numbering of the SSL and GnuTLS sections as they
  weren't consecutive.

Yang Tse (18 Mar 2013)
- tests: specify 'text' mode for some output files in verify section

Steve Holme (17 Mar 2013)
- imap: Fixed incorrect initial response generation for SASL AUTHENTICATE
  
  Fixed incorrect initial response generation for the NTLM and LOGIN SASL
  authentication mechanisms when the SASL-IR was detected.
  
  Introduced in commit: 6da7dc026c14.

- FEATURES: Expanded the supported enhanced IMAP command list

- TODO: Corrected typo in TOC

- TODO: Added IMAP section and removed unused Other protocols section

- TODO: Added graceful base64 decoding failure to SMTP and POP3

- TODO: Corrected typo on section 10.2 heading

Yang Tse (16 Mar 2013)
- tests: 96, 558, 1330: strip build subdirectory dependent leading path

Steve Holme (15 Mar 2013)
- TODO: Added section 10.2 Initial response to POP3 to do list

- imap-tests: Corrected copy/paste error in test808 reply data

Yang Tse (15 Mar 2013)
- unit1330.c: fix date

- tests: add #96 #558 and #1330
  
  These verfy that the 'memory tracking' subsystem is actually doing its
  job when using curl tool (#96), a test in libtest (#558) and also a unit
  test (#1330), in order to prevent regressions in this functionallity.

Steve Holme (15 Mar 2013)
- imap-tests: Added test808 for custom EXAMINE command

Daniel Stenberg (15 Mar 2013)
- HTTP proxy: insert slash in URL if missing
  
  curl has been accepting URLs using slightly wrong syntax for a long
  time, such as when completely missing as slash "http://example.org" or
  missing a slash when a query part is given
  "http://example.org?q=foobar".
  
  curl would translate these into a legitimate HTTP request to servers,
  although as was shown in bug #1206 it was not adjusted properly in the
  cases where a HTTP proxy was used.
  
  Test 1213 and 1214 were added to the test suite to verify this fix.
  
  The test HTTP server was adjusted to allow us to specify test number in
  the host name only without using any slashes in a given URL.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1206
  Reported by: ScottJi

Steve Holme (14 Mar 2013)
- ftpserver.pl: Added EXAMINE_imap() for IMAP EXAMINE commands
  
  Used hard coded data from RFC-3501 section 6.3.2.

Yang Tse (14 Mar 2013)
- curl_memory.h: introduce CURLX_NO_MEMORY_CALLBACKS usage possibility
  
  This commit alone does not fix anything nor modifies existing
  interfaces or behaviors, although it is a prerequisite for other
  fixes.

- Makefile.vc6: add missing files

Linus Nielsen Feltzing (14 Mar 2013)
- pipelining: Remove dead code.

- Multiple pipelines and limiting the number of connections.
  
  Introducing a number of options to the multi interface that
  allows for multiple pipelines to the same host, in order to
  optimize the balance between the penalty for opening new
  connections and the potential pipelining latency.
  
  Two new options for limiting the number of connections:
  
  CURLMOPT_MAX_HOST_CONNECTIONS - Limits the number of running connections
  to the same host. When adding a handle that exceeds this limit,
  that handle will be put in a pending state until another handle is
  finished, so we can reuse the connection.
  
  CURLMOPT_MAX_TOTAL_CONNECTIONS - Limits the number of connections in total.
  When adding a handle that exceeds this limit,
  that handle will be put in a pending state until another handle is
  finished. The free connection will then be reused, if possible, or
  closed if the pending handle can't reuse it.
  
  Several new options for pipelining:
  
  CURLMOPT_MAX_PIPELINE_LENGTH - Limits the pipeling length. If a
  pipeline is "full" when a connection is to be reused, a new connection
  will be opened if the CURLMOPT_MAX_xxx_CONNECTIONS limits allow it.
  If not, the handle will be put in a pending state until a connection is
  ready (either free or a pipe got shorter).
  
  CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE - A pipelined connection will not
  be reused if it is currently processing a transfer with a content
  length that is larger than this.
  
  CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE - A pipelined connection will not
  be reused if it is currently processing a chunk larger than this.
  
  CURLMOPT_PIPELINING_SITE_BL - A blacklist of hosts that don't allow
  pipelining.
  
  CURLMOPT_PIPELINING_SERVER_BL - A blacklist of server types that don't allow
  pipelining.
  
  See the curl_multi_setopt() man page for details.

Yang Tse (13 Mar 2013)
- tool_main.c: remove redundant vms_show storage-class specifier
  
  vms_show 'extern' storage-class specifier removed from tool_main.c due to...
  
  - Advice from Tor Arntsen: http://curl.haxx.se/mail/lib-2013-03/0164.html
  
  - HP OpenVMS docs stating that 'Extern is the default storage class for
    variables declared outside a function.'
    http://h71000.www7.hp.com/commercial/c/docs/dec_c_help_5.html
    (Storage_Classes section)

- test509: libcurl initialization with memory callbacks and actual usage

Steve Holme (13 Mar 2013)
- pop3: Removed unnecessary transfer cancellation
  
  Following commit e450f66a02d8 and the changes in the multi interface
  being used internally, from 7.29.0, the transfer cancellation in
  pop3_dophase_done() is no longer required.

Yang Tse (13 Mar 2013)
- Makefile.am: add VMS files not being included in tarball

- [Tom Grace brought this change]

  build_vms.com: VMS build fixes
  
  Added missing slash in cc_full_list.
  Removed unwanted extra quotes inside symbol tool_main
  for non-VAX architectures that triggered link failure.
  Replaced curl_sys_inc with sys_inc.

- [Tom Grace brought this change]

  tool_main.c: fix VMS global variable storage-class specifier
  
  An extern submits a psect and a global reference to the linker to point
  to it. Using "extern int vms_show = 0" also creates a globaldef.
  
  The use of the extern by itself does declare a psect but does not declare
  a globalsymbol. It does declare a globalref. But the linker needs one and
  only one globaldef or there is an error.

Patrick Monnerat (12 Mar 2013)
- OS400: synchronize RPG binding

Steve Holme (12 Mar 2013)
- pop3: Fixed continuous wait when using --ftp-list
  
  Don't initiate a transfer when using --ftp-list.

Kamil Dudka (12 Mar 2013)
- [Zdenek Pavlas brought this change]

  curl_global_init: accept the CURL_GLOBAL_ACK_EINTR flag
  
  The flag can be used in pycurl-based applications where using the multi
  interface would not be acceptable because of the performance lost caused
  by implementing the select() loop in python.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1168
  Downstream Bug: https://bugzilla.redhat.com/919127

- easy: do not ignore poll() failures other than EINTR

Yang Tse (12 Mar 2013)
- curl.h: stricter CURL_EXTERN linkage decorations logic
  
  No API change involved.
  
  Info: http://curl.haxx.se/mail/lib-2013-02/0234.html

Daniel Stenberg (11 Mar 2013)
- THANKS: Latin-1'ified Jiri's name

Steve Holme (11 Mar 2013)
- test806: Added CRLF to reply data to be compliant with RFC-822

Daniel Stenberg (11 Mar 2013)
- test805: added crlf newlines to make data size match
  
  since mails sent are supposed to have CRLF line endings I added them and
  now the data size after (\Seen) matches again properly

- test: fix newline for the data check of 807

Yang Tse (11 Mar 2013)
- test801 to test807: fix protocol section line endings

Steve Holme (10 Mar 2013)
- Makefile.am: Corrected a couple of spurious tab characters
  
  Corrected a couple of tab characters between test702 and test703, and
  between test900 and test901 which should be spaces.

- [Jiri Hruska brought this change]

  imap: Added test807 for custom request functionality (STORE)

- [Jiri Hruska brought this change]

  imap: Added test806 for IMAP (folder) LIST command

- [Jiri Hruska brought this change]

  imap: Added test805 for APPEND functionality

- [Jiri Hruska brought this change]

  imap: Added test804 for skipping SELECT if in the same mailbox

- [Jiri Hruska brought this change]

  imap: Added test802 and test803 for UIDVALIDITY verification
  
  Added one test for a request with matching UIDVALIDITY and one which is
  a mismatched request that will fail.

- [Jiri Hruska brought this change]

  imap: Added test801 for UID and SECTION URL parameters

- [Jiri Hruska brought this change]

  imap-tests: Accept quoted parameters in ftpserver.pl
  
  Any IMAP parameter can come in escaped and in double quotes. Added a
  simple function to unquote the command parameters and applied it to
  the IMAP command handlers.

- [Jiri Hruska brought this change]

  tests: Fix ftpserver.pl indentation
  
  The whole of FETCH_imap() had one extra space of indentation, whilst
  APPEND_imap() used indentation of 2 instead of 4 in places.

- Makefile.am: Corrected end of line filler character
  
  The majority of lines, that specify a test file for inclusion, end with
  a tab character before the slash whilst some end with a space. Corrected
  those that end with a space to end with a tab character as well.

- email-tests: Updated the test data that corresponds to the test number
  
  Finished segregating the email protocol tests, into their own protocol
  based ranges, in preparation of adding more e-mail related tests to the
  test suite.

- email-tests: Renamed the IMAP test to be 800
  
  Continued segregating the email protocol tests, into their own protocol
  based ranges, in preparation of adding more e-mail related tests to the
  test suite.

- email-tests: Renamed the SMTP tests to be in the range 900-906
  
  Continued segregating the email protocol tests, into their own protocol
  based ranges, in preparation of adding more e-mail related tests to the
  test suite.

- email-tests: Renamed the POP3 tests to be in the range 850-857
  
  Started segregating the email protocol tests, into their own protocol
  based ranges, in preparation of adding more e-mail related tests to the
  test suite.

Daniel Stenberg (10 Mar 2013)
- hiperfifo: updated to use current libevent API
  
  Patch by: Myk Taylor

Steve Holme (10 Mar 2013)
- imap: Reworked some function descriptions

- imap: Added some missing comments to imap_sendf()

- email: Removed hard returns from init functions

Daniel Stenberg (9 Mar 2013)
- curl_multi_wait: avoid second loop if nothing to do
  
  ... hopefully this will also make clang-analyzer stop warning on
  potentional NULL dereferences (which were false positives anyway).

- multi_runsingle: avoid NULL dereference
  
  When Curl_do() returns failure, the connection pointer could be NULL so
  the code path following needs to that that into account.
  
  Bug: http://curl.haxx.se/mail/lib-2013-03/0062.html
  Reported by: Eric Hu

Steve Holme (9 Mar 2013)
- imap: Re-factored all perform based functions
  
  Standardised the naming of all perform based functions to be in the form
  imap_perform_something().

Daniel Stenberg (9 Mar 2013)
- [Cédric Deltheil brought this change]

  examples/getinmemory.c: abort the transfer if not enough memory
  
  No more use exit(3) but instead tell libcurl that no byte has been
  written to let it return a `CURLE_WRITE_ERROR`. In addition, check
  curl easy handle return code.

- RELEASE-NOTES: synced with ca3c0ed3a9c
  
  8 more bugfixes, one change and a bunch of contributors

Yang Tse (9 Mar 2013)
- Makefile.am: empty AM_LDFLAGS definition for automake 1.7 compatibility

Steve Holme (9 Mar 2013)
- imap: Added description comments to all perform based functions

- imap: Removed the need for separate custom request functions
  
  Moved the custom request processing into the LIST command as the logic
  is the same.

- imap: Corrected typo in comment

Yang Tse (9 Mar 2013)
- Makefile.am: empty AM_LDFLAGS definition for automake 1.7 compatibility

Steve Holme (9 Mar 2013)
- imap: Moved imap_logout() to be grouped with the other perform functions

- email: Updated the function descriptions for the logout / quit functions
  
  Updated the function description comments following commit 4838d196fdbf.

- email: Simplified the logout / quit functions
  
  Moved the blocking state machine to the disconnect functions so that the
  logout / quit functions are only responsible for sending the actual
  command needed to logout or quit.
  
  Additionally removed the hard return on failure.

- email: Tidied up the *_regular_transfer() functions
  
  Added comments and simplified convoluted dophase_done comparison.

- email: Simplified nesting of if statements in *_doing() functions

Daniel Stenberg (8 Mar 2013)
- RELEASE-NOTES: mention that krb4 is up for consideration

Steve Holme (8 Mar 2013)
- imap: Fixed handling of untagged responses for the STORE custom command
  
  Added an exception, for the STORE command, to the untagged response
  processor in imap_endofresp() as servers will back respones containing
  the FETCH keyword instead.

Yang Tse (8 Mar 2013)
- curlbuild.h.dist: enhance non-configure GCC ABI detection logic
  
  GCC specific adjustments:
  
  - check __ILP32__ before 32 and 64bit processor architectures in
    order to detect ILP32 programming model on 64 bit processors
    which, of course, also support LP64 programming model, when using
    gcc 4.7 or newer.
  
  - keep 32bit processor architecture checks in order to support gcc
    versions older than 4.7 which don't define __ILP32__
  
  - check __LP64__ for gcc 3.3 and newer, while keeping 64bit processor
    architecture checks for older versions which don't define __LP64__

- curlbuild.h.dist: fix GCC build on ARM systems without configure script
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1205
  Reported by: technion

- [Gisle Vanem brought this change]

  polarssl.c: fix header filename typo

- configure: use XC_LIBTOOL for portability across libtool versions

- xc-lt-iface.m4: provide XC_LIBTOOL macro

Steve Holme (7 Mar 2013)
- imap: Fixed SELECT not being performed for custom requests

- email: Minor code tidy up following recent changes
  
  Removed unwanted braces and added variable initialisation.

- DOCS: Corrected the IMAP URL grammar of the UIDVALIDITY parameter

- FEATURES: Provided a little clarity in some IMAP features

- email: Optimised block_statemach() functions
  
  Optimised the result test in each of the block_statemach() functions.

- DOCS: Added the list command to the IMAP URL section
  
  Added examples of the list command and clarified existing example URLs
  following recent changes.

- FEATURES: Updated for recent imap additions
  
  Updated the imap features list, corrected a typo in the smtp features
  and clarified a pop3 feature.

Daniel Stenberg (7 Mar 2013)
- version bump: the next release will be 7.30.0

- checksrc: ban unsafe functions
  
  The list of unsafe functions currently consists of sprintf, vsprintf,
  strcat, strncat and gets.
  
  Subsequently, some existing code needed updating to avoid warnings on
  this.

Steve Holme (7 Mar 2013)
- RELEASE-NOTES: Added missing imap fixes and additions
  
  With all the recent imap changes it wasn't clear what new features and
  fixes should be included in the release notes.

Nick Zitzmann (6 Mar 2013)
- RELEASE-NOTES: brought this up-to-date with the latest changes

Steve Holme (6 Mar 2013)
- [Jiri Hruska brought this change]

  imap: Fixed test801 and test1321 to specify a message UID
  
  Just a folder list would be retrieved if UID was not specified now.

- [Jiri Hruska brought this change]

  imap: Fixed ftpserver.pl to allow verification even through LIST command
  
  Commit 198012ee inadvertently broke LIST_imap().

- imap: Tidied up the APPEND and final APPEND response functions
  
  Removed unnecessary state changes on failure and setting of result codes
  on success.

- imap: Tidied up the final FETCH response function
  
  Removed unnecessary state change on failure and setting of result code on
  success.

- imap: Tidied up the LIST response function
  
  Reworked comments as they referenced custom commands, removed
  unnecessary state change on failure and setting of result code on
  success.

- imap: Removed the custom request response function
  
  Removed imap_state_custom_resp() as imap_state_list_resp() provides the
  same functionality.

- [Jiri Hruska brought this change]

  imap: Updated ftpserver.pl to be more compliant, added new commands
  
  Enriched IMAP capabilities of ftpserver.pl in order to be able to
  add tests for the new IMAP features.
  
  * Added support for APPEND - Saves uploaded data to log/upload.$testno
  * Added support for LIST - Returns the contents of <reply/> section in
    the current test, like e.g FETCH.
  * Added support for STORE - Returns hardcoded updated flags
  * Changed handling of SELECT - Returns much more information in the
    usual set of untagged responses; uses hardcoded data from an example
    in the IMAP RFC
  * Changed handling of FETCH - Fixed response format

- imap: Added check for empty UID in FETCH command
  
  As the UID has to be specified by the user for the FETCH command to work
  correctly, added a check to imap_fetch(), although strictly speaking it
  is protected by the call from imap_perform().

Kamil Dudka (6 Mar 2013)
- nss: fix misplaced code enabling non-blocking socket mode
  
  The option needs to be set on the SSL socket.  Setting it on the model
  takes no effect.  Note that the non-blocking mode is still not enabled
  for the handshake because the code is not yet ready for that.

Daniel Stenberg (6 Mar 2013)
- imap: fix compiler warning
  
  imap.c:694:21: error: unused variable 'imapc' [-Werror=unused-variable]

Steve Holme (5 Mar 2013)
- imap: Added support for list command

- imap: Added list perform and response handler functions

- imap: Introduced IMAP_LIST state

- imap: Small tidy up of imap_select() to match imap_append()
  
  Updated the style of imap_select() before adding the LIST command.

- imap: Moved mailbox check from the imap_do() function
  
  In preparation for the addition of the LIST command, moved the mailbox
  check from imap_do() to imap_select() and imap_append().

- curl_setup.h: Added S_IRDIR() macro for compilers that don't support it
  
  Commit 26eaa8383001 introduces the use of S_ISDIR() yet some compilers,
  such as MSVC don't support it, so we must define a substitute using
  file flags and mask.

Daniel Stenberg (4 Mar 2013)
- AddFormData: prevent only directories from being posted
  
  Commit f4cc54cb4746ae5a6d (shipped as part of the 7.29.0 release) was a
  bug fix that introduced a regression in that while trying to avoid
  allowing directory names, it also forbade "special" files like character
  devices and more. like "/dev/null" as was used by Oliver who reported
  this regression.
  
  Reported by: Oliver Gondža
  Bug: http://curl.haxx.se/mail/archive-2013-02/0040.html

Nick Zitzmann (3 Mar 2013)
- darwinssl: fix infinite loop if server disconnected abruptly
  
  If the server hung up the connection without sending a closure alert,
  then we'd keep probing the socket for data even though it's dead. Now
  we're ready for this situation.
  
  Bug: http://curl.haxx.se/mail/lib-2013-03/0014.html
  Reported by: Aki Koskinen

Steve Holme (3 Mar 2013)
- imap: Added comments to imap_append()

- [Jiri Hruska brought this change]

  imap: Added required mailbox check for FETCH and APPEND commands

- pingpong.c: Fix enumerated type mixed with another type

- smtp: Updated the coding style for state changes after a send operation
  
  Some state changes would be performed after a failure test that
  performed a hard return, whilst others would be performed within a test
  for success. Updated the code, for consistency, so all instances are
  performed within a success test.

- pop3: Updated the coding style for state changes after a send operation
  
  Some state changes would be performed after a failure test that
  performed a hard return, whilst others would be performed within a test
  for success. Updated the code, for consistency, so all instances are
  performed within a success test.

- imap: Fixed typo in variable assignment

- [Jiri Hruska brought this change]

  imap: Fixed custom request handling in imap_done()
  
  Fixed imap_done() so that neither the FINAL states are not entered when
  a custom command has been performed.

- [Jiri Hruska brought this change]

  imap: Enabled custom requests in imap_select_resp()
  
  Changed imap_select_resp() to invoke imap_custom() instead of
  imap_fetch() after the mailbox has been selected if a custom
  command has been set.

- [Jiri Hruska brought this change]

  imap: Enabled custom requests in imap_perform()
  
  Modified imap_perform() to start with the custom command instead of
  SELECT when a custom command is to be performed and no mailbox has
  been given.

- [Jiri Hruska brought this change]

  imap: Added custom request perform and response handler functions
  
  Added imap_custom(), which initiates the custom command processing,
  and an associated response handler imap_state_custom_resp(), which
  handles any responses by sending them to the client as body data.
  
  All untagged responses with the same name as the first word of the
  custom request string are accepted, with the exception of SELECT and
  EXAMINE which have responses that cannot be easily identified. An
  extra check has been provided for them so that any untagged responses
  are accepted for them.

- pop3: Fixed unnecessary parent structure reference
  
  Updated pop3 code following recent imap changes.

- [Jiri Hruska brought this change]

  imap: Added custom request parsing
  
  Added imap_parse_custom_request() for parsing the CURLOPT_CUSTOMREQUEST
  parameter which URL decodes the value and separates the request from
  any parameters - This makes it easier to filter untagged responses
  by the request command.

- [Jiri Hruska brought this change]

  imap: Introduced custom request parameters
  
  Added custom request parameters to the per-request structure.

- [Jiri Hruska brought this change]

  imap: Introduced IMAP_CUSTOM state

- imap: Minor code tidy up
  
  Minor tidy up of code layout and comments following recent changes.

- imap: Simplified the imap_state_append_resp() function
  
  Introduced the result code variable to simplify the state changes and
  remove the hard returns.

- imap: Changed successful response logic in imap_state_append_resp()
  
  For consistency changed the logic of the imap_state_append_resp()
  function to test for an unsucessful continuation response rather than a
  succesful one.

- imap: Standardised imapcode condition tests
  
  For consistency changed two if(constant != imapcode) tests to be
  if(imapcode != constant).

- imap: Moved imap_append() to be with the other perform functions

- [Jiri Hruska brought this change]

  imap: Enabled APPEND support in imap_perform()
  
  Added logic in imap_perform() to perform an APPEND rather than SELECT
  and FETCH if an upload has been specified.

- [Jiri Hruska brought this change]

  imap: Implemented APPEND final processing
  
  The APPEND operation needs to be performed in several steps:
    1) We send "<tag> APPEND <mailbox> <flags> {<size>}\r\n"
    2) Server responds with continuation respose "+ ...\r\n"
    3) We start the transfer and send <size> bytes of data
    4) Only now we end the request command line by sending "\r\n"
    5) Server responds with "<tag> OK ...\r\n"
  
  This commit performs steps 4 and 5, in the DONE phase, as more
  processing is required after the transfer.

- [Jiri Hruska brought this change]

  imap: Added APPEND perform and response handler functions
  
  Added imap_append() function to initiate upload and imap_append_resp()
  to handle the continuation response and start the transfer.

- [Jiri Hruska brought this change]

  imap: Introduced IMAP_APPEND and IMAP_APPEND_FINAL states

- [Jiri Hruska brought this change]

  imap: Updated setting of transfer variables in imap_state_fetch_resp()
  
  Add number of bytes retrieved from the PP cache to req.bytecount and set
  req.maxdownload only when starting a proper download.

- [Jiri Hruska brought this change]

  imap: Improved FETCH response parsing
  
  Added safer parsing of the untagged FETCH response line and the size of
  continuation data.

- imap: Fixed accidentally lossing the result code
  
  Accidentally lost the result code in imap_state_capability() and
  imap_state_login() with commit b06a78622609.

- imap: Another minor comment addition / tidy up

- imap: Updated the coding style for state changes after a send operation
  
  Some state changes would be performed after a failure test that
  performed a hard return, whilst others would be performed within a test
  for success. Updated the code, for consistency, so all instances are
  performed within a success test.

- pop3 / smtp: Small comment tidy up
  
  Small tidy up to keep some comments consistant across each of the email
  protocols.

- [Jiri Hruska brought this change]

  imap: FETCH response handler cleanup before further changes
  
  Removed superfluous NULL assignment after Curl_safefree() and rewrote
  some comments and logging messages.

- pop3: Small tidy up of function arguments

- imap: Small tidy up of function arguments

- smtp: Corrected debug message for POP3_AUTH_FINAL constant
  
  Following commit ad3177da24b8 corrected the debug message in state()
  from AUTH to AUTH_FINAL.

- pop3: Corrected debug message for POP3_AUTH_FINAL constant
  
  Following commit afad1ce753a1 corrected the debug message in state()
  from AUTH to AUTH_FINAL.

- imap: Corrected debug message for IMAP_AUTHENTICATE_FINAL constant
  
  Following commit 13006f3de9ec corrected the debug message in state()
  from AUTHENTICATE to AUTHENTICATE_FINAL.

- [Jiri Hruska brought this change]

  imap: Fixed error code returned for invalid FETCH response
  
  If the FETCH command does not result in an untagged response the the
  UID is probably invalid. As such do not return CURLE_OK.

- [Jiri Hruska brought this change]

  imap: Added processing of the final FETCH responses
  
  Not processing the final FETCH responses was not optimal, not only
  because the response code would be ignored but it would also leave data
  unread on the socket which would prohibit connection reuse.

- [Jiri Hruska brought this change]

  imap: Introduced FETCH_FINAL state for processing final fetch responses
  
  A typical FETCH response can be broken down into four parts:
  
    1) "* <uid> FETCH (<what> {<size>}\r\n", using continuation syntax
    2) <size> bytes of the actual message
    3) ")\r\n", finishing the untagged response
    4) "<tag> OK ...", finishing the command
  
  Part 1 is read in imap_fetch_resp(), part 2 is consumed in the PERFORM
  phase by the transfer subsystem, parts 3 and 4 are currently ignored.

- imap: fix autobuild warning
  
  Removed whitespace from imap_perform()

- imap: fix compiler warning
  
  error: declaration of 'imap' shadows a previous local

- smtp: Re-factored the final SMTP_AUTH constant
  
  Changed the final SMTP_AUTH constant to SMTP_AUTH_FINAL for consistency
  with the response function.

- pop3: Re-factored the final POP3_AUTH constant
  
  Changed the final POP3_AUTH constant to POP3_AUTH_FINAL for consistency
  with the response function.

- imap: Re-factored final IMAP_AUTHENTICATE constant
  
  Changed the final IMAP_AUTHENTICATE constant to IMAP_AUTHENTICATE_FINAL
  for consistency with the response function.

- imap: Updated the coding style of imap_state_servergreet_resp()
  
  Updated the coding style, in this function, to be consistant with other
  response functions rather then performing a hard return on failure.

- imap: Reversed the logic of the (un)successful tagged SELECT response
  
  Reversed the logic of the unsuccessful vs successful tagged SELECT
  response in imap_state_select_resp() to be more logical to read.

- imap: Reversed the logic of the (un)successful tagged CAPABILITY response
  
  Reversed the logic of the unsuccessful vs successful tagged CAPABILITY
  response in imap_state_capability_resp() to be more logical to read.

- imap: Corrected char* references with char *
  
  Corrected char* references made in commit: 709b3506cd9b.

- [Jiri Hruska brought this change]

  imap: Added processing of more than one response when sent in same packet
  
  Added a loop to imap_statemach_act() in which Curl_pp_readresp() is
  called until the cache is drained. Without this multiple responses
  received in a single packet could result in a hang or delay.

- [Jiri Hruska brought this change]

  imap: Added skipping of SELECT command if already in the same mailbox
  
  Added storage and checking of the last mailbox userd to prevent
  unnecessary switching.

- [Jiri Hruska brought this change]

  imap: Introduced the mailbox variable
  
  Added the mailbox variable to the per-connection structure in
  preparation for checking for an already selected mailbox.

- email: Slight reordering of connection based variables
  
  Reordered the state and ssl_done variables in order to provide more
  consistency between the email protocols as well as for for an upcoming
  change.

- imap: Tidied up comments for connection based variables

- DOCS: Added the IMAP UIDVALIDITY property to the CURLOPT_URL section

- [Jiri Hruska brought this change]

  imap: Added verification of UIDVALIDITY mailbox attribute
  
  Added support for checking the UIDVALIDITY, and aborting the request, if
  it has been specified in the URL and the server response is different.

- [Jiri Hruska brought this change]

  imap: Added support for parsing the UIDVALIDITY property
  
  Added support for parsing the UIDVALIDITY property from the SELECT
  response and storing it in the per-connection structure.

- [Jiri Hruska brought this change]

  imap: Introduced the mailbox_uidvalidity variable
  
  Added the mailbox_uidvalidity variable to the per-connection structure
  in preparation for checking the UIDVALIDITY mailbox attribute.

- imap: Corrected comment in imap_endofresp()

- imap: Corrected whitespace

- [Jiri Hruska brought this change]

  imap: Added filtering of CAPABILITY and FETCH untagged responses
  
  Only responses that contain "CAPABILITY" and "FETCH", respectively,
  will be sent to their response handler.

- [Jiri Hruska brought this change]

  imap: Added a helper function for upcoming untagged response filtering
  
  RFC 3501 states that "the client MUST be prepared to accept any response
  at all times" yet we assume anything received with "* " at the beginning
  is the untagged response we want.
  
  Introduced a helper function that checks whether the input looks like a
  response to specified command, so that we may filter the ones we are
  interested in according to the current state.

- [Jiri Hruska brought this change]

  imap: Moved CAPABILITY response handling to imap_state_capability_resp()
  
  Introduced similar handling to the FETCH responses, where even the
  untagged data responses are handled by the response handler of the
  individual state.

Linus Nielsen Feltzing (26 Feb 2013)
- Remove unused variable in smtp_state_data_resp()

Steve Holme (25 Feb 2013)
- email: Small tidy up following recent changes

- smtp: Removed bytecountp from the per-request structure
  
  Removed this pointer to a downloaded bytes counter because it was set in
  smtp_init() to point to the same variable the transfer functions keep
  the count in (k->bytecount), effectively making the code in transfer.c
  "*k->bytecountp = k->bytecount" a no-op.

- pop3: Removed bytecountp from the per-request structure
  
  Removed this pointer to a downloaded bytes counter because it was set in
  pop3_init() to point to the same variable the transfer functions keep
  the count in (k->bytecount), effectively making the code in transfer.c
  "*k->bytecountp = k->bytecount" a no-op.

- [Jiri Hruska brought this change]

  imap: Removed bytecountp from the per-request structure
  
  Removed this pointer to a downloaded bytes counter because it was set in
  imap_init() to point to the same variable the transfer functions keep
  the count in (k->bytecount), effectively making the code in transfer.c
  "*k->bytecountp = k->bytecount" a no-op.

- [Jiri Hruska brought this change]

  imap: Adjusted SELECT and FETCH function order
  
  Moved imap_select() and imap_fetch() to be grouped with the other
  perform functions.

- [Jiri Hruska brought this change]

  imap: Adjusted SELECT and FETCH state order in imap_statemach_act()
  
  Exchanged the position of these states in the switch statements to
  match the state enum, execution and function order.

- imap: Minor tidy up of comments in imap_parse_url_path()
  
  Tidy up of comments before next round of imap changes.

- imap: Fixed incorrect comparison for STARTTLS in imap_endofresp()
  
  Corrected the comparison type in addition to commit 1dac29fa83a9.

- DOCS: Corrected IMAP URL examples according to RFC5092
  
  URL examples that included the UID weren't technically correct although
  would pass the curl parser.

Nick Zitzmann (24 Feb 2013)
- darwinssl: fix undefined $ssllib warning in runtests.pl
  
  I also added --with-darwinssl to the list of SSL options in configure.

Steve Holme (24 Feb 2013)
- imap: Added check for new internal imap response code

- imap: Changed the order of the response types in imap_endofresp()
  
  From a maintenance point of view the code reads better to view tagged
  responses, then untagged followed by continuation responses.
  
  Additionally, this matches the order of responses in POP3.

- [Jiri Hruska brought this change]

  imap: Added stricter parsing of continuation responses
  
  Enhanced the parsing to only allow continuation responses in some
  states.

- imap: Simplified memcmp() in tagged response parsing

- [Jiri Hruska brought this change]

  imap: Reworked the logic of untagged command responses

- imap: Corrected spacing of trailing brace

- [Jiri Hruska brought this change]

  imap: Added stricter parsing of tagged command responses
  
  Enhanced the parsing of tagged responses which must start with "OK",
  "NO" or "BAD"

- [Jiri Hruska brought this change]

  imap: Simplified command response test in imap_endofresp()

- [Jiri Hruska brought this change]

  imap: Corrected comment in imap_endofresp()

- DOCS: Corrected layout of POP3 and IMAP URL examples
  
  Corrected layout issues with the POP3 and IMAP URL examples introduced
  in commit cb3ae6894fb2.

- DOCS: Updated CURLOPT_URL section following recent POP3 and IMAP changes
  
  Updated the POP3 sub-section to refer to message ID rather than mailbox.
  
  Added an IMAP sub-section with example URLs depicting the specification
  of mailbox, uid and section.

- pop3: Refactored the mailbox variable as it didn't reflect it's purpose
  
  Updated the mailbox variable to correctly reflect it's purpose. The
  name mailbox was a leftover from when IMAP and POP3 support was
  initially added to curl.

- FEATURES: Updated following recent IMAP changes

- [Jiri Hruska brought this change]

  imap: Added the ability to FETCH a specific UID and SECTION
  
  Updated the FETCH command to send the UID and SECTION parsed from the
  URL. By default the BODY specifier doesn't include a section, BODY[] is
  now sent whereas BODY[TEXT] was previously sent. In my opinion
  retrieving just the message text is rarely useful when dealing with
  emails, as the headers are required for example, so that functionality
  is not retained. In can however be simulated by adding SECTION=TEXT to
  the URL.
  
  Also updated test801 and test1321 due to the BODY change.

- email: Additional tidy up of comments following recent changes

- smtp: Removed some FTP heritage leftovers
  
  Removed user and passwd from the SMTP struct as these cannot be set on
  a per-request basis and are leftover from legacy FTP code.
  
  Changed some comments still using FTP terminology.

- smtp: Moved the per-request variables to the per-request data structure
  
  Moved the rcpt variable from the per-connection struct smtp_conn to the
  new per-request struct and fixed references accordingly.

- pop3: Introduced a custom SMTP structure for per-request data
  
  Created a new SMTP structure and changed the type of the smtp proto
  variable in connectdata from FTP* to SMTP*.

unknown (23 Feb 2013)
- [Steve Holme brought this change]

  imap: Minor correction of comments for max line length

Daniel Stenberg (23 Feb 2013)
- strcasestr: remove check for this unused function

- pop3: fix compiler warning
  
  error: declaration of 'pop3' shadows a previous local

Steve Holme (23 Feb 2013)
- [Jiri Hruska brought this change]

  imap: Added URL parsing of new variables
  
  Updated the imap_parse_url_path() function to parse uidvalidity, uid and
  section parameters based on RFC-5092.

- [Jiri Hruska brought this change]

  imap: Introduced imap_is_bchar() function
  
  Added imap_is_bchar() for testing if a given character is a valid bchar
  or not.

- [Jiri Hruska brought this change]

  imap: Introduced new per-request veriables
  
  Added uidvalidity, uid and section variables to the per-request IMAP
  structure in preparation for upcoming URL parsing.

- pingpong: Renamed curl_ftptransfer to curl_pp_transfer

- pop3: Removed some FTP heritage leftovers
  
  Removed user and passwd from the POP3 struct as these cannot be set on
  a per-request basis and are leftover from legacy FTP code.
  
  Changed some comments still using FTP terminology.

- pop3: Moved the per-request variables to the per-request data structure
  
  Moved the mailbox and custom request variables from the per-connection
  struct pop3_conn to the new per-request struct and fixed references
  accordingly.

- pop3: Introduced a custom POP3 structure for per-request data
  
  Created a new POP3 structure and changed the type of the pop3 proto
  variable in connectdata from FTP* to POP*.

- [Jiri Hruska brought this change]

  imap: Fixed escaping of mailbox names
  
  Used imap_atom() to escape mailbox names in imap_select().

- pingpong: Moved curl_ftptransfer definition to pingpong.h
  
  Moved the ftp transfer structure into pingpong.h so other protocols that
  require it don't have to include ftp.h.

- urldata.h: Fixed comment for opt_no_body variable
  
  Corrected comment for opt_no_body variable to CURLOPT_NOBODY.

- email: Minor tidy up following IMAP changes

- [Jiri Hruska brought this change]

  imap: Removed more FTP leftovers
  
  Changed some variables and comments still using FTP terminology.

- [Jiri Hruska brought this change]

  imap: Removed some FTP heritage leftovers
  
  Removed user and passwd from the IMAP struct as these cannot be set on
  a per-request basis and are leftover from legacy FTP code.

- [Jiri Hruska brought this change]

  imap: Introduced a custom IMAP structure for per-request data
  
  Created a new IMAP structure and changed the type of the imap proto
  variable in connectdata from FTP* to the new IMAP*.
  
  Moved the mailbox variable from the per-connection struct imap_conn to
  the new per-request struct and fixed references accordingly.

- pop3: Updated do phrase clean-up comment
  
  Following commit 65644b833532 for the IMAP module updated the clean-up
  comment in POP3.

- imap: Fixed memory leak when performing multiple selects
  
  Moved the clean-up of the mailbox variable from imap_disconnect() to
  imap_done() as this variable is allocated in the do phase, yet would
  have only been freed only once if multiple selects where preformed
  on a single connection.

Daniel Stenberg (22 Feb 2013)
- [Alexander Klauer brought this change]

  Documentation: Typo in docs/CONTRIBUTE
  
  Fixes a typo get → git in docs/CONTRIBUTE.

- [Alexander Klauer brought this change]

  repository: ignore patch files generated by git
  
  Ignores the patch files generated by the 'git format-patch' command.

- [Alexander Klauer brought this change]

  libcurl documentation: clarifications and typos
  
  * Elaborates on default values of some curl_easy_setopt() options.
  * Reminds the user to cast variadic arguments to curl_easy_setopt() to
    'void *' where curl internally interprets them as such.
  * Clarifies the working of the CURLOPT_SEEKFUNCTION option for
    curl_easy_setopt().
  * Fixes typo 'forth' → 'fourth'.
  * Elaborates on CURL_SOCKET_TIMEOUT.
  * Adds some missing periods.
  * Notes that the return value of curl_version() must not be passed to
    free().

- [Alexander Klauer brought this change]

  lib/url.c: Generic read/write data pointers
  
  Always interprets the pointer passed with the CURLOPT_WRITEDATA or
  CURLOPT_READDATA options of curl_easy_setopt() as a void pointer in
  order to avoid problems in environments where FILE and void pointers
  have non-trivial conversion.

- [Alexander Klauer brought this change]

  libcurl documentation: updates HTML index
  
  * Adds several links to documentation of library functions which were
    missing.
  * Marks documentation of deprecated library functions "(deprecated)".
  * Removes spurious .html suffixes.

- ossl_seed: avoid recursive seeding!

Steve Holme (22 Feb 2013)
- [Jiri Hruska brought this change]

  Fixed checking the socket if there is data waiting in the cache
  
  Use Curl_pp_moredata() in Curl_pp_multi_statemach() to check if there is
  more data to be received, rather than the socket state, as a task could
  hang waiting for more data from the socket itself.

- imap.c: Fixed an incorrect variable reference
  
  Fixed an incorrect variable reference which was introduced in commit
  a1701eea289f as a result of a copy and paste from SMTP/POP3.

- [Jiri Hruska brought this change]

  pingpong: Introduce Curl_pp_moredata()
  
  A simple function to test whether the PP is not sending and there are
  still more data in its receiver cache. This will be later utilized to:
  
  1) Change Curl_pp_multi_statemach() and Curl_pp_easy_statemach() to
     not test socket state and just call user's statemach_act() function
     when there are more data to process, because otherwise the task would
     just hang, waiting for more data from the socket.
  
  2) Allow PP users to read multiple responses by looping as long as there
     are more data available and current phase is not finished.
     (Currently needed for correct processing of IMAP SELECT responses.)

Nick Zitzmann (19 Feb 2013)
- FEATURES: why yes, we do support metalink
  
  I just noticed Metalink support wasn't listed as a feature of the tool.

- metalink: fix improbable crash parsing metalink filename
  
  The this_url pointer wasn't being initialized, so if strdup() would return
  null when copying the filename in a metalink file, then hilarity would
  ensue during the cleanup phase. This change was brought to you by clang,
  which noticed this and raised a warning.

Yang Tse (19 Feb 2013)
- smtp.c: fix enumerated type mixed with another type

- polarssl threadlock cleanup

Nick Zitzmann (18 Feb 2013)
- docs: schannel and darwinssl documentation improvements
  
  Schannel and darwinssl use the certificates built into the
  OS to do vert verification instead of bundles. darwinssl
  is thread-safe. Corrected typos in the NSS docs.

Daniel Stenberg (18 Feb 2013)
- resolver_error: remove wrong error message output
  
  The attempt to use gai_strerror() or alternative function didn't work as
  the 'sock_error' field didn't contain the proper error code. But since
  this hasn't been reported and thus isn't really a big deal I decided to
  just scrap the whole attempt to output the detailed resolver error and
  instead remain with just stating that the resolving of the name failed.

- [Kim Vandry brought this change]

  Curl_resolver_is_resolved: show proper host name on failed resolve

- Curl_resolver_is_resolved: fix compiler warning
  
  conversion to 'int' from 'long int' may alter its value

- compiler warning fix
  
  follow-up to commit ed7174c6f66, rename 'wait' to 'block'

- compiler warning fix: declaration of 'wait' shadows a global declaration
  
  It seems older gcc installations (at least) will cause warnings if we
  name a variable 'wait'. Now changed to 'block' instead.
  
  Reported by: Jiří Hruška
  Bug: http://curl.haxx.se/mail/lib-2013-02/0247.html

Nick Zitzmann (17 Feb 2013)
- MacOSX-Framework: Make script work in Xcode 4.0 and later
  
  Apple made a number of changes to Xcode 4. The SDKs were moved, the entire
  Developer folder was moved, and PowerPC support was removed. The script
  will now adapt to those changes and should be future-proofed against
  additional changes in case Apple moves the Developer folder ever again.
  Also, the minimum OS X version compiler option was removed, so that the
  framework can be built against the latest SDK but still run in older cats.

Daniel Stenberg (17 Feb 2013)
- docs: refer to CURLOPT_ACCEPT_ENCODING instead of the old name

Steve Holme (16 Feb 2013)
- email: Tidied up result code variables
  
  Tidied up result variables to be consistent in name, declaration order
  and default values.

Nick Zitzmann (16 Feb 2013)
- ntlm_core: fix compiler warning when building with clang
  
  Fixed a 64-to-32 compiler warning raised when building with
  clang and the --with-darwinssl option.

Daniel Stenberg (16 Feb 2013)
- Guile-curl: a new libcurl binding

- polarsslthreadlock: #include the proper memory and debug includes
  
  Pointed out by Steve Holme

Steve Holme (16 Feb 2013)
- email: Removed unnecessary forward declaration
  
  Due to the reordering of functions in commit 586f5d361474 the forward
  declaration to state_upgrade_tls() are no longer required.

- pop3.c: Added reference to RFC-5034

Daniel Stenberg (15 Feb 2013)
- [Willem Sparreboom brought this change]

  PolarSSL: Change to cURL coding style
  
  Repaired all curl/lib/checksrc.pl warnings in the previous four patches

- [Willem Sparreboom brought this change]

  PolarSSL: WIN32 threading support for entropy
  
  Added WIN32 threading support for PolarSSL entropy if
  --enable-threaded-resolver config flag is set and process.h can be found.

- [Willem Sparreboom brought this change]

  PolarSSL: pthread support for entropy
  
  Added pthread support for polarssl entropy if --enable-threaded-resolver
  config flag is set and pthread.h can be found.

- [Willem Sparreboom brought this change]

  PolarSSL: changes to entropy/ctr_drbg/HAVEGE_RANDOM
  
  Add non-threaded entropy and ctr_drbg and removed HAVEGE_RANDOM define

- [Willem Sparreboom brought this change]

  PolarSSL: added human readable error strings
  
  Print out human readable error strings for PolarSSL related errors

Steve Holme (15 Feb 2013)
- pop3: Removed unnecessary state changes on failure

- imap: Removed unnecessary state change on failure

Daniel Stenberg (15 Feb 2013)
- metalink_cleanup: yet another follow-up fix

- metalink_cleanup: define it without argument
  
  Since the function takes no argument, the macro shouldn't take one as
  some compilers will error out on that.

- rename "easy" statemachines: call them block instead
  
  ... since they're not used by the easy interface really, I wanted to
  remove the association. Also, I unified the pingpong statemachine driver
  into a single function with a 'wait' argument: Curl_pp_statemach.

Yang Tse (15 Feb 2013)
- [Gisle Vanem brought this change]

  curl_setup_once.h: definition of HAVE_CLOSE_S defines sclose() to close_s()

- [Gisle Vanem brought this change]

  config-dos.h: define HAVE_CLOSE_S for MSDOS/Watt-32

- [Gisle Vanem brought this change]

  config-dos.h: define strerror() to strerror_s_() for High-C

- [Gisle Vanem brought this change]

  config-dos.h: define HAVE_TERMIOS_H only for djgpp

Steve Holme (14 Feb 2013)
- smtp.c: Fixed a trailing whitespace
  
  Remove tailing whitespace introduced in commit 7ed689d24a4e.

- pop3: Fixed blocking SSL connect when connecting via POP3S
  
  A call to Curl_ssl_connect() was accidentally left in when the SSL/TLS
  connection layer was reworked in 7.29. Not only would this cause the
  connection to block but had the additional overhead of calling the
  non-blocking connect a little bit later.

- smtp: Refactored the smtp_state_auth_resp() function
  
  Renamed smtp_state_auth_resp() function to match the implementations in
  IMAP and POP3.

Daniel Stenberg (14 Feb 2013)
- remove ifdefs
  
  Clarify the code by reducing ifdefs

- strlcat: remove function
  
  This function was only used twice, both in places where performance
  isn't crucial (socks + if2ip). Removing the use of this function removes
  the need to have our private version for systems without it == reduced
  amount of code.
  
  Also, in the SOCKS case it is clearly better to fail gracefully rather
  than to truncate the results.
  
  This work was triggered by a bug report on the strcal prototype in
  strequal.h.
  
  strlcat was added in commit db70cd28 in February 2001!
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1192
  Reported by: Jeremy Huddleston

- Curl_FormBoundary: made static
  
  As Curl_FormBoundary() is no longer used outside of this file (since
  commit ad7291c1a9d), it is now renamed to formboundary() and is made
  static.

- ossl_seed: fix the last resort PRNG seeding
  
  Instead of just abusing the pseudo-randomizer from Curl_FormBoundary(),
  this now uses Curl_ossl_random() to get entropy.

Steve Holme (13 Feb 2013)
- email: Tidy up before additional IMAP work
  
  Replaced two explicit comparisons of CURLE_OK with boolean alternatives.
  
  General tidy up of comments.

- smtp: Removed duplicate pingpong structure initialisation
  
  The smtp_connect() function was setting the member variables of the
  pingpong structure twice, once before calling Curl_pp_init() and once
  after!

Yang Tse (13 Feb 2013)
- move msvc IDE related files to 'vs' directory tree
  
  Use 'vs' directory tree given that 'vc' intended one clashes
  with an already existing build target in file Makefile.dist.

Daniel Stenberg (13 Feb 2013)
- install-sh: updated to support multiple source files as arguments
  
  Version 7.29.0 uses Makefiles generated with a newer version of the
  autotools than the previous 7.28.1. These Makefiles try to install
  e.g. header files by calling install-sh with multiple source files as
  arguments. The bundled install-sh is to old and does not support this.
  
  The problem only occurs, if install-sh is actually being used, ie. the
  platform install executable is to old or not usable. Example: Solaris
  10.
  
  The files install-sh and mkinstalldirs are now updated with the automake
  1.11.3 versions. A better fix might be to completely remove them from
  git and force the files to be added/created during buildconf.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1195
  Reported by: Rainer Jung

Yang Tse (13 Feb 2013)
- move msvc IDE related files to 'vc' directory tree

- msvc IDE 'vc' directory tree preparation

Steve Holme (12 Feb 2013)
- imap: Corrected a whitespace issue from previous commit
  
  Fixed a small whitespace issue that crept in there in commit
  508cdf4da4d7.

- email: Another post optimisation of endofresp() tidy up

- sasl: Fixed null pointer reference when decoding empty digest challenge
  
  Fixed a null pointer reference when an empty challenge is passed to the
  Curl_sasl_create_digest_md5_message() function.
  
  Bug: http://sourceforge.net/p/curl/bugs/1193/
  Reported by: Saran Neti

- email: Post optimisation of endofresp() tidy up
  
  Removed unnecessary end of line check and return.

Nick Zitzmann (12 Feb 2013)
- darwinssl: Fix send glitchiness with data > 32 or so KB
  
  An ambiguity in the SSLWrite() documentation lead to a bad inference in the
  code where we assumed SSLWrite() returned the amount of bytes written to
  the socket, when that is not actually true; it returns the amount of data
  that is buffered for writing to the socket if it returns errSSLWouldBlock.
  Now darwinssl_send() returns CURLE_AGAIN if data is buffered but not written.
  
  Reference URL: http://curl.haxx.se/mail/lib-2013-02/0145.html

Steve Holme (12 Feb 2013)
- pingpong.h: Fixed line length over 78 characters from b56c9eb48e3c

- pingpong: Optimised the endofresp() function
  
  Reworked the pp->endofresp() function so that the conndata, line and
  line length are passed down to it just as with Curl_client_write()
  rather than each implementation of the function having to query
  these values.
  
  Additionally changed the int return type to bool as this is more
  representative of the function's usage.

- email: Post STARTLS capability code tidy up (Part Three)
  
  Corrected the order of the upgrade_tls() functions and moved the handler
  upgrade and getsock() functions out from the middle of the state related
  functions.

- email: Post STARTLS capability code tidy up (Part Two)
  
  Corrected the order of the pop3_state_capa() / imap_state_capability()
  and the pop3_state_capa_resp() / imap_state_capability_resp() functions
  to match the execution order.

Daniel Stenberg (11 Feb 2013)
- [ulion brought this change]

  SOCKS: fix socks proxy when noproxy matched
  
  Test 1212 added to verify
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1190

Steve Holme (11 Feb 2013)
- ntlm: Updated comments for the addition of SASL support to IMAP in v7.29

- RELEASE-NOTES: Updated following the recent imap/pop3/smtp changes

Linus Nielsen Feltzing (10 Feb 2013)
- Fix NULL pointer reference when closing an unused multi handle.

Steve Holme (10 Feb 2013)
- email: Post STARTLS capability code tidy up (Part One)
  
  Corrected the order of the CAPA / CAPABILITY state machine constants to
  match the execution order.

- imap: Fixed memory leak following commit f6010d9a0359

- smtp: Added support for the STARTTLS capability (Part Two)
  
  Added honoring of the tls_supported flag when starting a TLS upgrade
  rather than unconditionally attempting it. If the use_ssl flag is set
  to CURLUSESSL_TRY and the server doesn't support TLS upgrades then the
  connection will continue to authenticate. If this flag is set to
  CURLUSESSL_ALL then the connection will complete with a failure as it
  did previously.

- pop3: Added support for the STLS capability (Part Three)
  
  Added honoring of the tls_supported flag when starting a TLS upgrade
  rather than unconditionally attempting it. If the use_ssl flag is set
  to CURLUSESSL_TRY and the server doesn't support TLS upgrades then the
  connection will continue to authenticate. If this flag is set to
  CURLUSESSL_ALL then the connection will complete with a failure as it
  did previously.

- imap: Added support for the STARTTLS capability (Part Three)
  
  Added honoring of the tls_supported flag when starting a TLS upgrade
  rather than unconditionally attempting it. If the use_ssl flag is set
  to CURLUSESSL_TRY and the server doesn't support TLS upgrades then the
  connection will continue to authenticate. If this flag is set to
  CURLUSESSL_ALL then the connection will complete with a failure as it
  did previously.

Daniel Stenberg (10 Feb 2013)
- [Alessandro Ghedini brought this change]

  htmltitle: fix suggested build command

Steve Holme (10 Feb 2013)
- pop3: Added support for the STLS capability (Part Two)
  
  Added sending of initial CAPA command before STLS is sent. This allows
  for the detection of the capability before trying to upgrade the
  connection.

- imap: Added support for the STARTTLS capability (Part Two)
  
  Added sending of initial CAPABILITY command before STARTTLS is sent.
  This allows for the detection of the capability before trying to
  upgrade the connection.

- smtp: Added support for the STLS capability (Part One)
  
  Introduced detection of the STARTTLS capability, in order to add support
  for TLS upgrades without unconditionally sending the STARTTLS command.

- pop3: Added support for the STLS capability (Part One)
  
  Introduced detection of the STLS capability, in order to add support
  for TLS upgrades without unconditionally sending the STLS command.

- imap: Added support for the STARTTLS capability (Part One)
  
  Introduced detection of the STARTTLS capability, in order to add support
  for TLS upgrades without unconditionally sending the STARTTLS command.

- RELEASE-NOTES: synced with 92f7606f29b704

- smtp: Fixed an issue when processing EHLO failure responses (Part 3)
  
  Follow up fix to commit 62bd21746443 to cater for servers that don't
  respond with a 250 in their EHLO responses. Additionally updated the
  SMTP tests to respond with a 250 response code as per RFC5321.

- pop3: Fixed SASL authentication capability detection
  
  Fixed the SASL capability detection to include the space character
  before the authentication mechanism list. Otherwise a capability such
  as SASLSOMETHING would be interpreted as enabling SASL and potentially
  trying to identify SOMETHING as a mechanism.

- pop3: Fixed incorrect return value from pop3_endofresp()
  
  Corrected an incorrect return value when -ERR is received from the
  server - introduced in commit b5bb61ee697b (June 2012).

- smtp: Fixed an issue when processing EHLO failure responses (Part 2)
  
  Follow up fix to commit 23d17190ee32 as EHLO capabilities can exist
  within a positive response line.

- smtp: Fixed an issue with missing capabilities after the AUTH line
  
  Follow up to commit 40f9bb787f05 to fix missing capabilities after an
  AUTH line.

Nick Zitzmann (8 Feb 2013)
- darwinssl: Make certificate errors less techy
  
  Previously if a problem was found with one of the server's certificates,
  we'd log an OSStatus for the end user to look up. Now we explain what
  was wrong with the site's certificate chain. Also un-did part of the
  previous commit where the code wouldn't catch errSSLServerAuthCompleted
  if built under Leopard.

Guenter Knauf (9 Feb 2013)
- Updated dependency libs.

Steve Holme (9 Feb 2013)
- imap: Corrected some comments

- smtp: Fixed an issue when processing EHLO failure responses
  
  Fixed a small issue where smtp_endofresp() would look for capabilities
  in the description part of a failure response. In theory a server
  shouldn't respond with SIZE or AUTH in an EHLO command's failure
  response but if it did then capabilities would be unnecessarily set
  before eventually failing.

- pop3: Reworked pop3_endofresp() to simplify it little
  
  Reworked pop3_endofresp() to simplify it and provide consistency between
  imap and smtp.

- imap: Renamed state variables in imap_authenticate()
  
  Renamed the authstate1 and authstate2 variables in imap_authenticate()
  as the old name was a left over from when there was only one state
  variable which was named due to a clash with the state() function.
  
  Additionally this provides consistency with the smtp module.

- smtp: Reworked smtp_endofresp() to allow for extra capability detection

- smtp: Renamed smtp_state_auth_passwd_resp() function
  
  Renamed the login password response function to better describe it's
  purpose as well as for consistency with the imap and pop3 modules.

Daniel Stenberg (8 Feb 2013)
- [Gisle Vanem brought this change]

  ntlm: fix memory leak
  
  Running tests\libtest\libntlmconnect.exe reveals a 1 byte (!) leak in
  ./lib/curl_ntlm_msgs.c:
  
  perl ..\memanalyze.pl c:memdebug.curl
  Leak detected: memory still allocated: 1 bytes
  At 9771e8, there's 1 bytes.
  allocated by curl_ntlm_msgs.c:399
  
  Snippet from curl_ntlm_msgs.c:
     /* setup ntlm identity's domain and length */
     dup_domain.tchar_ptr = malloc(sizeof(TCHAR) * (domlen + 1));
  
  (my domlen == 0).
  
  'dup_domain.tbyte_ptr' looks to be freed in Curl_ntlm_sspi_cleanup() via
  'ntlm->identity.Domain'. But I see no freeing of 'dup_domain.tchar_ptr'.

- DONE: consider callback-aborted transfers premature
  
  This bug report properly identified that when doing SMTP and aborting
  the transfer with a callback, it must be considered aborted prematurely
  by the code to avoid QUIT etc to be attempted as that would cause a
  hang.
  
  The new test case 1507 verifies this behavior.
  
  Reported by: Patricia Muscalu
  Bug: http://curl.haxx.se/bug/view.cgi?id=1184

- FAQ: refreshed some phrases

Nick Zitzmann (7 Feb 2013)
- darwinssl: Fix build under Leopard
  
  It turns out that Leopard (OS X 10.5) doesn't have constants for the ECDH
  ciphers in its headers, so the cases for them have been taken out of the
  build when building under Leopard. Also added a standard function for
  getting a string description of a SecCertificateRef.

Steve Holme (7 Feb 2013)
- RELEASE-NOTES: Added new imap features

- imap: Added support for SASL-IR extension (Part 2)
  
  Modified imap_authenticate() to add support for sending the initial
  response with the AUTHENTICATE command, as per RFC4959.

- smtp: Updated SMTP_AUTH_PASSWD state constant
  
  Changed the SMTP_AUTH_PASSWD state constant to SMTP_AUTH_LOGIN_PASSWD to
  better describe the state as the second part of an AUTH LOGIN command,
  as well as for consistency with the imap and pop3 modules.

- imap: Added support for SASL-IR extension (Part 1)
  
  Introduced detection of the SASL-IR capability, in order to add support
  for sending the initial response with the AUTHENTICATE command, as per
  RFC4959.

Daniel Stenberg (7 Feb 2013)
- Revert "vc: remove explicit MSVC6 IDE project file and documentation"
  
  This reverts commit 0e66d5878edc3d7ffc445116d194b58bbc7504b9.

Steve Holme (7 Feb 2013)
- imap: Changed response tag generation to be completely unique
  
  Updated the automatic response tag generation to follow the examples
  given in RC3501, which list a 4 character string such as A001, A002,
  etc.
  
  As a unique identifier should be generated for each command the string
  generation is based on the connection id and the incrementing command
  id.

Dan Fandrich (6 Feb 2013)
- Tweak the Android.mk file for its new location
  
  This is untested, but ought to be enough to still allow it
  to work automatically when the entire curl source tree is
  dropped into a full Android source tree.

Daniel Stenberg (6 Feb 2013)
- vc: remove explicit MSVC6 IDE project file and documentation
  
  VC6 is _very_ old and we provide working makefiles even for that
  compiler. Users who build with the IDE never use that method and project
  file anyway and it was just lingering in the root dir.

Steve Holme (6 Feb 2013)
- imap: Small variable rename in preparation for upcoming change
  
  Renamed a couple of variables and updated some comments in
  preparation for upcoming command id / response tag change.

Daniel Stenberg (6 Feb 2013)
- msvc: move Makefile.msvc.names into winbuild/
  
  In an attempt to clear up misc files from the root dir

- build: move Android.mk to packages/Android/

- emacs files: remove from git and dist
  
  We don't need them and I doubt many people used them. We also don't have
  any configs for other editors and we wouldn't want that.

Steve Holme (6 Feb 2013)
- email: Moved starttls code in separate functions
  
  To help maintain the readability of the code in imap.c, pop3.c and
  smtp.c moved the starttls code into state_starttls() functions.

- [Nick Zitzmann brought this change]

  FEATURES: More NTLM and SSL changes, added two others, fixed typo
  
  Added IDN and HTTP data compression as they were left out of the
  document until now.
  
  Added notes for qssl, schannel and Secure Transport supporting SSLv2,
  Secure Transport supports NTLM, and axTLS does not support SSLv3.
  
  There was also a typo; "AUTH TSL" should be "AUTH TLS".

Kamil Dudka (6 Feb 2013)
- curl-config.in: do not randomly mix tabs and spaces

Daniel Stenberg (6 Feb 2013)
- 7.29.1: onwards!

- THANKS: 12 contributors from 7.29.0

Version 7.29.0 (6 Feb 2013)

Daniel Stenberg (6 Feb 2013)
- vms: config-vms.h is removed, no use trying to distribute it

- RELEASE-NOTES: mention the SASL buffer overflow

- [Eldar Zaitov brought this change]

  Curl_sasl_create_digest_md5_message: fix buffer overflow
  
  When negotiating SASL DIGEST-MD5 authentication, the function
  Curl_sasl_create_digest_md5_message() uses the data provided from the
  server without doing the proper length checks and that data is then
  appended to a local fixed-size buffer on the stack.
  
  This vulnerability can be exploited by someone who is in control of a
  server that a libcurl based program is accessing with POP3, SMTP or
  IMAP. For applications that accept user provided URLs, it is also
  thinkable that a malicious user would feed an application with a URL to
  a server hosting code targetting this flaw.
  
  Bug: http://curl.haxx.se/docs/adv_20130206.html

Steve Holme (6 Feb 2013)
- FEATURES: Removed erroneous whitespace
  
  Removed whitespace introduced in commit 5f8f20f5e65b that caused
  formatting issues when generating the website docs.

Yang Tse (6 Feb 2013)
- setup-vms.h: post VMS patch cleanup - III
  
  - rename post-config-vms.h to setup-vms.h
  - move its inclusion into proper location in curl_setup.h

- vms_show: post VMS patch cleanup - II
  
  - remove multiple declarations of vms_show and add comments

- tool_main.c: post VMS patch cleanup - I
  
  - remove header inclusion already done in curl_setup_once.h

Steve Holme (6 Feb 2013)
- FEATURES: Added SSPI to list of NTLM libraries

- FEATURES: Added Secure Transport and qssl to list of SSL libraries

- FEATURES: Added email feature set
  
  Added SMTP, SMTPS, POP3, POP3S, IMAP and IMAPS features.

- imap.h: Corrected incorrect comment clarification
  
  Corrected comment clarification made in commit 167717b8069a.

- COPYING: Updated copyright year to include 2013

Daniel Stenberg (5 Feb 2013)
- RELEASE-NOTES: synced with 25f351424b3538
  
  8 more bug fixes mentioned

- [John E. Malmberg brought this change]

  VMS: fix and generate the VMS build config
  
  config_h.com is a new file that generates a config.h file based on the
  curl_config.h.in file and a quick scan of the configure script.  This is
  actually a generic procedure that is shared with other VMS packages.
  
  The existing pre-built config-vms.h had over 100 entries that were not
  correct and in some cases conflicted with the build options available in
  the build_vms.com.
  
  generate_config_vms_h_curl.com is a helper procedure to the
  config_h.com.  It covers the cases that the generic config_h.com is not
  able to figure out, and accepts input from the build_vms.com procedure.
  
  build_curlbuild_h.com is a new file to generate the curlbuild.h file
  that Curl is now using when it is using a curl_config.h file.
  
  post-config-vms.h is a new file that is needed to provide VMS specific
  definitions, and most of them need to be set before the system header
  files are included.
  
  The VMS build procedure is fixed:
  
     1. Fixed to link in the correct HP ssl library.
     2. Fixed to detect if HP Kerberos is installed.
     3. Fixed to detect if HP LDAP is installed.
     4. Fixed to detect if gnv$libzshr is installed.
     5. Simplified the input parameter parsing to not use a loop.
     6. Warn that 64 bit pointer option support is not complete
        in comments.
     7. Default to IEEE floating if platform supports it so
        resulting libcurl will be compatible with other
        open source projects on VMS.
     8. Default to LARGEFILE if platform supports it.
     9. Default to enable SSL, LDAP, Kerberos, libz
        if the libraries are present.
     10. Build with exact case global symbols for libcurl.
     11. Generate linker option file needed.
     12. Compiler list option only commonly needed items.
     13. fulllist option for those who really want it.
     14. Create debug symbol file on Alpha, IA64.

- Curl_proxyCONNECT: return once CONNECT is sent
  
  By doing this unconditionally, we infer a simpler and more defined
  behavior. This also has the upside that test 1021 no longer fails for me
  even if I run with valgrind.
  
  Also fixed some wrong comments.

Steve Holme (5 Feb 2013)
- email: Reworked comments in the endofresp() functions
  
  Tidied up the comments in the endofresp() functions to be more
  meaningful prior to release.

Marc Hoersken (5 Feb 2013)
- schannel: Removed extended error connection setup flag
  
  According KB975858 this flag may cause problems on Windows 7 and
  Windows Server 2008 R2 systems. Extended error information is not
  currently used by libcurl and therefore not a requirement.
  
  The flag may improve the SSL-connection shutdown in case of an
  error. This means it might be a good improvement in the future.
  
  Fixes bug/issue #1187 - thanks for the report

Daniel Stenberg (5 Feb 2013)
- [Tor Arntsen brought this change]

  singleipconnect: Update *sockp for all CURLE_OK
  
  The 56b7c87c7 change left a case where a good sockfd was not copied to
  *sockp before returning with CURLE_OK

- curl_easy_perform: Value stored to 'mcode' is never read
  
  pointed out by clang-analyzer

- singleipconnect: remove dead assignment
  
  pointed out by clang-analyzer

Linus Nielsen Feltzing (5 Feb 2013)
- CURLMOPT_MAXCONNECTS: restore functionality
  
  When a connection is no longer used, it is kept in the cache. If the
  cache is full, the oldest idle connection is closed. If no connection is
  idle, the current one is closed instead.

Steve Holme (5 Feb 2013)
- RELEASE-NOTES: Updated following recent changes to the email protocols
  
  Added recent additions and fixes following the changes to imap, pop3
  and smtp. Additionally added another contributor that helped to test
  the imap sasl changes.

- email: Provided extra comments following recent pop3/imap fixes
  
  Provided additional clarification about the logic of the authenticate()
  functions following commit 6b6bdc83bd36 and b4270a9af1d0.

Daniel Stenberg (5 Feb 2013)
- [Andrei Kurushin brought this change]

  winbuild: include version info for .dll .exe
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1186

- FAQ: clarify 5.13 How do I stop an ongoing transfer
  
  Rich Gray provided good feedback and we now clarify that you can in fact
  stop a multi transfer at any point you like by removing the easy handle.

- [Matt Arsenault brought this change]

  cmake: Fix mingw build

- [Sergei Nikulov brought this change]

  cmake: updated OpenSSL build

Steve Holme (4 Feb 2013)
- pop3.c: Updated variable names to use shorter / more readable variant
  
  Tidied up code from commit 6b6bdc83bdUpdated where a few instances of
  the pop3c struct variable used the longer conndata struct rather than
  matching what other code in pop3_authenticate() used.

Guenter Knauf (4 Feb 2013)
- updated copyright years.

- configure: update the copyright years for the output.

Steve Holme (3 Feb 2013)
- imap: Fixed no known authentication mechanism when fallback is required
  
  Fixed an issue where (lib)curl is compiled without support for a
  supported challenge-response based SASL authentication mechanism, such
  as CRAM-MD5 or NTLM, the server doesn't support the LOGIN or PLAIN
  mechanisms and (lib)curl doesn't fallback to Clear Text authentication.
  
  Note: In order to fallback to Clear Text authentication properly this
  fix adds support for the LOGINDISABLED server capability.
  imap: Fixed no known authentication mechanism when fallback is required
  
  Fixed an issue where (lib)curl is compiled without support for a
  supported challenge-response based SASL authentication mechanism, such
  as CRAM-MD5 or NTLM, the server doesn't support the LOGIN or PLAIN
  mechanisms and (lib)curl doesn't fallback to Clear Text authentication.
  
  Note: In order to fallback to Clear Text authentication properly this
  fix adds support for the LOGINDISABLED server capability.
  
  Related bug: http://curl.haxx.se/mail/lib-2013-02/0004.html
  Reported by: Stanislav Ivochkin

- pop3: Fixed no known authentication mechanism when fallback is required
  
  Fixed an issue where (lib)curl is compiled without support for a
  supported challenge-response based SASL authentication mechanism, such
  as CRAM-MD5 or NTLM, the server doesn't support the LOGIN or PLAIN
  mechanisms and (lib)curl doesn't fallback to APOP or Clear Text
  authentication.
  
  Bug: http://curl.haxx.se/mail/lib-2013-02/0004.html
  Reported by: Stanislav Ivochkin

Daniel Stenberg (1 Feb 2013)
- singleipconnect: simplify and clean up
  
  Remove timeout argument that's never used.
  
  Make the actual connection get detected on a single spot to reduce code
  duplication.
  
  Store the IPv6 state already when the connection is attempted.

- Curl_perfom: removed
  
  Curl_perfom is no longer used anywhere since the always-multi commit
  c43127414d89ccb9, and some related functions were used only from within
  Curl_perfom.

Guenter Knauf (30 Jan 2013)
- Updated date.

Yang Tse (30 Jan 2013)
- zz40-xc-ovr.m4: fix 'wc' detection - follow-up 2
  
  - Fix a pair of single quotes to double quotes.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0355.html
  Reported by: Tor Arntsen

- zz40-xc-ovr.m4: fix 'wc' detection - follow-up
  
  - Take into account that 'wc' may return leading spaces and/or tabs.
  
  - Set initial IFS to space, tab and newline.

- zz40-xc-ovr.m4: fix 'wc' detection
  
  - Take into account that 'wc' may return leading spaces.
  
  - Set internationalization behavior variables.
  
  Tor Arntsen analyzed and reported the issue.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0351.html

- zz40-xc-ovr.m4: check another three basic utilities

Guenter Knauf (29 Jan 2013)
- Fixed debug.c to work again unchanged.
  
  Added CURLOPT_FOLLOWLOCATION since example.com is now redirected.

Daniel Stenberg (29 Jan 2013)
- [Nick Zitzmann brought this change]

  darwinssl: Fix bug where packets were sometimes transmitted twice
  
  There was a bug where, if SSLWrite() returned errSSLWouldBlock but did
  succeed in transmitting at least something, then we'd incorrectly
  resend the packet. Now we never take errSSLWouldBlock as a sign that
  nothing was transferred to/from the server.
  
  Bug: http://curl.haxx.se/mail/lib-2013-01/0295.html
  Reported by: Bruno de Carvalho

- [Nick Zitzmann brought this change]

  FAQ: "Darwinssl" is AKA "Secure Transport" and supports NTLM

- RELEASE-NOTES: only list Nick once
  
  Even though he's a fine dude, once is enough for this time!

Yang Tse (28 Jan 2013)
- zz40-xc-ovr.m4: 1.0 interface stabilization
  
  - Stabilization results in 4 public interface m4 macros:
    XC_CONFIGURE_PREAMBLE
    XC_CONFIGURE_PREAMBLE_VER_MAJOR
    XC_CONFIGURE_PREAMBLE_VER_MINOR
    XC_CHECK_PATH_SEPARATOR
  - Avoid one level of internal indirection
  - Update comments
  - Drop XC_OVR_ZZ40 macro

Kamil Dudka (28 Jan 2013)
- docs: fix typos in man pages
  
  Reported by: Jiri Jaburek
  Bug: https://bugzilla.redhat.com/896544

- docs: update the comments about loading CA certs with NSS
  
  Bug: https://bugzilla.redhat.com/696783

Guenter Knauf (28 Jan 2013)
- Updated dependency libs.

- Fixed simple.c to work again unchanged.
  
  Added CURLOPT_FOLLOWLOCATION since example.com is now redirected.

Steve Holme (27 Jan 2013)
- smtp.c: Fixed unnecessary state change if starttls fails
  
  The state machine should only be changed to SMTP_STARTTLS when the
  STARTTLS command has been successfully sent to the server.

- pop3.c: Fixed unnecessary state change if starttls fails
  
  The state machine should only be changed to POP3_STARTTLS when the
  STLS command has been successfully sent to the server.

- imap.c: Fixed unnecessary state change if starttls fails
  
  The state machine should only be changed to IMAP_STARTTLS when the
  STARTTLS command has been successfully sent to the server.

- email: Updated comment regarding ssldone usage
  
  Updated the ssldone comment as multi mode is always used internally now.

Yang Tse (26 Jan 2013)
- zz40-xc-ovr.m4: emit witness message in configure BODY
  
  This avoids witness message in output when running configure --help,
  while sending the message to config.log for other configure runs.

Steve Holme (25 Jan 2013)
- smtp.c: Added comments to smtp_endofresp()
  
  Minor code tidy up to add comments similar to those used in the pop3
  and imap end of resp functions, in order to assist anyone reading the
  code and highlight the similarities between each of these protocols.

Yang Tse (25 Jan 2013)
- zz40-xc-ovr.m4: truly do version conditional overriding
  
  - version conditional overriding
  - catch unexpanded XC macros
  - fix double words in comments

- zz40-xc-ovr.m4: fix variable assignment of subshell output bashism
  
  Tor Arntsen analyzed and reported the issue.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0306.html

- zz40-xc-ovr.m4: reinstate strict AC_REQUIRE macro dependencies

- zz40-xc-ovr.m4: avoid double single-quote usage

- zz40-xc-ovr.m4: parentheses balancing of 'case' statements
  
  m4 quadrigraph shell comment technique allows proper autoconf
  parentheses balancing in shell 'case' statements. The presence
  of unbalanced parentheses may otherwise trigger expansion bugs.

Steve Holme (24 Jan 2013)
- smtp.c: Corrected RFC references
  
  The most recent version of the SMTP RFC is RFC5321 and not RFC2821 as
  previously documented.
  
  Added RFC1870 and re-ordered list numerically.

- smtp.c: Fixed failure detection during TLS upgrade
  
  smtp_state_upgrade_tls() would attempt to incorrectly complete the
  upgrade to smtps and start the EHLO command if
  Curl_ssl_connect_nonblocking() returned a failure code and if ssldone
  was set to TRUE. This would only happen when a non-blocking API hadn't
  been provided by the SSL implementation and curlssl_connect() was
  called underneath.

- pop3.c: Fixed failure detection during TLS upgrade
  
  pop3_state_upgrade_tls() would attempt to incorrectly complete the
  upgrade to pop3s and start the CAPA command if
  Curl_ssl_connect_nonblocking() returned a failure code and if ssldone
  was set to TRUE. This would only happen when a non-blocking API hadn't
  been provided by the SSL implementation and curlssl_connect() was
  called underneath.

- imap.c: Fixed failure detection during TLS upgrade
  
  imap_state_upgrade_tls() would attempt to incorrectly complete the
  upgrade to imaps and start the CAPABILITY command if
  Curl_ssl_connect_nonblocking() returned a failure code and if ssldone
  was set to TRUE. This would only happen when a non-blocking API hadn't
  been provided by the SSL implementation and curlssl_connect() was
  called underneath.

Yang Tse (24 Jan 2013)
- zz40-xc-ovr.m4: internals overhauling
  
  - Update comments
  - Execute commands in subshells
  - Faster path separator check
  - Fix missing 'test' command
  - Rename private macros
  - Minimize AC_REQUIRE usage

Steve Holme (23 Jan 2013)
- email: Removed unnecessary return statements
  
  Small tidy up to remove unnecessary return statements prior to the next
  fix.

Yang Tse (23 Jan 2013)
- zz40-xc-ovr.m4: redirect errors and warnings to stderr

- zz40-xc-ovr.m4: AC_REQUIRE also XC_CONFIGURE_PREAMBLE success message

- zz60-xc-ovr.m4: tighten XC_OVR_ZZ60 macro placement requirements

- configure: use XC_CONFIGURE_PREAMBLE early checks
  
  Some basic checks we make were placed early enough in generated
  configure script when using autoconf 2.5X versions. Newer autoconf
  versions expand these checks much further into the configure script,
  rendering them useless. Using XC_CONFIGURE_PREAMBLE fixes placement
  of early intended checks across all our autoconf supported versions.

- zz40-xc-ovr.m4: provide XC_CONFIGURE_PREAMBLE macro

Daniel Stenberg (23 Jan 2013)
- FAQ: update the SSL lib list and wording in question 2.2

Steve Holme (22 Jan 2013)
- curl_sasl.c: Corrected references to RFC
  
  The most recent version of the RFC is RFC4422 and not RFC2222 as
  previously documented.

- email: Corrected references to SASL RFC
  
  The most recent version of the SASL RFC is RFC4422 and not RFC2222 as
  previously documented.

Daniel Stenberg (22 Jan 2013)
- [Ulion brought this change]

  formpost: support quotes, commas and semicolon in file names
  
  - document the double-quote and backslash need be escaped if quoting.
  - libcurl formdata escape double-quote in filename by backslash.
  - curl formparse can parse filename both contains '"' and ',' or ';'.
  - curl now can uploading file with ',' or ';' in filename.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1171

- memanalyze.pl: handle fopen() of file names with quotes

Yang Tse (21 Jan 2013)
- xc-cc-check.m4: re-evaluate exporting and AC_SUBST'ing vars
  
  Notes:
  
  When running a configure script that has nested packages (for example
  libcurl's configure with --enable-ares and c-ares sources embedded in
  curl tree) and AC_CONFIG_SUBDIRS([nested-subdir]) machinery is used to
  automatically run the nested configure script from within the parent
  configure script, it happens that the nested _shell_ script will
  inherit shell variables exported from the parent _shell_ script.
  
  If for example parent configure script sets and exports LDFLAGS and LIBS
  variables with proper values in order to link either a parent library or
  program with a library which will be configured and built by a nested
  package; It will happen that when the nested configure script runs, the
  nested library does not exist yet and _any_ link-test done in the nested
  configure will fail, such as those that autoconf macros perform in order
  to detect existing compiler and its characteristics, the result is that
  the nested configure script will fail with errors such as:
  
  configure: error: C compiler cannot create executables
  
  For now, we no longer export variables previously exported here.
  
  On the other hand, AC_SUBST'ing them is appropriate and even with nested
  packages each package's config.status gets its own package values.
  
  So we reinstate AC_SUBST'ing previously AC_SUBST'ed variables.

Daniel Stenberg (21 Jan 2013)
- FAQ: 3.22 curl -X gives me HTTP problems

Yang Tse (21 Jan 2013)
- xc-cc-check.m4: avoid recursive package automake'ing breakage

- xc-cc-check.m4: mark earlier variables that are to be exported

- configure: autotools compatibility fixes - step I
  
  Fix proper macro expansion order across autotools versions for
  C compiler and preprocessor program checks.

Steve Holme (20 Jan 2013)
- pop3.c: Fixed conditional compilation of the apop response function
  
  Extended the fix from commit 8b15c84ea91e to additionally exclude
  pop3_state_apop_resp() if the CURL_DISABLE_CRYPTO_AUTH flag is
  defined.

Yang Tse (20 Jan 2013)
- Makefile.inc: fix $(top_srcdir) not allowed in _SOURCES variables

Daniel Stenberg (19 Jan 2013)
- formadd: reject trying to read a directory where a file is expected
  
  Bug: http://curl.haxx.se/mail/archive-2013-01/0017.html
  Reported by: Ulrich Doehner

- curl_easy_send.3: document return codes
  
  Reported by: Craig Davison
  Bug: http://curl.haxx.se/mail/lib-2013-01/0234.html

- curl_easy_recv.3: document return codes
  
  Reported by: Craig Davison
  Bug: http://curl.haxx.se/mail/lib-2013-01/0234.html

Steve Holme (19 Jan 2013)
- email: General code tidy up
  
  Corrected some function argument definitions to maximize the 80
  character line length limit and be in keeping with the curl
  coding style.

- pop3.c: Fixed a problem with pop3s connections not connecting properly
  
  Fixed an issue where Curl_ssl_connect_nonblocking() wouldn't complete
  correctly and the ssldone flag wouldn't be set to true for pop3s based
  connections.
  
  Bug introduced in commit: 4ffb8a6398ed.

Daniel Stenberg (18 Jan 2013)
- RELEASE-NOTES: add references to several bugfixes+changes

Steve Holme (18 Jan 2013)
- RELEASE-NOTES: Added missing imap fix
  
  Added missing imap fix as per commit 709b3506cd9b.

Yang Tse (18 Jan 2013)
- runtests.pl: make VPATH builds find valgrind.supp

Daniel Stenberg (18 Jan 2013)
- RELEASE-NOTES: synced with c43127414d89

- always-multi: always use non-blocking internals
  
  Remove internal separated behavior of the easy vs multi intercace.
  curl_easy_perform() is now using the multi interface itself.
  
  Several minor multi interface quirks and bugs have been fixed in the
  process.
  
  Much help with debugging this has been provided by: Yang Tse

Yang Tse (17 Jan 2013)
- url.c: fix HTTP CONNECT tunnel establishment upon delayed response
  
  Fixes initial proxy response being processed by the tunneled protocol
  handler instead of the HTTP wrapper handler. This issue would trigger
  upon delayed CONNECT response from the proxy.
  
  Additionally fixes a multi interface code-path in which connections
  would not time out properly.
  
  This does not fix known bug #39.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0191.html

Daniel Stenberg (16 Jan 2013)
- [Yves Arrouye brought this change]

  --libcurl: fix for non-zero default options
  
  If the default value for an option taking a long as its value is non
  zero, and it is set by zero by a command line option, then that command
  line option is not reflected in --libcurl's output. This is because line
  520-521 of tool_setopt.c look like:
  
  if(!lval)
      skip = TRUE;
  
  An example of a command-line option doing so is the -k option that sets
  CURLOPT_SLL_VERIFYPEER and CURLOPT_SSL_VERIFYHOST to 0L, when the
  defaults are non-zero.

- FTP: reject illegal port numbers in EPSV 229 responses

Yang Tse (15 Jan 2013)
- commit bc682cbd follow-up

- build: use per-target '_CPPFLAGS' for those currently using default
  
  Automake documents that doing this will make it choose a different name
  for intermediate object files even when sharing source files across
  targets of same Makefile.am.
  
  Up to automake 1.13.1 target's intermediate object files were placed
  in the build subdirectory of the target. We depended on this, probably
  undocumented behavior, to achieve same behavior as if a per-target flag
  had been specified when building targets that actually belong to
  different Makefile.am files.
  
  It seems automake 1.13.2 is going to break behavior mentioned above.
  
  So, lets use a documented behavior in order to achieve same purpose,
  across automake versions, no matter where automake wishes to place
  intermediate object files.
  
  Our build targets that already were using a per-target '_CFLAGS' or
  '_CPPFLAGS' need no 'fixing', these were already 'fixed'. The only
  Makefile.am or Makefile.in files in libcurl's source tree touched by
  this 'fix' are tests/libtest/Makefile.inc and tests/unit/Makefile.inc.

- tests/libtest/Makefile.inc: sort build targets

- tests/Makefile.am: remove wildcard usage in EXTRA_DIST

Kamil Dudka (15 Jan 2013)
- nss: fix error messages for CURLE_SSL_{CACERT,CRL}_BADFILE
  
  Do not use the error messages from NSS for errors not occurring in NSS.

Steve Holme (14 Jan 2013)
- TODO: Updated following IMAP SASL additions

Yang Tse (14 Jan 2013)
- configure: fix automake 1.13 compatibility
  
  Tested with:
  
  buildconf: autoconf version 2.69
  buildconf: autom4te version 2.69
  buildconf: autoheader version 2.69
  buildconf: automake version 1.13.1
  buildconf: aclocal version 1.13.1
  buildconf: libtool version 2.4
  buildconf: GNU m4 version 1.4.16

Daniel Stenberg (13 Jan 2013)
- BUGS: update bug tracker URL
  
  ... and refresh number of lines of code

- Curl_resolver_getsock: fix the function description comment
  
  It referred to it by the wrong name and said it returned the wrong value.
  
  Reported by: Gisle Vanem

Kamil Dudka (11 Jan 2013)
- nss: clear session cache if a client cert from file is used
  
  This commit fixes a regression introduced in 052a08ff.
  
  NSS caches certs/keys returned by the SSL_GetClientAuthDataHook callback
  and if we connect second time to the same server, the cached cert/key
  pair is used.  If we use multiple client certificates for different
  paths on the same server, we need to clear the session cache to force
  NSS to call the hook again.  The commit 052a08ff prevented the session
  cache from being cleared if a client certificate from file was used.
  
  The condition is now fixed to cover both cases: consssl->client_nickname
  is not NULL if a client certificate from the NSS database is used and
  connssl->obj_clicert is not NULL if a client certificate from file is
  used.
  
  Review by: Kai Engert

Yang Tse (11 Jan 2013)
- sockfilt.c: log file descriptor number on read/write error

- [Gisle Vanem brought this change]

  packages/DOS/common.dj: remove COFF debug info generation
  
  gcc on DOS hasn't really supported COFF-debug (-gcoff) on djgpp for a
  long time.
  
  "Sounds like the COFF debug info generation has bit-rotted in GCC.
   Nothing new here, no other platform uses COFF AFAIK."
  
  So lets drop it too.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0130.html

- curl: ignore SIGPIPE - compilation fix - follow-up

- test servers: handle W32/W64 SIGBREAK with exit_signal_handler

- test servers: fix errno, ERRNO and SOCKERRNO usage for W32/W64

- sockfilt.c: fix some W64 compiler warnings

Daniel Stenberg (9 Jan 2013)
- [Nick Zitzmann brought this change]

  docs: the --with-darwinssl option is available on Apple OSes

Yang Tse (9 Jan 2013)
- curl: ignore SIGPIPE - compilation fix

- build: fix circular header inclusion with other packages
  
  This commit renames lib/setup.h to lib/curl_setup.h and
  renames lib/setup_once.h to lib/curl_setup_once.h.
  
  Removes the need and usage of a header inclusion guard foreign
  to libcurl. [1]
  
  Removes the need and presence of an alarming notice we carried
  in old setup_once.h [2]
  
  ----------------------------------------
  
  1 - lib/setup_once.h used __SETUP_ONCE_H macro as header inclusion guard
      up to commit ec691ca3 which changed this to HEADER_CURL_SETUP_ONCE_H,
      this single inclusion guard is enough to ensure that inclusion of
      lib/setup_once.h done from lib/setup.h is only done once.
  
      Additionally lib/setup.h has always used __SETUP_ONCE_H macro to
      protect inclusion of setup_once.h even after commit ec691ca3, this
      was to avoid a circular header inclusion triggered when building a
      c-ares enabled version with c-ares sources available which also has
      a setup_once.h header. Commit ec691ca3 exposes the real nature of
      __SETUP_ONCE_H usage in lib/setup.h, it is a header inclusion guard
      foreign to libcurl belonging to c-ares's setup_once.h
  
      The renaming this commit does, fixes the circular header inclusion,
      and as such removes the need and usage of a header inclusion guard
      foreign to libcurl. Macro __SETUP_ONCE_H no longer used in libcurl.
  
  2 - Due to the circular interdependency of old lib/setup_once.h and the
      c-ares setup_once.h header, old file lib/setup_once.h has carried
      back from 2006 up to now days an alarming and prominent notice about
      the need of keeping libcurl's and c-ares's setup_once.h in sync.
  
      Given that this commit fixes the circular interdependency, the need
      and presence of mentioned notice is removed.
  
      All mentioned interdependencies come back from now old days when
      the c-ares project lived inside a curl subdirectory. This commit
      removes last traces of such fact.

Daniel Stenberg (8 Jan 2013)
- curl: ignore SIGPIPE
  
  This is a work-around for bug #1180 which is really libcurl's inability
  to ignore SIGPIPE in a few cases. With this work-around at least curl
  won't suffer from it!
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1180
  Reported by: Lluís Batlle i Rossell

Yang Tse (8 Jan 2013)
- sockfilt.c: fix some compiler warnings

Daniel Stenberg (8 Jan 2013)
- Revert "configure: update req to 2.59"
  
  This reverts commit 7a6d8b1b1a8fcc184c36d6b6e741e32250b4bacb.
  
  URL: http://curl.haxx.se/mail/lib-2013-01/0103.html

Steve Holme (8 Jan 2013)
- pop3: Added support for non-blocking SSL upgrade
  
  Added support for asynchronous SSL upgrade when using the
  multi-interface.

Daniel Stenberg (8 Jan 2013)
- configure: update req to 2.59
  
  I ran the 2.59 version of autoupdate that updates obsoleted configure.ac
  constructs to the 2.59 standard. With a little hands-on fiddling I
  prevented it from ruining the quoting in AS_HELP_STRING() uses.
  
  I subsequently also bumped the required autoconf version to 2.59
  (released in December 2003) as I don't have an older autoconf version
  around to test with and I can't be bothered to install one either...
  
  Inspired by: Björn Stenberg
  Related blog post: http://cazfi.livejournal.com/195108.html

Steve Holme (7 Jan 2013)
- imap.c: Small tidy up to add missing comment

- imap: Added support for sasl digest-md5 authentication

- imap: Added support for sasl cram-md5 authentication

Marc Hoersken (7 Jan 2013)
- tests/server/sockfilt.c: Fixed integer comparison warning

- tests/server/sockfilt.c: Include required Win32 headers

Steve Holme (7 Jan 2013)
- imap: Added support for sasl ntlm authentication

- imap: Added support for sasl login authentication

- pop3.c: Fixed default authentication detection
  
  Fixed an issue where a server may positively respond to the CAPA command
  but not list clear text as a valid authentication type.

- curl_sasl.c: Small code tidy up following imap changes

- smtp.c: Small code tidy up following imap changes

- pop3.c: Small code tidy up following imap changes

- imap: Added support for sasl plain text authentication

Marc Hoersken (6 Jan 2013)
- tests/server/sockfilt.c: Fixed support for listening sockets
  
  This commit fixes support for sockets that are ready to accept
  a new connection and have previously been put into listening mode.
  
  It also includes changes which are the result of investigation
  regarding Windows STDIN. These changes are the preparation for further
  improvements regarding support for reading data from STDIN on Windows.
  
  Open issue: WaitForMultipleObjectsEx does not support PIPE handles
  which are returned by GetStdHandle while running without a GUI.

- tests/server/sockfilt.c: Set Windows Console to binary mode

- tests/server/sockfilt.c: Improved log error messages
  
  Include error code and parameters in error messages.

Steve Holme (6 Jan 2013)
- imap: Introduced the continue response in imap_endofresp()

- imap: Added support for SASL based authentication mechanism detection
  
  Added support for detecting the supported SASL authentication mechanisms
  via the CAPABILITY command.

Yang Tse (6 Jan 2013)
- Revert changes relative to lib/*.[ch] recent renaming
  
  This reverts renaming and usage of lib/*.h header files done
  28-12-2012, reverting 2 commits:
  
    f871de0... build: make use of 76 lib/*.h renamed files
    ffd8e12... build: rename 76 lib/*.h files
  
  This also reverts removal of redundant include guard (redundant thanks
  to changes in above commits) done 2-12-2013, reverting 1 commit:
  
    c087374... curl_setup.h: remove redundant include guard
  
  This also reverts renaming and usage of lib/*.c source files done
  3-12-2013, reverting 3 commits:
  
    13606bb... build: make use of 93 lib/*.c renamed files
    5b6e792... build: rename 93 lib/*.c files
    7d83dff... build: commit 13606bbfde follow-up 1
  
  Start of related discussion thread:
  
    http://curl.haxx.se/mail/lib-2013-01/0012.html
  
  Asking for confirmation on pushing this revertion commit:
  
    http://curl.haxx.se/mail/lib-2013-01/0048.html
  
  Confirmation summary:
  
    http://curl.haxx.se/mail/lib-2013-01/0079.html
  
  NOTICE: The list of 2 files that have been modified by other
  intermixed commits, while renamed, and also by at least one
  of the 6 commits this one reverts follows below. These 2 files
  will exhibit a hole in history unless git's '--follow' option
  is used when viewing logs.
  
    lib/curl_imap.h
    lib/curl_smtp.h

Daniel Stenberg (6 Jan 2013)
- mk-ca-bundle.1: convert syntax to what's used elsewhere
  
  ... mostly to make sure roffit works better on it, but also to make our
  man pages use a more unified style.

- mk-ca-bundle.1: mention new -f, fix outputfile output
  
  also edited a few sentences to become more verbose

- mk-ca-bundle: add -f, support passing to stdout and more
  
  1. When the downloaded data file from Mozilla is current, but the output
  bundle does not exist: continue processing to create the bundle.  The
  goal is to have the output file - not just download the latest input.
  
  2. added -f option to force re-processing the file.  Useful for
  debugging/testing the process.
  
  3. added support for output to '-' (stdout), allowing the output to be
  piped.
  
  4. All progress and error messages go to STDERR rather than STDOUT (3)
  
  5. The script opened and closed the output file many times
  unnecessarily.  It now opens it once, does the output and closes it.
  
  6. Backup of the input files happens after successful processing, not
  before.
  
  7. The output is written to a temporary file, and renamed to the
  requested name after backup - this greatly reduces the window where the
  file can be seen partially written.
  
  8. all die calls have a \n at the end to suppress perl's traceback - the
  traceback isn't useful to end users.
  
  Patch: http://curl.haxx.se/mail/lib-2013-01/0045.html

Yang Tse (5 Jan 2013)
- imap test server: fix typo in name of SELECT_imap() sub definition
  
  IMAP test server breaking typo introduced with commit b708a522a1

Steve Holme (4 Jan 2013)
- imap test server: Added support for the CAPABILITY command
  
  Added support for the CAPABILITY command in preparation of upcoming
  changes.

Daniel Stenberg (3 Jan 2013)
- writeout: -w now supports remote_ip/port and local_ip/port
  
  Added mention to the curl.1 man page.
  
  Test case 1223 verifies remote_ip/port.

Yang Tse (3 Jan 2013)
- test 1222: 8 chars object name generation  &&  test 1221: adjustments

Daniel Stenberg (3 Jan 2013)
- INTERNALS: remove "footnote" never used

Yang Tse (3 Jan 2013)
- build: commit 13606bbfde follow-up 1

Daniel Stenberg (3 Jan 2013)
- FAQ: Can I write a server with libcurl?

Yang Tse (3 Jan 2013)
- build: rename 93 lib/*.c files
  
  93 lib/*.c source files renamed to use our standard naming scheme.
  
  This commit only does the file renaming.
  
  ----------------------------------------
  
    renamed:    lib/amigaos.c -> lib/curl_amigaos.c
    renamed:    lib/asyn-ares.c -> lib/curl_asyn_ares.c
    renamed:    lib/asyn-thread.c -> lib/curl_asyn_thread.c
    renamed:    lib/axtls.c -> lib/curl_axtls.c
    renamed:    lib/base64.c -> lib/curl_base64.c
    renamed:    lib/bundles.c -> lib/curl_bundles.c
    renamed:    lib/conncache.c -> lib/curl_conncache.c
    renamed:    lib/connect.c -> lib/curl_connect.c
    renamed:    lib/content_encoding.c -> lib/curl_content_encoding.c
    renamed:    lib/cookie.c -> lib/curl_cookie.c
    renamed:    lib/cyassl.c -> lib/curl_cyassl.c
    renamed:    lib/dict.c -> lib/curl_dict.c
    renamed:    lib/easy.c -> lib/curl_easy.c
    renamed:    lib/escape.c -> lib/curl_escape.c
    renamed:    lib/file.c -> lib/curl_file.c
    renamed:    lib/fileinfo.c -> lib/curl_fileinfo.c
    renamed:    lib/formdata.c -> lib/curl_formdata.c
    renamed:    lib/ftp.c -> lib/curl_ftp.c
    renamed:    lib/ftplistparser.c -> lib/curl_ftplistparser.c
    renamed:    lib/getenv.c -> lib/curl_getenv.c
    renamed:    lib/getinfo.c -> lib/curl_getinfo.c
    renamed:    lib/gopher.c -> lib/curl_gopher.c
    renamed:    lib/gtls.c -> lib/curl_gtls.c
    renamed:    lib/hash.c -> lib/curl_hash.c
    renamed:    lib/hmac.c -> lib/curl_hmac.c
    renamed:    lib/hostasyn.c -> lib/curl_hostasyn.c
    renamed:    lib/hostcheck.c -> lib/curl_hostcheck.c
    renamed:    lib/hostip.c -> lib/curl_hostip.c
    renamed:    lib/hostip4.c -> lib/curl_hostip4.c
    renamed:    lib/hostip6.c -> lib/curl_hostip6.c
    renamed:    lib/hostsyn.c -> lib/curl_hostsyn.c
    renamed:    lib/http.c -> lib/curl_http.c
    renamed:    lib/http_chunks.c -> lib/curl_http_chunks.c
    renamed:    lib/http_digest.c -> lib/curl_http_digest.c
    renamed:    lib/http_negotiate.c -> lib/curl_http_negotiate.c
    renamed:    lib/http_negotiate_sspi.c -> lib/curl_http_negotiate_sspi.c
    renamed:    lib/http_proxy.c -> lib/curl_http_proxy.c
    renamed:    lib/idn_win32.c -> lib/curl_idn_win32.c
    renamed:    lib/if2ip.c -> lib/curl_if2ip.c
    renamed:    lib/imap.c -> lib/curl_imap.c
    renamed:    lib/inet_ntop.c -> lib/curl_inet_ntop.c
    renamed:    lib/inet_pton.c -> lib/curl_inet_pton.c
    renamed:    lib/krb4.c -> lib/curl_krb4.c
    renamed:    lib/krb5.c -> lib/curl_krb5.c
    renamed:    lib/ldap.c -> lib/curl_ldap.c
    renamed:    lib/llist.c -> lib/curl_llist.c
    renamed:    lib/md4.c -> lib/curl_md4.c
    renamed:    lib/md5.c -> lib/curl_md5.c
    renamed:    lib/memdebug.c -> lib/curl_memdebug.c
    renamed:    lib/mprintf.c -> lib/curl_mprintf.c
    renamed:    lib/multi.c -> lib/curl_multi.c
    renamed:    lib/netrc.c -> lib/curl_netrc.c
    renamed:    lib/non-ascii.c -> lib/curl_non_ascii.c
    renamed:    lib/curl_non-ascii.h -> lib/curl_non_ascii.h
    renamed:    lib/nonblock.c -> lib/curl_nonblock.c
    renamed:    lib/nss.c -> lib/curl_nss.c
    renamed:    lib/nwlib.c -> lib/curl_nwlib.c
    renamed:    lib/nwos.c -> lib/curl_nwos.c
    renamed:    lib/openldap.c -> lib/curl_openldap.c
    renamed:    lib/parsedate.c -> lib/curl_parsedate.c
    renamed:    lib/pingpong.c -> lib/curl_pingpong.c
    renamed:    lib/polarssl.c -> lib/curl_polarssl.c
    renamed:    lib/pop3.c -> lib/curl_pop3.c
    renamed:    lib/progress.c -> lib/curl_progress.c
    renamed:    lib/qssl.c -> lib/curl_qssl.c
    renamed:    lib/rawstr.c -> lib/curl_rawstr.c
    renamed:    lib/rtsp.c -> lib/curl_rtsp.c
    renamed:    lib/security.c -> lib/curl_security.c
    renamed:    lib/select.c -> lib/curl_select.c
    renamed:    lib/sendf.c -> lib/curl_sendf.c
    renamed:    lib/share.c -> lib/curl_share.c
    renamed:    lib/slist.c -> lib/curl_slist.c
    renamed:    lib/smtp.c -> lib/curl_smtp.c
    renamed:    lib/socks.c -> lib/curl_socks.c
    renamed:    lib/socks_gssapi.c -> lib/curl_socks_gssapi.c
    renamed:    lib/socks_sspi.c -> lib/curl_socks_sspi.c
    renamed:    lib/speedcheck.c -> lib/curl_speedcheck.c
    renamed:    lib/splay.c -> lib/curl_splay.c
    renamed:    lib/ssh.c -> lib/curl_ssh.c
    renamed:    lib/sslgen.c -> lib/curl_sslgen.c
    renamed:    lib/ssluse.c -> lib/curl_ssluse.c
    renamed:    lib/strdup.c -> lib/curl_strdup.c
    renamed:    lib/strequal.c -> lib/curl_strequal.c
    renamed:    lib/strerror.c -> lib/curl_strerror.c
    renamed:    lib/strtok.c -> lib/curl_strtok.c
    renamed:    lib/strtoofft.c -> lib/curl_strtoofft.c
    renamed:    lib/telnet.c -> lib/curl_telnet.c
    renamed:    lib/tftp.c -> lib/curl_tftp.c
    renamed:    lib/timeval.c -> lib/curl_timeval.c
    renamed:    lib/transfer.c -> lib/curl_transfer.c
    renamed:    lib/url.c -> lib/curl_url.c
    renamed:    lib/version.c -> lib/curl_version.c
    renamed:    lib/warnless.c -> lib/curl_warnless.c
    renamed:    lib/wildcard.c -> lib/curl_wildcard.c
  
  ----------------------------------------

- build: make use of 93 lib/*.c renamed files
  
  93 *.c source files renamed to use our standard naming scheme.
  
  This change affects 77 files in libcurl's source tree.

Daniel Stenberg (3 Jan 2013)
- INSTALL: unify the SSL library texts
  
  Make them smaller and more similar for each separate SSL library
  supported by the configure build

Yang Tse (2 Jan 2013)
- curl_setup.h: remove redundant include guard

- build and tests: curl_10char_object_name() shell function
  
  lib/objnames.inc provides definition of curl_10char_object_name() shell
  function. The intended purpose of this function is to transliterate a
  (*.c) source file name that may be longer than 10 characters, or not,
  into a string with at most 10 characters which may be used as an OS/400
  object name.
  
  Test case 1221 does unit testng of this function and also verifies
  that it is possible to generate distinct short object names for all
  curl and libcurl *.c source file names.
  
  lib/objnames-test.sh is the shell script used for test case 1221.
  
  tests/runtests.pl modified to accept shell script test cases.
  
  More details inside lib/objnames.inc and lib/objnames-test.sh

- configure.ac: replace AM_CONFIG_HEADER with AC_CONFIG_HEADERS
  
  automake 1.13 errors if AM_CONFIG_HEADER is used in configure script.
  automake 1.13 no longer autoupdates AM_CONFIG_HEADER to
  AC_CONFIG_HEADERS, thing which automake has been doing since automake
  version 1.7
  
  Given that our first automake supported version is automake 1.7,
  simply replacing AM_CONFIG_HEADER usage with AC_CONFIG_HEADERS seems
  enough to yet support same automake versions.
  
  Dave Reisner reported issue with 1.13 and provided patch.
  
  http://curl.haxx.se/mail/lib-2012-12/0246.html

- curl-override.m4: provide AC_CONFIG_MACRO_DIR definition conditionally
  
  Provide a 'traceable' AC_CONFIG_MACRO_DIR definition only when using
  an autoconf version that does not provide it, instead of what we were
  doing up to now of providing and overriding AC_CONFIG_MACRO_DIR for
  all autoconf versions.

Steve Holme (30 Dec 2012)
- imap.c: Minor follow up tidy up

- imap: Code tidy up prior to adding support for the CAPABILITY command
  
  * Changing the order of the state machine to represent the order in
    which commands are sent to the server.
  
  * Reworking the imap_endofresp() function as the FETCH response doesn't
    include the command id and shouldn't be part of the length comparison
    that takes into account the id string.

- pop3_doing: Applied debug info message when function fails
  
  Applied the same debug message as used in smtp_doing() and imap_doing()
  when pop3_multi_statemach() fails.

- imap_doing: don't call imap_dophase_done() if already failed
  
  Applied the POP3 fix from commit 2897ce7dc2e1 so imap_dophase_done()
  isn't called if imap_multi_statemach() fails.

- smtp_doing: don't call smtp_dophase_done() if already failed
  
  Applied the POP3 fix from commit 2897ce7dc2e1 so smtp_dophase_done()
  isn't called if smtp_multi_statemach() fails.

Yang Tse (29 Dec 2012)
- examples/certinfo.c: fix compiler warning

Steve Holme (29 Dec 2012)
- pop3.c: Removed unnecessary POP3_STOP state changes
  
  Removed unnecessary state changes in pop3_state_starttls_resp()
  following previous fix in IMAP module.

- smtp.c: Added extra comments around SMTP_STOP state change
  
  Provided extra comments in the SMTP module following previous IMAP fix.

- imap.c: Fixed bad state error when logging in with invalid credentials
  
  Fixed a problem with the state machine when attempting to log in with
  invalid credentials. The server would report login failure but libcurl
  would not read the response due to inappropriate IMAP_STOP states being
  set after the login was sent.

Yang Tse (29 Dec 2012)
- imap.c: remove trailing whitespace

Steve Holme (28 Dec 2012)
- imap.c: Code tidy up - Part 2

- imap.c: Code tidy up - Part 1
  
  Applied some of the comment and layout changes that had already been
  applied to the pop3 and smtp code over the last 6 to 9 months.
  
  This is in preparation of adding SASL based authentication.

- pop3.c: Minor code tidy up
  
  Minor tidy up of comments and layout prior to next part of imap work.

- smtp: Minor code tidy up
  
  Minor tidy up of comments and layout prior to next part of imap work.

- curl_imap.h: Tidy up of comments to be more readable

- imap.c: Code tidy up renaming imapsendf() to imap_sendf()
  
  Renamed imapsendf() to imap_sendf() to be more in keeping with the
  other imap functions as well as Curl_pp_sendf() that it replaces.

Yang Tse (28 Dec 2012)
- build: rename 76 lib/*.h files
  
  76 private header files renamed to use our standard naming scheme.
  
  This commit only does the file renaming.
  
  ----------------------------------------
  
    renamed:    amigaos.h -> curl_amigaos.h
    renamed:    arpa_telnet.h -> curl_arpa_telnet.h
    renamed:    asyn.h -> curl_asyn.h
    renamed:    axtls.h -> curl_axtls.h
    renamed:    bundles.h -> curl_bundles.h
    renamed:    conncache.h -> curl_conncache.h
    renamed:    connect.h -> curl_connect.h
    renamed:    content_encoding.h -> curl_content_encoding.h
    renamed:    cookie.h -> curl_cookie.h
    renamed:    cyassl.h -> curl_cyassl.h
    renamed:    dict.h -> curl_dict.h
    renamed:    easyif.h -> curl_easyif.h
    renamed:    escape.h -> curl_escape.h
    renamed:    file.h -> curl_file.h
    renamed:    fileinfo.h -> curl_fileinfo.h
    renamed:    formdata.h -> curl_formdata.h
    renamed:    ftp.h -> curl_ftp.h
    renamed:    ftplistparser.h -> curl_ftplistparser.h
    renamed:    getinfo.h -> curl_getinfo.h
    renamed:    gopher.h -> curl_gopher.h
    renamed:    gtls.h -> curl_gtls.h
    renamed:    hash.h -> curl_hash.h
    renamed:    hostcheck.h -> curl_hostcheck.h
    renamed:    hostip.h -> curl_hostip.h
    renamed:    http.h -> curl_http.h
    renamed:    http_chunks.h -> curl_http_chunks.h
    renamed:    http_digest.h -> curl_http_digest.h
    renamed:    http_negotiate.h -> curl_http_negotiate.h
    renamed:    http_proxy.h -> curl_http_proxy.h
    renamed:    if2ip.h -> curl_if2ip.h
    renamed:    imap.h -> curl_imap.h
    renamed:    inet_ntop.h -> curl_inet_ntop.h
    renamed:    inet_pton.h -> curl_inet_pton.h
    renamed:    krb4.h -> curl_krb4.h
    renamed:    llist.h -> curl_llist.h
    renamed:    memdebug.h -> curl_memdebug.h
    renamed:    multiif.h -> curl_multiif.h
    renamed:    netrc.h -> curl_netrc.h
    renamed:    non-ascii.h -> curl_non-ascii.h
    renamed:    nonblock.h -> curl_nonblock.h
    renamed:    nssg.h -> curl_nssg.h
    renamed:    parsedate.h -> curl_parsedate.h
    renamed:    pingpong.h -> curl_pingpong.h
    renamed:    polarssl.h -> curl_polarssl.h
    renamed:    pop3.h -> curl_pop3.h
    renamed:    progress.h -> curl_progress.h
    renamed:    qssl.h -> curl_qssl.h
    renamed:    rawstr.h -> curl_rawstr.h
    renamed:    rtsp.h -> curl_rtsp.h
    renamed:    select.h -> curl_select.h
    renamed:    sendf.h -> curl_sendf.h
    renamed:    setup.h -> curl_setup.h
    renamed:    setup_once.h -> curl_setup_once.h
    renamed:    share.h -> curl_share.h
    renamed:    slist.h -> curl_slist.h
    renamed:    smtp.h -> curl_smtp.h
    renamed:    sockaddr.h -> curl_sockaddr.h
    renamed:    socks.h -> curl_socks.h
    renamed:    speedcheck.h -> curl_speedcheck.h
    renamed:    splay.h -> curl_splay.h
    renamed:    ssh.h -> curl_ssh.h
    renamed:    sslgen.h -> curl_sslgen.h
    renamed:    ssluse.h -> curl_ssluse.h
    renamed:    strdup.h -> curl_strdup.h
    renamed:    strequal.h -> curl_strequal.h
    renamed:    strerror.h -> curl_strerror.h
    renamed:    strtok.h -> curl_strtok.h
    renamed:    strtoofft.h -> curl_strtoofft.h
    renamed:    telnet.h -> curl_telnet.h
    renamed:    tftp.h -> curl_tftp.h
    renamed:    timeval.h -> curl_timeval.h
    renamed:    transfer.h -> curl_transfer.h
    renamed:    url.h -> curl_url.h
    renamed:    urldata.h -> curl_urldata.h
    renamed:    warnless.h -> curl_warnless.h
    renamed:    wildcard.h -> curl_wildcard.h
  
  ----------------------------------------

- build: make use of 76 lib/*.h renamed files
  
  76 private header files renamed to use our standard naming scheme.
  
  This change affects 322 files in libcurl's source tree.

- lib/*.h: use our standard naming scheme for header inclusion guards

Steve Holme (28 Dec 2012)
- imsp.c: Fixed usernames and passwords that contain escape characters
  
  Fixed a problem with sending usernames and passwords that contain
  backslash, quotation mark and space characters.

Daniel Stenberg (27 Dec 2012)
- curl.1: extend the -X, --request description

- RELEASE-NOTES: synced with e3ed2b82e6

- [Nick Zitzmann brought this change]

  darwinssl: Fixed inability to disable peer verification
  
  ... on Snow Leopard and Lion
  
  Snow Leopard introduced the SSLSetSessionOption() function, but it
  doesn't disable peer verification as expected on Snow Leopard or
  Lion (it works as expected in Mountain Lion). So we now use sysctl()
  to detect whether or not the user is using Snow Leopard or Lion,
  and if that's the case, then we now use the deprecated
  SSLSetEnableCertVerify() function instead to disable peer verification.

Yang Tse (26 Dec 2012)
- curl tool: rename hugehelp files to tool_hugehelp

- curl tool: renaming hugehelp files to tool_hugehelp

- sockfilt.c: commit b44da5a82a follow-up 2

- sockfilt.c: commit b44da5a82a follow-up

- sockfilt.c: fix some compiler warnings

- curl_multi_remove_handle: commit 0aabfd9963 follow-up

Daniel Stenberg (25 Dec 2012)
- lib556: enable VERBOSE to ease debugging on failures

Marc Hoersken (25 Dec 2012)
- socklift.c: Quick fix to re-add missing code

- socklift.c: Added select_ws function to support Windows
  
  WinSock select() does not support standard file descriptors,
  it can only check SOCKETs. The following function is an attempt
  to create a select() function with support for other handles.

Yang Tse (25 Dec 2012)
- Enable tests 1503, 1504 and 1505

- curl_multi_remove_handle: fix memory leak triggered with CURLOPT_RESOLVE

- Curl_hash_clean: OOM handling fix

- test 1504 and 1505: same as 1502 but with different cleanup sequences

Daniel Stenberg (24 Dec 2012)
- Curl_conncache_foreach: allow callback to break loop
  
  ... and have it take a proper 'struct connectdata *' as first argument

- pop3_doing: don't call pop3_dophase_done() if already failed
  
  ... it also clobbered the 'result' return value so that it wouldn't
  return the error back to the parent function properly, which broke test
  809 when run with 'multi-always'.

Yang Tse (23 Dec 2012)
- test 1503: same as 1502 but with a different cleanup sequence

- test 1502: OOM handling fixes

- curl_multi_wait: OOM handling fix

- [Daniel Stenberg brought this change]

  curl_multi_wait: avoid an unnecessary memory allocation

- runtests.pl: prepend $srcdir to HTTPTLS server config files path

- multi.c: OOM handling fix

- lib543.c: OOM handling fixes

- configure: add internal sanity check (warn only) on vars for makefiles

Daniel Stenberg (21 Dec 2012)
- SCP: relative path didn't work
  
  When prefixing a path with /~/ it is supposed to be used relative to the
  user's home directory but it didn't work. Now we cut off the entire
  three byte sequenct "/~/" which seems to be how OpenSSH does it.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=1173
  Reported by: Balaji Parasuram

Yang Tse (21 Dec 2012)
- configure: LIBMETALINK_CFLAGS actually is LIBMETALINK_CPPFLAGS

- configure: add minimal sanity check on user provided CFLAGS and CPPFLAGS

- bundles connection caching: some out of memory handling fixes

- libntlmconnect.c: fix compiler warnings and OOM handling

- configure.ac: clear local test intended variables before use

- VC6 IDE: link with advapi32.lib when using WIN32 crypto API (md5.c)

- curl-functions.m4: improve gethostname arg 2 data type check

- setup_once.h: HP-UX specific 'bool', 'false' and 'true' definitions.
  
  Also reverts commit f254c59dc7

- configure: check if compiler halts on function prototype mismatch

- warnless.c: fix compiler warnings

- curl-functions.m4: add gethostname arg 2 data type check and definition

Daniel Stenberg (14 Dec 2012)
- [Nick Zitzmann brought this change]

  darwinssl: Fix implicit conversion compiler warnings
  
  The Clang compiler found a few implicit conversion problems that have
  now been fixed.

Yang Tse (14 Dec 2012)
- setup_once.h: HP-UX <sys/socket.h> issue workaround
  
  Issue: When building a 32bit target with large file support HP-UX
  <sys/socket.h> header file may simultaneously provide two different
  sets of declarations for sendfile and sendpath functions, one with
  static and another with external linkage. Given that we do not use
  mentioned functions we really don't care which linkage is the
  appropriate one, but on the other hand, the double declaration emmits
  warnings when using the HP-UX compiler and errors when using modern
  gcc versions resulting in fatal compilation errors.
  
  Mentioned issue is now fixed as long as we don't use sendfile nor
  sendpath functions.

- setup_once.h: refactor inclusion of <unistd.h> and <sys/socket.h>
  
  Inclusion of top two most included header files now done in setup_once.h

- setup_once.h: HP-UX specific TRUE and FALSE definitions
  
  Some HP-UX system headers require TRUE defined to 1 and FALSE to 0.

Daniel Stenberg (12 Dec 2012)
- gopher: #include cleanup
  
  Remove all system file includes from this file as they're not needed
  
  Reported by: Dan Fandrich

Yang Tse (11 Dec 2012)
- examples/simplessl.c: fix compiler warning

- examples/externalsocket.c: fix SunPro compilation issue

- examples/simplessl.c: fix compiler warning

- build: add bundles and conncache files to other build systems

- conncache: fix enumerated type mixed with another type

- examples/anyauthput.c: fix Tru64 compilation issue

Daniel Stenberg (8 Dec 2012)
- [Colin Watson brought this change]

  configure: fix cross pkg-config detection
  
  When cross-compiling, CURL_CHECK_PKGCONFIG was checking for the cross
  pkg-config using ${host}-pkg-config.
  
  The gold standard for doing this correctly is pkg-config's own macro,
  PKG_PROG_PKG_CONFIG.  However, on the assumption that you have a good
  reason not to use that directly (reduced dependencies for maintainer
  builds?), the behaviour of cURL's version should at least match.
  PKG_PROG_PKG_CONFIG uses AC_PATH_TOOL, which ultimately ends up trying
  ${host_alias}-pkg-config; this is not quite the same as what cURL does,
  and may differ because ${host} has been run through config.sub.  For
  instance, when cross-building to the armhf architecture on Ubuntu,
  ${host_alias} is arm-linux-gnueabihf while ${host} is
  arm-unknown-linux-gnueabihf.  This may also have been the cause of the
  problem reported at http://curl.haxx.se/mail/lib-2012-04/0224.html.
  
  AC_PATH_TOOL is significantly simpler than cURL's current code, and
  dates back to well before the current minimum of Autoconf 2.57, so let's
  use it instead.

- [Linus Nielsen Feltzing brought this change]

  Introducing a new persistent connection caching system using "bundles".
  
  A bundle is a list of all persistent connections to the same host.
  The connection cache consists of a hash of bundles, with the
  hostname as the key.
  The benefits may not be obvious, but they are two:
  
  1) Faster search for connections to reuse, since the hash
     lookup only finds connections to the host in question.
  2) It lays out the groundworks for an upcoming patch,
     which will introduce multiple HTTP pipelines.
  
  This patch also removes the awkward list of "closure handles",
  which were needed to send QUIT commands to the FTP server
  when closing a connection.
  Now we allocate a separate closure handle and use that
  one to close all connections.
  
  This has been tested in a live system for a few weeks, and of
  course passes the test suite.

- [Fabian Keil brought this change]

  runtests and friends: Do not add undefined values to @INC
  
  On FreeBSD this fixes the warning:
  Use of uninitialized value $p in string eq at /usr/local/lib/perl5/5.14.2/BSDPAN/BSDPAN.pm line 36.

Steve Holme (5 Dec 2012)
- Merge pull request #52 from isn-/master
  
  small compilation fix

Stanislav Ivochkin (5 Dec 2012)
- build: fix compilation with CURL_DISABLE_CRYPTO_AUTH flag

Yang Tse (5 Dec 2012)
- libtest: fix some compiler warnings

- examples: fix compilation issues - commit 7332a7cafb follow-up

- examples: fix compilation issues - commit 23f8dca6fb follow-up

- examples: fix compilation issues

- build: explain current role of LIBS in our Makefile.am files
  
  BLANK_AT_MAKETIME may be used in our Makefile.am files to blank
  LIBS variable used in generated makefile at makefile processing
  time. Doing this functionally prevents LIBS from being used for
  all link targets in given makefile.

Daniel Stenberg (4 Dec 2012)
- multi: fix re-sending request on early connection close
  
  This handling already works with the easy-interface code. When a request
  is sent on a re-used connection that gets closed by the server at the
  same time as the request is sent, the situation may occur so that we can
  send the request and we discover the broken connection as a RECV_ERROR
  in the PERFORM state and then the request needs to be retried on a fresh
  connection. Test 64 broke with 'multi-always-internally'.

Yang Tse (4 Dec 2012)
- configure: add minimal sanity check on user provided LIBS and LDFLAGS

- build: prevent global LIBS from influencing src and lib build targets
  
  Currently, LIBS is already used through other macros.

Kamil Dudka (3 Dec 2012)
- nss: prevent NSS from crashing on client auth hook failure
  
  Although it is not explicitly stated in the documentation, NSS uses
  *pRetCert and *pRetKey even if the client authentication hook returns
  a failure.  Namely, if we destroy *pRetCert without clearing *pRetCert
  afterwards, NSS destroys the certificate once again, which causes a
  double free.
  
  Reported by: Bob Relyea

Yang Tse (30 Nov 2012)
- testcurl.pl: build example programs for several autobuilds
  
  Affected autobuilds: IRIX, AIX, Tru64 and AIX.

- build: prevent global LIBS from influencing examples build targets

- build: prevent global LIBS from influencing libtest build targets

- build: prevent global LIBS from influencing test server build targets

- build: fix Windows build targets damaged since commit 550e403f00

- build: avoid linkage of directly unused libraries

- dd missing NTLM feature for tests 2025, and 2028 to 2032

- avoid mixing of enumerated type with another type

- multi.c: disambiguate precedence of bitwise and relational operation

Daniel Stenberg (26 Nov 2012)
- [Fabian Keil brought this change]

  Remove stray CRLF in chunk-encoded content-free request bodies
  
  .. that are sent when auth-negotiating before a chunked
  upload or when setting the 'Transfer-Encoding: chunked'
  header and intentionally sending no content.
  
  Adjust test565 and test1333 accordingly.

- FAQ: clarify the 3.4 section
  
  You can do custom commands to FTP without sending anything by using the
  CURLOPT_NOBODY, which -I sets.

- [Lijo Antony brought this change]

  examples: Updated asiohiper.cpp to remove connect from opensocket
  
  Blocking connect on the socket has been removed from opensocket
  callback. opensocket just opens a new socket and gives it back to
  libcurl and libcurl will take care of the connect. sockopt_callback has
  also been removed, as it is no longer required.

Yang Tse (23 Nov 2012)
- build: fix AIX compilation and usage
  
  AIX sys/poll.h header file defines 'events' and 'revents' as C
  preprocessor macros. Usage of these literals in libcurl's external
  API was introduced in commit de24d7bd4c causing AIX build failures.
  Appropriate inclusion of sys/poll.h by libcurl's external interface
  fixes AIX build and usage issues while avoiding a SONAME bump.

Steve Holme (23 Nov 2012)
- DOCS: Updated CURLOPT_CONNECT_ONLY to reflect usage in other protocols

Daniel Stenberg (23 Nov 2012)
- test: offer "automake" output and check for perl better
  
  runtests.pl -am now uses the "PASS/FAIL: [desc]" output for each
  executed test. You can run 'make test-am' in the root build directory to
  invoke that. The reason for this output style is to better allow generic
  test suite parsers to also grok our test output.
  
  The test Makefile now also tests that perl was indeed found and that the
  PERL variable points to an executable before it tries to run the main
  test perl script runtests.pl,

- [Fabian Keil brought this change]

  Test 206: Use a Content-Length header for the 407 response
  
  Otherwise curl would have to guess where the body ends.

- [Fabian Keil brought this change]

  Test 206: Don't respond to a succesful CONNECT request with a body
  
  It's against the spec and caused test failures when header
  and response were read from the network separately in which
  case bug #39 wasn't triggered.

- htmltitle: use .cpp extension for C++ examples

- [Lijo Antony brought this change]

  examples: Added a c++ example of using multi with boost::asio
  
  Added an example for demonstrating the usage of curl multi interface
  with boost::asio in c++

- VC Makefiles: add missing hostcheck
  
  the newly introduced hostcheck.h/c is missing in the Visual Studio
  Makefiles as obj file.
  
  Bug: http://curl.haxx.se/mail/lib-2012-11/0176.html

- compiler warning fixes
  
  The conversions from ssize_t to int need to be typecasted.

- bump: start working on 7.28.2

- THANKS: added 14 contributors from the 7.28.1 release

Version 7.28.1 (20 Nov 2012)

Daniel Stenberg (20 Nov 2012)
- RELEASE-NOTES: synced with 52af6e69f079 / 7.28.1

Kamil Dudka (20 Nov 2012)
- [Anthony Bryan brought this change]

  RELEASE-NOTES: NSS can be used for metalink hashing

- [Fabian Keil brought this change]

  Get test 2032 working when using valgrind
  
  If curl_multi_fdset() sets maxfd to -1, the socket detection
  loop is skipped and thus !found_new_socket is no cause for alarm.

- test2032: spurious failure caused by premature termination
  
  Bug: http://curl.haxx.se/mail/lib-2012-11/0095.html

Daniel Stenberg (19 Nov 2012)
- [Fabian Keil brought this change]

  Fix comment typos in test 517

- [Fabian Keil brought this change]

  Test 92 and 194: normalize spaces in the Server headers
  
  It makes no difference from curl's point of view but
  makes it more convenient to use the tests with a
  lws-normalizing proxy between curl and the test server.

- [Fabian Keil brought this change]

  Add a HOSTIP precheck for tests 31 and 1105
  
  They currently only work for 127.0.0.1 which
  is hardcoded and can't be easily changed.

- [Fabian Keil brought this change]

  Let test 8 work as long as %HOSTIP ends with ".0.0.1"
  
  .. and add a precheck to skip the test otherwise.

- [Fabian Keil brought this change]

  Add --resolve to the keywords and name of test 1318
  
  This makes it easier to skip it automatically when
  the test suite is used with external proxies.

- [Fabian Keil brought this change]

  Add FTP keywords for a couple of currently keyword-less FTP tests

- [Fabian Keil brought this change]

  Add keywords for a couple of currently keyword-less HTTP tests

- [Fabian Keil brought this change]

  Use carriage returns in all headers in test 31
  
  Trailing spaces were left unmodifed, assuming they were intentional.

- [Fabian Keil brought this change]

  Do not mix CRLF and LF header endings in a couple of HTTP tests
  
  Consistently use CRLF instead. The mixed endings weren't
  documented so I assume they were unintentional.
  
  This change doesn't matter for curl itself but makes using
  the tests with a proxy between curl and the test server
  more convenient.
  
  Tests that consistently use no carriage returns were
  left unmodified as one can easily work around this.

- fixed memory leak: CURLOPT_RESOLVE with multi interface
  
  DNS cache entries populated with CURLOPT_RESOLVE were not properly freed
  again when done using the multi interface.
  
  Test case 1502 added to verify.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3575448
  Reported by: Alex Gruz

- RELEASE-NOTES: synced with ee588fe08807778
  
  4 more bug fixes and 4 more contributors

- mem-include-scan: verify memory #includes
  
  If we use memory functions (malloc, free, strdup etc) in C sources in
  libcurl and we fail to include curl_memory.h or memdebug.h we either
  fail to properly support user-provided memory callbacks or the memory
  leak system of the test suite fails.
  
  After Ajit's report of a failure in the first category in http_proxy.c,
  I spotted a few in the second category as well. These problems are now
  tested for by test 1132 which runs a perl program that scans for and
  attempts to check that we use the correct include files if a memory
  related function is used in the source code.
  
  Reported by: Ajit Dhumale
  Bug: http://curl.haxx.se/mail/lib-2012-11/0125.html

- tftp_rx: code style cleanup
  
  Fixed checksrc warnings

- [Fabian Keil brought this change]

  Fix the libauthretry changes from 7c0cbcf2f61
  
  They broke the NTLM tests from 2023 to 2031.

- [Christian Vogt brought this change]

  tftp_rx: handle resends
  
  Re-send ACK for block X in case we receive block X data again while
  waiting for block X+1.
  
  Based on an earlier patch by Marcin Adamski.

- autoconf: don't force-disable compiler debug option
  
  When nothing is told to configure, we should not enforce switching off
  debug options with -g0 (or similar). We instead don't use -g at all in
  that situaion and therefore allow the user's CFLAGS settings possibly
  dictate what to do.

- [Mark Snelling brought this change]

  winbuild: Fix PDB file output
  
  And fix some newlines to be proper CRLF
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3586741

- RELEASE-NOTES: synced with fa1ae0abcde

- [Cristian Rodríguez brought this change]

  OpenSSL: Disable SSL/TLS compression
  
  It either causes increased memory usage or exposes users
  to the "CRIME attack" (CVE-2012-4929)

- [Sebastian Rasmussen brought this change]

  FILE: Make upload-writes unbuffered by not using FILE streams

Kamil Dudka (13 Nov 2012)
- tool_metalink: fix error detection of hash alg initialization
  
  The {MD5,SHA1,SHA256}_Init functions from OpenSSL are called directly
  without any wrappers and they return 1 for success, 0 otherwise.  Hence,
  we have to use the same approach in all the wrapper functions that are
  used for the other crypto libraries.
  
  This commit fixes a regression introduced in commit dca8ae5f.

Daniel Stenberg (13 Nov 2012)
- RELEASE-NOTES: synced with 7c0cbcf2f617b

- [Sergei Nikulov brought this change]

  fixed Visual Studio 2010 compilation

- [Anton Malov brought this change]

  ftp: EPSV-disable fix over SOCKS
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3586338

Patrick Monnerat (12 Nov 2012)
- Merge branch 'master' of github.com:bagder/curl

- OS400: upgrade wrappers for the 7.28.1 release.

Daniel Stenberg (12 Nov 2012)
- runtests: limit execessive logging/output

- [Gabriel Sjoberg brought this change]

  Digst: Add microseconds into nounce calculation
  
  When using only 1 second precision, curl doesn't create new cnonce
  values quickly enough for all uses.
  
  For example, issuing the following command multiple times to a recent
  Tomcat causes authentication failures:
  
  curl --digest -utest:test http://tomcat.test.com:8080/manager/list
  
  This is because curl uses the same cnonce for several seconds, but
  doesn't increment the nonce counter.  Tomcat correctly interprets
  this as a replay attack and rejects the request.
  
  When microsecond-precision is available, this commit causes curl to
  change cnonce values much more frequently.
  
  With microsecond resolution, increasing the nounce length used in the
  headers to 32 was made to further reduce the risk of duplication.

- SCP/SFTP: improve error code used for send failures
  
  Instead of relying on the generic CURLE error for SCP or SFTP send
  failures, try passing back a more suitable error if possible.

- Curl_write: remove unneeded typecast

Kamil Dudka (9 Nov 2012)
- tool_metalink: allow to use hash algorithms provided by NSS
  
  Fixes bug #3578163:
  http://sourceforge.net/tracker/?func=detail&atid=100976&aid=3578163&group_id=976

- tool_metalink: allow to handle failure of hash alg initialization

- tool_metalink: introduce metalink_cleanup() in the internal API
  
  ... to release resources allocated at global scope

Daniel Stenberg (8 Nov 2012)
- hostcheck: only build for the actual users
  
  and make local function static

- [Oscar Koeroo brought this change]

  SSL: Several SSL-backend related fixes
  
  axTLS:
  
  This will make the axTLS backend perform the RFC2818 checks, honoring
  the VERIFYHOST setting similar to the OpenSSL backend.
  
  Generic for OpenSSL and axTLS:
  
  Move the hostcheck and cert_hostcheck functions from the lib/ssluse.c
  files to make them genericly available for both the OpenSSL, axTLS and
  other SSL backends. They are now in the new lib/hostcheck.c file.
  
  CyaSSL:
  
  CyaSSL now also has the RFC2818 checks enabled by default. There is a
  limitation that the verifyhost can not be enabled exclusively on the
  Subject CN field comparison. This SSL backend will thus behave like the
  NSS and the GnuTLS (meaning: RFC2818 ok, or bust). In other words:
  setting verifyhost to 0 or 1 will disable the Subject Alt Names checks
  too.
  
  Schannel:
  
  Updated the schannel information messages: Split the IP address usage
  message from the verifyhost setting and changed the message about
  disabling SNI (Server Name Indication, used in HTTP virtual hosting)
  into a message stating that the Subject Alternative Names checks are
  being disabled when verifyhost is set to 0 or 1. As a side effect of
  switching off the RFC2818 related servername checks with
  SCH_CRED_NO_SERVERNAME_CHECK
  (http://msdn.microsoft.com/en-us/library/aa923430.aspx) the SNI feature
  is being disabled. This effect is not documented in MSDN, but Wireshark
  output clearly shows the effect (details on the libcurl maillist).
  
  PolarSSL:
  
  Fix the prototype change in PolarSSL of ssl_set_session() and the move
  of the peer_cert from the ssl_context to the ssl_session. Found this
  change in the PolarSSL SVN between r1316 and r1317 where the
  POLARSSL_VERSION_NUMBER was at 0x01010100. But to accommodate the Ubuntu
  PolarSSL version 1.1.4 the check is to discriminate between lower then
  PolarSSL version 1.2.0 and 1.2.0 and higher. Note: The PolarSSL SVN
  trunk jumped from version 1.1.1 to 1.2.0.
  
  Generic:
  
  All the SSL backends are fixed and checked to work with the
  ssl.verifyhost as a boolean, which is an internal API change.

- libcurl: VERSIONINFO update
  
  Since we added the curl_multi_wait function, the VERSIONINFO needed
  updating.
  
  Reported by: Patrick Monnerat

Guenter Knauf (8 Nov 2012)
- Added .def file to output.
  
  Requested by Johnny Luong on the libcurl list.

- Added deps for static metalink-aware MinGW builds.

Daniel Stenberg (8 Nov 2012)
- [Fabian Keil brought this change]

  Fix compilation of lib1501

- Curl_readwrite: remove debug output
  
  The text "additional stuff not fine" text was added for debug purposes a
  while ago, but it isn't really helping anyone and for some reason some
  Linux distributions provide their libcurls built with debug info still
  present and thus (far too many) users get to read this info.

- RELEASE-NOTES: synced with 487538e87a3d5e
  
  6 new bugfixes and 3 more contributors...

- http_perhapsrewind: consider NTLM over proxy too
  
  The logic previously checked for a started NTLM negotiation only for
  host and not also with proxy, leading to problems doing POSTs over a
  proxy NTLM that are larger than 2000 bytes. Now it includes proxy in the
  check.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3582321
  Reported by: John Suprock

- [Lars Buitinck brought this change]

  Curl_connecthost: friendlier "couldn't connect" message

- test1413: verify redirects to URLs with fragments
  
  The bug report claimed it didn't work. This problem was probably fixed
  in 473003fbdf.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3581898

- URL parser: cut off '#' fragments from URLs (better)
  
  The existing logic only cut off the fragment from the separate 'path'
  buffer which is used when sending HTTP to hosts. The buffer that held
  the full URL used for proxies were not dealt with. It is now.
  
  Test case 5 was updated to use a fragment on a URL over a proxy.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3579813

- OpenSSL/servercert: use correct buffer size, not size of pointer
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3579286

- curl: set CURLOPT_SSL_VERIFYHOST to 0 to disable

- test 2027/2030: take duplicate Digest requests into account
  
  With the reversion of ce8311c7e49eca and the new clear logic, this flaw
  is present and we allow it.

- Curl_pretransfer: clear out unwanted auth methods
  
  As a handle can be re-used after having done HTTP auth in a previous
  request, it must make sure to clear out the HTTP types that aren't
  wanted in this new request.

- test1412: verify Digest with repeated URLs
  
  This test case verifies that bug 3582718 is fixed.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3582718
  Reported by: Nick Zitzmann (originally)

- Revert "Zero out auth structs before transfer"
  
  This reverts commit ce8311c7e49eca93c136b58efa6763853541ec97.
  
  The commit made test 2024 work but caused a regression with repeated
  Digest authentication. We need to fix this differently.

- CURLOPT_SSL_VERIFYHOST: stop supporting the 1 value
  
  After a research team wrote a document[1] that found several live source
  codes out there in the wild that misused the CURLOPT_SSL_VERIFYHOST
  option thinking it was a boolean, this change now bans 1 as a value and
  will make libcurl return error for it.
  
  1 was never a sensible value to use in production but was introduced
  back in the days to help debugging. It was always documented clearly
  this way.
  
  1 was never supported by all SSL backends in libcurl, so this cleanup
  makes the treatment of it unified.
  
  The report's list of mistakes for this option were all PHP code and
  while there's a binding layer between libcurl and PHP, the PHP team has
  decided that they have an as thin layer as possible on top of libcurl so
  they will not alter or specifically filter a 'TRUE' value for this
  particular option. I sympathize with that position.
  
  [1] = http://daniel.haxx.se/blog/2012/10/25/libcurl-claimed-to-be-dangerous/

- gnutls: fix compiler warnings

- [Alessandro Ghedini brought this change]

  gnutls: print alerts during handshake

- [Alessandro Ghedini brought this change]

  gnutls: fix the error_is_fatal logic

- RELEASE-NOTES: synced with fa6d78829fd30ad

- httpcustomheader.c: free the headers after use

- [Dave Reisner brought this change]

  uniformly use AM_CPPFLAGS, avoid deprecated INCLUDES
  
  Since automake 1.12.4, the warnings are issued on running automake:
  
    warning: 'INCLUDES' is the old name for 'AM_CPPFLAGS' (or '*_CPPFLAGS')
  
  Avoid INCLUDES and roll these flags into AM_CPPFLAGS.
  
  Compile tested on:
    Ubuntu 10.04 (automake 1:1.11.1-1)
    Ubuntu 12.04 (automake 1:1.11.3-1ubuntu2)
    Arch Linux (automake 1.12.4)

- libauthretry.c: shorten lines to fit within 80 cols

- ftp_readresp: fix build without krb4 support
  
  Oops, my previous commit broke builds with krb support.

- test/README: mention the 1500 test number range

- FTP: prevent the multi interface from blocking
  
  As pointed out in Bug report #3579064, curl_multi_perform() would
  wrongly use a blocking mechanism internally for some commands which
  could lead to for example a very long block if the LIST response never
  showed.
  
  The solution was to make sure to properly continue to use the multi
  interface non-blocking state machine.
  
  The new test 1501 verifies the fix.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3579064
  Reported by: Guido Berhoerster

Marc Hoersken (1 Nov 2012)
- winbuild: Use machine type of development environment
  
  This patch restores the original behavior instead of always
  falling back to x86 if no MACHINE-type was specified.

- winbuild: Additional clean up

- [Sapien2 brought this change]

  Even more winbuild refactoring

- [Sapien2 brought this change]

  Minor winbuild refactoring

- [Sapien2 brought this change]

  Architecture selection for winbuild and minor makefiles refactoring

Daniel Stenberg (1 Nov 2012)
- BUGS: fix the bug tracker URL
  
  The URL we used before is the one that goes directly to 'add' a bug
  report, but since you can only do that after first having logged in to
  sourceforge, the link often doesn't work for visitors.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3582408
  Reported by: Oscar Norlander

- evhiperfifo: fix the pointer passed to WRITEDATA
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3582407
  Reported by: Oscar Norlander

Guenter Knauf (1 Nov 2012)
- Fixed MSVC libssh2 static build.
  
  Since libssh2 supports now agent stuff it also depends on user32.lib.
  Posted to the list by Jan Ehrhardt.

Daniel Stenberg (23 Oct 2012)
- tlsauthtype: deal with the string case insensitively
  
  When given a string as 'srp' it didn't work, but required 'SRP'.
  Starting now, the check disregards casing.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3578418
  Reported by: Jeff Connelly

- asyn-ares: restore working with c-ares < 1.6.1
  
  Back in those days the public ares.h header didn't include the
  ares_version.h header so it needs to be included here.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3577710

- [Nick Zitzmann brought this change]

  metalink/md5: Use CommonCrypto on Apple operating systems
  
  Previously the Metalink code used Apple's CommonCrypto library only if
  curl was built using the --with-darwinssl option. Now we use CommonCrypto
  on all Apple operating systems including Tiger or later, or iOS 5 or
  later, so you don't need to build --with-darwinssl anymore. Also rolled
  out this change to libcurl's md5 code.

- href_extractor.c: fix the URL

- [Michał Kowalczyk brought this change]

  href_extractor: example code extracting href elements
  
  It does so in a streaming manner using the "Streaming HTML parser".

- [Nick Zitzmann brought this change]

  darwinssl: un-broke iOS build, fix error on server disconnect
  
  The iOS build was broken by a reference to a function that only existed
  under OS X; fixed. Also fixed a hard-to-reproduce problem where, if the
  server disconnected before libcurl got the chance to hang up first and
  SecureTransport was in use, then we'd raise an error instead of failing
  gracefully.

- [Alessandro Ghedini brought this change]

  gnutls: put reset code into else block
  
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=690551

Guenter Knauf (13 Oct 2012)
- Fix now broken libmetalink-aware OpenSSL build.

- Revert c44e674; add OpenSSL includes/defines.
  
  The makefile is designed to build against a libmetalink devel package;
  therefore is does not matter what will change inside libmetalink.
  Add OpenSSL includes and defines for libmetalink-aware OpenSSL builds.

Daniel Stenberg (10 Oct 2012)
- version-bump: towards 7.28.1!

- THANKS: 14 new contributors from 7.28.0

Version 7.28.0 (10 Oct 2012)

Daniel Stenberg (10 Oct 2012)
- RELEASE-NOTES: synced with 8373ca3641
  
  One bug, one contributor. Getting ready for release.

- curl_multi_wait: no wait if no descriptors to wait for
  
  This is a minor change in behavior after having been pointed out by Mark
  Tully and discussed on the list. Initially this case would internally
  call poll() with no sockets and a timeout which would equal a sleep for
  that specified time.
  
  Bug: http://curl.haxx.se/mail/lib-2012-10/0076.html
  Reported by: Mark Tully

- TODO-RELEASE: cleanup for 7.28.0
  
  one issue is now KNOWN_BUG #79
  
  the other we just skip since nobody is working on it or is planning to
  start working on it anytime soon

- curl_multi_wait.3: style formatting mistake

Marc Hoersken (8 Oct 2012)
- ssluse.c: md5.h is required for Curl_ossl_md5sum

Daniel Stenberg (8 Oct 2012)
- curl_multi_wait.3: fix the name of the man page

- curl_multi_wait.3: renamed the last argument variable for clarity

Marc Hoersken (6 Oct 2012)
- curl_schannel.c: Fixed caching more data than required
  
  Do not fill the decrypted data buffer with more data unless
  required in order to return the requested amount of data.

- curl_schannel: Removed buffer limit and optimized buffer strategy
  
  Since there are servers that seem to return very big encrypted
  data packages, we need to be able to handle those without having
  an internal size limit. To avoid the buffer growing to fast to
  early the initial size was decreased and the minimum free space
  in the buffer was decreased as well.

- lib/socks.c: Merged two size variables into one

- lib/socks.c: Avoid type conversions where possible
  
  Streamlined variable names and types to avoid type conversions that
  may result in data being lost on non 32-bit systems.

- lib/curl_schannel.c: Hide size_t conversion warning

- krb5/curl_rtmp.c: Hide size_t to int type conversion warning

- security.c: Aligned internal type to return type
  
  Use ssize_t instead of int to avoid conversion problems on 64-bit
  systems. Also added curlx_sztosi where necessary.

- lib/curl_schannel: Increased maximum buffer size to factor 128

- winbuild/MakefileBuild.vc: Follow up on 0c8ccf7

Daniel Stenberg (2 Oct 2012)
- RELEASE-NOTES: synced with 971f5bcedd418
  
  9 new bug fixes, 5 changes, 6 more contributors

- multi_runsingle: CURLOPT_LOW_SPEED_* fix for rate limitation
  
  During the periods of rate limitation, the speedcheck function wasn't
  called and thus the values weren't updated accordingly and it would then
  easily trigger wrongly once data got transferred again.
  
  Also, the progress callback's return code was not acknowledged in this
  state so it could make an "abort" return code to get ignored and not
  have the documented effect of aborting an ongoing transfer.
  
  Bug: http://curl.haxx.se/mail/lib-2012-09/0081.html
  Reported by: Jie He

- [Tatsuhiro Tsujikawa brought this change]

  tool_metalink.c: Filtered resource URLs by type
  
  In Metalink v3, the type attribute of url element indicates the
  type of the resource the URL points to. It can include URL to the
  meta data, such as BitTorrent metainfo file.  In Curl, we are not
  interested in these meta data URLs. Instead, we are only
  interested in the HTTP and FTP URLs. This change filters out
  non-HTTP and FTP URLs. If we don't filter out them, it will be
  downloaded by curl and hash check will fail if hash is provided
  and next URL will be tried. This change will cut this useless
  network transfer.

Kamil Dudka (1 Oct 2012)
- https.c example: remember to call curl_global_init()
  
  ... in order not to leak memory on initializing an SSL library.
  
  Reported by: Tomas Mlcoch

Daniel Stenberg (28 Sep 2012)
- FAQ: remove the date from the topmost line

- FAQ: 5.16 I want a different time-out!

- Curl_reconnect_request: clear pointer on failure
  
  The Curl_reconnect_request() function could end up returning a pointer
  to a free()d struct when Curl_done() failed inside. Clearing the pointer
  unconditionally after Curl_done() avoids this risk.
  
  Reported by: Ho-chi Chen
  Bug: http://curl.haxx.se/mail/lib-2012-09/0188.html

- CURLOPT_CONNECTTIMEOUT: works without signals or posix too!

Marc Hoersken (24 Sep 2012)
- Makefile.vc6: Follow up on 0c8ccf7

- Makefile.vc6: Added missing default library advapi32.lib

Daniel Stenberg (19 Sep 2012)
- HTTP_ONLY: disable more protocols

- test2006: Updated expected output to include hash name
  
  Output changed in commit a34197ef77cb

- [Sergei Nikulov brought this change]

  cmake: use standard findxxx modules for cmake v2.8+

- [Sergei Nikulov brought this change]

  setup.h: fixed for MS VC10 build
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3568327

- TODO-RELEASE: push new features to 7.29
  
  Leave two bug fixes as possibly fixed for 7.28 but as nobody seems to be
  working on them I have little hope...

Marc Hoersken (17 Sep 2012)
- metalink tests: Updated expected output to include hash name

Daniel Stenberg (16 Sep 2012)
- [Sara Golemon brought this change]

  curl_multi_wait: Add parameter to return number of active sockets
  
  Minor change to recently introduced function.  BC breaking, but since
  curl_multi_wait() doesn't exist in any releases that should be fine.

Marc Hoersken (14 Sep 2012)
- socks.c: Fixed warning: conversion to 'int' from 'long unsigned int'

- http_negotiate.c: Fxied warning: unused variable 'rc'

- ssh.c: Fixed warning: implicit conversion from enumeration type

- socks.c: Check that IPv6 is enabled before using it's features

- checksrc: Fixed line length and comment indentation

- socks.c: Updated error messages to handle hostname and IPv6

- socks.c: Added support for IPv6 connections through SOCKSv5 proxy

Daniel Stenberg (13 Sep 2012)
- parse_proxy: treat "socks://x" as a socks4 proxy
  
  Selected socks proxy in Google's Chrome browser. Resulting in the
  following environment variables:
  
  NO_PROXY=localhost,127.0.0.0/8
  ALL_PROXY=socks://localhost:1080/
  all_proxy=socks://localhost:1080/
  no_proxy=localhost,127.0.0.0/8
  
  ... and libcurl didn't treat 'socks://' as socks but instead picked HTTP
  proxy.
  
  Reported by: Scott Bailey
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3566860

Kamil Dudka (12 Sep 2012)
- ssh: do not crash if MD5 fingerprint is not provided by libssh2
  
  The MD5 fingerprint cannot be computed when running in FIPS mode.

- ssh: move the fingerprint checking code to a separate fnc

Marc Hoersken (12 Sep 2012)
- tool_metalink.c: Added name of validation hash to messages
  
  This makes it easier to debug broken hashes or hash functions.

- wincrypt: Fixed cross-compilation issues caused by include name
  
  For some reason WinCrypt.h is named wincrypt.h under MinGW.

- md5.c: Added support for Microsoft Windows CryptoAPI

- Makefile.m32: Updated to build against libmetalink 0.1.2
  
  The include and library path were moved within libmetalink, this
  patch adjusts the defaults provided within the curl MinGW makefile.

- tool_metalink.c: Added support for Microsoft Windows CryptoAPI
  
  Since Metalink support requires a crypto library for hash functions
  and Windows comes with the builtin CryptoAPI, this patch adds that
  API as a fallback to the supported crypto libraries.
  It is automatically used on Windows if no other library is provided.

- libntlmconnect.c: Fixed typo and conversion

- libntlmconnect.c: Fixed warning: curl_easy_getinfo expects long pointer
  
  Fixed tests/libtest/libntlmconnect.c:52: warning: call to
  '_curl_easy_getinfo_err_long' declared with attribute warning:
  curl_easy_getinfo expects a pointer to long for this info

- sws.c: Fixed warning: 'err' may be used uninitialized in this function

- libntlmconnect.c: Fixed warning: comparison of signed/unsigned integer
  
  Windows does not use -1 to represent invalid sockets and the
  SOCKET type is unsigned.

- nss.c: Fixed warning: 'err' may be used uninitialized in this function

- tool_metalink.c: Fixed error: 'O_BINARY' undeclared
  
  Check for O_BINARY which is not available on every system.

- tool_metalink.c: Fixed validation of binary files containing EOF
  
  Since Windows/MinGW threat 0x1A as the EOF character, reading binary
  files which contain that byte does not work using text mode.
  The read function will only read until the first 0x1A byte. This
  means that the hash is not computed from the whole file and the
  final validation check using hash comparision fails.

- winbuild: Added support for building with SPNEGO enabled
  
  Since Simple and Protected GSSAPI Negotiation Mechanism
  is already implemented in curl and supported by the MinGW
  builds, this change adds build support to winbuild makefiles.

- winbuild: Adjusted order of options to generated config name
  
  Cleaned up order of handled build options by ordering them
  nearly alphabetically by using the order of the generated
  config name. Preparation for future/more build options.

Daniel Stenberg (9 Sep 2012)
- [Anthony Bryan brought this change]

  MANUAL: clarified user+password in HTTP URLs

- RELEASE-NOTES: synced with 6c6f1f64c2
  
  6 bug fixes to mention, 5 contributors

- TODO-RELEASE: CURLSSH_AUTH_AGENT and curl_multi_wait() are done
  
  -321 - CURLSSH_AUTH_AGENT patch by Armel Asselin
  
  -324 - curl_multi_select() vs curl_multi_fdvec() etc

Marc Hoersken (9 Sep 2012)
- curl_schannel.c: Reference count the credential/session handle
  
  Reference counting the credential handle should avoid that such a
  handle is freed while it is still required for connection shutdown

Daniel Stenberg (8 Sep 2012)
- [Nick Zitzmann brought this change]

  darwinssl: fixed for older Mac OS X versions
  
  SSL didn't work on older cats if built on a newer cat with weak-linking
  turned on to support the older cat

- [David Blaikie brought this change]

  tool_easysrc.c: Test pointers against NULL
  
  While validating a new Clang diagnostic (-Wnon-literal-null-conversion -
  yes, the name isn't quite correct in this case, but it suffices) I found
  a few violations of it in Curl.

- SOCKS: truly disable it if CURL_DISABLE_PROXY is defined
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3561305
  
  Patch by: Marcel Raad

- mk-ca-bundle: detect start of trust section better
  
  Each certificate section of the input certdata.txt file has a trust
  section following it with details.
  
  This script failed to detect the start of the trust for at least one
  cert[*], which made the script continue pass that section into the next
  one where it found an 'untrusted' marker and as a result that certficate
  was not included in the output.
  
  [*] = "Hellenic Academic and Research Institutions RootCA 2011"
  
  Bug: http://curl.haxx.se/mail/lib-2012-09/0019.html

- [Alessandro Ghedini brought this change]

  gnutls: do not fail on non-fatal handshake errors
  
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=685402

- FILEFORMAT: the FTP commands work for more protocols

- test1411: verify SMTP without SIZE support

- [František Kučera brought this change]

  SMTP: only send SIZE if supported
  
  SMTP client will send SIZE parameter in MAIL FROM command only if server
  supports it. Without this patch server might say "504 Command parameter
  not implemented" and reject the message.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3564114

- ftpserver: respond with a 250 to SMTP EHLO
  
  ... and specify that SIZE is supported. 250 is the "correct" response
  code according to RFC 2821

- RELEASE-NOTES: synced with abb0da919300e

Dan Fandrich (3 Sep 2012)
- Updated Symbian build files
  
  This is untested, but at least Symbian still has a chance of
  still working now.

- Updated build docs w.r.t. Android and binary sizes

Daniel Stenberg (1 Sep 2012)
- symbols-in-versions: new CURL_WAIT_* symbols

- [Sara Golemon brought this change]

  Unit test for curl_multi_wait()

- [Sara Golemon brought this change]

  Manpage for curl_multi_wait().

- [Sara Golemon brought this change]

  multi: add curl_multi_wait()
  
  /*
   * Name:     curl_multi_wait()
   *
   * Desc:     Poll on all fds within a CURLM set as well as any
   *           additional fds passed to the function.
   *
   * Returns:  CURLMcode type, general multi error code.
   */
  CURL_EXTERN CURLMcode curl_multi_wait(CURLM *multi_handle,
                                        struct curl_waitfd extra_fds[],
                                        unsigned int extra_nfds,
                                        int timeout_ms);

- [Nick Zitzmann brought this change]

  darwinssl: Bugfix for previous commit for older cats
  
  I accidentally broke functionality for versions of OS X prior to Mountain
  Lion in the previous commit. This commit fixes the problems.

- [Joe Mason brought this change]

  Use MAX_EASY_HANDLES instead of hardcoding the number of handles twice

- test2032: bail out after last transfer
  
  The test would hang and get aborted with a "ABORTING TEST, since it
  seems that it would have run forever." until I prevented that from
  happening.
  
  I also fixed the data file which got broken CRLF line endings when I
  sucked down the path from Joe's repo == my fault.
  
  Removed #37 from KNOWN_BUGS as this fix and test case verifies exactly
  this.

- [Joe Mason brought this change]

  NTLM: re-use existing connection better
  
  If we need an NTLM connection and one already exists, always choose that
  one.

- [Joe Mason brought this change]

  NTLM: verify multiple connections work
  
  Add test2032 to test that NTLM does not switch connections in the middle
  of the handshake

- curl.1: list the -w variables sorted alphabetically

- libcurl-share.3: remove wrong info of what can be shared
  
  "Currently you can only share DNS and/or COOKIE data" is incorrect since
  also SSL sessions can be shared.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3562261
  Reported by: Joe Mason

- [Dave Reisner brought this change]

  examples: use do/while loop for multi examples
  
  It's conceivable that after the first time curl_multi_perform returns,
  the outvalue still_running will be 0, but work will have been done. This
  is shown by a workload of small, purely file:// based URLs. Ensure that
  we always read pending messages off the multi handle by forcing the
  while loop to run at least once.

- curl.h: fix comment to refer to current names
  
  CURLOPT_USE_SSL should be set to CURLUSESSL_* and nothing else in modern
  libcurl versions.

- ftpsget: simple example showing a FTPS fetch

- sftpget: SFTP is not "SSH FTP"

- [Armel Asselin brought this change]

  sftpget: example showing a simple SFTP download
  
  ... using SSH-agent

- curl_multi_perform.3: extended/clarified

- INSTALL.cmake: clarify some flaws/limits in the cmake build

- https.c example: spell check used define
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3559845
  Reported by: Olivier Berger

- configure: update the copyright years for the output

- [Nick Zitzmann brought this change]

  darwinssl: add TLS 1.1 and 1.2 support, replace deprecated functions
  
  In Mountain Lion, Apple added TLS 1.1 and 1.2, and deprecated a number
  of SecureTransport functions, some of which we were using. We now check
  to see if the replacement functions are present, and if so, we use them
  instead.  The old functions are still present for users of older
  cats. Also fixed a build warning that started to appear under Mountain
  Lion

- curl_easy_setopt: documented CURLSOCKTYPE_ACCEPT for SOCKOPTFUNCTION

- [Gokhan Sengun brought this change]

  ftp: active conn, place calling sockopt callback at the end of function
  
  Commit b91d29a28e170c16d65d956db79f2cd3a82372d2 introduces a bug and breaks Curl_closesocket function. sock_accepted flag for the second socket should be tagged as TRUE before the sockopt callback is called because in case the callback returns an error, Curl_closesocket function is going to call the - fclosesocket - callback for the accept()ed socket

- [Gokhan Sengun brought this change]

  ftp: active conn, allow application to set sockopt after accept() call
  
  For active FTP connections, applications may need setting the sockopt after accept() call returns successful. This fix gives a call to the callback registered with CURL_SOCKOPTFUNCTION option. Also a new sock type - CURLSOCKTYPE_ACCEPT - is added. This type is to be passed to application callbacks with - purpose - parameter. Applications may use this parameter to distinguish between socket types.

- configure: remove the --enable/disable-nonblocking options
  
  Removing this option as it currently only functions to lure people into
  wrongly using it and falsely believing that libcurl will work fine
  without using nonblocking sockets internally - which leads to hard to
  track or understand errors.

- [Ant Bryan brought this change]

  MANUAL review

- curl.1: shorten lines, avoid referring to libcurl instead of curl

- [Ant Bryan brought this change]

  curl.1: fix more consistent wording
  
  "If this option is used several times, the last one will be used."
  uniformity

- ssh: use the libssh2 agent API conditionally
  
  Commit e351972bc89aa4c brought in the ssh agent support but some uses of
  the libssh2 agent API was done unconditionally which wasn't good enough
  since that API hasn't always been present.

- white space fix: shorten long line
  
  ... to please checksrc.pl

Kamil Dudka (9 Aug 2012)
- docs: update the links to cipher-suites supported by NSS
  
  ... and make the list of cipher-suites in nss.c readable by humans.
  
  Bug: http://curl.haxx.se/mail/archive-2012-08/0016.html

- nss: do not print misleading NSS error codes

Daniel Stenberg (8 Aug 2012)
- RELEASE-NOTES: synced with 0774386b23
  
  5 more bug fixes, one change, 6 contributors

- [Armel Asselin brought this change]

  docs: mention CURLSSH_AUTH_AGENT

- [Armel Asselin brought this change]

  SSH: added agent based authentication
  
  CURLSSH_AUTH_AGENT is a new auth type for SSH

- bump version to 7.28.0
  
  I am about to merge the first patch that adds changes into the pending
  release, and thus we bump the minor number.

- RELEASE-NOTES: added missing link

- curl_version: fixed Value stored to 'len' is never read
  
  Fixed this (harmless) clang-analyzer warning. Also fixed the source
  indentation level.

- TODO-RELEASE: the (nil) bug is fixed

- add_next_timeout: minor restructure of code
  
  By reading the ->head pointer and using that instead of the ->size
  number to figure out if there's a list remaining we avoid the (false
  positive) clang-analyzer warning that we might dereference of a null
  pointer.

- verbose messages: fixed output of hostnames in re-used connections
  
  I suspect this is a regression introduced in commit 207cf150, included
  since 7.24.0.
  
  Avoid showing '(nil)' as hostname in verbose output by making sure the
  hostname fixup function is called early enough to set the pointers that
  are used for this. The name data is set again for each request even for
  re-used connections to handle multiple hostnames over the same
  connection (like with proxy) or that the casing etc of the host name is
  changed between requests (which has proven to be important at least once
  in the past).
  
  Test1011 was modified to use a redirect with a re-used a connection
  since it then showed the bug and now lo longer does. There's currently
  no easy way to have the test suite detect 'nil' texts in verbose ouputs
  so no tests will detect if this problem gets reintroduced.
  
  Bug: http://curl.haxx.se/mail/lib-2012-07/0111.html
  Reported by: Gisle Vanem

- [Nick Zitzmann brought this change]

  metalink: Un-broke the build when building --with-darwinssl

Guenter Knauf (8 Aug 2012)
- Fix some compiler warnings.

Daniel Stenberg (8 Aug 2012)
- TODO-RELEASE: two bugs fixed
  
  These are now addressed:
  
  323 - patch - select.c / Curl_socket_check() interrupted
  
  325 - Avoid leak of local device string when reusing connection

- curl.1: minor format fix for --data-ascii
  
  ... and removal of trailing whitespace on a single line

- [Ant Bryan brought this change]

  curl man page cleanup

- [Mike Crowe brought this change]

  Avoid leak of local device string when reusing connection
  
  Ensure that the copy of the CURLOPT_INTERFACE string is freed if we
  decide we can reuse an existing connection.

- Curl_socket_check: fix timeout return value for select users
  
  This is the same fix applied for the conditional code that uses select()
  that was already done for the poll specific code in commit
  b61e8b81f5038.

- [Maxime Larocque brought this change]

  Curl_socket_check: fix return code for timeout
  
  We found a problem with ftp transfer using libcurl (7.23 and 7.25)
  inside an application which is receiving unix signals (SIGUSR1,
  SIGUSR2...) almost continuously. (Linux 2.4, PowerPC, HAVE_POLL_FINE
  defined).
  
  Curl_socket_check() uses poll() to wait for the socket, and retries it
  when a signal is received (EINTR). However, if a signal is received and
  it also happens that the timeout has been reached, Curl_socket_check()
  returns -1 instead of 0 (indicating an error instead of a timeout).
  
  In our case, the result is an aborted connection even before the ftp
  banner is received from the server, and a return value of
  CURLE_OUT_OF_MEMORY from curl_easy_perform() (Curl_pp_multi_statemach(),
  in pingpong.c, actually returns OOM if Curl_socket_check() fails :-)
  Funny to debug on a system on which OOM is a possible cause).
  
  Bug: http://curl.haxx.se/mail/lib-2012-07/0122.html

- RELEASE-NOTES: synced with b4a558041fdf65c0

- TODO-RELEASE: fixed another bug
  
  bug #3544688 "crash during retry with libcurl and SFTP"

- WSAPoll: disabled on all windows builds
  
  Due to WSAPoll bugs, libcurl does not work as intended. When the cURL
  library is used to setup a connection to an incorrect port, normally the
  result is CURLE_COULDNT_CONNECT, /* 7 */, but due to the bug in WSAPoll,
  the result now is CURLE_OPERATION_TIMEDOUT, /* 28 - the timeout time was
  reached */.
  
  On August 1, Jan Koen Annot opened a case for this to Microsoft Premier
  Online (https://premier.microsoft.com/).  The support engineer handling
  the case wrote that the case description is quite clear.  He will try to
  reproduce the issue and then proceed with troubleshooting it.
  
  Reported by: Jan Koen Annot
  Bug: http://curl.haxx.se/mail/lib-2012-07/0310.html

- retry request: only access the HTTP data if in fact HTTP
  
  When figuring out if the data stream needs to be rewound when the
  request is to be resent, we must not access the HTTP struct unless the
  protocol used is indeed HTTP...
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3544688

- TODO: support DANE, we already support gnutls without gcrypt

- curl-config: parentheses fix
  
  Braces, not parentheses, should be used for shell variable names.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3551460
  Reported by: Edward Sheldrake

- VC build: add define for openssl
  
  This fixes a build failure of lib/ssluse.c.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3552997

- TODO-RELEASE: two bugs fixed!

- globbing: fix segfault when >9 globs were used
  
  Stupid lack of range checks caused the code to overwrite local variables
  after glob number nine. Added checks now.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3546353

- [Joe Mason brought this change]

  sws: close sockets properly
  
  Fix a bug where closed sockets (fd -1) were left in the all_sockets
  list, because of missing parens in a pointer arithmetic expression
  
  Reenable the tests that were locking up due to this bug.

- [Joe Mason brought this change]

  Remove debug logs that were accidentally checked in

- [Joe Mason brought this change]

  Use select in sws, which has better cross-platform support than poll

- [Joe Mason brought this change]

  Use cross-platform curlx_nonblock instead of fcntl in sws

- operate: fix clang-analyzer warnings for never read variables
  
  Two separate "Value stored to 'XXX' is never read" warnings

- operate: fix clang-analyzer warning
  
  Value stored to 'separator' is never read

- metalink: change code order to build with gnutls-nettle
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3554668
  Reported by: Anthony G. Basile

- gtls: fix build failure by including nettle-specific headers
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3554668
  Reported by: Anthony G. Basile

Guenter Knauf (6 Aug 2012)
- Fixed compiler warning - argument is type long.

Daniel Stenberg (6 Aug 2012)
- DISABLED: disable the new tests that do NTLM
  
  The tests 2025, 2028 and 2031 don't work for me so I'll have them
  disabled for now until we solve the problem.

Joe Mason (3 Aug 2012)
- Add tests of auth retries

- Cleanup handshake after clean NTLM failure

- Zero out auth structs before transfer

- Add a polling loop in main to read from more than one socket at once. Add the O_NONBLOCK and
  SO_KEEPALIVE flag to all sockets. Note that several loops which used to continue on a return value
  of 0 (theoretical since 0 would never be returned without O_NONBLOCK) now break on 0 so that they
  won't continue reading until after poll is called again.

- Change return values of get_request, accept_connection and service_connection to add a return code
  for non-blocking sockets: now -1 means error or connection finished, 1 means data was read, and 0
  means there is no data available now so need to wait for poll (new return value)

- Hoist the loop out of get_request, and make sure that it can be reentered when a request is
  half-finished.
  
  Note the the req struct used to be re-initialized AFTER reading pipeline data, so now that we
  initialize it from the caller we must be careful not to overwrite the pipeline data.
  
  Also we now need to handle the case where the buffer is already full when get_request is called -
  previously this never happened as it was always called with an empty buffer and looped until done.
  
  Now get_request is called in a loop, so the next step is to run the loop on a socket only when poll
  signals it is readable.

- Move blocks of code from the sws main loop into their own functions for easier refactoring later.
  The next step will be to call the correct function after a poll, rather than looping unconditionally

- Remove the --fork option of sws, since it makes refactoring to use poll more complicated and should
  be redundant once we poll

Kamil Dudka (30 Jul 2012)
- file: use fdopen() for uploaded files if available
  
  It eliminates noisy events when using inotify and fixes a TOCTOU issue.
  
  Bug: https://bugzilla.redhat.com/844385

Guenter Knauf (29 Jul 2012)
- Added DWANT_IDN_PROTOTYPES define for MSVC too.
  
  Discussion on the list: http://curl.haxx.se/mail/lib-2012-07/0271.html

- Added Win32 problems.

- Added hint to read docs/INSTALL too.

- Added new file to distro.

Steve Holme (28 Jul 2012)
- TODO: Updated after 7.27.0 release
  
  Removed APOP and SASL authentication from the POP3 section and metalink
  support from the client section as these features were implemented in
  this release.
  
  Moved adding gssapi to SASL into it's own section rather than repeat it
  for each protocol.

Daniel Stenberg (28 Jul 2012)
- TODO-RELEASE: updated after 7.27.0 release

- THANKS: 12 new contributors from the 7.27.0 release

- version bump: start towards next release
  
  Let's call it 7.27.1 for now, but it it probably going to become 7.28.0
  when released.

Version 7.27.0 (27 Jul 2012)

Guenter Knauf (27 Jul 2012)
- Fixed compiler warning 'unused parameter'.

- Added prototypes to kill compiler warning.

- Added --with-winidn to configure.
  
  This needs another look from the configure experts. I tested that
  it works so far with MinGW64 cross-compiler; libcurl builds and
  links fine, but curl not yet ...

Daniel Stenberg (27 Jul 2012)
- [Ant Bryan brought this change]

  Update man page info on --metalink and typo.

- RELEASE-NOTES: remove mentioned of bug never in a release
  
  The --silent bug came with 7561a0fc834c435 which was never in a release.
  Pointed out by Kamil Dudka

- RELEASE-NOTES: synced with 33b815e894fb
  
  4 more bugfixes, 3 more contributors

Guenter Knauf (26 Jul 2012)
- Changed Windows IDN text to 'WinIDN'.
  
  Synced the output to the same short form as we now use for
  Windows SSL (WinSSL).

Daniel Stenberg (25 Jul 2012)
- [Nick Zitzmann brought this change]

  darwinssl: fixed freeze involving the multi interface
  
  Previously the curl_multi interface would freeze if darwinssl was
  enabled and at least one of the handles tried to connect to a Web site
  using HTTPS. Removed the "wouldblock" state darwinssl was using because
  I figured out a solution for our "would block but in which direction?"
  dilemma.

Guenter Knauf (25 Jul 2012)
- Added support for tls-srp to MinGW builds.

Daniel Stenberg (24 Jul 2012)
- curl_easy_setopt: fix typo
  
  Reported by: Santhana Todatry

- keepalive: multiply value for OS-specific units
  
  DragonFly uses milliseconds, while our API and Linux use full seconds.
  
  Reported by: John Marino
  Bug: http://curl.haxx.se/bug/view.cgi?id=3546257

Kamil Dudka (22 Jul 2012)
- http: print reason phrase from HTTP status line on error
  
  Bug: https://bugzilla.redhat.com/676596

- tool_operate: fix misplaced initialization of orig_noprogress
  
  ... and orig_isatty which caused --silent to be entirely ignored in case
  the standard output was redirected to a file!

Daniel Stenberg (21 Jul 2012)
- [Anton Yabchinskiy brought this change]

  Client's "qop" value should not be quoted (RFC2617, section 3.2.2).

Guenter Knauf (21 Jul 2012)
- Fixed typo.

Daniel Stenberg (20 Jul 2012)
- make: make distclean work again
  
  The clean-local hook needed some polish to make sure make distclean
  works. Added comment describing why.

- test Makefile: only feature 'unit' once in the list of dirs

Dan Fandrich (20 Jul 2012)
- Fixed some typos in documentation

Guenter Knauf (20 Jul 2012)
- Fixed CR issue with Win32 version on MSYS.
  
  Previous fix didnt work on Linux ...

- Fixed CR issue with Win32 version on MSYS.

- Fixed MSYS <-> Windows path convertion.
  
  Replaced the Windows real path from mount hack with a more
  reliable and simpler hack: the MSYS shell has a builtin pwd
  which understands a -W option which does convertion to Windows
  paths. Tested and confirmed that this works on all MSYS versions
  I have back to a 3 year old one.

- Follow-up fix to detect SSL libs with MinGW.
  
  1) the check for winssl needs to come before nss check
  2) the SSL checks must begin with a new if or else we will
  never find any SSL lib with MinGW.

- Tell git to not convert configure-related files.

- Trial to teach runtests.pl about WinSSL.

- Fixed warning 'uninitialized value in numeric gt'.
  
  This is a MSYS/MinGW-only warning; full warning text is:
  Use of uninitialized value in numeric gt (>) at ../../curl/tests/runtests.pl line 2227.

Daniel Stenberg (15 Jul 2012)
- RELEASE-NOTES: synced with 9d11716933616
  
  Fixed 6 bugs, added 3 contributors

- multi_runsingle: added precaution against easy_conn NULL pointer
  
  In many states the easy_conn pointer is referenced and just assumed to
  be working. This is an added extra check since analyzing indicates
  there's a risk we can end up in these states with a NULL pointer there.

- getparam: fix the GetStr() macro
  
  It should return PARAM_NO_MEM if the strdup fails. Spotted by
  clang-analyzer

Guenter Knauf (15 Jul 2012)
- Tell git to not convert configure-related files.

Daniel Stenberg (13 Jul 2012)
- parse_proxy: remove dead assignment
  
  Spotted by clang-analyzer

- ftp_do_more: add missing check of return code
  
  Spotted by clang-analyzer. The return code was never checked, just
  stored.

- getinfo: use va_end and cut off Curl_ from static funcs
  
  va_end() needs to be used after va_start() and we don't normally use
  Curl_ prefixes for purely static functions.

- [Philip Craig brought this change]

  Split up Curl_getinfo
  
  This avoids false positives from clang's scan-build.

Guenter Knauf (12 Jul 2012)
- Added error checking for curl_global_init().

- Added curl_global_* functions.

- Minor fixes to MinGW makefiles.

Daniel Stenberg (12 Jul 2012)
- docs: mention CURL_GLOBAL_DEFAULT

Guenter Knauf (12 Jul 2012)
- Added curl_global_* functions.

Daniel Stenberg (12 Jul 2012)
- tests: verify the stricter numeric option parser
  
  Test 1409 and 1410 verifies the stricter numeric option parser
  introduced the other day in commit f2b6ebed7b.

- SWS: use of uninitialized memory fix
  
  I made "connmon" not get initialized properly before use, and I use the
  big hammer and make sure we always clear the entire struct to avoid any
  problem like this in the future.

- test48: verify that HEAD doesn't close extra
  
  Two commits ago, we fixed a bug where the connction would be closed
  prematurely after a HEAD. Now I added connection-monitor to test 48 and
  added a second HEAD and make sure that both are sent over the same
  connection.
  
  This triggered a failure before the bug fix and now works. Will help us
  avoid a future regression of this kind.

- connection-monitor: always log disconnect when enabled
  
  This makes verifying easier and makes us more sure curl closes the
  connection only at the correct point in time. Adjusted test 206 and 1008
  accordingly and updated the docs for it.

- HEAD: don't force-close after response-headers
  
  A HEAD response has no body length and gets the headers like the
  corresponding GET would so it should not get closed after the response
  based on the same rules. This mistake caused connections that did HEAD
  to get closed too often without a valid reason.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3542731
  Reported by: Eelco Dolstra

Guenter Knauf (12 Jul 2012)
- Removed trailing empty strings from awk script.

- Cleaned up version awk script.

- Added project copyright header.

- Removed libcurl.imp from Makefile.am.
  
  Updated .gitignore for NetWare created files.

- Added missing dependency to export list.

- Fixed export list path.

- Changed NetWare build to generate export list.

- Added pointer to FAQ for linkage errors.

- Small NetWare makefile tweak.

- Changed MinGW makefiles to use WINSSL now.

Daniel Stenberg (10 Jul 2012)
- test231: fix wrong -C use!

- cmdline: parse numerical options stricter
  
  1 - str2offset() no longer accepts negative numbers since offsets are by
  nature positive.
  
  2 - introduced str2unum() for the command line parser that accepts
  numericals which are not supposed to be negative, so that it will
  properly complain on apparent bad uses and mistakes.
  
  Bug: http://curl.haxx.se/mail/archive-2012-07/0013.html

- docs: switch to proper UTF-8 for text file encoding

Yang Tse (9 Jul 2012)
- Make Curl_schannel_version() return "WinSSL"
  
  Modification based on voting result:
  
  http://curl.haxx.se/mail/lib-2012-07/0104.html

Daniel Stenberg (9 Jul 2012)
- test 46: use different path lengths to get reliable sort order
  
  Since the order of the cookies is sorted by the length of the paths,
  having them on the same path length will make the test depend on what
  order the qsort() implementation will put them. As seen in the
  windows/msys output posted by Guenter in this posting:
  http://curl.haxx.se/mail/lib-2012-07/0105.html

- cookie: fixed typo in comment

- [Christian Hägele brought this change]

  https_getsock: provided for schannel backend as well
  
  The function https_getsock was only implemented properly when USE_SSLEAY
  or USE_GNUTLS is defined, but it is also necessary for USE_SCHANNEL.
  
  The problem occurs when Curl_read_plain or Curl_write_plain returns
  CURLE_AGAIN. In that case CURL_OK is returned to the multi-interface an
  the used socket is set to state CURL_POLL_REMOVE and the easy-state is
  set to CURLM_STATE_PROTOCONNECT. This is fine, because later the socket
  should be set to CURL_POLL_IN or CURL_POLL_OUT via multi_getsock. That's
  where https_getsock is called and doesn't return any sockets.

- RELEASE-NOTES: added a URL reference to cookie docs

Guenter Knauf (8 Jul 2012)
- Removed obsolete include path to project root.

Daniel Stenberg (8 Jul 2012)
- TODO-RELEASE: issue 316 NTLM over proxy is fixed

- [Nick Zitzmann brought this change]

  darwinssl: don't use arc4random_buf
  
  Re-wrote Curl_darwinssl_random() to not use arc4random_buf() because the
  function is not available prior to iOS 4.3 and OS X 10.7.

- KNOWN_BUGS: #80 Curl doesn't recognize certs in DER format

- KNOWN_BUGS: #79 - any RCPT TO failure makes and error

Marc Hoersken (8 Jul 2012)
- winbuild: Aligned BUILD.WINDOWS.txt and Makefile.vc usage help

- winbuild: Make USE_WINSSL depend on USE_SSPI
  
  Since WinSSL cannot be build without SSPI being enabled,
  USE_WINSSL now defaults to the value of USE_SSPI.
  
  The makefile does now raise an error if WinSSL is enabled
  while SSPI is disabled.

- winbuild: Aligned USE_SSPI with other USE_x defines
  
  Renamed external parameter USE_SSPI = yes/no to ENABLE_SSPI = yes/no.
  Backwards compatible change: USE_SSPI can still be passed as external
  parameter with yes/no value as long as ENABLE_SSPI is not given.
  
  USE_x defines are passed around with true/false values internally,
  USE_SSPI is now aligned to this approach, but still accepts external
  values yes/no being passed, just like the other defines.

- winbuild: Clean up formatting and variable naming
  
  - Changed space usage to line up with the whole file
  - Renamed CFLAGS_SSPI/IPV6 to SSPI/IPV6_CFLAGS to be
    consistent with the other CFLAGS_x variables
  - Make use of existing CFLAGS_IPV6 (previously IPV6_CFLAGS)
    instead of appending directly to CFLAGS

Daniel Stenberg (7 Jul 2012)
- [Nick Zitzmann brought this change]

  darwinssl: output cipher with text, remove SNI warning
  
  The code was printing a warning when SNI was set up successfully. Oops.
  
  Printing the cipher number in verbose mode was something only TLS/SSL
  programmers might understand, so I had it print the name of the cipher,
  just like in the OpenSSL code. That'll be at least a little bit easier
  to understand. The SecureTransport API doesn't have a method of getting
  a string from a cipher like OpenSSL does, so I had to generate the
  strings manually.

- RELEASE-NOTES: synced with 5a99bce07d

- KNOWN_BUGS: NTLM with unicode works with schannel/winssl!
  
  Bug #75 updated with additional info, still remains for builds with
  other backends.

- code police: narrow source to < 80 columns

Yang Tse (5 Jul 2012)
- unicode NTLM SSPI: cleanup follow-up

- unicode NTLM SSPI: cleanup
  
  Reduce the number of #ifdef UNICODE directives used in source files.

Daniel Stenberg (5 Jul 2012)
- tests: use connection-monitor and verify results
  
  Test 1008 and 206 don't show the disconnect since it happens when SWS
  awaits a new request, but 503 does and so the verify section needs that
  string added.

- http-proxy: keep CONNECT connections alive (for NTLM)
  
  When doing CONNECT requests, libcurl must make sure the connection is
  alive as much as possible. NTLM requires it and it is generally good for
  other cases as well.
  
  NTLM over CONNECT requests has been broken since this regression I
  introduced in my CONNECT cleanup commits that started with 41b02378342,
  included since 7.25.0.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3538625
  Reported by: Marcel Raad

- sws: support <servercmd> for CONNECT requests
  
  I moved out the servercmd parsing into a its own function called
  parse_servercmd() and made sure it gets used also when the test number
  is extracted from CONNECT requests. It turned out sws didn't do that
  previously!

- FILEFORMAT: provided a full description of connection-monitor

- lib503: enable verbose to ease debugging this

- sws: add 'connection-monitor' command support
  
  Using this, the server will output in the protocol log when the
  connection gets disconnected and thus we will verify correctly in the
  test cases that the connection doesn't get closed prematurely. This is
  important for example NTLM to work.
  
  Documentation added to FILEFORMAT, test 503 updated to use this.

Guenter Knauf (4 Jul 2012)
- Removed non-used variable.

- Added error checking for samples.

- Renamed vars to avoid shadow global declaration.

Daniel Stenberg (3 Jul 2012)
- docs: clarify how to start with curl_multi_socket_action
  
  Mention the CURL_SOCKET_TIMEOUT argument in step 6 of the typical
  application.

Guenter Knauf (3 Jul 2012)
- Moved some patterns to subfolder's .gitignore.

- Merge branch 'master' of ssh://github.com/bagder/curl

- MinGW makefile tweaks for running from sh.
  
  Added function macros to make path converting easier.
  Added CROSSPREFIX to all compile tools.

Yang Tse (3 Jul 2012)
- [Marc Hoersken brought this change]

  curl_ntlm_msgs.c: Removed unused variable passwd

Guenter Knauf (3 Jul 2012)
- Added files generated by mingw32, eclipse and VC.
  
  Posted by Marc Hoersken.

Daniel Stenberg (3 Jul 2012)
- cookies: change the URL in the cookie jar file header

- HTTP-COOKIES: clarified and modified layout

- HTTP-COOKIES: use the FAQ document layout

- HTTP-COOKIES: added cookie documentation

Yang Tse (3 Jul 2012)
- curl_ntlm_msgs.c: include <tchar.h> for prototypes

- [Neil Bowers brought this change]

  testcurl.pl: fix missing semicolon

Daniel Stenberg (2 Jul 2012)
- [Christian Hägele brought this change]

  unicode NTLM SSPI: heap corruption fixed
  
  When compiling libcurl with UNICODE defined and using unicode characters
  in username.

Yang Tse (2 Jul 2012)
- testcurl.pl: allow non in-tree c-ares enabled autobuild

- configure.ac: verify that libmetalink is new enough
  
  Enabling test2017 to test2022.

- [Tatsuhiro Tsujikawa brought this change]

  curl: Added runtime version check for libmetalink

- [Tatsuhiro Tsujikawa brought this change]

  Include metalink/metalink.h for libmetalink functions

Daniel Stenberg (2 Jul 2012)
- errors: CURLM_CALL_MULTI_PERFORM is not returned anymore

- release: cleaned up plans for this and coming release

Yang Tse (29 Jun 2012)
- curl-compilers.m4: remove -Wstrict-aliasing=3 from clang
  
  Currently it is unknown if there is any version of clang that
  actually supports -Wstrict-aliasing. What is known is that there
  are several that don't support it.

- test2017 to test2022: more metalink tests
  
  With this commit, checks done in previous test2017 are now done in test2018.
  
  Whole range test2017 to test2022 DISABLED until configure is capable of
  requiring a new-enough metalink library.
  
  Don't try these without mentioned check in place!

- test2005 to test2016: improve failure detection

- lib582.c: fix conversion warning

- nss.c: #include warnless.h for curlx_uztosi and curlx_uztoui prototypes

- [Marc Hoersken brought this change]

  nss.c: Fixed size_t conversion warnings

- sslgen.c: cleanup temporary compile-time SSL-backend check

Daniel Stenberg (28 Jun 2012)
- schannel: provide two additional (dummy) API defines

Yang Tse (28 Jun 2012)
- [Tatsuhiro Tsujikawa brought this change]

  Metalink: message updates
  
  Print "parsing (...) OK" only when no warnings are generated.  If
  no file is found in Metalink, treat it FAILED.
  
  If no digest is provided, print WARNING in parse_metalink().
  Also print validating FAILED after download.
  
  These changes make tests 2012 to 2016 pass.

Daniel Stenberg (27 Jun 2012)
- sslgen: avoid compiler error in SSPI builds

Yang Tse (27 Jun 2012)
- ssluse.c: fix compiler warning: conversion to 'int' from 'size_t'
  
  Reported by Tatsuhiro Tsujikawa
  
  http://curl.haxx.se/mail/lib-2012-06/0371.html

- sslgen.c: add compile-time check for SSL-backend completeness

- build: add our standard includes to curl_darwinssl.c and curl_multibyte.c

- build: add curl_schannel and curl_darwinssl files to other build systems

- tests: add five more Metalink test cases

- tests: update Metalink message format

- [Tatsuhiro Tsujikawa brought this change]

  Metalink: updated message format

- [Nick Zitzmann brought this change]

  DarwinSSL: allow using NTLM authentication
  
  Allow NTLM authentication when building using SecureTransport (Darwin) for SSL.
  
  This uses CommonCrypto, a cryptography library that ships with all versions of
  iOS and Mac OS X. It's like OpenSSL's libcrypto, except that it's missing a few
  less-common cyphers and doesn't have a big number data structure.

- curl_darwinssl.h: add newline at end of file

Daniel Stenberg (26 Jun 2012)
- ossl_seed: remove leftover RAND_screen check
  
  Before commit 2dded8fedba (dec 2010) there was logic that used
  RAND_screen() at times and now I remove the leftover #ifdef check for
  it.
  
  The seeding code that uses Curl_FormBoundary() in ossl_seed() is dubious
  to keep since it hardly increases randomness but I fear I'll break
  something if I remove it now...

Yang Tse (26 Jun 2012)
- [Nick Zitzmann brought this change]

  DarwinSSL: several adjustments
  
  - Renamed st_ function prefix to darwinssl_
  - Renamed Curl_st_ function prefix to Curl_darwinssl_
  - Moved the duplicated ssl_connect_done out of the #ifdef in lib/urldata.h
  - Fixed a teensy little bug that made non-blocking connection attempts block
  - Made it so that it builds cleanly against the iOS 5.1 SDK

- curl-compilers.m4: -Wstrict-aliasing=3 for warning enabled gcc and clang builds

- [Marc Hoersken brought this change]

  sockaddr.h: Fixed dereferencing pointer breakin strict-aliasing
  
  Fixed warning: dereferencing pointer does break strict-aliasing rules
  by using a union inside the struct Curl_sockaddr_storage declaration.

Daniel Stenberg (26 Jun 2012)
- SSL cleanup: use crypto functions through the sslgen layer
  
  curl_ntlm_msgs.c would previously use an #ifdef maze and direct
  SSL-library calls instead of using the SSL layer we have for this
  purpose.

- [Nick Zitzmann brought this change]

  darwinssl: add support for native Mac OS X/iOS SSL

- RELEASE-NOTES: link to more metalink info

- RELEASE-NOTES: synced with d025af9bb576

Yang Tse (25 Jun 2012)
- curl_schannel.c: Remove redundant NULL assignments following Curl_safefree()

- [Marc Hoersken brought this change]

  curl_schannel.c: Replace free() with Curl_safefree()

- [Tatsuhiro Tsujikawa brought this change]

  curl.1: Updated Metalink description in man page
  
  Documented that --include will be ignored if both --metalink
  and --include are specified.
  Also documented that a Metalink file in the local file system
  cannot be used if FILE protocol is disabled.

Steve Holme (24 Jun 2012)
- DOCS: Added clarification to CURLOPT_CUSTOMREQUEST for the POP3 protocol
  
  Bug: http://curl.haxx.se/mail/lib-2012-06/0302.html
  Reported by: Nagai H

- smtp: Corrected result code for MAIL, RCPT and DATA commands
  
  Bug: http://curl.haxx.se/mail/lib-2012-06/0094.html
  Reported by: Dan

Daniel Stenberg (24 Jun 2012)
- [Ghennadi Procopciuc brought this change]

  test: Added test HTTP receive cookies over IPv6

Yang Tse (22 Jun 2012)
- tests: add another Metalink test case

- [Tatsuhiro Tsujikawa brought this change]

  tests: Enable test2010 and fixed hash value

- [Tatsuhiro Tsujikawa brought this change]

  Metalink: ignore --include if --metalink is used.
  
  Including headers in response body will break Metalink XML parser.
  If it is included in the file described in Metalink XML, hash check
  will fail. Therefore, --include should be ignored if --metalink is
  used.

- tests: add six Metalink test cases

- test 2005: add verification of hash checking outcome

- getpart.pm: remove misleading comment

- [Tatsuhiro Tsujikawa brought this change]

  curl: Prefixed all Metalink related messages with "Metalink: "

- [Tatsuhiro Tsujikawa brought this change]

  tests: Added Metalink test case # 2005

- [Tatsuhiro Tsujikawa brought this change]

  curl: Restore noprogress and isatty config values.
  
  The noprogress and isatty in Configurable are global, in a sense
  that they persist in one curl invocation. Currently once one
  download writes its response data to tty, they are set to FALSE
  and they are not restored on successive downloads.  This change
  first backups the current noprogress and isatty, and restores
  them when download does not write its data to tty.

- [Tatsuhiro Tsujikawa brought this change]

  curl: Made --metalink option toggle Metalink functionality
  
  In this change, --metalink option no longer takes argument.  If
  it is specified, given URIs are processed as Metalink XML file.
  If given URIs are remote (e.g., http URI), curl downloads it
  first. Regardless URI is local file (e.g., file URI scheme) or
  remote, Metalink XML file is not written to local file system and
  the received data is fed into Metalink XML parser directly.  This
  means with --metalink option, filename related options like -O
  and -o are ignored.
  
  Usage examples:
  
  $ curl --metalink http://example.org/foo.metalink
  
  This will download foo.metalink and parse it and then download
  the URI described there.
  
  $ curl --metalink file://foo.metalink
  
  This will parse local file foo.metalink and then download the URI
  described there.

- [Tatsuhiro Tsujikawa brought this change]

  curl: Refactored metalink_checksum
  
  When creating metalink_checksum from metalink_checksum_t, first
  check hex digest is valid for the given hash function.  We do
  this check in the order of digest_aliases so that first good
  match will be chosen (strongest hash function available).  As a
  result, the metalinkfile now only contains at most one
  metalink_checksum because other entries are just redundant.

- [Gisle Vanem brought this change]

  tool_doswin.c: fix djgpp function _use_lfn() used without a prototype
  
  http://curl.haxx.se/mail/archive-2012-06/0028.html

- build: fix RESOURCE bug in lib/Makefile.vc*
  
  Removed two, not intended to exist, RESOURCE declarations.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3535977
  
  And sorted configuration hunks to reflect same internal order
  as the one shown in the usage message.

Daniel Stenberg (20 Jun 2012)
- [Marc Hoersken brought this change]

  schannel: Implement new buffer size strategy
  
  Increase decrypted and encrypted cache buffers using limitted
  doubling strategy. More information on the mailinglist:
  http://curl.haxx.se/mail/lib-2012-06/0255.html
  
  It updates the two remaining reallocations that have already been there
  and fixes the other one to use the same "do we need to increase the
  buffer"-condition as the other two.  CURL_SCHANNEL_BUFFER_STEP_SIZE was
  renamed to CURL_SCHANNEL_BUFFER_FREE_SIZE since that is actually what it
  is now.  Since we don't know how much more data we are going to read
  during the handshake, CURL_SCHANNEL_BUFFER_FREE_SIZE is used as the
  minimum free space required in the buffer for the next operation.
  CURL_SCHANNEL_BUFFER_STEP_SIZE was used for that before, too, but since
  we don't have a step size now, the define was renamed.

Yang Tse (20 Jun 2012)
- schannel SSL: fix compiler warning

- [Mark Salisbury brought this change]

  schannel SSL: fix for renegotiate problem
  
  In schannel_connect_step2() doread should be initialized based
  on connssl->connecting_state.

- [Tatsuhiro Tsujikawa brought this change]

  runtests.pl: make it support metalink feature

- getpart.pm: make test definition section/part parser more robust
  
  Test definition section parts which needed to include xml-lingo as contents
  of that part required that the xml-blurb was written as a single line. Now the
  xml-data inside the part can be written multiline making it more readable.
  
  Tested with <client><file> part which is written to disk before <command> runs.

Daniel Stenberg (20 Jun 2012)
- schannel_connect_step2: checksrc whitespace fix

Yang Tse (20 Jun 2012)
- [Mark Salisbury brought this change]

  schannel SSL: changes in schannel_connect_step2
  
  Process extra data buffer before returning from schannel_connect_step2.
  Without this change I've seen WinCE hang when schannel_connect_step2
  returns and calls Curl_socket_ready.
  
  If the encrypted handshake does not fit in the intial buffer (seen with
  large certificate chain), increasing the encrypted data buffer is necessary.
  
  Fixed warning in curl_schannel.c line 1215.

- [Mark Salisbury brought this change]

  config-win32ce.h: WinCE config adjustment
  
  process.h is not present on WinCE

- [Mark Salisbury brought this change]

  schannel SSL: Made send method handle unexpected cases better
  
  Implemented timeout loop in schannel_send while sending data.  This
  is as close as I think we can get to write buffering; I put a big
  comment in to explain my thinking.
  
  With some committer adjustments

Daniel Stenberg (19 Jun 2012)
- [Marc Hoersken brought this change]

  curl_schannel.c: Avoid unnecessary realloc calls to reduce buffer size

Yang Tse (19 Jun 2012)
- [Mark Salisbury brought this change]

  schannel SSL: Use standard Curl read/write methods
  
  Replaced calls to swrite with Curl_write_plain and calls to sread
  with Curl_read_plain.
  
  With some committer adjustments

- schannel SSL: make wording of some trace messages better reflect reality

Daniel Stenberg (19 Jun 2012)
- [Marc Hoersken brought this change]

  curl_schannel.h: Use BUFSIZE as the initial buffer size if available
  
  Make the Schannel implementation use libcurl's default buffer size
  for the initial received encrypted and decrypted data cache buffers.
  The implementation still needs to handle more data since more data
  might have already been received or decrypted during the handshake
  or a read operation which needs to be cached for the next read.

Guenter Knauf (19 Jun 2012)
- Fixed NetWare makefile broken from last commit.

Yang Tse (19 Jun 2012)
- [Mark Salisbury brought this change]

  schannel SSL: Implemented SSL shutdown
  
  curl_schannel.c - implemented graceful SSL shutdown.  If we fail to
  shutdown the connection gracefully, I've seen schannel try to use a
  session ID for future connects and the server aborts the connection
  during the handshake.

- [Mark Salisbury brought this change]

  schannel SSL: certificate validation on WinCE
  
  curl_schannel.c - auto certificate validation doesn't seem to work
  right on CE.  I added a method to perform the certificate validation
  which uses CertGetCertificateChain and manually handles the result.

- [Mark Salisbury brought this change]

  schannel SSL: Added helper methods to simplify code
  
  Added helper methods InitSecBuffer() and InitSecBufferDesc() to make it
  easier to set up SecBuffer & SecBufferDesc structs.

Guenter Knauf (18 Jun 2012)
- Some more NetWare makefile tweaks for metalink.

Yang Tse (18 Jun 2012)
- tool_cb_see.c: WinCE build adjustment

- [Mark Salisbury brought this change]

  setup.h: WinCE build adjustment

- [Mark Salisbury brought this change]

  ftplistparser.c: do not compile if FTP protocol is not enabled

- Win32: downplay MS bazillion type synonyms game
  
  Avoid usage of some MS type synonyms to allow compilation with
  compiler headers that don't define these, using simpler synonyms.

Daniel Stenberg (15 Jun 2012)
- Curl_rtsp_parseheader: avoid useless malloc/free
  
  Coverity actually pointed out flawed logic in the previous call to
  Curl_strntoupper() where the code used sizeof() of a pointer to pass in
  a size argument. That code still worked since it only needed to
  uppercase 4 letters. Still, the entire malloc/uppercase/free sequence
  was pointless since the code has already matched the string once in the
  condition that starts the block of code.

- curl_share_setopt: use va_end()
  
  As spotted by Coverity, va_end() was not used previously. To make it
  used I took away a bunch of return statements and made them into
  assignments instead.

Yang Tse (15 Jun 2012)
- SSPI related code: Unicode support for WinCE - kill compiler warnings

- [Mark Salisbury brought this change]

  SSPI related code: Unicode support for WinCE - commit 46480bb9 follow-up

- build: add curl_multibyte files to build systems

- [Mark Salisbury brought this change]

  SSPI related code: Unicode support for WinCE
  
  SSPI related code now compiles with ANSI and WCHAR versions of security
  methods (WinCE requires WCHAR versions of methods).
  
  Pulled UTF8 to WCHAR conversion methods out of idn_win32.c into their own file.
  
  curl_sasl.c - include curl_memory.h to use correct memory functions.
  
  getenv.c and telnet.c - WinCE compatibility fix
  
  With some committer adjustments

Guenter Knauf (15 Jun 2012)
- Fixed typo.

Yang Tse (14 Jun 2012)
- winbuild/MakefileBuild.vc: convert line endings to DOS style
  
  As per request on mailing list: http://curl.haxx.se/mail/lib-2012-06/0222.html

- [Marc Hoersken brought this change]

  winbuild: Allow SSPI build with or without Schannel
  
  The changes introduced in commit 2bfa57bc32 are not enough
  to make it actually possible to use the USE_WINSSL option.
  Makefile.vc was not updated and the configuration name which is
  used in the build path did not match between both build files.
  
  This patch fixes those issues and introduces the following changes:
  
  - Replaced the -schannel name with -winssl in order to be consistent
  with the other options
  - Added ENABLE_WINSSL option to winbuild/Makefile.vc (default yes)
  - Changed winbuild/MakefileBuild.vc to set USE_WINSSL to true if
  USE_SSL is false and USE_WINSSL was not specified as a parameter
  - Separated WINSSL handling from SSPI handling to be consistent with
  the other options and their corresponding code path

- curl.1: 7.27.0 seems next release

- schannel: fix printf-style format strings

- Fix bad failf() and info() usage
  
  Calls to failf() are not supposed to provide trailing newline.
  Calls to infof() must provide trailing newline.
  
  Fixed 30 or so strings.

- schannel: fix unused parameter warnings

- schannel: fix comparisons between signed and unsigned

- schannel: fix discarding qualifier from pointer type

- schannel: fix shadowing of global declarations

- schannel: fix Curl_schannel_init() and Curl_schannel_cleanup() declarations

- [Gisle Vanem brought this change]

  urldata.h: fix cyassl/openssl/ssl.h build clash with wincrypt.h
  
  Building with CyaSSL failed compilation. Reason being that OCSP_REQUEST and
  OCSP_RESPONSE are enum values in CyaSSL and defines in <wincrypt.h> included
  via <winldap.h> in ldap.c.
  
  http://curl.haxx.se/mail/lib-2012-06/0196.html

- MakefileBuild.vc: Allow building without SSL
  
  In order to use Windows native SSL support define 'USE_WINSSL'

- configure: new option --with-winssl
  
  This option may be used to build curl/libcurl using SSL/TLS support provided
  by MS windows system libraries. Option is mutually exclusive with any other
  SSL library. Default value is --without-winssl.
  
  --with-winssl option implies --with-sspi option.
  
  Option meaningful only for Windows builds.

Guenter Knauf (13 Jun 2012)
- Changed Schannel string to SSL-Windows-native.
  
  This is more descriptive for the user who might
  not even know what schannnel is at all.

Yang Tse (13 Jun 2012)
- schannel: remove version number and identify its use with 'schannel' literal
  
  Version number is removed in order to make this info consistent with
  how we do it with other MS and Linux system libraries for which we don't
  provide this info.
  
  Identifier changed from 'WinSSPI' to 'schannel' given that this is the
  actual provider of the SSL/TLS support. libcurl can still be built with
  SSPI and without SCHANNEL support.

Daniel Stenberg (12 Jun 2012)
- singlesocket: remove dead code
  
  No need to check if 'entry' is non-NULL in a spot where it is already checked
  and guaranteed to be non-NULL.
  
  (Spotted by a Coverity scan)

- netrc: remove dead code
  
  Remove two states from the enum and the corresponding code for them as
  these states were never reached or used.
  
  (Spotted by a Coverity scan)

Yang Tse (12 Jun 2012)
- Revert "connect.c/ftp.c: Fixed dereferencing pointer breakin strict-aliasing"
  
  This reverts commit 9c94236e6cc078a0dc5a78b6e2fefc1403e5375e.
  
  It didn't server its purpose, so lets go back to long-time working code.

- socks_sspi.c: further cleanup

- [Marc Hoersken brought this change]

  socks_sspi.c: Clean up and removal of obsolete minor status
  
  Removed obsolete minor status variable and parameter of status function
  which was never used or set at all. Also Curl_sspi_strerror does support
  only one status and there is no need for a second sub status.

Guenter Knauf (12 Jun 2012)
- Removed trailing whitespaces.

Yang Tse (12 Jun 2012)
- strerror.c: make Curl_sspi_strerror() always return code for errors

- curl_sspi.h: provide sspi status definitions missing in old headers

- sspi: make Curl_sspi_strerror() libcurl's sspi status code string function

- sspi: make Curl_sspi_strerror() libcurl's sspi status code string function

Daniel Stenberg (11 Jun 2012)
- Revert: 634f7cfee40d4658 partially
  
  Make sure CURL_VERSION_SSPI is present and works as in previous releases
  for ABI and API compatibility reasons.

- checksrc: shorten a few lines to comply

- cleanup: remove trailing whitespace

- [Marc Hoersken brought this change]

  winbuild: Removed WITH_SSL=schannel and tie schannel to SSPI
  
  Removed specific WITH_SSL=schannel paramter that did not fit the general
  schema and complicated the parameters. For now Schannel will be enabled
  if SSPI is enabled and OpenSSL is disabled.

- [Steve Holme brought this change]

  Makefile.vc6: Added version.lib if built with SSPI

- [Marc Hoersken brought this change]

  winbuild: Updated winbuild scripts to add schannel

- [Marc Hoersken brought this change]

  mingw32: Fixed warning of USE_SSL being redefined

- [Marc Hoersken brought this change]

  sspi: Fixed incompatible parameter pointer type in Curl_sspi_version

- [Marc Hoersken brought this change]

  sspi: Updated RELEASE-NOTES, FEATURES and THANKS

- [Marc Hoersken brought this change]

  setup.h: Automatically define USE_SSL if USE_SCHANNEL is defined

- [Marc Hoersken brought this change]

  version: Replaced SSPI feature information with version string details
  
  Added Windows SSPI version information to the curl version string when
  SCHANNEL SSL is not enabled, as the version of the library should also
  be included when SSPI is used to generate security contexts.
  
  Removed SSPI from the feature list as the features are GSS-Negotiate,
  NTLM and SSL depending on the usage of the SSPI library.

- [Steve Holme brought this change]

  sspi.c: Post Curl_sspi_version() rework code tidy up
  
  Removed duplicate blank lines.
  Removed spaces between the not and test in various if statements.
  Removed explicit test of NULL in an if statement.
  Placed function returns on same line as function declarations.
  Replaced the use of curl_maprintf() with aprintf() as it is the
  preprocessor job to do this substitution if ENABLE_CURLX_PRINTF
  is set.

- [Steve Holme brought this change]

  sspi: Reworked Curl_sspi_version() to return version components
  
  Reworked the version function to return four version components rather
  than a string that has to be freed by the caller.

- [Guenter Knauf brought this change]

  configure.ac: Added -lversion if built with SSPI

- [Marc Hoersken brought this change]

  schannel: Code cleanup and bug fixes
  
  curl_sspi.c: Fixed mingw32-gcc compiler warnings
  curl_sspi.c: Fixed length of error code hex output
  
  The hex value was printed as signed 64-bit value on 64-bit systems:
  SEC_E_WRONG_PRINCIPAL (0xFFFFFFFF80090322)
  
  It is now correctly printed as the following:
  SEC_E_WRONG_PRINCIPAL (0x80090322)
  
  curl_sspi.c: Fallback to security function table version number
  Instead of reporting an unknown version, the interface version is used.
  
  curl_sspi.c: Removed SSPI/ version prefix from Curl_sspi_version
  curl_schannel: Replaced static buffer sizes with defined names
  curl_schannel.c: First brace when declaring functions on column 0
  curl_schannel.c: Put the pointer sign directly at variable name
  curl_schannel.c: Use structs directly instead of typedef'ed structs
  curl_schannel.c: Removed space before opening brace
  curl_schannel.c: Fixed lines being longer than 80 chars

- [Marc Hoersken brought this change]

  curl_sspi: Added Curl_sspi_version function
  
  Added new function to get SSPI version as string.
  Added required library version.lib to makefiles.
  Changed curl_schannel.c to use Curl_sspi_version.

- [Guenter Knauf brought this change]

  schannel: Updated mingw32 makefiles

- [Marc Hoersken brought this change]

  schannel: Replace ASCII specific code with general defines

- [Marc Hoersken brought this change]

  schannel: Added definitions which are missing in mingw32

- [Marc Hoersken brought this change]

  schannel: Moved interal struct types to urldata.h
  
  Moved type definitions in order to avoid inclusion loop

- [Marc Hoersken brought this change]

  schannel: Fixed compiler warnings about pointer type assignments

- [Marc Hoersken brought this change]

  schannel: Fixed critical typo in conditions and added buffer length checks

- [Marc Hoersken brought this change]

  sspi: Refactored socks_sspi and schannel to use same error message functions
  
  Moved the error constant switch to curl_sspi.c and added two new helper
  functions to curl_sspi.[ch] which either return the constant or a fully
  translated message representing the SSPI security status.
  Updated socks_sspi.c and curl_schannel.c to use the new functions.

- [Marc Hoersken brought this change]

  schannel: Added special shutdown check for Windows 2000 Professional
  
  Windows 2000 Professional:  Schannel returns SEC_E_OK instead
  of SEC_I_CONTEXT_EXPIRED. If the length of the output buffer
  is zero and the first byte of the encrypted packet is 0x15,
  the application can safely assume that the message was a
  close_notify message and change the return value to
  SEC_I_CONTEXT_EXPIRED.
  
  Connection shutdown does not mean that there is no data to read
  Correctly handle incomplete message and ask curl to re-read
  Fixed buffer for decrypted being to small
  Re-structured read condition to be more effective
  Removed obsolete verbose messages
  Changed memory reduction method to keep a minimum buffer of size 4096

- [Marc Hoersken brought this change]

  schannel: Implemented SSL/TLS renegotiation
  
  Updated TODO information and added related MSDN articles

- [Marc Hoersken brought this change]

  schannel: Save session credential handles in session cache

- [Marc Hoersken brought this change]

  schannel: Code cleanup

- [Marc Hoersken brought this change]

  schannel: Check for required context attributes

- [Marc Hoersken brought this change]

  schannel: Allow certificate and revocation checks being deactivated

- [Marc Hoersken brought this change]

  schannel: Added SSL/TLS support with Microsoft Windows Schannel SSPI

- [Marc Hoersken brought this change]

  http: Replaced specific SSL libraries list in https_getsock fallback

- [Marc Hoersken brought this change]

  connect.c/ftp.c: Fixed dereferencing pointer breakin strict-aliasing
  
  Fixed warning: dereferencing pointer does break strict-aliasing rules
  by using a union instead of separate pointer variables.
  Internal union sockaddr_u could probably be moved to generic header.
  Thanks to Paul Howarth for the hint about using unions for this.
  
  Important for winbuild: Separate declaration of sockaddr_u pointer.
  The pointer variable *sock cannot be declared and initialized right
  after the union declaration. Therefore it has to be a separate statement.

- [Marc Hoersken brought this change]

  curl_ntlm_msgs.c: Fixed passwdlen not being used and recalculated

Yang Tse (11 Jun 2012)
- tests: fix test definitions # 1355, 1363, 1385 and 1393
  
  -i without HTTP protocol shall not include headers in the output

Daniel Stenberg (10 Jun 2012)
- Curl_pgrsDone: return int and acknowledge return code
  
  Since Curl_pgrsDone() itself calls Curl_pgrsUpdate() which may return an
  abort instruction or similar we need to return that info back and
  subsequently properly handle return codes from Curl_pgrsDone() where
  used.
  
  (Spotted by a Coverity scan)

Steve Holme (10 Jun 2012)
- [Marc Hoersken brought this change]

  winbuild: Fixed environment variables being lost
  
  Fixed USE_IPV6 and USE_IDN not being passed
  from Makefile.vc to MakefileBuild.vc
  Fixed whitespace and formatting issues
  Fixed typo and format in help message

Guenter Knauf (9 Jun 2012)
- Added metalink support to NetWare builds.

Steve Holme (9 Jun 2012)
- smtp.c: Removed unused variable

- smtp: Post apop feature code tidy up

- pop3: Post apop feature code tidy up

- pop3: Added support for apop authentication

- pop3: Enhanced the extended authentication mechanism detection
  
  Enhanced the authentication type / mechanism detection in preparation
  for the introduction of APOP support.

- pop3.c: Fixed length of SASL check

Yang Tse (9 Jun 2012)
- Fixes allowing 26 more test cases in 1334 to 1393 range to succeed

- tests: fix test definitions # 1370 and 1371
  
  -J without -O shall not honor C-D filename

Daniel Stenberg (9 Jun 2012)
- OpenSSL: support longer certificate subject names
  
  Previously it would use a 256 byte buffer and thus cut off very long
  subject names. The limit is now upped to the receive buffer size, 16K.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3533045
  Reported by: Anthony G. Basile

Kamil Dudka (8 Jun 2012)
- ssl: fix duplicated SSL handshake with multi interface and proxy
  
  Bug: https://bugzilla.redhat.com/788526
  Reported by: Enrico Scholz

Daniel Stenberg (8 Jun 2012)
- tool_getparam.h: fix compiler error
  
  forward declare the Configurable struct

- metalink: restore some includes
  
  Commit eeeba1496cbca removed them and thus broke my Linux build

- openldap: OOM fixes
  
  when calloc fails, return error! (Detected by Fortify)
  
  Reported by: Robert B. Harris

Steve Holme (8 Jun 2012)
- sasl: Re-factored mechanism constants in preparation for APOP work

Yang Tse (8 Jun 2012)
- metalink: build fixes and adjustments II
  
  Additionally, make hash checking ability mandatory in order to allow metalink
  support in curl.
  
  A command line option could be introduced to skip hash checking at runtime,
  but the ability to check hashes should always be built-in when providing
  metalink support.

Guenter Knauf (8 Jun 2012)
- Added metalink support to MinGW builds.

Daniel Stenberg (7 Jun 2012)
- log2changes.pl: fix the Version output
  
  Previously it could easily wrongly get repeated

Yang Tse (7 Jun 2012)
- metalink: build fixes and adjustments I

Daniel Stenberg (7 Jun 2012)
- lib554.c: use curl_formadd() properly
  
  The length/size options take longs so make sure to pass on such types.
  
  Reported by: Neil Bowers
  Bug: http://curl.haxx.se/mail/lib-2012-06/0001.html

Steve Holme (7 Jun 2012)
- smtp.c: Re-factored the smtp_state_*_resp() functions
  
  Re-factored the smtp_state_*_resp() functions to 1) Match the constants
  that were refactored in commit 00fddba6727c, 2) To be more readable and
  3) To match their counterparties in pop3.c.

Yang Tse (7 Jun 2012)
- Fixes allowing HTTP test cases 1338, 1339, 1368 and 1369 to succeed

- tests 1364 to 1393: several -o filename -J -i -D combinations for HTTP and FTP

- tests 1348 to 1363: test definition polishing
  
  Verify that the "Saved to filename 'blabla'" message is only displayed when
  the 'blabla' filename being used _actually_ has been specified by the server
  in the Content-Disposition header.
  
  Use relative path for unintended file creation postcheck.

Steve Holme (6 Jun 2012)
- smtp: Re-factored the SMTP_AUTH* state machine constants
  
  Re-factored the SMTP_AUTH* constants, that are used by the state
  machine, to be clearer to read.

Guenter Knauf (6 Jun 2012)
- Added hint for pkg-config wrapper script.

- Updated Android section with recent NDK.
  
  The r7b had some bugs, and shouldnt be used.

Yang Tse (6 Jun 2012)
- Disable non-HTTP header related tests
  
  These now detect incompleate header data and fail

- tests 1348 to 1363: compleate header data part of test definition

- tests 1334 to 1363 revisited.
  
  Add a postcheck section to verify unintended file creation.
  
  Remove needless <file> checks in verify section. Renumbering where appropriate.

- tests: adjust file part behavior in test verify section.
  
  When a <file> part is now specified with no contents at all, this
  will actually verify that the specified file has no contents at all.
  Previously file contents would be ignored.

Steve Holme (5 Jun 2012)
- smtp.c: Removed whitespace

- pop3: Another small code tidy up
  
  Missed some comments that we identified during the SMTP tidy up earlier.

- smtp: Post authentication code tidy up
  
  Corrected lines longer than 78 characters.
  
  Removed unnecessary braces in smtp_state_helo_resp().
  
  Introduced some comments in data sending functions.
  
  Tidied up comments to match changes made in pop3.c.

Yang Tse (5 Jun 2012)
- tests 1348 to 1363: add a comma in test description

Steve Holme (5 Jun 2012)
- email: Removed duplicated header file

- sasl: Renamed Curl_sasl_decode_ntlm_type2_message()
  
  For consistency with other SASL based functions renamed this function
  to Curl_sasl_create_ntlm_type3_message() which better describes its
  usage.

- pop3: Post authentication code tidy up
  
  Corrected lines longer than 78 characters.
  
  Changed POP3_AUTH_FINAL to POP3_AUTH to match SMTP code now that the
  AUTH command is no longer sent on its own.
  
  Introduced some comments in data sending functions.
  
  Another attempt at trying to rational code and comment style.

- pop3: Added support for sasl digest-md5 authentication

Yang Tse (4 Jun 2012)
- sasl: add reference for curl_sasl

- Makefile.inc: tab adjustment

Daniel Stenberg (4 Jun 2012)
- pop3 tests: CAPA instead of AUTH
  
  After Steve's commit e336bc7c42c7340 test 1319 and 1407 need to check
  for CAPA instead of AUTH.

Steve Holme (4 Jun 2012)
- sasl: Added service parameter to Curl_sasl_create_digest_md5_message()
  
  Added a service type parameter to Curl_sasl_create_digest_md5_message()
  to allow the function to be used by different services rather than being
  hard coded to "smtp".

Yang Tse (4 Jun 2012)
- tests 1356 to 1363: several -O -J -i -D combinations with FTP protocol
  
  Currently 1356 to 1362 succeed but a write failure is logged in traceNNNN.
  
  Currently 1363 fails, so disabled for now.

Steve Holme (4 Jun 2012)
- tests: Updated pop3 tests for change in auth mechanism detection

- pop3: Changed the sasl mechanism detection from auth to capa
  
  Not all SASL enabled POP3 servers support the AUTH command on its own
  when trying to detect the supported mechanisms. As such changed the
  mechanism detection to use the CAPA command instead.

Daniel Stenberg (4 Jun 2012)
- curl_easy_setopt.3: proto updates + cleanups
  
  - For all *FUNCTION options, they now all show the complete prototype in
    the description. Previously some of them would just refer to a
    typedef'ed function pointer in the curl.h header.
  
  - I made the phrasing of that "Pass a pointer to a function that matches
    the following prototype" the same for all *FUNCTION option descriptions.
  
  - I removed some uses of 'should'. I think I sometimes over-use this
    word as in many places I actually mean MUST or otherwise more specific
    and not-so-optional synonyms.

Yang Tse (4 Jun 2012)
- tests 1348 to 1355: several -O -J -i -D combinations with FTP protocol
  
  Currently 1348 to 1354 succeed but a write failure is logged in traceNNNN.
  
  Currently 1355 fails, so disabled for now.

- tests 1346 to 1347: several -O -J -i -D combinations with HTTP protocol

Steve Holme (4 Jun 2012)
- sasl: Small code tidy up
  
  Reworked variable names in Curl_sasl_create_cram_md5_message() to match
  those in Curl_sasl_create_digest_md5_message() as they are more
  appropriate.

- sasl: Moved digest-md5 authentication message creation from smtp.c
  
  Moved the digest-md5 message creation from smtp.c into the sasl module
  to allow for use by other modules such as pop3.

- sasl: Small code tidy up before moving digest-md5 over
  
  Correction of comments and variable names.

- RELEASE-NOTES: Added missing addition of sasl login support

- pop3: Added support for sasl cram-md5 authentication

Daniel Stenberg (3 Jun 2012)
- Curl_sasl_create_plain_message: remove TAB

Steve Holme (3 Jun 2012)
- sasl: Small code tidy up
  
  Added some comments and removed an unreferenced variable.

- pop3.c: Added conditional compilation for NTLM function calls
  
  Added USE_NTLM condition compilation around the NTLM functions called
  from pop3_statemach_act() introduced in commit 69f7156ad96877.

- sasl: Moved cram-md5 authentication message creation from smtp.c
  
  Moved the cram-md5 message creation from smtp.c into the sasl module
  to allow for use by other modules such as pop3.

- pop3: Fixed an issue with changes introduced in commit c267c53017bc
  
  Because pop3_endofresp() is called for each line of data yet is not
  passed the line and line length, so we have to use the data pointed to
  by pp->linestart_resp which contains the whole packet, the mechanisms
  were being detected in one call yet the function would be called for
  each line of data.
  
  Using curl with verbose mode enabled would show that one line of data
  would be received in response to the AUTH command, before the AUTH
  <mechanism> command was sent to the server and then the next few lines
  of the original AUTH command would be displayed before the response from
  the AUTH <mechanism> command. This would then cause problems when
  parsing the CRAM-MD5 challenge data as extra data was contained in the
  buffer.
  
  Changed the parsing so that each line is checked for the mechanisms
  and the function returns FALSE until the whole of the AUTH response has
  been processed.

Daniel Stenberg (3 Jun 2012)
- version: bump to 7.27.0 for next release
  
  Due to new features

- RELEASE-NOTES: synced with c4e3578e4bf
  
  Also bumped the contributor number and next release is to become 7.27.0

- THANKS: 16 new contributors from the 7.26.0 release

Steve Holme (3 Jun 2012)
- DOCS: Fixed list in Section 18.2 not displaying correctly on web site

- DOCS: Corrected missed heading renumbering from commit 530675a1ad7

- DOCS: Added IMAP and LDAP sections
  
  Added new sections 11. IMAP and 12. LDAP to document adding SASL based
  authentication.
  
  Renumbered current sections 11 to 17 as 13 to 19.
  
  Additionally added 19.10 Add CURLOPT_MAIL_CLIENT option.

- sasl.c: Fix to avoid warnings introduced in commit d9ca9e9869e8
  
  Applied a fix to avoid warnings on systems where Curl_ntlm_sspi_cleanup()
  is just a nop.

- pop3.c:Corrected typo in commit 69ba0da8272d

- pop3: Fixed the issue of having to supply the user name for all requests
  
  Previously it wasn't possible to connect to POP3 and not specify the
  user name as a CURLE_ACCESS_DENIED error would be returned. This error
  occurred because USER would be sent to the server with a blank user name
  if no mailbox user was specified as the server would reply with -ERR.
  
  This wasn't a problem prior to the 7.26.0 release but with the
  introduction of custom commands the user and/or application developer
  might want to issue a CAPA command without having to log in as a
  specific mailbox user.
  
  Additionally this fix won't send the newly introduced AUTH command if no
  user name is specified.

- pop3.c: Small code tidy up
  
  Corrected lines exceeding 78 characters.
  
  Repositioned some comments and added extra clarity.

- sasl: Corrected variable names in comments and parameters

- pop3: Added support for sasl ntlm authentication

- sasl: Small comment style tidy up following ntlm commit

- sasl: Moved ntlm authentication message handling from smtp.c
  
  Moved the ntlm message creation and decoding from smtp.c into the sasl
  module to allow for use by other modules such as pop3.

- pop3: Added support for sasl login authentication

Yang Tse (1 Jun 2012)
- tests 1334 to 1345: several -O -J -i -D combinations with HTTP protocol

- tests: support test definitions with up to 5 file checks in <verify> section
  
  This is done introducing tags <file1> to <file4> besides existing <file> one,
  as well as corresponding <stripfile1> to <stripfile4> ones, that can be used
  in the <verify> section in the same way as the non-numbered ones.

Steve Holme (31 May 2012)
- sasl: Moved login authentication message creation from smtp.c
  
  Moved the login message creation from smtp.c into the sasl module
  to allow for use by other modules such as pop3.

- smtp.c: Reworked message encoding in smtp_state_authpasswd_resp()
  
  Rather than encoding the password message itself the
  smtp_state_authpasswd_resp() function now delegates the work to the same
  function that smtp_state_authlogin_resp() and smtp_authenticate() use
  when constructing the encoded user name.

- smtp.c: Re-factored smtp_auth_login_user() for use with passwords
  
  In preparation for moving to the SASL module re-factored the
  smtp_auth_login_user() function to smtp_auth_login() so that it can be
  used for both user names and passwords as sending both of these under
  the login authentication mechanism is the same.

- pop3: Added support for sasl plain text authentication

- curl_ntlm_msgs.c: Corrected small spelling mistake in comments

- sasl: Moved plain text authentication message creation from smtp.c
  
  Moved the plain text message creation from smtp.c into the sasl module
  to allow for use by other modules such as pop3.

Yang Tse (30 May 2012)
- configure: fix LDAPS disabling related misplaced closing parenthesis

- pop3 test server: allow pop3 test server verification to succeed again
  
  Introduce SUPPORTCAPA and SUPPORTAUTH config commands to allow further
  pop3 test server expansion for tests that require CAPA or AUTH support,
  although this will need some extra work to make it fully functional.

Steve Holme (28 May 2012)
- pop3: Introduced the continue response in pop3_endofresp()

- pop3: Changed response code from O and E to + and -
  
  The POP3 protocol doesn't really have the concept of error codes and
  uses +, +OK and -ERR in response to commands to indicate continue,
  success and error.
  
  The AUTH command is one of those commands that requires multiple pieces
  of data to be sent to the server where the server will respond with + as
  part of the handshaking. This meant changing the values before
  continuing with the next stage of adding authentication support.

- pop3: Small code tidy up following authentication work so far
  
  Changed the order of the state machine to match the order of actual
  events.
  
  Reworked some comments and function parameter positioning that I missed
  the other day.

Kamil Dudka (28 May 2012)
- nss: use human-readable error messages provided by NSS
  
  Bug: http://lists.baseurl.org/pipermail/yum-devel/2012-January/009002.html

Daniel Stenberg (27 May 2012)
- test1013.pl: filter out Metalink
  
  Since it isn't a feature supported by curl-config we can't compare that
  with the --version output

- pop3: remove variable-not-used warnings

Steve Holme (27 May 2012)
- DOCS: Corrected the "Added in" version number for CURLOPT_MAIL_AUTH
  
  Additionally corrected another RFC link that I missed yesterday.

- pop3: Added support for SASL based authentication mechanism detection
  
  Added support for detecting the supported SASL authentication mechanisms
  via the AUTH command. There are two ways of detecting them, either by
  using the AUTH command, that will return -ERR if not supported or by
  using the CAPA command which will return SASL and the list of mechanisms
  if supported, not include SASL if SASL authentication is not supported
  or -ERR if the CAPA command is not supported. As such it seems simpler
  to use the AUTH command and fallback to normal clear text authentication
  if the the command is not supported.
  
  Additionally updated the test cases to return -ERR when the AUTH command
  is encountered. Additional test cases will be added when support for the
  individual authentication mechanisms is added.

Daniel Stenberg (27 May 2012)
- pop3: remove trailing whitespace

Steve Holme (27 May 2012)
- pop3: Code tidy up before the introduction of authentication code
  
  Moved EOB definition into header file.
  
  Switched the logic around in pop3_endofresp() to allow for the
  introduction of auth-mechanism detection.
  
  Repositioned second and third function variables where they will fit
  within the 78 character line limit.
  
  Tidied up some comments.

Guenter Knauf (27 May 2012)
- Enabled OpenSSL static linkage.

- Enabled OpenSSL static linkage.

- Try to detect OpenSSL build type automatically.

Daniel Stenberg (26 May 2012)
- metalink: fix build errors when disabled

- [Tatsuhiro Tsujikawa brought this change]

  Reduced #ifdef HAVE_METALINK

- [Tatsuhiro Tsujikawa brought this change]

  Disable hash check if neither OpenSSL nor GNUTLS is installed.

- [Tatsuhiro Tsujikawa brought this change]

  Format GETOUT_METALINK nicely

- [Tatsuhiro Tsujikawa brought this change]

  Minimize usage of structs from libmetalink

- [Tatsuhiro Tsujikawa brought this change]

  Check checksum of downloaded file if checksum is available
  
  Metalink file contains several hash types of checksums, such as
  md5, sha-1, sha-256, etc. To deal with these checksums, I created
  abstraction layer based on lib/curl_md5.h and
  lib/md5.c. Basically, they are almost the same but I changed the
  code so that it is not hash type dependent. Currently,
  GNUTLS(nettle or gcrypt) and OpenSSL functions are supported.
  
  Checksum checking is done by reopening download file.  If there
  is an I/O error, the current implementation just prints error
  message and does not try next resource.
  
  In this patch, the supported hash types are: md5, sha-1 and sha-256.

- [Tatsuhiro Tsujikawa brought this change]

  Always create directory hierarchy for Metalink.
  
  Filenames contained in Metalink file can include directory information.
  Filenames are unique in Metalink file, taking into account the directory
  information. So we need to create the directory hierarchy.
  
  Curl has --create-dirs option, but we create directory hierarchy for
  Metalink downloads regardless of the option value.
  
  This patch also put metalink int variable outside of HAVE_LIBMETALINK
  guard. This reduces the number of #ifdefs.

- [Tatsuhiro Tsujikawa brought this change]

  Fixed segmentation fault when Metalink has no valid file or no resource.

- [Tatsuhiro Tsujikawa brought this change]

  Support media-type parameter in Content-Type

- [Tatsuhiro Tsujikawa brought this change]

  Print "Metalink" in Features if Metalink support is enabled.

- [Tatsuhiro Tsujikawa brought this change]

  Removed trailing space

- [ant brought this change]

  Add --metalink to --help

- [ant brought this change]

  Add Metalink information and --metalink option to man page

- [ant brought this change]

  Add Metalink information and --metalink option to man page

- [ant brought this change]

  Adds Metalink information to INSTALL

- [Tatsuhiro Tsujikawa brought this change]

  --metalink option is available regardless of Metalink support.

- [Tatsuhiro Tsujikawa brought this change]

  metalink: parse downloaded Metalink file
  
  Parse downloaded Metalink file and add downloads described there. Fixed
  compile error without metalink support.

- [Tatsuhiro Tsujikawa brought this change]

  Fixed HAVE_LIBMETALINK conditional is always true

- [Tatsuhiro Tsujikawa brought this change]

  metalink: minor metalinkfile fix
  
  Don't update config->metalinkfile_last in operate(). Use local variable
  to point to the current metalinkfile.

- [Tatsuhiro Tsujikawa brought this change]

  metalink: show help message even if disabled
  
  Print message if --metalink is used while metalink support is not
  enabled. Migrated Metalink support in tool_operate.c and removed
  operatemetalink().

- [Tatsuhiro Tsujikawa brought this change]

  Applied patches from Daniel

- [Tatsuhiro Tsujikawa brought this change]

  Support Metalink.
  
  This change adds experimental Metalink support to curl.
  To enable Metalink support, run configure with --with-libmetalink.
  To feed Metalink file to curl, use --metalink option like this:
  
    $ curl -O --metalink foo.metalink
  
  We use libmetalink to parse Metalink files.

Steve Holme (26 May 2012)
- DOCS: Fixed line spacing of authentication examples in CURLOPT_URL

- DOCS: Changed domain names in various examples to example.com
  
  Updated various references of real domain names to example.com as per
  RFC-2606.

- DOCS: Fixed meaning of bit 2 in CURLOPT_POSTREDIR
  
  Setting bit 2 for this value was documented as having a constant value
  defined as CURL_REDIR_POST_303 yet referenced a 302 request.
  
  Additionally corrected the meaning of CURL_REDIR_POST_ALL for all three
  bits and fixed problems with the bolding of keywords in this section.

- DOCS: Standardised how RFCs are referenced.
  
  Standardised how RFCs are referenced so that the website may autolink to
  the correct documentation on ietf.org. Additionally removed the one link
  to RFC3986 on curl.haxx.se.

Yang Tse (26 May 2012)
- Fix libcurl.pc and curl-config generation for static MingW* cross builds

Daniel Stenberg (25 May 2012)
- [Tatsuhiro Tsujikawa brought this change]

  Made -D option work with -O and -J.
  
  To achieve this, first new structure HeaderData is defined to hold
  necessary data to perform header-related work.  Then tool_header_cb now
  receives HeaderData pointer as userdata.  All header-related work
  (currently, dumping header and Content-Disposition inspection) are done
  in this callback function.  HeaderData.outs->config is used to determine
  whether each work is done.
  
  Unit tests were also updated because after this change, curl code always
  sets CURLOPT_HEADERFUNCTION and CURLOPT_HEADERDATA.
  
  Tested with -O -J -D, -O -J -i and -O -J -D -i and all worked fine.

Steve Holme (25 May 2012)
- sasl: Re-factored auth-mechanism constants to be more generic

- smtp: Moved auth-mechanism constants into a separate header file
  
  Move the SMTP_AUTH constants into a separate header file in
  preparation for adding SASL based authentication to POP3 as the two
  protocols will need to share them.

Kamil Dudka (25 May 2012)
- nss: avoid using explicit casts of code pointers

Steve Holme (24 May 2012)
- DOCS: Added LDAP to the CURLOPT_URL section

- TODO: Removed DIGEST-MD5 authentication from SMTP to do list
  
  Removed DIGEST-MD5 from Section 9.1 Other authentication mechanisms as
  the feature was added to SMTP in 7.26.0.
  
  Also corrected small spelling mistake.

Daniel Stenberg (24 May 2012)
- bump to 7.26.1: start working towards next release

Version 7.26.0 (24 May 2012)

Daniel Stenberg (24 May 2012)
- RELEASE-NOTES: synced with ef60fdbd73
  
  Just before 7.26.0 is about to ship

Steve Holme (22 May 2012)
- smtp: Fixed an issue with the multi-interface always sending postdata
  
  Due to the result code being reset to CURLE_OK when smtp_dophase_done()
  was called, postdata would incorrectly be sent to the server when the
  MAIL FROM or RCPT command was rejected.
  
  As such, libcurl would return the wrong result code from performing the
  operation and additionally set CURLINFO_RESPONSE_CODE to be that
  returned by the postdata command.
  
  Bug: http://curl.haxx.se/mail/lib-2012-05/0108.html
  Reported by: Gokhan Sengun

- DOCS: Updated version number for features added in the pending release

Daniel Stenberg (22 May 2012)
- [Tatsuhiro Tsujikawa brought this change]

  Fixed compile error with GNUTLS+NETTLE
  
  In nettle/md5.h, md5_init and md5_update are defined as macros to
  nettle_md5_init and nettle_md5_update respectively.  This causes
  error when using MD5_params.md5_init and md5_update.  This patch
  renames these members as md5_init_func and md5_update_func to
  avoid name conflict. For completeness, MD5_params.md5_final was
  also renamed as md5_final_func.
  
  The changes in curl_ntlm_core.c is conversion error and fixed by
  casting to proper type.

- TODO-RELEASE: mention the pending biggies for 7.27.0

- [Jan Ehrhardt brought this change]

  winbuild: fix IPv6 enabled build
  
  The existing check was wrong so IPv6 support would never be enabled

- 7.26.0: will be the next release version

- RELEASE-NOTES: synced with 8ae1e657e82a
  
  And mention that this will become 7.26.0

Guenter Knauf (22 May 2012)
- Updated dependency libary versions.

Daniel Stenberg (20 May 2012)
- curl-config.1: fix curl-config usage in example
  
  The curl-config command must be used twice in the single command line to
  work properly in some environments.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3528241
  Reported by: Julian Taylor

Steve Holme (17 May 2012)
- smtp: Fixed non-escaping of dot character at beginning of line
  
  A dot character at the beginning of a line would not be escaped to a
  double dot as required by RFC-2821, instead it would be deleted by the
  mail server. Please see section 4.5.2 of the RFC for more information.
  
  Note: This fix also simplifies the detection of repeated CRLF.CRLF
  combinations, such as CRLF.CRLF.CRLF, a little rather than having to
  advance the eob counter to 2.

Daniel Stenberg (16 May 2012)
- FAQ: updated 1.10 How many are using curl?
  
  Now linking to http://daniel.haxx.se/blog/2012/05/16/300m-users/

- disable-versioned-symbols: removed superfluous 'fi'
  
  The commit e315927a1a left this in

- MakefileBuild.vc: use the correct IDN variable
  
  The variable that control IDN enablement is called USE_IDN within these
  Makefiles

- [Pierre Chapuis brought this change]

  autoconf: improve handling of versioned symbols
  
  It checks whether versioned symbols should be enabled before checking
  whether it is possible (i.e. the linker supports --version-script) or
  not. This avoids a useless warning when building cURL on a platform that
  does not use GNU ld.
  
  Moreover, it fixes broken indentation of this chunk of code.

- curl.1: clarify -x usage
  
  1 - fix the syntax in the .IP line
  
  2 - Provided user names and passwords are URL decoded by libcurl
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3525935

- NTLM: is supported in GnuTLS builds too
  
  ... since commit 9a4c887c4a7 introduced in libcurl 7.19.4

- TODO: happy eyeballs is now RFC6555

- my_useragent: shorten user-agent
  
  The built-in user-agent will now only say curl/[version] and nothing
  else in an attempt to decrease overhead in HTTP requests.

- CURLOPT_HEADERFUNCTION: works for non-HTTP protocols too

Claes Jakobsson (3 May 2012)
- Add note about default timeout in CURLOPT_TIMEOUT

Daniel Stenberg (2 May 2012)
- [Gokhan Sengun brought this change]

  MD5: OOM fix
  
  check whether md5 initialization succeeded before updating digest of
  buffers onto it

- REALEASE-NOTES: synced with 64f48e884e3c1

- [Jan Schaumann brought this change]

  add newly created manual page

- [Jan Schaumann brought this change]

  add a manual page for mk-ca-bundle

Guenter Knauf (26 Apr 2012)
- Updated dependency lib versions.

Daniel Stenberg (23 Apr 2012)
- URL parse: reject numerical IPv6 addresses outside brackets
  
  Roman Mamedov spotted (in
  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=670126) that curl would
  not complain when given a URL with an IPv6 numerical address without
  brackets. It would simply cut off the last ":[hex]" part and thus not
  work correctly.
  
  That's a URL using an illegal syntax and now libcurl will instead return
  a clear error code and error message detailing the error.
  
  The above mentioned bug report claims this to be a regression but
  libcurl does not guarantee functionality when given URLs that aren't
  following the URL spec (RFC3986 mostly). I consider the fact that it
  used to handle this differently a mere coincidence.

- Curl_MD5_init: fix OOM memory leak
  
  Bug: http://curl.haxx.se/mail/lib-2012-04/0246.html
  Reported by: Michael Mueller

- [Gokhan Sengun brought this change]

  OpenSSL cert: provide more details when cert check fails
  
  curl needs to be more chatty regarding certificate verification failure
  during SSL handshake

Yang Tse (23 Apr 2012)
- Revert "sspi: Added version information"
  
  This reverts commit 2976de480808119dae08fc6f52c8d75ba1aedb1a.

- Revert "sspi - Small code tidy up"
  
  This reverts commit 46cd5f1daddad3b3e542e6d93eee52e8bb9a8687.

- Revert "Fixed 'extra tokens at end of #endif directive'."
  
  This reverts commit 77172a242fc0c820f97eae39d0e3e0f265222fe6.

- Revert "Fixed 'Trailing whitespace' found by checksrc."
  
  This reverts commit 683bfa60ad0b52505947e59b03515e5f44378523.

- Revert "sspi: Code tidy up to remove unused variable."
  
  This reverts commit 412510f97407d617426d93b80e6b6bf0a8ff11ac.

- Revert "Add -lversion if build with SSPI."
  
  This reverts commit 9ec0b7e0c44d29eca6f45916fe5af3501168fe85.

Guenter Knauf (23 Apr 2012)
- Add -lversion if build with SSPI.

Steve Holme (22 Apr 2012)
- sspi: Code tidy up to remove unused variable.

Guenter Knauf (22 Apr 2012)
- Fixed 'Trailing whitespace' found by checksrc.

- Fixed 'extra tokens at end of #endif directive'.

Steve Holme (22 Apr 2012)
- sspi - Small code tidy up

- sspi: Added version information
  
  Added version information for Windows SSPI to curl's main version
  string and removed SSPI from the features string.

Daniel Stenberg (20 Apr 2012)
- HTTP: empty chunked POST ended up in two zero size chunks
  
  When doing a chunked-encoded POST with -d (CURLOPT_POSTFIELDS) and the
  size of the POST was zero length, it made libcurl first send a zero
  chunk and then the terminating one. This could confuse a receiver and it
  should rather just send the terminating chunk as it does with this fix.
  
  Test case 1333 is added to verify.
  
  Bug: http://curl.haxx.se/mail/archive-2012-04/0060.html
  Reported by: Arnaud Compan

Guenter Knauf (20 Apr 2012)
- Updated dependency lib versions.

Daniel Stenberg (19 Apr 2012)
- singleipconnect: return OK even when Curl_socket() fails
  
  Commit 9109cdec11ee5a brought this regression (shipped since 7.24.0).
  
  The singleipconnect() function must not return an error if Curl_socket()
  returns an error. It should then simply return OK and pass a SOCKET_BAD
  back simply because that is how the user of this function expects it to
  work and something else is not fine.
  
  Reported by: Blaise Potard
  Bug: http://curl.haxx.se/bug/view.cgi?id=3516508

Yang Tse (19 Apr 2012)
- Take in account that CURLAUTH_* bitmasks are now 'unsigned long' - follow-up
  
  MIPSPro compiler detected curl_easy_getinfo() related missing adjustments.
  SunPro compiler detected curl tool --libcurl option related missing adjustments.

- url.c: CURLOPT_HTTPAUTH and CURLOPT_PROXYAUTH fixes
  
  Fail with CURLE_NOT_BUILT_IN when none of requested auth methods is supported.
  
  Reject CURLAUTH_ONLY bit when given alone or with CURLAUTH_NONE.

- Take in account that CURLAUTH_* bitmasks are now 'unsigned long'
  
  Data type of internal vars holding CURLAUTH_* bitmasks changed from 'long' to
  'unsigned long' for proper handling and operating.

- curl.h: CURLAUTH_* bitmasks adjusted to become 'unsigned long' typed
  
  Info: http://curl.haxx.se/mail/lib-2012-04/0170.html

- Some explicit conversion to 'long' of curl_easy_setopt() third argument
  
  Explicit conversion to 'long' of curl_easy_setopt() third argument for options
  CURLOPT_HTTPAUTH and CURLOPT_PROXYAUTH given that this is how its bitmasks are
  docummented to be used.

- build adjustments: commit 9e24b9c7 follow-up

Daniel Stenberg (17 Apr 2012)
- -# progress meter: avoid superfluous updates and duplicate lines
  
  By comparing if a different "progress point" is reached or not since the
  previous update, the progress function callback for this now avoids many
  superfluous screen updates. This has the nice side-effect that it fixes
  a problem that causes a second progress meter line.
  
  The second line output happened because when we use the -# progress
  meter, we force a newline output after the transfer in the main loop in
  curl, but when libcurl calls the progress callback from
  curl_easy_cleanup() it would then output the progress display
  again. Possibly the naive newline output is wrong but this optimization
  was suitable anyway...
  
  Reported by: Daniel Theron
  Bug: http://curl.haxx.se/bug/view.cgi?id=3517418

Yang Tse (16 Apr 2012)
- nss.c: fix compiler warning

- curl-compilers.m4: -Wno-pedantic-ms-format for Windows gcc 4.5 builds
  
  When building a Windows target with gcc 4.5 or newer and strict compiler
  warnings enabled use -Wno-pedantic-ms-format in addition to other flags.

Kamil Dudka (16 Apr 2012)
- tests/valgrind.pm: suppress memleaks of NSS_InitContext()
  
  Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=745224

Yang Tse (14 Apr 2012)
- setup_once.h: tighten requirements for stdbool.h header inclusion
  
  Include stdbool.h only when it is available and configure is capable of
  detecting a proper 'bool' data type when the header is included.
  
  Compilation fix for old or unpatched versions of XL C compiler.
  
  Report: http://curl.haxx.se/mail/archive-2012-04/0022.html

- headers: require GCC 2.7 or newer in order to allow attribute GCC'isms usage
  
  Usage in other code paths already protected and requiring even newer versions.

- [Jonathan Nieder brought this change]

  headers: surround GCC attribute names with double underscores
  
  This protects from attribute names being defined by third party's code.
  
  Improvement: http://curl.haxx.se/mail/lib-2012-04/0127.html

Guenter Knauf (13 Apr 2012)
- Updated copyright year.

Yang Tse (13 Apr 2012)
- testcurl.pl: build example programs for Android cross-compiles

- nss.c: fix compiler warning

- examples: fix compiler warnings

Kamil Dudka (13 Apr 2012)
- nss: provide human-readable names for NSS errors

- nss: use NSS_InitContext() to initialize NSS if available
  
  NSS_InitContext() was introduced in NSS 3.12.5 and helps to prevent
  collisions on NSS initialization/shutdown with other libraries.
  
  Bug: https://bugzilla.redhat.com/738456

- nss: unconditionally require PK11_CreateGenericObject()
  
  This bumps the minimal supported version of NSS to 3.12.x.

Guenter Knauf (13 Apr 2012)
- Set batch mode to 755 to make Cygwin git pulls work.

- Added section for Android configure cross-compile.

- Added NetWare export.

Yang Tse (12 Apr 2012)
- testcurl.pl: build example programs for MinGW cross-compiles

- tool_operate.c: fix compiler warning

- url.c: fix compiler warning

Guenter Knauf (12 Apr 2012)
- Updated dependency lib versions (2nd try).

- Updated dependency lib versions.

Yang Tse (12 Apr 2012)
- tool_formparse.c: rename a couple of vars to avoid declaration shadowing

- OS400/initscript.sh: fix db2_name() module name generation
  
  Allow repeatable file name length reduction on file names with underscore or
  dash characters. This is done in order to better support libcurl's existing
  source file names and allow OS/400 package to build out of the box again.

- testcurl.pl: log more environment vars that modify configure and build behavior

- configure: NATIVE_WINDOWS no longer defined in config files

- build adjustments: CURL_HIDDEN_SYMBOLS no longer defined in config files
  
  configure script now provides conditional definitions for Makefile.am
  that result in CURL_HIDDEN_SYMBOLS being defined by resulting makefiles
  when appropriate.
  
  Additionally, configure script option for symbol hiding control is now
  named --enable-symbol-hiding --disable-symbol-hiding. While still valid,
  old option name --enable-hidden-symbols --disable-hidden-symbols will
  be deprecated in some future release.

- build adjustments: functionally revert commits 4d3fb91f and bbfe1182
  
  Undefining CURL_HIDDEN_SYMBOLS in source files isn't the proper fix.

- test servers: build adjustment
  
  Undefine CURL_HIDDEN_SYMBOLS libcurl private preprocessor macro that might
  leak from lib/setup.h into source files where this should not be defined.

- libtests: build adjustment
  
  Undefine CURL_HIDDEN_SYMBOLS libcurl private preprocessor macro that might
  leak from lib/setup.h into source files where this should not be defined.

- curl tool: make setup.h first header included in tool_setup.h again

- curl tool: use configuration files from lib directory - follow-up II
  
  lib/config-win32.h no longer copied to src/config-win32.h

- configure: Windows cross-compilation fixes
  
  BUILDING_LIBCURL and CURL_STATICLIB are no longer defined in curl_config.h,
  configure will generate appropriate conditionals so that mentioned symbols
  get defined and used in Makefiles at compilation time

- curl tool: make curl.h first header included in tool_setup.h

- curl tool: use configuration files from lib directory - follow-up I
  
  amigaos.[ch] now integrates nicely with any libcurl build

- curl tool: use configuration files from lib directory
  
  Configuration files such as curl_config.h and all config-*.h no longer exist
  nor are generated/copied into 'src' directory, now these only exist in 'lib'
  directory from where curl tool sources uses them.
  
  Additionally old src/setup.h has been refactored into src/tool_setup.h which
  now pulls lib/setup.h
  
  The possibility of a makefile needing an include path adjustment exists.

Daniel Stenberg (6 Apr 2012)
- PolarSSL: correct return code for CRL matches
  
  When a server certificate matches one in the given CRL file, the code
  now returns CURLE_SSL_CACERT as test case 313 expects and verifies.

- PolarSSL: include version number in version string
  
  Previously it would say PolarSSL only, now it says PolarSSL/1.1.0 in the
  same style other libs and components do.

- test: added test 1332 that tests --post303

- curl: add --post303 to set the CURL_REDIR_POST_303 option

- [Andrei Cipu brought this change]

  CURLOPT_POSTREDIR: also allow 303 to do POST on the redirected URL
  
  As it turns out, some people do want that after all.

- test1331: cookies on a 407 response
  
  Verify that cookies are sent back even after a 407 response has been
  received

- [Dag Ekengren brought this change]

  PolarSSL: add support for asynchronous connect

- [Tim Heckman brought this change]

  Revert "access the CA source file using HTTPS"
  
  This reverts commit f7e2ab6.
  
  This change caused fetching of the certificates to become unreliable.
  
  Bug: http://curl.haxx.se/mail/lib-2012-03/0238.html
  Reported by: Tim Heckman

- [Andrei Cipu brought this change]

  IPv6 cookie domain: get rid of the first bracket before the second.
  
  Commit 97b66ebe was copying a smaller buffer, thus duplicating the last
  character.

- MAIL-ETIQUETTE: Added "How to unsubscribe"
  
  ... as it seems to hard for some people

Yang Tse (4 Apr 2012)
- ftp.c: ftplistparser related OOM handling fix

- smtp.c: fix compiler warnings

- lib599.c: fix compiler warning

Daniel Stenberg (4 Apr 2012)
- runtests: yassl and polarssl are not openssl
  
  Don't set the "has_openssl" variable if yassl or polarssl is found as
  they will simply not work as 100% drop-in replacements for some of the
  stuff the "OpenSSL" feature is used for.
  
  I spotted this problem when doing test runs with PolarSSL builds.

- [Lijo Antony brought this change]

  connect.c: return changed to CURLE_COULDNT_CONNECT when opensocket fails
  
  Curl_socket returns CURLE_COULDNT_CONNECT when the opensocket callback
  returns CURL_SOCKET_BAD. Previous return value CURLE_FAILED_INIT
  conveys incorrect information to the user.

Steve Holme (2 Apr 2012)
- pop3: Reworked the command sending and handling
  
  Reworked the command sending from two specific LIST and RETR command
  functions into a single command based function as well as the two
  associated response handlers into a generic command handler.

Daniel Stenberg (1 Apr 2012)
- [Dave Reisner brought this change]

  curl tool: add filename_effective token for --write-out
  
  By modifying the parameter list for ourWriteOut() and passing the
  OutStruct that collects data in tool_operate, we get access to the
  remote name that we're writing to. Shell scripters should find this
  useful when used in conjuntion with the --remote-header-name option.

Steve Holme (1 Apr 2012)
- smtp.c: Code policing and tidy up

Daniel Stenberg (1 Apr 2012)
- [Armel Asselin brought this change]

  SSH: public key can now be an empty string
  
  If an empty string is passed to CURLOPT_SSH_PUBLIC_KEYFILE, libcurl will
  pass no public key to libssh2 which then tries to compute it from the
  private key. This is known to work when libssh2 1.4.0+ is linked against
  OpenSSL.

- [Tatsuhiro Tsujikawa brought this change]

  OpenSSL: Made cert hostname check conform to RFC 6125
  
  This change replaces RFC 2818 based hostname check in OpenSSL build with
  RFC 6125 [1] based one.
  
  The hostname check in RFC 2818 is ambiguous and each project implements
  it in the their own way and they are slightly different. I check curl,
  gnutls, Firefox and Chrome and they are all different.
  
  I don't think there is a bug in current implementation of hostname
  check. But it is not as strict as the modern browsers do. Currently,
  curl allows multiple wildcard character '*' and it matches '.'. (as
  described in the comment in ssluse.c).
  
  Firefox implementation is also based on RFC 2818 but it only allows at
  most one wildcard character and it must be in the left-most label in the
  pattern and the wildcard must not be followed by any character in the
  label.[2] Chromium implementation is based on RFC 6125 as my patch does.
  Firefox and Chromium both require wildcard in the left-most label in the
  presented identifier.
  
  This patch is more strict than the current implementation, so there may
  be some cases where old curl works but new one does not. But at the same
  time I think it is good practice to follow the modern browsers do and
  follow the newer RFC.
  
  [1] http://tools.ietf.org/html/rfc6125#section-6.4.3
  [2] https://bugzilla.mozilla.org/show_bug.cgi?id=159483

- HTTP: reset expected DL/UL sizes on redirects
  
  With FOLLOWLOCATION enabled. When a 3xx page is downloaded and the
  download size was known (like with a Content-Length header), but the
  subsequent URL (transfered after the 3xx page) was chunked encoded, then
  the previous "known download size" would linger and cause the progress
  meter to get incorrect information, ie the former value would remain
  being sent in. This could easily result in downloads that were WAY
  larger than "expected" and would cause >100% outputs with the curl
  command line tool.
  
  Test case 599 was created and it was used to repeat the bug and then
  verify the fix.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3510057
  Reported by: Michael Wallner

Steve Holme (31 Mar 2012)
- [Gökhan Şengün brought this change]

  smtp: Add support for DIGEST-MD5 authentication

- [Gökhan Şengün brought this change]

  smtp: Cody tidy up of md5 digest length
  
  Replaced the hard coded md5 digest length (16) with a preprocessor
  constant

- [Gökhan Şengün brought this change]

  md5: Add support for calculating the md5 sum of buffers incrementally
  
  It is now possible to calculate the md5 sum as the stream of buffers
  becomes known where as previously it was only possible to calculate the
  md5 sum of a pre-prepared buffer.

Daniel Stenberg (31 Mar 2012)
- Revert "mk-ca-bundle.pl: use LWP::UserAgent for https"
  
  This reverts commit 9f0e1689f169b83b8fbdae23e0024cc57dcbc770.
  
  It turned out that "improvement" instead made the fetching of the
  certificates unreliable
  
  Bug: http://curl.haxx.se/mail/lib-2012-03/0238.html
  Reported by: Tim Heckman

Steve Holme (31 Mar 2012)
- DOCS: Added information regarding POP3 commands to CURLOPT_CUSTOMREQUEST

- pop3: Added support for additional pop3 commands
  
  This feature allows the user to specify and use additional POP3
  commands such as UIDL and DELE via libcurl's CURLOPT_CUSTOMREQUEST or
  curl's -X command line option.

Yang Tse (30 Mar 2012)
- [tetetest tetetest brought this change]

  CMakeLists.txt: fix Windows LDAP/LDAPS option handling
  
  bug: http://curl.haxx.se/mail/lib-2012-03/0278.html

- [tetetest tetetest brought this change]

  CMakeLists.txt: fix MS Visual Studio x64 unsigned long long literal suffix
  
  bug: http://curl.haxx.se/mail/lib-2012-03/0255.html

Steve Holme (28 Mar 2012)
- TODO: Corrected POP3 section heading

Yang Tse (28 Mar 2012)
- curl-functions.m4: update detection logic of getaddrinfo() thread-safeness
  
  Take in account that h_errno might be a modifiable lvalue not defined as
  a C preprocessor macro

Steve Holme (27 Mar 2012)
- TODO: Added SMTP and POP3 specific features

Yang Tse (27 Mar 2012)
- [Olaf Flebbe brought this change]

  tool_cb_dbg.c: fix tool_cb_dbg() to behave properly even for size 0
  
  curl segfault in debug callback triggered with CURLINFO_HEADER_OUT and size 0
  
  bug: http://curl.haxx.se/bug/view.cgi?id=3511794

- test #1405: support HTTP disabled builds

Steve Holme (26 Mar 2012)
- test #809: Updated error code to match recent pop3 changes

Yang Tse (25 Mar 2012)
- ssh.c: code cleanup, Curl_safefree() already nullifies pointer

- fix some compiler warnings

Steve Holme (25 Mar 2012)
- pop3.c: Corrected problem with state() introduced in 01690ed2bce5

- pop.c: Small code tidy up

- pop3: Removed the need for the single message LIST command handler
  
  Simplified the code to remove the need for a separate "LIST <msg id>"
  command handler and state machine and instead use the LIST command
  handler for both operations.

- pop3.c: Code policing and tidy up
  
  Corrected character and line spacing and re-ordered list and retr
  functions based on the order of their state machines.

- email: Moved server greeting responses into separate functions
  
  Moved the server greeting response handling code from the statemach_act
  functions to separate response functions. This makes the code simpler
  to follow and provides consistency with the other responses that are
  handled here.

- pop3.c: Fixed body data being written when CURLOPT_NOBODY is specified
  
  Body data would be forwarded to the client application in both the RETR
  and LIST commands even if CURLOPT_NOBODY was specified.

Daniel Stenberg (23 Mar 2012)
- [Rodrigo Silva (MestreLion) brought this change]

  docs: clarify -z/--time-cond with filename (mention mtime)
  
  Original wording could lead users in thinking it tries to
  somehow parse the filename for a date expression (like
  news_2012_03_05.html). It never mentions that it actually
  reads the mtime of the file in filesystem.

Yang Tse (23 Mar 2012)
- tests #1316 #1319 #1320 #1321: add missing keywords

- test #598: add missing keywords

- version: start working on 7.25.1-DEV

Daniel Stenberg (22 Mar 2012)
- [Benjamin Johnson brought this change]

  configure: check for gethostbyname in the watt lib
  
  This allows building of libcurl on DOS using DJGPP 2.04 and Watt-32
  sockets. I know there's already Makefile.djgpp, but I find this more
  convenient since I'm used to using the ./configure script from other
  platforms

- THANKS: 8 new contributors from 7.25.0

Version 7.25.0 (22 Mar 2012)

Daniel Stenberg (22 Mar 2012)
- RELEASE-NOTES: synced with b8b2cf612b2

Yang Tse (22 Mar 2012)
- tests #1400 #1401: add missing keywords

- http_proxy.h: fix builds with proxy or http disabled

- parsedate.c: fix a numeric overflow

Daniel Stenberg (22 Mar 2012)
- [Andrei Cipu brought this change]

  cookies: strip the numerical ipv6 host properly
  
  The commit e650dbde86d4 that stripped off [brackets] from ipv6-only host
  headers for the sake of cookie parsing wrongly incremented the host
  pointer which would cause a bad free() call later on.

Yang Tse (22 Mar 2012)
- test #598: add to Makefile.am

- test #598: OOM handling fixes

- fix several compiler warnings

Daniel Stenberg (22 Mar 2012)
- CONNECT: fix multi interface regression
  
  The refactoring of HTTP CONNECT handling in commit 41b0237834232 that
  made it protocol independent broke it for the multi interface. This fix
  now introduce a better state handling and moved some logic to the
  http_proxy.c source file.
  
  Reported by: Yang Tse
  Bug: http://curl.haxx.se/mail/lib-2012-03/0162.html

- SWS: refuse to serve CONNECT unless running as proxy

Yang Tse (21 Mar 2012)
- curl-functions.m4: update detection logic of getaddrinfo() thread-safeness
  
  Take in account that POSIX standard Issue 7 drops h_errno support. Now, we also
  consider getaddrinfo() to be thread-safe when (_POSIX_C_SOURCE >= 200809L) or
  (_XOPEN_SOURCE >= 700) independently of whether h_errno exists or not.

- fix several compiler warnings

- tests 140X: fix --libcurl generated source file reading mode for MSYS builds

- tool_easysrc.c: fix --libcurl option output file text translation mode
  
  Use fopen() with "w" mode instead of "wt" to fix cygwin builds.

- build: remove tool_cb_skt.[ch] references

Daniel Stenberg (18 Mar 2012)
- RELEASE-NOTES: synced with ad77420ac761b
  
  3 more bugs, 1 more contributor

- lwip: basic checks and macros for compatiblity

Yang Tse (17 Mar 2012)
- tool_setopt.c: more OOM handling fixes

Daniel Stenberg (16 Mar 2012)
- cmake: list_spaces_append_once fails with spaces in filename
  
  Windows standard libraries are located in C:/Program Files/Microsoft
  SDKs/[...]. They are already included in the default MSVC
  LIBPATH. Hence, find_library(WSOCK32_LIBRARY wsock32) and
  find_library(WS2_32_LIBRARY ws2_32) are not needed. They return the full
  path to the libraries including spaces. Of course,
  list_spaces_append_once will mangle the result and the build fails.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3494968

Yang Tse (16 Mar 2012)
- http_proxy.c: fix OOM handling

- tool_setopt.c: fix OOM handling

- fix several compiler warnings

- fix some compiler warnings

Daniel Stenberg (13 Mar 2012)
- [Maxim Prohorov brought this change]

  resolve with c-ares: don't resolve IPv6 when not working
  
  If the Curl_ipv6works() function says no, there is no reason to try AAAA
  names even if libcurl was built with IPv6 support enabled.
  
  Bug: http://curl.haxx.se/mail/lib-2012-03/0045.html

unknown (10 Mar 2012)
- [Steve Holme brought this change]

  smtp.c: Changed the curl error code for EHLO and HELO responses
  
  Changed the returned curl error codes for EHLO and HELO responses from
  CURLE_LOGIN_DENIED to CURLE_REMOTE_ACCESS_DENIED as a negative response
  from these commands represents no service as opposed to a login error.

Daniel Stenberg (10 Mar 2012)
- RELEASE-NOTES: synced with e650dbde86
  
  New: 12 bugs, 3 changes, 6 contributors and updated counters at the top

- [Andrei Cipu brought this change]

  Curl_http: strip off [brackets] from ipv6-only host headers
  
  Since the host name is passed in to the cookie engine it will not work
  correctly if the brackets are left in the name.
  
  Bug:http://curl.haxx.se/mail/lib-2012-03/0036.html

- [Armel Asselin brought this change]

  CURLSSH_OPT_AUTH: documented it has no effect

- [John Joseph Bachir brought this change]

  mk-ca-bundle.pl: use LWP::UserAgent with proper https verify behavior.
  
  An alternative would be:
  
  1. specify HTTPS_CA_DIR and/or HTTPS_CA_FILE
  2. ensure that Net::SSL is being used, and IO::Socket::SSL is NOT being
     used
  
  This question and answer explain:
  http://stackoverflow.com/questions/74358/

- [John Joseph Bachir brought this change]

  access the CA source file using HTTPS

- includes: remove inclusion of unused file http_proxy.h

- CONNECT: made generically not per-protocol
  
  Curl_protocol_connect() now does the tunneling through the HTTP proxy if
  requested instead of letting each protocol specific connection function
  do it.

- ssh_connect: tunnel through HTTP proxy if requested

- LWIP: don't consider HAVE_ERRNO_H to be winsock
  
  The check for Winsock definition was a bit too broad
  
  Bug: http://curl.haxx.se/mail/lib-2012-03/0046.html

- [Dave Reisner brought this change]

  curl-config: only provide libraries with --libs
  
  In line with the manpage, curl-config --libs should only provide the necessary
  library flags for the linker in order to compile software with libcurl. Also
  with this change, we match what the pkg-config file provides.

- CONTRIB: Please don't send pull requests

- libcurl docs: version corrections
  
  Correct some inconsistencies in which version some things were added.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3494091
  Reported by: "curlybugs"

- CONNECT: fix ipv6 address in the Request-Line
  
  Commit 466150bc64d fixed the Host: header with CONNECT, but I then
  forgot the preceeding request-line. Now this too uses [brackets]
  properly if a ipv6 numerical address was given.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3493129
  Reported by: "Blacat"

- [Steve Holme brought this change]

  SMTP: Added support for returning SMTP response codes
  
  Set the conn->data->info.httpcode variable in smtp_statemach_act() to
  allow Curl_getinfo() to return the SMTP response code via the
  CURLINFO_RESPONSE_CODE action.

- curl.1: updated --libcurl
  
  With Colin Hogben's recent work, --libcurl now also works with -F and
  more. Remove the previous caveat.

- test: --libcurl fixes
  
  The line endings broke when I saved the three recent patches (my fault,
  not Colin's) to 'git am' them.
  
  Adjusted the stripping of the test program for comparing to also exclude
  the SSH key file name as that will differ and use a local path name.

- [Colin Hogben brought this change]

  Add helper script convsrctest.pl to manipulate --libcurl tests.
  
  The intention is to take the output of curl's --libcurl option,
  as exercised in test 14xx, and generate a corresponding test15xx
  in which the generated code is compiled and run.  This will verify
  that the generated code behaves equivalently to the original
  invocation of the curl command.
  
  The script is not yet integrated into the configure / makefile
  machinery.

- [Colin Hogben brought this change]

  Add tests for curl's --libcurl output.
  
  These tests check the output of the --libcurl option of curl,
  including the improved option handling added in a related patch.

- [Colin Hogben brought this change]

  Generate lists and use symbols in --libcurl code output.
  
  This patch improves the output of curl's --libcurl option by
  generating code which builds curl_httppost and curl_slist lists, and
  uses symbolic names for enum and flag values.  Variants of the
  my_setopt macro in tool_setopt.h are added in order to pass extra type
  information to the code-generation step in tool_setopt.c.
  
  If curl is configured with --disable-libcurl-option then the macros
  call curl_easy_setopt directly.

- [Steve Holme brought this change]

  smtp.c: Fixed an issue with writing postdata
  
  Fixed a problem in smtp_done() when writing out the postdata as
  Curl_write() would periodically return zero bytes written.

- CURLOPT_MAIL_AUTH: added in 7.25.0
  
  Brought in commit 0cf0ab6f300

- pop3 test server: send terminating ".CRLF" only
  
  With commit 035ef06bda7 applied, the test pop3 server needs to send
  ".\r\n" as the body terminating sequence and there needs to be a final
  CRLF in the actual body in the test data file.

- [Steve Holme brought this change]

  pop3.c: Fixed drop of final CRLF in EOB checking
  
  Curl_pop3_write() would drop the final CRLF of a message as it was
  considered part of the EOB as opposed to part of the message. Whilst
  the EOB sequence needs to be searched for by the function only the
  final 3 characters should be removed as per RFC-1939 section 3.
  
  Reported by: Rich Gray
  Bug: http://curl.haxx.se/mail/lib-2012-02/0051.html

- [Steve Holme brought this change]

  smtp.c: Fixed an issue with the EOB checking
  
  Curl_smtp_escape_eob() would leave off final CRLFs from emails ending
  in multiple blank lines additionally leaving the smtpc->eob variable
  with the character count in, which would cause problems for additional
  emails when sent through multiple calls to curl_easy_perform() after a
  CURLOPT_CONNECT_ONLY.

- CURLE_FTP_PRET_FAILED: listed twice
  
  Make sure it is mentioned once and with the correct description

- --mail-auth documented

- [Steve Holme brought this change]

  SMTP: Code policing and tidy up

- [Steve Holme brought this change]

  curl: Added support for --mail-auth
  
  Added an extra command-line argument to support the optional AUTH
  parameter in SMTPs MAIL FROM command.

Kamil Dudka (16 Feb 2012)
- docs: mention that NTLM works with NSS, too

Daniel Stenberg (15 Feb 2012)
- [Steve Holme brought this change]

  DOCS: Added information for CURLOPT_MAIL_AUTH.
  
  Added information relating to the new CURLOPT_MAIL_AUTH parameter and
  reworked CURLOPT_MAIL_FROM and CURLOPT_MAIL_RCPT to be a clearer.
  
  Fixed inconsistencies of "vocalisation of the abbreviation" versus
  "vocalisation of the first word" for all abbreviations.
  
  Corrected a typo in CURLOPT_NOPROXY.

- [Steve Holme brought this change]

  smtp.c: Fixed use of angled brackets in AUTH parameter.
  
  Fixed the use of angled brackets "<>" in the optional AUTH parameter as
  per RFC-2554 section 5. The address should not include them but an
  empty address should be replaced by them.

- [Steve Holme brought this change]

  smtp_mail: Added support to MAIL FROM for the optional AUTH parameter
  
  Added a new CURLOPT_MAIL_AUTH option that allows the calling program to
  set the optional AUTH parameter in the MAIL FROM command.
  
  When this option is specified and an authentication mechanism is used
  to communicate with the mail server then the AUTH parameter will be
  included in the MAIL FROM command. This is particularly useful when the
  calling program is acting as a relay in a trusted environment and
  performing server to server communication, as it allows the relaying
  server to specify the address of the mailbox that was used to
  authenticate and send the original email.

- [toddouska brought this change]

  cyassl: update to CyaSSL 2.0.x API
  
  Modify configure.ac to test for new CyaSSL Init function and remove
  default install path to system.  Change to CyaSSL OpenSSL header and
  proper Init in code as well.
  
  Note that this no longer detects or works with CyaSSL before v2

- LIBCURL_VERSION_NUM: 0x071900
  
  I accidentally left the lowest bits 01 before

- [Steve Holme brought this change]

  SMTP: Fixed error when using CURLOPT_CONNECT_ONLY
  
  Fixed incorrect behavior in smtp_done() which would cause the end of
  block data to be sent to the SMTP server if libcurl was operating in
  connect only mode. This would cause the server to return an error as
  data would not be expected which in turn caused libcurl to return
  CURLE_RECV_ERROR.

- s/7.24.1/7.25.0
  
  We will go straight to 7.25.0 due to the new additions

- curlver.h: bumped to 7.25.0
  
  and updated the end year in the generic copyright string

- RELEASE-NOTES: synced with 2b26eb985
  
  9 bug fixes, 4 changes and numerous contributors
  
  Bumped release version and option counters

- [Colin Hogben brought this change]

  configure: add option disable --libcurl output

- [Alessandro Ghedini brought this change]

  curl tool: allow negative numbers as option values
  
  Fix the str2num() function to not check if the input string starts with a
  digit, since strtol() supports numbers prepended with '-' (and '+') too.
  This makes the --max-redirs option work as documented.

- parse_proxy: simply memory handling
  
  ... by making sure that the string is always freed after the invoke as
  parse_proxy will always copy the data and this way there's a single
  free() instead of multiple ones.

- parse_proxy: bail out on zero-length proxy names!
  
  The proxy parser function strips off trailing slashes off the proxy name
  which could lead to a mistaken zero length proxy name which would be
  treated as no proxy at all by subsequent functions!
  
  This is now detected and an error is returned. Verified by the new test
  1329.
  
  Reported by: Chandrakant Bagul
  Bug: http://curl.haxx.se/mail/lib-2012-02/0000.html

Kamil Dudka (9 Feb 2012)
- nss: add support for the CURLSSLOPT_ALLOW_BEAST option
  
  ... and fix some typos from the 62d15f1 commit.

Daniel Stenberg (9 Feb 2012)
- [Rob Ward brought this change]

  configure: don't modify LD_LIBRARY_PATH for cross compiles

- --ssl-allow-beast added
  
  This new option tells curl to not work around a security flaw in the
  SSL3 and TLS1.0 protocols. It uses the new libcurl option
  CURLOPT_SSL_OPTIONS with the CURLSSLOPT_ALLOW_BEAST bit set.

- CURLOPT_SSL_OPTIONS: added
  
  Allow an appliction to set libcurl specific SSL options. The first and
  only options supported right now is CURLSSLOPT_ALLOW_BEAST.
  
  It will make libcurl to disable any work-arounds the underlying SSL
  library may have to address a known security flaw in the SSL3 and TLS1.0
  protocol versions.
  
  This is a reaction to us unconditionally removing that behavior after
  this security advisory:
  
  http://curl.haxx.se/docs/adv_20120124B.html
  
  ... it did however cause a lot of programs to fail because of old
  servers not liking this work-around. Now programs can opt to decrease
  the security in order to interoperate with old servers better.

- [Dave Reisner brought this change]

  curl: use new library-side TCP_KEEPALIVE options
  
  Use the new library CURLOPT_TCP_KEEPALIVE rather than disabling this via
  the sockopt callback. If --keepalive-time is used, apply the value to
  CURLOPT_TCP_KEEPIDLE and CURLOPT_TCP_KEEPINTVL.

- [Dave Reisner brought this change]

  add library support for tuning TCP_KEEPALIVE
  
  This adds three new options to control the behavior of TCP keepalives:
  
  - CURLOPT_TCP_KEEPALIVE: enable/disable probes
  - CURLOPT_TCP_KEEPIDLE: idle time before sending first probe
  - CURLOPT_TCP_KEEPINTVL: delay between successive probes
  
  While not all operating systems support the TCP_KEEPIDLE and
  TCP_KEEPINTVL knobs, the library will still allow these options to be
  set by clients, silently ignoring the values.

- curl_easy_reset: reset the referer string
  
  When CURLOPT_REFERER has been used, curl_easy_reset() did not properly
  clear it.
  
  Verified with the new test 598
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3481551
  Reported by: Michael Day

Yang Tse (7 Feb 2012)
- curl tool: allow glob-loops to abort again upon critical errors
  
  This prevents clobbering of non recoverable error return codes while
  retaining intended functionality of commit 65103efe

Daniel Stenberg (6 Feb 2012)
- curl tool: don't abort glob-loop due to failures
  
  We want to continue to the next URL to try even on failures returned
  from libcurl. This makes -f with ranges still get subsequent URLs even
  if occasional ones return error. This was a regression as it used to
  work and broke in the 7.23.0 release.
  
  Added test case 1328 to verify the fix.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3481223
  Reported by: Juan Barreto

- CONNECT: send correct Host: with IPv6 numerical address
  
  When the target host was given as a IPv6 numerical address, it was not
  properly put within square brackets for the Host: header in the CONNECT
  request. The "normal" request did fine.
  
  Reported by: "zooloo"
  Bug: http://curl.haxx.se/bug/view.cgi?id=3482093

- [Martin Storsjo brought this change]

  Explicitly link to the nettle/gcrypt libraries
  
  When support for nettle was added in 64f328c787ab, I overlooked
  the fact that AC_CHECK_LIB doesn't add the tested lib to LIBS
  if the check succeeded, if a custom success code block was present.
  (The previous version of the check had an empty block for
  successful checks, adding the lib to LIBS implicitly.)
  
  Therefore, explicitly add either nettle or gcrypt to LIBS, after
  deciding which one to use. Even if they can be linked in
  transitively, it is safer to actually link explicitly to them.
  
  This fixes building with gnutls with linkers that don't allow
  linking transitively, such as for windows.

- [Pierre Ynard brought this change]

  more resilient connection times among IP addresses
  
  When connecting to a domain with multiple IP addresses, allow different,
  decreasing connection timeout values. This should guarantee some
  connections attempts with sufficiently long timeouts, while still
  providing fallback.

- [Pierre Ynard brought this change]

  remove write-only variable

Pierre Joye (26 Jan 2012)
- Merge branch 'master' of github.com:bagder/curl

- - fix IPV6 and IDN options

Yang Tse (25 Jan 2012)
- TODO-RELEASE: added item #308

Daniel Stenberg (25 Jan 2012)
- THANKS: imported contributors from 7.24.0 RELEASE-NOTES

Yang Tse (25 Jan 2012)
- test harness: update stunnel.pem Diffie-Hellman parameters from 512 to 1024 bit

- version: start working on 7.24.1-DEV

Dan Fandrich (24 Jan 2012)
- curl_easy_setopt.3: Fixed SEEKDATA & CLOSESOCKETDATA descriptions

Version 7.24.0 (24 Jan 2012)

Daniel Stenberg (24 Jan 2012)
- RELEASE-NOTES: synced with 70f71bb99f7ed9
  
  Synced and prepared for 7.24.0 release. Two security problems, one bug fix,
  two more contributors.

- gnutls: enforced use of SSLv3
  
  With advice from Nikos Mavrogiannopoulos, changed the priority string to
  add "actual priorities" and favour ARCFOUR. This makes libcurl work
  better when enforcing SSLv3 with GnuTLS. Both in the sense that the
  libmicrohttpd test is now working again but also that it mitigates a
  weakness in the older SSL/TLS protocols.
  
  Bug: http://curl.haxx.se/mail/lib-2012-01/0225.html
  Reported by: Christian Grothoff

- tests: test CRLF in URLs
  
  Related to the security vulnerability: CVE-2012-0036
  
  Bug: http://curl.haxx.se/docs/adv_20120124.html

- URL sanitize: reject URLs containing bad data
  
  Protocols (IMAP, POP3 and SMTP) that use the path part of a URL in a
  decoded manner now use the new Curl_urldecode() function to reject URLs
  with embedded control codes (anything that is or decodes to a byte value
  less than 32).
  
  URLs containing such codes could easily otherwise be used to do harm and
  allow users to do unintended actions with otherwise innocent tools and
  applications. Like for example using a URL like
  pop3://pop3.example.com/1%0d%0aDELE%201 when the app wants a URL to get
  a mail and instead this would delete one.
  
  This flaw is considered a security vulnerability: CVE-2012-0036
  
  Security advisory at: http://curl.haxx.se/docs/adv_20120124.html
  
  Reported by: Dan Fandrich

- OpenSSL: don't disable security work-around
  
  OpenSSL added a work-around for a SSL 3.0/TLS 1.0 CBC vulnerability
  (http://www.openssl.org/~bodo/tls-cbc.txt). In 0.9.6e they added a bit
  to SSL_OP_ALL that _disables_ that work-around despite the fact that
  SSL_OP_ALL is documented to do "rather harmless" workarounds.
  
  The libcurl code uses the SSL_OP_ALL define and thus logically always
  disables the OpenSSL fix.
  
  In order to keep the secure work-around workding, the
  SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS bit must not be set and this change
  makes sure of this.
  
  Reported by: product-security at Apple

- RELEASE-NOTES: synced with 6e2fd2c9ea
  
  3 more bugfixes, 3 more contributors

- CURLOPT_ACCEPTTIMEOUT_MS: spellfix

Dan Fandrich (20 Jan 2012)
- examples: updated README with two new example programs

Daniel Stenberg (20 Jan 2012)
- URL parse: user name with ipv6 numerical address
  
  Using a URL with embedded user name and password didn't work if the host
  was given as a numerical IPv6 string, like ftp://user:password@[::1]/
  
  Reported by: Brandon Wang
  Bug: http://curl.haxx.se/mail/archive-2012-01/0047.html

Yang Tse (20 Jan 2012)
- telnet.c: fix OOM triggered segfault

- testtrace.c: fix compiler warning

- OpenSSL: follow-up for commit a20daf90e3
  
  avoid checking preprocessor definition official value

Pierre Joye (19 Jan 2012)
- - s, use, enable, for options name, avoiding conflicts with the names used in the makefile

Daniel Stenberg (19 Jan 2012)
- curl.1: improve --stderr wording
  
  As is pointed out in this bug report, there can indeed be situation
  where --stderr has a point even when the "real" stderr can be
  redirected. Remove the superfluous and wrong comment.
  
  bug: http://curl.haxx.se/bug/view.cgi?id=3476020

- KNOWN_BUGS: can't receive zero bytes file properly
  
  http://curl.haxx.se/bug/view.cgi?id=3438362

Yang Tse (18 Jan 2012)
- ssl session caching: fix compiler warnings

Daniel Stenberg (18 Jan 2012)
- polarssl: show cipher suite name correctly with 1.1.0
  
  Apparently ssl_get_ciphersuite() is needed to get the name of the used
  cipher suite.

- polarssl: show error code correctly
  
  The value was turned negative when it shouldn't have been

- polarssl: havege_rand is not present in version 1.1.0
  
  ... it is now named havege_random!
  
  Reported by: Robert Schumann
  Bug: http://curl.haxx.se/mail/lib-2012-01/0178.html

- RELEASE-NOTES: synced with 5d70a61b94604
  
  5 more bug fixes, 1 more contributor

- [Colin Hogben brought this change]

  Add two tests for telnet: URLs
  
  Add simple telnet tests which (ab)use the http server.
  The second test checks for an input file handling bug.

- [Colin Hogben brought this change]

  Remove bogus optimisation of telnet upload.
  
  Remove wrongly implemented optimisation of telnet upload, apparently
  intended to allow the library to avoid manually polling for input.

- [Colin Hogben brought this change]

  Use correct file descriptor for telnet upload.
  
  Fix a bug where input was read from stdin even when a different FILE *
  had been configured via CURLOPT_READDATA

Yang Tse (18 Jan 2012)
- OpenLDAP: fix LDAP connection phase memory leak
  
  bug: http://curl.haxx.se/bug/view.cgi?id=3474308

- [Johannes Bauer brought this change]

  OpenSSL: fix PKCS#12 certificate parsing related memory leak
  
  Leak triggered when CURLOPT_SSLCERTTYPE and CURLOPT_SSLKEYTYPE set to P12
  and both CURLOPT_SSLCERT and CURLOPT_SSLKEY point to the same PKCS#12 file.

- OpenSSL: SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG option is no longer enabled
  
  SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG option enabling allowed successfull
  interoperability with web server Netscape Enterprise Server 2.0.1 released
  back in 1996 more than 15 years ago.
  
  Due to CVE-2010-4180, option SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG has
  become ineffective as of OpenSSL 0.9.8q and 1.0.0c. In order to mitigate
  CVE-2010-4180 when using previous OpenSSL versions we no longer enable
  this option regardless of OpenSSL version and SSL_OP_ALL definition.

- tests: enable time tracing on tests 500, 573 and 585

- tests: testtrace.[ch] provides debug callback for libtest usage
  
  Allows tests from the libtest subdir to generate log traces
  similar to those of curl with --tracetime and --trace-ascii
  options but with output going to stderr.

- sws.c: fix proxy mode secondary connection monitoring condition

- add LF termination to infof() trace string

- sws.c: improve proxy mode torture testing support - followup to 18c6c8a5

Daniel Stenberg (16 Jan 2012)
- url2file: new simple example
  
  Just showing how to download the contents of a given URL into a local
  file.
  
  Based on a suggestion and example code by Georg Potthast

- imap.c: a dead simple imap example
  
  Just to show that IMAP is used just like other protocols

Yang Tse (16 Jan 2012)
- sws.c: improve proxy mode torture testing support - followup to c731fc58

- sws.c: improve proxy mode torture testing support - followup to d4bf87dc

- Curl_proxyCONNECT() trace known bug #39

Daniel Stenberg (14 Jan 2012)
- test: verify HTTP response code 308
  
  This newly speced HTTP status code already works as intended in the new
  spec:
  http://greenbytes.de/tech/webdav/draft-reschke-http-status-308-02.html
  
  Test 1325 is added to verify that the method is kept after the redirect

Yang Tse (13 Jan 2012)
- http_negotiate_sspi.c: fix compiler warning

- ssh.c: fix compiler warning

- sws.c: improve proxy mode torture testing support

Daniel Stenberg (12 Jan 2012)
- RELEASE-NOTES: synced with 9f20379fe4
  
  5 bug fixes, 3 more contributors

- hostip: avoid getaddrinfo when c-ares is used
  
  Some functions using getaddrinfo and gethostbyname were still
  mistakingly being used/linked even if c-ares was selected as resolver
  backend.
  
  Reported by: Arthur Murray
  Bug: http://curl.haxx.se/mail/lib-2012-01/0160.html

Yang Tse (9 Jan 2012)
- sws.c: replace sleep() usage with wait_ms()

Daniel Stenberg (9 Jan 2012)
- [gsengun brought this change]

  FTP: CURLE_PARTIAL_FILE should not cause control connection to be closed
  
  Test 161 updated accordingly

Yang Tse (8 Jan 2012)
- sws.c: some compiler warning fixes

- lib/setup.h: portable symbolic names for Winsock shutdown() mode flags

- sws.c: 812fa73057 follow-up

- sws.c: some IPv6 proxy mode peparatory adjustments

Daniel Stenberg (5 Jan 2012)
- curl.h: provide backwards compatible symbols
  
  In commit c834213ad52 we re-used some obsolete error codes, and here are
  two defines that makes sure existing source codes that happen to use any
  of these deprecated ones will still compile.
  
  As usual, define CURL_NO_OLDIES to avoid getting these "precaution
  defines".

- win32-threaded-resolver: stop using a dummy socket
  
  Previously the code would create a dummy socket while resolving just to
  have curl_multi_fdset() return something but the non-win32 version
  doesn't do it this way and the creation and use of a socket that isn't
  made with the common create-socket callback can be confusing to apps
  using the multi_socket API etc.
  
  This change removes the dummy socket and thus will cause
  curl_multi_fdset() to return with maxfd == -1 more often.

- [Peter Sylvester brought this change]

  OpenSSL: remove reference to openssl internal struct
  
  With this change, curl compiles with the new OPENSSL_NO_SSL_INTERN
  cflag. This flag might become the default in some distant future.

Yang Tse (4 Jan 2012)
- test1320 test1321: avoid User-Agent comparison

- httpserver.pl: reorder sws command line options
  
  make 'pidfile' and 'logfile' options appear first on command line in order
  to ensure that processing of other options which write to logfile do this
  to intended file and not the default one.

- sws.c: fix proxy mode segfault

- tool_formparse.c: fix compiler warning: enumerated type mixed with another type

- krb5.c: fix compiler warning: variable set but not used

Daniel Stenberg (4 Jan 2012)
- KNOWN_BUGS: #77 CURLOPT_FORBID_REUSE kills NTLM

- [Steve Holme brought this change]

  Fixed use of CURLUSESSL_TRY for POP3 and IMAP based connections.
  
  Fixed a problem in POP3 and IMAP where a connection would fail when
  CURLUSESSL_TRY was specified for a server that didn't support
  SSL/TLS connections rather than continuing.

- [Steve Holme brought this change]

  Fixed incorrect error code being returned in STARTTLS
  
  The STARTTLS response code in SMTP, POP3 and IMAP would return
  CURLE_LOGIN_DENIED rather than CURLE_USE_SSL_FAILED when SSL/TLS
  was not available on the server.
  
  Reported by: Gokhan Sengun
  Bug: http://curl.haxx.se/mail/lib-2012-01/0018.html

- curl_easy_setopt: refer to the most recent URI RFC

- RELEASE-NOTES: synced with 2f4a487a68
  
  Two bugfixes, two more contributors

- tests: test IMAP, POP3 and SMTP over HTTP proxy tunnel

- test proxy supports CONNECT
  
  There's a new 'http-proxy' server for tests that runs on a separate port
  and lets clients do HTTP CONNECT to other ports on the same host to
  allow us to test HTTP "tunneling" properly.
  
  Test cases now have a <proxy> section in <verify> to check that the
  proxy protocol part matches correctly.
  
  Test case 80, 83, 95, 275, 503 and 1078 have been converted. Test 1316
  was added.

- curl_easy_strerror.3: minor synopsis edit of the look

Yang Tse (2 Jan 2012)
- hostip.c: fix potential write past the end of string buffer

- hostip.c: fix Curl_loadhostpairs() OOM handling

- runtests.pl: on test failure, don't show trace log files of other tests

Daniel Stenberg (1 Jan 2012)
- Curl_input_negotiate: use the correct buffer for input
  
  Unfortunately we have no test cases for this and I have no SSPI build or
  server to verify this with. The change seems simple enough though.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3466497
  Reported by: Patrice Guerin

- runtests: put trace outputs in log/trace[num] for all tests

- just a stupid typo

- SFTP dir: increase buffer size counter
  
  When the buffer gets realloced to hold the file name in the
  SSH_SFTP_READDIR_LINK state, the counter was not bumped accordingly.
  
  Reported by: Armel Asselin
  Patch by: Armel Asselin
  Bug: http://curl.haxx.se/mail/lib-2011-12/0249.html

- RELEASE-NOTES: synced with 81ebdd9e287
  
  6 more bugfixes, 3 more contributors

- create_hostcache_id: use the key lower cased
  
  ... to make sure the DNS cache is properly case insensitive

- changed case: use new host name for subsequent HTTP requests
  
  When a HTTP connection is re-used for a subsequent request without
  proxy, it would always re-use the Host: header of the first request. As
  host names are case insensitive it would make curl send another host
  name case that what the particular request used.
  
  Now it will instead always use the most recent host name to always use
  the desired casing.
  
  Added test case 1318 to verify.
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0314.html
  Reported by: Alex Vinnik

- CURLOPT_RESOLVE: avoid adding already present host names
  
  The load host names to DNS cache function was moved to hostip.c and it
  now makes sure to not add host names that already are present in the
  cache. It would previously lead to memory leaks when for example using
  the --resolve and multiple URLs on the command line.

Dan Fandrich (31 Dec 2011)
- runtests.pl: Use logmsg more consistently

Daniel Stenberg (30 Dec 2011)
- [Alessandro Ghedini brought this change]

  examples: update README, Makefile.inc and gitignore with pop3s examples

- [Alessandro Ghedini brought this change]

  examples: add a couple of simple pop3s examples
  
  These examples show how to fetch a single message (RETR command) and how to
  list all the messages in a given mailbox (LIST command), with authentication
  via SSL.
  
  They were both based on the https.c example.

Yang Tse (30 Dec 2011)
- removed execute file permission

- removed trailing whitespace

- ftpserver.pl: arbitrary application data splitting among TCP packets [II]
  
  Take in account that 'pingpong' server commands may arrive splitted among
  several sockfilt 'DATA' PDU's.

- ftpserver.pl: arbitrary application data splitting among TCP packets [I]
  
  Initial step in order to allow our pingpong server to better support arbitrary
  application data splitting among TCP packets. This first commit only addresses
  reasembly of data that sockfilter processes reads from soockets and pingpong
  server later reads from sockfilters stdout.

- testcurl.pl: 82c344a3 follow-up

- testcurl.pl: log ACLOCAL_FLAGS

- testcurl.pl: third party m4 warnings filtering adjustment
  
  Make testcurl.pl ignore messages pertaining to third party m4 files we don't
  care nor use on a file basis policy while retaining all other warnings.
  
  This closes temporary commit e71e226f

Kamil Dudka (25 Dec 2011)
- transfer: avoid unnecessary timeout event when waiting for 100-continue
  
  The commit 9dd85bc unintentionally changed the way we compute the time
  spent waiting for 100-continue.  In particular, when using a SSL client
  certificate, the time spent by SSL handshake was included and could
  cause the CURL_TIMEOUT_EXPECT_100 timeout to be mistakenly fired up.
  
  Bug: https://bugzilla.redhat.com/767490
  Reported by: Mamoru Tasaka

Yang Tse (25 Dec 2011)
- transfer.c: move a logging statement placement

- hash.c: fix OOM triggered segfault

Daniel Stenberg (24 Dec 2011)
- ftp_do_more: don't return success until all is done
  
  ftp_do_more() returns after accepting the server connect however it
  needs to fall through and set "*complete" to TRUE before exit from the
  function.
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0250.html
  Reported by: Gokhan Sengun

- Curl_do_more: fix typo logic
  
  In the recent do_more fix the new logic was mistakenly checking the
  pointer instead of what it points to.
  
  Reported by: Gokhan Sengun
  Bug: http://curl.haxx.se/mail/lib-2011-12/0250.html

- SFTP mkdir: use correct permission
  
  When sending quote command to a SFTP server and 'mkdir' was used, it
  would send fixed permissions and not use the CURLOPT_NEW_DIRECTORY_PERMS
  as it should.
  
  Reported by: Armel
  Patch by: Armel
  Bug: http://curl.haxx.se/mail/lib-2011-12/0249.html

Yang Tse (23 Dec 2011)
- buildconf: minor tweaks commit 430527a1 follow-up

Daniel Stenberg (23 Dec 2011)
- [Colin Hogben brought this change]

  Require a less ancient version of perl
  
  The INTERNALS document suggested that compatibility should be
  maintained with perl version 4, but this was untrue - scripts such as
  chksource.pl and runtests.pl use perl5-isms.

- resolve: don't leak pre-populated dns entries
  
  CURLOPT_RESOLVE populates the DNS cache with entries that are marked as
  eternally in use. Those entries need to be taken care of when the cache
  is killed off.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3463121
  Reported by: "tw84452852"

- new test: verify --resolve
  
  Test 1317 verifies --resolve (leaked memory)
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3463121
  Reported by: "tw84452852"

Yang Tse (23 Dec 2011)
- testcurl.pl: temporary change
  
  Allow autobuilds to run a couple of days without filtering out aclocal
  underquoted definition warnings.

Daniel Stenberg (21 Dec 2011)
- operate: removed a single trailing space

Dan Fandrich (21 Dec 2011)
- --retry: Retry transfers on timeout and DNS errors

Yang Tse (21 Dec 2011)
- buildconf: minor tweaks

- formdata.c: OOM handling fixes

Daniel Stenberg (21 Dec 2011)
- TODO: 1.7 Happy Eyeball dual stack connect

Dan Fandrich (20 Dec 2011)
- runtests.pl: Fixed perl warning when using the -l option

Daniel Stenberg (20 Dec 2011)
- RELEASE-NOTES: added two references

- Curl_socket_check: enlarge poll struct array to 3
  
  This function was introduced in commit 5527417afae0 and as pointed out
  by Gokhan Sengun, the array with poll structs must large enough to hold
  3 sockets since that is what the function can accept. It could be noted
  that he had this fixed in his patch as posted in
  http://curl.haxx.se/mail/lib-2011-12/0179.html
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0228.html
  Reported by: Gokhan Sengun

- RELEASE-NOTES: synced with 380bade777
  
  5 new bugfixes, 2 new changes and 4 new contributors

- TODO: remove active FTP from section 2.1
  
  It is no longer done blocking in the multi interface

- libcurl docs: add the new FTP accept option + errors

- timeleft_accept: ack global timeout, moved to ftp.c
  
  First off the timeout for accepting a server connect back must of course
  respect a global timeout. Then the timeleft function is only used by ftp
  code so it was moved to ftp.c and made static.

- libcurl-tutorial.3: curl doesn't sent pragma no-cache
  
  It did a long time ago

- libcurl-multi.3: active FTP is no longer blocking!

- FTP: move FTP-specific struct field to ftpc_conn
  
  "wait_data_conn" was added to the connectionbits in commit c834213ad5 for
  handling active FTP connections but as it is purely FTP specific and now
  only ever accessed by ftp.c I moved it into the FTP connection struct.

- non-blocking active FTP: cleanup multi state usage
  
  Backpedaled out the funny double-change of state in the multi state
  machine by adding a new argument to the do_more() function to signal
  completion. This way it can remain in the DO_MORE state properly until
  done. Long term, the entire DO_MORE logic should be moved into the FTP
  code and be hidden from the multi code as the logic is only used for
  FTP.

- [Gokhan Sengun brought this change]

  FTP: perform active connections non-blocking
  
  1- Two new error codes are introduced.
  
  CURLE_FTP_ACCEPT_FAILED to be set whenever ACCEPTing fails because of
  FTP server connected.
  
  CURLE_FTP_ACCEPT_TIMEOUT to be set whenever ACCEPTing timeouts.
  
  Neither of these errors are considered fatal and control connection
  remains OK because it could just be a firewall blocking server to
  connect to the client.
  
  2- One new setopt option was introduced.
  
  CURLOPT_ACCEPTTIMEOUT_MS
  
  It sets the maximum amount of time FTP client is going to wait for a
  server to connect. Internal default accept timeout is 60 seconds.

- sockets: new Curl_socket_check() can wait for 3 sockets
  
  This offers an alternative to the existing Curl_socket_ready() API which
  only checks one socket for read and one for write.

- [Cédric Deltheil brought this change]

  curl.h: add __ANDROID__ macro check
  
  When working with the Android Standalone Toolchain the compiler defines
  this macro:
  
    /path/to/arm-linux-androideabi-gcc -E -dM - < /dev/null \
    | grep -i android
    #define __ANDROID__ 1
  
  We really need to check both ANDROID and __ANDROID__ since I've observed
  that:
  
  * if you use Android.mk file(s) and the 'ndk-build' script (aka vanilla
  way), ANDROID is predefined (see -DANDROID extra C flag),
  
  * if you use the Android Standalone Toolchain, then __ANDROID__ is
  predefined as stated by the compiler

- lib500: verify timers relative each other
  
  As commit ce896875f8 fixed a timer that accidentally had been moved in
  code and then returned a bad timer, the lib500.c code (used in test 500
  and some others) now verifies 5 timers against each other to verify that
  they have the correct relative values. We cannot compare against
  absolute values as the timings will vary a lot.

- Curl_pgrsTime: store now in an auto variable
  
  It makes it easier to introduce debug outputs in this function, and
  everything in the function is using the value anyway so it might even be
  more efficient.

- timer: restore PRETRANSFER timing
  
  Regression introduced in 7.23.0 with commit 9dd85bce. The function in
  which the PRETRANSFER time stamp was recorded was moved in time causing
  it be stored very quickly after the start timestamp. On most systems
  shorter than 1 millisecond and thus it wouldn't even show with -w
  "%{time_pretransfer}" using the command line tool.
  
  Bug: http://curl.haxx.se/mail/archive-2011-12/0022.html
  Reported by: Toni Moreno

- [Bernhard Reutner-Fischer brought this change]

  libcurl.m4: Fix quoting arguments of AC_LANG_PROGRAM
  
  Parameters were underquoted, resulting in
  warning: AC_LANG_CONFTEST: no AC_LANG_SOURCE call detected in body
  
  Signed-off-by: Bernhard Reutner-Fischer <rep.dot.nop@gmail.com>

- gitignore: ignore the symbol versioning file

- tutorial: remove CURLM_CALL_MULTI_PERFORM add sharing
  
  The CURLM_CALL_MULTI_PERFORM reference is an old leftover I had to
  remove.
  
  I also added some blurb to the previously blank "sharing" section.

- [Alessandro Ghedini brought this change]

  configure: add symbols versioning option
  
  Allow, at configure time, the production of versioned symbols. The
  symbols will look like "CURL_<FLAVOUR>_<VERSION> <SYMBOL>", where
  <FLAVOUR> represents the SSL flavour (e.g. OPENSSL, GNUTLS, NSS, ...),
  <VERSION> is the major SONAME version and <SYMBOL> is the actual symbol
  name. If no SSL library is enabled the symbols will be just
  "CURL_<VERSION> <SYMBOL>".

- [Sven Wegener brought this change]

  Use Curl_ssl_connect for non-blocking connect fallback
  
  This gets the appconnect time right for ssl backends, which don't
  support non-blocking connects.
  
  Signed-off-by: Sven Wegener <sven.wegener@stealer.net>

- RELEASE-NOTES: synced with af9bc1604c1
  
  One new feature, one bug fix. Introduced references in this file for
  mentioned issues after this discussion:
  http://curl.haxx.se/mail/lib-2011-12/0187.html
  
  The plan is to let the references get moved over to the changes.html
  file at release-time

- curl.1: minor white space cleanup

- [Alessandro Ghedini brought this change]

  docs: improve description of the --capath option
  
  Document the possibility of providing multiple values using the ":"
  separator, and the fact that the default value will be ignored if the
  option is used.

- [Steve Holme brought this change]

  DOCS: Added SMTP information to CURLOPT_INFILESIZE

- Curl_proxyCONNECT: use newlines in debug output

- curl -F: fix multiple file upload with custom type
  
  Test case 1315 was added to verify this functionality. When passing in
  multiple files to a single -F, the parser would get all confused if one
  of the specified files had a custom type= assigned.
  
  Reported by: Colin Hogben

- [Colin Hogben brought this change]

  New test for multiple file upload
  
  test 1315 checks correct behaviour when uploading multiple files.
  Buggy behaviour has been seen where only two attachments are sent.

Yang Tse (15 Dec 2011)
- configure: libtool 1.5 tweaks

Daniel Stenberg (15 Dec 2011)
- [Colin Hogben brought this change]

  Correct substitution var names
  
  Two variable names were wrong in the documentation.

- [Colin Hogben brought this change]

  Correct default upload mimetype in manual
  
  The default content-type for file uploads is application/octet-stream,
  not text/plain as stated in the MANUAL.

- [Alessandro Ghedini brought this change]

  docs: fix typo in curl_easy_setopt manpage

Yang Tse (13 Dec 2011)
- if2ip.[ch]: fix compilation with MinGW
  
  Avoid 'interface' literal that some MinGW versions define as a macro

- connect.c: fix compiler warning 'enumerated type is mixed with another type'

- if2ip.c: fix compiler warning 'unused parameter'

- pop3.c: fix compiler warning variable may be used uninitialized

- if2ip.c: fix compiler warning 'enumerated type is mixed with another type'

Daniel Stenberg (12 Dec 2011)
- [Jason Glasgow brought this change]

  CURLOPT_INTERFACE: avoid resolving interfaces names
  
  Do not try to resolve interfaces names via DNS by recognizing interface
  names in a few ways.  If the interface option argument has a prefix of
  "if!" then treat the argument as only an interface.  Similarly, if the
  interface argument is the name of an interface (even if it does not have
  an IP address assigned), treat it as an interface name.  Finally, if the
  interface argument is prefixed by "host!" treat it as a hostname that
  must be resolved by /etc/hosts or DNS.
  
  These changes allow a client using the multi interfaces to avoid
  blocking on name resolution if the interface loses its IP address or
  disappears.

- RELEASE-NOTES: synced with 1259ccf7474
  
  5 more bugfixes, 5 more contributors

- [Steve Holme brought this change]

  ConnectionExists: Fix reuse for TLS upgraded connections
  
  Fixed the connection reuse detection in ConnectionExists() when
  comparing a new connection that is non-SSL based against that of a SSL
  based connection that has become so by being upgraded via TLS.

- create_conn: don't switch to HTTP protocol if tunneling is enabled
  
  This is a regression since who knows when. When spotting that a HTTP
  proxy is used we must not uncondititionally enable the HTTP protocol
  since if we do tunneling through the proxy we're still using the target
  protocol.
  
  Reported by: Naveen Chandran

- FAQ: add --resolve details to question 3.19

- [Gokhan Sengun brought this change]

  Curl_closesocket: clear sock_accepted on close
  
  As a follow-up from commit d5b5f64bce3a8, clear the sock_accepted status
  when such a socket is closed to avoid a re-used connection to retain the
  state wrongly.
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0079.html

- static SSL windows builds: add more libs to the link
  
  Starting with some recent OpenSSL versions (1.0.0e was mentioned)
  linking with a static openssl requires a set of more libs to be linked
  on Windows.
  
  Thanks also to Steve Holme and Martin Storsj for additional feedback.
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0063.html
  Reported by: Ward Willats

- [Gokhan Sengun brought this change]

  multi interface: fix block when CONNECT_ONLY option is used

Dan Fandrich (6 Dec 2011)
- Added some include files in a couple of example programs
  
  This improves portability of the examples.  This patch was
  submitted to the OpenBSD ports collection by naddy.

Daniel Stenberg (6 Dec 2011)
- MakefileBuild: fix the static build
  
  This is a left-over fix from commit b7e242de0e that Tom Wright
  suggested.
  
  Reported by: Ward Willats

- OpenSSL: check for the SSLv2 function in configure
  
  If no SSLv2 was detected in OpenSSL by configure, then we enforce the
  OPENSSL_NO_SSL2 define as it seems some people report it not being
  defined properly in the OpenSSL headers.

- CURLOPT_CONNECTTIMEOUT: default is 300 seconds
  
  If the option is set to 0, the default timeout will be used - which in
  modern libcurl versions equals 300 seconds (== 5 minutes).
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0051.html
  Reported by: Vladimir Grishchenko

- [Rob Ward brought this change]

  progress function example: include timed interval
  
  Adds a timer based off of CURLINFO_TOTAL_TIME that is used to perform
  certain actions after a minimum amount of time has passed using the
  progress function. As a consequence the curl handle is now also passed
  into the progress function. Progress example now also includes an
  example of how to retreive the TOTAL_TIME and print it out.

- RELEASE-NOTES: synced with 347f951c390
  
  8 more bugs, 5 more contributors

- SSH: fix CURLOPT_SSH_HOST_PUBLIC_KEY_MD5
  
  When a 32 digit hex key is given as a hostkey md5 checksum, the code
  would still run it against the knownhost check and not properly
  acknowledge that the md5 should then be the sole guide for.
  
  The verbose output now includes the evaluated MD5 hostkey checksum.
  
  Some related source code comments were also updated.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3451592
  Reported by: Reza Arbab

- Curl_resolver_is_resolved: differentiate between host/proxy errors
  
  As there are different return codes for host vs proxy errors, this function
  now properly returns the code properly depending on what was attempted to get
  resolved.
  
  Bug: http://curl.haxx.se/mail/archive-2011-12/0010.html
  Reported by: Jason Liu

- c-ares: return proxy failure for all proxy types
  
  When making a distinction which return code to return, the code previously
  only regarded HTTP proxies to be proxies and thus return host-related errors
  for failures on other proxy types than HTTP. Now all proxy types will be
  considered proxies...

- FTP: close callback fix
  
  Keep track of which sockets that are the result of accept() calls and
  refuse to call the closesocket callback for those sockets. Test case 596
  now verifies that the open socket callback is called the same number of
  times as the closed socket callback for active FTP connections.
  
  Bug: http://curl.haxx.se/mail/lib-2011-12/0018.html
  Reported by: Gokhan Sengun

- FTP: call opensocket callback properly
  
  When the new socket is created for an active connection, it is now done
  using the open socket callback.
  
  Test case 596 was modified to run fine, although it hides the fact that
  the close callback is still called too many times, as it also gets
  called for closing sockets that were created with accept().

- Curl_socket: internal replacement for socket()
  
  Moved out into a separate function to work as a "generic" socket()
  replacement.

- test: verify the opensocket callback for FTP
  
  test 595: for passive FTP
  test 596: for active FTP

- [Jason Glasgow brought this change]

  CURLOPT_DNS_SERVERS: set name servers if possible (fix)
  
  Ensure that CURLE_OK is returned if setting the name servers is successfull.

- multi interface: only use non-NULL function pointer!
  
  If the socket callback function pointer hasn't been set, we must not
  attempt to use it. Commit adc88ca20 made it more likely to occur.

- [Jason Glasgow brought this change]

  multi: handle timeouts on DNS servers by checking for new sockets
  
  If the first name server is not available, the multi interface does
  not invoke the socket_cb when the DNS request to the first name server
  timesout.  Ensure that the list of sockets are always updated after
  calling Curl_resolver_is_resolved.
  
  This bug can be reproduced if Curl is complied with --enable_ares and
  your code uses the multi socket interfaces and the
  CURLMOPT_SOCKETFUNCTION option.  To test try:
    iptables -I INPUT \
             -s $(sed -n -e '/name/{s/.* //p;q}' /etc/resolv.conf)/32 \
             -j REJECT
  and then run a program which uses the multi-interface.

- test 815: verify POP3 dot-first-on-line unescaping

- [Steve Holme brought this change]

  POP3: fixed escaped dot not being striped out
  
  Changed the eob detection to work across the whole of the buffer so that
  lines that begin with a dot (which the server will have escaped) are
  passed to the client application correctly.

Yang Tse (30 Nov 2011)
- buildconf: follow-up for commit 7e02f7fd

- buildconf: fix libtool 1.5.x warnings triggered with autoconf 2.6x or later
  
  Using libtool 1.5.x (x < 26) with autoconf 2.6x or later generates warnings
  due to some libtool variables not following naming convention for variables
  that will be cached.
  
  This is addressed renaming a couple of variables to make these follow expected
  naming convention.

Daniel Stenberg (30 Nov 2011)
- RELEASE-NOTES: synced with 1038d0aa1
  
  5 bugfixes and 1 new contributor

Yang Tse (29 Nov 2011)
- pop3.c: fix compiler warning

- configure: avoid usage of macro PKG_CHECK_MODULES
  
  libidn option adjusted in order to use pkg-config info when available
  in a similar way as we already do for other libraries.

Daniel Stenberg (29 Nov 2011)
- POP3: detect when LIST returns no mails
  
  By making sure the function can detect an "end of body" sequence
  immediately on the first line, test 811 is now enabled.

- ftpserver: output CRLF in logs
  
  Previously the log function would just filter out all CR and LF
  occurances from the log to make it more readable. This had the downside
  that it made it very hard to see CR LFs when they actually matters.
  
  Now, they're instead converted to "[CR]" and "[LR]" in the log to become
  apparent to readers.

- POP3: fix end of body detection
  
  Curl_pop3_write() now has a state machine that scans for the end of a
  POP3 body so that the CR LF '.' CR LF sequence can come in everything
  from one up to five subsequent packets.
  
  Test case 810 is modified to use SLOWDOWN which makes the server pause
  between each single byte and thus makes the POP3 body get sent to curl
  basically one byte at a time.

- test: added POP3 test with dot-prefixed line
  
  Test 815 is disabled for now since libcurl currently doesn't unescape
  such lines the way it should. See mail:
  
  http://curl.haxx.se/mail/lib-2011-11/0324.html

- configure: fix to make older pkg-config play well
  
  configure.ac:1349: error: possibly undefined macro: PKG_CONFIG_LIBDIR
  
  Obviously this is not a problem with pkg-config 0.26 but older versions
  seem to show this.
  
  Fix suggested by: Kamil Dudka
  Reported by: Guenter
  Bug: http://curl.haxx.se/mail/lib-2011-11/0298.html

- test 1211: FTP test to repeat bug #3429299
  
  "Active FTP hangs if server does not open data connection"
  
  The server first sends a 150 and then when libcurl waits for the data
  transfer, the server sends a 425.

- [Mark Brand brought this change]

  configure: add support for pkg-config detection of libidn

- FTP tests 1206 - 1209: don't expect QUIT
  
  The protocol parts for these tests do not include QUIT simply because
  the error is CURLE_OPERATION_TIMEDOUT (28) which is a generic timeout
  error without specificly saying for which connection it concerns, and
  for timeouts libcurl marks the control channel as "invalid". As this
  test case times out for the data connection it could still use the
  control channel.

Yang Tse (25 Nov 2011)
- CyaSSL 2.0+ library initialization adjustment

Daniel Stenberg (25 Nov 2011)
- [Jonas Schnelli brought this change]

  rectify comment

- SSLSESSION_SHARED: new macro to check if session is shared
  
  Added convenience macro to use to check if a handle is using a shared
  SSL session, and fixed so that Curl_ssl_close_all() doesn't lock when
  the session isn't shared.

Yang Tse (25 Nov 2011)
- telnet.c: fix MSVC compiler warning

- tvdiff_secs(): sub-zero time difference adjustment
  
  Skip a floating point addition operation when integral part of time difference
  is zero. This avoids potential floating point addition rounding problems while
  preserving decimal part value.

Daniel Stenberg (25 Nov 2011)
- telnet: fix macros to allow proper semicolon use
  
  Macros that look like function calls need to be made so that we can use
  semicolons properly for indentation and for reducing the risk for
  mistakes when using them.

- [Laurent Rabret brought this change]

  TELNET: improved treatment of options
  
  1) enables the Window Size option
  2) allows the server to enable the echo mode
  3) allows an app using libcurl to disable the default binary mode
  
  Signed-off-by: Laurent Rabret

- RELEASE-NOTES: synced with 2c905fd1f82

- [Jonas Schnelli brought this change]

  query-part: ignore the URI part for given protocols
  
  By setting PROTOPT_NOURLQUERY in the protocol handler struct, the
  protocol will get the "query part" of the URL cut off before the data is
  handled by the protocol-specific code. This makes libcurl adhere to
  RFC3986 section 2.2.
  
  Test 1220 is added to verify a file:// URL with query-part.

- symbols.pl: provide LIBCURL_HAS macro for apps
  
  Experience has shown that the symbols-in-versions file is very useful to
  applications that want to build with a wide range of libcurl versions.
  It is however easy to get it wrong and the source gets a bit messy with
  all the fixed numerical comparisions.
  
  The point of this script is to provide an easy-to-use macro for libcurl-
  using applications to do preprocessor checks for specific libcurl
  defines, and yet make the code clearly show what the macro is used for.

Yang Tse (24 Nov 2011)
- lib573.c: fix double data type variable comparison with zero

- getinfo.c: reset app connect time when clearing session-info time variables

- Fix unreleased regression when using windows gnutls versions older than 2.8

Daniel Stenberg (23 Nov 2011)
- [Mark Brand brought this change]

  gnutls: only translate winsock errors for old versions
  
  Bugfix: https handshake fails using gnutls 3 on windows
  http://sourceforge.net/tracker/index.php?func=detail&aid=3441084&group_id=976&atid=100976
  
  New gnutls versions have an error handler that knows about Winsock
  errors, which is why gnutls_transport_set_global_errno() was deprecated
  and then removed.
  
  This is a correction of commit f5bb370 (blame me) which meant to
  reimplement gnutls_transport_set_global_errno(), which is not necessary.

- protocol_connect: show verbose connect and set connect time
  
  Regression: commit b998d95b (shipped first in release 7.22.0) made the
  condition always equal false that should reset the TIMER_CONNECT timer
  and call the Curl_verboseconnect() function.
  
  Reported by: "Captain Basil"
  Bug: http://curl.haxx.se/mail/archive-2011-11/0035.html

- -J -O: use -O name if no Content-Disposition header comes!
  
  A regression between 7.22.0 and 7.23.0 -- downloading a file with the
  flags -O and -J results in the content being written to stdout if and
  only if there was no Content-Disposition header in the http response. If
  there is a C-D header with a filename attribute, the output is correctly
  written.
  
  Reported by: Dave Reisner
  Bug: http://curl.haxx.se/mail/archive-2011-11/0030.html

- [Martin Storsjo brought this change]

  Add support for using nettle instead of gcrypt as gnutls backend

- [Jonas Schnelli brought this change]

  test: SFTP quote commands with * prefix
  
  Related to the f64812ca63 commit

- CURLOPT_QUOTE: SFTP supports the '*'-prefix now

- [Jonas Schnelli brought this change]

  SFTP: support '*' prefix for quote operations
  
  prefixing a command with '*' means it is allowed to fail without
  aborting the chain actions

- getsessionid: don't ever return while locked
  
  Also, check for the session sharing bit instead of comparing pointers

- Curl_ssl_getsessionid: increase the value, not the pointer

- THANKS: one new contributor in 7.23.1

- [Alejandro Alvarez Ayllon brought this change]

  SSL session share: move the age counter to the share object
  
  Previously the age counter would be counted individually in each easy
  handle that shared SSL sessions!

- [Alejandro Alvarez Ayllon brought this change]

  libtest build: add the missing lib586

- [Jason Glasgow brought this change]

  CURLOPT_DNS_SERVERS: set name servers if possible

- RELEASE-NOTES: correct the release and contributor numbers

Version 7.23.1 (17 Nov 2011)

Daniel Stenberg (17 Nov 2011)
- FindWin32CACert: return OK even if CA cert isn't found
  
  Bug: http://curl.haxx.se/mail/lib-2011-11/0180.html
  Reported by: Mark Brand

Dan Fandrich (16 Nov 2011)
- curl has been built on many Android versions

Daniel Stenberg (15 Nov 2011)
- 7.24.0: start the work

- THANKS: added 18 new contributors from 7.23.0

Version 7.23.0 (14 Nov 2011)

Dan Fandrich (14 Nov 2011)
- curl_easy_setopt arguments should be of type long in the examples

Daniel Stenberg (12 Nov 2011)
- RELEASE-NOTES: synced with 10120e6a
  
  one more bug fix and contributor

- progress_cb: avoid buffer overflow
  
  The progress bar output function would blindly use the terminal width
  without bounds checking. When using a very wide terminal that caused a
  buffer overflow and segfault.
  
  We now limit the max bar with to 255 columns, and I simplified the code
  to avoid an extra snprintf and buffer.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3435710
  Reported by: Alexey Zakhlestin

Yang Tse (11 Nov 2011)
- Active mode FTP test cases with server not establishing data connection
  
  591 -> FTP multi PORT and 425 on upload
  592 -> FTP multi PORT and 421 on upload
  593 -> FTP multi PORT upload, no data conn and no transient neg. reply
  594 -> FTP multi PORT upload, no data conn and no positive prelim. reply
  
  1206 -> FTP PORT and 425 on download
  1207 -> FTP PORT and 421 on download
  1208 -> FTP PORT download, no data conn and no transient negative reply
  1209 -> FTP PORT download, no data conn and no positive preliminary reply

Guenter Knauf (8 Nov 2011)
- Fix to skip untrusted certs.

Daniel Stenberg (6 Nov 2011)
- RELEASE-NOTES: synced with e3166df1bb3
  
  4 new bugfixes, 2 more contributors

- ftp PORT: don't hang if bind() fails
  
  When the user requests PORT with a specific port or port range, the code
  could lock up in an endless loop. There's now an extra conditional that
  makes sure to special treat the error and try the local address only
  once so a second failure will abort the loop correctly.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3433968
  Reported by: Gokhan Sengun

- pingpong: change two comments wrongly referring "FTP"
  
  Just a sign of where the code originally was ripped out from. Now it is
  generic "pingpong".

- test 590: verify the bug fix in 4851dafcf1
  
  This test is created to verify Rene Bernhardt's patch which makes sure
  libcurl properly _not_ deals with Negotiate if not asked to even if the
  proxy says it can serve it.

- [Rene Bernhardt brought this change]

  HTTP auth: fix proxy Negotiate bug
  
  If a proxy offers several Authentication schemes where NTLM and
  Negotiate are offered by the proxy and you tell libcurl not to use the
  Negotiate scheme then the request never returns when the proxy answers
  with its HTTP 407 reply.
  
  It is reproducible by the following steps:
  
  - Use a proxy that offers NTLM and Negotiate ( CURLOPT_PROXY and
  CURLOPT_PROXYPORT )
  
  - Tell libcurl NOT to use Negotiate CURL_EASY_SETOPT(CURLOPT_PROXYAUTH,
  CURLAUTH_BASIC | CURLAUTH_DIGEST | CURLAUTH_NTLM )
  
  - Start the request
  
  The call to CURL_EASY_PERFORM never returns. If you switch on debug
  logging you can see that libcurl issues a new request As soon as it
  received the 407 reply. Instead it should return and set the response
  code to 407.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0323.html

Yang Tse (4 Nov 2011)
- ssluse.c: fix calling of OpenSSL's ERR_remove_state(0)
  
  Move calling of ERR_remove_state(0) a.k.a ERR_remove_thread_state(NULL)
  from Curl_ossl_close_all() to Curl_ossl_cleanup().
  
  In this way ERR_remove_state(0) is now only called in libcurl by
  curl_global_cleanup(). Previously it would get called by functions
  curl_easy_cleanup(), curl_multi_cleanup and potentially each time a
  connection was removed from a connection cache leading to premature
  destruction of OpenSSL's thread local state hash.
  
  Multi-threaded apps using OpenSSL enabled libcurl should still call
  function ERR_remove_state(0) or ERR_remove_thread_state(NULL) at the
  very end end of threads that do not call curl_global_cleanup().

- tool_cb_wrt.c: disambiguate warning message

- tool_cfgable.c: pending check done

- url.c and file.c: fix OOM triggered segfault

Daniel Stenberg (3 Nov 2011)
- rename ftp_ssl: the struct field is used for many protocols
  
  Now called 'use_ssl' instead, which better matches the current CURLOPT
  name and since the option is used for all pingpong protocols (at least)
  it makes sense to not use 'ftp' in the name.

Yang Tse (2 Nov 2011)
- [Daniel Stenberg brought this change]

  gtls_connect_step1: remove use of deprecated functions
  
  Use gnutls_priority_set_direct() instead of gnutls_protocol_set_priority().
  
  Remove the gnutls_certificate_type_set_priority() use since x509 is the
  default certificate type anyway.
  
  Reported by: Vincent Torri

- url.c and transfer.c: nullify connection pointer when free()'ed

- FTP test server: NODATACONN commands follow-up
  
  Make NODATACONN425 and NODATACONN421 return a 150 positive preliminary reply
  before 425 or 421.
  
  New NODATACONN150 returns 150 without further positive nor negative reply
  
  Now NODATACONN doesn't reply anything at all.

- multi.c: OOM handling fix

- FTP test server: NODATACONN commands follow-up
  
  Make NODATACONN custom commands apply to both active and passive FTP,
  and ensure 425 and 421 are not returned unless data channel usage is
  attempted.

- tool_cb_see.h: fix compiler warning

- setup.h: fix compiler warning

- FTP test server: NODATACONN commands commit c761fcb0 follow-up
  
  Adjustments that make NODATACONN custom commands fully usable.

Daniel Stenberg (30 Oct 2011)
- [Dave Reisner brought this change]

  doc/curl.1: fix sentence with ending for -# option
  
  Try to be a little more descriptive about the effect of this flag,
  rather than parroting what was said in the paragraph just above.

Yang Tse (30 Oct 2011)
- FTP test server: fix server unresponsiveness
  
  Some torture tests left FTP test server in an unresponsive state, resulting
  in torture tests that actually completed following unexpected code paths.
  
  Changes in this commit solely address this issue and some adjustments for
  ftpserver.pl logging relative to data channel establishment and tear down.
  Pending NODATACONN relative adjustments reserved for a further commit.

- runtests.pl: running server checks - commit 4464583a follow-up
  
  Ensure verification takes place with no server commands file.
  Ignore verbose setting for running server precheck.
  Tweak unresponsive server message, to allow detection by haxx.se scripts.

- gtls.c: gnutls_transport_set_global_errno() deprecated in version 2.12.3

- runtests.pl: running server checks - commit 3676ec96 follow-up
  
  Fix called sub when checking TFTP server, and adjust message.

- runtests.pl: running server checks - commit 4464583a follow-up
  
  Extended server checks to others in addition to pingpong when torture testing.

- lib589.c: add CURLOPT_READDATA missing stuff

- ftpserver.pl: three new custom FTP server commands to disable data channel
  
  NODATACONN421: applies only to active FTP mode, instructs server to not
  establish data connection back to client and reply with FTP 421.
  
  NODATACONN425: applies only to active FTP mode, instructs server to not
  establish data connection back to client and reply with FTP 425.
  
  NODATACONN: applies to both active and passive FTP modes, instructs server
  to not establish nor accept a data channel and fool client into believing
  that the data channel connection is possible.
  
  Some polishing probably required.

- multi.c: OOM handling fix
  
  Fix curl_multi_cleanup() segfault when using weird cleanup sequence.

Daniel Stenberg (27 Oct 2011)
- multi: start ftp state machine when switching to DO_MORE
  
  This extends the fix from commit d7934b8bd491
  
  When the multi state is changed within the multi_runsingle from DOING to
  DO_MORE, we didn't immediately start the FTP state machine again. That
  then left the FTP state in FTP_STOP. When curl_multi_fdset() was
  subsequently called, the ftp_domore_getsock() function would return the
  wrong fd info.
  
  Reported by: Gokhan Sengun

- libcurl-multi.3: update the list of areas still blocking

Yang Tse (26 Oct 2011)
- test 589: active FTP upload using multi timeout and EPRT disabled server

- multi tests: OOM handling fixes - commit 629d2e34 follow-up

Patrick Monnerat (26 Oct 2011)
- - Prepare the ILE/RPG binding and OS400 documentation for the upcoming release

Daniel Stenberg (25 Oct 2011)
- RELEASE-NOTES: synced with 4464583a6ed
  
  5 more bug fixes, 4 additional contributors

Yang Tse (25 Oct 2011)
- runtests.pl: running server checks
  
  When running torture tests, verify before each test case that required
  pingpong servers which are supposed to be alive are actually responsive.
  If found not responsive then restart them.

Daniel Stenberg (24 Oct 2011)
- dist: add test 587
  
  I created test 587 in commit 840eff44f2b but forgot to add the file to
  the tarball. Added now.

- test 588: verify active FTP with multi interface without EPRT
  
  This is using the verbatim 525 test code but it disables EPRT in the
  server and this should work just as well anyway.

- FTP server: allow EPRT by default
  
  EPRT is now supported by default by the server. To disable it, use the
  generic REPLY instruction in the <servercmd> tag. Test 116 now has it
  disabled. All other existing active FTP port tests strip out the port
  commands from the logs already so the change of the server isn't that
  noticable.

Yang Tse (24 Oct 2011)
- ftp.c: some OOM handling fixes

- ftpserver.pl: ensure integral number usage for passive mode string

Daniel Stenberg (24 Oct 2011)
- large headers: have curl accept >16K headers
  
  As commit 5850cc4808ab clarifies, libcurl can deliver header lines that
  are longer than CURL_MAX_WRITE_SIZE, only body data is limited to that
  size. The curl tool has check (when built debug-enabled) that made the
  wrong checks and this new test 1205 verifies that larger headers work.

- curl_easy_setopt.3: headers can be CURL_MAX_HTTP_HEADER bytes
  
  Mention this maximum header size for the header callback cases

- Merge pull request #25 from trtom/master
  
  make sure the static build uses the static build option!

- curl_easy_setopt.3: fix typo
  
  shoot, Dan Fandrich already had this pointed out...

- [Steve Holme brought this change]

  curl_easy_setopt: Added pop3 to CURLOPT_URL.
  
  Added pop3 username and password example as well as an explanation of
  how path part of the URL is used under pop3.
  
  Additionally have corrected a couple of typos.

Yang Tse (22 Oct 2011)
- tool_operate.c: OOM handling fix
  
  Move curl_easy_perform source code geneartion out of curl_easy_perform's loop
  for proper OOM handling and source code geneartion.

Daniel Stenberg (21 Oct 2011)
- curl_multi_fdset: correct fdset with FTP PORT use
  
  After a PORT has been issued, and the multi handle would switch to the
  CURLM_STATE_DO_MORE state (which is unique for FTP), libcurl would
  return the wrong fdset to wait for when curl_multi_fdset() is
  called. The code would blindly assume that it was waiting for a connect
  of the second connection, while that isn't true immediately after the
  PORT command.
  
  Also, the function multi.c:domore_getsock() was highly FTP-centric and
  therefore ugly to keep in protocol-agnostic code. I solved this problem
  by introducing a new function pointer in the Curl_handler struct called
  domore_getsock() which is only called during the DOMORE state for
  protocols that set that pointer.
  
  The new ftp.c:ftp_domore_getsock() function now returns fdset info about
  the control connection's command/response handling while such a state is
  in use, and goes over to waiting for a writable second connection first
  once the commands are done.
  
  The original problem could be seen by running test 525 and checking the
  time stamps in the FTP server log. I can verify that this fix at least
  fixes this problem.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0250.html
  Reported by: Gokhan Sengun

Dan Fandrich (21 Oct 2011)
- Added some missing test case XML tags and keywords

Yang Tse (21 Oct 2011)
- file.c: OOM handling fix
  
  file_disconnect() free's resources for multi API

- multi.c: fix segfault

- runtests.pl: fix printing of multivalued error codes

- multi tests: OOM handling fixes
  
  Additionally, improved error checking and logging.

Dan Fandrich (20 Oct 2011)
- Fixed compilation when HTTP or cookies are disabled

Daniel Stenberg (20 Oct 2011)
- KNOWN_BUGS: #74 fixed
  
  Multiple auths in the same WWW-Authenticate header
  
  Fixed in commit 7d81e3f7193b8c

- Curl_http_input_auth: handle multiple auths in WWW-Authenticate
  
  The fix is pretty much the one Nick Zitzmann provided, just edited to do
  the right indent levels and with test case 1204 added to verify the fix.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0190.html
  Reported by: Nick Zitzmann

- Curl_smtp_escape_eob: first byte is index 0...
  
  Fix a bug with with commit 2621dd42a4d that happened due to my last
  second pre-commit cleanup of the change without proper testing
  afterwards!

- CURLM_CALL_MULTI_PERFORM: remove mention
  
  This return code has not been used since 7.20.0 so we can stop
  mentioning it for current libcurl.

Dan Fandrich (19 Oct 2011)
- Silenced a compiler warning about an unused variable

Daniel Stenberg (20 Oct 2011)
- [Tim Harder brought this change]

  gtls: only call gnutls_transport_set_lowat with <gnutls-2.12.0
  
  The default lowat level for gnutls-2.12* is set to zero to avoid
  unnecessary system calls and the gnutls_transport_set_lowat function has
  been totally removed in >=gnutls-3 which causes build failures.
  
  Therefore, the function shouldn't be used except for versions that
  require it, <gnutls-2.12.0.

- Curl_smtp_escape_eob: fix EOB escaping
  
  As the EOB string can come byte by byte over a series of writes we must
  match byte-wise.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0172.html

- RELEASE-NOTES: synced with ecbb08cea3cd6

- singleipconnect: unstick the ipv6-connection boolean
  
  Previously the bit was set before the connection was found working so if
  it would first fail to an ipv6 address and then connect fine to a IPv4
  address the variable would still be TRUE.
  
  Reported by: Thomas L. Shinnick
  Bug: http://curl.haxx.se/bug/view.cgi?id=3421912

Kamil Dudka (17 Oct 2011)
- nss: avoid a SIGSEGV with immature version of NSS
  
  Bug: https://bugzilla.redhat.com/733685

- nss: big cleanup in nss_load_cert() and cert_stuff()

- nss: refactor fmt_nickname() -> dup_nickname()
  
  Do not use artificial nicknames for certificates from files.

- nss: select client certificates by DER
  
  ... instead of nicknames, which are not unique.

Daniel Stenberg (17 Oct 2011)
- --epsv: fix typo
  
  Reported by: Thomas L. Shinnick

- --show-error: position indepdenent
  
  Previously we required that -S/--show-error was used _after_
  -s/--silent. This was slightly confusing since we strive to make
  arguments as position independent as possible.
  
  Now, you can use them in any order and the result should still be the
  same.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3424286
  Reported by: Andreas Olsson

- curl_multi_fdset: clarify the max_fd == -1 case
  
  Elaborate what max_fd == -1 means
  
  Remove the reference to CURLM_CALL_MULTI_PERFORM as modern libcurl
  versions don't ever return that.

- formdata: ack read callback abort
  
  When doing a multipart formpost with a read callback, and that callback
  returns CURL_READFUNC_ABORT, that return code must be properly
  propagated back and handled accordingly. Previously it would be handled
  as a zero byte read which would cause a hang!
  
  Added test case 587 to verify. It uses the lib554.c source code with a
  small ifdef.
  
  Reported by: Anton Bychkov
  Bug: http://curl.haxx.se/mail/lib-2011-10/0097.html

- TODO: have form functions use CURL handle argument

- [Dave Reisner brought this change]

  typecheck: allow NULL to unset CURLOPT_ERRORBUFFER
  
  There might be situations where a user would want to unset this option.
  Avoid forcing him/her to cast the NULL argument to (char *) in order to
  get past the compile time typecheck.

- singleipconnect: don't clobber errno
  
  Save the errno value immediately after a connect() failure so that it
  won't get reset to something else before we read it.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0066.html
  Reported by: Frank Van Uffelen and Fabian Hiernaux

- [Michal Marek brought this change]

  docs: --xattr

Yang Tse (14 Oct 2011)
- file.c: fix compiler warning

- url.c: fix endless loop upon transport connection timeout
  
  Jerry Wu detected and provided detailed info about this issue.

- sws.c: HTTP and GOPHER test server-side connection closing adjustment
  
  When, for a given test, server is instructed to close connection after
  server reply we now wait a very small amount of time (50ms) before doing
  so. This is done to allow client to, at least partially, read server
  reply before getting an ECONNRESET.
  
  The above is required to make test cases 1070, 1200, 1201 and 1202 pass
  with Cygwin 1.5.X on W2K.
  
  GOPHER test server closes connection after _every_ server-reply, as such,
  at some point it could require a bigger time or using shutdown() before
  a server-side initiated disconnection.

- curl_gethostname.c: fix signed/unsigned comparison and avoid a double copy
  
  both introduced in 42be24af

- curl_ntlm_msgs.c: fix variable shadowing declaration introduced in 185ed340

- [Marcin Adamski brought this change]

  tftp.c: TFTP timeout and unexpected block adjustments
  
  Set ACK timeout to 5 seconds.
  
  If we are waiting for block X and receive block Y that is the expected one, we
  should send ACK and increase X (which is already implemented). Otherwise drop
  the packet and don't increase retry counter.

- multi.c: OOM handling fixes
  
  Prevent modification of easy handle being added with curl_multi_add_handle()
  unless this function actually suceeds.
  
  Run Curl_posttransfer() to allow restoring of SIGPIPE handler when
  Curl_connect() fails early in multi_runsingle().

- url.c: make line shorter than 80 chars

- OOM handling/cleanup slight adjustments

- OOM handling/cleanup slight adjustments

- lib540.c: OOM handling fixes making test 540 pass torture testing

Dan Fandrich (8 Oct 2011)
- RELEASE-NOTES: Fixed a couple of typos

Yang Tse (8 Oct 2011)
- telnet.c: fix compiler warning

- libcurl: some OOM handling fixes

- multi.c: OOM handling fixes making torture tests 560 580 581 pass

- test harness: non-stunnel https server integration overhaul

- curl tool: reviewed code moved to tool_*.[ch] files

- buildconf: warn about autoconf 2.67 and 2.68 generating bad/unusable scripts

- curl tool: fix compiler warning

- curl tool: OOM handling fixes

- curl tool: reviewed code moved to tool_*.[ch] files

- curl tool: OOM handling fixes

- curl tool: OOM handling fixes

- curl tool: OOM handling fixes

- curl tool: header inclusion adjustment

- curl tool: symbol check adjustment

- curl tool: header inclusion adjustment

- curl tool: code moved to tool_*.[ch] files

Daniel Stenberg (4 Oct 2011)
- curl_share_cleanup: avoid compiler warning
  
  Move the variable declaration to within the #ifdef

- struct Curl_share: provide sslsession unconditionally
  
  It makes much nicer and less convuluted code everywhere if this struct
  member is always present even when libcurl is built without SSL support.
  
  This reverts parts of commit 15e3e451702396e

- ftp: improved the failed PORT host name resolved error message

- codepolicing

- sspi build fix
  
  define away Curl_ntlm_sspi_cleanup() when no windows SSPI build

- [Steve Holme brought this change]

  smtp: Added support for NTLM authentication
  
  Modified smtp_endofresp() to detect NTLM from the server specified list
  of supported authentication mechanisms.
  
  Modified smtp_authenticate() to start the sending of the NTLM data.
  
  Added smtp_auth_ntlm_type1_message() which creates a NTLM type-1
  message. This function is used by authenticate() to start the sending
  of data and by smtp_state_auth_ntlm_resp() when the AUTH command
  doesn't contain the type-1 message as part of the initial response.
  This lack of initial response can happen if an OOM error occurs or the
  type-1 message is longer than 504 characters. As the main AUTH command
  is limited to 512 character the data has to be transmitted in two
  parts; one containing the AUTH NTLM and the second containing the
  type-1 message.
  
  Added smtp_state_auth_ntlm_type2msg_resp() which handles the incoming
  type-2 message and sends an outgoing type-3 message. This type-2
  message is sent by the server in response to our type-1 message.
  
  Modified smtp_state_auth_resp() to handle the response to: the AUTH
  NTLM without the initial response and the type-2 response.
  
  Modified smtp_disconnect() to cleanup the NTLM SSPI stack.

- [Steve Holme brought this change]

  Curl_ntlm_create_typeX_message: Added the outlen parameter
  
  Added the output message length as a parameter to both
  Curl_ntlm_create_type1_message() and Curl_ntlm_create_type3_message()
  for use by future functions that require it.
  
  Updated curl_ntlm.c to cater for the extra parameter on these two
  functions.

- [Steve Holme brought this change]

  smtp: General tidy up ready for adding NTLM support
  
  Changed the name of variable l, in several functions, which represents
  the length of strings being sent to the server, to len which is more
  meaningful and consistent with other code in smtp.c and elsewhere.
  
  Reworked smtp_authenticate() to be simpler and easier to follow.
  Variables and now initialised in their definitions and if no username
  and password are specified the function sets the state to SMTP_STOP and
  returns immediately, rather than being part of a huge if statement.

Yang Tse (3 Oct 2011)
- curl tool: reviewed code moved to tool_*.[ch] files

Daniel Stenberg (3 Oct 2011)
- [Steve Holme brought this change]

  smtp_mail: fixed another memory leak
  
  ... introduced in 7f304ab84f560c

- [Dominique Leuenberger brought this change]

  m4: Use x in order to avoid variable 'x' set but not used [-Werror=unused-but-set-variable]
  
  This error could be caused by configure scripts being run with -Werror
  -Wall, which would lead to libcurl being detected as unusable.

- share: don't use SSL unless enabled
  
  Don't even declare the struct members for disabled features
  
  Introducing the CURLSHE_NOT_BUILT_IN return code for the share interface
  when trying to set a sharing option that has been disabled (or not
  enabled) in the library.

- multi: progress function abort must close connection
  
  When the progress function returns to cancel the request, we must mark
  the connection to get closed and it must do to the DONE state.
  
  do_init() must be called as early as possible so that state variables
  for new connections are reset early. We could otherwise see that the old
  values were still there when a connection was to be disconnected very
  early and it would make it behave wrongly.
  
  Bug: http://curl.haxx.se/mail/lib-2011-10/0006.html
  Reported by: Vladimir Grishchenko

- tutorial: clarify the handle sharing when treaded
  
  Previously there was wording that made people uncertain of the exact
  rules.
  
  Feedback by: Julien Royer and Georg Lippitsch
  URL: http://curl.haxx.se/mail/lib-2011-09/0357.html

- multi_runsingle: change state on callback abort
  
  Reported by: Marcin Adamski
  Bug: http://curl.haxx.se/mail/lib-2011-09/0329.html

Yang Tse (30 Sep 2011)
- curl tool: fix some more OOM handling

- Fix SSL disabled builds broken with 'SSL session sharing' commit 5793bc37

Daniel Stenberg (29 Sep 2011)
- smtp_mail: fix memory leak
  
  ... introduced in 7f304ab84f560c

- [Steve Holme brought this change]

  smtp_mail: Added support to MAIL FROM for the optional SIZE parameter
  
  The size of the email can now be set via CURLOPT_INFILESIZE. This
  allows the email to be rejected by the server, if supported, and the
  maximum size has been configured on the server.

- curlverh.h: next release will be 7.23.0

- RELEASE-NOTES: synced with 5898a6a09b211fc7e2
  
  Bumped next release version to become 7.23.0 for the changes

Dan Fandrich (28 Sep 2011)
- curl_easy_setopt: Added scp and sftp to the URL section

Daniel Stenberg (28 Sep 2011)
- [Steve Holme brought this change]

  curl_easy_setopt: A brief tidy up
  
  Slight rewording of the CURLOPT_URL SMTP sub-section.
  
  Corrected the incorrect use of hyphens on the three uses of
  "zero-terminated" with "zero terminated" to match the rest of the
  document.
  
  Corrected the use of an out of place hyphen in CURLOPT_NOPROXY section.

- configure openssl version check: handle lack of L suffix
  
  It seems some versions of the OpenSSL version defines don't come with L
  appended to the number, so let's deal with that nicely.

- [Alejandro Alvarez brought this change]

  SSL session sharing support added
  
  With locking, plus test, plus documentation

Yang Tse (28 Sep 2011)
- curl tool: adjust header callback single call write limit warning
  
  Maximum amount of data a header callback is supposed to get in
  a single call from libcurl is limited by the lowest value of
  CURL_MAX_WRITE_SIZE and CURL_MAX_HTTP_HEADER.

Daniel Stenberg (28 Sep 2011)
- multi docs: extended the multi_socket API description

- tests/README: extended and reformatted

Yang Tse (27 Sep 2011)
- [Albert Chin brought this change]

  configure - m4: make CURL_CHECK_DEF ignore leading whitespace on symbol def
  
  When using Sun C compiler the preprocessor somehow inserts an extra space
  in front of replaced symbol, breaking CURL_CHECK_DEF macro. To workaround
  this, macro CURL_CHECK_DEF now ignores all leading whitespace in front of
  symbol substitution result.

Guenter Knauf (27 Sep 2011)
- Added SPNEGO to NetWare build.

Yang Tse (26 Sep 2011)
- curl tool: fix a compiler warning

- curl tool: fix some OOM handling - f4853db5 follow-up

- curl tool: fix some OOM handling

- remove short-lived CURL_WRITEFUNC_OUT_OF_MEMORY

Guenter Knauf (26 Sep 2011)
- Added unsigned char* to _curl_is_debug_cb.

Daniel Stenberg (26 Sep 2011)
- [Steve Holme brought this change]

  smtp_connect: use defined buffer length for hostname

- [Steve Holme brought this change]

  Curl_ntlm_create_type3_message: Tidied up the use of Curl_gethostname.
  
  Removed the code that striped off the domain name when Curl_gethostname
  returned the fully qualified domain name as the function has been
  updated to return the un-qualified host name.
  
  Replaced the use of HOSTNAME_MAX as the size of the buffer in the call
  to Curl_gethostname with sizeof(host) as this is safer should the buffer
  size ever be changed.

- [Steve Holme brought this change]

  HOSTNAME_MAX: Moved to curl_gethostname.h
  
  Moved HOSTNAME_MAX #define into curl_gethostname.h rather than being
  locally defined in curl_gethostname.c, curl_ntlm_msgs.c and smtp.c.

- RELEASE-NOTES: synced with d2a47021c0a6

Yang Tse (25 Sep 2011)
- Q&D fix header inclusion order

- allow write callbacks to indicate OOM to libcurl
  
  Allow (*curl_write_callback) write callbacks to return
  CURL_WRITEFUNC_OUT_OF_MEMORY to properly indicate libcurl of OOM conditions
  inside the callback itself.

Guenter Knauf (25 Sep 2011)
- Changed some main makefile targets.

Daniel Stenberg (25 Sep 2011)
- curl_multi_fdset: avoid FD_SET out of bounds
  
  If a socket is larger than FD_SETSIZE, avoid using FD_SET() on the
  platforms where this is possible.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3413274
  Reported by: Tim Starling

Guenter Knauf (25 Sep 2011)
- Fixed MinGW examples makefile.

- NetWare makefile tweaks to select different builds.

Daniel Stenberg (25 Sep 2011)
- POST: always set postfieldsize
  
  When we use binary posts and regular ones intermixed on a single command
  line, we cannot do strlen() etc on the data to figure out the length
  (when inserting '&' and more). We must therefore keep track of the post
  data length. Then we also end up setting the libcurl option with the
  known size, so that we don't risk that libcurl will do strlen() on the
  data.
  
  This has the minor side-effect that --libcurl source codes now always
  will use CURLOPT_POSTFIELDSIZE but I don't consider that terribly
  damaging.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3413181
  Reported by: Taneli Vhkangas

Yang Tse (24 Sep 2011)
- curl tool: fix a compiler warning

- curl tool: reviewed code moved to tool_*.[ch] files

Guenter Knauf (24 Sep 2011)
- Added header to be included by dist script.
  
  Probably the wrong place, but I dont know better.

Yang Tse (24 Sep 2011)
- curl tool: fix some OOM handling issues

Daniel Stenberg (24 Sep 2011)
- http header: allow Content-Length to be replaced
  
  In some cases Content-Length: couldn't be replaced by an application
  
  Also, indented some code properly

Guenter Knauf (23 Sep 2011)
- MinGW64 has this prototype already.

- Fixed scanf format for WORD = unsigned short.

- Added Win32-only samples.

- Added a workaround for printing size_t.

Daniel Stenberg (22 Sep 2011)
- Curl_pgrsStartNow: keep HEADERS_OUT set
  
  To avoid that the progress meter headers get output between each
  transfer, make sure the bits gets kept when (re-)inited.
  
  Reported by: Christopher Stone

Yang Tse (22 Sep 2011)
- curl tool: fix some OOM handling issues

- curl tool: reviewed code moved to tool_*.[ch] files
  
  my_setopt and my_setopt_str no longer ignores curl_easy_setopt result.
  
  Fixed some OOM handling issues.

Guenter Knauf (22 Sep 2011)
- Added NetWare examples makefile.

Yang Tse (22 Sep 2011)
- NTLM_WB: fix disabling of NTLM_WB when NTLM is disabled

Daniel Stenberg (21 Sep 2011)
- test 814: smtp without --mail-from
  
  Verifies the fix from commit 322f3d5af7093

- [Gisle Vanem brought this change]

  smtp: without a MAIL_FROM, send blank MAIL FROM
  
  I think curl should ignore this case and smtp.c should test for this.
  Since RFC-2821 seems to allow a "null reverse-path". Ref.  "MAIL
  FROM:<>" in section 3.7, page 25.

- [Dave Reisner brought this change]

  lib/http: add missing whitespace in verbose output
  
  Example:
  * upload completely sent off: 35out of 35 bytes
  
  Should be:
  * upload completely sent off: 35 out of 35 bytes

Guenter Knauf (21 Sep 2011)
- Another MinGW example makefile tweak.

- Fixed sample to compile for Windows platform.

Yang Tse (21 Sep 2011)
- curl tool: make my_setopt ignore curl_easy_setopt result again.
  
  Related code not ready yet for this kind of checks.

Guenter Knauf (21 Sep 2011)
- Changed suffix rules to pattern rules.
  
  Suffix rules cannot have any prerequisites of their own.

- Added dependency so that curlbuild.h is created.

- Some more MinGW build tweaks.
  
  Added envvars to specify OpenSSL include, libpath and lib.
  Added rule to create curlbuild.h from curlbuild.h.dist.

Yang Tse (21 Sep 2011)
- curl tool: reviewed code moved to tool_*.[ch] files
  
  my_setopt and my_setopt_str no longer ignores curl_easy_setopt result.
  
  Fixed some OOM handling issues.

- curl tool: reviewed code moved to tool_*.[ch] files
  
  Overhauled FindWin32CACert()

Guenter Knauf (20 Sep 2011)
- A bunch of MinGW build tweaks.
  
  All paths to dependencies now quoted; synced examples makefile.

- Changed Windows 64bit OS define to x86_64.
  
  Also added check for __x86_64__ define since MinGW64 seems to define
  the _M_X64 macro through a header not available for config-win32.h.

- Also skip certs masked as CKT_NSS_TRUST_UNKNOWN.
  
  Fix posted by Tomas Hoger <thoger redhat com>.

- Added _WIN32_WINNT define for IPv6 builds.

Daniel Stenberg (20 Sep 2011)
- Curl_follow: handle redirects to "//hostname/path"

Yang Tse (19 Sep 2011)
- curl tool: truly fix compiler warning

- curl tool: fix compiler warning

- curl tool: reviewed code moved to tool_*.[ch] files

Daniel Stenberg (18 Sep 2011)
- CURLOPT_URL docs: no need to mention function names

- [Steve Holme brought this change]

  CURLOPT_URL: Expanded URL description
  
  Expanded the section about CURLOPT_URL to include the format of the URL
  and detailed information and examples relating to specific protocols.

- [Steve Holme brought this change]

  Curl_gethostname: return un-qualified machine name
  
  Fixed Curl_gethostname() so that it always returns the un-qualified
  machine name rather than being dependent on the socket provider.
  
  Note: The return of getenv("CURL_GETHOSTNAME") is also parsed in case
  the developer / test harness provided a fully qualified domain name as
  it's value as well.

Yang Tse (18 Sep 2011)
- curl tool: create tool_myfunc.[ch] which later on will hold my_* functions
  
  Additionally function my_useragent() now provides default User-Agent string

- curl tool: reorder free_config_fields() field handling
  
  Reorder handling of fields to match same order as the one given by current
  definition order of 'Configurable' struct fields. Fields currently not handled
  marked for further inspection.

Guenter Knauf (17 Sep 2011)
- Fixed MinGW WinIDN lib dependency.

Yang Tse (17 Sep 2011)
- tool_convert.c: fix no newline at end of file

- curl tool: add new files to Symbian's .mmp project file

- curl tool: move 'Configurable' and free_config_fields() to tool_cfgable.[ch]
  
  Reviewing fields being free'd in free_config_fields() still pending

- src/setup.h: add conditional include of assert.h

- curl tool: move so called 'multi_files' stuff into tool_mfiles.[ch]
  
  Additionally some code reorganization and direct OOM handling fixes,
  just another step towards fixing curl tool issues uncovered 2011-09-15

- curl tool: move convert_* functions into tool_convert.[ch]
  
  Additionally fix data type of result vars for iconv() calls

- main.c: convert GetStr() into a macro to ease leak debugging

- main.c: de-obfuscate a couple for-loop exit conditions

- curl tool: fix a bunch of double free's uncovered 2011-09-15
  
  Re-enabling MemoryTracking capability on 'src' subdirectory files and torture
  tests have uncovered many issues which were going unnoticed in curl tool. So
  here we go fixing some of them. Others still remain and should be addressed
  ASAP, given that curl tool is used in our test harness also for test server
  start verification purposes. There are even non-socket file descriptor leaks.

- Make Curl_safefree() macro assign NULL to given pointer when free'd

- curl MSVC project files: adjust resource compiler include path

- src/Makefile.vc6: adjust resource compiler include path

- curl tool: re-enable MemoryTracking capability on 'src' subdirectory files.
  
  Use same preprocessor logic for curl tool MemoryTracking activation in source
  files located in 'src' subdirectory as the one used for libcurl sources.

- ftp.c: add a couple of failure messages

Dan Fandrich (13 Sep 2011)
- [warp kawada brought this change]

  Curl_add_custom_headers: support headers with no data
  
  A custom HTTP header ending in a semicolon instead of a colon
  will be treated as a header to be added without any data
  portion.

Daniel Stenberg (13 Sep 2011)
- progressfunc: a simple CURLOPT_PROGRESSFUNCTION example

- 7.22.1: start working

- THANKS: 16 new contributors from 7.22.0

Version 7.22.0 (13 Sep 2011)

Daniel Stenberg (13 Sep 2011)
- RELEASE-NOTES: ready for 7.22.0

- codestyle: minor whitespace fix

- [Jeff Pohlmeyer brought this change]

  polarssl: build with PolarSSL-1.0.0
  
  With this fix, it should work for PolarSSL-1.0.0 (and SVN-1091 trunk)
  and retain compatibility with earlier versions. (Tested with 0.14.1)
  
  PolarSSL still doesn't play nicely with curl's CA bundle (we discussed
  this before) but I was at least able to retrieve the
  https://www.gmail.com/ login page using a modified ca-certificates.crt
  file with all 3 versions of PolarSSL.

- BUGS: spellfixed, slightly reformatted for web looks
  
  Reported by: Jeff Pohlmeyer

Dan Fandrich (12 Sep 2011)
- Document NTLM winbind options (and caveats)

Daniel Stenberg (12 Sep 2011)
- BUGS: renumbered to look better in the web version

- BUGS: revamped bug report documentation

Yang Tse (12 Sep 2011)
- Mention that BSD-style lwIP TCP/IP stack support on Windows is experimental.

- ftp.c: fix socket leak torture tests detected 2011-08-30
  
  Also fix inappropriate error handling when sending ftp EPRT or PORT commands.

Daniel Stenberg (11 Sep 2011)
- TODO: remove 4 entries, add one new
  
  Zero-copy and "Avoid having to remove/readd handles" are not really
  features we think are worthwhile to add. Removed.
  
  SRP features have been added already, removed.
  
  11.9 IPv6 addresses with globbing added

- spell-checked comments

- TODO-RELEASE: postpone the remainders
  
  There's three pending bug fixes but there's no time left so let's
  try to get them fixed for next release...

Guenter Knauf (11 Sep 2011)
- Updated makefiles to latest libssh2.

Yang Tse (10 Sep 2011)
- urlglob.c: fix OOM handling

- ftp.c: fix ftp active connects which got broken with commit fdf157abdf

- runtests.pl: replace TAB with spaces

- test harness: revert needless commit 0a5bbb2ac1
  
  https, ftps and ssh servers allowed start up time back to previous values

- ssh.c: revert needless commit 7b7c45879e

Daniel Stenberg (9 Sep 2011)
- RELEASE-NOTES: synced with 303c90074d4c
  
  Five more bugfixes, one more contributor

- tcpnodelay: rename variable
  
  Renamed the variable from 'proto' to 'level' simply because it is not
  protocol you set but level and that is the name of the argument used in
  man pages and the POSIX documentation of the setsockopt function.

Guenter Knauf (8 Sep 2011)
- Avoid ftruncate() static define with MinGW64.

Yang Tse (8 Sep 2011)
- libssh2: use calloc as alloc function for libssh2 versions older than 1.3
  
  This workarounds old libssh2 versions not properly initializing
  some ssh session variables, which would trigger memory debuggers
  warnings on memory being used without having been initialized.

Daniel Stenberg (8 Sep 2011)
- [Adriano Meirelles brought this change]

  Curl_speedcheck: don't mistakenly clear Curl_expire()
  
  The current version of speedcheck.c may disable timeout by setting zero
  to Curl_expire. Which is fine using the curl_multi_perform, because it
  recheck all timeout internals, but when using custom event poller (like
  hiperfifo.c) it may keep stalle connection forever.

Yang Tse (8 Sep 2011)
- lib582.c: fix segfault triggered when torture testing test case 582

Daniel Stenberg (7 Sep 2011)
- ftp_state_use_port: minor code indent fix

- checksrc: detect "}else" uses as well

- getinmemory.c: use better argument names for write callback

Yang Tse (7 Sep 2011)
- ssh.c: fix memory leaks triggered upon OOM or other failures

- test case 583: ensure that test failures don't go unnoticed - follow-up

- test suite: libtest header inclusion cleanup - follow-up
  
  Adjust tests/libtest/Makefile.inc and remove a couple of unused headers from
  tests/libtest/lib583.c

- test case 583: ensure that test failures don't go unnoticed

- test suite: libtest header inclusion cleanup
  
  Added missing memoryTracking to test cases 560 and 583. If this triggers
  leak detection on these, it only means that previously it was going unnoticed.

- fix bool variables checking and assignment

- pingpong.c: avoid a memmove call in function Curl_pp_vsendf

- fix bool variables checking and assignment

- test suite: use test case specific netrc file names

Guenter Knauf (4 Sep 2011)
- Fixed final message output.

Daniel Stenberg (4 Sep 2011)
- TODO-RELEASE: deleteing five issues due to no response
  
  No feedback and no updates, removing these issues

Yang Tse (4 Sep 2011)
- setup_once.h cleanup and sync

Guenter Knauf (4 Sep 2011)
- Fix to skip untrusted certs.

- Added SPNEGO to MinGW makefiles.

Yang Tse (4 Sep 2011)
- NTLM WB: fix file descriptor leak upon OOM condition

- revert changes not intended to be pushed with commit 6b75d2c2

- fix a bunch of MSVC compiler warnings

Guenter Knauf (3 Sep 2011)
- Updated dependecies versions.

- Some MinGW makefile tweaks for MinGW64.

- Changed MinGW to use own winidn prototypes.

Dan Fandrich (2 Sep 2011)
- Fix NTLM winbind support to pass the torture tests
  
  Calling sclose() both in the child and the parent fools the
  socket leak detector into thinking it's been closed twice.
  Calling close() in the child instead overcomes this problem. It's
  not as portable as the sclose() macro, but this code is highly
  POSIX-specific, anyway.

Yang Tse (2 Sep 2011)
- MemoryTracking: fix logging of free() calls done where Curl_safefree is called
  
  Just internal stuff...
  
  Curl_safefree is now a macro defined in memdebug.h instead of a function
  prototyped in url.h and implemented in url.c, so inclusion of url.h is no
  longer required in order to simply use Curl_safefree.
  
  Provide definition of macro WHILE_FALSE in setup_once.h in order to allow
  other macros such as DEBUGF and DEBUGASSERT, and code using it, to compile
  without 'conditional expression is constant' warnings.
  
  The WHILE_FALSE stuff fixes 150+ MSVC compiler warnings.

- transfer.c: fix parentheses/braces placement for vi/emacs delimiter matching

- transfer.c: fix loadhostpairs() OOM handling

- test harness: https, ftps and ssh servers allowed start up time increased 33%

- hostip.c: return immediately from Curl_resolv_timeout() upon expired timeout.
  
  Ensure existing logic in Curl_resolv_timeout() is not subverted upon getting a
  negative timeout from resolve_server(). The timeout in resolve_server() could
  be checked to avoid calling Curl_resolv_timeout() with an expired timeout, but
  fixing this in this way allows existing logic in resolve_server() to be kept
  unchanged.

- ftp.c: fix some leaks torture tests detected 2011-08-30 - follow-up
  
  follow-up for commit d20408e8

- test harness: fix detection of test harness client knownhosts file
  
  Regenerate curl's tests client knownhosts file also when, somehow,
  this file is empty.

- test harness: fix detection of test harness host and client key files
  
  Regenerate curl's tests host and client key files also when, somehow,
  any of these files are empty.

- ssh.c: fix realloc() OOM handling

- ftp.c: fix some leaks torture tests detected 2011-08-30 - follow-up
  
  follow-up for commit c06de200

- fix some leaks torture tests detected 2011-08-30

- fix some leaks torture tests detected 2011-08-30

Daniel Stenberg (29 Aug 2011)
- RELEASE-NOTES: synced with 3445fa2e3f

Kamil Dudka (29 Aug 2011)
- tests: break busy loops in tests 502, 555, and 573

Yang Tse (29 Aug 2011)
- pingpong.c: fix Curl_pp_vsendf() arbitrary restrictions on command length
  
  This removes command length restrictions on calling functions.

- NTLM: header inclusion cleanup follow-up

- NTLM: header inclusion cleanup

- NTLM: END of refactoring/splitting/moving
  
  First:
  
  File curl_ntlm.h renamed curl_ntlm_msgs.h
  File curl_ntlm.c renamed curl_ntlm_msgs.c
  
  Afterwards:
  
  File http_ntlm.c renamed curl_ntlm.c
  File http_ntlm.h renamed curl_ntlm.h

- NTLM: move NTLM core specifics into curl_ntlm_core.[ch]

- NTLM_WB: move NTLM_WB specifics into curl_ntlm_wb.[ch]

- NTLM_WB: final congruency naming adjustments
  
  Configure script option --enable-wb-ntlm-auth renamed to --enable-ntlm-wb
  Configure script option --disable-wb-ntlm-auth renamed to --disable-ntlm-wb
  
  Preprocessor symbol WINBIND_NTLM_AUTH_ENABLED renamed to NTLM_WB_ENABLED
  Preprocessor symbol WINBIND_NTLM_AUTH_FILE renamed to NTLM_WB_FILE
  
  Test harness env var CURL_NTLM_AUTH renamed to CURL_NTLM_WB_FILE
  
  Static function wb_ntlm_close renamed to ntlm_wb_cleanup
  Static function wb_ntlm_initiate renamed to ntlm_wb_init
  Static function wb_ntlm_response renamed to ntlm_wb_response

- NTLM single-sign on adjustments (XI)
  
  Feature string literal NTLM_SSO renamed to NTLM_WB.
  Preprocessor symbol USE_NTLM_SSO renamed to WINBIND_NTLM_AUTH_ENABLED.
  curl's 'long' option 'ntlm-sso' renamed to 'ntlm-wb'.
  Fix some comments to make clear that this is actually a NTLM delegation.

Daniel Stenberg (26 Aug 2011)
- --cookie-jar: activates the cookie engine

- Curl_read_plain: indent code

Yang Tse (26 Aug 2011)
- NTLM single-sign on adjustments (X)
  
  Functions renamed:
  
  Curl_output_ntlm_sso -> Curl_output_ntlm_wb
  sso_ntlm_close -> wb_ntlm_close
  sso_ntlm_response -> wb_ntlm_response
  sso_ntlm_initiate -> wb_ntlm_initiate
  
  Preprocessor symbols renamed:
  
  CURLAUTH_NTLM_SSO -> CURLAUTH_NTLM_WB
  CURL_VERSION_NTLM_SSO -> CURL_VERSION_NTLM_WB

Daniel Stenberg (25 Aug 2011)
- TODO: progress callback without doubles

Yang Tse (25 Aug 2011)
- [Steve Holme brought this change]

  http NTLM: refactoring followup
  
  Output of Curl_ntlm_create_type1_message() and Curl_ntlm_create_type3_message()
  functions is now already base64 encoded.

Kamil Dudka (24 Aug 2011)
- docs: the next release is going to be 7.22.0

Yang Tse (24 Aug 2011)
- include limits.h for INT_MAX

- add missing semicolons

Daniel Stenberg (24 Aug 2011)
- add missing semicolons

- safefree use: fix compiler warning
  
  include the prototype header

Yang Tse (24 Aug 2011)
- [Steve Holme brought this change]

  SMTP authentication: fix ordering of preferred authentication method
  
  Fixed the order of the preferred SMTP authentication method to:
  AUTH CRAM-MD5, AUTH LOGIN then AUTH PLAIN.
  
  AUTH PLAIN should be the last as it slightly more insecure than AUTH LOGIN
  as the username and password are sent together - there is no handshaking
  between the client and server like there is with AUTH LOGIN.

- base64: fix Curl_base64_encode and Curl_base64_decode interfaces
  
  Previous interfaces for these libcurl internal functions did not allow to tell
  apart a legitimate zero size result from an error condition. These functions
  now return a CURLcode indicating function success or otherwise specific error.
  Output size is returned using a pointer argument.
  
  All usage of these two functions, and others closely related, has been adapted
  to the new interfaces. Relative error and OOM handling adapted or added where
  missing. Unit test 1302 also adapted.

Daniel Stenberg (23 Aug 2011)
- resolve.c: new example showing off CURLOPT_RESOLVE

- externalsocket.c: new example

Yang Tse (22 Aug 2011)
- [Steve Holme brought this change]

  http NTLM: remaining bits from 0001-Moved-ntlm-[...]-curl_ntlm-mod_3.patch
  
  * Added function comments:
      - Curl_ntlm_decode_type2_message
      - Curl_ntlm_create_type1_message
      - Curl_ntlm_create_type3_message
  
  * Modification of ntlm processing state to NTLMSTATE_TYPE2 is now done
    only when Curl_ntlm_decode_type2_message() has fully succeeded.

- runtests.pl: option -gw for single test windowed debugging (where possible)

- zlib: ensure user provided memory functions are used by zlib, when given
  
  As a bonus, this lets our MemoryTracking subsystem track zlib operations.
  And also fixes a shortcut some zlib 1.2.x versions took using malloc()
  instead of calloc(), which would trigger memory debuggers warnings on
  memory being used without having been initialized.

Daniel Stenberg (21 Aug 2011)
- main: fix segfault
  
  Follow-up to commit 5eb2396cd as that wasn't complete.
  
  At times HEADERFUNCTION+HEADERDATA was set only to have only HEADERDATA
  set in the subsequent loop which could cause a NULL to get sent as
  userdata to 'header_callback' which wasn't made to handle that.
  
  Now HEADERFUNCTION is explicitly set to NULL if it isn't set to the
  callback.

Yang Tse (21 Aug 2011)
- MemoryTracking: adjust initialization calling - followup
  
  Fix macro definition

- MemoryTracking: adjust initialization calling
  
  Calling of curl_memdebug() was still done with a pending free()

Daniel Stenberg (19 Aug 2011)
- tcpconnect: follow-up commit after b998d95b
  
  As I modified conn->bits.tcpconnect to become an array that holds one
  bool for each potential connection all uses of that struct field must
  index it correctly.

Yang Tse (19 Aug 2011)
- ssh.c: add PATH_MAX definition for WIN32

Daniel Stenberg (19 Aug 2011)
- connect: set TIMER_CONNECT
  
  When connecting, make sure TIMER_CONNECT is set.

- test573: fix the keywords

- FTP: fix proxy connect race condition
  
  When using the multi interface, a SOCKS proxy, and a connection that
  wouldn't immediately consider itself connected (which my Linux tests do
  by default), libcurl would be tricked into doing _two_ connects to the
  SOCKS proxy when it setup the data connection and then of course the
  second attempt would fail miserably and cause error.
  
  This problem is a regression that was introduced by commit
  4a42e5cdaa344755 that was introduced in the 7.21.7 release.
  
  Bug: http://curl.haxx.se/mail/lib-2011-08/0199.html
  Reported by: Fabian Keil

- Curl_SOCKS4: minor code compression

Yang Tse (18 Aug 2011)
- zlib: enforce full initialization of our data space z_stream structs

Daniel Stenberg (17 Aug 2011)
- VC makefiles: fixed variable name mistake

Yang Tse (17 Aug 2011)
- MemoryTracking: adjust curl_domalloc() and curl_dofree() memory filling
  
  Until 2011-08-17 libcurl's Memory Tracking feature also performed
  automatic malloc and free filling operations using 0xA5 and 0x13
  values. Our own preinitialization of dynamically allocated memory
  might be useful when not using third party memory debuggers, but
  on the other hand this would fool memory debuggers into thinking
  that all dynamically allocated memory is properly initialized.
  
  As a default setting, libcurl's Memory Tracking feature no longer
  performs preinitialization of dynamically allocated memory on its
  own. If you know what you are doing, and really want to retain old
  behavior, you can achieve this compiling with preprocessor symbols
  CURL_MT_MALLOC_FILL and CURL_MT_FREE_FILL defined with appropriate
  values.

- MemoryTracking: make curl_docalloc() call calloc() avoiding our zero fill

Daniel Stenberg (15 Aug 2011)
- MSVC makefiles: provide SSH build targets
  
  "release-ssl-ssh2-zlib" and "debug-ssl-ssh2-zlib" are two new makefile
  targets that build libcurl with MSVC and link with libssh2
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3388920
  Reported by: "kdekker"

- test572: fixed
  
  Two problems were fixed:
  
  GET_PARAMETER responses that have no body must be 204 response or
  properly set length to 0.
  
  One of the <data> sections had the wrong content-length for its
  GET_PARAMETER response.
  
  Enabled test 572 again.

- Curl_pgrsStartNow: clear all flags but HIDE
  
  As bug 3385258 pointed out but I missed up the fix for. This is another
  take at a fix.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3392101
  Reported by: Wu Yongzheng

Yang Tse (15 Aug 2011)
- unittests: disable unit tests for some autobuild configurations
  
  IRIX 6.5.24 gcc 3.3 autobuilds fail unittests library compilation due to a
  problem related with OpenSSL headers and library versions not matching.
  
  All AIX autobuilds fails unit tests linking against unittests library due to
  unittests library being built with no symbols or members. Libtool ?

Kamil Dudka (15 Aug 2011)
- nss: start with no database if the selected database is broken
  
  Bug: https://bugzilla.redhat.com/728562

Yang Tse (15 Aug 2011)
- http NTLM: reinstate "nssg.h" "curl_sspi.h" header inclusions

- tests: disable #572

Daniel Stenberg (14 Aug 2011)
- TODO-RELEASE: synced
  
  Added comments to some remaining issues

- telnet: allow programatic use on Windows
  
  Summary of the issue can be found at:
  http://curl.haxx.se/mail/lib-2010-04/0367.html
  
  That patch only updated the unix sockets code - the winsock code was not
  updated and no longer works the same was as the unix code. This change
  updates the windows code accordingly.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3163118

- TODO-RELEASE: fixed issue #291
  
  291 - bug 3383692 "GET PARAMETER request and body in response"

Yang Tse (14 Aug 2011)
- http NTLM: reinstate "memdebug.h" header inclusion
  
  Inclusion of header "memdebug.h" in http_ntlm.c got lost in commit 98fb0ef7.

Daniel Stenberg (14 Aug 2011)
- RTSP: GET_PARAMETER requests have a body
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3383692

- Curl_output_ntlm: remove unused variable

Yang Tse (14 Aug 2011)
- http NTLM: add curl_ntlm.c to Symbian's libcurl.mmp

- http NTLM: fix 8 compiler warnings
  
  Strict splitting of http_ntlm.[ch] may trigger 8 compiler warnings when
  building with some compilers and strict compiler warnings enabled, depending
  on other specific configuration options some could get triggered or not.
  
  Seven are related with 'unused function parameters' and another one with
  'var may be used before its value is set'.

- http NTLM: split http_ntlm.[ch] between http_ntlm.[ch] and curl_ntlm.[ch]
  
  For modularity purposes, huge chunks of NTLM existing code is transformed into
  functions to allow future internal code reuse.
  
  Resulting three new libcurl private functions:
  
   - Curl_ntlm_create_type1_message()
   - Curl_ntlm_create_type3_message()
   - Curl_ntlm_decode_type2_message()
  
  Changing static ntlm_sspi_cleanup() into non-static Curl_ntlm_sspi_cleanup()
  
  This 'refactoring' has been prepared by previous commits to allow that this
  specific one does not introduce any change to existing code. All existing
  goodness and badness previous to this commit should remain the same once it is
  applied, the only difference should be that existing code is moved into
  functions.
  
  Given the quite big portions of code being moved around, and the importance of
  change traceability, this commit has been done in such a way that it is
  possible to perform a three-way diff from initial http_ntlm.[ch] to resulting
  http_ntlm.[ch] and curl_ntlm.[ch] to actually verify that no functional change
  is introduced here.
  
  Notice that Steve Holme has provided several patches, but these included this
  refactoring along with 'extra' fixes. I really wanted this 'clean' refactoring
  done first, in order to allow discussion or committing of 'extra' fixes on a
  case by case basis, so, I had to bite the bullet ;-)
  
  Comments, line adjustments, compiler warning fixes, whatever, may follow
  afterwards.

- http_negotiate_sspi.c: fix compiler warning
  
  warning C4706: assignment within conditional expression

- http NTLM: change return type of Curl_input_ntlm() to CURLcode
  
  Remove CURLntlm enum, no longer required.

Daniel Stenberg (13 Aug 2011)
- RELEASE-NOTES: synced with a30ede868ab64
  
  Three more bugs fixed, three more contributors mentioned

- VC6 makefiles: added embedded documentation
  
  Just a note about the fact that all VC[6/8/9/10] makefiles are generated
  from the VC6 one as source.

- cmake: find winsock when building on windows
  
  When building on Windows, with CMake and mingw, curl fails to compile
  because the CMake build system is not properly looking for the Winsock
  libraries
  
  Patch by: Pau Garcia i Quiles
  Bug: http://curl.haxx.se/bug/view.cgi?id=3389231

- Curl_retry_request: check return code!
  
  Curl_readrewind() was called without checking its return code, which
  could lead to badness.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3349227

- ignore rtsp

Yang Tse (13 Aug 2011)
- http NTLM: update NTLM type-* message structure descriptions - followup

Daniel Stenberg (12 Aug 2011)
- docs: --delegation

- added --delegation
  
  Using this option with an argument being set to one of
  none/policy/always instructs libcurl how to deal with GSS
  credentials. Or rather how it tells the server that delegation is fine
  or not.

Yang Tse (12 Aug 2011)
- http NTLM: fix inclusion of curl_ntlm.h

- http NTLM: update NTLM message structure notes

- [Steve Holme brought this change]

  http NTLM: move portions of http_ntlm.h into new curl_ntlm.h

- http NTLM: more adjustments in preparation of code refactoring
  
  Use preprocessor symbol NTLM_BUFSIZE to define private NTLM buffer fixed size.
  
  Use a SessionHandle 'data' pointer variable to ease refactoring.
  
  Update NTLM type-* message structure descriptions.
  
  Fix some more spacing and typos (Steve Holme).

Daniel Stenberg (11 Aug 2011)
- curl_easy_cleanup: clarify the callback situation

Yang Tse (11 Aug 2011)
- http NTLM: fix compiler warning

- [Steve Holme brought this change]

  http NTLM: Tidied up more inconsistent spacing.
  
  Moved NTLMSSP_SIGNATURE, HOSTNAME_MAX, SHORTPAIR and LONGQUARTET definitions in ready for move to curl_ntlm.c.
  
  Used separate variables for Windows SSPI and native code to ease moving of code to curl_ntlm.c.
  
  Fixed typographical erros where SPPI should be SSPI.
  
  Fixed compilation warnings on 64-bit builds when calling Windows SSPI functions.

Daniel Stenberg (10 Aug 2011)
- rtsp.c: converted to C
  
  Trimmed the newlines to be LF-only. Converted the source to plain C, to
  use curl style indents, to compile warning-free with picky options and
  fixed the minor fprintf() bug on line 245. Added to makefile.

- [Jim Hollinger brought this change]

  rtsp.c: new example
  
  Code from
  http://code.google.com/p/rtsprequest/source/browse/trunk/rtsprequest.cpp

- TODO: remove curl_formpost in a future version
  
  15.8 remove 'curl_httppost' from public

Yang Tse (9 Aug 2011)
- http NTLM: Further tiding up to libcurl standards

- [Steve Holme brought this change]

  http NTLM: Tidied up http_ntlm prior to splitting the ntlm specific code

Daniel Stenberg (9 Aug 2011)
- TODO-RELEASE: issue #289 is fixed
  
  289 - bug 3349227 "secure attribute in cookie does not work with equals sign"

- cookie parser: handle 'secure='
  
  There are two keywords in cookie headers that don't follow the regular
  name=value style: secure and httponly. Still we must support that they
  are written like 'secure=' and then treat them as if they were written
  'secure'. Test case 31 was much extended by Rob Ward to test this.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3349227
  Reported by: "gnombat"

- curl.h: mark deprecated CURLOPT_ options on same line
  
  This is to aid easier machine parsing and to make sure nobody who reads
  these header lines can miss the info.

- RELEASE-NOTES: recounted and updated some numbers

- proxy protocol docs: rephrased and updated

- RELEASE-NOTES: synced with 45d883d88df7
  
  Mention 5 bugixes and 1 change more

- CURLFORM_BUFFER: insert filename as documented
  
  A regression where CURLFORM_BUFFER stopped to properly insert the file
  name part in the formpart. Bug introduced in commit f851f768578dc096.
  
  Added CURLFORM_BUFFER use to test 554 to verify this.
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0176.html
  Reported by: Henry Ludemann

Yang Tse (8 Aug 2011)
- curl-compilers.m4: serial number bump

- curl-compilers.m4: CURL_CONVERT_INCLUDE_TO_ISYSTEM adjustments:
  
  Add CURL_CHECK_COMPILER as a requirement.
  
  Ensure macro does nothing unless GNU_C or CLANG compiler is used.
  
  This should allow usage of this macro in unforeseen placements.

Daniel Stenberg (8 Aug 2011)
- SOCKS: fix the connect timeout
  
  The connect timeout logic when using SOCKS was done wrong
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0177.html
  Reported by: "Spoon Man"

- ftp_doing: bail out on error properly
  
  When a failure has been detected we must abort immdiately.
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0177.html
  Reported by: "Spoon Man"

- s/7.21.8/7.22.0

- version bump: next release is 7.22.0

- VERSIONS: clarify our versioning concept
  
  Drop the pre-release part from this text as we don't use that in
  practise since many years.
  
  Update the phrasing to reflect our more strict interpretation:
  http://curl.haxx.se/mail/lib-2011-08/0064.html

- [Cristian Rodríguez brought this change]

  OpenSSL: Use SSL_MODE_RELEASE_BUFFERS if available, reduces memory use
  
  See also :
  http://www.openssl.org/docs/ssl/SSL_CTX_set_mode.html
  http://www.imperialviolet.org/2010/06/25/overclocking-ssl.html
  
  Signed-off-by: Cristian Rodríguez <crrodriguez@opensuse.org>

- TODO-RELEASE: close issue #292
  
  Fixed:
  292 - bug 3385258 "Addendum to 3370895"
  
  Basically brushing up commit 27b8814017a19

- Curl_pgrsStartNow: clear all bits except HIDE
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3385258
  Reported by: Ben Winslow

- readwrite_data: improved C-E decoding error message

Yang Tse (7 Aug 2011)
- BSD-style lwIP TCP/IP stack support - followup
  
  lwIP library initialization.

- NTLM single-sign on adjustments (IX)
  
  Use swrite/sread instead of write/read to avoid SIGPIPE

- config-win32.h: comments adjustments

Daniel Stenberg (6 Aug 2011)
- TODO-RELEASE: committed issue #304
  
  304 - "Async-DNS-resolve-thread gets started even when a dotted IP is
        provided" by Christian H<E4>gele
        http://curl.haxx.se/mail/lib-2011-08/0009.html

- [Christian Hägele brought this change]

  asyn-thread: check for dotted addresses before thread starts

- TODO-RELEASE: Add #307 two issues by "Spoon Man"

Yang Tse (5 Aug 2011)
- checksrc.pl: add quotes to var

- keep a single copy of config-win32.h in version control repository - followup
  
  Allow configure builds to generate src/config-win32.h
  
  Skip checksrc on src/config-win32.h contents already checked at lib/config-win32.h
  
  Allow multiple -W in checksrc.pl

- BSD-style lwIP TCP/IP stack support - docs/INSTALL blurb

- BSD-style lwIP TCP/IP stack support - followup

- git ignore src/config-win32.h

- keep a single copy of config-win32.h in version control repository.
  
  maketgz and buildconf.bat updated to reflect this.

Daniel Stenberg (5 Aug 2011)
- RELEASE-NOTES: synced with afe88d85f40e1

- test710: verify that --proxy socks5://hostname works

- create_conn: mark non-HTTP proxies accordingly
  
  A proxy could be marked 'httpproxy' wrongly before if set with an
  environment variable or with the CURLOPT_PROXY option with a socks*://
  prefix or similar.
  
  Added test 710 to verify
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0194.html

- test709: HTTP GET via SOCKS5 set in environment

- TODO-RELEASE: issue #293 is done
  
  Fixed:
  293 - from http://bugzilla.redhat.com/723075 "curl segfaults"

- segfault fixed
  
  When using both -J and a single -O with multiple URLs, a missing init
  could cause badness.
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0126.html and
       http://bugzilla.redhat.com/723075
  Reported by: Paul Howarth and Garrett Holmstrom

- test1313: test content-disposition with uneven quotes

- parse_filename: deal with escaped quotes

Yang Tse (4 Aug 2011)
- BSD-style lwIP TCP/IP stack support:
  
  Allow compilation of libcurl and curl using BSD-style lwIP on Win32.
  
  In order to compile libcurl and curl with this support it is necessary
  to edit files lib/config-win32.h and src/config-win32.h and uncomment
  a line to make definition of preprocessor symbol USE_LWIPSOCK visible.
  
  Afterwards you can compile as usual.
  
  In order to use compiled library with BSD-style lwIP TCP/IP stack in
  your program it is mandatory that you include lwIP header file <lwip/opt.h>
  before including <curl/curl.h> or <curl/multi.h>
  
  Compilation has been verified with lwIP 1.4.0 and contrib-1.4.0 from:
  
  http://download.savannah.gnu.org/releases/lwip/lwip-1.4.0.zip
  http://download.savannah.gnu.org/releases/lwip/contrib-1.4.0.zip
  
  Have fun!

- curl.h: untangle a preprocessor block, removing duplicate sys/types.h inclusion

Daniel Stenberg (4 Aug 2011)
- TODO-RELEASE: issue #290 fixed
  
  Closed this entry:
  290 - bug 3375603 "curl has problem with remote names containing ';'"

- -J: support ';' in quoted file names
  
  Content-disposition headers can provide file names with semicolons which
  previously would be cut off at that point.
  
  Added test case 1311 and 1312 to verify -J.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3375603
  Reported by: Peter Hjalmarsson

- getpart.pm: when no part match, return blank when section ends

- runtests.pl: support option=no-include

- TODO-RELESE: #306 - SSL Sessions shared

- TODO-RELEASE: updated with current issues

Kamil Dudka (3 Aug 2011)
- curl_gssapi: add a missing include of sendf.h
  
  ... to avoid build failure when GSS_C_DELEG_POLICY_FLAG is not defined.
  
  Reported by: Paul Howarth

- curl_gssapi: refine the handling of CURLOPT_GSSAPI_DELEGATION
  
  Suggested by Richard Silverman.

- [Adam Tkac brought this change]

  Add new CURLOPT_GSSAPI_DELEGATION option.
  
  Curl_gss_init_sec_context got new parameter - SessionHandle.
  
  Signed-off-by: Adam Tkac <atkac@redhat.com>

Yang Tse (31 Jul 2011)
- configure: add check for <sys/wait.h>

- NTLM single-sign on adjustments (VIII)
  
  Use preprocessor symbols WINBIND_NTLM_AUTH_ENABLED and WINBIND_NTLM_AUTH_FILE
  for Samba's winbind daemon ntlm_auth helper code implementation and filename.
  
  Retain preprocessor symbol USE_NTLM_SSO for NTLM single-sign-on feature
  availability implementation independent.
  
  For test harness, prefix NTLM_AUTH environment vars with CURL_
  
  Refactor and rename configure option --with-ntlm-auth to --enable-wb-ntlm-auth[=FILE]

Dan Fandrich (29 Jul 2011)
- Renumbered test2005 to test1310
  
  The 20xx range is for multiple sequential tests.

Yang Tse (29 Jul 2011)
- curl-functions.m4 serial # bump

- Revert "configure: additional flag checks for fcntl() socket() and socketpair()"
  
  This reverts commit bc6e6a465ad0b9f9757c4385698fe5f255dd125b.

- configure: additional flag checks for fcntl() socket() and socketpair()

- NTLM single-sign on adjustments (VII)
  
  Initialize variables when connectdata object is created.

- socketpair() usage tracking to allow fd leak detection

- fix compiler warning

Dan Fandrich (28 Jul 2011)
- Avoid a "shadows global declaration" warning on old MIT Kerberos
  
  Defining NCOMPAT eliminates the backwards-compatibility macros
  that are the source of the problem and which we don't need,
  anyway.

Yang Tse (28 Jul 2011)
- NTLM single-sign on adjustments (VI)
  
  Fix compiler warning

Dan Fandrich (28 Jul 2011)
- Give the NTLM SSO helper a moment to cleanly shut down if needed

- Removed an extraneous \n that violated the SSO daemon protocol
  
  This caused fake_ntlm to abort due to an invalid command
  causing sporadic test 2005 failures.

Yang Tse (28 Jul 2011)
- NTLM single-sign on adjustments (V)
  
  Enhance test harness fake_ntlm logging upon invalid input.

Dan Fandrich (27 Jul 2011)
- Fixed a couple of memory leaks in NTLM SSO support

Yang Tse (27 Jul 2011)
- NTLM single-sign on adjustments (IV)
  
  Fix compiler warning

- NTLM single-sign on adjustments (III)
  
  Provide some error tracing and fix execl() calling.

- NTLM single-sign on adjustments (II)
  
  Ensure test harness fake_ntlm main function can properly handle arguments.

- NTLM single-sign on adjustments (I)
  
  Use fake_ntlm absolute filename in NTLM_AUTH environment variable for test
  2005 definition.

Dan Fandrich (26 Jul 2011)
- Fixed test 2005 to work in out-of-tree builds
  
  Also, set the test number in the test data file so fake_ntlm can
  be reused in future tests.

Yang Tse (26 Jul 2011)
- fix compiler warning

- fix compiler warning

- stdio.h, stdlib.h, string.h, stdarg.h and ctype.h inclusion done in setup_once.h

- WIN32 io.h and fcntl.h inclusion done in setup_once.h

- time.h and sys/time.h inclusion conditionally done in setup_once.h

- errno.h inclusion conditionally done in setup_once.h - followup

- errno.h inclusion conditionally done in setup_once.h

Daniel Stenberg (22 Jul 2011)
- [Ben Winslow brought this change]

  progress: reset flags at transfer start
  
  When an easy handle is used to download an URI which has no
  Content-Length header (or equivalent) after downloading an URI which
  does, the value from the previous transfer is reused and returned by
  CURLINFO_CONTENT_LENGTH_DOWNLOAD. This is because the progress flags
  (used to determine whether such a header was received) are not reset
  between transfers.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3370895

- RELEASE-NOTES: HTTP error handling on request body send

- http error response: stop sending when error is received
  
  When libcurl has said to the server that there's a POST or PUT coming
  (with a content-length and all) it has to either deliver that amount of
  data or it needs to close the connection before trying a second request.
  
  Adds test case 1129, 1130 and 1131
  
  The bug report is about when used with 100-continue, but the change is
  more generic.
  
  Bug: http://curl.haxx.se/mail/lib-2011-06/0191.html
  Reported by: Steven Parkes

- [Michael Mueller brought this change]

  sso_ntlm_initiate: unassigned variable
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0109.html

- test2005: require a debug build

- runtests: add 'debug' as a feature a test can require

- configure: avoid "test -e"
  
  "test -e" is POSIX but clearly was not supported by the SunOS sh
  version, -f is supported and should be a decent equivalent
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3371574

- symbols-in-versions: add NTLM_SSO symbols

- gitignore: ignore fake_ntlm

- [Mandy Wu brought this change]

  test2005: verify ntlm single-signon

- [Mandy Wu brought this change]

  NTLM single-sign on supported
  
  With the use of the 'ntlm_auth' tool from the Samba project

- sws: don't enable pipelining for requests with content-length
  
  Log texts also modified and some white space edits

Patrick Monnerat (14 Jul 2011)
- Fix OS400 scripts to make it compilable again.
  Upgrade ILE/RPG binding to 7.21.7.
  Update OS400 documentation accordingly.

Daniel Stenberg (14 Jul 2011)
- runtests: ignore the 'all_proxy' environment variable as well
  
  We should probably also make sure that [protocol]_proxy for all possible
  protocols libcurl supports are unset.

Julien Chaffraix (13 Jul 2011)
- curl_gssapi: Guard files with HAVE_GSSAPI.
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0074.html
  Reported and fix suggested by: Ben Greear

Daniel Stenberg (13 Jul 2011)
- gssapi: rename our files to avoid conflicts
  
  gssapi.h is used as a header name by Heimdal-style GSSAPI so it would
  conflict with a private header using that name, and while renaming the
  header I figured we should name the .c file accordingly as well.
  
  Bug: http://curl.haxx.se/mail/lib-2011-07/0071.html
  Reported by: Ben Greear

- silence picky compilers: mark unused parameters
  
  Modern gcc versions (4.6.X) get more picky by default and have started
  to warn for unused parameters, but luckily gcc also allows us to mark
  them as unused so that we can avoid the warnings.

Julien Chaffraix (12 Jul 2011)
- gssapi.c: Simplified the function.
  
  Removed the parameters that were common to all our invocation.

- Added Curl_gss_init_sec_context.
  
  This function wraps our calls to gss_init_sec_context so that we
  have a unified way to talk to GSSAPI.

- http_negociate: Be consistent in gss_init_sec_context attributes.
  
  This change makes this callsite match the rest of the code.

Daniel Stenberg (4 Jul 2011)
- code style: space between close paren and open brace

- checksrc: detect open brace without space
  
  We use "if(condition) {" with a space between the close paren and the
  open brace.

- polarssl.h: remove CVS leftover

- help output: more gnu like output
  
  First, the -J/--remote-header-name was wrongly sorted in the --help
  output as pointed out in bug report #3349271.
  
  Then, I changed the format of the texts to follow the man page better in
  that it now uses "-A, --long" intead of "-A/--long". I also made all
  additional arguments get written as in "-A, --long FILENAME" instead of
  the previous "<filename>" style.
  
  Reported by: Herve Amblard
  Bug: http://curl.haxx.se/bug/view.cgi?id=3349271

- sws: allow multiple commands in <servercmd>

- Curl_http_readwrite_headers: minor indent fix

- gitignore: config.cache

- docs: FTP quotes support '*' prefix to ignore errors
  
  By default libcurl stops processing quote commands on failures.

- THANKS: new contributors from 7.21.7

- get_gss_name: proxy auth without proxy set equals error
  
  Previously it would access a NULL pointer and die.
  
  Bug: http://curl.haxx.se/mail/lib-2011-06/0170.html
  Reported by: Christian Hagele

- examples: cleanup curl includes
  
  Only <curl/curl.h> is needed typically and curl/types.h has been removed

- libtests: stop checking for CURLM_CALL_MULTI_PERFORM
  
  CURLM_CALL_MULTI_PERFORM stopped being a valid return code from
  curl_multi_perform back in 7.20.0. All the libcurl tests are ajusted to
  this and no longer check for this return code. Makes them simpler.

Dan Fandrich (24 Jun 2011)
- Fixed test 1300 to pass the memory torture test

Tom Wright (24 Jun 2011)
- looks like this should be static, not dll

Dan Fandrich (23 Jun 2011)
- Display notes from setup file in testcurl.pl
  
  Autobuild submitters can use this to add some text to their
  setup files to describe issues they've found with the build
  or tests. This could include laying blame on test failures on
  network issues or dependent libraries, explaining away compiler
  warnings or providing any additional information that could be
  useful to people reviewing and investigating problems with the
  publicly available autobuild logs.  Note that persistent test
  failures that are not issues with curl itself should normally be
  fixed by excluding them from the test run instead.
  
  This is an entirely optional field that is not entered by the
  user the first time a new build is created.

- Added a leap second test to test517

Daniel Stenberg (23 Jun 2011)
- runtests.pl: warn if a test is explicitly disabled
  
  Just to make sure a user is aware of it.

- bump release: start working towards 7.21.8

- parsedate: detect more invalid dates better

Version 7.21.7 (23 Jun 2011)

Daniel Stenberg (23 Jun 2011)
- curl_formfree: clarify which pointer to free

- RELEASE-NOTES: mention security issue 20110623
  
  libcurl inappropriate GSSAPI delegation. Full details at
  http://curl.haxx.se/docs/adv_20110623.html

- RELEASE-NOTES: synced with 9016958aa8989

- Curl_input_negotiate: do not delegate GSSAPI credentials
  
  This is a security flaw. See curl advisory 20110623 for details.
  
  Reported by: Richard Silverman

- [Josue Andrade Gomes brought this change]

  windows build: use correct MS CRT

- Merge pull request #23 from salty-horse/pop3_list_space
  
  [pop3] remove extra space in LIST command

Ori Avtalion (21 Jun 2011)
- [pop3] remove extra space in LIST command
  
  Some servers, e.g. mail.bezeqint.net:110, consider it a syntax error

Yang Tse (21 Jun 2011)
- http: fix compiler warning
  
  compiler warning: conditional expression is constant

- asyn-thread: fix compiler warning
  
  compiler warning: variable is initialized but not referenced

- cmake: remove spurious definition

Daniel Stenberg (21 Jun 2011)
- FAQ: more blurb on persistent connections

Yang Tse (21 Jun 2011)
- xc-translit.m4 fix quoting

Daniel Stenberg (20 Jun 2011)
- INSTALL: mention the GIT-INFO file

Dan Fandrich (20 Jun 2011)
- Added LOCAL_MODULE_TAGS to support Android gingerbread

Daniel Stenberg (19 Jun 2011)
- [Amr Shahin brought this change]

  unitteset: Curl_llist_move
  
  adding unit test for Curl_llist_move, documenting unit-tested functions
  in llist.c, changing unit-test to unittest, replacing assert calls with
  abort_unless calls

- CURLFORM_STREAM: acknowledge CURLFORM_FILENAME
  
  The CURLFORM_STREAM is documented to only insert a file name (and thus
  look like a file upload) in the part if CURLFORM_FILENAME is set, but in
  reality it always inserted a filename="" and if CURLFORM_FILENAME wasn't
  set, it would insert insert rubbish (or possibly crash).
  
  This is now fixed to work as documented, and test 554 has been extended
  to verify this.
  
  Reported by: Sascha Swiercy
  Bug: http://curl.haxx.se/mail/lib-2011-06/0070.html

Yang Tse (17 Jun 2011)
- configure: avoid direct usage of AS_TR_* macros

- xc-translit.m4 provides transliteration macros with well defined behavior.

Daniel Stenberg (14 Jun 2011)
- RELEASE-NOTES: add more contributors for this release

- RELEASE-NOTES: synced with 0aedccc18a33a778535

- curl_formget: fix FILE * leak
  
  Properly deal with the fact that the last fread() call most probably is
  a short read, and when using callbacks in fact all calls can be short
  reads. No longer consider a file read done until it returns a 0 from the
  read function.
  
  Reported by: Aaron Orenstein
  Bug: http://curl.haxx.se/mail/lib-2011-06/0048.html

- curl_formget: treat CURLFORM_STREAM better
  
  If a piece is set to use a callback to get the data, it should not be
  treated as data. It unfortunately also requires that curl_easy_perform()
  or similar has been used as otherwise the callback function hasn't been
  figured out and curl_formget won't know how to get the content.

- curl_formget.3: CURLFORM_STREAM has its drawbacks
  
  Due to a design flaw, the CURLFORM_STREAM option doesn't really work
  with curl_formget until after curl_easy_perform (or similar).

- FAQ: binding clarification
  
  We don't author the bindings, they are created outside the main project.

Dan Fandrich (11 Jun 2011)
- Added http as a dependency of test 1308

Daniel Stenberg (12 Jun 2011)
- test1309: added to the dist

- write: add return code checks when used
  
  These were just warnings in test code but it still makes it nicer to not
  generate them.

- long/int mess
  
  Typecast when converting to int from long to avoid some compiler warnings

Yang Tse (11 Jun 2011)
- configure: OpenSSL API detection cleanup

Dan Fandrich (11 Jun 2011)
- Fixed test 1309 to pass the torture test
  
  Removing dynamic allocations also simplifies the test.

Daniel Stenberg (10 Jun 2011)
- splay: add unit tests
  
  The test code that was #ifdef'ed in the code was converted into unit
  tests in test case 1309. I also removed the #if 0'ed code from splay.c

- unittest: mark all unit tested functions
  
  With "@unittest: [num]" in the header comment for each tested function.
  Shows we have a log way to go still...

- CURLOPT_WRITEHEADER: clarify the docs

- unit test formpost: added test case 1308
  
  This is a few first rather basic tests of curl_formadd() and
  curl_formget(). Should serve as building blocks to add more variations
  to the test.

Yang Tse (9 Jun 2011)
- configure: warn if OpenSSL headers and library versions don't match

- configure: get API info for a couple of OpenSSL functions (followup 2)

- configure: get API info for a couple of OpenSSL functions (followup 1)

- configure: fix recvfrom 5th arg type qualifier detection (followup)

- configure: fix recvfrom 5th arg type qualifier detection

Kamil Dudka (8 Jun 2011)
- disconnect: wipe out the keeps_speed time stamp
  
  When closing a connection, the speedchecker's timestamp is now deleted
  so that it cannot accidentally be used by a fresh connection on the same
  handle when examining the transfer speed.
  
  Bug: https://bugzilla.redhat.com/679709

Yang Tse (7 Jun 2011)
- urldata: use uniform inclusion style for OpenSSL headers

Daniel Stenberg (7 Jun 2011)
- HTTP time condition: force closure for 200 OK
  
  When a time condition isn't met, so that no body is delivered to the
  application even though a 2xx response is being read from the server, we
  must close the connection to avoid a re-use of the connection to be
  completely tricked.
  
  Added test 1128 to verify.

- RELEASE-NOTES: synced with b772f3a32146d7d

Yang Tse (6 Jun 2011)
- configure: get API info for a couple of OpenSSL functions

Daniel Stenberg (5 Jun 2011)
- wait_ms: takes an int argument
  
  Typecasts added since I changed more code to use long for timeouts

- Curl_socket_ready: make timeout a 'long'
  
  It was mostly typecasted to int all over the code so switching to long
  instead all over should be a net gain.

Yang Tse (4 Jun 2011)
- xlc: avoid preprocessor definition usage when linking

- unit tests: disable unit tests for a given cross-compilation configuration.
  
  cross-compilation of unit tests static library/programs fails when
  libcurl shared library is also built. This might be due to a libtool or
  automake issue. In this case we disable unit tests.

Daniel Stenberg (3 Jun 2011)
- cookie_output: made private

- digest_cleanup_one: made private

- privatise: make private functions static

- Curl_fileinfo_dup: removed, not used

- parsedate: turn private and static
  
  I removed the prefix as well accordingly.

Dan Fandrich (2 Jun 2011)
- curl hasn't sent a Pragma: header by default for a while

Yang Tse (2 Jun 2011)
- unit tests: attempt to fix linkage issue

- urlglob: fix zero size malloc

- Remove unnecessary typecast

- compiler warning: fix
  
  Fix compiler warning: cast increases required alignment

- unit tests: make unit tests building actually depend on --enable-debug option.

- OpenSSL enabled: require OPENSSL_VERSION_NUMBER definition before usage.

- unit tests: more build adjustments

Daniel Stenberg (1 Jun 2011)
- CURLOPT_WILDCARDMATCH: minor style edit
  
  Due to some flaw in roffit I removed some style changes to make the web
  page look better.

Yang Tse (1 Jun 2011)
- makefile: avoid preprocessor definition usage when linking

- warnless: icc 9.1 workaround

Daniel Stenberg (31 May 2011)
- testcurl.pl: allow configure args to use '='

Yang Tse (30 May 2011)
- Makefile.am: fix spurious CFLAGS duplication

Dan Fandrich (30 May 2011)
- Removed types.h from Android makefile

Daniel Stenberg (30 May 2011)
- configure.ac: skip /dev/urandom check when cross-compiling
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3307835

Yang Tse (29 May 2011)
- main: fix header inclusion order
  
  Currently, Windows cross-compiled autobuilds require inclusion of setup.h
  before curl.h to get definitions of CURL_STATICLIB and BUILDING_LIBCURL.

- main: fix header inclusion order

- distribution: Fix EXTRA_DIST letter case

Daniel Stenberg (27 May 2011)
- curl_easy_setopt.3: NOPROGRESS also affects the callback

Yang Tse (27 May 2011)
- warnless: header inclusion fix

- Make checksrc.pl work on more out-of-tree builds
  
  Source files given with relative paths do not have the
  -D directory specifier prepended.

- compiler warning: fix
  
  Fix compiler warning: conversion may lose significant bits

- socks: fix unaligned memory access

- compiler warning: fix
  
  Fix compiler warning: variable was set but never used
  
  Fix compiler warning: clobber ignored

- unit tests: build adjustment
  
  Also define UNITTESTS macro when building unit test sources.
  
  Fixing compiler warning: external definition with no prior declaration

Daniel Stenberg (25 May 2011)
- create_conn: only switch protocol handler if necessary
  
  When switching to HTTP because a HTTP proxy is being used, the existing
  handler is now checked if it already is "compatible". This allows the https
  handler remain while other non-http handlers will be redirected.
  
  Bug: http://curl.haxx.se/mail/lib-2011-05/0214.html
  Reported by: Jerome Robert

- setopt.3: remove leftover style change

- setopt.3: CURLOPT_WRITEFUNCTION had wrong function proto

Yang Tse (25 May 2011)
- compiler warning: fix followup
  
  Fix compiler warning: variable was set but never used
  
  Fix compiler warning: clobber ignored

- unit tests: README, adjust header inclusion order

- compiler warning: fix
  
  Fix compiler warning: variable was set but never used
  
  Fix compiler warning: clobber ignored

- compiler warning: fix
  
  Fix compiler warning: external definition with no prior declaration

- compiler warning: fix
  
  Fix compiler warning: external definition with no prior declaration

- compiler warning: fix
  
  Fix compiler warning: argument is incompatible with corresponding format
  string conversion

- build: inclusion guard
  
  Enclose header file in an inclusion guard

- compiler warning: fix
  
  Fix compiler warning: expression has no effect

- compiler warning: fix
  
  Fix compiler warning: `keycheck' might be used uninitialized in this function.
  Fix compiler warning: `keybit' might be used uninitialized in this function.

- compiler warning: fix
  
  Fix variable declaration placement

- compiler warning: fix
  
  Fix missing semicolon

- compiler warning: fix
  
  Fix compiler warning: expression has no effect
  
  Fix OOM handling

- compiler warning: fix
  
  Fix compiler warning: expression has no effect

- compiler warning: fix
  
  Fix compiler warning: unused variable 'data'

- compiler warning: fix
  
  Fix compiler warning: enumerated type mixed with another type

- compiler warning: fix
  
  Fix compiler warning: enumerated type mixed with another type

- compiler warning: fix
  
  Fix compiler warning: enumerated type mixed with another type

- compiler warning: fix
  
  Fix compiler warning: enumerated type mixed with another type

- compiler warning: fix
  
  Fix compiler warning: enumerated type mixed with another type

- compiler warning: fix
  
  Fix compiler warning: empty body in an if-statement

- unit tests: adjust header inclusion order
  
  Additionally, prevent multiple inclusions of curl_config.h

Daniel Stenberg (20 May 2011)
- Merge pull request #19 from pierrejoye/master
  
  winbuild: typo in docs

- [Ola Mork brought this change]

  cyassl: build without filesystem
  
  Get cyassl's NO_FILESYSTEM to work with libcurl. Otherwise I'd get linker
  errors for the missing "SSL_CTX_load_verify_locations" functions.

Pierre Joye (20 May 2011)
- - typo

Daniel Stenberg (19 May 2011)
- typo: close is in man page section 3

Yang Tse (19 May 2011)
- tests: verify OPEN/CLOSESOCKETFUNCTION
  
  Test 585: Fix opensocket return type, and avoid function name clash.

- version: linkage fix
  
  Fix linkage on c-ares enabled Windows static builds

Daniel Stenberg (18 May 2011)
- curl_easy_setopt.3: document CLOSESOCKET* options

- tests: verify OPEN/CLOSESOCKETFUNCTION
  
  Test 585 and 586 were added. Using a modified lib500.c

- symbols-in-versions: add CLOSESOCKET*

- CLOSESOCKETFUNCTION: use the callback
  
  Fix the return type of the callback to match close() and make use of it.

- CLOSESOCKETFUNCTION: added
  
  Introduced the initial setup to allow closesocket callbacks by making
  sure sclose() is only ever called from one place in the libcurl source
  and still run all test cases fine.

- GnuTLS handshake: fix timeout
  
  Commit cbf4961bf3e garbled the timeout handling while doing SSL
  handshaking (in an attempt at fixing another bug). This puts sanity
  back.
  
  Bug: http://curl.haxx.se/mail/lib-2011-05/0167.html
  Reported by: Ethan Glasser Camp

- checksrc: trailing whitespace detection fix

- [Marcel Roelofs brought this change]

  negotiate sspi: fix sequential requests

- tests: added HTTP If-Modified-Since tests
  
  Added test 1126 and 1127 to verify curl's behaviour when If-Modified-Since
  is used and a 200 is returned.
  
  The list of test cases in Makefile.am is now sorted numerically.

- include: cleanup
  
  Made the public headers checksrc compliant
  
  Removed types.h (it's been unused since April 2004)
  
  Made the root makefile do make in include by default as well, so that
  TAGS and the checksrc will work better.

Dan Fandrich (6 May 2011)
- Fixed compilation when RTSP is disabled

- Fixed LDAP after RTSP readwrite change

Daniel Stenberg (6 May 2011)
- RELEASE-NOTES: synced with 32001ac4149b206

- set_userpass: convert from protocol-specific to generic
  
  The protocol handler's flags field now can set that the protocol
  requires a password, so that the set_userpass function doesn't have to
  have the specific knowledge of which protocols that do.

- RTSP: cleanups
  
  Made several functions static
  
  Made one function defined to nothing when RTSP is disabled to avoid
  the #ifdefs in code.
  
  Removed explicit rtsp.h includes

- RTSP: convert protocol-specific checks to generic
  
  Add a 'readwrite' function to the protocol handler struct and use that
  for the extra readwrite functionality RTSP needs.

- SSL: check for SSL, not specific protocols
  
  Code cleanup to check less for protocols and more for the specific
  relevant feature. Like if SSL is required.

- http_perhapsrewind: remove HTTP check
  
  No need to check for HTTP as this is now a HTTP-specific function

- http_perhapsrewind:
  
  make it static, remove Curl_ prefix

- remove FILE protocol-specific checks
  
  Also, convert the BANPROXY flag into NONETWORK for the protocols
  (file:// only atm) that don't work over networks.

- curl.1: --socks* options no longer needed
  
  As we now can specify all the socks proxy types with the regular --proxy
  option using protocol prefix.

- socks proxy: allow socks5h:// prefix too
  
  Using 'socks5h' as proxy protocol will make it a
  CURLPROXY_SOCKS5_HOSTNAME proxy which is SOCKS5 and asking the proxy to
  resolve host names. I found no "standard" protocol name for this.

- curl.1: minor edit of --ftp-ssl*

- [Jari Aalto brought this change]

  curl.1: use GNU style and sort options
  
  Follow style of GNU layout (cp, mv ...) where options are separated with
  comma: -o, --option
  
  Order item alphabetically (by length also): -o, -O, --option
  
  Follow style of GNU layout by moving help related options to the end:
  --help, -M, --version

- Corrected comments
  
  closepolicy has been deprecated and unused for years

- ConnectionStore: remove unused return code

- indent correctly

- curl_easy_getinfo.3: clarify some timing info

- curl_easy_setopt.3: clarify the SSH KEYFILE options usage
  
  The internal defaults are important info

- docs: mention the protocol:// support in proxy strings

- --data-ascii: add mention
  
  As it is a separate option it should have a .IP title

- url encode docs: mention '-', '.', '_' and '~'
  
  Clarify that the '-', '.', '_' or '~' letters are also not escaped since
  they shouldn't according to RFC3986 section 2.3.
  
  This is how this function has behaved since sep 2010, commit
  5df13c31735fa0.

- SSH: set non-blocking earlier
  
  Introduce an INIT state for the SSH state machine and set libssh2
  non-blocking in that so that it is set properly before
  libssh2_session_startup() is called.
  
  Bug: http://curl.haxx.se/mail/archive-2011-05/0001.html

- curl_formfree.3: mention argument may be NULL
  
  As the code already checks for it we can just as well make it official!

- ConnectionExists: avoid NULL dereference
  
  When checking for connections that are bound to a particular device we
  must make sure we don't compare with a NULL pointer.

- resolver_error: remove bad semicolon

- RELEASE-NOTES: synced with c4bc1d473f324

- anyauthput.c: stdint.h must not be included unconditionally
  
  As it is already included by curlbuild.h if it exists on the platform it
  was included here superfluously anyway.
  
  Reported by: Dagobert Michelsen
  Bug: http://curl.haxx.se/bug/view.cgi?id=3294509

- gai_strerror: provide private implementation
  
  There are systems (like NetWare) without its own gai_strerror()
  function.

- treaded-resolver: better error messages
  
  Now use gai_strerror() to get proper error messages when getaddrinfo()
  has failed. Detect the function in configure.
  
  Code based on work and suggestions by Jeff Pohlmeyer and Guenter Knauf

- proxy: allow socks:// prefix in proxy string
  
  Inspired by a patch from OB.Conseil. Added test case 708 to verify.

- [Zmey Petroff brought this change]

  CMake: improve library search, implement install.
  
  Improved library search by check_function_exists_concat() macro:
  it does not revert the list of libraries any more.
  
  Improved OpenSSL library search: first find zlib, then search for
  openssl libraries that may depend on zlib.
  
  For Unix: openssl libraries can now be detected in nonstandard
  locations. Supply CMAKE_LIBRARY_PATH to CMake on command line.
  
  Added installation capability (very basic one yet).

- multi-socks: fix connect to proxy
  
  When connecting to a socks or similar proxy we do the proxy handshake at
  once when we know the TCP connect is completed and we only consider the
  "connection" complete after the proxy handshake. This fixes test 564
  which is now no longer considered disabled.
  
  Reported by: Dmitri Shubin
  Bug: http://curl.haxx.se/mail/lib-2011-04/0127.html

- cleanup: remove old unused debug code

Dan Fandrich (27 Apr 2011)
- Make checksrc.pl work on out-of-tree builds
  
  Source files given with absolute paths do not have the
  -D directory specifier prepended.

Daniel Stenberg (27 Apr 2011)
- make: add checksrc.pl to dist

- make: add 'checksrc' as target to check code style
  
  The make target checksrc now works in the root makefile and in both the
  src and lib directories.
  
  It is also run automatically on "all" if configure --enable-debug was
  used.

- checksrc: whitespace and code style cleanup
  
  Make everything adhere to the standards upheld by checksrc.pl and now
  run checksrc from the makefile on debug builds.

- checksrc: add -W to allow a file to be whitelisted
  
  Useful when a known file just doesn't comply and there's no intention to
  make it do so.

- whitespace cleanup: no space first in conditionals
  
  "if(a)" is our style, not "if( a )"

- lib/make: run checksrc.pl once for all files
  
  Since it now supports multiple files this will be faster and will show
  problems for more file than one at a time - more convenient.

- checksrc: scan many files, more checks
  
  It now scans multiple files and outputs an error+warning count summary
  at the end in case at least one was detected.
  
  -D can be used to specify in which dir the files are located
  
  The script now scans for conditions that starts with a space for
  if/while/for lines.

- Makefile: run checksrc if debug enabled
  
  And make the build fail if a warning or error was detected

- checksrc: exit error code if warnings or errors

- SSH: move knownhost logic to separate function

- source cleanup: unify look, style and indent levels
  
  By the use of a the new lib/checksrc.pl script that checks that our
  basic source style rules are followed.

Guenter Knauf (27 Apr 2011)
- Windows native IDN fixes.
  
  For now provide prototypes instead of including the
  non-standard normalisation.h which is only available in the
  "Internationalized Domain Names Mitigation APIs" download.

Dan Fandrich (25 Apr 2011)
- Fixed compiler warning in Windows SSPI case

- Fixed compilation when the synchronous resolver is used

- Added new resolver sources to Symbian and VC6 build files

Daniel Stenberg (25 Apr 2011)
- hostip: comment fixed to state current situation

- async resolvers: further cleanups
  
  asyn-ares.c and asyn-thread.c are two separate backends that implement
  the same (internal) async resolver API for libcurl to use. Backend is
  specified at build time.
  
  The internal resolver API is defined in asyn.h for asynch resolvers.

- asynch resolvers: cleanup
  
  Fixed indents, coding conventions and white space edits.
  
  Modified the c-ares completion callback function to again NOT read the
  conn data when the ares handle is being taken down as then it may have
  been freed already.

- [Vsevolod Novikov brought this change]

  asynch resolvers: unified
  
  Introducing an internal API for handling of different async resolver
  backends.

Guenter Knauf (24 Apr 2011)
- Enabled OpenWatcom native Windows IDN build.
  
  For now we directly import the Idn* symbols with the linker;
  an upcoming release of OWC will have these added to the import
  lib normaliz.lib, and prototypes are added to winnnls.h.

Daniel Stenberg (22 Apr 2011)
- NTLM: work with unicode
  
  Rewritten code from a patch brought by Matteo Rocco.

- bump version: work towards 7.21.7

- THANKS: contributors from 7.21.6

Version 7.21.6 (22 Apr 2011)

Daniel Stenberg (22 Apr 2011)
- RELEASE-NOTES: two more contributors

Dan Fandrich (21 Apr 2011)
- Fixed test 1023 when using daily snapshots

- Include unistd.h to declare close()

Julien Chaffraix (21 Apr 2011)
- [Fabian Keil brought this change]

  In lib/, change 'wanna' to 'want to'.
  
  Found with codespell.

- [Fabian Keil brought this change]

  Fix spelling errors in buildconf
  
  Found with codespell.

- [Fabian Keil brought this change]

  Fix spelling errors in src/
  
  Found with codespell.

- [Fabian Keil brought this change]

  Fix spelling errors in include/

- [Fabian Keil brought this change]

  Fix a couple of spelling errors in lib/
  
  Found with codespell.

- transfer.c: Fixed indentation in readwrite_data.

Dan Fandrich (20 Apr 2011)
- Fixed closing test tag

Daniel Stenberg (20 Apr 2011)
- RELEASE-NOTES: synced with 3242abd87a1262

- SFTP: close file before postquote
  
  Make sure that files are closed before the post quote commands run as if
  they operate on the just transferred file they could otherwise easily
  fail.
  
  Patch by: Rajesh Naganathan (edited)

Dan Fandrich (20 Apr 2011)
- Fixed test 1022 when using daily snapshots

Daniel Stenberg (20 Apr 2011)
- Curl_http_connect: detect HTTPS properly after CONNECT
  
  libcurl failed to check the correct struct for HTTPS after CONNECT was
  issued to the proxy, so it didn't do the TLS handshake and subsequently
  failed the connection. A regression released in 7.21.5 (introduced
  around commit 8831000bc07de).
  
  Bug: http://curl.haxx.se/mail/lib-2011-04/0134.html
  Reported by: Josue Andrade Gomes

- curl_easy_setopt.3: CURLOPT_PROXYTYPE clarification
  
  When set to a HTTP 1.0 proxy, that only affects the CONNECT request and
  not the regular HTTP request.

- [Gisle Vanem brought this change]

  CURL_DOES_CONVERSIONS: fixes
  
  Made it compile and work again after the code move.

- CURL_DOES_CONVERSIONS: cleanup
  
  Massively reduce #ifdefs all over (23 #ifdef lines less so far)
  Moved conversion-specific code to non-ascii.c

Guenter Knauf (19 Apr 2011)
- Improve MinGW static makefile builds.
  
  It is now possible to use any combination of features without
  having to 1st add makefile targets to the main makefile. The
  main makefile now passes the 'mingw32-feat1-feat2' as var CFG,
  and the ./[lib|src]/Makefile.m32 parses the CFG var to determine
  the features to be enabled.

- Enabled MinGW native Windows IDN build.

- Windows native IDN fixes.
  
  changed windows.h include to system header;
  changed obsolete 2nd check for str_w to str_utf8 in order to catch
  malloc() failure and avoid a free(NULL);
  changed calls to GetLastError() to void to kill unsused var compiler
  warnings;
  moved one call to GetLastError() into else case so that its only
  called when WideCharToMultiByte() really fails.

- Windows native IDN fixes.
  
  Provide prototype for curl_win32_idn_to_ascii();
  remove wrong 3rd parameter from curl_win32_idn_to_ascii() call.

Daniel Stenberg (19 Apr 2011)
- curl-config: fix version output
  
  do the s/VERSION/CURLVERSION replacement for the human redable output
  for --checkfor
  
  Reported by: Ryan Schmidt

- RELEASE-NOTES: synced with 5aae3c13e2

Guenter Knauf (19 Apr 2011)
- Updated default (recommended) dependency versions.

- Updated default (recommended) dependency versions.

Daniel Stenberg (18 Apr 2011)
- transfer-encoding: document the options
  
  The new libcurl and command line options are now described.

- transfer-encoding: added new option and cmdline
  
  Added CURLOPT_TRANSFER_ENCODING as the option to set to request Transfer
  Encoding in HTTP requests (if built zlib enabled). I also renamed
  CURLOPT_ENCODING to CURLOPT_ACCEPT_ENCODING (while keeping the old name
  around) to reduce the confusion when we have to encoding options for
  HTTP.
  
  --tr-encoding is now the new command line option for curl to request
  this, and thus I updated the test cases accordingly.

- CURLE_BAD_CONTENT_ENCODING: now used for transfer encoding too

- TE: do the Connection: header
  
  When TE: is inserted in the request, we must add a "Connection: TE" as
  well to be HTTP 1.1 compliant. If a custom Connection: header is passed
  in, we must use that and only append TE to it. Test case 1125 verifies
  TE: + custom Connection:.

- test1124: verify gzip AND chunked transfer-encoding

- TE: rename struct field content_encoding
  
  Since this struct member is used in the code to determine what and how
  to decode automatically and since it is now also used for compressed
  Transfer-Encodings, I renamed it to the more suitable 'auto_decoding'

- HTTP: add support for gzip and deflate Transfer-Encoding
  
  Transfer-Encoding differs from Content-Encoding in a few subtle ways,
  but primarily it concerns the transfer only and not the content so when
  discovered to be compressed we know we have to uncompress it. There will
  only arrive compressed transfers in a response after we have requested
  them with the appropriate TE: header.
  
  Test case 1122 and 1123 verify.

Patrick Monnerat (18 Apr 2011)
- OS400 pragma comment: replace (date) by (user, __DATE__) to include year.

- Augment RPG binding with "OLDIES" definitions.
  Fix OS400 LDAP wrappers: strings were non null-terminated.

Daniel Stenberg (18 Apr 2011)
- curl-config: fix --version
  
  curl-config --version didn't output the correct version string (bug
  introduced in commit 0355e33b5f7b234cf3), and unfortunately the test
  case 1022 that was supposed to check for this was broken.
  
  This change fixes the test to detect this problem and it fixes the
  output.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3288727

- RELEASE-NOTES: updated contributor amount

- THANKS: 11 new contributors from 7.21.5

- 7.21.6: next planned release number

Version 7.21.5 (17 Apr 2011)

Daniel Stenberg (17 Apr 2011)
- base64.c: removed wrong comment

- INTERNALS: clean up
  
  Clarified the release procedure

- TODO-RELEASE: push the remaining ones to next release
  
  As we're closing in on the release, I give up on the remaining ones but
  I leave them in here for now to try to fix for next release.
  
  I removed the 281 issue about warnings from the statical analyzer scans,
  as they seem to be mostly false positives at this point.

- RELEASE-NOTES: synced with c246f63a71

- Curl_ssl_shutdown: restore send/recv pointers
  
  When going back from SSL, put the send/recv function pointers back to
  the plain versions.
  
  Bug: http://curl.haxx.se/mail/lib-2011-04/0070.html
  Reported by: Mehmet Bozkurt

Guenter Knauf (16 Apr 2011)
- Changed email per Gisle's request.

Daniel Stenberg (14 Apr 2011)
- curl.1: error code update
  
  Error 4 has got a meaning
  
  Error 48 has got a slightly different meaning now

- FAQ: c-ares does ipv6 pretty well now

- [Andrei Benea brought this change]

  Fix a buffer overflow in pubkey_show().

Guenter Knauf (14 Apr 2011)
- Replaced var manipulations with perlish hacks.

Dan Fandrich (12 Apr 2011)
- Updated minimum binary sizes

Daniel Stenberg (12 Apr 2011)
- configure: libssh2 link fix without pkg-config
  
  The script didn't properly add the -lssh2 link option when it enabled
  libssh2 linking where pkg-config isn't found.
  
  Reported by: Saqib Ali
  Bug: http://curl.haxx.se/mail/lib-2011-04/0054.html

- RELEASE-NOTES: synced with f01df197981

- checkconnection: don't call with NULL pointer
  
  When checking if an existing RTSP connection is alive or not, the
  checkconnection function might be called with a SessionHandle pointer
  being NULL and then referenced causing a crash. This happened only using
  the multi interface.
  
  Reported by: Tinus van den Berg
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3280739

- curl.1: spell out the -O target directory
  
  When using -O the file will be saved in the current directory, and this
  is now spelled out clearly.

- OpenSSL: no-sslv2 aware
  
  Allow openSSL without SSL2 to be used. This fix is inspired by the fix
  provided by Cristian Rodrguez.
  
  Reported by: Cristian Rodrguez

- curl_easy_setopt.3: CURLOPT_RESOLVE typo version
  
  Reported by: Hongli Lai

Kamil Dudka (8 Apr 2011)
- nss: allow to use multiple client certificates for a single host
  
  In case a client certificate is used, invalidate SSL session cache
  at the end of a session.  This forces NSS to ask for a new client
  certificate when connecting second time to the same host.
  
  Bug: https://bugzilla.redhat.com/689031

Daniel Stenberg (7 Apr 2011)
- mk-ca-bundle.pl: show full URL in output
  
  When I decided to search for a potential error with the cacert bundle it
  struck me I wanted to see the full source URL in the output...

Dan Fandrich (7 Apr 2011)
- Added mention of FTP proxies

Daniel Stenberg (7 Apr 2011)
- [Gisle Vanem brought this change]

  src/Makefile.b32: updates
  
  * Rename the object object directory from 'objs' to 'BCC_obj' to be in
   sync with my previous patch for lib/Makefile.b32.
  
  * Turn off these warnings to keep the build totally silent (with CBuilder-6
   that is).
    -w-inl    8026 Functions X are not expanded inline.
    -w-pia   8060 Possibly incorrect assignment
    -w-pin  8061 Initialization is only partially bracketed
   (same added in src/Makefile.b32)
  
  * $(MKDIR) and $(RMDIR) have been replaced with the shell-commands 'md'
   and 'rd'. When having MingW/Msys programs 'mkdir.exe' and 'rmdir.exe' in
  $PATH, this confuses Borland's make and the result (the cleaning etc.) would
   not be as expected.
  
  * Removed the preprocessing step; no need for PP_CMD and the .int files.
   curl.exe builds fine w/o and the makefile gets simpler.
  
  * Added a target for creating a compressed hugehelp.c if WITH_ZLIB is  defined.
  It assumes groff, gzip and perl is available if such an "advanced"  users
  requests it. Okay? BTW. My groff and Perl needs unix-slashes ('/').
   Other perls should handle both forms ('/' and '\').

- [Gisle Vanem brought this change]

  lib/Makefile.b32: updates
  
  * Rename the object object directory from 'objs' to 'BCC_obj'. I feel
   it should be named properly. Ref. Makefile.Watcom where it's called
   'WC_Win32.obj'.
  
  * Turn off these warnings to keep the build totally silent (with CBuilder-6
   that is).
    -w-inl    8026 Functions X are not expanded inline.
    -w-pia   8060 Possibly incorrect assignment
    -w-pin  8061 Initialization is only partially bracketed
  
  I'm sure the warnings could be fixed the "proper" way or with some added
  "#pragma" statements. But that just clutters the sources IMHO.
  
  * $(MKDIR) and $(RMDIR) have been replaced with the shell-commands 'md'
   and 'rd'. When having MingW/Msys programs 'mkdir.exe' and 'rmdir.exe' in
  $PATH, this confuses Borland's make and the result (the cleaning etc.) would
   not be as expected.
  
  * Added a ".path.int = $(OBJDIR)" to tell make where the $(PREPROCESSED)
   files are. Why we need the preprocess step in the fist place is beyond me
  (Yang?). But I'll leave that for now.

- [Gisle Vanem brought this change]

  examples/makefile.dj: update email

- TODO-RELEASE: deleted 4 issues
  
  These problems have gotten no interest/feedback from users:
  
  -275 - Introduce a way to avoid sending USER for FTP connections
  -288 - bug 3219997 curl rtmp request curl: (55) select/poll returned error
  
  This problem is rather an autoconf bug with little user interest and it
  can be worked around with an older autoconf:
  
  -278 - "Configure  $as_echo does not work"
  
  This problem is not fixed:
  
  -286 - bug 3214223 Pipelined HTTP requests with a zero-length body broken

- [Chris Smowton brought this change]

  HTTP pipelining: Fix handling of zero-length responses
  
  Also add test case 584 for the same
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3214223

- libcurl.pc: version number fix
  
  This hasn't show the version number correctly since the $VERSION change
  in the configure, and now it works again.

Dan Fandrich (5 Apr 2011)
- Changed some nonportable types

- Don't list NTLM in curl-config when HTTP is disabled
  
  Also, fixed Curl_proxyCONNECT() stub with HTTP disabled.

- Fixed compatibility macro CURLE_URL_MALFORMAT_USER

Daniel Stenberg (5 Apr 2011)
- return code cleanup: build, init and run-time errors
  
  Stop the abuse of CURLE_FAILED_INIT as return code for things not being
  init related by introducing two new return codes:
  
  CURLE_NOT_BUILT_IN and CURLE_UNKNOWN_OPTION
  
  CURLE_NOT_BUILT_IN replaces return code 4 that has been obsoleted for
  several years. It is used for returning error when something is
  attempted to be used but the feature/option was not enabled or
  explictitly disabled at build-time. Getting this error mostly means that
  libcurl needs to be rebuilt.
  
  CURLE_FAILED_INIT is now saved and used strictly for init
  failures. Getting this problem means something went seriously wrong,
  like a resource shortage or similar.
  
  CURLE_UNKNOWN_OPTION is the option formerly known as
  CURLE_UNKNOWN_TELNET_OPTION (and the old name is still present,
  separately defined to be removed in a very distant future). This error
  code is meant to be used to return when an option is given to libcurl
  that isn't known. This problem would mostly indicate a problem in the
  program that uses libcurl.

- FTP+proxy: macrofied functions when proxy disabled
  
  In my attempts to reduce #ifdefs in code, the SOCKS functions are now
  macros when libcurl is built without proxy support and therefore the FTP
  code could avoid some #ifs.

- RELEASE-NOTES: synced with db59b6202d8

- [Ben Noordhuis brought this change]

  [pop3 starttls] PASS command was not sent after upgrade to TLS.

- [Ben Noordhuis brought this change]

  [pop3 starttls] the command to send is STLS, not STARTTLS.

Dan Fandrich (4 Apr 2011)
- Added http_proxy.c to the Symbian build files

Daniel Stenberg (4 Apr 2011)
- http-proxy: move proxy code to http_proxy.c
  
  The new http_proxy.* files now host HTTP proxy specific code (500+ lines
  moved out from http.c), and as a consequence there is a macro introduced
  for the Curl_proxyCONNECT() function so that code can use it without
  actually supporting proxy (or HTTP) in builds.

- disable cookies: remove ifdefs, move code
  
  1 - make sure to #define macros for cookie functions in the cookie
  header when cookies are disabled to avoid having to use #ifdefs in code
  using those functions.
  
  2 - move cookie-specific code to cookie.c and use the functio
  conditionally as mentioned in (1).
  
  net result: 6 #if lines removed, and 9 lines of code less

Kamil Dudka (4 Apr 2011)
- nss: fix a crash within SSL_AuthCertificate()
  
  The bug was introduced in 806dbb0 (a wrong value was passed in as the
  first argument to the default callback in our wrapper).

Daniel Stenberg (3 Apr 2011)
- multi: shorten lines
  
  We keep them less than 80 columns

- multi: conn goes bad when data change
  
  Within multi_socket when conn is used as a shorthand, data could be
  changed and multi_runsingle could modify the connectdata struct to deal
  with. This bug has not been included in a public release.
  
  Using 'conn' like that turned out to be ugly. This change is a partial
  revert of commit f1c6cd42f474df59.
  
  Reported by: Miroslav Spousta
  Bug: http://curl.haxx.se/bug/view.cgi?id=3265485

Guenter Knauf (1 Apr 2011)
- Increased script version.

- Make use of proxy vars if set.
  
  Posted to the list by Quanah Gibson-Mount [quanah zimbra.com].

- Use var again instead of hard-coded filename.

Daniel Stenberg (29 Mar 2011)
- [Gisle Vanem brought this change]

  typo fix

- curl_easy_setopt.3: mention TFTP read callback flaw
  
  The read callback must return the exact requested amount of data when it
  is used for doing TFTP uploads. This is due to how it deals with data
  internally. This could/should be fixed but for now we document the
  existing behavior.
  
  Reported by: Colin Blair
  Bug: http://curl.haxx.se/mail/lib-2011-03/0319.html

Yang Tse (27 Mar 2011)
- configure: fix libtool warning

Daniel Stenberg (25 Mar 2011)
- [Peter Sylvester brought this change]

  TSL-SRP: enabled with OpenSSL
  
  If a new enough OpenSSL version is used, configure detects the TLS-SRP
  support and enables it.

- RELEASE-NOTES: synced with 11c2db2aa2a

- fix: re-use of bound connections
  
  When asked to bind the local end of a connection when doing a request,
  the code will now disqualify other existing connections from re-use even
  if they are connected to the correct remote host.
  
  This will also affect which connections that can be used for pipelining,
  so that only connections that aren't bound or bound to the same
  device/port you're asking for will be considered.

- symbols-in-versions: make test 1119 happy

- rtsp: move protocol code to dedicated file
  
  The RTSP-specific function for checking for "dead" connection is better
  located in rtsp.c. The code using this is now written without #ifdefs as
  the function call is instead turned into a macro (in rtsp.h) when RTSP
  is disabled.

- MAIL-ETIQUETTE: intro and spam
  
  Added a little generic info section about the lists and a section about
  how to deal with trolls and spam on the lists.

- TODO-RELEASE: 1 fixed, 1 notabug
  
  Fixed:
  
  271 - fix the IPv6-working probing to only exist at one place in the code and
        only get done once
  
  A problem not repeatable and no proper recipe given and therefore simply
  removed for now until we hear something else:
  
  282 - 100 Continue responses should return the "final" HTTP response code:
        "Getting the HTTP response code following a 100 Continue"

- ipv6: only probe once
  
  Move ipv6-functional-probe into a single function that is used from all
  places that need to know.
  
  Make the probe function store the result in a static variable so that
  subsequent invokes just returns the previous result and won't have to
  probe again.

- headers: more copyright headers added

- MAIL-ETIQUETTE: how to behave
  
  This is a new documentation for the source tree. This information has
  been present since a long time at
  http://curl.haxx.se/mail/etiquette.html but now it is put into a plain
  text version too for wider distribution. The web version will be
  automatically generated from this source document.

Julien Chaffraix (21 Mar 2011)
- progress: don't print the last update on a separate line.
  
  Curl_posttransfer is called too soon to add the final new line.
  Moved the new line logic to pgrsDone as there is no more call to
  update the progress status after this call.
  
  Reported by: Dmitri Shubin <sbn_at_tbricks.com>
  http://curl.haxx.se/mail/lib-2010-12/0162.html

Daniel Stenberg (21 Mar 2011)
- TODO-RELEASE: fixed 2, got 3 new!

- [Dave Reisner brought this change]

  libcurl.m4: Add missing quotes in AC_LINK_IFELSE
  
  This avoids warnings generated by autoconf 2.68.
  
  Signed-off-by: Dave Reisner <d@falconindy.com>

- retry-request: rewind if data was sent
  
  When libcurl sends a HTTP request on a re-used connection and detects it
  being closed (ie no data at all was read from it), it is important to
  rewind if any data in the request was sent using the read callback or
  was read from file, as otherwise the retried request will be broken.
  
  Reported by: Chris Smowton
  Bug: http://curl.haxx.se/bug/view.cgi?id=3195205

- configure: avoid $VERSION
  
  To reduce the risk of variable name conflicts, use CURLVERSION instead
  of VERSION.

- symbols-in-versions: many corrections
  
  Scanned with a tool that checked for mistakes and this is the subsequent
  cleanup.

Julien Chaffraix (20 Mar 2011)
- unit1305: Fixed the test to match our coding style.

- url: 0 is PROTOPT_NONE.
  
  Tiny tweak after Daniel's refactoring of the protocol handlers.

Daniel Stenberg (19 Mar 2011)
- pop3: add state name in debug array
  
  We have an array with the state names only built and used when built
  debug enabled and this need to list all the states from the .h

Dan Fandrich (18 Mar 2011)
- Added two more POP3 tests

- pop3: use Curl_safefree() to allow torture tests to succeed

Daniel Stenberg (18 Mar 2011)
- symbol-scan.pl: detect duplicates
  
  Test 1119 now also makes sure that symbols-in-versions doesn't contain
  any duplicates

- CONTRIBUTE: minor edits
  
  Slightly modified to become a nicer web page when converted for the site

- RELEASE-NOTES: synced with 0c05ee3a33d4d7

- pop3: remove unused variable

Dan Fandrich (17 Mar 2011)
- Added support for LISTing a single POP3 message
  
  Added tests for a number of POP3 LIST operations, including one
  that shows a curl problem when listing no messages, so is
  disabled.

- pop3: fixed memory leak in an error retrieval case

Daniel Stenberg (17 Mar 2011)
- symbols-in-versions: remove duplicates

- symbols-in-versions: 2 corrections
  
  CURLE_CHUNK_FAILED and CURLE_FTP_BAD_FILE_LIST were introduced in
  7.21.0, not 7.20.1

- connection setup: if HTTP is disabled asking for HTTP proxy is bad

- FAQ: better english
  
  Reported by: Andre Guibert de Bruet

- scan-build warning
  
  Value stored to 'len' is never read

- ldap_recv: check return code from ldap_get_dn_ber

- compiler warnings fixed
  
  Use (void)[variable] to inhibit unused argument/variables warnings.

- [Ben Noordhuis brought this change]

  SMTP-multi: non-blocking connect
  
  Use Curl_ssl_connect_nonblocking() when upgrading the connection to
  TLS/SSL while using the multi interface.

- [Ben Noordhuis brought this change]

  SMTP in multi mode: use Curl_ssl_connect_nonblocking() when connecting.

- lib582: use curl_socket_t for portability

- buildfix: spell define correctly

Kamil Dudka (15 Mar 2011)
- nss: do not ignore value of CURLOPT_SSL_VERIFYPEER
  
  When NSS-powered libcurl connected to a SSL server with
  CURLOPT_SSL_VERIFYPEER equal to zero, NSS remembered that the peer
  certificate was accepted by libcurl and did not ask the second time when
  connecting to the same server with CURLOPT_SSL_VERIFYPEER equal to one.
  
  This patch turns off the SSL session cache for the particular SSL socket
  if peer verification is disabled.  In order to avoid any performance
  impact, the peer verification is completely skipped in that case, which
  makes it even faster than before.
  
  Bug: https://bugzilla.redhat.com/678580

Guenter Knauf (15 Mar 2011)
- Removed unused var.

Daniel Stenberg (15 Mar 2011)
- configure: stop using the deprecated AM_INIT_AUTOMAKE syntax

- protocol handler cleanup: SSL awareness
  
  As a follow-up to commit 8831000bc0: don't assume that the SSL powered
  protocol alternatives are available.

- ldap: use the new protocol handler setup
  
  Use the new flags field and stop using the old protocol defines.

- TODO-RELEASE: add and remove issues
  
  Removed a fixed issue, added five new existing ones and clarified one of
  the previous ones.

- protocols: use CURLPROTO_ internally
  
  The PROT_* set of internal defines for the protocols is no longer
  used. We now use the same bits internally as we have defined in the
  public header using the CURLPROTO_ prefix. This is for simplicity and
  because the PROT_* prefix was already used duplicated internally for a
  set of KRB4 values.
  
  The PROTOPT_* defines were moved up to just below the struct definition
  within which they are used.

- protocol handler: added flags field
  
  The protocol handler struct got a 'flags' field for special information
  and characteristics of the given protocol.
  
  This now enables us to move away central protocol information such as
  CLOSEACTION and DUALCHANNEL from single defines in a central place, out
  to each protocol's definition. It also made us stop abusing the protocol
  field for other info than the protocol, and we could start cleaning up
  other protocol-specific things by adding flags bits to set in the
  handler struct.
  
  The "protocol" field connectdata struct was removed as well and the code
  now refers directly to the conn->handler->protocol field instead. To
  make things work properly, the code now always store a conn->given
  pointer that points out the original handler struct so that the code can
  learn details from the original protocol even if conn->handler is
  modified along the way - for example when switching to go over a HTTP
  proxy.

Patrick Monnerat (14 Mar 2011)
- - Take new char * options into account in OS400 curl_easy_setopt_ccsid().
  - Keep RPG binding, STRING_* table end check and OS400 README up to date.

Daniel Stenberg (14 Mar 2011)
- FAQ: indent tables
  
  Lines that are indented with at least 5 spaces get special treatment by
  the script that converts it to HTML on the site.

- sslgen: define Curl_ssl_connect_nonblocking for non-SSL
  
  The non-blocking connect improvement for IMAP showed that we didn't
  properly define the Curl_ssl_connect_nonblocking function for non-SSL
  builds.
  
  Reported by: Tor Arntsen

- configure: removed wrongly claimed default paths
  
  Several --with-XXX options claimed the wrong default path in their help
  outputs.
  
  Reported by: Vincent Torri

- [Ask Bjørn Hansen brought this change]

  mk-ca-bundle.pl: Only download if modified
  
  Only download and convert the certdata to the ca-bundle.crt if Mozilla
  changed the data
  
  The Perl LWP module (which in a bit of a circular reference is used by
  mk-ca-bundle.pl) is now indirectly using this script. I made this small
  tweak to make it easier to automatically maintain the generated
  ca-bundle.crt file in version control.

- SSH: add protocol lock direction
  
  Some protocols have to call the underlying functions without regard to
  what exact state the socket signals. For example even if the socket says
  "readable", the send function might need to be called while uploading,
  or vice versa. This is the case for libssh2 based protocols: SCP and
  SFTP and we now introduce a define to set those protocols and we make
  the multi interface code aware of this concept.
  
  This is another fix to make test 582 run properly.

- state: add missing state to debug table
  
  As a new state recently was added to the IMAP state machine it has to be
  in the array of names as well as otherwise libcurl crashes when a debug
  version runs...

- test 582: enabled again
  
  Commit ca37692bf43b5ef should now hopefully make it run

- ssh_statemach_act: set cselect for sftp upload
  
  For uploads we want to use the _sending_ function even when the socket
  turns out readable as the underlying libssh2 sftp send function will
  deal with both accordingly. This is what the cselect_bits magic is for.
  
  Fixes test 582.

- RELEASE-NOTES: synced with e649a7baae2

- Revert "test582: enabled"
  
  This reverts commit b8478187406cf625c9d0f10b45a082221130cc92.

- Merge branch 'imap' of https://github.com/bnoordhuis/curl into bnoordhuis-imap

- TODO-RELEASE: fixed four isues
  
  These issues are now addressed:
  
  276 - Karl M's vc makefile patch
  277 - The "Stall when uploading to sftp using multi interface"  bug
  279 - curl_multi_remove_handle() crashes
  280 - Marcus Sundberg's gss patch

- [Karl M brought this change]

  VC: add missing file
  
  http_negotiate_sspi.c was added to the source tree recently

- [Marcus Sundberg brought this change]

  GSS: handle reuse fix
  
  Make GSS authentication work when a curl handle is reused for multiple
  authenticated requests, by always setting negdata->state in
  output_auth_headers().
  
  Signed-off-by: Marcus Sundberg <marcus.sundberg@aptilo.com>

- test583: verify early SSH multi remove handle
  
  This test case is meant to verify that the logic in commit
  60172a0446bbe3f8b actually works. This test failed for me before that
  change and it works after it.

- SFTP: gracefully handle shutdown early
  
  When using the multi interface and a handle using SFTP was removed very
  early on, we would get a segfault due to the code assumed data was there
  that hadn't yet been setup.
  
  Bug: http://curl.haxx.se/mail/lib-2011-03/0066.html
  Reported by: Saqib Ali

- [Manuel Massing brought this change]

  CURL_CHECK_FUNC_RECVFROM: android/bionic fix
  
  recvfrom in bionic (the android libc) deviates from POSIX and uses a
  const in the 5th argument ("const struct sockaddr *") so the check now
  tests for that as well.

- test582: enabled

- PROT_CLOSEACTION: added SFTP and SCP
  
  Both SFTP and SCP are protocols that need to shut down stuff properly
  when the connection is about to get torned down. The primary effect of
  not doing this shows up as memory leaks (when using SCP or SFTP with the
  multi interface).
  
  This is one of the problems detected by test 582.

- readwrite_upload: stop upload at file size
  
  As we know how much to send, we can and should stop once we've sent that
  much data as it avoids having to rely on other mechanisms to detect the
  end.
  
  This is one of the problems detected by test 582.
  
  Reported by: Henry Ludemann <misc@hl.id.au>

- sftp upload: expire to advance state machine
  
  When using the multi_socket API to do SFTP upload, it is important that
  we set a quick expire when leaving the SSH_SFTP_UPLOAD_INIT state as
  there's nothing happening on the socket so there's no read or write to
  wait for, but the next libssh2 API function needs to be called to get
  the ball rolling.
  
  This is one of the problems detected by test 582.
  
  Reported by: Henry Ludemann <misc@hl.id.au>

- test582: improved info messages

- source header: added to more files

- sources: update source headers
  
  All C and H files now (should) feature the proper project curl source
  code header, which includes basic info, a copyright statement and some
  basic disclaimers.

- TODO-RELEASE: add 10 pending issues

- TODO-RELEASE: fix the IPv6-working probing

- tests: phase out haxx.se
  
  Instead of using haxx.se as a fixed magic host name in lots of tests,
  this is a first step to move toward the generic example.com host
  instead.

- test523: avoid using haxx.se
  
  ... since search engines find what they think is a URL in this, they
  hammer www.haxx.se on this port!

- configure: update the copyright year in the output

Dan Fandrich (9 Mar 2011)
- Force setopt constants written by --libcurl to be long

Daniel Stenberg (8 Mar 2011)
- cyassl: fix compiler warnings

- [Todd A Ouska brought this change]

  SSL: (part 2) Added CyaSSL to SSL abstraction layer
  
  This is the modified existing files commit.

- [Todd A Ouska brought this change]

  SSL: Added CyaSSL to SSL abstraction layer
  
  CyaSSL (available from git@github.com:cyassl/cyassl.git) has been
  added to the SSL abstraction layer.
  
  To test:
  1) git CyaSSL sources
  2) autoreconf -i
  3) ./configure --disable-static
  4) make
  5) sudo make install
  6) autoreconf -i
  7) git curl sources (and this patch)
  8) ./configure --disable-shared --with-cyassl --without-ssl --enable-debug
  9) make
  10) normal testing
  
  Please send questions or comments to todd@yassl.com .

- curl.1: clarify -E
  
  Stress that it is for client certificates and then mention that it also
  works for all other SSL-based protocols apart from HTTPS and
  FTPS. Namely POP3S, IMAPS and SMTPS for now.

- FAQ: Protocol xxx not supported or disabled in libcurl

- lib582: used for test 582
  
  Accidentally not included in commit 0e74e1d8d83

Dan Fandrich (7 Mar 2011)
- Fixed libcurl to honour the --disable-ldaps configure option

Daniel Stenberg (8 Mar 2011)
- [Henry Ludemann brought this change]

  sftp-multi: test 582 added
  
  Add test 582 for uploading a file using sftp and the multi interface.
  
  (Patch and test slightly tweaked by Daniel Stenberg)
  
  Initially marked as disabled until it is fixed in the source.

- FAQ: How to SFTP from my user's home directory?

- cpp: correct #endif placement
  
  The end-of-file #endif in rawstr.h was not correcly positioned after all
  prototypes.
  
  Reported by: Boris
  Bug: http://curl.haxx.se/bug/view.cgi?id=3195205

Dan Fandrich (4 Mar 2011)
- Moved test 577 into the unit test framework as test 1307

- Added unit test 1306 so tests 558 & 559 are now fully replaced

- The unit test argument is allowed to be used

- Converted tests 558 & 559 to use the unit test framework as 1305
  
  Test 558 was just a subset of 559 which is something that can be
  easily added later.

- Fixed test 1300 to pass the torture test

- Added abort_* unit test macros
  
  These are for when a test failure makes it impossible to continue
  running further tests.

Kamil Dudka (4 Mar 2011)
- [Stefan Krause brought this change]

  transfer: avoid insane conversion of time_t

Daniel Stenberg (26 Feb 2011)
- ssh_connect: treat libssh2 return code better
  
  libssh2_knownhost_readfile() returns a negative value on error or
  otherwise number of parsed known hosts - this was previously not
  documented correctly in the libssh2 man page for the function.
  
  Bug: http://curl.haxx.se/mail/lib-2011-02/0327.html
  Reported by: murat

Julien Chaffraix (25 Feb 2011)
- http: removed wrong unused comment.
  
  |premature| is used in Curl_http_done.

- http: removed code duplication for stubbed https_getsock function.

Daniel Stenberg (23 Feb 2011)
- RELEASE-NOTES: synced with 2345c1dd661c

- runtests.pl/stopserver: space separate pids
  
  The stopserver function would append pids to kill and could append them
  without separating them with space properly. The result would be a very
  large number that by (some implementations of) kill would be interpreted
  as a negative number and that process group would be wiped...
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3188836
  Reported by: Greg Pratt

Kamil Dudka (22 Feb 2011)
- nss: do not ignore failure of SSL handshake
  
  Flaw introduced in fc77790 and present in curl-7.21.4.
  Bug: https://bugzilla.redhat.com/669702#c16

Daniel Stenberg (21 Feb 2011)
- CURLOPT_SSH_KEYFUNCTION: requires *SSH_KNOWNHOSTS
  
  Extend the docs to clarify that CURLOPT_SSH_KEYFUNCTION is only called
  if the known hosts option is also correctly set!

Julien Chaffraix (20 Feb 2011)
- curl_easy_setopt.3: Removed wrong reference to CURLOPT_USERPASSWORD.
  
  CURLOPT_HTTPAUTH was mentioning CURLOPT_USERPASSWORD instead of
  CURLOPT_PASSWORD.
  
  Reported by: Mike Henshaw

- netrc: Removed _NETRC_DEBUG code.
  
  This is not needed anymore as we have unit testing running on it.

- tests: Cleaned up netrc testing.
  
  Removed the "netrc_debug" keyword replaced with --netrc-file additions.
  Removed the debug code from Curl_parsenetrc as it is superseeded by
  --netrc-file.

- curl: Added --netrc-file.
  
  This enables people to specify a path to the netrc file to use.
  The new option override --netrc if both are present. However it
  does follow --netrc-optional if specified.

Ben Noordhuis (20 Feb 2011)
- IMAP in multi mode: use Curl_ssl_connect_nonblocking() when upgrading the connection to TLS/SSL.

- IMAP in multi mode: use Curl_ssl_connect_nonblocking() when connecting.

Daniel Stenberg (18 Feb 2011)
- [Mike Crowe brought this change]

  multi: close connection on timeout
  
  After a request times out, the connection wasn't properly closed and
  prevented to get re-used, so subsequent transfers could still mistakenly
  get to use the previously aborted connection.

- multi: better failed connect treatment
  
  When failing to connect the protocol during the CURLM_STATE_PROTOCONNECT
  state, Curl_done() has to be called with the premature flag set TRUE as
  for the pingpong protocols this can be important.
  
  When Curl_done() is called with premature == TRUE, it needs to call
  Curl_disconnect() with its 'dead_connection' argument set to TRUE as
  well so that any protocol handler's disconnect function won't attempt to
  use the (control) connection for anything.
  
  This problem caused the pingpong protocols to fail to disconnect when
  STARTTLS failed.
  
  Reported by: Alona Rossen
  Bug: http://curl.haxx.se/mail/lib-2011-02/0195.html

- [Hoi-Ho Chan brought this change]

  PolarSSL: Return 0 on receiving TLS CLOSE_NOTIFY alert
  
  Signed-off-by: Hoi-Ho Chan <hoiho.chan@gmail.com>

- symbols-in-versions: sorted
  
  I forgot to sort it when I added the CURL_SOCKOPT_* symbols

- TODO-RELEASE: refresh

- SOCKOPTFUNCTION: documented new return codes

- SOCKOPTFUNCTION: callback can say already-connected
  
  Introducing a few CURL_SOCKOPT* defines for conveniance. The new
  CURL_SOCKOPT_ALREADY_CONNECTED signals to libcurl that the socket is to
  be treated as already connected and thus it will skip the connect()
  call.

Kamil Dudka (17 Feb 2011)
- nss: avoid memory leak on SSL connection failure

Daniel Stenberg (17 Feb 2011)
- RELEASE-NOTES: fresh start towards 7.21.5

- curlver.h: bump to 7.21.5

- THANKS: add contributors from 7.21.4

Version 7.21.4 (17 Feb 2011)

Guenter Knauf (17 Feb 2011)
- Set -fpcc-struct-return only for gcc compiler.

Daniel Stenberg (17 Feb 2011)
- RELEASE-NOTES: credits since 7.21.3
  
  I went through all the names mentioned as authors and in commit messages
  since 7.21.3, and this list inserted now is sorted on first name.

- nss_load_key: fix unused variable warning

- gmtime: remove define
  
  It turns out some systems rely on the gmtime or gmtime_r to be defined
  already in the system headers and thus my "precaution" redefining of
  them only caused trouble. They are now removed.

Guenter Knauf (13 Feb 2011)
- Added -m32 to CFLAGS to compile with x86_64 gcc.

- Updated OpenSSL version, added links to docu.

Daniel Stenberg (10 Feb 2011)
- RELEASE-NOTES: synced with 3bb1291fbd4

- --keepalive-time: warn if not supported properly
  
  Since the feature requires support for TCP_KEEPIDLE and TCP_KEEPINTVL to
  function as documented, it now warns if that support is missing when the
  option is used.

Dan Fandrich (10 Feb 2011)
- Call ERR_peek_error instead of ERR_peek_last_error
  
  The latter isn't available in older OpenSSL versions, and is
  less useful since it returns the most recent error instead of
  the first one encountered.

Julien Chaffraix (10 Feb 2011)
- netrc: Enable setting up the filename in unit tests.
  
  Unset the environment variable so that we can specify different
  filenames in the unit test.

- test1304: Added some unit tests for Curl_parsenetrc.
  
  Moved some definitons into the header file so that we can reuse them.

Daniel Stenberg (9 Feb 2011)
- [Quinn Slack brought this change]

  CURLE_TLSAUTH_FAILED: removed
  
  On second thought, I think CURLE_TLSAUTH_FAILED should be eliminated. It
  was only being raised when an internal error occurred while allocating
  or setting the GnuTLS SRP client credentials struct. For TLS
  authentication failures, the general CURLE_SSL_CONNECT_ERROR seems
  appropriate; its error string already includes "passwords" as a possible
  cause. Having a separate TLS auth error code might also cause people to
  think that a TLS auth failure means the wrong username or password was
  entered, when it could also be a sign of a man-in-the-middle attack.

- [Quinn Slack brought this change]

  TLS-SRP: new options documented

- CURLOPT_SOCKOPTFUNCTION: return proper error code
  
  When the callback returns an error, this function must make sure to return
  CURLE_ABORTED_BY_CALLBACK properly and not CURLE_OK as before to allow the
  callback to properly abort the operation.

- curl.1: typo in -v description
  
  Reported by: Ian D Allen
  Bug: https://bugs.launchpad.net/ubuntu/+source/curl/+bug/714895
  
  Forwarded to us by:
  
  Reported by: Andreas Olsson
  Bug: http://curl.haxx.se/bug/view.cgi?id=3175422

Julien Chaffraix (7 Feb 2011)
- netrc: Removed dead code.
  
  The main has not been updated from some time and is out of sync with
  the code. The code is now tested by several test cases so no need for
  a seperate code path.

- netrc: Tightened up the type checks.
  
  The state should not be anonymous so that we can check if the values
  are fine. Added 2 unreachables states to the switch as a result of this
  change.

- imap: Fixed typo in a comment.

Daniel Stenberg (7 Feb 2011)
- Curl_gmtime: avoid future mistakes
  
  Document Curl_gmtime() and define away the old functions so that they
  won't be used internally again by mistake.

- Curl_gmtime: added a portable gmtime
  
  Instead of polluting many places with #ifdefs, we create a single place
  for this function, and also check return code properly so that a NULL
  pointer returned won't cause problems.

Guenter Knauf (3 Feb 2011)
- mk-ca-bundle.vbs: use new cacert url
  
  The official Mozilla page at http://www.mozilla.org/projects/security/certs/
  points out a new place as the "proper" place to get Mozilla's CA certs from
  so this script is now updated to use that instead.
  
  Reported by: Daniel Mentz

Daniel Stenberg (2 Feb 2011)
- mk-ca-bundle.pl: use new cacert url
  
  The official Mozilla page at
  http://www.mozilla.org/projects/security/certs/ points out a new place
  as the "proper" place to get Mozilla's CA certs from so this script is
  now updated to use that instead.
  
  Reported by: Daniel Mentz

- [Bjoern Sikora brought this change]

  ssluse: improved error message on SSL_CTX_new failures
  
  "SSL: couldn't create a context" really isn't that helpful, now it'll
  also extract an explanation from OpenSSL and append to the right.

- [Nicholas Maniscalco brought this change]

  multi: fix CURLM_STATE_TOOFAST for multi_socket
  
  The code in the toofast state needs to first recalculate the values
  before it uses them again since it may have been a while since it last
  did it when it reaches this point.

- unit1300: code style cleanup

- [Amr Shahin brought this change]

  adding unit tests for Curl_llist_remove

Patrick Monnerat (31 Jan 2011)
- Include TLSAUTH options in ILE/RPG binding.

Kamil Dudka (31 Jan 2011)
- [Dave Reisner brought this change]

  file: add support for CURLOPT_TIMECONDITION

- [Dave Reisner brought this change]

  transfer: add Curl_meets_timecondition()
  
  This will be used by file_do() and Curl_readwrite() as a unified method
  of checking to see if a remote document meets the supplied
  CURLOPT_TIMEVAL and CURLOPT_TIMECONDITION.
  
  Signed-off-by: Dave Reisner <d@falconindy.com>

Daniel Stenberg (29 Jan 2011)
- FAQ: clarified/expanded 6.7 a bit
  
  "6.7 What are my obligations when using libcurl in my commercial apps?"
  got the piece about what exactly "in all copies" mean to a user of the
  code.
  
  This interpretation is based on what other MIT-like licenses have made
  more explicit.

- COPYING: update the year to 2011
  
  The generic copyright year range now includes 2011

- [Pierre Joye brought this change]

  Windows build: alternative makefile
  
  This is a separate makefile for MSVC builds. It is deliberately put in
  another dir than src/ and lib/ to allow a different build experience
  than the previous - at least during a period. Eventually we should
  unify.

- test: add test 580 to the dist

Dan Fandrich (27 Jan 2011)
- Some minor edits including updates to function names

Daniel Stenberg (27 Jan 2011)
- ares: memory leak fix
  
  The double name resolve trick used with c-ares could leave allocated
  memory in 'temp_ai' if the operation was aborted in the middle.

- ares_query_completed_cb: don't touch invalid data
  
  When this callback is called due to the destruction of the ares handle,
  the connection pointer passed in as an argument may no longer pointing
  to valid data and this function doesn't need to do anything with it
  anyway so we make sure it doesn't.
  
  Bug: http://curl.haxx.se/mail/lib-2011-01/0333.html
  Reported by: Vsevolod Novikov

Kamil Dudka (27 Jan 2011)
- nss: avoid memory leaks and failure of NSS shutdown
  
  ... in case more than one CA is loaded.
  
  Bug: https://bugzilla.redhat.com/670802

Dan Fandrich (26 Jan 2011)
- Mention that sftp quote commands can be quoted

Daniel Stenberg (25 Jan 2011)
- tests: more multiple headers checks

- HTTP: memory leak on multiple Location:
  
  The HTTP parser allocated memory on each received Location: header
  without properly freeing old data. Starting now, the code only considers
  the first Location: header and will blissfully ignore subsequent ones.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3165129
  Reported by: Martin Lemke

- FAQ: clarify 5.13 how to stop a transfer

Guenter Knauf (22 Jan 2011)
- Fixed C++ style comment not allowed in ISO C90.

Dan Fandrich (21 Jan 2011)
- Mention axTLS in some more documentation

Daniel Stenberg (20 Jan 2011)
- runtests.pl: make -s not show skipped tests

- [Amr Shahin brought this change]

  unittest: add 3 tests to test1300
  
  Testing Curl_llist_insert_next

Dan Fandrich (20 Jan 2011)
- [Darshan Mody brought this change]

  Fixed compile using OpenSSL versions < 0.9.4a

Daniel Stenberg (19 Jan 2011)
- main: make the tlsauth options always present
  
  ... to not make the connection between the tool and the libcurl used
  tighter than necessary, the tlsauth options are now always present but
  if the used libcurl doesn't have TLSAUTH support it will return failure.
  
  Also, replaced strncmp() with strequal to get case insensitive matching.

- symbols-in-versions: add the new TLSAUTH-SRP symbols

- configure: TLS-SRP wasn't added as a feature
  
  Test case 1014 failed since TLS-SRP was correctly set to the features
  variable so curl-config --features didn't output it.

- dist: add new certs to tarball

- [Quinn Slack brought this change]

  TLS-SRP: support added when using GnuTLS

- CURLOPT_SSL_VERIFYPEER: more clarifications
  
  The default value is 1.
  
  curl _uses_ a default CA bundle, it doesn't install one.
  
  Drop the references to 7.10 as that is now >8 years old!

- TheArtOfHttpScripting: extended
  
  Extended the intial HTTP protcol part and added a mention of --trace and
  --trace-ascii.
  
  Replaced most URLs in the text to use example.com instead of all the
  made up strange names.
  
  Shortened a bunch of lines.

- curl_easy_setopt.3: clarify VERIFYHOST/PEER
  
  Extended the descriptions somewhat and made the options get listed next
  to each other.

- RELEASE-NOTES: mention contributors

- RELEASE-NOTES: synced with 7fcbdd68b9e

Guenter Knauf (18 Jan 2011)
- Fixed configure define for Win32.
  
  Submitted by Vincent Torri.

Kamil Dudka (18 Jan 2011)
- nss: fix a bug in handling of CURLOPT_CAPATH
  
  ... and update the curl.1 and curl_easy_setopt.3 man pages such that
  they do not suggest to use an OpenSSL utility if curl is not built
  against OpenSSL.
  
  Bug: https://bugzilla.redhat.com/669702

Guenter Knauf (17 Jan 2011)
- Avoid redefines.

Daniel Stenberg (15 Jan 2011)
- curl.1: fix spelling
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3157232
  Reported by: John Bradshaw

Guenter Knauf (14 Jan 2011)
- Added casts to silent gcc warnings.

Yang Tse (13 Jan 2011)
- build: BCC - makefile.b32 tweak
  
  Get rid of stdout redirection to NUL and move stderr redirection
  into RM and RMDIR macros.

- build: BCC - makefile.b32 tweak
  
  Check for BCCDIR environment var done now as other checks.

Guenter Knauf (13 Jan 2011)
- Use env var for PSDK instead of hardcoded path.

- Enabled SSPI support by default.

- Use MAKE macro with BCC targets.

Yang Tse (12 Jan 2011)
- docs - update BCC INSTALL section

- build: BCC - require Borlands's MAKE for Makefile.b32 processing.

- build: BCC - recover lost functionality from commit 3d813204260b37289411
  
  Borland's $(MAKEDIR) expands to the path where make.exe is located,
  use this feature to define BCCDIR when user has not defined BCCDIR.

- build: use external preprocessor cpp32 when building with Borland C

- build: allow usage of Borland 5.5.1 external preprocessor cpp32

Guenter Knauf (11 Jan 2011)
- Disable LDAP support since BCC headers are insufficient.

- Instead of exiting with error lets set BCCDIR self.

- Some Borland C++ makefile tweaks.

- Borland C++ doesnt have struct sockaddr_storage.

Daniel Stenberg (11 Jan 2011)
- connect: use UDP correctly
  
  The idea that the protocol and socktype is part of name resolving in the
  libc functions is nuts. We keep the name resolver functions assume
  TCP/STREAM and we make sure that when we want to connect to a UDP
  service we use the correct UDP/DGRAM set instead. This bug was because
  the ->protocol field was not always set correctly.
  
  This bug was only affecting ipv6-disabled non-cares non-threaded builds.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3154436
  Reported by: "dperham"

- [Quinn Slack brought this change]

  SSL: fix memory leak
  
  In OOM situation. Follow-up fix to commit a9cd4f4ed49e1a0.

- gtls: fix memory leak
  
  Bug: http://curl.haxx.se/mail/lib-2011-01/0079.html
  Reported by: Quinn Slack

- [Marcel Roelofs brought this change]

  HTTP: HTTP Negotiate authentication using SSPI
  
  Only under Windows

- cmake: removed two files
  
  CMake/CheckTypeSize.c.in and CMake/CheckTypeSize.cmake were removed in
  the previous cmake commit

Dan Fandrich (5 Jan 2011)
- Made unit_setup() return an error code to abort the test early
  
  This makes it possible to skip the call to unit_stop() in such
  cases.  Also use Curl_safefree() in unit test 1302 so it will
  pass the memory torture test.

Daniel Stenberg (6 Jan 2011)
- SSH: speedcheck clobbered existing error
  
  The just added speedcheck must not ruin the error code if already set
  due to a problem.

- [Brad King brought this change]

  CMake: Use upstream CheckTypeSize module
  
  The CheckTypeSize module that comes with CMake 2.6.2 and above does
  everything we need and also supports cross-compiling.  Avoid duplicating
  an older version of it here.  This also fixes a cross-compiling error
  because the old line
  
    include ("${CMAKE_MODULE_PATH}/CheckTypeSize.cmake")
  
  failed because CMAKE_MODULE_PATH is a search path and not a directory.
  
  Signed-off-by: Brad King <brad.king@kitware.com>

- SSH: acknowledge speedcheck
  
  Check for speedcheck limits during the state machine traversals

- tests: <info> tag corrections

- unittest: 1303 tests Curl_timeleft
  
  I came up with 33 different ways to call it and verify that it returns the
  correct return code.

- curlcheck.h: add fail()
  
  fail is a new function/macro that a test case can use to indicate a test
  failure for cases when the standard macros are not sufficient.

- Curl_timeleft: s/conn/data in first argument
  
  As the function doesn't really use the connectdata struct but only the
  SessionHanadle struct I modified what argument it wants.

Dan Fandrich (4 Jan 2011)
- Fixed path to allow out-of-tree builds

Kamil Dudka (4 Jan 2011)
- nss: avoid CURLE_OUT_OF_MEMORY given a file name without any slash
  
  Bug: https://bugzilla.redhat.com/623663

Daniel Stenberg (4 Jan 2011)
- ignore: all executable unit test cases

- tests: add 1302 to the package

- unittest: test base64 encode/decode

- curlcheck.h: avoid using NULL pointers

- curlcheck.h: add verify_memory
  
  This check verifies that a pointer contains the correct data.

- curlcheck.h: add newlines in error messages

- unittest: verify curl_strequal

- get_cert_chain: support larger data sets
  
  512 bytes turned out too short for some data, so now we allocate a
  larger buffer instead
  
  Bug: http://curl.haxx.se/mail/archive-2011-01/0002.html

- RELEASE-NOTES: synced with 83e9fb21aabbec2

- curlcheck.h: add fail_if() fix code
  
  The UNITTEST_START and UNITTEST_STOP defines needed to do a new brace
  level so that test cases can declare variables fine and still remain
  fine C89 code.

- unittests: basic docs

- ignore: unit test files

- unittests: a dedicated feature in tests
  
  The test runner script now knows if unittests can run and the unit test
  setup file says it is one. I also made runtests.pl deal with no
  <command> tag set, so that the description file can get even simpler.

- unittesting: build a separate static lib
  
  When configure --enable-debug has been used, all files in lib/ are now
  built twice and a separate static library crafted for unit-testing will
  be linked. The unit tests in the tests/unit subdir will use that
  library.

- unittest: framework for unit-testing
  
  This is the first approach at doing fairly clean and easy to write and
  debug unit tests.

- SSH: avoid PATH_MAX with alloc
  
  We cannot assume that PATH_MAX will be enough for the remote path name
  so allocating room for it is the only sensible approach.

- TODO: get rid of PATH_MAX

- Curl_nss_connect: avoid PATH_MAX
  
  Since some systems don't have PATH_MAX and it isn't that clever to
  assume a fixed maximum path length, the code now allocates buffer space
  instead of using stack.
  
  Reported by: Samuel Thibault
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=608521

- SFTP: make pwd output result to header callback
  
  Sending "pwd" as a QUOTE command only sent the reply to the
  DEBUGFUNCTION. Now it also sends an FTP-like header to the header
  callback to allow similar operations as with FTP, and apps can re-use
  the same parser.

- pubkey_show: allocate buffer to fit any-size result
  
  The loop condition was wrong so keys larger than 340 bits would overflow
  the local stack-based buffer.

- CURLINFO_FTP_ENTRY_PATH: sftp support

- [Luke Amery brought this change]

  ssh: honour the CURLINFO_FTP_ENTRY_PATH curl_getinfo option

- [Pierre Joye brought this change]

  IDN: use win32 API if told to
  
  The functionality is provided in a new source file: lib/idn_win32.c

Yang Tse (28 Dec 2010)
- test harness: take in account that Windows does not support LD_PRELOAD
  
  configure.ac: Test harness libhostname library will not be built for Windows.
  
  runtests.pl: LD_PRELOAD mechanism will not be used to load libhostname
  library on operating systems which lack LD_PRELOAD support.

Daniel Stenberg (27 Dec 2010)
- c-ares: fix cancelled resolves
  
  When built IPv6-enabled, we could do Curl_done() with one of the two
  resolves having returned already, so when ares_cancel() is called the
  resolve callback ends up doing funny things (sometimes resulting in a
  segfault) since it would try to actually store the previous resolve even
  though we're shutting down the resolve.
  
  This bug was introduced in commit 8ab137b2bc9630ce so it hasn't been
  included in any public release.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3145445
  Reported by: Pedro Larroy

- [Brad Hards brought this change]

  Typo / spelling fixes.

- [Brad Hards brought this change]

  Use angle address, as for the rest of the example.
  
  Also spelling fix for RECIPIENT #define.

- [Brad Hards brought this change]

  Add angle brackets to addresses in easy SMTP examples, as for smtp-multi example.

- cookies: tricked dotcounter fixed
  
  Providing multiple dots in a series in the domain field (domain=..com) could
  trick the cookie engine to wrongly accept the cookie believing it to be
  fine. Since the tailmatching would then match all .com sites, the cookie would
  then be sent to all of them.
  
  The code now requires at least one letter between each dot for them to be
  counted. Edited test case 61 to verify this.

- multi: connect fail => use next IP address
  
  When using the multi interface and connecting to a host name that
  resolves to multiple IP addresses, there was no logic that made it
  continue to the next IP if connecting to the first address times
  out. This is now corrected.

- smtp-multi: put recipient within <brackets>
  
  Even if libcurl might to do it for us, it is more correct.

- ossl_seed: no more RAND_screen
  
  RAND_screen() is slow, not thread-safe and not needed anymore since OpenSSL
  uses the thread-safe win32 CryptoAPI nowadays.

- multi: inhibit some verbose outputs
  
  The info about pipe status and expire cleared are clearly debug-related
  and not anything mere mortals will or should care about so they are now
  ifdef'ed DEBUGBUILD

- SMTP tests: updated MAIL FROM use
  
  They were all wrong previously since none used the <brackets> they
  should for MAIL FROM. Now libcurl adds them itself if the app doesn't so
  they end up wrong less easy.

- CURLOPT_MAIL_FROM: document the bracket situation

- [Brad Hards brought this change]

  SMTP: add brackets for MAIL FROM
  
  Similar to what is done already for RCPT TO, the code now checks for and
  adds angle brackets (<>) around the email address that is provided for
  CURLOPT_MAIL_RCPT unless the app has done so itself.

Guenter Knauf (22 Dec 2010)
- Added support for axTLS to NetWare build.

- Fixed include: memory.h -> curl_memory.h.

Kamil Dudka (22 Dec 2010)
- [Brad Hards brought this change]

  smtp-tls: add a missing newline
  
  Without this you won't get the next (Subject) line.

Daniel Stenberg (21 Dec 2010)
- [Brad Hards brought this change]

  Typo fixes.

Patrick Monnerat (21 Dec 2010)
- New curl/curl.h definitions added to ILE/RPG binding.

Yang Tse (21 Dec 2010)
- build: sort configuration hunks in lib/Makefile.vc6
  
  sorted to reflect same internal order as the one shown
  in the usage message.

Daniel Stenberg (20 Dec 2010)
- getparameter: add error check
  
  if add2list() returns an error, bail out!

- loadhostpairs: return errorcode
  
  Make sure that Curl_cache_addr() errors are propagated to callers of
  loadhostpairs().
  
  (this loadhostpairs function caused a scan-build warning due to the
  'dns' variable getting assigned but never used)

Yang Tse (20 Dec 2010)
- distrib: add new file to EXTRA_DIST

- build: refactoring of msvc makefiles to allow overriding of library filenames.
  
  Default libcurl's file names are kept equal to those used since Y2K.

Daniel Stenberg (19 Dec 2010)
- ftp_parselist: fix compiler warning
  
  Doing curlx_strtoofft() on the size just to figure out the end of it
  causes a compiler warning since the result wasn't used, but is also a
  bit of a waste.

- [Pasha Kuznetsov brought this change]

  Curl_do: avoid using stale conn pointer
  
  Since the original `conn' pointer was used after the `connectdata' it
  points to has been closed/cleaned up by Curl_reconnect_request it caused
  a crash. We must make sure to use the newly created connection instead!
  
  URL: http://curl.haxx.se/mail/lib-2010-12/0202.html

- [Tommie Gannert brought this change]

  ares: ask for both IPv4 and IPv6 addresses
  
  Make the c-ares resolver code ask for both IPv4 and IPv6 addresses when
  IPv6 is enabled.
  
  This is a workaround for the missing ares_getaddrinfo() and is a lot
  easier to implement.
  
  Note that as long as c-ares returns IPv4 addresses when IPv6 addresses
  were requested but missing, this will cause a host's IPv4 addresses to
  occur twice in the DNS cache.
  
  URL: http://curl.haxx.se/mail/lib-2010-12/0041.html

- examples: socket type cleanup

- [Brad Hards brought this change]

  Trival comment fix.

- [Brad Hards brought this change]

  smtp-tls: add Message-ID: header

- gitignore: ignore the new example execs

- examples: fix compiler warnings

- examples: build all examples easier

- [Brad Hards brought this change]

  smtp-tls: new example
  
  This example shows how to send SMTP with TLS

- [Brad Hards brought this change]

  Docs: add simple SMTP example
  
  Add a simple SMTP example program, patterned after some of the existing
  examples, and the curl application.
  
  This version addresses issues raised by David Woodhouse on comments in
  the simplesmtp.c example.

Kamil Dudka (17 Dec 2010)
- [Paul Howarth brought this change]

  tftpd: avoid buffer overflow report from glibc

Daniel Stenberg (17 Dec 2010)
- example: fix compiler warnings in fopen.c

- [Brad Hards brought this change]

  chkspeed: bad strtol() call for -M option
  
  Bug: http://curl.haxx.se/mail/lib-2010-12/0192.html

Yang Tse (16 Dec 2010)
- axTLS integration: silence runtests.pl perl warning

Daniel Stenberg (15 Dec 2010)
- axTLS: mention it among the other SSL libs

- 7.21.4: version bump

- axtls_connect: allow connect without peer verification
  
  The SSL_SERVER_VERIFY_LATER bit in the ssl_ctx_new() call allows the
  code to verify the peer certificate explicitly after the handshake and
  then the "data->set.ssl.verifypeer" option works.

- axTLS: allow "default" SSL version as well
  
  When no explicit version is selected we should try to use whatever is
  best for us, and in the axTLS case that means TLSv1.

- axtls.c: cleanup
  
  Removed trailing whitespace
  Removed several compiler warnings
  Removed odd backslashes at some line endings

- urldate: undef hideous memory defines
  
  The public axTLS header (at least as of 1.2.7) redefines the memory
  functions. We #undef those again immediately after the public header to
  limit the damage. This should be fixed in axTLS.

- configure: make --with-axtls set prefix
  
  In tradition with other options, have this point to the directory prefix
  and not the lib directory. Otherwise we can't set the include path
  reliably.

- [Eric Hu brought this change]

  Minor fixes to pass tests 301 and 306 with a patched axTLS.

- [Eric Hu brought this change]

  Initial axTLS integration. Connections can be made and some tests pass.
  
  Failed HTTPS tests: 301, 306, 311, 312, 313, 560
  311, 312 need more detailed error reporting from axTLS.
  313 relates to CRL, which hasn't been implemented yet.

- [Eric Hu brought this change]

  Simple update to configure script to notify user of --with-axtls switch.

- [Eric Hu brought this change]

  Preparing for axTLS. Actual SSL API functions are only stubbed.
  
  Added axTLS to autotool files and glue code to misc other files.
  axtls.h maps SSL API functions, but may change.
  axtls.c is just a stub file and will definitely change.

- THANKS: added contributors from 7.21.3

Version 7.21.3 (15 Dec 2010)

Daniel Stenberg (15 Dec 2010)
- RELEASE-NOTES: synced with a865bd9fbaaa43e5c

- IsPipeliningPossible: only for HTTP
  
  The function that checks if pipelining is possible now requires the HTTP
  bit to be set so that it doesn't mistakenly tries to do it for other
  protocols.
  
  Bug: http://curl.haxx.se/mail/lib-2010-12/0152.html
  Reported by: Dmitri Shubin

- multi_runsingle: don't timeout completed handles
  
  The generic timeout code must not check easy handles that are already
  completed. Going to completed (again) within there risked decreasing the
  number of alive handles again and thus it could go negative.
  
  This regression bug was added in 7.21.2 in commit ca10e28f06f1

- symbols-in-versions: CURLOPT_KEYPASSWD fixed
  
  It was added in 7.17.0 and is not deprecated

- RELEASE-NOTES: synced with c28443c551825

Dan Fandrich (8 Dec 2010)
- Mention that using other libraries can affect app licensing

Yang Tse (7 Dec 2010)
- easy: fix compiler warning: end-of-loop code not reached

Daniel Stenberg (6 Dec 2010)
- disconnect: pass on the dead_connection argument
  
  Cleanup fix after Kamil's commit 5c7c9a768d0093

Yang Tse (6 Dec 2010)
- sws: fix compier warning: external definition with no prior declaration

Daniel Stenberg (6 Dec 2010)
- [Heinrich Ko brought this change]

  ossl_connect_common: detect connection re-use
  
  ossl_connect_common() now checks whether or not 'struct
  connectdata->state' is equal 'ssl_connection_complete' and if so, will
  return CURLE_OK with 'done' set to 'TRUE'. This check prevents
  ossl_connect_common() from creating a new ssl connection on an existing
  ssl session which causes openssl to fail when it tries to parse an
  encrypted TLS packet since the cipher data was effectively thrown away
  when the new ssl connection was created.
  
  Bug: http://curl.haxx.se/mail/lib-2010-11/0169.html

Kamil Dudka (6 Dec 2010)
- url: provide dead_connection flag in Curl_handler::disconnect
  
  It helps to prevent a hangup with some FTP servers in case idle session
  timeout has exceeded.  But it may be useful also for other protocols
  that send any quit message on disconnect.  Currently used by FTP, POP3,
  IMAP and SMTP.

Yang Tse (6 Dec 2010)
- ssh: fix a download resume point calculation

Daniel Stenberg (5 Dec 2010)
- Curl_wait_for_resolv: correct timeout
  
  When looping in this function and checking for the timeout being
  expired, it was not updating the reference time when calculating the
  timediff since previous round which made it think each subsequent loop
  to have taken longer than it actually did.
  
  I also modified the function to use the generic Curl_timeleft() function
  instead of the custom logic.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3112579

- Curl_send/recv_plain: return errno on failure
  
  When send() and recv() fail, we now store the errno value to allow the
  app to access it.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3128121
  Reported by: Yuri

Guenter Knauf (5 Dec 2010)
- Updated OpenSSL version.

Yang Tse (4 Dec 2010)
- fix compiler warning: conversion may lose significant bits

- fix compiler warning: assignment within conditional expression

- fix getinfo CURLINFO_LOCAL* for reused connections (take 2) follow-up
  
  - Show address string from proper buffer in case of connection failure.
  
  - Try next address when inet_ntop() fails.

Daniel Stenberg (3 Dec 2010)
- version-check: added brief documentation
  
  and the traditional source header

Yang Tse (3 Dec 2010)
- build: provide SIZEOF_SIZE_T DOS definition

- build: lib/config.dos renamed to lib/config-dos.h

- build: provide SIZEOF_SIZE_T VMS definition

- build: move config-vms.h from subdir 'packages/vms' into 'lib'

- build: provide SIZEOF_SIZE_T definition for non-configure builds

- build: provide SIZEOF_SIZE_T netware definition

- configure: undo using autobuilds to temporarily verify strict aliasing warnings.

- fix compiler warning: rounding, sign extension, or loss of accuracy may result

- fix compiler warning: statement is not reachable

- fix compiler warning: conversion may lose significant bits

- connect: fix compiler warning: unused variable

- fix getinfo CURLINFO_LOCAL* for reused connections (take 2)

- fix getinfo CURLINFO_LOCAL* for reused connections follow-up
  
  Reinstate IPV6 build variable that got removed.

- fix getinfo CURLINFO_LOCAL* for reused connections
  
  Failed to commit this file changes along with the others.

- fix getinfo CURLINFO_LOCAL* for reused connections

- atoi: remove atoi usage

- multi: fix compiler warning: conversion may lose significant bits follow-up

- ftp: fix 'bool' data type implementation dependant usage

- multi: fix compiler warning: conversion may lose significant bits

- multi: fix compiler warning: enumerated type mixed with another type

- hostip: edit comment

- xattr: fix compiler warning: enumerated type mixed with another type

- s/isspace/ISSPACE

- symbol-scan: use configure script knowledge about how to run the C preprocessor

- ignore file generated by configure

- curl_multi_info_read: fix compiler warning: conversion may lose significant bits

- inet_pton: fix compiler warning
  
  warning C4146: unary minus operator applied to unsigned type, result still unsigned

- Curl_getaddrinfo_ex: sanitize function results follow-up.

- Curl_getaddrinfo_ex: sanitize function results.
  
  Ensure that spurious results from system's getaddrinfo() ares not propagated
  by Curl_getaddrinfo_ex() into the library.
  
  Also ensure that the ai_addrlen member of Curl_getaddrinfo_ex()'s output linked
  list of Curl_addrinfo structures has appropriate family-specific address size.

Kamil Dudka (22 Nov 2010)
- openldap: use remote port in URL passed to ldap_init_fd()
  
  ... not the proxy port.  It makes no difference unless a proxy is used.

Yang Tse (20 Nov 2010)
- gtls: define and use gtls_EAGAIN, gtls_EINTR and gtls_EIO.
  
  Winsock builds clobber some errno.h defines in setup_once.

Dan Fandrich (19 Nov 2010)
- Added a couple examples that were missing from the tar ball

- Check for errors while preprocessing curl.h in test 1119
  
  This showed a problem when running the test out-of-tree, so
  an include path is now being added to pick up the generated
  curlbuild.h file.

- Use the 3-argument open for compatibility with older perls

- [Matthias Bolte brought this change]

  Detect socket errors in GnuTLS on Windows
  
  On Windows, translate WSAGetLastError() to errno values as GNU
  TLS does it internally, too. This is necessary because send() and
  recv() on Windows don't set errno when they fail but GNU TLS
  expects a proper errno value.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3110991

Yang Tse (19 Nov 2010)
- test servers: fix strict aliasing compiler warnings

- configure: use autobuilds to temporarily verify strict aliasing warnings.
  
  Temporarily, When cross-compiling with gcc 3.0 or later, enable strict aliasing
  rules and warnings. Given that cross-compiled targets autobuilds do not run the

Julien Chaffraix (17 Nov 2010)
- configure: Prevent link errors with --librtmp.
  
  If --librtmp was specified but pkg-config could not find the librtmp
  file, we would have undefined symbols when linking curl.
  
  We prevent this error by disabling this case as suggested on the mailing
  list.

Daniel Stenberg (15 Nov 2010)
- RELEASE-NOTES: synced with cbf4961bf3e4

- gnutls->handshake: improved timeout handling
  
  When no timeout is set, we call the socket_ready function with a timeout
  value of 0 during handshake, which makes it loop too much/fast in this
  function. It also made this function return CURLE_OPERATION_TIMEDOUT
  wrongly on a slow handshake.
  
  However, the particular bug report that highlighted this problem is not
  solved by this fix, as this fix only makes the more proper error get
  reported instead.
  
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=594150
  Reported by: Johannes Ernst

Julien Chaffraix (13 Nov 2010)
- urldata: Capitalize enum protect_level values.
  
  This makes it easier to spot the enum values from the variables.
  Removed some unneeded DEBUGASSERT added in the previous commit.

- security: tighten enum protection_level usage.
  
  While changing Curl_sec_read_msg to accept an enum protection_level
  instead of an int, I went ahead and fixed the usage of the associated
  fields.
  
  Some code was assuming that prot_clear == 0. Fixed those to use the
  proper value. Added assertions prior to any code that would set the
  protection level.

Yang Tse (13 Nov 2010)
- configure: fix autoconf 2.68 warning: no AC_LANG_SOURCE call detected in body

Daniel Stenberg (12 Nov 2010)
- curl.1: "a file", not an

- version-check.pl: display version number for symbols
  
  This script is the start of a helper tool that scans a source code and
  outputs the most recent libcurl version it finds symbols for. Meaning
  that if there's no conditions in the code, that's the earliest libcurl
  version the scanned code requires.
  
  It is not added to the Makefile.am yet as it is still a bit crude, but
  I'm committing it to keep it and allow us to work on it.

- [Adam Light brought this change]

  Makefile.vc6: fixed the xattr.c compile

Julien Chaffraix (12 Nov 2010)
- krb5: Use GSS_ERROR to check for error.
  
  This is the advised way of checking for errors in the GSS-API RFC.
  Also added some '\n' to the error message so that they are not mixed
  with other outputs.

- security: Pass the right parameter to init.
  
  init is expecting app_data. Passing it the struct connecdata would make
  us crash later.

Daniel Stenberg (11 Nov 2010)
- HTTP Auth: Add CURLAUTH_ONLY
  
  This is a meta symbol. OR this value together with a single specific
  auth value to force libcurl to probe for un-restricted auth and if not,
  only that single auth algorithm is acceptable.
  
  For example you can use CURLAUTH_DIGEST|CURLAUTH_ONLY to make libcurl
  first probe for what method to use, but yet only consider Digest to be
  acceptable.
  
  Using _only_ CURLAUTH_DIGEST without the CURLAUTH_ONLY field, will make
  libcurl explicitly use Digest right away and not do any probing.

- ip_version: moved to connection struct
  
  The IP version choice was previously only in the UserDefined struct
  within the SessionHandle, but since we sometimes alter that option
  during a request we need to have it on a per-connection basis.
  
  I also moved more "init conn" code into the allocate_conn() function
  which is designed for that purpose more or less.

Yang Tse (11 Nov 2010)
- buildconf: MAC OS X requires libtool version 1.5.26 or newer
  
  MAC OS X requires libtool version 1.5.26 or newer, otherwise
  configure will mishandle *.dSYM directories when it runs.

- configure: remove temporary autobuilds exercising of xattr function tests

- configure: use autobuilds to temporarily exercise xattr function tests

- xattr: portability fix

- curl-functions: provide xattr function tests that also check number of arguments

Daniel Stenberg (10 Nov 2010)
- test1120: verify FTP response 421
  
  curl mustn't try to use the control connection after the 421 is received

- ftpserver.pl: spellfix comment

- [Rutger Hofman brought this change]

  TFTP: resend the correct data
  
  I found a bug in tftp_tx() in tftp.c. If a data resend is done after
  reception of an ACK/OACK, the call to sendto is wrong.

- [Stefan Tomanek brought this change]

  write extended attributes by using fsetxattr
  
  Instead of reopening the downloaded file, fsetxattr uses the (already
  open) file descriptor to attach extended attributes. This makes the
  procedure more robust against errors caused by moved or deleted files.

Dan Fandrich (9 Nov 2010)
- Check for getinfo errors before setting attributes

Kamil Dudka (9 Nov 2010)
- ftp: treat server's response 421 as CURLE_OPERATION_TIMEDOUT
  
  Bug: https://bugzilla.redhat.com/650255
  Reported by: Simon H.

Daniel Stenberg (9 Nov 2010)
- symbols-in-version: add CURL_SOCKET_BAD
  
  I also documented the filtering logic in the symbol-scan.pl function to
  clarify why not all CURL_* symbols are included.

Yang Tse (9 Nov 2010)
- serial number bump

Kamil Dudka (8 Nov 2010)
- ftp: close connection as soon as ABOR has been sent
  
  ... and do not send ABOR unless really necessary.
  
  Bug: https://bugzilla.redhat.com/649347
  Reported by: Simon H.

Daniel Stenberg (8 Nov 2010)
- RELEASE-NOTES: synced with fc6c4c10f9faab08
  
  I also recounted and updated the command line and libcurl options.

- help: indent the --xattr option like the others

- curl.1: --resolve documented

- CURLOPT_RESOLVE: documented

- CURLOPT_USE_SSL: move from FTP options to connection options

- xattr-check: correct the comment as well

- xattr: use const char * for const strings

- setxattr: fix the checks
  
  My copy and paste job was a little too much copy and I missed to adjust
  it properly to sys/xattr.h all over and this is a fix to cure that.

- CURLOPT_RESOLVE: added
  
  CURLOPT_RESOLVE is a new option that sends along a curl_slist with
  name:port:address sets that will populate the DNS cache with entries so
  that request can be "fooled" to use another host than what otherwise
  would've been used. Previously we've encouraged the use of Host: for
  that when dealing with HTTP, but this new feature has the added bonus
  that it allows the name from the URL to be used for TLS SNI and server
  certificate name checks as well.
  
  This is a first change. Surely more will follow to make it decent.

Yang Tse (8 Nov 2010)
- fix compiler warning

Dan Fandrich (7 Nov 2010)
- Added os-specific.c and xattr.c to the Symbian build files

Yang Tse (7 Nov 2010)
- xattr: fix VisualStudio builds

- fix snapshot generation

Daniel Stenberg (5 Nov 2010)
- --libcurl: simplify output
  
  Removed the code that was needed for libcurl before 7.19.0 which now is
  more than two years old.
  
  Simplified the top comment and corrected the URL.

- [Alfred Gebert brought this change]

  LDAP: detect non-binary attributes properly
  
  If the query result has a binary attribute, the binary attribute is
  base64 encoded. But all following non binary attributes are also base64
  encoded which is wrong.
  
  This is a test (LDAP server is public).
  
  curl
  ldap://x500.bund.de:389/o=Bund,c=DE?userCertificate,certificateSerialNumber?sub
  ?cn=*Woehleke*

- xattr: add configure check and #ifdefs
  
  setxattr is a glibc call to set extended attributes, so configure now
  checks for it and the code is adapted to only build when the
  functionality is present.

- [Stefan Tomanek brought this change]

  save metadata to extended file attributes
  
  It is often convinient to track back the source of a once downloaded
  file; this patch makes curl store the source URL and other metadata
  alongside the retrieved file by using the extended attributes (if
  supported by the file system and enabled by --xattr).

- test: remove test 580
  
  Test 580 is removed again for two reasons:
  
  1) Some compilers aren't satisfied by just a data variable called 'test'
  when first.o wants a function called 'test'. The Solaris compiler says
  "ld: warning: symbol `test' has differing types:" while the AIX compiler
  downright rejects it.
  
  2) Test case 1119 that was added after this test is way more complete
  and cover everything test 580 does and more without introducing the same
  problems.

- Revert: use Host: name for SNI and cert name checks
  
  This reverts commit b0fd03f5b8d4520dd232a9d13567d16bd0ad8951,
  4b2fbe1e97891f, afecd1aa13b4f, 68cde058f66b3

- TODO-RELEASE: "TLS SNI use Host:" is done
  
  262 - Manual setting of TLS Server Name Indication - use Host:

- RELEASE-NOTES: synced with 7b823badbcab9d330

- curl.1: added a few missing exit codes

- certcheck: use the custom Host: name for checks
  
  If you use a custom Host: name in a request to a SSL server, libcurl
  will now use that given name when it verifies the server certificate to
  be correct rather than using the host name used in the actual URL.

- SNI: simplify the custom host name use
  
  The redirect check is already done at the position where the customhost
  field is assigned so there's no point in doing that a second time.

- host: get the custom Host: name more genericly
  
  When given a custom host name in a Host: header, we can use it for
  several different purposes other than just cookies, so we rename it and
  use it for SSL SNI etc.

- [Hongli Lai (Phusion) brought this change]

  SNI: set name to custom Host header
  
  OpenSSL SNI host name should be set to the custom Host header, if the
  user provided one.

- fopen.c: re-indented, fixed previous mistake
  
  I've made the code intended using curl-style now to look more like other
  examples.
  
  My previous "fix" was a bit too invasive but is now fixed again.

- multi use: call multi_perform even on select() timeouts

- example: add smtp-multi.c
  
  An example application source code sending SMTP mail with the multi
  interface. It is based on the code Alona Rossen provided, which in turn
  is based on existing example/test code, and I converted it even more
  into a decent example with a fair multi API use, put the info required
  to edit at the top and I added some comments.

- CURLOPT_NOSIGNAL: add blurb about SIGPIPE

Dan Fandrich (3 Nov 2010)
- Allow building test 580 out of tree

Daniel Stenberg (3 Nov 2010)
- dist: add symbol-scan.pl to the tarball

- test1119: verify symbols-in-versions

- runtests: allow tests written as perl scripts
  
  If a command is set type="perl", it can now specify a perl program that will
  be run instead of an ordinary curl or built tool.
  
  A perl test automatically disables memory and valgrind debugging.

- symbol-scan: verifies symbols-in-versions
  
  This new script scans for all enums and #defines used by the curl/curl.h
  and curl/multi.h headers. Then it reads all symbols mentioned in
  symbols-in-vesions and make sure that there's no entries missing in
  there. It then proceeds to verify that the entries that
  symbols-in-vesions mentions but aren't found in the sources are truly
  documented as removed.
  
  This script is used in the new test case 1119

- symbols-in-versions: added 119 missing symbols
  
  I've developed a script I call symbol-scan.pl that scans the curl.h and
  multi.h header files and compare the symbols it finds in there with the
  symbols symbols-in-versions documents and outputs a report on the
  differences.  Using this I've dug through the history to fill up
  symbols-in-versions with all the symbols my script found mismatches for.
  
  I will commit symbol-scan.pl separatly and think of a way to put it to
  use in the build/tests so that we from now on will get this in-sync
  check automatically.

Dan Fandrich (2 Nov 2010)
- Added mk580.pl to the tar ball

Daniel Stenberg (2 Nov 2010)
- symbols-in-versions: added missing symbols

- ignore: lib580.c is generated by mk580.pl

- test: added test 580 - verifies symbols-in-versions
  
  The new perl script mk580.pl generates a C table in a fresh source file
  named lib580.c and if that compiles fine we know that the file
  docs/libcurl/symbols-in-versions at least doesn't include any symbols
  that are misspelled.
  
  An additional feature would be to somehow scan curl/curl.h and compare
  with symbols-in-versions to see if there are symbols missing.

- spellfix: CURLOPT_TFTP_BLKSIZE it is

Kamil Dudka (29 Oct 2010)
- ftp: prevent server from hanging on closed data connection
  
  Some FTP servers (e.g. Pure-ftpd) end up hanging if we close the data
  connection before transferring all the requested data.  If we send ABOR
  in that case, it prevents the server from hanging.
  
  Bug: https://bugzilla.redhat.com/643656
  Reported by: Pasi Karkkainen, Patrick Monnerat

Dan Fandrich (28 Oct 2010)
- Removed a leftover mention of FTP in an error message

- Removed the native Makefile.riscos files
  
  These haven't worked in at least 8 years due to missing source
  files, and most active RiscOS developers these days apparently
  cross-compile anyway.
  
  Signed-off-by: James Bursa <james@zamez.org>

- Lightened the stack in wc_statemach to permit deeper recursion
  
  Also, added a few hints to help compilers to perform tail call
  recursion optimization.

Daniel Stenberg (20 Oct 2010)
- SSH: use libssh2_session_handshake()
  
  In libssh2 1.2.8, libssh2_session_handshake() replaces
  libssh2_session_startup() to fix the previous portability problem with
  the socket type that was too small for win64 and thus easily could cause
  crashes and more.

- SSH: avoid using the libssh2_ prefix
  
  It is a bad idea to use the public prefix used by another library and
  now we realize that libssh2 introduces a symbol in the upcoming version
  1.2.8 that conflicts with our static function named libssh2_free.

- formdata: provide error message
  
  When failing to build form post due to an error, the code now does a
  proper failf(). Previously libcurl would report an error like "failed
  creating formpost data" when a file wasn't possible to open which was
  not easy for users to figure out.
  
  I also lower cased a function name to be named more curl-style and
  removed some unnecessary code.

- URL-parsing: consider ? a divider
  
  The URL parser got a little stricter as it now considers a ? to be a
  host name divider so that the slightly sloppier URLs work too. The
  problem that made me do this change was the reported problem with an URL
  like: www.example.com?email=name@example.com This form of URL is not
  really a legal URL (due to the missing slash after the host name) but is
  widely accepted by all major browsers and libcurl also already accepted
  it, it was just the '@' letter that triggered the problem now.
  
  The side-effect of this change is that now libcurl no longer accepts the
  ?  letter as part of user-name or password when given in the URL, which
  it used to accept (and is tested in test 191). That letter is however
  mentioned in RFC3986 to be required to be percent encoded since it is
  used as a divider.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3090268

- curl_easy_setopt.3: spellfix

- curl_easy_setopt.3: CURLOPT_USE_SSL is not just for FTP
  
  It is for FTP, SMTP, POP3, IMAP at least.

- krb4.h: removed unused prototypes

- krb4: make a few functions static

- TODO-RELEASE: cleanup for 7.21.3 works
  
  "SFTP resume with 4GB file does not work" is now removed as I'm sure
  this is really a libssh2 bug and not a libcurl bug.
  
  7.21.2 is released already

- RELEASE-NOTES: sync with 09a2d93a0f17ca

- http_chunks: remove debug output
  
  Accidentally left in there during my previous debugging of this

- Curl_setopt: disallow CURLOPT_USE_SSL without SSL support
  
  In order to avoid for example the pingpong protocols to issue STARTTLS
  (or equivalent) even though there's no SSL support built-in.
  
  Reported by: Sune Ahlgren
  Bug: http://curl.haxx.se/mail/archive-2010-10/0045.html

- options: check for features for some options
  
  Some options, such as the automatic decompression and some SSL related
  ones now will bail out if the underlying libcurl doesn't have support
  for the particular feature needed.

Dan Fandrich (14 Oct 2010)
- Fixed the IPv6 host address in test1203
  
  Reported by: Christian Weisgerber
  Bug: http://curl.haxx.se/bug/view.cgi?id=3087479

Daniel Stenberg (14 Oct 2010)
- curl_easy_setopt.3: clarify CURLOPT_CRLF
  
  The option takes a parameter that should be 1 or 0 to enable or disable
  the feature.
  
  URL: http://curl.haxx.se/bug/view.cgi?id=3086428

Guenter Knauf (14 Oct 2010)
- Some more small Watcom makefile fixes.

- Added --noconfigure switch to testcurl.pl.

- Modified Watcom makefiles to work on Linux too.

- Added MingW32 rtmp target; changed Watcom targets.
  
  Modified Watcom targets to avoid backslashs so that they can
  work on Linux too.

Daniel Stenberg (13 Oct 2010)
- gitignore: ignore Makefile.vc10.dist made by maketgz

- curlver.h: start over at 7.21.3

- RELEASE-NOTES: start over towards 7.21.3

- THANKS: added contributors from 7.21.2

Version 7.21.2 (12 Oct 2010)

Daniel Stenberg (12 Oct 2010)
- RELEASE-NOTES: synced with ecd624b8e774a85

- [Julien Chaffraix brought this change]

  CMake: Build fix.
  
  Do not match the trailing '\n' in the regular expression as this would
  make us dump a ) parenthesis on a new line.
  
  This fixes the following error:
  
  would get transformed into:
  
  )
  
  Bug: http://curl.haxx.se/mail/lib-2010-10/0065.html
  Reported by: Dimitre Dimitrov

- header_callback: strip off file path separated with backslashes
  
  If the filename contains a backslash, only use filename portion. The
  idea is that even systems that don't handle backslashes as path
  separators probably want that path removed for convenience.
  
  This flaw is considered a security problem, see the curl security
  vulnerability http://curl.haxx.se/docs/adv_20101013.html

Dan Fandrich (12 Oct 2010)
- Get the curl source files for Amiga from Makefile.inc
  
  This is similar to how it's done in the lib directory.
  The Amiga build appears to have been broken for a year because
  of a missing homedir.c

- Added section on server-supplied names to security considerations

Guenter Knauf (12 Oct 2010)
- Fixed Watcom makefile.

- Added build bits for librtmp / libssh2 to Watcom makefiles.

- Added build bits for librtmp to NetWare makefiles.

Daniel Stenberg (12 Oct 2010)
- SFTP: more ignoring negative file sizes
  
  As the change in 5f0ae7a0626cbe709 added a precaution against negative
  file sizes that for some reason managed to get returned, this change now
  introduces the same check at the second place in the code where the file
  size from the libssh2 stat call is used.
  
  This check might not be suitable for a 32 bit curl_off_t, but libssh2.h
  assumes long long to work and to be 64 bit so I believe such a small
  curl_off_t will be very unlikely to occur in the wild.

- SMTP: debug output for no known auth mechanisms supported
  
  ... and some minor source code whitespace edits

- test: urlglob error messages have no extra newline anymore

Guenter Knauf (11 Oct 2010)
- Added build bits for librtmp to MingW32 makefiles.

Daniel Stenberg (8 Oct 2010)
- RELEASE-NOTES: synced with 61f4cdb73ae4

- globbing: fix crash on unballanced open brace
  
  Having an open brace without a closing brace caused a segfault.
  
  Having a closing brace too many caused a silent error to occur, which
  caused curl to bail out and return an error code but no error message
  was shown. It does now!
  
  All error message outputs no longer wrongly get _two_ newlines written
  after the error message.
  
  Reported by: Vlad Ureche
  Bug: http://curl.haxx.se/bug/view.cgi?id=3083942

- [Dan Locks brought this change]

  libcurl.m4: AC_PATH_PROG fixes
  
  The invocation of autoconf's AC_PATH_PROG( ) is not quite right for
  finding curl-config. This fix corrects the negative case (where
  curl-config is not found).

- FAQ: added "How do I submit my patch?"

- examples: use example.com in example URLs

- TODO-RELEASE: libidn problem not repeatable
  
  "261 - configure and libidn" is removed from the list since Julien
  Chaffraix tried to repeat it but failed and the reporter did not return
  to provide further details.
  
  Reported by: Lyndon Hill
  Bug: http://curl.haxx.se/mail/lib-2010-07/0029.html

- libcurl.m4: mention argument is PREFIX
  
  The macro provides a --with-libcurl option that expects a PREFIX to be
  specified and not actually a "directory" in which libcurl will be found.
  This now spells that out more clearly.
  
  Reported by: Dan Locks
  Bug: http://curl.haxx.se/bug/view.cgi?id=3079891

Guenter Knauf (3 Oct 2010)
- Some NetWare makefile tweaks.
  
  Renamed SDK_* to NDK_*; made NDK_* defines overwriteable from
  environment; removed now obsolete YACC macro;
  moved some curl_config.h defines to IPv6 section since they
  are only needed when IPv6 is enabled - this makes libcurl compile
  with older NDKs too which were not IPv6-aware.

Daniel Stenberg (2 Oct 2010)
- TODO-RELEASE: 416 error fixed
  
  "3076808 Requests fail silently following a 416 error" done

Julien Chaffraix (2 Oct 2010)
- krb5-gssapi: Removed a memory leak in krb5_auth.
  
  We forgot to release the buffer passed to gss_init_sec_context.
  
  The previous logic was difficult to read as we were reusing the same
  variable (gssbuf) for both input buffer and output buffer. Splitted the
  logic in 2 variables to better underline who needs to be released.
  Also made the code break at 80 lines.

- krb5-gssapi: Made the function always return a value.
  
  kr5_auth missed a final 'return' statement. This is not an error in
  gcc but can lead to potential bugs.

- krb5-gssapi: Delete the GSS-API context.
  
  This fixes a memory leak related to the GSS-API code.
  
  Added a krb5_init and krb5_end functions. Also removed a work-around
  the lack of proper initialization of the GSS-API context.

Daniel Stenberg (2 Oct 2010)
- HTTP: remove special case for 416
  
  It was pointed out that the special case libcurl did for 416 was
  incorrect and wrong. 416 is not really different to other errors so the
  response body must be handled like for other errors/http responses.
  
  Reported by: Chris Smowton
  Bug: http://curl.haxx.se/bug/view.cgi?id=3076808

- [Dan Fandrich brought this change]

  sws: Added writedelay HTTP server command
  
  This delays between write operations, hopefully making it easier
  to spot problems where libcurl doesn't flush the socket properly
  before waiting for the next response.

- TODO-RELEASE: no bug in ftp_nextconnect
  
  The issue named "266 - Bug in ftp_nextconnect?" was deemed to not be a
  bug and instead resulted in clarified docs.

- curl_easy_setopt.3: CURLOPT_DIRLISTONLY implies dir list
  
  Make it explicit that setting CURLOPT_DIRLISTONLY to 1 will make libcurl
  to list the directory.

- RELEASE-NOTES: synced up to 588402585bae

- TODO-RELEASE: move new features to next release

- README.ares: we know require c-ares 1.6.0

- SFTP: avoid downloading negative sizes!
  
  It is still not clarified exactly why this happens, but libssh2
  sometimes report a negative file size for the remote SFTP file and that
  deeply confuses libcurl (or crashes it) so this precaution is added to
  avoid badness.
  
  Reported by: Ernest Beinrohr
  Bug: http://curl.haxx.se/bug/view.cgi?id=3076430

- TODO-RELEASE: drop curl_easy_setoptv
  
  I haven't read any really convincing arguments for adding it

- [Dirk Manske brought this change]

  multi & hiper examples: updates and cleanups
  
  all multi and hiper examples:
  
  * don't loop curl_multi_perform calls, that was <7.20.0 style, currently
    the exported multi functions will not return CURLM_CALL_MULTI_PERFORM
  
  all hiper examples:
  * renamed check_run_count to check_multi_info
  * don't  compare current running handle count with previous value, this
    was the wrong way to check for finished requests, simply call
    curl_multi_info_read
  * it's also safe to call curl_multi_remove_handle inside the
    curl_multi_info_read loop.
  
  ghiper.c:
  * replaced curl_multi_socket (that function is marked as obsolete) calls
    with curl_multi_socket_action calls (as in hiperfifo.c and
    evhiperfifo.c)
  
  ghiper.c and evhiperfifo.c:
  * be smart as hiperfifo.c, don't do uncessary curl_multi_* calls in
    new_conn and main

- TODO-RELEASE: one fixed, one postponed, one added
  
  As we're already in feature freeze, I pushed the feature onwards.

Dan Fandrich (29 Sep 2010)
- Renamed test1204 to test1117 to move it into the normal range

Patrick Monnerat (29 Sep 2010)
- Add gopher protocol definition to ILE/RPG binding.
  OS400 compile script in test dir updated for chkhostname.

Julien Chaffraix (28 Sep 2010)
- krb5-gssapi: Remove several memory leaks.
  
  Remove a leak seen on Kerberos/MIT (gss_OID is copied internally and
  we were leaking it). Now we just pass NULL as advised in RFC2744.
  
  |tmp| was never set back to buf->data.
  
  Cleaned up Curl_sec_end to take into account failure in Curl_sec_login
  (where conn->mech would be NULL but not conn->app_data or
  conn->in_buffer->data).

- security.c: Remove Curl_sec_fflush_fd.
  
  The current implementation would make us send wrong data on a closed
  socket. We don't buffer our data so the method can be safely removed.

- security.c: We should always register the socket handler.
  
  Following a change in the way socket handler are registered, the custom
  recv and send method were conditionaly registered.
  We need to register them everytime to handle the ftp security
  extensions.
  
  Re-added the clear text handling in sec_recv.

- security.c: Fix Curl_sec_login after rewrite.
  
  Curl_sec_login was returning the opposite result that the code in ftp.c
  was expecting. Simplified the return code (using a CURLcode) so to see
  more clearly what is going on.

- security.c: Readd the '\n' to the infof() calls.
  
  They are not automatically added and make the output of the verbose
  mode a lot more readable.

- security.c: Fix typo (PSBZ -> PBSZ)

- security.c: Fix ftp_send_command.
  
  My use of va_args was completely wrong. Fixed the usage so that
  we send the right commands!

Daniel Stenberg (28 Sep 2010)
- curl_easy_escape: don't escape "unreserved" characters
  
  According to RFC3986 section 2.3 the letters -, ., _ and ~ should not be
  percent-encoded.
  
  Reported by: Miguel Diaz
  Bug: http://curl.haxx.se/mail/lib-2010-09/0227.html

- multi: don't expire timeouts at disonnect or done
  
  The functions Curl_disconnect() and Curl_done() are both used within the
  scope of a single request so they cannot be allowed to use
  Curl_expire(... 0) to kill all timeouts as there are some timeouts that
  are set before a request that are supposed to remain until the request
  is done.
  
  The timeouts are now instead cleared at curl_easy_cleanup() and when the
  multi state machine changes a handle to the complete state.

Dan Fandrich (27 Sep 2010)
- Changed the TPF make file to get source files from Makefile.inc
  
  Patch was fixed and validated by David McCreedy.

- Added test case 1204 to test HTTP range failure
  
  This is an attempt to reproduce bug #3076808

Daniel Stenberg (27 Sep 2010)
- [Dirk Manske brought this change]

  multi_runsingle: set timeout error messages
  
  With the latest changes to fix the timeout handling with multi interface
  we lost the timeout error messages. This patch brings them back.

- TODO-RELEASE: updated list of issues to work on

- parsedate: allow time specified without seconds
  
  The date format in RFC822 allows that the seconds part of HH:MM:SS is
  left out, but this function didn't allow it. This change also includes a
  modified test case that makes sure that this now works.
  
  Reported by: Matt Ford
  Bug: http://curl.haxx.se/bug/view.cgi?id=3076529

- TFTP: re-indented the source code
  
  Just made sure that the good old curl indentation style is used all over
  this file.

- [Tim Newsome brought this change]

  TFTP: Work around tftpd-hpa upload bug
  
  tftpd-hpa has a bug where it will send an incorrect ack when the block
  counter wraps and tftp options have been sent. Work around that by
  accepting an ack for 65535 when we're expecting one for 0.

- Revert "security.c: buffer_read various fixes."
  
  This reverts commit fbb38de415b7bb7d743e53a7b4b887ffb12b3e5b.

- security.c: removed superfluous parentheses
  
  And also removed the FIXME where memory was zeroed just before freed,
  and some other minor whitespace changes.

- [Julien Chaffraix brought this change]

  security.c: Update the #include statements after the rewrite.

- [Julien Chaffraix brought this change]

  security.c: sec_write tweaks
  
  - |fd| is now a curl_socket_t and |len| a size_t to avoid conversions.
  - Added 2 FIXMEs about the 2 unsigned -> signed conversions.
  - Included 2 minor changes to Curl_sec_end.

- [Julien Chaffraix brought this change]

  security.c: _sec_send tweaks
  
  - Renamed the method to sec_send now that we
    renamed sec_send to do_sec_send.
  - Some more variable renaming.

- [Julien Chaffraix brought this change]

  security.c: sec_read tweaks
  
  - Renamed the function to sec_recv.
  - Renamed the parameters and variable to match the rest of the code.

- [Julien Chaffraix brought this change]

  security.c: Curl_sec_fflush_fd tweaks
  
  - Use an early return as it makes the code more readable.
  - Added a FIXME about a conversion.

- [Julien Chaffraix brought this change]

  security.c: sec_send tweaks
  
  - Renamed it to do_sec_send as it is the function doing the actual
    transfer.
  - Do not return any values as no one was checking it and it never
    reported a failure (added a FIXME about checking for errors).
  - Renamed the variables to make their use more specific.
  - Removed some casts (int -> curl_socket_t, ...)
  - Avoid doing the htnl <-> nthl twice by caching the 2 results.

- [Julien Chaffraix brought this change]

  security.c: Curl_sec_read_msg tweaks
  
  - Renamed the variables name to better match their intend.
  - Unified the |decoded_len| checks.
  - Added some FIXMEs to flag some improvement that did not go in this
    change.

- [Julien Chaffraix brought this change]

  security.c: Curl_sec_set_protection_level tweaking
  
  - Removed sec_prot_internal as it is now inlined in the function (this removed
    a redundant check).
  - Changed the prototype to return an error code.
  - Updated the method to use the new ftp_send_command function.
  - Added a level_to_char helper method to avoid relying on the compiler's
    bound checks. This default to the maximum security we have in case of a
    wrong input.

- [Julien Chaffraix brought this change]

  security.c: factored the logic from Curl_sec_login into a dedicated method that better reflect its intent.
  
  Introduced a helper method ftp_send_command that synchronously send
  an FTP query.

- [Julien Chaffraix brought this change]

  security.c: Remove out_buffer as it was never written into.

- [Julien Chaffraix brought this change]

  security.c: buffer_read various fixes.
  
  Tighten the type of the |data| parameter to avoid a cast. Also made
  it const as we should not modify it.
  
  Added a DEBUGASSERT on the size to be written while changing it.

- [Julien Chaffraix brought this change]

  security.c: Made block_write return a CURLcode.
  
  While doing so, renamed it to socket_write to better match its
  function.

- [Julien Chaffraix brought this change]

  security.c: Made block_read and sec_get_data return CURLcode.
  
  To do so, made block_read call Curl_read_plain instead of read.
  
  While changing them renamed block_read to socket_read and sec_get_data
  to read_data to better match their function.
  
  Also fixed a potential memory leak in block_read.

- [Julien Chaffraix brought this change]

  Security.c: Fix headers guard to match the rest of the code.

- [Julien Chaffraix brought this change]

  configure: Fix the LDAPS disable message
  
  ... for example when LDAP is not compiled.
  
  Fixed the logic to match the rest of the options' message that is we
  update the default message only if the option is not disabled after the
  different checks.
  
  Reported by: Guenter Knauf

- RELEASE-NOTES: sync with 8665d4e5 and c-ares >= 1.6.0 note

- parse_remote_port: ignore colons without port number
  
  Obviously, browsers ignore a colon without a following port number. Both
  Firefox and Chrome just removes the colon for such URLs. This change
  does not remove the colon for URLs sent over a HTTP proxy, so we should
  consider doing that change as well.
  
  Reported by: github user 'kreshano'

- RELEASE-NOTES: in sync with 19f45eaa799

- duphandle: use ares_dup()
  
  curl_easy_duphandle() was not properly duping the ares channel. The
  ares_dup() function was introduced in c-ares 1.6.0 so by starting to use
  this function we also raise the bar and require c-ares >= 1.6.0
  (released Dec 9, 2008) for such builds.
  
  Reported by: Ning Dong
  Bug: http://curl.haxx.se/mail/lib-2010-08/0318.html

- [Hendrik Visage brought this change]

  MacOSX-Framework: updates for Snowleopard
  
  1) PPC64 appears to be an 10.5 only supported architecture, so I
  forced 10.5 for 64bit if there is a need for PPC64, else 64bit only
  does x86_64
  
  2) proper "make clean" after every ./configure. fixes a bug where
  subsequent runs the 32bit do not get compiled
  
  3) Added a version numbering curl-$VERSION} rather than the "stock standard" A

- RELEASE-NOTES: synced with 5fcc4332d62fe
  
  Removed the duplicate entry of Kamil in the credits.

- configure: don't enable RTMP if the lib detect fails
  
  librtmp is often statically linked and using sub dependencies like
  OpenSSL, so we need to make sure we can actually link with it properly
  before enabling it. Otherwise we easily end up trying to link with a
  RTMP lib that fails.

- TODO: added 8.4 non-gcrypt under GnuTLS
  
  We must not assume gcrypt just because of GnuTLS

- configure: check for gcrypt if using GnuTLS
  
  1 - libcurl assumes that there are gcrypt functions available when
  GnuTLS is.
  
  2 - GnuTLS can be built to use libnettle instead as crypto library,
  which breaks assumption (1)
  
  This change makes configure make sure that if GnuTLS is requested and
  detected, it also makes sure that gcrypt is present or it errors
  out. This is mostly a way to make the user more aware of this flaw, the
  correct fix would be to detect which crypto layer that is in use and
  adapt our code to use that instead of blindly assuming gcrypt.
  
  Reported by: Michal Gorny
  Bug: http://curl.haxx.se/bug/view.cgi?id=3071038

- RELEASE-NOTES: sync from d2a7fd2fe65b to HEAD

- FTP: fix bad check of Curl_timeleft() return code
  
  When it returns 0 it means no timeout. Only a negative value means that
  we're out of time.

- LDAP: moved variable declaration to avoid compiler warn
  
  If built without HTTP or proxy support it would cause a compiler warning
  due to the unused variable. I moved the declaration of it into the only
  scope it is used.

Tor Arntsen (18 Sep 2010)
- LDAP: Use FALSE instead of bool_false when setting bits.close
  
  bool_false is the internal name used in the setup_once.h definition
  we fall back to for non-C99 non-stdbool systems, it's not the actual
  name to use in assignments (we use bool_false, bool_true there to
  avoid global namespace problems, see comment in setup_once.h).
  The correct C99 value to use is 'false', but let's use FALSE as
  used elsewhere when assigning to bits.close. FALSE is set equal
  to 'false' in setup_once.h when possible.
  
  This fixes a build problem on C99 targets.

- LDAP: Add missing declaration for 'result'

Daniel Stenberg (18 Sep 2010)
- [Mauro Iorio brought this change]

  LDAP: Support for tunnelling queries through HTTP proxy
  
  As of curl-7.21.1 tunnelling ldap queries through HTTP Proxies is not
  supported. Actually if --proxytunnel command-line option (or equivalent
  CURLOPT_HTTPPROXYTUNNEL) is used for ldap queries like
  ldap://ldap.my.server.com/... You are unable to successfully execute the
  query. In facts ldap_*_bind is executed directly against the ldap server
  and proxy is totally ignored. This is true for both openLDAP and
  Microsoft LDAP API.
  
  Step to reproduce the error:
  Just launch "curl --proxytunnel --proxy 192.168.1.1:8080
  ldap://ldap.my.server.com/dc=... "
  
  This fix adds an invocation to Curl_proxyCONNECT against the provided
  proxy address and on successful "CONNECT" it tunnels ldap query to the
  final ldap server through the HTTP proxy. As far as I know Microsoft
  LDAP APIs don't permit tunnelling in any way so the patch provided is
  for OpenLDAP only.  The patch has been developed against OpenLDAP 2.4.23
  and has been tested with Microsoft ISA Server 2006 and works properly
  with basic, digest and NTLM authentication.

- timeout: use the correct start value as offset
  
  Rodric provide an awesome recipe that proved libcurl didn't timeout at
  the requested time - it instead often timed out at [connect time] +
  [timeout time] instead of the documented and intended [timeout time]
  only. This bug was due to the code using the wrong base offset when
  comparing against "now". I could also take the oppurtinity to simplify
  the code by properly using of the generic help function for this:
  Curl_timeleft.
  
  Reported by: Rodric Glaser
  Bug: http://curl.haxx.se/bug/view.cgi?id=3061535

- Curl_timeleft: avoid returning "no timeout" by mistake
  
  As this function uses return code 0 to mean that there is no timeout, it
  needs to check that it doesn't return a time left value that is exactly
  zero. It could lead to libcurl doing an extra 1000 ms select() call and
  thus not timing out as accurately as it should.
  
  I fell over this bug when working on the bug 3061535 but this fix does
  not correct that problem alone, although this is a problem that needs to
  be fixed.
  
  Reported by: Rodric Glaser
  Bug: http://curl.haxx.se/bug/view.cgi?id=3061535

- whitespace: unified source
  
  if ( => if(
  while ( => while(
  
  and some other changes in the similar spirit, trying to make the
  whole file use the same style

- remote-header-name: don't output filename when NULL

- [James Bursa brought this change]

  TheArtOfHttpScripting: use long options

- [James Bursa brought this change]

  getinmemory: make the example easier to follow
  
  1. Remove the comment warning that it's "not been verified to work". It
     works with no problems in my testing.
  
  2. Remove 2 unnecessary includes.
  
  3. Remove the myrealloc(). Initialize chunk.memory with malloc() instead
     of NULL. The comments for these two parts contradicted each other.
  
  4. Handle out of memory from realloc() instead of continuing.
  
  5. Print a brief status message at the end.

- multi: don't do extra expire calls for the connection
  
  The timeout is set for the connect phase already at the start of the
  request so we should not add a new one, and we MUST not set expire to 0
  as that will remove any other potentially existing timeouts.

- [Peter Pentchev brought this change]

  Fix a bashism: test a = b is more portable than ==.

- glob_word: remove a check that is always false

- inflate_stream: remove redundant check that is always true

- digest: make it clear the condition is always true

- ssluse: removed redundant check that is always true

Dan Fandrich (11 Sep 2010)
- Link curl and the test apps with -lrt explicitly when necessary
  
  When curl calls a function from that library then it needs to
  explicitly link to the library instead of piggybacking on
  libcurl's own dependency.  Without this, GNU ld with the
  --no-add-needed flag fails when linking (which Fedora now does
  by default).
  
  Reported by: Quanah Gibson-Mount
  Bug: http://curl.haxx.se/mail/lib-2010-09/0085.html

- Mention the Debian Popularity Contest

Tor Arntsen (9 Sep 2010)
- test565: Don't hardcode IP:PORT
  
  Use %HOSTIP:%HTTPPORT instead of 127.0.0.1:8990 so that
  verification works if the baseport change option is used
  when executing runtests.pl.

Daniel Stenberg (9 Sep 2010)
- curl.1: updated protocols and polished language

- FAQ: CURL_STATICLIB for visual studio users
  
  Clarified as it isn't used with a -D option for them.
  
  Reported by: Artfunkel
  Bug: http://curl.haxx.se/bug/view.cgi?id=3060381

- FAQ: updated and added host with custom IP question
  
  Added "3.19 How do I get HTTP from a host using a specific IP address?"
  and updated some stuff about certs etc.

- chunky parser: only rewind if needed
  
  The code reading chunked encoding attempts to rewind the code if it had
  read more data than the chunky parser consumes. The rewinding can fail
  and it will then cause an error. This change now makes the rewinding
  only happen if pipelining is in use - as that's the only time it really
  needs to be done.
  
  Bug: http://curl.haxx.se/mail/lib-2010-08/0297.html
  Reported by: Ron Parker

Kamil Dudka (6 Sep 2010)
- rtsp: avoid SIGSEGV on malformed header

- rtsp: avoid SIGSEGV on malformed header

Daniel Stenberg (6 Sep 2010)
- warning: fix conversion to 'int' from 'size_t'

- portabilty: use proper variable type to hold sockets
  
  Curl_getconnectinfo() is changed to return a proper curl_socket_t for
  the last socket so that it'll work more portably (and cause less
  compiler warnings).

Guenter Knauf (3 Sep 2010)
- Trial to fix another compiler warning with braces.

Dan Fandrich (2 Sep 2010)
- Use checkprefix() to compare protocol-specific strings
  
  Otherwise, there could be problems running in certain locales.

Guenter Knauf (2 Sep 2010)
- Moved S_ISREG define to setup as suggested by Dan.

- Use own typedef as workaround for broken sspi.h header (f.e. Watcom).

- Added some hacks in order to build with VC from git.
  
  Adam Light posted this patch to the list which enables builds from
  git with VC versions other than vc6; also he added a vc10 target.

- Added S_ISREG define for Win32.

Daniel Stenberg (1 Sep 2010)
- multi: fixes for timing out handles
  
  Add a timeout check for handles in the state machine so that they will
  timeout in all states disregarding what actions that may or may not
  happen.
  
  Fixed a bug in socket_action introduced recently when looping over timed
  out handles: it wouldn't assign the 'data' variable and thus it wouldn't
  properly take care of handles.
  
  In the update_timer function, the code now checks if the timeout has
  been removed and then it tells the application. Previously it would
  always let the remaining timeout(s) just linger to expire later on.

- threaded resolver: no more expire 0 calls
  
  Curl_expire() set to 0 expires ALL timeouts so it should only be called
  if we truly and really want to remove all timeouts for the handle.

- resolve_server: simplify code
  
  Make use of the helper function Curl_timeleft() instead of duplicating
  code.

- multi: make sure the next timeout is used when one expires
  
  Each easy handle has a list of timeouts, so as soon as the main timeout
  for a handle expires, we must make sure to get the next entry from the
  list and re-add the handle to the splay tree.
  
  This was attempted previously but was done poorly in my commit
  232ad6549a68450.

Dan Fandrich (30 Aug 2010)
- Added proxy keyword to allow skipping test in proxyless configs

Daniel Stenberg (29 Aug 2010)
- multi: set timeouts when transfer begins
  
  When a new transfer is about to start we now set the proper timeouts to
  expire for the multi interface if they are set for the handle. This is a
  follow-up bugfix to make sure that easy handles timeout properly when
  the times expire and the multi interface is used. This also improves
  curl_multi_timeout().

- CURLOPT_DIRLISTONLY: don't use with CURLOPT_WILDCARDMATCH

- FAQ: update list of supported protocols

- [Fabian Keil brought this change]

  In the m4 detection line, factor out the 2>dev/null

- [Fabian Keil brought this change]

  If m4 doesn't support --version, try if gm4 does.

- [Fabian Keil brought this change]

  If the m4 version isn't recognized at all, just say so
  
  'm4 version  found. You need a GNU m4 installed!' is a bit confusing.

- HISTORY: mention the gopher story

Dan Fandrich (25 Aug 2010)
- Tweaked some test data files
  
  Fixed some issues that caused xmllint failures, added features
  and keywords, fixed some quotes and removed some <strip> sections
  that unnecessarily limited test checking.

- Added new source files to Symbian and TPF makefiles

Daniel Stenberg (25 Aug 2010)
- RELEASE-NOTES: sync from b980c9a02 to HEAD

- Makefile: add gopher.c file to build
  
  As the VC and RISCOS makefiles don't use the .inc file

- runtests: fix uninitialized variable warning

- gopher tests: revert parts of gopher in the pingpong server
  
  Introduced in the initial gopher commits, there was added logic to do
  GOPHER test serving in the pingpong server but as it resembles HTTP much
  more than FTP or SMTP, the gopher testing has been moved over to instead
  use the sws (HTTP) server. This change simply removes unused code.

- gopher tests: use sws and adjusted to more standard style

- sws: added basic gopher support

- gopher: enable the header callback/verbosity

- gopher: fix test case line endings
  
  Patches over email very easily lose CRLF line endings in files otherwise
  LF-only so I had to put them back where needed.

- gopher: fix memory leak and busyloop
  
  The fix for the busyloop really only is a temporary work-around.  It
  causes a BLOCKING behavior which is a NO-NO. This function should rather
  be split up in a do and a doing piece where the pieces that aren't
  possible to send now will be sent in the doing function repeatedly until
  the entire request is sent.

- [Cameron Kaiser brought this change]

  Gopher using Curl_write; test suite (4 tests)

- [Cameron Kaiser brought this change]

  Remove url.c test

- [Cameron Kaiser brought this change]

  Forgot gopher.h in Makefile.inc

- [Cameron Kaiser brought this change]

  Gopher protocol support (initial release)

- http: handle trailer headers in all chunked responses
  
  HTTP allows that a server sends trailing headers after all the chunks
  have been sent WITHOUT signalling their presence in the first response
  headers. The "Trailer:" header is only a SHOULD there and as we need to
  handle the situation even without that header I made libcurl ignore
  Trailer: completely.
  
  Test case 1116 was added to verify this and to make sure we handle more
  than one trailer header properly.
  
  Reported by: Patrick McManus
  Bug: http://curl.haxx.se/bug/view.cgi?id=3052450

- TODO: we now support RTMP

- TODO: done "NTLM with other crypto functions"
  
  Since NTLM was made to work with the NSS API as well, the primary SSL
  alternatives will be built with NTLM support in libcurl.

- TODO: fixed "Make curl_multi_info_read faster"
  
  It is really fast now

Dan Fandrich (24 Aug 2010)
- Fixed a NULL pointer dereference in form posting
  
  It was introduced in commit eeb2cb05 along with the -F type=
  change. Also fixed a typo in the name of the magic filename=
  parameter. Tweaked tests 39 and 173 to better test this path.

Daniel Stenberg (24 Aug 2010)
- [Ben Greear brought this change]

  multi:  Fix compile warning on 64-bit systems

Dan Fandrich (23 Aug 2010)
- Mention PolarSSL in tutorial & add some URLs to INSTALL

Daniel Stenberg (23 Aug 2010)
- RESUME_FROM: clarify what ftp uploads do
  
  The numerical value passed to CURLOPT_RESUME_FROM for FTP uploads is
  interpreted and used as position where to resume the _reading_ of the
  local file and it will "blindly" append that data on the remote
  file. This was certainly not clear in the docs previously.
  
  Reported by: catalin
  Bug: http://curl.haxx.se/bug/view.cgi?id=3048174

- [Dirk Manske brought this change]

  Curl_is_connected: use correct errno
  
  The correctly extracted errno contents were mistakenly overwritten by a newer
  value that wasn't the correct error value.
  
  Bug: http://curl.haxx.se/mail/lib-2010-08/0242.html

- cmdline: make -F type= accept ;charset=
  
  The -F option allows some custom parameters within the given string, and
  those strings are separated with semicolons. You can for example specify
  "name=daniel;type=text/plain" to set content-type for the
  field. However, the use of semicolons like that made it not work fine if
  you specified one within the content-type, like for:
  "name=daniel;type=text/plain;charset=UTF-8"
  ... as the second one would be seen as a separator and "charset" is no
  parameter curl knows anything about so it was just silently discarded.
  
  The new logic now checks if the semicolon and following keyword looks
  like a parameter it knows about and if it isn't it is assumed to be
  meant to be used within the content-type string itself.
  
  I modified test case 186 to verify that this works as intended.
  
  Reported by: Larry Stone
  Bug: http://curl.haxx.se/bug/view.cgi?id=3048988

Guenter Knauf (20 Aug 2010)
- Added mk-ca-bundle.vbs script.
  
  The script works exactly same as the Perl one except for one thing:
  when the text descriptions generated with openssl are included then
  the md5 fingerprints are missing; seems openssl has either a bug or
  a feature which prints the md5 fingerprint output to stdout instead
  of writing them to specified file; this script could here do the same
  as what the Perl scripr does (redirect stdout into file) but this
  makes the script take up double the time because it needs to launch
  cmd.exe 140 times (fo each openssl call). So I think for now we just
  ommit the md5 fingerprints, and see if openssl will be fixed.

- Trial to fix win32 autobuilds.
  
  It seems that its time to look at some better ideas for the win32
  non-configure builds; probably a prebuild target which copies
  config-win32.h to curl_config.h and appends also then feature
  defines like USE_ARES.

Dan Fandrich (19 Aug 2010)
- Use the S_ISREG macro to determine what is a regular file

Kamil Dudka (19 Aug 2010)
- AC_INIT: avoid a warning with autoconf 2.66
  
  It was complaining about the '=>' operator, introduced in e3fc0d5.

Dan Fandrich (18 Aug 2010)
- Fixed a memory leak during OOM in the multi timeout code

- Removed a C99ism & made an array const

Daniel Stenberg (19 Aug 2010)
- [Julien Chaffraix brought this change]

  test: added test 579 to verify progress callback for chunked post
  
  The 66 bytes checked are those 38 bytes with the chunked encoding
  headers added: 8+8+10+35+5 = 66
  
  The three-letter words become 8 bytes on the wire because they are sent
  like: "3\r\none\r\n"
  
  ... and there's the trailing 5 bytes write after the four lines since
  the final chunk is sent (which is "0\r\n\r\n").

- multi: avoid sending multiple complete messages
  
  I fell over this bug report that mentioned that libcurl could wrongly
  send more than one complete messages at the end of a transfer. Reading
  the code confirmed this, so I've added a new multi state to make it not
  happen. The mentioned bug report was made by Brad Jorsch but is (oddly
  enough) filed in Debian's bug tracker for the "wmweather+" tool.
  
  Bug: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=593390

- FAQ: update the list of supported protocols

- FAQ: added blurb about ECCN
  
  "1.13 curl's ECCN number" is a new section mostly made up from
  Alessandro Vesely's very informative ML post on the subject:
  http://curl.haxx.se/mail/lib-2008-03/0251.html

Guenter Knauf (18 Aug 2010)
- It is sufficient to pipe stderr to NUL to get rid of the nasty messages.

- Added SSPI build to Watcom makefile.

Daniel Stenberg (16 Aug 2010)
- [Julien Chaffraix brought this change]

  progress: callback for POSTs less than MAX_INITIAL_POST_SIZE
  
  Add a call to Curl_pgrsSetUploadSize in this case valided by a test
  case.
  
  Reported by: Никита Дорохин.
  Bug: http://curl.haxx.se/mail/lib-2010-04/0173.html

Dan Fandrich (16 Aug 2010)
- Make the LD_PRELOAD path absolute in the tests that use it
  
  In some situations, libtool will change directories and perform
  a link step before executing the libtest test app. Since
  LD_PRELOAD is in effect for this entire process, the path to the
  binary must be absolute so it will be valid no matter in which
  directory the app is running.

Daniel Stenberg (16 Aug 2010)
- negotiation: Wrong proxy authorization
  
  There's an error in http_negotiation.c where a mistake is using only
  userpwd even for proxy requests. Ludek provided a patch, but I decided
  to write the fix slightly different using his patch as inspiration.
  
  Reported by: Ludek Finstrle
  Bug: http://curl.haxx.se/bug/view.cgi?id=3046066

Dan Fandrich (16 Aug 2010)
- Clear stdout and stderr files on each test run
  
  This allows a test to be run several times in the same test
  session even when the -k option is given.

Guenter Knauf (15 Aug 2010)
- Syncroniszed vclean target; fixed some comments.

Daniel Stenberg (15 Aug 2010)
- THANKS: added contributors from 7.21.1

- multi: two fixes done

- multi: use timeouts properly for MAX_RECV/SEND_SPEED
  
  When detecting that the send or recv speed, the multi interface changes
  state to TOOFAST and previously there was no timeout set that would
  force a recheck but it would rely on the application to somehow call
  libcurl anyway. This now sets a timeout for a suitable future time to
  check again if the average transfer speed is then below the threshold
  again.

- multi: support timeouts
  
  Curl_expire() is now expanded to hold a list of timeouts for each easy
  handle. Only the closest in time will be the one used as the primary
  timeout for the handle and will be used for the splay tree (which sorts
  and lists all handles within the multi handle).
  
  When the main timeout has triggered/expired, the next timeout in time
  that is kept in the list will be moved to the main timeout position and
  used as the key to splay with. This way, all timeouts that are set with
  Curl_expire() internally will end up as a proper timeout. Previously any
  Curl_expire() that set a _later_ timeout than what was already set was
  just silently ignored and thus missed.
  
  Setting Curl_expire() with timeout 0 (zero) will cancel all previously
  added timeouts.
  
  Corrects known bug #62.

- Curl_llist_insert_next: allow insertion first in the list
  
  When we specify the "insert after" entry as NULL, this function now
  inserts the new entry first in the list.

- multi: make curl_multi_info_read perform O(1)
  
  Instead of looping over all attached easy handles, this now keeps a list
  of messages in the multi handle. It allows curl_multi_info_read() to
  perform O(1) no matter how many easy handles that are handled. This is
  of importance since this function may be polled very frequently by apps
  using the multi interface.

Kamil Dudka (15 Aug 2010)
- curl -T: ignore file size of special files
  
  original bug report at https://bugzilla.redhat.com/622520

Dan Fandrich (13 Aug 2010)
- Reset environment variables before starting servers
  
  Otherwise, variables from tests could affect the servers
  themselves.

Kamil Dudka (12 Aug 2010)
- typecheck-gcc: work around gcc upstream bug #32061
  
  original bug report at https://bugzilla.redhat.com/617757

Daniel Stenberg (11 Aug 2010)
- release cycle loop: start over toward 7.21.2

Version 7.21.1 (11 Aug 2010)

Daniel Stenberg (11 Aug 2010)
- RELEASE-NOTES: mention the runtests fix as well

- runtests: clear old setenv remainders before test
  
  Due to the layout of the singletest function there are situations where
  it returns before it clears the environment variables that were
  especially set for the single specific test case. That could lead to
  subsequent tests getting executed with environment variables sticking
  around from a previous test which could lead to badness.
  
  This change makes sure to clear all custom variables that may be laying
  around from a previous round, before running a test case.
  
  Reported by: Kamil Dudka
  Bug: http://curl.haxx.se/mail/lib-2010-08/0141.html

Guenter Knauf (11 Aug 2010)
- Added OpenSSL builds to Watcom makefiles.

Yang Tse (11 Aug 2010)
- configure: werror related adjustments

Daniel Stenberg (11 Aug 2010)
- FAQ: s/libcurl.so.3/libcurl.so.X

Dan Fandrich (10 Aug 2010)
- KNOWN_BUG #59 is fixed. Clarify support of IPv6 zone IDs.

- Fixed typo in Android configure command

Daniel Stenberg (11 Aug 2010)
- HISTORY: added stuff from recent years

- warning: silence the compiler
  
  warning: conversion to 'long int' from 'time_t' may alter its value
  
  ... on win64 when time_t is 64bit and long is 32bit.

- RELEASE-NOTES: synced, 3 additional bugfixes

- multi_socket_action: clarify how to kickstart it
  
  The callbacks are called when curl_multi_socket_action() is called, not
  when handles are added. This is now mentioned in the "TYPICAL USAGE"
  section.

- callbacks: acknowledge progress callback error returns
  
  When the progress callback is called during the TCP connection, an error
  return would accidentally not abort the operation as intended but would
  instead be counted as a failure to connect to that particular IP and
  libcurl would just continue to try the next. I made singleipconnect()
  and trynextip() return CURLcode properly.
  
  Added bonus: it corrected the error code for bad --interface usages,
  like tested in test 1084 and test 1085.
  
  Reported by: Adam Light
  Bug: http://curl.haxx.se/mail/lib-2010-08/0105.html

Guenter Knauf (10 Aug 2010)
- More Watcom makefile fixes ...
  
  Final fix (hopefully!) for dll wlink loader;
  prefer faster internal rm if available.

- Fixed my wrong edit.

- More Watcom makefile fixes.
  
  Added the -br switch to dynamic builds which fixes the issue I saw
  with curl's --version output. Added debug info and symfile for debug
  builds to linker opts. Added DLL loader for wlink back, but this time
  dependend on wlink version.
  Patch posted to the list by malak.jiri AT gmail.com.

- Changed test for -u switch in order to enable other wmake switches.
  
  The var %MAKEFLAGS is only set in 3 cases: if set as environment
  var or as macro definition from commandline, and either with the
  -u or -ms switch. Since all these cases are unlikely for the average
  user it should be safe to only test if %MAKEFLAGS is defined; this
  has the benefit that now all other switches can be used again in
  addition to the -u which was formerly not possible.

Daniel Stenberg (10 Aug 2010)
- llist: hide Curl_llist_init
  
  Curl_llist_init is never used outside of llist.c and thus it should be
  static. I also removed the protos for Curl_llist_insert_prev and
  Curl_llist_remove_next which are functions we removed from llist.c ages
  ago.

Guenter Knauf (10 Aug 2010)
- Added msys Perl since git for Win32 comes with own Perl which identifies as msys.

- Updated lib dependency versions.

- Make testcurl.pl Watcom-aware.

Daniel Stenberg (10 Aug 2010)
- parse_remote_port: fix ;type= URL suffix over HTTP proxy
  
  Test 563 is enabled now and verifies that the combo FTP type=A URL,
  CURLOPT_PORT set and proxy work fine. As a bonus I managed to remove the
  somewhat odd FTP check in parse_remote_port() and instead converted it
  to a better and more generic 'slash_removed' struct field. Checking the
  ->protocol field isn't right since when an FTP:// URL is sent over a
  HTTP proxy, the protocol is HTTP but the URL was handled by the FTP code
  and thus slash_removed is set TRUE for this case.

- indent: white space fixes only

Yang Tse (9 Aug 2010)
- build: fix previous push

- build: don't build libhostname unless shared libcurl is built

- build: libhostname and chkhostname linkage adjustments followup

Daniel Stenberg (8 Aug 2010)
- typo: remove duplicate semicolon

- multi: avoid a malloc() when a transfer is complete
  
  The struct used for storing the message for a completed transfer is now
  no longer allocated separatly but is kept within the main struct kept
  for each easy handle so that we avoid one malloc (and the subsequent
  free).

Yang Tse (8 Aug 2010)
- build: libhostname linkage adjustments followup

Guenter Knauf (7 Aug 2010)
- Fix to overwrite libcurl name.

Yang Tse (7 Aug 2010)
- build: chkhostname build adjustments followup

U-D5B1PQ1J\Administrador (7 Aug 2010)
- build: allow NTLM tests to run on more build configurations

Daniel Stenberg (7 Aug 2010)
- curl_easy_setopt.3: rename stream to userdata
  
  In some places where the name 'stream' has been used for naming a
  function argument that is in fact settable with a setopt() option we now
  call that argument 'userdata' to make it more obvious that it is in fact
  possible to set by the application.
  
  Suggested by: Jeff Pohlmeyer

Guenter Knauf (7 Aug 2010)
- Block created curlbuild.h for NetWare to avoid usage from other platforms.

Daniel Stenberg (7 Aug 2010)
- RELEASE-NOTES: synced with recent changes

Yang Tse (6 Aug 2010)
- build: ensure that libhostname doesn't get installed

Daniel Stenberg (6 Aug 2010)
- multi_socket: set timeout for 100-continue
  
  When libcurl internally decided to wait for a 100-continue header, there
  was no call to the timeout function so there was no timeout callback
  called when the multi_socket API was used and thus applications became
  either completely wrong or at least ineffecient depending on how they
  handled the situation. We now set a timeout to get triggered.
  
  Reported by: Ben Darnell
  Bug: http://curl.haxx.se/bug/view.cgi?id=3039744

Guenter Knauf (6 Aug 2010)
- Some more Watcom makefile massage ...
  
  For now removed the .autodepend directive until I've figured out
  which of my changes broke it again.

Yang Tse (5 Aug 2010)
- build: fix libssh2_scp_send64() availability

- build: remove unneeded cast to (void *)

- build: remove unused file

Daniel Stenberg (4 Aug 2010)
- SCP: send large files properly with new enough libssh2
  
  libssh2 1.2.6 and later handle >32bit file sizes properly even on 32bit
  architectures and we make sure to use that ability.
  
  Reported by: Mikael Johansson
  Bug: http://curl.haxx.se/mail/lib-2010-08/0052.html

Yang Tse (3 Aug 2010)
- build: add missing new files to non-configure target build files

- md4: replace bcopy usage with memcpy

Daniel Stenberg (3 Aug 2010)
- RELEASE-NOTES: synced with recent changes

- TODO-RELEASE: clear, file not really used ATM

- typecheck-gcc: add checks for recently added options
  
  I added all OBJECTPOINT curl_easy_setopt() options from 178 to 202. Left
  to add: the five FUNCTIONPOINT (callbacks) options added since:
  
  SSH_KEYFUNCTION
  INTERLEAVEFUNCTION
  CHUNK_BGN_FUNCTION
  CHUNK_END_FUNCTION
  FNMATCH_FUNCTION

- .gitignore: ignore all built examples

- example: fix code to build warning-free

- Curl_connected_proxy: skip the bits.tcpconnect check
  
  Simply because the TCP might be connected already we cannot skip the
  proxy connect procedure. We need to be careful to not overload more
  meaning to the bits.tcpconnect field like this.
  
  With this fix, SOCKS proxies work again when the multi interface is
  used. I believe this regression was added with commit 4b351d018e,
  released as 7.20.1.
  
  Left todo: add a test case that verifies this functionality that
  prevents us from breaking it again in the future!
  
  Reported by: Robin Cornelius
  Bug: http://curl.haxx.se/bug/view.cgi?id=3033966

- sethostname: provide local prototype for gethostname
  
  This is only to avoid warnings on some systems.

- build: add typecast to avoid warning
  
  There is an implicit conversion from "unsigned long" to "long";
  rounding, sign extension, or loss of accuracy may result.

Guenter Knauf (2 Aug 2010)
- Rename CURL_SOURCES macro; revert previous rename of curl_SOURCES macro.

- Removed ugly dependency lists since wmake knows the .autodepend directive.

- Use suffix search path for sources in lib folder.

- Changed src/Makefile.Watcom to use CURL_SOURCES from src/Makefile.inc.

- Renamed curl_SOURCES to CURL_ALLFILES to overcome wmake's case-insensitivity.

- Removed wlink from DLL loader list because it doesnt work with Watcom < 1.8.

- Moved the LDAP API defines from Makefile.Watcom to config-win32.h.
  
  These defines are only needed for older Watcom versions (< 1280).

Daniel Stenberg (2 Aug 2010)
- retry: consider retrying even if -f is used
  
  The --retry logic does retry HTTP when some specific response codes are
  returned, but because the -f option sets the CURLOPT_FAILONERROR to
  libcurl, the return codes are different for such situations and then the
  curl tool failed to consider it for retrying.
  
  Reported by: Mike Power
  Bug: http://curl.haxx.se/bug/view.cgi?id=3037362

- multi: fix FTPS connecting the data connection with OpenSSL
  
  Commit 496002ea1cd76af7f (released in 7.20.1) broke FTPS when using the
  multi interface and OpenSSL was used. The condition for the non-blocking
  connect was incorrect.
  
  Reported by: Georg Lippitsch
  Bug: http://curl.haxx.se/mail/lib-2010-07/0270.html

Guenter Knauf (1 Aug 2010)
- Fixed curlbuild.h rule.

- Added rule to create curlbuild.h if not present (for builds from git).

- Added dependend libs for curl static linking.

- Fixed curl.exe static linking.

Daniel Stenberg (30 Jul 2010)
- warning: silence a win64 compiler warning
  
  conversion from 'size_t' to 'curl_socklen_t', possible loss of data
  
  Reported by: Adam Light

- KNOWN_BUG: The SOCKET type in Win64 is 64 bits
  
  The SOCKET type in Win64 is 64 bits large (and thus so is curl_socket_t
  on that platform), and long is only 32 bits. It makes it impossible for
  curl_easy_getinfo() to return a socket properly with the
  CURLINFO_LASTSOCKET option as for all other operating systems.

- smtp_connect: always provide host name buffer
  
  Previously the host name buffer was only used if gethostname() exists,
  but since we converted that into a curl private function that function
  always exists and will be used so the buffer needs to exist for all
  cases/systems.

- sethostname: avoid including unistd.h to duck for warnings

- sethostname: ISO C does not allow extra `;' outside of a function

- [Kamil Dudka brought this change]

  NTLM tests: boost coverage by forcing the hostname
  
  A shared library tests/libtest/.libs/lihostname.so is preloaded in NTLM
  test-cases to override the system implementation of gethostname().  It
  makes it possible to test the NTLM authentication for exact match, and
  this way test the implementation of MD4 and DES.
  
  If LD_PRELOAD doesn't work, a debug build willl also workk as debug
  builds are now made to prefer a specific environment variable and will
  then return that content as host name instead of the actual one.
  
  Kamil wrote the bulk of this, Daniel Stenberg polished it.

Guenter Knauf (29 Jul 2010)
- Added a comment with an alternate idea to avoid the backslash line contination character.

- Changed comparison to match size_t var type.

- Removed unused vars to avoid compiler warnings.

- Make Watcom makefiles use Makefile.inc to reduce future maintainance.
  
  lib/Makefile.Watcom works fine already, for src/Makefile.Watcom we
  need first to tweak src/Makefile.inc a bit - therefore the handtweaked
  list still exists for now.

- Watcom makefiles overhaul.
  
  - make both libcurl and curl makefiles use register calling convention
    (previously libcurl had stack calling convention).
  - added include paths to the Watcom headers so its no longer required
    to set the environment vars for this.
  - added -wcd=201 to supress compiler warning about unreachable code.
  - use macros for all tools, and removed dependency on GNU tools like rm.
  - make ipv6 and debug builds controlable via env vars and so make them
    optional instead of default.
  - commented WINLDAPAPI and WINBERAPI since they broke with OW 1.8, and
    it seems they're not needed (anymore?).
  - added rule for hugehelp.c.cvs so that it will be created when not
    already exist - this is required for building from a release tarball
    since there we have no hugehelp.c.cvs, thus compilation broke.
  - removed C_ARG creation from lib/Makefile.Watcom and use CFLAGS
    directly as done too in src/Makefile.Watcom - this has the benefit
    that we will see all active cflags and defines during compile.
  - added LINK-ARG to src/Makefile.Watcom in order to better control
    linker input.
  - a couple of other minor makefile tweaks here and there ...
  - added largefile support for Watcom builds to config-win32.h. Not yet
    tested if it really works, but should since Win32 supports it.
  - added loaddll stuff to speed up builds if supported.

- some cosmetic changes.

Dan Fandrich (26 Jul 2010)
- Added md4.c to the Watcom makefile

- Added PolarSSL to the docs

Daniel Stenberg (25 Jul 2010)
- curl-config: --built-shared returns shared info
  
  The curl-config now features a --built-shared command line option that
  will output 'yes' or 'no' depending if the build process was asked to
  build shared library/libraries or not.
  
  It is primarily made to offer more details to the test suite to know
  what kind of stunts it can expect to work.

- add_buffer_send: fix compiler warning
  
  Win64's 32 bit long but 64 bit size_t caused a warning that we avoid
  with a typecast. A small whitespace indent fix was also applied.
  
  Reported by: Adam Light

Guenter Knauf (22 Jul 2010)
- Updated library versions.

- Fixed script version which was still based on CVS Revision tag.

Dan Fandrich (21 Jul 2010)
- FAQ: Why doesn't cURL error out when the cable is unplugged?
  
  This one was long overdue to be mentioned in the FAQ. Also, mention the
  new ftp wildcard downloading feature.

Daniel Stenberg (21 Jul 2010)
- [Ben Greear brought this change]

  ssh: Fix compile error on 64-bit systems.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Ben Greear brought this change]

  build: Enable configure --enable-werror
  
    This passes -Werror to gcc when building curl and libcurl,
    allowing easy dection of compile warnings.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Ben Greear brought this change]

  pingpong: Fix indentation (whitespace change only)
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Jan Van Boghout brought this change]

  CUSTOMREQUEST: shouldn't be disabled when HTTP is disabled
  
  ... since FTP is using it as well, and potentially other protocols!
  
  Also, an #endif CURL_DISABLE_HTTP was incorrectly marked, as it seems to
  end the proxy block instead.

- [Jan Van Boghout brought this change]

  pingpong: response_time is milliseconds
  
  Fixed the comment/document for the response_time struct member.

- [Jan Van Boghout brought this change]

  ftp: response timeout bug in "quote" sending
  
  The FTP implementation was missing a timestamp reset point, making the
  waiting for responses after sending a post-transfer "QUOTE" command not
  working as supposedly. This bug was introduced in 7.20.0

- [Jeff Pohlmeyer brought this change]

  remote-header-name: chop filename at next semicolon
  
  The --remote-header-name option for the command-line tool assumes that
  everything beyond the filename= field is part of the filename, but that
  might not always be the case, for example:
  
  Content-Disposition: attachment; filename=file.txt; modification-date=...
  
  This fix chops the filename off at the next semicolon, if there is one.

- --retry: access violation with URL part sets continued
  
  When getting multiple URLs, curl didn't properly reset the byte counter
  after a successful transfer so if the subsequent transfer failed it
  would wrongly use the previous byte counter and behave badly (segfault)
  because of that. The code assumes that the byte counter and the 'stream'
  pointer is well in synch.
  
  Reported by: Jon Sargeant
  Bug: http://curl.haxx.se/bug/view.cgi?id=3028241

- releasnote: synch up with commit f3b77e5611d

- [Constantine Sapuntzakis brought this change]

  examples: add curl_multi_timeout
  
  Make the multi-interface using examples use curl_multi_timeout to
  properly educate users how to do things.

- configure: document the STATICLIB variable

- [Constantine Sapuntzakis brought this change]

  multi: fix condition that remove timers before trigger
  
  curl_multi perform has two phases: run through every easy handle calling
  multi_runsingle and remove expired timers (timer removal).
  
  If a small timer (e.g. 1-10ms) is set during multi_runsingle, then it's
  possible that the timer has passed by when the timer removal runs. The
  timer which was just added is then removed. This will potentially cause
  the timer list to be empty and cause the next call to curl_multi_timeout
  to return -1. Ideally, curl_multi_timeout should return 0 in this case.
  
  One way to fix this is to move the struct timeval now = Curl_tvnow(); to
  the top of curl_multi_perform. The change does that.

- [Constantine Sapuntzakis brought this change]

  threaded resolver: fix timeout issue
  
  Reset old timer first so we can set a new one further in the future.

- configure: allow environments variable to override internals
  
  configure checks for grep, egrep, sed and ar and set the variables GREP,
  EGREP, SED and AR accordingly. We now let already set variables override
  the internal choices to let users make decisions when they know the
  right choice already. This is a regression as our configure script used
  to allow this back before commit 0b57c475 (up to 7.18.2).
  
  Reported by: "kdekker"
  Bug: http://curl.haxx.se/bug/view.cgi?id=3028318

Dan Fandrich (9 Jul 2010)
- Improved the Android build instructions

Daniel Stenberg (7 Jul 2010)
- [Tor Arntsen brought this change]

  upload: Avoid infinite loop when checking for auth bits
  
  The test would loop forever if authtype bit 0 wasn't set.

- upload: warn users trying to upload from stdin with anyauth
  
  Since uploading from stdin is very likely to not work with anyauth and
  its multi-phase probing for what authentication to actually use, alert
  the user about it. Multi-phase negotiate almost certainly will involve
  sending data and thus libcurl will need to rewind the stream to send
  again, and it cannot do that with stdin.

- http: don't enable chunked during authentication negotiations
  
  As mentioned in bug report #2956968, the HTTP code wouldn't send the
  first empty chunk during the auth negotiation phase of the HTTP request
  sending, so the server would wait for data to come and libcurl would
  wait for data to arrive... I've made the code not enable chunked
  encoding until the auth negotiation is done and thus this scenario
  doesn't occur anymore.
  
  Reported by: Sidney San Martn
  Bug: http://curl.haxx.se/bug/view.cgi?id=2956968

- --libcurl: list the tricky options instead of using [REMARK]
  
  I think the [REMARK] and commented function calls cluttered the code a
  bit too much and made the generated code ugly to read. Now we instead
  track the remarks one specially and just lists them at the end of the
  generated code more as additional information.

- curl: avoid setting libcurl options to its default
  
  it makes the --libcurl output easier to follow.

- --libcurl: hide setopt() calls setting default options
  
  And additionally, don't show function or object pointers actual value
  since they make no sense to anyone. Show 'functionpointer' and
  'objectpointer' instead.

- --libcurl: use *_LARGE options with typecasted constants
  
  In the generated code --libcurl makes, all calls to curl_easy_setopt()
  that use *_LARGE options now have the value typecasted to curl_off_t, so
  that it works correctly for 32bit systems with 64bit curl_off_t type.

- multi: CURLINFO_LASTSOCKET doesn't work after remove_handle
  
  When curl_multi_remove_handle() is called and an easy handle is returned
  to the connection cache held in the multi handle, then we cannot allow
  CURLINFO_LASTSOCKET to extract it since that will more or less encourage
  that the user uses the socket while it can get used by libcurl again.
  
  Without this fix, we'd get a segfault in Curl_getconnectinfo() trying to
  dereference the NULL pointer in 'data->state.connc'.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3023840

- [Pierre Joye brought this change]

  build: add enable IPV6 option for the VC makefiles

- FAQ: the threaded resolver works universally now

Kamil Dudka (30 Jun 2010)
- http_ntlm: add support for NSS
  
  When configured with '--without-ssl --with-nss', NTLM authentication
  now uses NSS crypto library for MD5 and DES.  For MD4 we have a local
  implementation in that case.  More details are available at
  https://bugzilla.redhat.com/603783
  
  In order to get it working, curl_global_init() must be called with
  CURL_GLOBAL_SSL or CURL_GLOBAL_ALL.  That's necessary because NSS needs
  to be initialized globally and we do so only when the NSS library is
  actually required by protocol.  The mentioned call of curl_global_init()
  is responsible for creating of the initialization mutex.
  
  There was also slightly changed the NSS initialization scenario, in
  particular, loading of the NSS PEM module.  It used to be loaded always
  right after the NSS library was initialized.  Now the library is
  initialized as soon as any SSL or NTLM is required, while the PEM module
  is prevented from being loaded until the SSL is actually required.

Daniel Stenberg (29 Jun 2010)
- glob: backslash escaping bug
  
  curl didn't properly handle escaping characters in a URL with the use of
  backslash. It did an attempt, but that failed as reported in bug
  3022551. The described example was using the URL
  "http://example.com?{AB,C\,D}".
  
  I've now removed the special-handling of letters following the backslash
  and I also removed the bad extra check that triggered this particular
  bug.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3022551
  Reported by: Jon Sargeant

- release-notes: sync up with recent commits

- CONTRIBUTE: the git commit message line length is 72 columns

- [Pavel Raiskup brought this change]

  ftp wildcard: FTP LIST parser FIX
  
  There was a problem when a UNIX-like server returned information
  about directory size (total NNNNNN) at the first line of
  response.

- [Pavel Raiskup brought this change]

  examples: new FTP wildcard showcase

- multi_socket: re-use of same socket without notifying app
  
  When a hostname resolves to multiple IP addresses and the first one
  tried doesn't work, the socket for the second attempt may get dropped on
  the floor, causing the request to eventually time out. The issue is that
  when using kqueue (as on mac and bsd platforms) instead of select, the
  kernel removes the first fd from kqueue when it is closed (in trynextip,
  connect.c:503). Trynextip() then goes on to open a new socket, which
  gets assigned the same number as the one it just closed. Later in
  multi.c, socket_cb is not called because the fd is already in
  multi->sockhash, so the new socket is never added to kqueue.
  
  The correct fix is to ensure that socket_cb is called to remove the fd
  when trynextip() closes the socket, and again to re-add it after
  singleipsocket(). I'm not sure how to cleanly do that, but the attached
  patch works around the problem in an admittedly kludgy way by delaying
  the close to ensure that the newly-opened socket gets a different fd.
  
  Daniel's added comment: I didn't spot a way to easily do a nicer fix so
  I've proceeded with Ben's patch.
  
  Bug: http://curl.haxx.se/bug/view.cgi?id=3017819
  Patch by: Ben Darnell

Kamil Dudka (24 Jun 2010)
- [Pavel Raiskup brought this change]

  ftp-wildcard: avoid tight loop when used without any pattern
  
  It was broken for URLs like "ftp://example.com/".

Daniel Stenberg (21 Jun 2010)
- maketgz: produce CHANGES automatically with the 1000 most recent commits
  
  It passes the git log output through 'log2changes.pl' to produce
  the lot.

- ignore: CHANGES.dist gets generated by maketgz

- CHANGES: move all contents from CHANGES to CHANGES.0
  
  CHANGES is no longer used for manually edited content. It is to
  be generated automatically by maketgz when we make release
  tarballs.

- log2changes: correct command line, fix tag usage, change Version output
  
  --decorate=full is needed with my git 1.7.1 to get the necessary
  output so that the previous edit would work to extract the
  Version stuff.
  
  ... but I had to edit how the refs/tags was extracted since it
  had a little flaw that made it miss the 7.20.1 output.
  
  Finally, I changed so that Version is outputted even more similar
  to how CHANGES does it.

Dan Fandrich (21 Jun 2010)
- Make the output of log2changes.pl even more closely match CHANGES
  
  Add the ASCII art header, and list version commits by decoding
  the ref tag names, when available (using the git log --decorate
  option).

Daniel Stenberg (19 Jun 2010)
- log2changes: first version of the git log to CHANGES conversion script
  
  $ git log --pretty=fuller --no-color --date=short | ./log2changes.pl
  
  Of course, limiting the log output with a range like with
  "[tag]..HEAD" appended can be very useful too.

- sendrecv: treat all negative values from send/recv as errors
  
  For example the libssh2 based functions return other negative
  values than -1 to signal errors and it is important that we catch
  them properly. Right before this, various failures from libssh2
  were treated as negative download amounts which caused havoc.

- multi: prevent NULL pointer dereference
  
  My additional call to Curl_pgrsUpdate() would sometimes get
  called even though there's no connection (left) so a NULL pointer
  would get passed, causing a segfault.

- smtp: fixed a few uses of size_t that seemed to believe it was signed
  
  Reported-by: Steven M. Schweda

Dan Fandrich (17 Jun 2010)
- Fixed an OOM memory leak in the FTP wildcard code

Kamil Dudka (17 Jun 2010)
- test575: do not fail with threaded DNS resolver

Daniel Stenberg (17 Jun 2010)
- [Krister Johansen brought this change]

  multi: unmark handle as used when no longer head of pipeline

- multi: call the progress function only once and allow abort
  
  1) no need to call the progress function twice when in the
  CURLM_STATE_TOOFAST state.
  
  2) Make sure that the progress callback's return code is
  acknowledged when used

- multi: call the progress callback in all states
  
  As long as no error is reported, the progress function can get
  called. This may be a little TOO often so we should keep an eye
  on this and possibly make this conditional somehow.

- configure: spell --disable-threaded-resolver correctly
  
  Previously we only accepted the option when named
  --disable-threaded-resover, which wasn't quite intended.
  
  Reported by: Helwing Lutz

- release: start on 7.21.1, bump contributor count

- version: start working on the 7.21.1-dev version

- THANKS: added contributors from the 7.21.0 release

Version 7.21.0 (16 Jun 2010)

Daniel Stenberg (16 Jun 2010)
- release: 7.21.0

Yang Tse (10 Jun 2010)
- remove unused 'tmpdata' and 'backup' ftp_parselist_data struct members

- replace isprint() with ISPRINT()

- ensure that Curl_wildcard_dtor() leaves WildcardData struct zero initialized

Patrick Monnerat (9 Jun 2010)
- ILE/RPG binding updated to current curl.h definitions.

Yang Tse (9 Jun 2010)
- code simplification

- add Curl_ prefix to conform with cURL naming standards

- Merge branch 'master' of git@github.com:bagder/curl

- fix compiler warning using curl_socket_t to store socket descriptor

Daniel Stenberg (8 Jun 2010)
- inet_pton: warnings: use size_t to store pointer deltas

Yang Tse (8 Jun 2010)
- avoid redundant work when reusing same connection

- fix function result checking

Daniel Stenberg (8 Jun 2010)
- transfer: warning: implicit conversion
  
  There is an implicit conversion from "unsigned long" to "long";
  rounding, sign extension, or loss of accuracy may result.
  
  Fixed by an added typecast.

- TFTP: fix compiler warning
  
  Curl_fillreadbuffer()'s second argument takes an int, so
  typecasting to another is a bad idea.

- TFTP: fix warning for sendto() usage on non-POSIX systems
  
  Older unixes want an 'int' instead of 'size_t' as the 3rd
  argumment so before this change it would cause warnings such as:
  
  There is an implicit conversion from "unsigned long" to "int";
  rounding, sign extension, or loss of accuracy may result.

Dan Fandrich (7 Jun 2010)
- Include Makefile.inc to get the list of source files for Amiga
  
  Signed-off-by: Diego Casorran <dcasorran@gmail.com>

Yang Tse (7 Jun 2010)
- Curl_updateconninfo() error handling fix

Daniel Stenberg (5 Jun 2010)
- [Constantine Sapuntzakis brought this change]

  OpenSSL: fix spurious SSL connection aborts
  
  Was seeing spurious SSL connection aborts using libcurl and
  OpenSSL. I tracked it down to uncleared error state on the
  OpenSSL error stack - patch attached deals with that.
  
  Rough idea of problem:
  
  Code that uses libcurl calls some library that uses OpenSSL but
  don't clear the OpenSSL error stack after an error.
  
  ssluse.c calls SSL_read which eventually gets an EWOULDBLOCK from
  the OS. Returns -1 to indicate an error
  
  ssluse.c calls SSL_get_error. First thing, SSL_get_error calls
  ERR_get_error to check the OpenSSL error stack, finds an old
  error and returns SSL_ERROR_SSL instead of SSL_ERROR_WANT_READ or
  SSL_ERROR_WANT_WRITE.
  
  ssluse.c returns an error and aborts the connection
  
  Solution:
  
  Clear the openssl error stack before calling SSL_* operation if
  we're going to call SSL_get_error afterwards.
  
  Notes:
  
  This is much more likely to happen with multi because it's easier
  to intersperse other calls to the OpenSSL library in the same
  thread.

Yang Tse (5 Jun 2010)
- replace socklen_t with curl_socklen_t

Daniel Stenberg (5 Jun 2010)
- [Frank Meier brought this change]

  getinfo: added *_PRIMARY_PORT, *_LOCAL_IP and *_LOCAL_PORT

- RELEASE-NOTES: add contributors not mentioned

Yang Tse (4 Jun 2010)
- Enable OpenLDAP support for cygwin builds.
  
  Enable OpenLDAP support for cygwin builds. This support was disabled back
  in 2008 due to incompatibilities between OpenSSL and OpenLDAP headers.
  cygwin's OpenSSL 0.9.8l and OpenLDAP 2.3.43 versions on cygwin 1.5.25
  allow building an OpenLDAP enabled libcurl supporting back to Windows 95.
  
  Remove non-functional CURL_LDAP_HYBRID code and references.

Kamil Dudka (2 Jun 2010)
- ftplistparser.c: oops, fix typo in the last commit

- ftplistparser.c: avoid some invalid dereferences

- lib: eliminate some dead code

Daniel Stenberg (2 Jun 2010)
- SSH: corrected the inability to respect the timeout
  
  Jason McDonald posted bug report #3006786 when he found that the
  SFTP code didn't timeout properly in several places in the code
  even if a timeout was set properly.
  
  Based on his suggested patch, I wrote a different implementation
  that I think addressed the issue better and also uses the connect
  timeout for the initial part of the SSH/SFTP done during the
  "protocol connect" phase.
  
  (http://curl.haxx.se/bug/view.cgi?id=3006786)

Yang Tse (2 Jun 2010)
- mention last changes

- add missing new files to non-configure target build files

- include libcurl standard internal headers

Daniel Stenberg (2 Jun 2010)
- TODO: add multi interface improvement remove ldap select

Yang Tse (2 Jun 2010)
- make setup.h first included file

- fix spnego memory leak

- openldap header inclusions fix

Daniel Stenberg (1 Jun 2010)
- multi_socket: handles timer inaccuracy better for timeouts
  
  Igor Novoseltsev reported a problem with the multi socket API and
  using timeouts and timers. It boiled down to a problem with
  libcurl's use of GetTickCount() interally to figure out the
  current time, while Igor's own application code used another
  function call.
  
  It made his app call the socket API timeout function a bit
  _before_ libcurl would consider the timeout to trigger, and that
  could easily lead to timeouts or stalls in the app. It seems
  GetTickCount() in general often has no better resolution than
  16ms and switching to the alternative function
  QueryPerformanceCounter has its share of problems:
  http://www.virtualdub.org/blog/pivot/entry.php?id=106
  
  We address this problem by simply having libcurl treat timers
  that already has occured or will occur within 40ms subject for
  treatment. I'm confident that there are other implementations and
  operating systems with similarly in accurate timer functions so
  it makes sense to have applied generically and I don't believe we
  sacrifice much by adding a 40ms inaccuracy on these timeouts.

Yang Tse (1 Jun 2010)
- fix ldaps option issue

- fix ldap related compilation issues

- fix compiler warning: enumerated type mixed with another type

- fix compiler warning: enumerated type mixed with another type

Patrick Monnerat (31 May 2010)
- smtp_authenticate: avoid compiler warnings

Yang Tse (31 May 2010)
- fix compiler warning: enumerated type mixed with another type

- fix compiler warning: enumerated type mixed with another type

- fix compiler warning: enumerated type mixed with another type

- fix compiler warning: external declaration in primary source file

- fix compiler warning: variable was set but never used

- fix compiler warning: enumerated type mixed with another type

- fix compiler warning: external declaration in primary source file

- update year in copyright notice

Kamil Dudka (29 May 2010)
- strtoofft: rename CURL_LLONG_MIN -> CURL_OFF_T_MIN
  
  ... and CURL_LLONG_MAX -> CURL_OFF_T_MAX

- CURL_LLONG_MAX: avoid constant overflow
  
  ... when (CURL_SIZEOF_CURL_OFF_T == 4)

Daniel Stenberg (28 May 2010)
- [Howard Chu brought this change]

  LDAPS: list availability depending on SSL's presence

- [Howard Chu brought this change]

  LDAP: make it build without SSL if no such support is available
  
  of course it also goes for the case where SSL is explicitly
  disabled

- TODO: removed fixed items
  
  These two items are now actually implemented:
  
  11.1 Content-Disposition
  11.5 ftp wildcard download

Kamil Dudka (28 May 2010)
- lib: eliminate 'statement not reached' warnings

Daniel Stenberg (28 May 2010)
- test1115: verify that unexpected 1xx responses work fine

Kamil Dudka (28 May 2010)
- lib577: avoid redefinition of ERROR

- test313: a new test for CRL support

- tests/certs: re-generated because of lost pass-phrase

- tests/certs/scripts: generate also CRL
  
  ... and make it possible to do so without any user interaction

Daniel Stenberg (27 May 2010)
- [Howard Chu brought this change]

  openldap: fix compiler warnings

- indent: some whitespace edits

Kamil Dudka (27 May 2010)
- wildcard.c: add missing include of "setup.h"

- [Tor Arntsen brought this change]

  lib573: do not compare double for exact match

- [Pavel Raiskup brought this change]

  wildcard.c: add missing include of "curl_memory.h"

- [Tor Arntsen brought this change]

  setup_once: use enum type for 'bool' on non-C99 platforms
  
  An enum will catch non-bool assignments to bool on platforms with
  a strict compiler, e.g MIPSPro.
  
  Signed-off-by: Kamil Dudka <kdudka@redhat.com>

- url.c: avoid implied cast to bool

- [Tor Arntsen brought this change]

  curl_fnmatch: remove use of register keyword
  
  Using the 'register' keyword rarely improves anything with modern
  compilers and architectures.

Daniel Stenberg (26 May 2010)
- [Julien Chaffraix brought this change]

  RTMP: Fix compiler warnings

- [Julien Chaffraix brought this change]

  OOM fixes in http_negociate.c and lib/splay.c
  
  Fix 2 OOM errors: a missing NULL-check in lib/http_negociate.c
  and a potential NULL dereferencing in lib/splay.c

- [Howard Chu brought this change]

  LDAP: properly implemented as a curl_handler
  
  makes the LDAP code much cleaner, nicer and in general being a
  better libcurl citizen. If a new enough OpenLDAP version is
  detect, the new and shiny lib/openldap.c code is then used
  instead of the old cruft
  
  Code by Howard, minor cleanups by Daniel.

- [Tor Arntsen brought this change]

  curl_fnmatch: Use int not bool when function returns int
  
  bool in curl internals is unsigned char and should not be used
  to receive return value from functions returning int - this fails
  when using IBM VisualAge and Tru64 compilers.

- TFTP: send legal timeout value
  
  Eric Mertens posted bug #3003705: when we made TFTP use the
  correct timeout option when sent to the server (fixed May 18th
  2010) it became obvious that libcurl used invalid timeout values
  (300 by default while the RFC allows nothing above 255). While of
  course it is obvious that as TFTP has worked thus far without
  being able to set timeout at all, just removing the setting
  wouldn't make any difference in behavior. I decided to still keep
  it (but fix the problem) as it now actually allows for easier
  (future) customization of the timeout.
  
  (http://curl.haxx.se/bug/view.cgi?id=3003705)

- TFTP: don't ack if wrong block num is received
  
  If an unexpected block number was received, break out of the
  switch loop.

- TFTP: block id wrap bug fix
  
  In a normal expression, doing [unsigned short] + 1 will not wrap
  at 16 bits so the comparisons and outputs were done wrong. I
  added a macro do make sure it gets done right.
  
  Douglas Kilpatrick filed bug report #3004787 about it:
  http://curl.haxx.se/bug/view.cgi?id=3004787

- [Ben Greear brought this change]

  Fix build warnings.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Ben Greear brought this change]

  setopt: Fix setting of set.is_fwrite_set
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Tanguy Fautre brought this change]

  build: allow curl to build with Microsoft VC10
  
  By undefing a bunch of E* defines that VC10 has started to define
  but that we redefine internally to their WSA* alternatives when
  building for Windows.

Kamil Dudka (20 May 2010)
- [Tor Arntsen brought this change]

  Test 573: Use correct type for CURLINFO_CONNECT_TIME
  
  curl_easy_getinfo() called with a pointer to long instead of double
  would sigbus on RISC processors (e.g. MIPS) due to wrong alignment
  of pointer address.

- [Tor Arntsen brought this change]

  lib: Fix AIX build failure

Dan Fandrich (19 May 2010)
- Fixed some memory leaks in the POP3 torture tests

- Fixed a memory leak in the SMTP torture tests

Daniel Stenberg (18 May 2010)
- TFTP: send timeout option correctly
  
  Eric Mertens posted bug report #3003005 pointing out that the
  libcurl TFTP code was not sending the timeout option properly to
  the server, and suggested a fix.
  
  (http://curl.haxx.se/bug/view.cgi?id=3003005)

Kamil Dudka (16 May 2010)
- [Tor Arntsen brought this change]

  lib: Change some CRLF line endings to LF
  
  An update had added a couple of lines with DOS line endings,
  and some compilers will choke on that (e.g. the Tru64 compiler).

- ftp wildcard: a new option CURLOPT_FNMATCH_DATA

Daniel Stenberg (15 May 2010)
- [Howard Chu brought this change]

  RMTP: the version code is now rtmp aware

- [Howard Chu brought this change]

  RTMP: fix wrong #ifdef

- [Pavel Raiskup brought this change]

  ftp wildcard: fix int32_t and size/group mixups

Dan Fandrich (14 May 2010)
- Fixed test 577 to work when --enable-hidden-symbols is configured

Daniel Stenberg (14 May 2010)
- OpenSSL: multi interface handshake could hang
  
  John-Mark Bell filed bug #3000052 that identified a problem (with
  an associated patch) with the OpenSSL handshake state machine
  when the multi interface is used:
  
  Performing an https request using a curl multi handle and using
  select or epoll to wait for events results in a hang. It appears
  that the cause is the fix for bug #2958179, which makes
  ossl_connect_common unconditionally return from the step 2 loop
  when fetching from a multi handle.
  
  When ossl_connect_step2 has completed, it updates
  connssl->connecting_state to ssl_connect_3. ossl_connect_common
  will then return to the caller, as a multi handle is in
  use. Eventually, the client code will call curl_multi_fdset to
  obtain an updated fdset to select or epoll on. For https
  requests, curl_multi_fdset will cause https_getsock to be called.
  https_getsock will only return a socket handle if the
  connecting_state is ssl_connect_2_reading or
  ssl_connect_2_writing.  Therefore, the client will never obtain a
  valid fdset, and thus not drive the multi handle, resulting in a
  hang.
  
  (http://curl.haxx.se/bug/view.cgi?id=3000052)

- changelog: add link to bug report

Dan Fandrich (14 May 2010)
- Added directories.pm to the source tar ball

Daniel Stenberg (14 May 2010)
- follow redirect: ignore response-body on redirect even if compressed
  
  Sebastian V reported bug #3000056 identifying a problem with
  redirect following. It showed that when curl followed redirects
  it didn't properly ignore the response body of the 30X response
  if that response was using compressed Content-Encoding!
  
  (http://curl.haxx.se/bug/view.cgi?id=3000056)

- version: we're now going for 7.21.0

- [Hoi-Ho Chan brought this change]

  Remove support for BSD version of PolarSSL
  
  "The BSD version of PolarSSL was made for migratory purposes only and is not
  maintained. The GPL version of PolarSSL is actually the only actively
  developed version, so I would be very reluctant to use the BSD version." /
  Paul Bakker, PolarSSL hacker.
  
  Signed-off-by: Hoi-Ho Chan <hoiho.chan@gmail.com>

Dan Fandrich (12 May 2010)
- Added Polar SSL and RTMP files to the non-autoconf build files
  
  I didn't bother with a few that have little hope of running the required
  dependent libraries.

- Added the new ftp source files to the non-autoconf build files

- Copy the license file so it's seen by the Android build system

Daniel Stenberg (13 May 2010)
- updated with symbols added in recent commits for 7.21.0

- changelogs: mention RTMP and the FTP wildcard support

- ftp wildcards: mention they're added in 7.21.0

- style: minor whitespace change

- syntax: cleanups

- [Pavel Raiskup brought this change]

  FTP: WILDCARDMATCH/CHUNKING/FNMATCH added

- [Howard Chu brought this change]

  RTMP: initial support added, powered by librtmp
  
  librtmp is found at http://rtmpdump.mplayerhq.hu/

- [Howard Chu brought this change]

  sendrecv: make them two pairs of send/recv to properly deal with FTPS
  
  FTP(S) use two connections that can be set to different recv and
  send functions independently, so by introducing recv+send pairs
  in the same manner we already have sockets/connections we can
  work with FTPS fine.
  
  This commit fixes the FTPS regression introduced in change d64bd82.

Kamil Dudka (11 May 2010)
- changelog: fixed CRL support in libcurl-NSS

- nss: make it possible to read ASCII and DER CRL

- nss: add CRL to cache instead of read-only NSS db

Daniel Stenberg (10 May 2010)
- git: how to write a fine commit message

- findtool: file name as a full path requires a slash
  
  Kalle Vahlman's patch applied a while ago broke how the findtool
  function searches for tools, as it would always check if "$file"
  was present first, which thus made the bad assumption that a file
  in the current directory would be a match.
  
  I noticed when it found 'libtool' in the current directory but
  libtoolize is not there, which confused the script.

Hacki (8 May 2010)
- moved vars into conditional since seems that winsock implementation doesnt use them.

Daniel Stenberg (7 May 2010)
- multi interface: missed storing connection time
  
  Dirk Manske reported a regression. When connecting with the multi
  interface, there were situations where libcurl wouldn't store
  connect time correctly as it used to (and is documented to) do.
  
  Using his fine sample program we could repeat it, and I wrote up
  test case 573 using that code. The problem does not easily show
  itself using the local test suite though.
  
  The fix, also as suggested by Dirk, is a bit on the ugly side as
  it adds yet another call to Curl_verboseconnect() and setting the
  TIMER_CONNECT time.  That situation is subject for some closer
  inspection in the future.

- verboseconnect: so the verbose checking within the function
  
  As the function is used more than once and libcurl can be built
  without it, do the conditional check within the verboseconnect()
  function itself.

- changelogs: split the I/O handling

- [Howard Chu brought this change]

  sendrecv: split the I/O handling into private handler
  
  Howard Chu brought the bulk work of this patch that properly
  moves out the sending and recving of data to the parts of the
  code that are properly responsible for the various ways of doing
  so.
  
  Daniel Stenberg assisted with polishing a few bits and fixed some
  minor flaws in the original patch.
  
  Another upside of this patch is that we now abuse CURLcodes less
  with the "magic" -1 return codes and instead use CURLE_AGAIN more
  consistently.

- changelog: PolarSSL

- [Hoi-Ho Chan brought this change]

  PolarSSL: initial support added
  
  This is Hoi-Ho Chan's patch with some minor fixes by me. There
  are some potential issues in this, but none worse than we can
  sort out on the list and over time.

- TODO: we've done PRET already, consider HOST for the future
  
  ... and GnuTLS connects are non-blocking, TFTP is better
  integrated as a "real" protocol and RTSP is supported.

- TODO: GnuTLS connects are now non-blocking
  
  Since commit c288860 by Jerome Vouillon

- INTERNALS: tftp is decent now, ldap is not
  
  It's not quite fair to list TFTP is a "crappy" member of the
  libcurl family so I removed its mentioning.

- changelog: mention Ben Greear's telnet work

- [Ben Greear brought this change]

  telnet: Allow programatic use of telnet.
  
  The main change is to allow input from user-specified methods,
  when they are specified with CURLOPT_READFUNCTION.
  All calls to fflush(stdout) in telnet.c were removed, which makes
  using 'curl telnet://foo.com' painful since prompts and other data
  are not always returned to the user promptly.  Use
  'curl --no-buffer telnet://foo.com' instead.  In general,
  the user should have their CURLOPT_WRITEFUNCTION do a fflush
  for interactive use.
  
  Also fix assumption that reading from stdin never returns < 0.
  Old code could crash in that case.
  
  Call progress functions in telnet main loop.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- test: enable valgrind for 604, seems to work

Kamil Dudka (28 Apr 2010)
- [Paul Howarth brought this change]

  add 1s post-command delay to tests 513 and 514
  
  addressing http://curl.haxx.se/mail/lib-2009-12/0031.html

Daniel Stenberg (26 Apr 2010)
- [Kalle Vahlman brought this change]

  Allow tools to be defined with full path in buildconf
  
  This is required in Scratchbox where
  LIBTOOL=/targets/links/arch_tools/bin/libtool
  is set in the environment.

- progress callback: can be called more than once per sec

- SSH: init and cleanup libssh2 in global_init/cleanup
  
  The necessary libssh2 functions require libssh2 1.2.5 or later.

- new configure option --enable-threaded-resolver

- configure: check for libssh2_init and libssh2_exit

Kamil Dudka (24 Apr 2010)
- nss: fix SSL handshake timeout underflow

Guenter Knauf (24 Apr 2010)
- encourage users to take latest lib dependencies.

Daniel Stenberg (24 Apr 2010)
- socks5: please static code analyzer
  
  Make sure we don't call memcpy() if the argument is NULL even
  though we also passed a zero length then, as the clang analyzer
  whined and we want to limit warnings (even false positives) when
  they're this easy to fix.
  
  The change of (char) to (unsigned char) will fix long user names
  and passwords on systems that have the char type signed by
  default.

- gzip: Value stored to 'data' is never read

- RELEASE-NOTES: update top numbers

- changelog: added the --proto and -proto-redir options

- [Alex Bligh brought this change]

  curl: added --proto and --proto-redir
  
  --proto tells curl to use the listed protocols for its initial
  retrieval
  
  --proto-redir tells curl to use the listed protocols after a
  redirect

Kamil Dudka (24 Apr 2010)
- test536: do not fail with threaded DNS resolver
  
  Also tweaked comments in certain examples using curl_multi_fdset().

Daniel Stenberg (21 Apr 2010)
- curl: -O crash on windows
  
  The -O option caused curl to crash on windows and DOS due to the
  tool writing out of boundary memory.

Yang Tse (20 Apr 2010)
- hmac.c related compilation adjustment

- hmac.c related compilation adjustment

monnerat (20 Apr 2010)
- Add compilation directives for hmac in Watcom,riscos and vc6 platform-specific makefiles.

Yang Tse (20 Apr 2010)
- [Ruslan Gazizov brought this change]

  replaced wsock32.lib usage with ws2_32.lib in MSVC makefiles

monnerat (19 Apr 2010)
- Merge branch 'master' of github.com:bagder/curl

- Remove null-effect leftover code.

Daniel Stenberg (19 Apr 2010)
- changelog: -J/--remote-header-name strips CRLF

- parse_filename: strip trailing CRs and LFs
  
  The feature that uses the file name given in a
  Content-disposition: header didn't properly skip trailing
  carriage returns and linefeed characters from the end of the file
  name when it was given without quotes.

- Curl_HMAC_MD5: fix the array init to not warn with picky compilers

monnerat (19 Apr 2010)
- Fix GnuTLS compilation problem in md5.c

- Fix compilation problem: declare Curl_HMAC_MD5 as extern in include file.

- Merge branch 'master' of github.com:bagder/curl

- Implement SMTP authentication

Daniel Stenberg (17 Apr 2010)
- parseconfig: Value stored to 'line' is never read
  
  Make the function call with (void) as we don't care about the
  return code.

- parsedate: Value stored to 'found' is never read

- check_gzip_header: Value stored to 'data' is never read

- dprintf_formatf: Value stored to 'left' is never read

- curl_version: remove superfluous assignments

- FTP PORT: Value stored to 'rc' is never read

- Curl_setup_transfer: no longer returns anything
  
  This function could only return CURLE_OK and by changing it to
  a void instead, we can simplify code all over.

- PASV response: Value stored to 'rc' is never read

- Curl_perform: Value stored to 'res2' is never read

- sftp range: remove unnecessary check for NULL pointer

- ftp_range: remove unnecessary check for NULL pointer

- file_range: remove unnecessary check for NULL pointer

- SOCKS4: Value stored to 'rc' is never read

- FTP PASV: Value stored to 'rc' is never read

- ftp_range: Value stored to 'totalsize' is never read
  
  Simplified the code by removing a local variable completely.

- SOCKS5: when name resolves fail return immediately
  
  This makes the code flow more obvious and reacts on the return
  code properly, even if the code acted the same way before.

- POP3: when USER command fails, don't even try PASS

- tftp_rx: Value stored to 'sbytes' is never read

- file_range: Value stored to 'totalsize' is never read

- changelog: GnuTLS: SSL handshake phase is non-blocking

- [Jerome Vouillon brought this change]

  GnuTLS: make the connection phase non-blocking
  
  When multi interface is used, the SSL handshake is no longer
  blocking when GnuTLS is used.

- krb5_auth: fix my previous change to compile

unknown (16 Apr 2010)
- OS400 version V5R2M0 not supported anymore by IBM: default target release changed to V5R3M0.

Daniel Stenberg (16 Apr 2010)
- changelog: GnuTLS fix, no reverse loopkups and fixed GSS detection

- SSL_RECV: EOF is not an error here
  
  The recent overhaul of the SSL recv function made this treat a
  zero returned from gnutls_record_recv() as an error, and this
  caused our HTTPS test cases to fail. We leave it to upper layer
  code to detect if an EOF is a problem or not.

- [Paul Howarth brought this change]

  configure: GSSAPI detection on ancient Linux distros
  
  On some ancient distributions such as RHEL-3, <gssapi/gssapi_krb5.h> needs
  to be processed after <gssapi/gssapi.h>, but does not include it itself.
  This patch checks for <gssapi/gssapi.h> first and then includes it
  in the test for <gssapi/gssapi_krb5.h>, resolving the problem.
  
  Without the patch, <gssapi/gssapi_krb5.h> is "present but cannot be
  compiled".

- resolvers: no more using AI_CANONNAME
  
  No resolver anymore needs to use AI_CANONNAME and do reverse
  lookups.  We should work hard to avoid having code that relies on
  it.

- KRB5: use given host name instead of reverse lookup'ed name
  
  This code would previously use dns_entry->addr->ai_canonname
  instead of the given host name, which caused us grief and
  problems since not all our resolver options do the reverse lookup
  and I would also guess that it caused problems with KRB5/GSS with
  virtual name-based hosts. Now the host name from the URL is used.

Dan Fandrich (15 Apr 2010)
- Remove redundant conditional

- Eliminated an unlikely race condition in some tests.
  
  Based on a patch from the FreeBSD ports by Peter Pentchev.

Daniel Stenberg (15 Apr 2010)
- changelog: prevent needless reverse name lookups

- Curl_ipv4_resolve_r: only set AI_CANONNAME when needed
  
  As reported in bug report #2987196, the code for ipv6 already did
  the setting of this bit correctly so we copied that logic into
  the Curl_ipv4_resolve_r() function as well. KRB code is the only
  code we know that might need the cannonical name so only resolve
  it for such requests!

- IGNORE: files generated by maketgz

- bumped to start the journey towards 7.20.2

- added contributors from the 7.20.1 RELEASE-NOTES

- ignore files generated by 'maketgz'

Version 7.20.1 (14 Apr 2010)

Daniel Stenberg (14 Apr 2010)
- 7.20.1: 14 April 2010

Guenter Knauf (13 Apr 2010)
- Use correct directory for c-ares git pull
  Signed-off-by: Tor Arntsen <tor@spacetec.no>

Yang Tse (13 Apr 2010)
- fix compiler warning: variable might be clobbered by longjmp or vfork

Guenter Knauf (13 Apr 2010)
- added last git commit output for c-ares too.

- changed the git update block to take care of c-ares repo if detected.

- updated timestamp of the script.

- removed obsolete var in gitpull() function
  no need to create a var - lets just return the status var itself.

- added a cast to silent compiler warning with 64bit systems.

- fixed a path typo in src/Makefile.netware.

Daniel Stenberg (12 Apr 2010)
- Added text for How To Make a Patch with git

- update the section on timeouts
  
  The section that describes how to work with timeouts was
  misleading and could easily trick users to use the wrong API.

- update URL and cut out wrong info on ipv6
  
  c-ares has had its own URL for a while and we should point
  people to that. It also works with IPv6 since a long time.

- refer to CURLMOPT_TIMERFUNCTION for multi_socket users
  
  curl_multi_timeout(3) is simply the wrong function to use
  if you're using the multi_socket API and this document now
  states this pretty clearly to help guiding users.

- s/CVS/git

- modified to use the git file, not cvs
  
  I've done this blindly, and the last piece that works with ares
  should possibly be done differently now that c-ares isn't a
  subtree within the curl tree anymore...

- mention missing test servers for <server>

- FTP quote commands prefixed with '*' now can fail without aborting
  
  Prefixing the FTP quote commands with an asterisk really only
  worked for the postquote actions. This is now fixed and test case
  227 has been extended to verify.

Kamil Dudka (7 Apr 2010)
- qssl: reflect recent code changes in SSL interface
  
  Reported by Guenter Knauf.

- nss: handle client certificate related errors

- [Ben Greear brought this change]

  ssl: Fix build when SSL isn't enabled
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- refactorize interface of Curl_ssl_recv/Curl_ssl_send

- simplify code of Curl_resolv_timeout()

- eliminate a race condition in Curl_resolv_timeout()

Daniel Stenberg (2 Apr 2010)
- [Ben Greear brought this change]

  fixed compiler warnings

- updated contributor count

- add contributors from the 7.20.0 release notes

- fix SFTP download hang
  
  Matt Wixson found and fixed a bug in the SCP/SFTP area where the
  code treated a 0 return code from libssh2 to be the same as
  EAGAIN while in reality it isn't. The problem caused a hang in
  SFTP transfers from a MessageWay server.

Dan Fandrich (31 Mar 2010)
- Fixed misleading test message

Daniel Stenberg (31 Mar 2010)
- update the generic copyright year range

- removed README.cmake due to the improved situation

Guenter Knauf (31 Mar 2010)
- fix compiler warning with a cast.

- make folks use latest available dependent libraries.

Dan Fandrich (30 Mar 2010)
- Call curl_global_cleanup() in test 560 to avoid a memory leak

- Allow test 538 to run even when proxy support is disabled

Daniel Stenberg (29 Mar 2010)
- use (s)size_t for string lengths to fix compiler warns

- use size_t to hold string length
  
  using int is not fine on 64bit systems

- [Ben Greear brought this change]

  Fix compile warnings in ssh.c
  
  strlen() returns size_t, but ssh libraries are wanting 'unsigned int'.  Add
  explicit casts and use _ex versions of the ssh library calls.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- [Ben Greear brought this change]

  fix smtp compile warning
  
  Use ssize_t instead of int for the Curl_smtp_escape_eob nread
  argument.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- Ben's POP3 change

- [Ben Greear brought this change]

  pop3: Get message listing if no mailbox in URL
  
  If you pass a URL to pop3 that does not contain a message ID as
  part of the URL, it will currently ask for 'INBOX' which just
  causes the pop3 server to return an error.
  
  The change makes libcurl treat en empty message ID as a request
  for LIST (list of pop3 message IDs).  User's code could then
  parse this and download individual messages as desired.

- [Ben Greear brought this change]

  Allow running ./tests/testcurl.pl from within git repo.
  
  My first instinct was to run the test script within the checked out
  repository.  This small change to the script allows that to work as
  expected.
  
  Signed-off-by: Ben Greear <greearb@candelatech.com>

- minor language fix

- [Ben Greear brought this change]

  allow user+password in the URL for all protocols
  
  Ben Greear brought a patch that from now on allows all protocols
  to specify name and user within the URL, in the same manner HTTP
  and FTP have been allowed to in the past - although far from all
  of the libcurl supported protocols actually have that feature in
  their URL definition spec.

- ignore pid files and stunnel.conf
  
  all used while running tests

- make sure git pull is actually done!

- changelogged: smoother rate limiting

- [Ben Greear brought this change]

  Make rate-limitation logic smoother
  
  This gives a smoother rate limitation performance by using
  sub-second pauses and also taking the buffer sizes into
  account.

- remove all .cvsignore files

- PROT_CLOSEACTION should not include TFTP
  
  TFTP is not a protocol that uses close actions so it should
  not be set in that bitmask!

- [Tor Arntsen brought this change]

  Avoid double newline for the 'last commits' log in testcurl.pl
  
  The backtick command which extracts 'git log' lines come with a
  newline, so chomp the newline before calling logit(), as the logit
  function adds a newline by itself.

- [Tor Arntsen brought this change]

  Change to version-independent git option for 'git log --oneline'
  
  'git log --oneline' is a relatively recent Git function. It is
  documented to be the same as 'git log --pretty=oneline --abbrev-commit',
  so use that instead. It works all the way back to Git 1.5.0.

- show 5 commits even if no git pull was made

- don't touch ares/aclocal.m4 and show recent git commits
  
  since c-ares no longer embedded, we must not touch such files
  anymore
  
  we show the 5 last git commits if git was proven in use, to help
  us see exactly what's being tested

- use CURL_SIZEOF_LONG instead of SIZEOF_LONG
  
  That's the symbol we have or generate in include/curl/curlbuild.h

- s/CVS/DEV in the version string from the git repo

Bill Hoffman (24 Mar 2010)
- Merge branch 'master' of github.com:bagder/curl

- Add .gitattributes files to turn off CRLF translation for some files

Daniel Stenberg (24 Mar 2010)
- provide a version number as today's date
  
  It should at least help visualize which autobuilds that are
  using this script.

- testcurl now uses git instead of CVS

Bill Hoffman (24 Mar 2010)
- Merge branch 'master' of github.com:bagder/curl

- Enable LDAP by default since it is now disabled when ldap.h is not found,

- CMake fixes for Linux.
  
  Make sure <sys/socket.h> is included if around when testing/using
  socklen_t.  Also, disable LDAP if LDAP_H is not found on the system.

Daniel Stenberg (24 Mar 2010)
- [Bob Richmond brought this change]

  fix: timeout after last data chunk was handled
  
  Bob Richmond: There's an annoying situation where libcurl will
  read new HTTP response data from a socket, then check if it's a
  timeout if one is set. If the last packet received constitutes
  the end of the response body, libcurl still treats it as a
  timeout condition and reports a message like:
  
  "Operation timed out after 3000 milliseconds with 876 out of 876
  bytes received"
  
  It should only a timeout if the timer lapsed and we DIDN'T
  receive the end of the response body yet.

- avoid compiler warning without USE_ALARM_TIMEOUT

Bill Hoffman (24 Mar 2010)
- Fix curl CMake build.
  
  This commit fixes the cmake build of curl, and cleans up the
  cmake code a little.  It removes some commented out code and
  some trailing whitespace.  To get curl to build the binary
  tree include/curl directory needed to be added to the include
  path. Also, SIZEOF_SHORT needed to be added.  A check for the
  lack of defines of SIZEOF_* for warnless.c was added.

Daniel Stenberg (24 Mar 2010)
- [Chris Conroy brought this change]

  remove debug printfs

- RTSP GET_PARAMETER fix
  
  Christopher Conroy fixed a problem with RTSP and GET_PARAMETER
  reported to us by Massimo Callegari. There's a new test case 572
  that verifies this now.

- remove trace of CVS

- [Chris Conroy brought this change]

  Fix RTSP GET_PARAMETER empty and non-empty operation.
  
  Test coverage included. Thanks to Massimo Callegari for the bug report

- s/CVS/DEV/ in the version string for repo versions

- scrapped all left-over TODOs
  
  In order to get back on track, I've removed all the plans for
  stuff I had in the queue. I will instead focus on fixing bugs and
  relying on that people who truly want things added will come back
  on the mailing list and nag and provide patches.
  
  7.20.1 should be possible to release in April 2010

- restore executable bits on some files

- remove the CVSish $Id$ lines

- The 'ares' subtree has been removed from the source repository

- s/CVS/git

- update to current state

- remove the ares subtree
  
  c-ares is now hosted entirely separate from the curl project
  see http://c-ares.haxx.se/ for all details concerning c-ares,
  its source repository and more.

- mark connection as connected
  
  Kenny To filed the bug report #2963679 with patch to fix a
  problem he experienced with doing multi interface HTTP POST over
  a proxy using PROXYTUNNEL. He found a case where it would connect
  fine but bits.tcpconnect was not set correct so libcurl didn't
  work properly.
  
  (http://curl.haxx.se/bug/view.cgi?id=2963679)

- enabled valgrind
  
  I ran it now successfully and it helped to pinpoint a libssh2
  memory leak!

Dan Fandrich (23 Mar 2010)
- Updated Symbian notes

Daniel Stenberg (23 Mar 2010)
- chunked-encoding with Content-Length: header problem
  
  Akos Pasztory filed debian bug report #572276
  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=572276
  mentioning a problem with a resource that returns chunked-encoded
  _and_ with a Content-Length and libcurl failed to properly ignore
  the latter information.

- delayed easy handle kill caused double Curl_close() call
  
  Hauke Duden provided an example program that made the multi
  interface crash.  His example simply used the multi interface and
  did first one FTP transfer and after completion it used a second
  easy handle and did another FTP transfer on the same FTP server.
  
  This triggered a bug in the "delayed easy handle kill" system
  that curl uses: when an FTP connection is left alive it must keep
  an easy handle around internally - only for the purpose of having
  an easy handle when it later disconnects it. The code assumed
  that when the easy handle was removed and an internal reference
  was made, that version could be killed later on when a new easy
  handle came using the same connection. This was wrong as Hauke's
  example showed that the removed handle wasn't killed for real
  until later. This caused a double close attempt => segfault.

- ignore more files generated when tests run in the source tree

- Thomas Lopatic fixed the alarm()-based DNS timeout

- [Thomas Lopatic brought this change]

  fix the alarm()-based DNS timeout
  
  Looking at the code of Curl_resolv_timeout() in hostip.c, I think
  that in case of a timeout, the signal handler for SIGALRM never
  gets removed. I think that in my case it gets executed at some
  point later on when execution has long left Curl_resolv_timeout()
  or even the cURL library.
  
  The code that is jumped to with siglongjmp() simply sets the
  error message to "name lookup timed out" and then returns with
  CURLRESOLV_ERROR. I guess that instead of simply returning
  without cleaning up, the code should have a goto that jumps to
  the spot right after the call to Curl_resolv().

- [Daniel Johnson brought this change]

  Fix warnings for clang

- Merge branch 'master' of github.com:bagder/curl

Kamil Dudka (22 Mar 2010)
- [douglas steinwand brought this change]

  Fix insufficient initialization in Curl_clone_ssl_config()
  
  which could have caused a double free when reusing curl handle.

Daniel Stenberg (22 Mar 2010)
- we never used this file anyway

- s/CVS/git

- various changes of CVS to git

- remove references to CVS in the code and use DEV instead

- Ben Greear's two fixes explained

- [Ben Greear brought this change]

  Fix tftp return codes and tsize upload handling
  
  Error codes were not properly returned to the main curl code (and on to apps
  using libcurl).
  
  tftp was crapping out when tsize == 0 on upload, but I see no reason to fail
  to upload just because the remote file is zero-length.  Ignore tsize option on
  upload.

- more files to ignore

- provide an initial set of .gitignore files

Kamil Dudka (19 Mar 2010)
- - Improved Curl_read() to not ignore the error returned from Curl_ssl_recv().

Daniel Stenberg (18 Mar 2010)
- fix warning about conversions between curl_off_t and long

Yang Tse (18 Mar 2010)
- another shot at the ftp_init() icc 9.1 optimizer issue

- replaced intel compiler option -no-ansi-alias with -fno-strict-aliasing

- update outdated serial number

Dan Fandrich (16 Mar 2010)
- Factored out some code into a few independent functions

Daniel Stenberg (15 Mar 2010)
- - Constantine Sapuntzakis brought a patch:
  
    The problem mentioned on Dec 10 2009
    (http://curl.haxx.se/bug/view.cgi?id=2905220) was only partially fixed.
    Partially because an easy handle can be associated with many connections in
    the cache (e.g. if there is a redirect during the lifetime of the easy
    handle).  The previous patch only cleaned up the first one. The new fix now
    removes the easy handle from all connections, not just the first one.

Yang Tse (11 Mar 2010)
- fix compiler warning

Dan Fandrich (11 Mar 2010)
- SSL should now be working out-of-the-box on Symbian S60.

- Enable Symbian zlib support by default.

- Allow compilation even when OpenSSL has been configured without MD4 support.

- A few Symbian build changes

Yang Tse (9 Mar 2010)
- watt32 compilation fix

Daniel Stenberg (6 Mar 2010)
- - Ben Greear brought a patch that fixed the rate limiting logic for TFTP when
    the easy interface was used.

- indent fix by Ben Greear, I removed some braces for single-line conditional
  expressions

Yang Tse (6 Mar 2010)
- Added another VS10 version string

- fix line break

- removed usage of 's6_addr', fixing compilation issue triggered with no
  longer using 'in6_addr' but only our 'ares_in6_addr' struct

Daniel Stenberg (5 Mar 2010)
- Daniel Johnson provided fixes for building with the clang compiler

Yang Tse (5 Mar 2010)
- Added IPv6 name servers support

Gisle Vanem (5 Mar 2010)
- Ops!. Readded ares_nowarn.h.

- Added ares_nowarn.c.

Yang Tse (5 Mar 2010)
- Constantine Sapuntzakis detected and fixed a double free in builds done
  with threaded resolver enabled (Windows default configuration) that would
  get triggered when a curl handle is closed while doing DNS resolution.

- Added SIZEOF_INT and SIZEOF_SHORT definitions for VMS configuration file

Daniel Stenberg (4 Mar 2010)
- Julien Chaffraix clarified CURLOPT_HEADERFUNCTION and made
  CURLOPT_HEADERFUNCTION and CURLOPT_WRITEFUNCTION more consistent

- - [Daniel Johnson] I've been trying to build libcurl with clang on Darwin and
    ran into some issues with the GSSAPI tests in configure.ac. The tests first
    try to determine the include dirs and libs and set CPPFLAGS and LIBS
    accordingly. It then checks for the headers and finally sets LIBS a second
    time, causing the libs to be included twice. The first setting of LIBS seems
    redundant and should be left out, since the first part is otherwise just
    about finding headers.
  
    My second issue is that 'krb5-config --libs gssapi' on Darwin is less than
    useless and returns junk that, while it happens to work with gcc, causes
    clang to choke. For example, --libs returns $CFLAGS along with the libs,
    which is really retarded. Simply setting 'LIBS="$LIBS -lgssapi_krb5
    -lresolv"' on Darwin is sufficient.

- - Based on patch provided by Jacob Moshenko, the transfer logic now properly
    makes sure that when using sub-second timeouts, there's no final bad 1000ms
    wait. Previously, a sub-second timeout would often make the elapsed time end
    up the time rounded up to the nearest second (e.g. 1s for 200ms timeout)

- update the generic copyright year range to include 2010

- - Andrei Benea filed bug report #2956698 and pointed out that the
    CURLOPT_CERTINFO feature leaked memory due to a missing OpenSSL function
    call. He provided the patch to fix it too.
  
    http://curl.haxx.se/bug/view.cgi?id=2956698

- - Markus Duft pointed out in bug #2961796 that even though Interix has a
    poll() function it doesn't quite work the way we want it so we must disable
    it, and he also provided a patch for it.
  
    http://curl.haxx.se/bug/view.cgi?id=2961796

- - Made the pingpong timeout code properly deal with the response timeout AND
    the global timeout if set. Also, as was reported in the bug report #2956437
    by Ryan Chan, the time stamp to use as basis for the per command timeout was
    not set properly in the DONE phase for FTP (and not for SMTP) so I fixed
    that just now. This was a regression compared to 7.19.7 due to the
    conversion of FTP code over to the generic pingpong concepts.
  
    http://curl.haxx.se/bug/view.cgi?id=2956437

- remove assignment never used

- - Ben Greear provided an update for TFTP that fixes upload.

- SSL, not SSH, SSL

- - Wesley Miaw reported bug #2958179 which identified a case of looping during
    OpenSSL based SSL handshaking even though the multi interface was used and
    there was no good reason for it.
  
    http://curl.haxx.se/bug/view.cgi?id=2958179

Yang Tse (28 Feb 2010)
- Added SIZEOF_INT and SIZEOF_SHORT definitions for non-configure systems

- Added ares_nowarn.* to VC6 project file

Daniel Stenberg (26 Feb 2010)
- spellchecked by Stphane Fillod

- - Pat Ray in bug #2958474 pointed out an off-by-one case when receiving a
    chunked-encoding trailer.
  
    http://curl.haxx.se/bug/view.cgi?id=2958474

Dan Fandrich (26 Feb 2010)
- Fixed a couple of out of memory leaks and a segfault in the IMAP code.

Yang Tse (26 Feb 2010)
- fix sizeof short

- Added SIZEOF_INT and SIZEOF_SHORT definitions for non-configure systems

- Added SIZEOF_INT definition

- fix compiler warning

- fix compiler warning

- fix compiler warning

Dan Fandrich (25 Feb 2010)
- Fixed a couple of out of memory leaks and a segfault in the SMTP code.

Yang Tse (25 Feb 2010)
- fix file name

- Fixed bug report #2958074 indicating
  (http://curl.haxx.se/bug/view.cgi?id=2958074) that curl on Windows with
  option --trace-time did not use local time when timestamping trace lines.
  This could also happen on other systems depending on time souurce.

- enable 802 and 803

- fix compiler warning

- fix compiler warning

- fix compiler warning

- fix socket data type

- fix socket data type and logging format in debug tracking socket functions

- convert Curl_ultous() and Curl_ultouc() functions to curlx_ultous() and
  curlx_ultouc(), exposing them through curlx.h to allow proper code reuse
  later in our test harness.

- updated sources

Patrick Monnerat (22 Feb 2010)
- _ Adjusted RFC821 HELO fallback and enabled test804

- - Proper handling of STARTTLS on SMTP, taking CURLUSESSL_TRY into account.
  - SMTP falls back to RFC821 HELO when EHLO fails (and SSL is not required).
  - Use of true local host name (i.e.: via gethostname()) when available, as default argument to SMTP HELO/EHLO.
  - Test case 804 for HELO fallback.

Yang Tse (22 Feb 2010)
- add header inclusion

- fix compiler warning

- fix compiler warning

Daniel Stenberg (21 Feb 2010)
- clarify more details on section "2.1 More non-blocking"

- TFTP transfers are not blocking since 7.20.0

- - Fixed the SMTP compliance by making sure RCPT TO addresses are specified
    properly in angle brackets. Recipients provided with CURLOPT_MAIL_RCPT now
    get angle bracket wrapping automatically by libcurl unless the recipient
    starts with an angle bracket as then the app is assumed to deal with that
    properly on its own.

- - I made the SMTP code expect a 250 response back from the server after the
    full DATA has been sent, and I modified the test SMTP server to also send
    that response. As usual, the DONE operation that is made after a completed
    transfer is still not doable in a non-blocking way so this waiting for 250
    is unfortunately made blockingly.

- corected a comment and wrapped a few longish lines

Yang Tse (20 Feb 2010)
- fix compiler warning

- fix compiler warning

- fix compiler warning

- fix compiler warning

- fix compiler warning

Daniel Stenberg (17 Feb 2010)
- ares_reinit()
  
  - To allow an app to force a re-read of /etc/resolv.conf etc, pretty much
    like the res_init() resolver function offers

- use curl standard indentation and line lengths

Yang Tse (16 Feb 2010)
- replaced tabs with spaces

- fix Content-Length validation

Daniel Stenberg (15 Feb 2010)
- use (void) in front of fwrite() calls that ignore the return code

Yang Tse (15 Feb 2010)
- fix compiler warning: conversion from "long" to "size_t" may lose sign

- fix compiler warning: conversion from "long" to "size_t" may lose sign

Daniel Stenberg (15 Feb 2010)
- -w speed_download and speed_upload are measured in bytes per second

- 75. NTLM authentication involving unicode user name or password.
    http://curl.haxx.se/mail/lib-2009-10/0024.html
    http://curl.haxx.se/bug/view.cgi?id=2944325

Yang Tse (14 Feb 2010)
- removed trailing whitespace

- fix compiler warning

- Overhauled test suite getpart() function. Fixing potential out of bounds
  stack and memory overwrites triggered with huge test case definitions.

Daniel Stenberg (13 Feb 2010)
- - Martin Hager reported and fixed a problem with a missing quote in libcurl.m4
  
    (http://curl.haxx.se/bug/view.cgi?id=2951319)

Gunter Knauf (13 Feb 2010)
- used allways #ifdef / #ifndef;
  moved gethostbyname_thread() to #else case to avoid 'not used' compiler warning.

- replaced tabs by spaces, removed trailing tabs/spaces.

Daniel Stenberg (13 Feb 2010)
- - Tom Donovan fixed the CURL_FORMAT_* defines when building with cmake.

- - Jack Zhang reported a problem with SMTP: we wrongly used multiple addresses
    in the same RCPT TO line, when they should be sent in separate single
    commands. I updated test case 802 to verify this.
  
  - I also fixed a bad use of my_setopt_str() of CURLOPT_MAIL_RCPT in the curl
    tool which made it try to output it as string for the --libcurl feature
    which could lead to crashes.

- CURLOPT_MAIL_RCPT is *not* a string so we must not try to printf() it

- free --mail-from strings properly

Patrick Monnerat (11 Feb 2010)
- _ Make it compilable again on OS400.
  _ Upgrade OS400 EBCDIC wrappers for new options.
  _ Upgrade ILE/RPG bindings to current state.

Yang Tse (11 Feb 2010)
- mention last changes

- Steven M. Schweda updated VMS readme file

- Steven M. Schweda removed batch_compile.com and defines.com

- Steven M. Schweda fixed:
  
  VMS builder bad behavior when used in a batch job.
  
  Various ".LIS" and ".MAP" files created without being requested
  by a "LIST" command-line option, and in the wrong place, too.
  
  Some minor typographical changes.

Dan Fandrich (10 Feb 2010)
- Mention the minimum size of CURL_MAX_WRITE_SIZE

Yang Tse (10 Feb 2010)
- - remove extra "\r\n" from doc404_RTSP
  
  - avoid memory alignment issue when setting RTSP packet length

Dan Fandrich (9 Feb 2010)
- Removed some erroneous "compressed" key words

Daniel Stenberg (9 Feb 2010)
- start working on 7.20.1

Version 7.20.0 (9 Feb 2010)

Daniel Stenberg (9 Feb 2010)
- spell and 7.20.0

- - When downloading compressed content over HTTP and the app as asked libcurl
    to automatically uncompress it with the CURLOPT_ENCODING option, libcurl
    could wrongly provide the callback with more data than what the maximum
    documented amount. An application could thus get tricked into badness if the
    maximum limit was trusted to be enforced by libcurl itself (as it is
    documented).
  
    This is further detailed and explained in the libcurl security advisory
    20100209 at
  
      http://curl.haxx.se/docs/adv_20100209.html

- set VERSIONINFO accordingly for the 7.20.0 release

Yang Tse (6 Feb 2010)
- warning fix

- OOM handling fix

- OOM handling fix

- fix compiler warning

- fix compiler warning

- fix compiler warning

- Addes OOM handling for curl_easy_setopt() calls in test

- - avoid OpenSSL 0.9.8 ENGINE_by_id memory leak
  
  - cleanup parenthesis usage in return statements

- - attempt to workaround icc 9.1 optimizer issue

- fix printf-style format strings

- Validate server port argument

- Fix variable initialization

- Modified test case 557 to additionally verify libcurl's internal curl_m*printf()
  functions formatting functionality when handling signed and unsigned shorts.

- Added size check for 'short' data type

- Fix compiler warning: unused variable

- added an additional second to allow test to pass on heavily loaded servers

Dan Fandrich (3 Feb 2010)
- Changed the Watcom makefiles to make them easier to keep in sync with
  Makefile.inc since that can't be included directly.

Daniel Stenberg (3 Feb 2010)
- more symbols added in 7.20.0

Yang Tse (3 Feb 2010)
- Fix OOM handling

- Fix progressmode Configurable struct member data type. Changed to
  'int' which fits better with existing CURL_PROGRESS_* definitions.

- Fix portability issue related with unaligned memory access

- Fix compiler warnings: conversion from 'const int ' to 'unsigned char ', possible loss of data

- cookies with same path length might get sorted in different order when
  using different qsort implementations. In order to make this test give
  same results on different systems, paths now have different lengths.

- added an additional second to allow test to pass on heavily loaded servers

- Fix compiler warning: conditional expression is constant

- Fix compiler warning: local variable may be used without having been initialized.

- Fix compiler warnings: conversion from 'const int ' to 'unsigned char ', possible loss of data

- Fix compiler warnings:
  
  (1) conversion from 'const int ' to 'unsigned char ', possible loss of data
  (2) conditional expression is constant

- mention a couple of changes back from November

- mention run time statistics options

- - Symbol CURL_FORMAT_OFF_T now obsoleted, will be removed in a future release,
    symbol will not be available when building with CURL_NO_OLDIES defined. Use
    of CURL_FORMAT_CURL_OFF_T is preferred since 7.19.0

- avoid possibility of using obsoleted stuff

- remove setup.h inclusion which is already done from test.h inclusion

Kamil Dudka (2 Feb 2010)
- mention SOCKS related problems in the curl(1) man page

Yang Tse (2 Feb 2010)
- Fix compiler warning: variable was set but never used
  
  Simplify preprocessor symbol checking

Daniel Stenberg (2 Feb 2010)
- Julien Chaffraix pointed out a comment mistake, and I re-indented the code
  slightly while editing

Yang Tse (2 Feb 2010)
- include headers

- Conroy added a check to the coded message size since the docs stipulate
  that each call will contain a full protocol packet.

- Conroy's fix to make the code match with the RTP documentation regarding
  writing out the whole header. The docs say it writes the whole header,
  but the code (before this patch) did not write out the leading $.

Daniel Stenberg (1 Feb 2010)
- We introduce a loop in lib/multi.c around all calls to multi_runsingle() and
  simply check for CURLM_CALL_MULTI_PERFORM internally. This has the added
  benefit that this goes in line with my long-term wishes to get rid of the
  CURLM_CALL_MULTI_PERFORM all together from the public API.

Yang Tse (1 Feb 2010)
- update rtsp server header field from SWS to RTSPD

- Test suite support for RTSP

- Make Curl_pop3_write() additionally truncate trailing POP3_EOB from received
  string buffer, otherwise Curl_client_write() call with zero size would write
  to the end of string buffer including matched POP3_EOB.

- WIN32 fix, _beginthreadex() may return either 0 or -1L upon failure

- fix errno usage for WIN32 builds

- fix printf-style format strings

- Chris Conroy fixed test #568 issues with carriage returns

- RTSP followup fix. Both the pipelined and non-pipelined case need to
  check for (excess > 0 && !k->ignorebody).

Daniel Stenberg (28 Jan 2010)
- - Tommie Gannert pointed out a silly bug in ares_process_fd() since it didn't
    check for broken connections like ares_process() did. Based on that, I
    merged the two functions into a single generic one with two front-ends.

Yang Tse (28 Jan 2010)
- fix printf-style format strings

- Use 'size_t' for GETNAMEINFO_TYPE_ARG2 definition for VMS.
  
  http://curl.haxx.se/mail/lib-2009-12/0293.html

- portability fix

- fix printf-style format strings

- Known bug #64 fixed by Constantine Sapuntzakis and Joshua Kwan in 7.20.0

- Chris Conroy provided first RTSP tests

- RTSP tests disabled until test harness RTSP support is updated

- Chris Conroy's RTSP followup fixes

- mention asynchronous DNS lookups enhancements

- Restore normal operation:
  
    c-ares is only enabled when specifically requested.
  
    Consequently, c-ares default setting is disabled.

- fix c-ares assumed check being skipped

- fix compiler warning

- fix LDFLAGS preservation in CURL_CHECK_LIB_ARES

Daniel Stenberg (26 Jan 2010)
- no need to take precautiono for how things were before 7.16.0 since that
  is now a very long time ago

- - Mike Crowe made libcurl return CURLE_COULDNT_RESOLVE_PROXY when it is the
    proxy that cannot be resolved when using c-ares. This matches the behaviour
    when not using c-ares.

Dan Fandrich (26 Jan 2010)
- Added curl_threads.c to a few more non-configure build files

Yang Tse (26 Jan 2010)
- minor fixes for --enable-ares configure option

Daniel Stenberg (26 Jan 2010)
- Andre Guibert de Bruet improved the libssh2 error code translation

Yang Tse (26 Jan 2010)
- resolver selection for non-configure Windows builds, default is threaded DNS

- add curl_threads.c to non-configure target build files

- onstantine Sapuntzakis threaded resolver enhancements

- Constantine Sapuntzakis threaded resolver enhancements

- Constantine Sapuntzakis provided initial thread abstraction layer

- make Curl_handler_*_proxy definition static

Dan Fandrich (25 Jan 2010)
- Updated minimum library sizes

Yang Tse (25 Jan 2010)
- fix compiler warning

Daniel Stenberg (24 Jan 2010)
- Julien Chaffraix corrected bad #elif lines to silence warnings

Yang Tse (24 Jan 2010)
- HAVE_GETADDRINFO_THREADSAFE definition for non-configure win32 builds

Bjorn Stenberg (23 Jan 2010)
- Mention -J change

- Added -J/--remote-header-name.

Daniel Stenberg (23 Jan 2010)
- "remove progress meter from libcurl" at next API break

Yang Tse (23 Jan 2010)
- add inclusion of curl_memory.h

- adjust preprocessor symbol definition check relative to resolver specialty

- PKTSIZE might have been already defined in arpa/tftp.h

Dan Fandrich (23 Jan 2010)
- Include "curl_memory.h" to get the strdup replacement when necessary

Daniel Stenberg (22 Jan 2010)
- wrap long lines and do some indent policing

Yang Tse (22 Jan 2010)
- Definitions of resolver specialty compile-time defines CURLRES_* moved
  from hostip.h to setup.h in order to allow proper inclusion in any file.
  
  This represents no functional change at all in which resolver is used,
  everything still works as usual, internally and externally there is no
  difference in behavior.

- adjust rtsp protocol support in curl-config and libcurl.pc when http is disabled

- deal with the possibility that CURL_DISABLE_RTSP may already be defined

- fix compiler warning: statement is unreachable

- fix compilation when http is disabled

- disabling of rtsp when http isn't enabled required here for non-configure systems

Daniel Stenberg (22 Jan 2010)
- wrap long lines, remove (very old) attribution from code

- cleanups by Julien Chaffraix

- alphabetically sort the list of supported protocols

- In spite claiming to tbe disabled by default, RTSP is enabled and it now
  also says so. I also made the list of protocols get sorted.

- expanded to provide info about the newer protocols too

- s/RTPFUNCTION/INTERLEAVEFUNCTION/
  s/RTPDATA/INTERLEAVEDATA/

- keep lines shorter than 80 columns, and reduce/remove the use of the word
  'note' in most description as it is mostly useless.

Yang Tse (22 Jan 2010)
- Julien Chaffraix adjusted "<name> section" line length

- Constantine Sapuntzakis refactoring of async callbacks, allowing
  removal of Curl_addrinfo_copy(), Curl_addrinfo6_callback(), and
  Curl_addrinfo4_callback()

Dan Fandrich (21 Jan 2010)
- Added rtsp.c to the non-configure target build files

Yang Tse (21 Jan 2010)
- fix compiler warning

- make tftp_translate_code() static, it is only used from within tftp.c

- fix warning triggered when debugging on cygwin

- allow exporting of exe_ext() sub

- improve displaylogcontent() sub fixing a warning

Daniel Stenberg (21 Jan 2010)
- remove typedef we ended up not using

- Chris Conroy brought support for RTSP transfers, and with it comes 8(!) new
  libcurl options for controlling what to get and how to receive posssibly
  interleaved RTP data. Initial commit.

- Julien Chaffraix fixed line lengths

- Julien Chaffraix removed an old obsolete typedef

- Yun Fu pointed out a flaw in the loop that checks handles, and I indented
  the code more curl-style

- "5.3 Sort outgoing cookies" removed, we now sort them

Yang Tse (20 Jan 2010)
- SIGTERM is the signal to trap here, SIGKILL can't be caught.

- Use killsockfilters() to kill sockfilter processes, this ensures that when
  killing a sockfilter process the actual PID from the pid file is used and
  not the one returned by open2() which might be different.

- Allow killsockfilters() to take a 5th optional parameter that when provided
  indicates that only one of the two possible sockfilter processes should be
  killed.  Valid values for this parameter are 'main' and 'data'.

- Use delete() to unset environment variables instead of assigning undef which
  generates warning 'Use of uninitialized value in scalar assignment' with perl
  versions older than 5.10

- Adjust valgrind logs file name detection.
  
  Adjust environment vars setting and restoring from test definition.
  
  Avoid using strftime in torture sub.

Daniel Stenberg (20 Jan 2010)
- modified test case 8 to also make sure that we deal with cookies using
  identical names but different paths properly

- - As was pointed out on the http-state mailing list, the order of cookies in a
    HTTP Cookie: header _needs_ to be sorted on the path length in the cases
    where two cookies using the same name are set more than once using
    (overlapping) paths. Realizing this, identically named cookies must be
    sorted correctly. But detecting only identically named cookies and take care
    of them individually is harder than just to blindly and unconditionally sort
    all cookies based on their path lengths. All major browsers also already do
    this, so this makes our behavior one step closer to them in the cookie area.
  
    Test case 8 was the only one that broke due to this change and I updated it
    accordingly.

- oops, I forgot to cvs add this before my previous commit (Dan Fandrich
  pointed it out to me)

- - David McCreedy brought a fix and a new test case (129) to make libcurl work
    again when downloading files over FTP using ASCII and it turns out that the
    final size of the file is not the same as the initial size the server
    reported. This is very common since servers don't take the newline
    conversions into account.

- "260 - IMAP, POP3 and SMTP support" done!

- avoid "Use of uninitialized value $l in concatenation"

Yang Tse (19 Jan 2010)
- Fail harder when curl coredumps trying to verify http and ftp servers.
  
  Add some debug messages to see what's going on with valgrind logs.

- prevent %runcert hash growth when clearing items

- update copyright year notice

- Constantine Sapuntzakis enhancements to make memory tracking log file writing
  of messages atomic, on systems where an fwrite of a memory buffer is atomic.

Dan Fandrich (18 Jan 2010)
- Added PEM certificate keyword

Yang Tse (18 Jan 2010)
- fix warnings

- Stop ssl running server when cert file currently used by server is
  different than the one specified in test definition for same server

- fix warnings

- - Remove QD restarting of https servers. Proper fixing required.
    This will make tests 310 311 and 312 fail while fixing.
  
  - Remove some debug messages

- make verifyhttp use different file names depending on server characteristics

- add serverfactors() sub which returns server characterization factors

- fix warnings

- fix warnings

- fix warnings

- add some debug messages

- use servername_id() from serverhelp.pm

- refactored stopping of test harness servers

- Store now this file in CVS with unix line endings.
  
  maketgz already converts this file to DOS style with an awk filter.

- Declaration of $sshdlog is done in sshhelp.pm

- Start using the centralized pidfile and logfile name generation
  subroutines for ssh and socks test suite servers.

Dan Fandrich (15 Jan 2010)
- Added the new protocol source files to the non-autoconf build files

Yang Tse (14 Jan 2010)
- Squeeze slack time when killing more than one server from
  the <killserver> section of test harness definition files.

Kamil Dudka (14 Jan 2010)
- - Suppressed side effect of OpenSSL configure checks, which prevented NSS from
    being properly detected under certain circumstances. It had been caused by
    strange behavior of pkg-config when handling PKG_CONFIG_LIBDIR. pkg-config
    distinguishes among empty and non-existent environment variable in that case.

Yang Tse (13 Jan 2010)
- Give the test a bit mote time to run so it passes on slow machines

Kamil Dudka (13 Jan 2010)
- remove trailing spaces from configure.ac

Yang Tse (12 Jan 2010)
- Added test case #1112 which does an FTPS download with strict timeout
  and slow data transfer in a similar way as test case #1086 does for FTP.
  
  This also exercises <killserver> section for the FTPS server.

- Make runtests.pl actually support any (valid) server specification
  for the <killserver> section of test harness definition files.

- Fix tftp and sftp supported protocols in servername_str()

- Make sockfilter kill messages look alike server ones

- Adjust vor VPATH builds

Daniel Stenberg (11 Jan 2010)
- - Gil Weber reported a peculiar flaw with the multi interface when doing SFTP
    transfers: curl_multi_fdset() would return -1 and not set and file
    descriptors several times during a transfer of a single file. It turned out
    to be due to two different flaws now fixed. Gil's excellent recipe helped me
    nail this.

- ssh_statemach_act() is now modified to loop over the switch() to perform as
  much as possible in one go, as long as it doesn't block and hasn't reached the
  end of the state machine.
  This avoids spurious -1 returns from curl_multi_fdset() simply because
  previously it would return from this function without anything in EWOUDLBLOCK
  and thus basically it wasn't actually waiting for anything!!

- After the TCP connect is confirmed in CURLM_STATE_WAITCONNECT and it changes
  state, we return CURLM_CALL_MULTI_PERFORM unconditionally then so that we
  can act faster like in the case the protocol-specific connect doesn't block
  on anything and we can just persue on the next action immediately. It also
  then avoids a case where curl_multi_fdset() would return -1.

- progress callback called repeatedly during slow connects

- - Made sure that the progress callback is repeatedly called at a regular
    interval even during very slow connects.

- - The tests/runtests.pl script now checks to see if the test case that runs is
    present in the tests/data/Makefile.am and outputs a notice message on the
    screen if not. Each test file has to be included in that Makefile.am to get
    included in release archives and forgetting to add files there is a common
    mistake. This is an attempt to make it harder to forget.

Yang Tse (11 Jan 2010)
- secureserver.pl is now the test harness script used for SSL/TLS.

- secureserver.pl is now the test harness script used for SSL/TLS.
  
  Start using the centralized pidfile and logfile name generation
  subroutines for https and ftps test suite servers.

- Update error message to include port number

- Previous commit adjustments

- Start using the centralized pidfile and logfile name generation
  subroutines for ftp, pop3, imap and smtp test suite servers.

Daniel Stenberg (9 Jan 2010)
- struct Curl_sh_entry's 'inuse' member was no longer used and is now removed

- - Johan van Selst found and fixed a OpenSSL session ref count leak:
  
    ossl_connect_step3() increments an SSL session handle reference counter on
    each call. When sessions are re-used this reference counter may be
    incremented many times, but it will be decremented only once when done (by
    Curl_ossl_session_free()); and the internal OpenSSL data will not be freed
    if this reference count remains positive. When a session is re-used the
    reference counter should be corrected by explicitly calling
    SSL_SESSION_free() after each consecutive SSL_get1_session() to avoid
    introducing a memory leak.
  
    (http://curl.haxx.se/bug/view.cgi?id=2926284)

Yang Tse (8 Jan 2010)
- Start using the centralized pidfile and logfile name generation
  subroutines for http and tftp test suite servers.

- Remove extra line feed

- Use '_stunnel.log' ending also for https test server log

- sws and tftpd command line option naming adjustments

Daniel Stenberg (7 Jan 2010)
- removed a parameter from the Curl_http_readwrite_headers() prototype to remove
  the need for the struct forward declaration from http.h which caused problems
  with gcc 2.96 and quite frankly the parameter wasn't necessary anyway

Claes Jakobsson (7 Jan 2010)
- List fragment tests in Makefile.am and better provide better names

Daniel Stenberg (7 Jan 2010)
- removed Curl_http_header_append() prototype as it isn't used anymore, the
  function was moved to http.c and was made static and renamed

- - Make sure the progress callback is called repeatedly even during very slow
    name resolves when c-ares is used for resolving.

Yang Tse (6 Jan 2010)
- Disable tests 802 and 803

- Prevent detection of stdint.h on IRIX systems, even when available.
  
  IRIX MIPSpro 7.4 C++ compiler does not tolerate inclusion of stdint.h

Claes Jakobsson (6 Jan 2010)
- Julien Chaffraix fixed so that the fragment part in an URL is not sent to the server anymore

Daniel Stenberg (4 Jan 2010)
- use the modern name for this option

Kamil Dudka (3 Jan 2010)
- - Julien Chaffraix eliminated a duplicated initialization in singlesocket().

Daniel Stenberg (2 Jan 2010)
- - Make curl support --ssl and --ssl-reqd instead of the previous FTP-specific
    versions --ftp-ssl and --ftp-ssl-reqd as these options are now used to
    control SSL/TLS for IMAP, POP3 and SMTP as well in addition to FTP. The old
    option names are still working but the new ones are the prefered ones
    (listed and documented).

- stop at once if the EOB marker shows up, even if something else might get
  sent afterwards

- update copyright year since we are in 2010 now

- added CURLOPT_FTP_USE_PRET

- - Ingmar Runge enhanced libcurl's FTP engine to support the PRET command. This
    command is a special "hack" used by the drftpd server, but even though it is
    a custom extension I've deemed it fine to add to libcurl since this server
    seems to survive and people keep using it and want libcurl to support
    it. The new libcurl option is named CURLOPT_FTP_USE_PRET, and it is also
    usable from the curl tool with --ftp-pret. Using this option on a server
    that doesn't support this command will make libcurl fail.

- added descriptions for CURLOPT_MAIL_FROM and CURLOPT_MAIL_RCPT

- --mail-rcpt and --mail-from are starting to settle and work like this...

- turned CURLOPT_MAIL_RCPT into a curl_slist list instead to support multiple
  receivers, and made the command line tool thus support the option specified
  many times

Yang Tse (31 Dec 2009)
- Use '_stunnel.log' file name ending for stunneled server logs

- VMS adjustments by Steven M. Schweda

- Subs for refactoring purposes

Daniel Stenberg (30 Dec 2009)
- CURLOPT_HEADERDATA was added in 7.10

- s/CURLOPT_WRITEHEADER/CURLOPT_HEADERDATA simply because it is a better name

- modified to get the EHLO domain from the path part of the URL instead of the
  user name

- moved the SMTP payload escape function into Curl_smtp_escape_eob and put
  it in smtp.c

- (SMTP) support DATA better in the server and make sure to "escape" CRLF.CRLF
  sequences in uploaded data. The test server doesn't "decode" escaped dot-lines
  but instead test cases must be written to take them into account. Added test
  case 803 to verify dot-escaping.

Yang Tse (30 Dec 2009)
- Oops, should have removed 'not' in previous commit.

- VMS build system enhancements by Steven M. Schweda and Craig A. Berry

- VMS specific preprocessor symbol checking adjustments

- VMS specific preprocessor symbol definition adjustments

- Replaced stricmp() usage with our portable strequal()

Daniel Stenberg (29 Dec 2009)
- move HTTP-specific functions to http.c where they belong

- test 802 is the first SMTP test, although not strictly SMTP yet...

Yang Tse (29 Dec 2009)
- Mention last changes

- - Fix configure_socket() to use ares_socket_t instead of int data type.

- - Where run-time error checks enabling compiler option /GZ was used it is now
    replaced with equivalent /RTCsu for Visual Studio 2003 and newer versions.
  
  - Compiler option /GX is now replaced with equivalent /EHsc for all versions.

- Leftover from previous commit

- Initial refactoring step for server name strings centralized generation

Daniel Stenberg (27 Dec 2009)
- Julien Chaffraix's clarifications

Yang Tse (27 Dec 2009)
- Adjust FreeBSD version check to follow FreeBSD Porter's Handbook
  
  http://www.freebsd.org/doc/en/books/porters-handbook/porting-versions.html

Daniel Stenberg (26 Dec 2009)
- symbols added in the CVS version meant for 7.20.0

Yang Tse (26 Dec 2009)
- global variables reordering/refactoring/commenting

Daniel Stenberg (25 Dec 2009)
- add pointer to the bug report

- - Renato Botelho and Peter Pentchev brought a patch that makes the libcurl
    headers work correctly even on FreeBSD systems before v8.

- first shot at actually doing the SMTP upload as well, not doing the proper
  end-of-body treatment

- When verifying the SMTP server I had to add some hackery since SMTP in itself
  doesn't really return any body data to check so I made SMTP check "headers"
  as well.

- first basic SMTP support

Yang Tse (24 Dec 2009)
- Adjust test number mismatch

- Enable warnings

- Fix warnings

- Fix warnings

- Back out some pingpong server stopping changes introduced last week in
  order to re-use 'classic' stopping and allow taking test-suite run time
  references from this state.

- use Time::HiRes whenever available, independently of perl version

- log a message when continuing once sleep time is over

- - Ingmar Runge noticed that Windows config-win32.h configuration file
    did not include a definition for HAVE_CLOSESOCKET which resulted in
    function close() being inappropriately used to close sockets.

- Make 'classic' output end of a test-suite run become again the end
  of output, even when run time statistics are shown.

- Move stopping of servers instructed by test definition, after the removal of
  server logs advisor read lock and before test results verifications are done.
  
  When stopping a pingpong server, stop server before its slaves.

Daniel Stenberg (21 Dec 2009)
- test 566 was missing

Yang Tse (21 Dec 2009)
- dead_child_handler also takes care of reaping pingpong server dead child processes

- Reap processes dead children ASAP without blocking

- Reinstate hi resolution time logging since this is not what is
  now adding 90 extra seconds to the total time some autobuilds
  need to make a full test-run.

Patrick Monnerat (21 Dec 2009)
- Take new SMTP definitions into account in OS400 wrapper and RPG binding

Daniel Stenberg (21 Dec 2009)
- first small steps towards smtp

Yang Tse (21 Dec 2009)
- Replaced tabs with spaces

Daniel Stenberg (20 Dec 2009)
- remove some unused code

Yang Tse (20 Dec 2009)
- Improve delay command interruptability

Daniel Stenberg (20 Dec 2009)
- revert that, we already had a function named like that!

- rename the verifyftp function to verifyserver since it is used to verify
  a wide variety of protocol servers

- free the allocated mailbox name at disconnect

- introducing the first IMAP FETCH test

Yang Tse (20 Dec 2009)
- - Attempt to fix script compilation failure on versions older than 5.007003,
    corelist -a Time::HiRes lists this as the first version released with it.
  
  - Ensure ftp check delay timer is always an integral number.

Daniel Stenberg (19 Dec 2009)
- support IMAP select and LOGOUT

- fix the ftp check delay timer to never be set below 1 to work correctly
  in cases like test 190

- fixed a precaution check in the cookie code, pointed out by Julien Chaffraix

Yang Tse (19 Dec 2009)
- Slack time reduction

- Added runtests.pl '-r' option for run time statistics

- server start and verification time as well as test preparation time
  data is required in order to closer match total test execution time.

- Added test harness simple time execution stats

- Comment out hi resolution time logging to verify if this is what might
  be contributing 90 additional seconds to the total time some autobuilds
  now need to make a full test-run.

- Fix compilation failure

- Test harness process control enhancements

Daniel Stenberg (17 Dec 2009)
- uh, assign the bool it points to properly

- Stop overloading the conn->protocol field with the PROT_MISSING bit. It
  really didn't belong there and had no real point.

- Remove pointless storing of the protocol as a string within the connectdata
  struct, and instead use the already stored string in the handler struct.

- - David Byron fixed Curl_ossl_cleanup to actually call ENGINE_cleanup when
    available.

Yang Tse (17 Dec 2009)
- gettimeofday() requires perl version newer than 5.6

Daniel Stenberg (16 Dec 2009)
- Follow-up fix for the proxy fix I did for Jon Nelson's bug. It turned out I
  was a bit too quick and broke test case 1101 with that change. The order of
  some of the setups is sensitive. I now changed it slightly again.

Yang Tse (16 Dec 2009)
- Test harness process control enhancements

- Test #1106 needs an ftp enabled client

- Test harness process control enhancements

Daniel Stenberg (14 Dec 2009)
- - Jon Nelson found a regression that turned out to be a flaw in how libcurl
    detects and uses proxies based on the environment variables. If the proxy
    was given as an explicit option it worked, but due to the setup order
    mistake proxies would not be used fine for a few protocols when picked up
    from '[protocol]_proxy'. Obviously this broke after 7.19.4. I now also added
    test case 1106 that verifies this functionality.
  
    (http://curl.haxx.se/bug/view.cgi?id=2913886)

Yang Tse (14 Dec 2009)
- Fix compiler warning

- Prevent perl script dying messages in output, since tearing down the pinpong
  server in this way, upon sysread failures, is part of the expected behavior.

- Adjust uppercase protocol string usage

- Fix compiler warnings

- Fix compiler warnings

- signal handling to cleanup on SIGINT and SIGTERM, followup

- reapply diff between revisions 1.103 and 1.102

Daniel Stenberg (12 Dec 2009)
- updated with the new protocols

- might as well output all supported protocols at the end of configure to
  make it more obvious how the output will be

- show POP3S, IMAPS and SMTPS as protocols if SSL is enabled

- support disabling POP3, IMAP and SMTP and now they also appear in curl-config
  --protocols output

- split out more protocol-specific structs from urldata.h into their own
  protocol-specific header files

- IMAP, POP3 and SMTP support

- introducing IMAP, POP3 and SMTP support (still lots of polish left to do)

Yang Tse (11 Dec 2009)
- Prevent rewinding unless pipelining.
  
  See http://curl.haxx.se/mail/lib-2009-12/0107.html

- Removed function prototype without implementation

Daniel Stenberg (10 Dec 2009)
- - Siegfried Gyuricsko found out that the curl manual said --retry would retry
    on FTP errors in the transient 5xx range. Transient FTP errors are in the
    4xx range. The code itself only tried on 5xx errors that occured _at login_.
    Now the retry code retries on all FTP transfer failures that ended with a
    4xx response.
  
    (http://curl.haxx.se/bug/view.cgi?id=2911279)

- argh, use the correct bug id

- - Constantine Sapuntzakis figured out a case which would lead to libcurl
    accessing alredy freed memory and thus crash when using HTTPS (with
    OpenSSL), multi interface and the CURLOPT_DEBUGFUNCTION and a certain order
    of cleaning things up. I fixed it.
  
    (http://curl.haxx.se/bug/view.cgi?id=2891591)

- minor indent change

Yang Tse (10 Dec 2009)
- - Fixed curl erroneously reporting output stream write failures with disabled buffering

- signal handling to cleanup on SIGINT and SIGTERM, followup

Daniel Stenberg (7 Dec 2009)
- - Martin Storsjo made libcurl use the Expect: 100-continue header for posts
    with unknown size. Previously it was only used for posts with a known size
    larger than 1024 bytes.

- 74. The HTTP spec allows headers to be merged and become comma-separated
    instead of being repeated several times. This also include Authenticate: and
    Proxy-Authenticate: headers and while this hardly every happens in real life
    it will confuse libcurl which does not properly support it for all headers -
    like those Authenticate headers.

Yang Tse (3 Dec 2009)
- Fix 'uploaded' file descriptor leak

- signal handling to cleanup on SIGINT and SIGTERM

Kamil Dudka (2 Dec 2009)
- lib/nss.c: avoid use of uninitialized value

Yang Tse (2 Dec 2009)
- signal handling to cleanup on SIGINT and SIGTERM

- Set socket option SO_REUSEADDR=true on stunnel accept'ing port

Daniel Stenberg (1 Dec 2009)
- - If the Expect: 100-continue header has been set by the application through
    curl_easy_setopt with CURLOPT_HTTPHEADER, the library should set
    data->state.expect100header accordingly - the current code (in 7.19.7 at
    least) doesn't handle this properly. Martin Storsjo provided the fix!

- start working on 1.7.1

Yang Tse (30 Nov 2009)
- - In order to better reflect that the returned pid is extracted from the
    given file, serverpid sub is renamed to pidfromfile. In addition it is
    enhanced to make sure that it always returns zero unless a numerical
    positive value is returned.
  
  - To better reflect that only process existance is actually checked,
    checkserver sub is renamed to processexists. In addition it is enhanced
    making it remove the given pid file when the extracted pid is no longer
    alive.

Daniel Stenberg (29 Nov 2009)
- #71 "TFTP block size / better integration in transfer" is now expected to
  have been fixed!

- a binding for Falcon

Yang Tse (28 Nov 2009)
- - Added Diffie-Hellman parameters to several test harness certificate files in
    PEM format. Required by several stunnel versions used by our test harness.

- Use different log files for each protocol

- s/socklen_t/curl_socklen_t/g

- Fix compiler warning: unused variable `data'

Daniel Stenberg (27 Nov 2009)
- 7.20.0 is the planned next version number

- document --tftp-blksize

- - Markus Koetter provided a polished and updated version of Chad Monroe's TFTP
    rework patch that now integrates TFTP properly into libcurl so that it can
    be used non-blocking with the multi interface and more. BLKSIZE also works.
  
    The --tftp-blksize option was added to allow setting the TFTP BLKSIZE from
    the command line.

Yang Tse (27 Nov 2009)
- Attempt to enhance stunnel 3.X logging

- Prevent running stunnel unless its version can be determined.

- Log sws IPv version, port and pid when exiting due to SIGINT or SIGTERM.

- To allow remote log inspection avoid redirecting messages to stderr.
  
  Set 0600 file permissions on certificate pem files.

- Preserve empty line following last target

- Log info for start up failures.

Daniel Stenberg (26 Nov 2009)
-  - Extended and fixed the change I did on Dec 11 for the the progress
     meter/callback during FTP command/response sequences. It turned out it was
     really lame before and now the progress meter SHOULD get called at least
     once per second.

Yang Tse (26 Nov 2009)
- Only attempt to clear the server-logs lock when previously set by this same server.

- signal handling to cleanup on SIGINT and SIGTERM

- - Larry Lansing fixed ares_parse_srv_reply to properly parse replies
    which might contain non-SRV answers, skipping over potential non-SRV
    ones such as CNAMEs.

- When using icc, compile with -fpic and link with intel dynamic libraries.

Daniel Stenberg (24 Nov 2009)
- clarify what a modern version of libcurl means

Yang Tse (24 Nov 2009)
- Added 'currently' in italics to insist on transient situation.

- Fix language

Daniel Stenberg (24 Nov 2009)
- refreshed

Yang Tse (23 Nov 2009)
- - David Byron modified Makefile.dist vc8 and vc9 targets in order to allow
    finer granularity control when generating src and lib makefiles.

- Enhance some debug messages for initialization failures.
  
  Fix compiler warning: conditional expression is constant.

Daniel Stenberg (23 Nov 2009)
- - Bjorn Augustsson reported a bug which made curl not report any problems even
    though it failed to write a very small download to disk (done in a single
    fwrite call). It turned out to be because fwrite() returned success, but
    there was insufficient error-checking for the fclose() call which tricked
    curl to believe things were fine.

Yang Tse (23 Nov 2009)
- Daniel wants upcoming release to be 1.7.0

- Mention last changes

- - Removed from external interface preprocessor symbol definition for
    CARES_HAVE_ARES_FREE_DATA. Current functionality of ares_free_data()
    makes it unnecessary.

- Added README.msvc

- Changed c-ares naming conventions when using MSVC as described in README.msvc

Daniel Stenberg (23 Nov 2009)
- fixed CURLOPT_TFTP_BLKSIZE typo

Yang Tse (23 Nov 2009)
- - Mention other recent changes

- - Jakub Hrozek renamed addrttl and addr6ttl structs to ares_addrttl and
    ares_addr6ttl in order to prevent name space pollution, along with
    necessary changes to code base and man pages.This change does not break
    ABI, there is no need to recompile existing applications. But existing
    applications using these structs with the old name will need source code
    adjustments when recompiled using c-ares 1.6.1.

- - Jakub Hrozek fixed more function prototypes in man pages to sync them
    with the ones declared in ares.h

- Make configure remove the curlbuild.h file included in distribution tarballs
  for use by non-configure systems. As intended, configure would overwrite the
  distributed one when doing in-tree builds. But VPATH builds would end having
  two curlbuild.h files, one in the source tree and another in the build tree.

- Make configure remove the ares_build.h file included in distribution tarballs.

- Fix macro redefinition.

- Fix name space pollution.

- Allow using different extra import libraries for debug and release builds.

- Add manifest stuff to msvc makefile

Daniel Stenberg (20 Nov 2009)
- - Constantine Sapuntzakis identified a write after close, as the sockets were
    closed by libcurl before the SSL lib were shutdown and they may write to its
    socket. Detected to at least happen with OpenSSL builds.

Yang Tse (20 Nov 2009)
- Sync man page with reality

- Add missing external API decoration for ares_set_socket_callback()

Daniel Stenberg (20 Nov 2009)
- - Jad Chamcham pointed out a bug with connection re-use. If a connection had
    CURLOPT_HTTPPROXYTUNNEL enabled over a proxy, a subsequent request using the
    same proxy with the tunnel option disabled would still wrongly re-use that
    previous connection and the outcome would only be badness.

Yang Tse (20 Nov 2009)
- Add ares_free_data() man page.

- - Provide in external interface preprocessor symbol definitions for
    CARES_HAVE_ARES_FREE_DATA as an indication of function availability.

- Remove typecast

- Fix comment

- Add ares_data.c and ares_data.h

- Jakub Hrozek modified ares_parse_srv_reply() and ares_parse_txt_reply() API
  to return a linked lists of results. These were also modified to internally
  use the ares_data memory struct and as such its result must be free'ed with
  ares_free_data().

- Initial support for the generic ares_free_data() function that will allow
  applications to free memory allocated and returned by some c-ares funtions.

- Explicit initialization of all FTP struct members in ftp_init()

- Fix compiler warning: ISO C90 forbids mixed declarations and code

- Make memory tracking system intolerant with zero sized malloc(),
  calloc() and realloc() function calls.

- Make usage of calloc()'s arguments consistent with rest of code base

- workaround icc 9.1 optimizer issue

Daniel Stenberg (17 Nov 2009)
- - Constantine Sapuntzakis provided another fix for the DNS cache that could
    end up with entries that wouldn't time-out:
  
    1. Set up a first web server that redirects (307) to a http://server:port
       that's down
    2. Have curl connect to the first web server using curl multi
  
    After the curl_easy_cleanup call, there will be curl dns entries hanging
    around with in_use != 0.
  
    (http://curl.haxx.se/bug/view.cgi?id=2891591)

- - Marc Kleine-Budde fixed: curl saved the LDFLAGS set during configure into
    its pkg-config file.  So -Wl stuff ended up in the .pc file, which is really
    bad, and breaks if there are multiple -Wl in our LDFLAGS (which are in
    PTXdist). bug #2893592 (http://curl.haxx.se/bug/view.cgi?id=2893592)

Yang Tse (16 Nov 2009)
- Add icc fvisibility bug test

- Fix icc 9.0 compiler warning: external definition with no prior declaration

- Update serial number

- Fix three var names

- Add check for assert.h header file

Kamil Dudka (15 Nov 2009)
- - David Byron improved the configure script to use pkg-config to find OpenSSL
    (and in particular the list of required libraries) even if a path is given
    as argument to --with-ssl

Yang Tse (15 Nov 2009)
- getaddrinfo is fully thread safe on solaris versions which
  implement the function even when h_errno is not a macro.
  
  The h_errno macro test now only done on systems for which there
  is no hard coded knowledge about getaddrinfo's thread safeness.

- Client certificate ENG file type requires OpenSSL 0.9.7 or newer

- Remove files generated on previous buildconf/configure run

- Add a couple of renamed files to the removal list

- Remove enable-thread / disable-thread configure option. These were only placebo
  options. The library is always built as thread safe as possible on every system.

Claes Jakobsson (14 Nov 2009)
- Added '--configure' option to curl-config to display original configure arguments when curl was built

Yang Tse (14 Nov 2009)
- Refactor how preprocessor symbol _THREAD_SAFE definition is done.

- OpenSSL 0.9.7 or newer required for ENGINE_CTRL_GET_CMD_FROM_NAME definition

Daniel Stenberg (14 Nov 2009)
- - Claes Jakobsson restored the configure functionality to detect NSS when
    --with-nss is set but not "yes".
  
    I think we can still improve that to check for pkg-config in that path etc,
    but at least this patch brings back the same functionality we had before.

- - Camille Moncelier added support for the file type SSL_FILETYPE_ENGINE for
    the client certificate. It also disable the key name test as some engines
    can select a private key/cert automatically (When there is only one key
    and/or certificate on the hardware device used by the engine)

Yang Tse (14 Nov 2009)
- - Constantine Sapuntzakis provided the fix that ensures that an SSL connection
    won't be reused unless protection level for peer and host verification match.

- Assume that getaddrinfo is thread safe, unless hard coded
  knowledge says the contrary or h_errno is not defined.

- Related with the threadsafe capability of getaddrinfo:
  
  - Constantine Sapuntzakis reported that Darwin 6.0 a.k.a. MAC OS X 10.2
    and newer have a threadsafe getaddrinfo.
  
  - Fix Dragonfly BSD triplet detection.
  
  - In case the hard-coded knowledge says that getaddrinfo is threadsafe,
    an additional check is done to verify that h_errno is also defined.
    If h_errno isn't defined, we finally assume that it isn't threadsafe.
    Jamie Lokier provided the inspiration for this extra check.

- AIX 5.2 and newer have threadsafe getaddrinfo.
  
  Add some comments to better understand what the regex's pretend to achieve.

- HP-UX 11.11 and later have threadsafe getaddrinfo

- Constantine Sapuntzakis patch for hostip.c
  
  No need for a separate variable ndns.
  
  The memory leak detection will detect code that fails to release a dns reference.
  
  The DEBUGASSERT will detect code that releases too many references.

- Check if getaddrinfo is threadsafe when function check allows it to be used

- Add missing variable initialization

Kamil Dudka (12 Nov 2009)
- - libcurl-NSS now tries to reconnect with TLS disabled in case it detects
    a broken TLS server. However it does not happen if SSL version is selected
    manually. The approach was originally taken from PSM. Kaspar Brand helped me
    to complete the patch. Original bug reports:
    https://bugzilla.redhat.com/525496
    https://bugzilla.redhat.com/527771

- - Kevin Baughman provided a fix preventing libcurl-NSS from crash on doubly
    closed NSPR descriptor. The issue was hard to find, reported several times
    before and always closed unresolved. More info at the RH bug:
    https://bugzilla.redhat.com/534176

Yang Tse (12 Nov 2009)
- Make hostip.c compile again

Dan Fandrich (11 Nov 2009)
- Made the path to the binaries absolute

Yang Tse (11 Nov 2009)
- Add last change credit

- - Marco Maggi reported that compilation failed when configured --with-gssapi
    and GNU GSS installed due to a missing mutual exclusion of header files in
    the Kerberos 5 code path. He also verified that my patch worked for him.

Daniel Stenberg (11 Nov 2009)
- NSS SSL connections are also blocking

- - Constantine Sapuntzakis posted bug #2891595
    (http://curl.haxx.se/bug/view.cgi?id=2891595) which identified how an entry
    in the DNS cache would linger too long if the request that added it was in
    use that long. He also provided the patch that now makes libcurl capable of
    still doing a request while the DNS hash entry may get timed out.

- - Christian Schmitz noticed that the progress meter/callback was not properly
    used during the FTP connection phase (after the actual TCP connect), while
    it of course should be. I also made the speed check get called correctly so
    that really slow servers will trigger that properly too.

Yang Tse (11 Nov 2009)
- Renamed fpGetNetworkParams and fpSystemFunction036 to avoid namespace pollution with static library

- Add kernel32.lib

- Mention last changes

- Reinstate copyright symbol lost in previous commit

- Make some strings different in resource file for debug or release builds

- Ignore more subdirs

- Fix compiler warning: conditional expression is constant

- Sync linker and resource compiler options with Makefile.msvc

- Follow Makefile.msvc subdirectory naming scheme, and sync compiler options

- Updated MSVC makefile that allows building dynamic and static
  c-ares libraries in debug and release flavours.
  
  Additionally each of the three sample programs is built against
  each of the four possible c-ares libraries, generating all this
  a total number of 12 executables and 4 libraries.

- Test for USE_WINSOCK since it is more restrictive than WIN32

- Make header inclusion depend on HAVE_*_H definition

- Remove unneeded preprocessor directives

Daniel Stenberg (7 Nov 2009)
- Joshua Kwan added paragraph 4.18 about file:// URLs on windows etc

Yang Tse (5 Nov 2009)
- Adjust c-ares include paths for memory tracking enabled (--enable-curldebug) builds

Kamil Dudka (5 Nov 2009)
- - Dropped misleading timeouts in libcurl-NSS and made sure the SSL socket works
    in non-blocking mode.

Yang Tse (5 Nov 2009)
- I removed leading 'curl' path on the 'curlbuild.h' include statement in
  curl.h, adjusting auto-makefiles include path, to enhance portability to
  OS's without an orthogonal directory tree structure such as OS/400.

- avoid division by zero

Daniel Stenberg (4 Nov 2009)
- - I fixed several problems with the transfer progress meter. It showed the
    wrong percentage for small files, most notable for <1000 bytes and could
    easily end up showing more than 100% at the end. It also didn't show any
    percentage, transfer size or estimated transfer times when transferring
    less than 100 bytes.

Yang Tse (4 Nov 2009)
- source files used by sample programs

Daniel Stenberg (4 Nov 2009)
- start over towards 7.19.8

- updated with names from the 7.19.7 release notes

Version 7.19.7 (4 Nov 2009)

Daniel Stenberg (4 Nov 2009)
- fix the find command line

- avoid fiddling in the ares subdir since that isn't part of the release
  tarball

- release coming up

- syntax

- I have next to no hope of fixing more bugs before 7.19.7 so all are now
  moved to 7.19.8. I removed the bugs already in KNOWN_BUGS (but they should
  of course still get fixed).
  
  Added three recent bugs. 7.19.8 is targetted to get shipped in Janurary 2010

Dan Fandrich (4 Nov 2009)
- Put the Symbian binaries into the more modern locations in ROM

- Updated systems, bindings, NTLM support

- Export the Symbian .iby files to make it easier to build a ROM

Daniel Stenberg (2 Nov 2009)
- strerror() => curl_easy_strerror()

Yang Tse (2 Nov 2009)
- include progress.h for Curl_pgrsSetDownloadCounter function prototype

Daniel Stenberg (2 Nov 2009)
- - As reported independent by both Stan van de Burgt and Didier Brisebourg,
    CURLINFO_SIZE_DOWNLOAD (the -w variable size_download) didn't work when
    getting data from ldap!

- describe the cmake situation

Yang Tse (2 Nov 2009)
- Renamed c-ares setup.h to ares_setup.h

- Adjust include paths to take in account that currently:
  
  c-ares with --enable-curldebug uses memdebug.h from libcurl's lib subdirectory.
  
  memdebug.h needs access to libcurl's setup.h from libcurl's lib subdirectory
  and also needs access to libcurl's generated curl_config.h

- Undo old temporary change once used for testing purposes

Daniel Stenberg (31 Oct 2009)
- - Gabriel Kuri reported a problem with CURLINFO_CONTENT_LENGTH_DOWNLOAD if the
    download was 0 bytes, as libcurl would then return the size as unknown (-1)
    and not 0. I wrote a fix and test case 566 to verify it.

Yang Tse (31 Oct 2009)
- Mention many changes

- Mention --enable-symbol-hiding configure option

- Symbol hiding configure options renamed to the hopefully less ambiguous
  --enable-symbol-hiding and --disable-symbol-hiding as well as related
  macro names and some internal variables used for them.
  
  Related configuration file preprocessor symbols named to
  CARES_SYMBOL_HIDING and CARES_SYMBOL_SCOPE_EXTERN.

Daniel Stenberg (30 Oct 2009)
- Added test case 566 in an attempt to repeat bug 2884561
  (http://curl.haxx.se/bug/view.cgi?id=2884561) but it seems to work for me...

- - Liza Alenchery mentioned a problem with re-used SCP connection when a bad
    auth is used, as it caused a crash. I failed to repeat the issue, but still
    made a change that now forces the TCP connection used for a freed SCP
    session to get closed and not be re-used.

- - "Tom" posted a bug report that mentioned how libcurl did wrong when doing a
    POST using a read callback, with Digest authentication and
    "Transfer-Encoding: chunked" enforced.  I would then cause the first request
    to be wrongly sent and then basically hang until the server closed the
    connection. I fixed the problem and added test case 565 to verify it.

Yang Tse (30 Oct 2009)
- Header inclusion depending on HAVE_* symbol.
  Fix two typos.

- Comparison of the Initial revision of this file with ares_parse_a_reply.c
  shows that this one is actually a modified copy of ares_parse_a_reply.c.
  
  In order to comply with ares_parse_a_reply.c's M.I.T. license, the old
  1998 M.I.T. copyright notice is now also preserved in this file the same
  as it is done in other ares_parse_*.c files.

- Add CVS Id tag.
  Fix identation of some license lines.

- Add CVS Id tag.

- Fix comment

- In no particular order, changed/fixed all of the following in
  ares_parse_txt_reply() current version:
  
  - Fixed a couple of potential double free's.
  
  - Fixed memory leaks upon out of memory condition.
  
  - Fixed pointer arithmetic.
  
  - Setting ntxtreply to zero upon entry for all failure cases.
  
  - Changed data type to size_t for variables substr_len, str_len and
    the length member of ares_txt_reply struct.
  
  - Avoided a couple of memcpy() calls.
  
  - Changed i data type to unsigned int to prevent compiler warnings.
  
  - Adjusted a comment.
  
  - Use ARES_SUCCESS literal for successfull completion.
  
  - Added CVS Id tag.

- Add c-ares DLL resource file to distribution archive

- ignore files

- Empty subdir

- Updated MSVC 6.0 workspace and project files that allows building
  dynamic and static c-ares libraries in debug and release flavours.
  
  Additionally each of the three sample programs is built against
  each of the four possible c-ares libraries, generating all this
  a total number of 12 executables and 4 libraries.

Daniel Stenberg (29 Oct 2009)
- no need to check for NULL pointers before dereferencing, as the pointers
  MUST be valid and they are dereferenced further down in the function
  unconditionally!

- shorten the descriptions somewhat

- update to the new struct name

- Jakub Hrozek added ares_parse_txt_reply() for TXT parsing

- use 'ares_srv_reply' for proper name-spacing

Yang Tse (29 Oct 2009)
- Fix compiler warning: control reaches end of non-void function

- Take in account c-ares 1.6.1 will use __declspec function decoration
  for Win32 and Symbian unless CARES_STATICLIB is defined to use static
  library linkage.

- Add reference for ares_parse_srv_reply.pdf

- Add reference for ares_parse_srv_reply docs

- External API function linkage decoration adjustment

- External API function linkage decoration adjustment

Daniel Stenberg (28 Oct 2009)
- Since the NSS lib closes the socket the memory tracking system wrongly gets a
  false positive on a leaked socket, so this introduces a way to tell the system
  that the socket is indeed closed without explicitly closing it!

Yang Tse (28 Oct 2009)
- Initial step towards the ability to reduce c-ares exported symbols
  based on the 'visibility' attribute for GNUC and __global for Sun
  compilers, taking also in account __declspec function decoration
  for Win32 and Symbian DLL's.
  
  Introducing configure options --enable-hidden-symbols and
  --disable-hidden-symbols following libcurl's naming.

- libssh2 detection changes mentioned in http://curl.haxx.se/mail/lib-2009-10/0343.html

- Fix comment

- Fix spelling

- Fix Pelles C Win32 target compilation issues

Daniel Stenberg (26 Oct 2009)
- grrr, removed the conflict markers

- spell fix by Michael Wood

- - Dima Barsky made the curl cookie parser accept cookies even with blank or
    unparsable expiry dates and then treat them as session cookies - previously
    libcurl would reject cookies with a date format it couldn't parse. Research
    shows that the major browser treat such cookies as session cookies. I
    modified test 8 and 31 to verify this.

Dan Fandrich (24 Oct 2009)
- Mention that Android works

Daniel Stenberg (24 Oct 2009)
- Fabian Keil's suggested wording

Yang Tse (23 Oct 2009)
- John Engelhart noticed an unreleased problem relative to a duplicate
  ARES_ECANCELLED error code value and missing error code description.

Patrick Monnerat (23 Oct 2009)
- OS400 install: Duplicate H include file to file CURL to support more include path forms.

Daniel Stenberg (22 Oct 2009)
- update the company sponsors part, as one company is no longer sponsoring
  and another is sponsoring more

Yang Tse (21 Oct 2009)
- Update MSVC 6 caveats section

- Update memory tracking/debugging reference

Daniel Stenberg (21 Oct 2009)
- - Attempt to use pkg-config for finding out libssh2 installation details
    during configure.

- mention bug 2848436 in regard to the TFTP problems

- s/koresh/Johan van Selst/

- add --crlfile to the man page

- - A patch in bug report #2883177 (http://curl.haxx.se/bug/view.cgi?id=2883177)
    by user 'koresh' introduced the --crlfile option to curl, which makes curl
    tell libcurl about a file with CRL (certificate revocation list) data to
    read.

- spelling corrections

Yang Tse (21 Oct 2009)
- Detect when msvc 6.0 is in use without PSDK installed, intentionally
  fail to build when this happens, and show an appropriate error.
  
  The brave of heart can circumvect this. Defining ALLOW_MSVC6_WITHOUT_PSDK
  in lib/config-win32.h, although absolutely discouraged and unsupported,
  this will allow the die hard MSVC hacker to build in such a discouraged
  environment.
  
  The actually supported 'fix' is to install 'February 2003 Platform SDK'
  a.k.a. 'Windows Server 2003 PSDK' which can be freely downloaded from
  http://www.microsoft.com/msdownload/platformsdk/sdkupdate/psdk-full.htm

Gunter Knauf (19 Oct 2009)
- added cast macros to silent compiler warnings with 64-bit systems.

Yang Tse (19 Oct 2009)
- Fix compiler warning: local variable may be used without having been initialized

- Use *_CHECK_PATH_SEPARATOR_REQUIRED to ensure that *_CHECK_PATH_SEPARATOR
  is only expanded and included once in the configure script.

- Our _AS_PATH_SEPARATOR_PREPARE override is now m4_defun'd instead of m4_define'd
  due to autoconf 2.64 m4_require'ing it in _AS_SHELL_SANITIZE indirectly through
  _AS_PATH_WALK.

Daniel Stenberg (18 Oct 2009)
- - Ray Dassen provided a patch in Debian's bug tracker (bug number #551461)
    that now makes curl_getdate(3) actually handles RFC 822 formatted dates that
    use the "single letter military timezones".
    http://www.rfc-ref.org/RFC-TEXTS/822/chapter5.html has the details.

Yang Tse (18 Oct 2009)
- Check for basename() is now done the same as other function checks

Daniel Stenberg (18 Oct 2009)
- - Fixed memory leak in the SCP/SFTP code as it never freed the knownhosts
    data!

- John Dennis filed bug report #2873666
  (http://curl.haxx.se/bug/view.cgi?id=2873666) which identified a problem which
  made libcurl loop infinitely when given incorrect credentials when using HTTP
  GSS negotiate authentication.

- - Kevin Baughman found a double close() problem with libcurl-NSS, as when
    libcurl called NSS to close the SSL "session" it also closed the actual
    socket.

- s/Make NTLM work without OpenSSL functions/Make NTLM work with other crypto functions
  
  As it actually builds with gcrypt these days, but not the NSS functions.

- README.NSS is gone

Yang Tse (17 Oct 2009)
- Fix invalid file name characters handling on Windows

- Move comment

- Replace tabs with spaces

- Fix an OOM handling problem

Gunter Knauf (14 Oct 2009)
- we only need to call ASN1_STRING_length() if ASN1_STRING_type() detects UTF-8,
  else ASN1_STRING_to_UTF8() returns the string length.

Yang Tse (13 Oct 2009)
- Update LDAP URL format reference

- Fix compiler warning: argument is incompatible with corresponding format string conversion

- Fix potential out-of-bounds read

- Fix compiler warning: loop without body

- Fix compiler warning

- Fix compiler warning

- Fix compiler warning

- Attempt to silence bogus compiler warning: "Potential null pointer dereference"

- Fix compiler warning: addition result could be truncated before cast to bigger sized type

Kamil Dudka (7 Oct 2009)
- fix gcc warnings in lib/nss.c

Yang Tse (7 Oct 2009)
- Overhauled ares__get_hostent()
  
  - Fixing out of bounds memory overwrite triggered with malformed /etc/hosts file.
  - Improving parsing of /etc/hosts file.
  - Validating requested address family.
  - Ensuring that failures always return a NULL pointer.
  - Adjusting header inclusions.

Gunter Knauf (7 Oct 2009)
- removed NSS README since the mentioned problems are now solved.

Yang Tse (6 Oct 2009)
- Fix vc-x64 target having MACHINE= wrongly positioned, and added vc-x64-ssl-zlib
  target as indicated end requested by Viktor Szakats in bug report #2872879.

- Fix comment

- Fix ssize_t redefinition errors on WIN64 reported by Alexey Simak

Dan Fandrich (6 Oct 2009)
- Minix has new build prerequisites using autoconf 2.64

Yang Tse (5 Oct 2009)
- more files to ignore

Daniel Stenberg (1 Oct 2009)
- - Tom Mueller correctly reported in bug report #2870221
    (http://curl.haxx.se/bug/view.cgi?id=2870221) that libcurl returned an
    incorrect return code from the internal trynextip() function which caused
    him grief. This is a regression that was introduced in 7.19.1 and I find it
    strange it hasn't hit us harder, but I won't persue into figuring out
    exactly why.

- mention some alternative method names in the docs for --request

- mention "quiet" for the --silent option to get easier to find

- - Constantine Sapuntzakis: The current implementation will always set
    SO_SNDBUF to CURL_WRITE_SIZE even if the SO_SNDBUF starts out larger.  The
    patch doesn't do a setsockopt if SO_SNDBUF is already greater than
    CURL_WRITE_SIZE. This should help folks who have set up their computer with
    large send buffers.

Yang Tse (29 Sep 2009)
- Check if _REENTRANT definition is required to
  make errno available as a preprocessor macro.

Dan Fandrich (28 Sep 2009)
- Removed some extraneous carriage return characters

Yang Tse (28 Sep 2009)
- fix compiler warning: conversion from "long" to "size_t" may lose sign

- libcurl private function Curl_memrchr() now in curl_memrchr.c and curl_memrchr.h

- Added check for memrchr function or macro

Daniel Stenberg (27 Sep 2009)
- tiny indent fix

- - I introduced a maximum limit for received HTTP headers. It is controlled by
    the define CURL_MAX_HTTP_HEADER which is even exposed in the public header
    file to allow for users to fairly easy rebuild libcurl with a modified
    limit. The rationale for a fixed limit is that libcurl is realloc()ing a
    buffer to be able to put a full header into it, so that it can call the
    header callback with the entire header, but that also risk getting it into
    trouble if a server by mistake or willingly sends a header that is more or
    less without an end. The limit is set to 100K.

- unify two very similar code sections into one single function, header_append()

- - John P. McCaskey posted a bug report that showed how libcurl did wrong when
    saving received cookies with no given path, if the path in the request had a
    query part. That is means a question mark (?) and characters on the right
    side of that. I wrote test case 1105 and fixed this problem.

- added test 1105 (disabled) - it repeats a cookie path bug we need to fix

Kamil Dudka (26 Sep 2009)
- - Implemented a protocol independent way to specify blocking direction, used by
    transfer.c for blocking. It is currently used only by SCP and SFTP protocols.
    This enhancement resolves an issue with 100% CPU usage during SFTP upload,
    reported by Vourhey.

Daniel Stenberg (25 Sep 2009)
- minor whitespace edit

- - Chris Mumford filed bug report #2861587
    (http://curl.haxx.se/bug/view.cgi?id=2861587) identifying that libcurl used
    the OpenSSL function X509_load_crl_file() wrongly and failed if it would
    load a CRL file with more than one certificate within. This is now fixed.

Dan Fandrich (25 Sep 2009)
- Changed the default OpenSSL include path

Yang Tse (25 Sep 2009)
- fix compiler warning: end-of-loop code not reached

- fix compiler warning: variable "sni" was set but never used

Daniel Stenberg (24 Sep 2009)
- revert HPUX change since it already works fine

- builds thread-safer on HPUX

- - HPUX does need _REENTRANT too to build really thread-safe.

Gunter Knauf (21 Sep 2009)
- added section for libcurl builds with NSS SSL support.

- added support for new SQLite cert database format: added a runtime check for version 3.12.0, and depending on the result add 'sql:' prefix to cert database directory so that newer SQLIte database format works.

- added aditional check for the directory specified with SSL_DIR, and fall back to hardcoded directory if not a valid directory.

Yang Tse (18 Sep 2009)
- fix compiler warning: comparison between signed and unsigned

Daniel Stenberg (17 Sep 2009)
- added three missing files to the dist archive

Yang Tse (17 Sep 2009)
- fix compiler warning: enumerated type mixed with another type

- Attempt to silence bogus compiler warning: "Potential null pointer dereference"

- fix compiler warning: conversion to 'size_t' from 'curl_off_t' may alter its value

- Moved Curl_rand() and Curl_srand() code from formdata.c and formdata.h
  into curl_rand.c and curl_rand.h

- remove line obsoleted with previous commit

- Attempt to silence bogus compiler warning: "Potential null pointer dereference"

Daniel Stenberg (16 Sep 2009)
- - Sven Anders reported that we introduced a cert verfication flaw for OpenSSL-
    powered libcurl in 7.19.6. If there was a X509v3 Subject Alternative Name
    field in the certficate it had to match and so even if non-DNS and non-IP
    entry was present it caused the verification to fail.

Yang Tse (16 Sep 2009)
- Attempt to silence bogus compiler warning: "Potential null pointer dereference through ptr is detected"

- Attempt to silence bogus compiler warning: "Potential null pointer dereference through ptr is detected"

Dan Fandrich (16 Sep 2009)
- Moved the libssh2 checks after the SSL library checks. This helps when
  statically linking since libssh2 needs the SSL library link flags to be
  set up already to satisfy its dependencies. This wouldn't be necessary
  if the libssh2 configure check was changed to use pkg-config since the
  --static flag would add the dependencies automatically.

- Provide instructions on creating curl_config.h

Yang Tse (15 Sep 2009)
- mention last changes

- Some systems poll function sets POLLHUP in revents without setting
  POLLIN, and sets POLLERR without setting POLLIN and POLLOUT. In some
  libcurl code execution paths this could trigger busy wait loops with
  high CPU usage until a timeout condition aborted the loop.
  
  This fix for Curl_poll adresses the above in a libcurl-wide mode.

- Revert Joshua Kwan's patch committed 11 Sep 2009.
  
  Some systems poll function sets POLLHUP in revents without setting
  POLLIN, and sets POLLERR without setting POLLIN and POLLOUT. In some
  libcurl code execution paths this could trigger busy wait loops with
  high CPU usage until a timeout condition aborted the loop.
  
  The reverted patch addressed the above issue for a very specific case,
  when awaiting c-ares to resolve. A libcurl-wide fix superceeds this one.
  
  http://cool.haxx.se/cvs.cgi/curl/lib/select.c.diff?r1=1.52&r2=1.53

Dan Fandrich (14 Sep 2009)
- Added HTTP proxy keyword

Yang Tse (14 Sep 2009)
- ignore more files

Dan Fandrich (11 Sep 2009)
- Renumbered test565 to test1104 to move it out of the range reserved for
  libcurl tests.

Daniel Stenberg (11 Sep 2009)
- point to the current functions, not the deprecated ones

Gunter Knauf (11 Sep 2009)
-  Joshua Kwan provided a patch to pass POLLERR / POLLHUP back to c-ares.
   This fixes a loop problem with high CPU usage.

Daniel Stenberg (10 Sep 2009)
- - Claes Jakobsson fixed a problem with cookie expiry dates at exctly the epoch
    start second "Thu Jan 1 00:00:00 GMT 1970" as the date parser then returns 0
    which internally then is treated as a session cookie. That particular date
    is now made to get the value of 1.

Gunter Knauf (10 Sep 2009)
- use stderr for error output.

- fixed spelling.

- added debug output for NSS certpath.

- changed NetWare makefiles to rely on SHELL rather than OSTYPE since we can have a sh-like shell also on Windows (MSYS, Cygwin).

Gisle Vanem (7 Sep 2009)
- Suppress warnings about unused prototypes in Watt32 and Win32 programs.

- Update email address.

- Update my email address. Add ares_config.h as dependency for 'make depend'.

Yang Tse (6 Sep 2009)
- T_SRV portability check

Gunter Knauf (6 Sep 2009)
- added casts to silent compiler warning on 64bit systems.

- use our define struct_stat to be compatible with largefile support.

- added base64.h include to silent warnings about missing prototype for ATOB_ConvertAsciiToItem.

- language! / take2

- changed includes to match style how we do with all other *.c files.

Daniel Stenberg (5 Sep 2009)
- add ftpgetinfo

- Make CURLOPT_FTPPORT support an additional port number
  
  done!

Gunter Knauf (5 Sep 2009)
- added ftpgetinfo sample since users asked frequently for such a sample.

- changed u_int16_t to unsigned short because it is the only place within ares and curl where such a type would be used;
  also it broke many autobuilds. We should probably introduce an ares_port_t if we want to use a type here.

Gisle Vanem (5 Sep 2009)
- Replace 'uint16_t' with 'u_int16_t' since the latter is used in ares.h.

- Added 'ares_parse_srv_reply.obj'. Added definition of 'u_int16_t'. This is I don't like; we should not depend on such non-universal types in a public header. But this is just a quick fix.

Daniel Stenberg (4 Sep 2009)
- - Jakub Hrozek added ares_parse_srv_reply() for SRV parsing

Gunter Knauf (4 Sep 2009)
- added --with-nss to configure output.

- added MSVC6 caveats.

- added chkspeed to samples.

- updated MingW32 makefile for recent external libs.

Daniel Stenberg (3 Sep 2009)
- fix copyright year

- provide and export Curl_parsedate() as a library-wide internal function
  for a better API to date parsing than the external API is

- language!

- - Daniel Johnson founded a flaw in the code convering sftp-errors to libcurl
    errors.

- extended CURL_CHECK_PKGCONFIG to check for a host-specific version of the
  pkg-config first before the "normal" one (if cross-compiling)

- spell out that when running_handles is zero, there is no longer any transfers
  going on

- comment the "stunnel exited with [num]" stuff since this is now happen
  in normal tests and is annoying

- - Peter Sylvester made a debug featuer for Curl_resolv() that now will force
    libcurl to resolve 'localhost' whatever name you use in the URL *if* you set
    the --interface option to (exactly) "LocalHost". This will enable us to
    write tests for custom hosts names but still use a local host server.

- a failed libssh2 check must not pollute the variables

- clarify: building outside of the source tree is not special for the
  test script

- - configure now tries to use pkg-config for a number of sub-dependencies even
    when cross-compiling. The key to success is then you properly setup
    PKG_CONFIG_PATH before invoking configure.
  
    I also improved how NSS is detected by trying nss-config if pkg-config isn't
    present, and as a last resort just use the lib name and force the user to
    setup the LIBS/LDFLAGS/CFLAGS etc properly. The previous last resort would
    add a range of various libs that would almost never be quite correct.

- 73. if a connection is made to a FTP server but the server then just never
    sends the 220 response or otherwise is dead slow, libcurl will not
    acknowledge the connection timeout during that phase but only the "real"
    timeout - which may surprise users as it is probably considered to be the
    connect phase to most people. Brought up (and is being misunderstood) in:
    http://curl.haxx.se/bug/view.cgi?id=2844077

- - When using the multi interface with FTP and you asked for NOBODY, you did no
    QUOTE commands and the request used the same path as the connection had
    already changed to, it would decide that no commands would be necessary for
    the "DO" action and that was not handled properly but libcurl would instead
    hang.

Patrick Monnerat (31 Aug 2009)
- Added a warning comment about curlbuild.h inclusion leading path.

- OS400: adjust inclusion paths in include files to avoid "include file not found" in DB2 mode.

Gunter Knauf (31 Aug 2009)
- added curl prefix for curlbuild.h back until we find a better solution;
  it breaks almost all autobuilds.

- added simple chkspeed sample.

- removed curl prefix for curlbuild.h as Patrick suggested.

- add casts to silent compiler warnings with 64bit systems.

- add cast to silent compiler warning with 64bit systems.

- add cast to silent compiler warning with 64bit systems.

- fix shadow definition of outp.

- add cast to silent compiler warning with 64bit systems.

- removed obsolete casts.

- add casts to silent compiler warnings with 64bit systems.

- add cast to silient compiler warning with 64bit systems.

Kamil Dudka (28 Aug 2009)
- - Improved error message for not matching certificate subject name in
    libcurl-NSS. Originally reported at:
    https://bugzilla.redhat.com/show_bug.cgi?id=516056#c9

Daniel Stenberg (27 Aug 2009)
- disable the tests that differ between 32 and 64 bit

Steinar H. Gunderson (27 Aug 2009)
- Support lookup of IPv4 literals in ares_gethostbyname(), even when the address family is set to AF_INET6.

Patrick Monnerat (24 Aug 2009)
- - Introduced a SYST-based test to properly set-up name format when dealing  with the OS/400 FTP server.
  - Fixed an ftp_readresp() bug preventing detection of failing control socket  and causing FTP client to loop forever.

Daniel Stenberg (24 Aug 2009)
- - Marc de Bruin pointed out that configure --with-gnutls=PATH didn't work
    properly and provided a fix. http://curl.haxx.se/bug/view.cgi?id=2843008

- - Eric Wong introduced support for the new option -T. (dot) that makes curl
    read stdin in a non-blocking fashion. This also brings back -T- (minus) to
    the previous blocking behavior since it could break stuff for people at
    times.

- clarify the code by initing newurl to NULL

Michal Marek (21 Aug 2009)
- With CURLOPT_PROXY_TRANSFER_MODE, avoid sending invalid URLs like
  ftp://example.com;type=i if the user specified ftp://example.com without the
  slash.

Daniel Stenberg (21 Aug 2009)
- - Andre Guibert de Bruet pointed out a missing return code check for a
    strdup() that could lead to segfault if it returned NULL. I extended his
    suggest patch to now have Curl_retry_request() return a regular return code
    and better check that.

- - Lots of good work by Krister Johansen, mostly related to pipelining:
  
    Fix SIGSEGV on free'd easy_conn when pipe unexpectedly breaks
    Fix data corruption issue with re-connected transfers
    Fix use after free if we're completed but easy_conn not NULL

- 5.3 Sort outgoing cookies
  5.4 Rearrange request header order
  
  Things to play with when you're bored

- the mozilla browser is called Firefox...

Dan Fandrich (18 Aug 2009)
- Pull the certificate files from the source directory. Ensure that the
  certificate tests only run on a localhost-hosted test server since the
  host name is explicitly checked.

Gunter Knauf (16 Aug 2009)
- added missing curl_easy_pause to export list.

Daniel Stenberg (14 Aug 2009)
- I think it's worth clarifying that curl DOES NOT validate a given URL more
  than what's absolutely necessary:
  
  curl will do its best to use what you pass to it as a URL. It is not trying to
  validate it as a syntactically correct URL by any means but is instead
  VERY liberal with what it accepts.

Kamil Dudka (13 Aug 2009)
- - Changed NSS code to not ignore the value of ssl.verifyhost and produce more
    verbose error messages. Originally reported at:
    https://bugzilla.redhat.com/show_bug.cgi?id=516056

Daniel Stenberg (13 Aug 2009)
- mention yesterday's changes

- add missing file, as pointed out by Karl M

- start over fresh again towards 7.19.7

- imported names from the 7.19.6 RELEASE-NOTES

- Added a range of new fun date strings to try. This set of dates come from a
  mail posted to the http-state mailing list, from Adam Barth, and is said to be
  the set of date formats the Chrome browser code is tested against:
  http://www.ietf.org/mail-archive/web/http-state/current/msg00129.html
  
  libcurl parses most of them identically, but not all of them.

Version 7.19.6 (12 Aug 2009)

Daniel Stenberg (12 Aug 2009)
- 7.19.6

- - Carsten Lange reported a bug and provided a patch for TFTP upload and the
    sending of the TSIZE option. I don't like fixing bugs just hours before
    a release, but since it was broken and the patch fixes this for him I decided
    to get it in anyway.

- use --insecure to allow non-matching known hosts for SSH-based protocols

- pasted here (and renumbered) from the TODO-RELEASE since they are in fact
  bugs we know about that will appear in the next release (too)

- - Peter Sylvester made the HTTPS test server use specific certificates for
    each test, so that the test suite can now be used to actually test the
    verification of cert names etc. This made an error show up in the OpenSSL-
    specific code where it would attempt to match the CN field even if a
    subjectAltName exists that doesn't match. This is now fixed and verified
    in test 311.

- credit

- - Benbuck Nason posted the bug report #2835196
    (http://curl.haxx.se/bug/view.cgi?id=2835196), fixing a few compiler
    warnings when mixing ints and bools.

Dan Fandrich (11 Aug 2009)
- Include the Android make file in the source package even though the
  config.h issue hasn't been completely solved.  This will save some effort
  for someone desperate to use curl on Android.

Patrick Monnerat (11 Aug 2009)
- Fix definition of CURLOPT_SOCKS5_GSSAPI_SERVICE from LONG to OBJECTPOINT
  Fix OS400 makefile for tests to use the new Makefile.inc in libtest
  Update the OS400 wrappers and RPG binding according to the current CVS source state

Daniel Stenberg (11 Aug 2009)
- Added links to more details on most issues. Moved all these issues to 7.19.7
  now since we won't manage to get them done for 7.19.6.

Dan Fandrich (11 Aug 2009)
- Fixed a memory leak in the FTP code and an off-by-one heap buffer overflow.

- Fixed some memory leaks in the command-line tool that caused most of the
  torture tests to fail.

Gunter Knauf (7 Aug 2009)
- fix cast for some systems which are broken due to absense of socklen_t, therefore now use curl_socklen_t.

- added a cast to silent compiler warning with 64bit systems.

- fixed cast added with last commit.

- cast to fix 64bit build warnings. From manpage:
  POSIX.1-2001. Note that RFC 2553 defines a prototype where the last parameter cnt is of type size_t.
  Many systems follow RFC 2553. Glibc 2.0 and 2.1 have size_t, but 2.2 has socklen_t.

Daniel Stenberg (4 Aug 2009)
- RFC1867 was updated by RFC2388

- avoid possible NULL dereference caused by my previous fix

Gisle Vanem (3 Aug 2009)
- Remove call to LoadLibrary(). (leftover from debugging).

- Fix bad sentence.

Daniel Stenberg (3 Aug 2009)
- - Timo Teras changed the reason code used in the resolve callback done when
    ares_cancel() is used, to be ARES_ECANCELLED instead of ARES_ETIMEOUT to
    better allow the callback to know what's happening.

- 256 - "More questions about ares behavior"
  yet another issue not yet sorted out

- indentation fixes only

- - Joshua Kwan fixed the init routine to fill in the defaults for stuff that
    fails to get inited by other means. This fixes a case of when the c-ares
    init fails when internet access is fone.

- respect error code from ftruncate(), mentioned by Peter Sylvester

- Reverted the zero-byte-in-name check to instead rely on the fact that strlen
  and the name length differ in those cases and thus leave the matching function
  unmodified from before, as the matching functions never have to bother with
  the zero bytes in legitimate cases. Peter Sylvester helped me realize that
  this fix is slightly better as it leaves more code unmodified and makes the
  detection a bit more obvious in the code.

- clarified configure detection of GnuTLS

- Extended my embedded-zero-in-cert-name fix based on a comment from Scott
  Cantor. My previous attempt was half-baked and didn't cover the normal CN
  case.

- mention two crashing bugs we'd like fixed

- clarify the description of the null byte in cert name fix

- - Curt Bogmine reported a problem with SNI enabled on a particular server. We
    should introduce an option to disable SNI, but as we're in feature freeze
    now I've addressed the obvious bug here (pointed out by Peter Sylvester): we
    shouldn't try to enable SNI when SSLv2 or SSLv3 is explicitly selected.
    Code for OpenSSL and GnuTLS was fixed. NSS doesn't seem to have a particular
    option for SNI, or are we simply not using it?

- - Scott Cantor posted the bug report #2829955
    (http://curl.haxx.se/bug/view.cgi?id=2829955) mentioning the recent SSL cert
    verification flaw found and exploited by Moxie Marlinspike. The presentation
    he did at Black Hat is available here:
    https://www.blackhat.com/html/bh-usa-09/bh-usa-09-archives.html#Marlinspike
  
    Apparently at least one CA allowed a subjectAltName or CN that contain a
    zero byte, and thus clients that assumed they would never have zero bytes
    were exploited to OK a certificate that didn't actually match the site. Like
    if the name in the cert was "example.com\0theatualsite.com", libcurl would
    happily verify that cert for example.com.
  
    libcurl now better use the length of the extracted name, not assuming it is
    zero terminated.

- - Tanguy Fautre pointed out that OpenSSL's function RAND_screen() (present
    only in some OpenSSL installs - like on Windows) isn't thread-safe and we
    agreed that moving it to the global_init() function is a decent way to deal
    with this situation.

- - Alexander Beedie provided the patch for a noproxy problem: If I have set
    CURLOPT_NOPROXY to "*", or to a host that should not use a proxy, I actually
    could still end up using a proxy if a proxy environment variable was set.

- updated with recent issues

- 67. When creating multipart formposts. The file name part can be encoded with
    something beyond ascii but currently libcurl will only pass in the verbatim
    string the app provides. There are several browsers that already do this
    encoding. The key seems to be the updated draft to RFC2231:
    http://tools.ietf.org/html/draft-reschke-rfc2231-in-http-02

Dan Fandrich (31 Jul 2009)
- Copy the libcurl header files into the right location for Android.

Daniel Stenberg (28 Jul 2009)
- use --insecure for the SFTP and SCP tests

- moved the changes that aren't strictly bugfixes until after 7.19.6 since I
  can't seem to catch up
  
  243 - ftp QUOTE commands that are allowed to fail but not close the connection
  is done

- - All the quote options (CURLOPT_QUOTE, CURLOPT_POSTQUOTE and
    CURLOPT_PREQUOTE) now accept a preceeding asterisk before the command to
    send when using FTP, as a sign that libcurl shall simply ignore the response
    from the server instead of treating it as an error. Not treating a 400+ FTP
    response code as an error means that failed commands will not abort the
    chain of commands, nor will they cause the connection to get disconnected.

- From: Johan van Selst
  "you replaced the old SSLeay_add_ssl_algorithms() call
  with OpenSSL_add_all_algorithms(), however unlike the name suggests,
  the second function is not a superset of the first. When using SSL
  both these functions will need to be called in order to offer complete
  functionality"

- - Bug report #2825989 (http://curl.haxx.se/bug/view.cgi?id=2825989) pointed
    out that OpenSSL-powered libcurl didn't support the SHA-2 digest algorithm,
    and provided the solution too: to use OpenSSL_add_all_algorithms() instead
    of the older SSLeay_* alternative. OpenSSL_add_all_algorithms was added in
    OpenSSL 0.9.5

- properly free data returned by aprintf(), and bring back the code to be
  independent of libssh2 version as the client code isn't really meant to adapt
  to such build-time constraints.

Gunter Knauf (25 Jul 2009)
- blocked  new stuff with HAVE_LIBSSH2_KNOWNHOST_API to check if this is our current memory leak.

- changes to silent compiler warnings with 64bit systems.

- changes to silent compiler warnings with 64bit systems.

- changes to silent compiler warnings with 64bit systems.

- fixed brace error.

- changes to silent compiler warnings with 64bit systems.

- blocked sshkeycallback() with HAVE_LIBSSH2_KNOWNHOST_API to avoid compiler warnings.

Daniel Stenberg (22 Jul 2009)
- 242 - SSH knownhost support (powered by libssh2 1.2)
  Committed now. Not yet thoroughly degbugged etc, but at least the funtionality
  is now present.

- - Added CURLOPT_SSH_KNOWNHOSTS, CURLOPT_SSH_KEYFUNCTION, CURLOPT_SSH_KEYDATA.
    They introduce known_host support for SSH keys to libcurl. See docs for
    details.

- don't set READDATA since it isn't used and only confuses readers

Michal Marek (22 Jul 2009)
- - David Binderman found a memory and fd leak in lib/gtls.c:load_file()
    (https://bugzilla.novell.com/523919). When looking at the code, I found
    that also the ptr pointer can leak.

Daniel Stenberg (21 Jul 2009)
- 66. When using telnet, the time limitation options don't work.
    http://curl.haxx.se/bug/view.cgi?id=2818950

Kamil Dudka (20 Jul 2009)
- - Claes Jakobsson improved the support for client certificates handling
    in NSS-powered libcurl. Now the client certificates can be selected
    automatically by a NSS built-in hook. Additionally pre-login to all PKCS11
    slots is no more performed. It used to cause problems with HW tokens.
  
  - Fixed reference counting for NSS client certificates. Now the PEM reader
    module should be always properly unloaded on Curl_nss_cleanup(). If the unload
    fails though, libcurl will try to reuse the already loaded instance.

Gunter Knauf (17 Jul 2009)
- trial to fix a win64 compiler warning.

- added a cast to silent compiler warning with 64bit systems.

- test if adding ../lib to includes can fix the current break ...

Dan Fandrich (15 Jul 2009)
- Added nonblock.c to the non-automake makefiles (note that the dependencies
  in the Watcom makefiles aren't quite correct).

Bill Hoffman (15 Jul 2009)
- ENH: fix build with ssl

- ENH: move dashboard location

- BUG: curl did not build with cmake with VS 2005 for two reasons, ws2tcpip.h requires winsock2.h to be included before it with that compiler, and wldap32 is not available with the default install of the compiler, so disable ldap support if that is not found

Michal Marek (15 Jul 2009)
- - Changed the description of CURLINFO_OS_ERRNO to make it clear that the
    errno is not reset on success.

Gunter Knauf (15 Jul 2009)
- fixed typo.

Bill Hoffman (14 Jul 2009)
- ENH: add optional support for c-ares

Gunter Knauf (14 Jul 2009)
- renamed generated config.h to curl_config.h in order to avoid clashes when libcurl is used with other projects which also have a config.h (missing bits)

- updated openssl version to latest; removed obsolete link to openssl patch since its now in the openssl releases.

Bill Hoffman (14 Jul 2009)
- ENH: move config.h.cmake to curl_config.h.cmake so it builds again

Gunter Knauf (14 Jul 2009)
- renamed generated config.h to ares_config.h in order to avoid clashes when libcurl is used with other projects which also have a config.h.

Bill Hoffman (14 Jul 2009)
- ENH: add nonblock.c to build for CMake

- ENH: do not report if zlib is not found as it still works

Gunter Knauf (14 Jul 2009)
- renamed generated config.h to curl_config.h in order to avoid clashes when libcurl is used with other projects which also have a config.h.

- renamed generated config.h to curl_config.h in order to avoid clashes when libcurl is used with other projects which also have a config.h.

- added PKG_CONFIG_PATH to output to better verify if it gets properly set with cross compiles.

Daniel Stenberg (11 Jul 2009)
- silence a compiler warning

- add these new files to CVS as well

- 241 - expose Curl_nonblock as curlx_nonblock
  done

- - Eric Wong introduced curlx_nonblock() that the curl tool now (re-)uses for
    setting a file descriptor non-blocking. Used by the functionality Eric
    himself brough on June 15th.

- 240 - GnuTLS configure fix to find older installations
  done

- bring back the libgnutls-config use for checking for GnuTLS if pkg-config
  doesn't work, to better fine older gnutls installs

- two more pending issues

- 245 - HTTP version getinfo

- updated with the actions I want to have done before the 7.19.6 release

- Markus Koetter's man page updates for the FTPPORT ranges

- - Constantine Sapuntzakis posted bug report #2813123
    (http://curl.haxx.se/bug/view.cgi?id=2813123) and an a patch that fixes the
    problem:
  
    Url A is accessed using auth. Url A redirects to Url B (on a different
    server0. Url B reuses a persistent connection. Url B has auth, even though
    it's on a different server.
  
    Note: if Url B does not reuse a persistent connection, auth is not sent.

Gunter Knauf (4 Jul 2009)
- added INET_ADDRSTRLEN define in case system headers dont provide.

- removed NIFLAGS which is no longer used; added NI_MAXHOST since its missing with some platforms.

- Markus Koetter provided a patch to avoid getnameinfo() usage which broke a couple of both IPv4 and IPv6 autobuilds.

Daniel Stenberg (30 Jun 2009)
- silly typo, pointed out by Fabian Keil

- Tor Arntsen pointed out a missing #ifdef for IPv6, and I changed another one
  to use the "standard" ENABLE_IPV6 one. Also, if port number cannot be figured
  out to connect to after a name resolve (due to it not being IPv4 or IPv6),
  that particular address will now simply be skipped.

- my CURLINFO_CERTINFO fix

- - Markus Koetter made CURLOPT_FTPPORT (and curl's -P/--ftpport) support a port
    range if given colon-separated after the host name/address part. Like
    "192.168.0.1:2000-10000"

- - Modified the separators used for CURLOPT_CERTINFO in multi-part outputs. I
    don't know how they got wrong in the first place, but using this output
    format makes it possible to quite easily separate the string into an array
    of multiple items.

Dan Fandrich (27 Jun 2009)
- Fixed a compiler warning.

Yang Tse (21 Jun 2009)
- Refactor how libraries are checked for connect() function, follow-up.

- Refactor how libraries are checked for connect() function,
  and check for connect() as it is done for other functions.

Gisle Vanem (20 Jun 2009)
- Remove unneeded defines.

- Use select_s() and not select().

Gunter Knauf (20 Jun 2009)
- avoid pressanykey() call when curl finishes and was launched from bash.

Michal Marek (19 Jun 2009)
- fix indentation.

Yang Tse (19 Jun 2009)
- sclose() function-like macro definition used to close a socket,
  now solely based on HAVE_CLOSESOCKET and HAVE_CLOSESOCKET_CAMEL
  config file preprocessor definitions.

- add CloseSocket camel case function check

- check for socket() and closesocket() as it is done for other functions

- socket() and closesocket() prototypes might be in socket.h

- check for socket() and closesocket() as it is done for other functions

Dan Fandrich (17 Jun 2009)
- Added a few more compiler warning options for gcc.

Daniel Stenberg (16 Jun 2009)
- - Reuven Wachtfogel made curl -o - properly produce a binary output on windows
    (no newline translations). Use -B/--use-ascii if you rather get the ascii
    approach.

Michal Marek (16 Jun 2009)
- - When doing non-anonymous ftp via http proxies and the password is not
    provided in the url, add it there (squid needs this).

Yang Tse (16 Jun 2009)
- fix compiler warning

Gunter Knauf (15 Jun 2009)
- fixed TRUE/FALSE case typo.

Daniel Stenberg (15 Jun 2009)
- - Eric Wong's patch:
  
    This allows curl(1) to be used as a client-side tunnel for arbitrary stream
    protocols by abusing chunked transfer encoding in both the HTTP request and
    HTTP response.  This requires server support for sending a response while a
    request is still being read, of course.
  
    If attempting to read from stdin returns EAGAIN, then we pause our sender.
    This leaves curl to attempt to read from the socket while reading from stdin
    (and thus sending) is paused.

- curl_multi_socket_action() is the one to use nowadays, as Mohun Biswas
  pointed out!

Patrick Monnerat (15 Jun 2009)
- Replaced use of standard C library rand()/srand() by our own pseudo-random number generator.

Yang Tse (15 Jun 2009)
- DEBUGBUILD / CURLDEBUG decoupling follow-up

-  DEBUGBUILD / CURLDEBUG decoupling follow-up

- Remove HAVE_CONFIG_H definition from here,
  CFLAGS from common.dj already defines it.

- add default USE_CURLDEBUG setting

- initial step towards decoupling c-ares from libcurl for DOS

- improve usability with UNIX-like shells or a DOS command interpreters

- don't ignore these subdirs, they must be removed first

- Remove DEBUGBUILD symbol definition, is not required for programs using the library.

- DEBUGBUILD symbol definition for debug builds

- ignore some subdirs

- fix comment

- Try to make more clear that --enable-curldebug has nothing to do with --enable-debug for this library.

- Revert last change, it is inappropriate.

Gisle Vanem (12 Jun 2009)
- Replace CURLDEBUG with DEBUGBUILD.

Yang Tse (12 Jun 2009)
- fix compiler warning

- Fixed to take in account the different interpretation of double
  quootes on UNIX-like shells vs DOS-like command interpreters.

- include <limits.h> for INT_MAX definition

- fix compiler warning

- fix compiler warning

- when running automake copy missing files instead of symlinking them

- DOS adjustments

- added header inclusion guard

- mention configure --enable-curldebug decoupled from --enable-debug

- changed testcurl script to allow building test harness
  programs when cross-compiling for a *-*-mingw* host.

Daniel Stenberg (10 Jun 2009)
- - Fabian Keil ran clang on the (lib)curl code, found a bunch of warnings and
    contributed a range of patches to fix them.

- extended the CURLOPT_HEADERFUNCTION description with Aaron Oneal's help

Yang Tse (10 Jun 2009)
- VMS adjustments

Bill Hoffman (10 Jun 2009)
- ENH: extract version from curlver.h

Yang Tse (10 Jun 2009)
- VMS adjustment

- fix language in comment

- TrackMemory is another feature not supported by curl-config

- Adjusted to take in account that...
  
  With the curl memory tracking feature decoupled from the debug build feature,
  CURLDEBUG and DEBUGBUILD preprocessor symbol definitions are used as follows:
  
  CURLDEBUG used for curl debug memory tracking specific code (--enable-curldebug)
  
  DEBUGBUILD used for debug enabled specific code (--enable-debug)

- Added --enable-curldebug configure option to enable and disable building
  with the low-level curl debug memory tracking 'feature' to allow decoupled
  setting from --enable-debug.

- c-ares' --enable-debug --enable-curldebug decoupling follow-up

Bill Hoffman (9 Jun 2009)
- ENH: lower case cmake functions and remove tabs and re-indent cmake code

Daniel Stenberg (9 Jun 2009)
- providing two more answers

Yang Tse (9 Jun 2009)
- initialize fread callback pointer to avoid compiler warning

- fix compiler warning

Daniel Stenberg (8 Jun 2009)
- - Claes Jakobsson provided a patch for libcurl-NSS that fixed a bad refcount
    issue with client certs that caused issues like segfaults.
    http://curl.haxx.se/mail/lib-2009-05/0316.html

- - Triggered by bug report #2798852 and the patch in there, I fixed configure
    to detect gnutls build options with pkg-config only and not libgnutls-config
    anymore since GnuTLS has stopped distributing that tool. If an explicit path
    is given to configure, we will instead guess on how to link and use that
    lib. I did not use the patch from the bug report.

Yang Tse (8 Jun 2009)
- fix compiler warning: signed and unsigned type in conditional expression

- mention last changes

- mention last changes

- Igor Novoseltsev provided docs\INSTALL VxWorks section

- Igor Novoseltsev adjusted Makefile.vxworks to get sources and headers
  included from Makefile.inc

- Use curl_off_t and CURL_FORMAT_CURL_OFF_T for file size.

- Remove buildconf.bat from release and daily snapshot archives.
  
  buildconf.bat is only for CVS tree builds.

- Ensure that buildconf.bat does nothing unless it is used with a CVS checkout.

- CVS-INFO file only present in CVS tree, never in release nor daily snapshot
  archives. Used as a sentinel file in buildconf.bat to differentiate CVS builds.

Daniel Stenberg (8 Jun 2009)
- djgpp build fix

- ../include/curl/curlbuild.h.dist is not present in release archives so
  the makefile cannot depend on it

Gisle Vanem (8 Jun 2009)
- Update comment about "ML". Removed "-D_USE_32BIT_TIME_T" (not a requirement).

Yang Tse (8 Jun 2009)
- just comment it out

- For debugging purposes...
  
  Disable the '-export-symbols-regex' to discard this as the origin
  of link failures related with shared libraries and non-GNU linkers.

- Adjusted libtool version parsing due to libtool --version now also
  reporting package version in parentheses which confused this script.
  
  Remove debug tracing used to debug this.

Daniel Stenberg (7 Jun 2009)
- Bill Hoffman (6 June 2009)
  - Added some cmake docs and fixed socklen_t in the build.

- - Eric Wong fixed --no-buffer to actually switch off output buffering. Been
    broken since 7.19.0

Yang Tse (7 Jun 2009)
- debug test a non-greedy pattern

- Add some debug tracing

- remove the ofending regexp

- remove line not intended to be committed

- attempt to fix regex

- Adjusted libtool version parsing due to libtool --version now also
  reporting package name in parentheses which confused this script.

- Revert delegating c-ares linking magic on libtool and auto-makefiles when using
  the uninstalled c-ares libtool archive built from the CVS embedded tree.
  
  This embedded c-ares linking is again handled from the configure script.

- c-ares Makefile.am back to using $(top_builddir) for *_LDADD

Bill Hoffman (6 Jun 2009)
- ENH: add some cmake docs and fix build with socklen_t

Yang Tse (5 Jun 2009)
- mention last changes

- docs/example patches for VMS

- Depending on the libtool and automake versions being used config.guess gets
  installed in the subdirectory at different stages. With some versions it is
  installed when libtoolize finishes, but with others it is not installed
  until automake has finished.
  
  So we can not attempt to use config.guess until the very last buildconf stage.

- mention last changes

- introduction of os-specific.c and os-specific.h

- c-ares' -no-undefined and --enable-curldebug adjustments

Daniel Stenberg (5 Jun 2009)
- remove conflict markers

- - Setting the Content-Length: header from your app when you do a POST or PUT
    is almost always a VERY BAD IDEA. Yet there are still apps out there doing
    this, and now recently it triggered a bug/side-effect in libcurl as when
    libcurl sends a POST or PUT with NTLM, it sends an empty post first when it
    knows it will just get a 401/407 back. If the app then replaced the
    Content-Length header, it caused the server to wait for input that libcurl
    wouldn't send. Aaron Oneal reported this problem in bug report #2799008
    http://curl.haxx.se/bug/view.cgi?id=2799008) and helped us verify the fix.

Yang Tse (4 Jun 2009)
- fix shadowing of a global declaration

- allow building libcurl for VxWorks

- c-ares embbeded builds header include paths fully defined in makefiles

- Remove more generated files.
  
  Yet unknown error might leave libtool-like files in source directory.

- Remove more generated files

- Remove all generated 'Makefile' files.
  
  This can be done now that no file with such name exists in CVS tree.

- Remove more generated files

- Die when instructed to build c-ares and this fails

Dan Fandrich (2 Jun 2009)
- Created a basic Android make file for curl and libcurl. A config.h
  is also needed before curl can be built in Android, but it's not clear
  what the best way is to provide one.

Yang Tse (2 Jun 2009)
- Use relative path to built c-ares tree libtool library

- Temporarily disable config.guess related checks

Daniel Stenberg (1 Jun 2009)
- - Claes Jakobsson fixed the configure script to better find and use NSS
    without pkg-config.

Yang Tse (1 Jun 2009)
- credit John E. Malmberg

- John E. Malmberg noticed that the configure script was failing to detect the
  timeval struct on VMS when building with _XOPEN_SOURCE_EXTENDED undefined due
  to definition taking place in socket.h instead of time.h

- John E. Malmberg's VMS specific clean-up for curl.h

- HP-UX requires libtool version 1.5.24 or newer

- Delegate c-ares linking magic on libtool and auto-makefiles when using
  the uninstalled c-ares libtool archive built from the CVS embedded tree.

Dan Fandrich (30 May 2009)
- Added missing NTLM feature for test 1097

- Allow compiling under Android

Yang Tse (29 May 2009)
- Fix compiler warning: out of bound access

Daniel Stenberg (29 May 2009)
- corrected comments

Dan Fandrich (28 May 2009)
- Fixed a few comment typos (from the FreeBSD ports)

Yang Tse (28 May 2009)
- fix compilation on AIX

- fix compiler warning: variable was set but never used

- fix compiler warning: unused parameter

- c-ares' --enable-curldebug adjustments

- Remove temporarily introduced memory leak.

Daniel Stenberg (27 May 2009)
- - Claes Jakobsson fixed libcurl-NSS to build fine even without the
    PK11_CreateGenericObject() function.

- - Mike Crowe pointed out that setting CURLOPT_USERPWD to NULL used to clear
    the auth credentials back in 7.19.0 and earlier while now you have to set ""
    to get the same effect. His patch brings back the ability to use NULL.

- - Andre Guibert de Bruet found a call to a OpenSSL function that didn't check
    for a failure properly.

- - Frank McGeough provided a small OpenSSL #include fix to make libcurl compile
    fine with Nokia 5th edition 1.0 SDK for Symbian.

Yang Tse (27 May 2009)
- Temporarily introduce a memory leak to verify curl debug memory tracking works.

- Allow curl debug memory tracking when building a shared library on
  systems which support external, undefined, symbols in shared libraries.

Daniel Stenberg (26 May 2009)
- language fix

Yang Tse (26 May 2009)
- Make ares_init(), ares_dup() and ares_init_options() return ARES_ENOTINITIALIZED
  if library initialization has not been performed calling ares_library_init().

- c-ares's --enable-curldebug configure option decoupled from c-ares's --enable-debug

- Prevent copying 'sourced' manpages for build targets that don't use them.

Daniel Stenberg (25 May 2009)
- - bug report #2796358 (http://curl.haxx.se/bug/view.cgi?id=2796358) pointed
    out that the cookie parser would leak memory when it parses cookies that are
    received with domain, path etc set multiple times in the same header. While
    such a cookie is questionable, they occur in the wild and libcurl no longer
    leaks memory for them. I added such a header to test case 8.

- minor edits

Dan Fandrich (22 May 2009)
- Added some missing test keywords

- Removed some obsolete digest code that caused a valgrind error in test 551.

Yang Tse (21 May 2009)
- Include .pdf versions of c-ares man pages in distribution tarball.

- Allow generation of .html and .pdf versions of c-ares man pages.

Gunter Knauf (21 May 2009)
- forced to use nmake for VC builds early so that its also used for ares even if we find a GNU make first in path; simplified curl make call.

- strip \r only on non-win32 platforms (wine on Linux).

- removed an attempt to write to non-opened LOG introduced with r1.30.

- reduced duplicate code.

- stripped \r from win32 curl --version output.

- enable mingw64 target.

Gisle Vanem (21 May 2009)
- $(OBJ_DIR)/ares_getopt.o must be cleaned explicitly.

- Added CVS id.

- Update coments. Long-file name setup is required.
  C-Ares and IPv6 is no longer a bad combo.

Dan Fandrich (20 May 2009)
- Added "non-existing host" test keywords to make it easy to skip those
  tests on machines that have broken DNS configurations (such as
  those configured to use OpenDNS).

Yang Tse (20 May 2009)
- Mention last changes

- Initial ares_library_cleanup(3) man page

- Update man page

- Update man page

Gunter Knauf (19 May 2009)
- changed ssh.c to use HAVE_LIBSSH2_SESSION_BLOCK_DIRECTION define provided by libssh2.h; removed related define block from ssh.h.

Daniel Stenberg (19 May 2009)
- - Kamil Dudka brought the patch from the Redhat bug entry
    https://bugzilla.redhat.com/show_bug.cgi?id=427966 which was libcurl closing
    a bad file descriptor when closing down the FTP data connection.  Caolan
    McNamara seems to be the original author of it.

Yang Tse (19 May 2009)
- Initial ares_library_init(3) man page attempt

- Force revision update, to force CVS to update the $Id date string format

- Add same copyright notice as other c-ares files

- Fix case

- Force revision update, to force CVS to update the $Id date string format

- Remove empty line used to force CVS to update the $Id date string format

- Remove run-time requirement for advapi32.dll since
  c-ares can work even with no advapi32.dll at all.

- Add empty line, to force CVS to update the $Id date string format

- Update copyright year, to force CVS to update the $Id date string format

Patrick Monnerat (18 May 2009)
- Added seek callback definitions in RPG wrappers
  Made OS400 version compilable again

Daniel Stenberg (18 May 2009)
- start climbing to 7.19.6

- 7.19.5 brought 16 new contributors

Version 7.19.5 (18 May 2009)

Daniel Stenberg (18 May 2009)
- 7.19.5 coming up

Yang Tse (18 May 2009)
- Remove temporary debug tracing, and add nasty error explanation

- Intentionally avoid checking if the address of SystemFunction036, a.k.a.
  RtlGenRandom, has been located or not. This function is only available on
  WinXP and later. When unavailable c-ares uses portable rand() function.

- Simplify c-ares function capability check

- - Provide in external interface preprocessor symbol definitions for
    CARES_HAVE_ARES_LIBRARY_INIT and CARES_HAVE_ARES_LIBRARY_CLEANUP
    to ease the use of new capabilities.
  
  - Move ares_version() prototype to ares.h

Gunter Knauf (17 May 2009)
- fixed case.

Yang Tse (17 May 2009)
- Take in account c-ares 1.6.1 introduces ares_library_init() and ares_library_cleanup()

- Introduction of ares_library_init() and ares_library_cleanup()

- Introduction of ares_library_init() and ares_library_cleanup()

Daniel Stenberg (17 May 2009)
- - James Bursa posted a patch to the mailing list that fixed a problem with
    no_proxy which made it not skip the proxy if the URL entered contained a
    user name. I added test case 1101 to verify.

Yang Tse (15 May 2009)
- Extend displaying of logfiles upon first server start-up failure for http, https, ftp, ftps and tftp test harness servers.

- Displaying of logfiles on ftp server satrtup failure for test case #100 becomes standard.

- fix compiler warning: unused variable

- remove outdated comment

- Fix preprocessor conditional expression

- Add some debug tracing

- Fix detection of automatically choosen listener port number on IPv6 enabled builds.

- log each setsockopt/SO_REUSEADDR failure

- fix print formatting-string directives

- temporary debug trace for ftp server satrtup failure on testcase #100

Daniel Stenberg (12 May 2009)
- Reverted my change to use Curl_connected_proxy() here. Clearly I wasn't
  thinking straight.

Yang Tse (12 May 2009)
- fix LC_ALL and LC_CTYPE when set with conflicting values

Daniel Stenberg (12 May 2009)
- make no proxy set return OK from Curl_connected_proxy() since it will be called
  unconditionally

Yang Tse (12 May 2009)
- fiX *__SOCKLEN_T definitions for remaining targets

- *__SOCKLEN_T definitions for OS400 already fixed

Daniel Stenberg (11 May 2009)
- curl_multi_socket and curl_multi_socket_all to be removed at next major
  release, or bump or whatevere

- split off curl_multi_socket_action() into its own separate man page as this is
  the function we should use, while both curl_multi_socket() and
  curl_multi_socket_all() should be killed!

- curl_multi_socket_action() is the one we favor!

- TELNET transfers and SOCKS handshakes are blocking too

Yang Tse (11 May 2009)
- fIX *__SOCKLEN_T definitions for SYMBIAN32 and VMS targets

Daniel Stenberg (11 May 2009)
- "228 - rpath problems in linking with custom openssl" removed
  I just posted about this decision on the curl-library list.

Yang Tse (11 May 2009)
- #234 Done!

- Adjust test definition for TPF.

- Fetch curl's 'CharConv' feature information, used by TPF.

Daniel Stenberg (11 May 2009)
- - Gregor Jasny made c-ares link with libtool 's -export-symbols-regex option to
    only expose functions starting with ares_.

- timeout in milliseconds works for me!

- Added KNOWN_BUGS #65, and marked it for TODO in the _next_ release as I'm
  not in the mood enough to fight this now.
  
  65. When doing FTP over a socks proxy or CONNECT through HTTP proxy and the
    multi interface is used, libcurl will fail if the (passive) TCP connection
    for the data transfer isn't more or less instant as the code does not
    properly wait for the connect to be confirmed. See test case 564 for a first
    shot at a test case.

- moved variables more locally to get rid of one set of #ifdefs

- Use Curl_connected_proxy() here instead of duplicating code. Spell out the
  badness in the code flow even for the socks case.

- fix the Curl_connected_proxy function for when libcurl actually connects fine
  to it in the actual connect call and not asynchronously.

- Added test 564 as DISABLED. It is for testing FTP over a SOCK4 proxy using
  the multi interface, which currently doesn't work because of how the data
  connection is not waiting for connect before it tries to do proxy magic.

- support --help to do the same as -h

- - Balint Szilakszi reported a memory leak when libcurl did gzip decompression
    of streams that had some parts (legitimately) missing. We now provide and use
    a proper cleanup function for the content encoding submodule.
    http://curl.haxx.se/mail/lib-2009-05/0092.html

- - Kamil Dudka provided a fix for libcurl-NSS reported by Michael Cronenworth
    at https://bugzilla.redhat.com/show_bug.cgi?id=453612#c12
  
    If an incorrect password is given while loading a private key, libcurl ends
    up in an infinite loop consuming memory. The bug is critical.

- - I fixed the problem with doing NTLM, POST and then following a 302 redirect,
    as reported by Ebenezer Ikonne (on curl-users) and Laurent Rabret (on
    curl-library). The transfer was mistakenly marked to get more data to send
    but since it didn't actually have that, it just hung there...

- Internal cleanup: KEEP_WRITE and KEEP_READ are now called KEEP_SEND and
  KEEP_RECV to better match the general terminology: receive and send is what we
  do from the (remote) servers. We read and write from and to the local fs.

Yang Tse (11 May 2009)
- Fix name of tool shown upon error.

- Remove experimental check. Currently there's no need for it.

Daniel Stenberg (10 May 2009)
- Added test 1100 - "HTTP POST with NTLM authorization and following a 302
  redirect" doesn't work, seems to repeat what Ebenezer Ikonne (on curl-users)
  and Laurent Rabret (on curl-library) have reported. Disabled for now.

- the Curl_getoff_all_pipelines SIGSEGV fix is committed

- - Andre Guibert de Bruet correctly pointed out an over-alloc with one wasted
    byte in the digest code.

- introduce VCURL for verify calls, so that it can be changed to use a different
  binary than the one that gets tested, if need be

- made the cookie tests 61 and 62 test httponly cookies, both receiving in
  headers and reading from cookie-jar

Yang Tse (10 May 2009)
- Fix function call pointed data size argument mismatch on 64Bit systems

- Fix type cast

Daniel Stenberg (9 May 2009)
- ConnectPlease() fixed for the new proxy connect functionality to make sure
  'connected' truly is false when the socks connect fails.
  
  Curl_done() fixed for the check-conn->bits.done-before-Curl_getoff_all_pipelines case

Yang Tse (9 May 2009)
- Fix libssh2 preprocessor symbol definition check

- Mention last changes

- Makefile.am was lost

- Remove DOS and TPF package's Makefile.am
  Not actually needed to simply include some files in the distribution tarball.

- Ignore more files for cvs

- Mention last changes

- Fix CR

- Renamed vc6 workspace and project files to avoid filename clash when used for conversion to later VS versions.

- Renamed vc6 workspace and project files to avoid filename clash when used for conversion to later VS versions.

- Changed host name to be under the haxx.se domain

Daniel Stenberg (8 May 2009)
- Ah, this was committed by mistake as part of my previous commit but it seems
  to work so I'll let it remain and here's the comment about it! From Lenaic's
  mail posted to curl-library Date: Fri, 1 May 2009 22:46:14 +0200.

- - Constantine Sapuntzakis fixed bug report #2784055
    (http://curl.haxx.se/bug/view.cgi?id=2784055) identifying a problem to
    connect to SOCKS proxies when using the multi interface. It turned out to
    almost not work at all previously. We need to wait for the TCP connect to
    be properly verified before doing the SOCKS magic.
  
    There's still a flaw in the FTP code for this.

Yang Tse (8 May 2009)
- Remove temporary and HP-UX autobuild specific change to debug SSH server start-up failures

- Fixes for non-ASCII platforms by David McCreedy

Daniel Stenberg (7 May 2009)
- Curl_sndbufset is (at times) defined in the header, no need to do it again here

- - Made the SO_SNDBUF setting for the data connection socket for ftp uploads as
    well. See change 28 Apr 2009.

Yang Tse (7 May 2009)
- 232 - [PATCH] transfer.c fixes for CURL_DO_LINEEND_CONV and non-ASCII
        platform HTTP requests
  Done!

- Fix an issue, affecting FTP transfers, introduced with the transfer.c patch committed May 4.
  
  Additionally some identation fixes.

- Fix an m4 overquoting triggering a spurious 'AS_TR_CPP' symbol definition
  attempt in generated config.h

- Proper naming for the experimental compiler test and moved to *-compilers.m4

Daniel Stenberg (7 May 2009)
- added Curl_getoff_all_pipelines SIGSEGV

- added mention of two more current bugs/issues

Yang Tse (7 May 2009)
- Moved *_CHECK_COMPILER_HALT_ON_ERROR and *_CHECK_COMPILER_ARRAY_SIZE_NEGATIVE to *-compilers.m4 along with other *_CHECK_COMPILER_*

Daniel Stenberg (7 May 2009)
- man page warnings fixed

- - Man page *roff problems fixed thanks to input from Colin Watson. Problems
    reported in the Debian package.

- - Vijay G filed bug report #2723236
    (http://curl.haxx.se/bug/view.cgi?id=2723236) identifying a problem with
    libcurl's TFTP code and its lack of dealing with the OACK packet.

Yang Tse (6 May 2009)
- Use autobuilds to verify if a couple of experimental compiler tests pass on all of them.
  This will be removed in 24 or 48 hours.

- curl_sockaddr struct member addrlen is an 'unsigned int' since 7.18.0

- fIX *__SOCKLEN_T definitions for OS400 and generic GCC targets

- Temporary and HP-UX autobuild specific change to debug SSH server start-up failures

- fix compiler warning

- reintroduce #232

- Mention last changes

- Revert change committed on Mon May 4 09:30:23 2009 UTC.
  
  The origin of the problem with test case #251 was the --ftp-port not being the CLIENTIP address.

Daniel Stenberg (5 May 2009)
- I simplified the SSL session id re-use code now to *always* ditch the previous
  one and store the current one, as it makes the code less complex and I'm not
  even sure I can check for the same session id using memcmp() like that.

Yang Tse (5 May 2009)
- Fixed the --ftp-port address to the CLIENTIP address.

Daniel Stenberg (4 May 2009)
- - Inspired by Michael Smith's session id fix for OpenSSL, I did the
    corresponding fix in the GnuTLS code: make sure to store the new session id
    in case the re-used one is rejected.

- - Michael Smith posted bug report #2786255
    (http://curl.haxx.se/bug/view.cgi?id=2786255) with a patch, identifying how
    libcurl did not deal with SSL session ids properly if the server rejected a
    re-use of one. Starting now, it will forget the rejected one and remember
    the new. This change was for OpenSSL only, it is likely that other SSL lib
    code needs similar fixes.

- more return codes added

Yang Tse (4 May 2009)
- fIX *__SOCKLEN_T definitions for MVS and 370 targets

- fIX *__SOCKLEN_T definitions for several Windows target tool-chains

Daniel Stenberg (4 May 2009)
- a busload symbols added

- Philippe Vaucher reported this typo

Yang Tse (4 May 2009)
- David McCreedy's patch to fix test suite harness to allow test FTP server and client on different machines, providing FTP client address when running the FTP test server.

- David McCreedy's "transfer.c fixes for CURL_DO_LINEEND_CONV and non-ASCII platform HTTP requests" patch

- fix makefile reference to packages/TPF

- ignore this

- HP-UX's X/Open network library requirement check follow-up

Dan Fandrich (3 May 2009)
- Added and disabled test case 563 which shows KNOWN_BUGS #59.  The bug
  report failed to mention that a proxy must be used to reproduce it.

Yang Tse (3 May 2009)
- HP-UX's X/Open network library requirement check follow-up

- This wasn't intended to be committed.
  
  So, until fixed this will remain FIXME.

- Use build-time configured curl_socklen_t instead of socklen_t

- Use build-time configured ares_socklen_t instead of socklen_t

- Remove temporary debug tracing for X/Open HP-UX

- Mention David McCreedy's patches applied today

- David McCreedy's "TPF-platform specific changes to various files" patch follow-up

Daniel Stenberg (1 May 2009)
- fixed: 229 - [PATCH] to correct spelling in ABI

- Jose Goncalves fixed my crappy spelling!

- #2784055, connect race with multi and socks proxy
  
  bad enough to almost make socks proxies with multi interface unusable

- s/libcurl/c-ares

- version number typo fix

Yang Tse (1 May 2009)
- David McCreedy's "http.c fix to Curl_proxyCONNECT for non-ASCII platforms" patch

- David McCreedy's "TPF-platform specific changes to various files" patch

Daniel Stenberg (1 May 2009)
- mention a bunch of pending patches to deal with

Yang Tse (1 May 2009)
- Check definition of _XOPEN_SOURCE_EXTENDED with the compiler

- Add temporary debug tracing for X/Open HP-UX

- Check if X/Open network library is required

- When generated, display libcurl.pc and libcares.pc

- cope with ares_build.h and ares_rules.h follow-up

- Added some notes regarding ares_build.h

- fix EOL

- fix EOL

- cope with ares_build.h and ares_rules.h

- buildconf.bat for CVS-tree c-ares

- fix compiler warning: unused parameter

Daniel Stenberg (30 Apr 2009)
- - I was going to fix issue #59 in KNOWN_BUGS
  
    If the CURLOPT_PORT option is used on an FTP URL like
    "ftp://example.com/file;type=A" the ";type=A" is stripped off.
  
    I added test case 562 to verify, only to find out that I couldn't repeat
    this bug so I hereby consider it not a bug anymore!

- provide some track record of the SONAME bumps

- mention that cvs is needed for releases

Yang Tse (30 Apr 2009)
- Use 'unsigned int' instead of size_t attempting to avoid header inclusion

- NetWare LibC's getpeername() third argument data type is size_t

- Display only CURL_* and CARES_* symbol/macro definitions from curlbuild.h and ares_build.h

- Remove temporary debug tracing for ares_socklen_t Windows targets

- Trigger c-ares prebuild stage for fake-config setup's

- curl_socklen_t NetWare follow-up

- curl_socklen_t follow-up

- ares_socklen_t follow-up

- ares_build.h Windows follow-up

Daniel Stenberg (29 Apr 2009)
- mention the new CURL_SEEKFUNC_ symbols

- - Based on bug report #2723219 (http://curl.haxx.se/bug/view.cgi?id=2723219)
    I've now made TFTP "connections" not being kept for re-use within libcurl.
    TFTP is UDP-based so the benefit was really low (if even existing) to begin
    with so instead of tracking down to fix this problem we instead removed the
    re-use. I also enabled test case 1099 that I wrote a few days ago to verify
    that this change fixes the reported problem.

Yang Tse (29 Apr 2009)
- Add temporary debug tracing for ares_socklen_t Windows targets

- ares_build.h NetWare follow-up

- When running testcurl.pl display definitions from ares_build.h

- allow usage of in-tree c-ares when building from outside of the cvs tree

- ares_build.h NetWare attempt

Daniel Stenberg (28 Apr 2009)
- - Constantine Sapuntzakis filed bug report #2783090
    (http://curl.haxx.se/bug/view.cgi?id=2783090) pointing out that on windows
    we need to grow the SO_SNDBUF buffer somewhat to get really good upload
    speeds. http://support.microsoft.com/kb/823764 has the details. Friends
    confirmed that simply adding 32 to CURL_MAX_WRITE_SIZE is enough.

Yang Tse (28 Apr 2009)
- allow usage of in-tree c-ares when building from outside of the cvs tree

- Initial step towards a configure time ares_socklen_t definition

- ignore stamp-h*

Daniel Stenberg (28 Apr 2009)
- Fixed: 225 - resume when upload from stream, #2709004

- - Bug report #2709004 (http://curl.haxx.se/bug/view.cgi?id=2709004) by Tim
    Chen pointed out how curl couldn't upload with resume when reading from a
    pipe.
  
    This ended up with the introduction of a new return code for the
    CURLOPT_SEEKFUNCTION callback that basically says that the seek failed but
    that libcurl may try to resolve the situation anyway. In our case this means
    libcurl will attempt to instead read that much data from the stream instead
    of seeking and that way curl can now upload with resume when data is read
    from a stream!

Yang Tse (28 Apr 2009)
- Added CARES_INCLUDES_SYS_TYPES

- Rearrange placement inside file of CURL_DEFINE_UNQUOTED, CURL_CONFIGURE_LONG
  and CURL_CONFIGURE_CURL_SOCKLEN_T to ease future maintainance.

- Moved CURL_INCLUDES_INTTYPES to curl-functions.m4 along with other CURL_INCLUDES_*

- Remove temporary debug tracing for curl_socklen_t detection failures

- Include <arpa/inet.h> if HAVE_ARPA_INET_H is defined

- Log MAKEFLAGS environment variable along with the others.

- Take 2 at handling getpeername() prototypes with a void pointer for third argument

- Attempt to handle getpeername() prototypes with a void pointer for third argument

Daniel Stenberg (27 Apr 2009)
- Add missing cmake files to the tarball (thanks to Richard Atterer's report)

- the windows threaded resolver isn't foolproof enough

Yang Tse (27 Apr 2009)
- Add temporary debug tracing for curl_socklen_t detection failures

- Reorder curl_socklen_t and socklen_t equivalent check while both coexist

- Rearrange curl_socklen_t tests to improve speed of usual results

- Initial step towards a configure time curl_socklen_t definition

Daniel Stenberg (26 Apr 2009)
- Fixed: 227 - CURLINFO_APPCONNECT_TIME doesn't work with multi interface, #2779733

- - Bug report #2779733 (http://curl.haxx.se/bug/view.cgi?id=2779733) by Sven
    Wegener pointed out that CURLINFO_APPCONNECT_TIME didn't work with the multi
    interface and provided a patch that fixed the problem!

- removed pointless file

- synced with current reality

Yang Tse (25 Apr 2009)
- Further narrow the use of the icc 9.1 optimizer workaround.
  
  Previous workaround proved useful, and finally did not trigger any warning!

Daniel Stenberg (24 Apr 2009)
- - Kamil Dudka fixed another NSS-related leak when client certs were used.

- test 1099: "TFTP get first a non-existing file then an existing" added disabled
  as things don't work right here!

Yang Tse (24 Apr 2009)
- Try a simpler variation of the 'volatile' variables icc 9.1 on unix IA32 workaround.
  
  Previous workaround proved useful, but triggered the following warning:
  
  warning #556: a value of type "volatile Curl_addrinfo *" cannot be assigned to an entity of type "Curl_addrinfo *"

Daniel Stenberg (23 Apr 2009)
- for is docs remarks

- - bug report #2779245 (http://curl.haxx.se/bug/view.cgi?id=2779245) by Rainer
    Koenig pointed out that the man page didn't tell that the *_proxy
    environment variables can be specified lower case or UPPER CASE and the
    lower case takes precedence,

- CURLOPT_POSTQUOTE commands only run when no error

Yang Tse (23 Apr 2009)
- Try another variation of the 'volatile' variables icc 9.1 on unix IA32 workaround.
  
  The #pragma optimize("", off) attempt did not fix the problem and SIGSEGV's in Curl_freeaddrinfo() were back.

Dan Fandrich (23 Apr 2009)
- Added new libcurl source files to Amiga, RiscOS and VC6 build files.

Yang Tse (22 Apr 2009)
- Disable optimizations when compiling function Curl_freeaddrinfo() with icc 9.1 on unix IA32.
  
  Previous 'volatile' variables workaround proved useful, but it triggered the following warning:
  
  warning #167: argument of type "volatile Curl_addrinfo *" is incompatible with parameter of type "void *"

- avoid use of alloca()

- libcurl's memory.h renamed to curl_memory.h

- Moved potential inclusion of system's malloc.h and memory.h header files to
  setup_once.h.  Inclusion of each header file is based on the definition of
  NEED_MALLOC_H and NEED_MEMORY_H respectively.

- remove unnecessary typecast

- ignore

Daniel Stenberg (20 Apr 2009)
- - Leanic Lefever reported a crash and did some detailed research on why and
    how it occurs (http://curl.haxx.se/mail/lib-2009-04/0289.html). The
    conclusion was that if an error is detected and Curl_done() is called for
    the connection, ftp_done() could at times return another error code that
    then would take precedence and that new code confused existing logic that
    works for the first error code (CURLE_SEND_ERROR) only.

- - Gisle Vanem noticed that --libtool would produce bogus strings at times for
    OBJECTPOINT options. Now we've introduced a new function - my_setopt_str -
    within the app for setting plain string options to avoid the risk of this
    mistake happening.

Yang Tse (19 Apr 2009)
- attempt to workaround icc 9.1 optimizer induced problem

Daniel Stenberg (18 Apr 2009)
- escape the ' properly

- 63. When CURLOPT_CONNECT_ONLY is used, the handle cannot reliably be re-used
    for any further requests or transfers. The work-around is then to close that
    handle with curl_easy_cleanup() and create a new. Some more details:
    http://curl.haxx.se/mail/lib-2009-04/0300.html

Gisle Vanem (18 Apr 2009)
- Added 'slist.obj'.

- Added HAVE_LIMITS_H.

- Added '-DHAVE_LIMITS_H'.

- Avoid compiler warning about unused argument.

Daniel Stenberg (17 Apr 2009)
- mention Pramod Sharma and "persistent connections when doing FTP over a HTTP proxy"

- As Jeff Pohlmeyer suggested: "pointer to 'char *'" is now instead put:
  "pointer to a char pointer".

- - Pramod Sharma reported and tracked down a bug when doing FTP over a HTTP
    proxy. libcurl would then wrongly close the connection after each
    request. In his case it had the weird side-effect that it killed NTLM auth
    for the proxy causing an inifinite loop!
  
    I added test case 1098 to verify this fix. The test case does however not
    properly verify that the transfers are done persistently - as I couldn't
    think of a clever way to achieve it right now - but you need to read the
    stderr output after a test run to see that it truly did the right thing.

Yang Tse (17 Apr 2009)
- remove compiler options used while debugging the icc 9.1 optimizer issue

- re-enable all tests for all icc autobuilds

- further narrow the use of the icc 9.1 optimizer workaround

- attempt to workaround icc 9.1 optimizer induced problem

- moved HAVE_LIMITS_H to common defines

- Set HP-UX compiler warning level back to the one that exposes
  the socklen_t issue on this platform.

Gunter Knauf (15 Apr 2009)
- moved HAVE_LIMITS_H to common defines (no idea why I didnt this initially already)

Yang Tse (14 Apr 2009)
- HAVE_LIMITS_H definition for NetWare CLIB

Daniel Stenberg (14 Apr 2009)
- first take at bundling cmake-related files in the tarball

- things in the pipe right now

Yang Tse (14 Apr 2009)
- use HAVE_LIMITS_H symbol to protect limits.h inclusion

- include <limits.h> for INT_MAX definition

- fix compiler warning: implicit conversion shortens 64-bit value into a 32-bit value

Benoit Neil (14 Apr 2009)
- (Minor change - From Piotr Dobrogost) Moved a line.

Daniel Stenberg (14 Apr 2009)
- Kamil Dudka's follow-up fix

- - bug report #2727981 (http://curl.haxx.se/bug/view.cgi?id=2727981) by Martin
    Storsjo pointed out how setting CURLOPT_NOBODY to 0 could be downright
    confusing as it set the method to either GET or HEAD. The example he showed
    looked like:
  
     curl_easy_setopt(curl, CURLOPT_PUT, 1);
     curl_easy_setopt(curl, CURLOPT_NOBODY, 0);
  
    The new way doesn't alter the method until the request is about to start. If
    CURLOPT_NOBODY is then 1 the HTTP request will be HEAD. If CURLOPT_NOBODY is
    0 and the request happens to have been set to HEAD, it will then instead be
    set to GET. I believe this will be less surprising to users, and hopefully
    not hit any existing users badly.

- - Toshio Kuratomi reported a memory leak problem with libcurl+NSS that turned
    out to be leaking cacerts. Kamil Dudka helped me complete the fix. The issue
    is found in Redhat's bug tracker:
    https://bugzilla.redhat.com/show_bug.cgi?id=453612
  
    There are still memory leaks present, but they seem to have other reasons.

Yang Tse (13 Apr 2009)
- fix compiler warning: implicit conversion shortens 64-bit value into a 32-bit value

- improve stunnel version detection

Dan Fandrich (11 Apr 2009)
- Added new libcurl source files to Symbian OS build files.
  Improved Symbian support for SSL.

Yang Tse (11 Apr 2009)
- Use 'curl_socket_t' instead of 'int' for socket.
  
  Avoid unnecessary'if-else' nesting.

- fix compiler warning: enumerated type mixed with another type

- Adjust comment

- Daniel Johnson improved the MacOSX-Framework shell script to now perform all
  the steps required to build a Mac OS X four way fat ppc/i386/ppc64/x86_64
  libcurl.framework.  Four way fat framework requires OS X 10.5 SDK or later.

Benoit Neil (9 Apr 2009)
- (Minor update) Moved some utilities to a separate file.

- Cleaned up the custom definition I added (replaced by CURL_STATICLIB)

Gunter Knauf (9 Apr 2009)
- some minor Makefile tweaks for latest libssh2.

- add back most likely acciedently removed function name justtimeout to fix autobuild breaks.

Yang Tse (9 Apr 2009)
- Skip test #558 and #559 also when using a Win32 DLL

Benoit Neil (8 Apr 2009)
- (Minor update) Added labal prefixes to tests targets

- Added special define for tests that directly include libcurl sources.

- Made the windows .lib addition cleaner.

- Renamed a variable

- Fixed missing HAVE_PROCESS_H (caused a warning)

- Added newline ad the end of generated hugehelp.c (the "default" one, when it hasn't been generated before).

Gisle Vanem (8 Apr 2009)
- Avoid warnings when HAVE_ALRM and SIGALRM are not defined.

- #ifdef around variables to squelsh warnings.

Benoit Neil (8 Apr 2009)
- Fixed compile defines in CMake scripts

Yang Tse (8 Apr 2009)
- Sun compilers specific preprocessor block removed from curlbuild.h.dist

Benoit Neil (7 Apr 2009)
- (Minor update) Modified a comment, before going to sleep :)

Daniel Stenberg (7 Apr 2009)
- and include the .inc files in the release tarballs...

Benoit Neil (7 Apr 2009)
- Added missing tests in CMake, added Makefile.inc for tests (+ use in CMake scripts), and fixed a missing define under windows in a test source file.

- Added CURL_HIDDEN_SYMBOLS option, and fixed missing SIZEOF_INT causing warnings.

Daniel Stenberg (7 Apr 2009)
- clarified after chat in #curl

Benoit Neil (7 Apr 2009)
- (From Bill Hoffman & Sukender) Added Dashboard reports.

- Fixed tests/server build (removed unnecessary link to libcurl).

- Made the CMake scripts read Makefile.inc. Needs testing I guess.

Daniel Stenberg (6 Apr 2009)
- - I clarified in the docs that CURLOPT_SEEKFUNCTION should return 0 on success
    and 1 on fatal errors. Previously it only mentioned non-zero on fatal
    errors. This is a slight change in meaning, but it follows what we've done
    elsewhere before and it opens up for LOTS of more useful return codes
    whenever we can think of them...

Benoit Neil (6 Apr 2009)
- Added tests (exes) targets, refactor a few things.
  PS: Once again, sorry if the added files have executable perms on Linux.

- Added curl (exe) target, fixed static/dynamic linking errors.
  PS: Sorry if the added file has executable perms on Linux, I didn't found anything related to it...

- Removed the "lib" prefix under linux ("was "liblibcurl") and fixed import library name under Win32 (Added "_imp" for dynamically linked).

- Fixed Win32 link error and disabled MSVC specific (=annoying) warnings (Reported by Bill Hoffman)

Yang Tse (3 Apr 2009)
- fix compiler warning: passing arg 1 of `sk_num' from incompatible pointer type

Benoit Neil (2 Apr 2009)
- Added basic OpenSSL support in CMake scripts (Thanks to Bill Hoffman)

Yang Tse (2 Apr 2009)
- Fix curl_off_t definition for builds done using Sun compilers and a
  non-configured libcurl. In this case curl_off_t data type was gated
  to the off_t data type which depends on the _FILE_OFFSET_BITS. This
  configuration is exactly the unwanted configuration for our curl_off_t
  data type which must not depend on such setting. This breaks ABI for
  libcurl libraries built with Sun compilers which were built without
  having run the configure script with _FILE_OFFSET_BITS different than
  64 and using the ILP32 data model.

Benoit Neil (2 Apr 2009)
- Initial CMake scripts (libcurl only), based on the merge of tetest scripts and mine. These are far to be functionnal yet.
  PS: Hello world :)

Dan Fandrich (2 Apr 2009)
- Added the curl_easy_recv return code fix

Daniel Stenberg (1 Apr 2009)
- - Andre Guibert de Bruet fixed a NULL pointer use in an infof() call if a
    strdup() call failed.

Dan Fandrich (31 Mar 2009)
- Properly return an error code in curl_easy_recv (reported by Jim Freeman).

Gunter Knauf (29 Mar 2009)
- some minor Makefile tweaks.

Daniel Stenberg (20 Mar 2009)
- Gary Maxwell helped us clarify that CURLOPT_SHARE specificly needs the locking
  functions if the easy handles are used in multiple threads

- removed useless comment

Yang Tse (18 Mar 2009)
- Add a link to "Potential Errors Passing CRT Objects Across DLL Boundaries"

Daniel Stenberg (18 Mar 2009)
- - Kamil Dudka brought a patch that enables 6 additional crypto algorithms when
    NSS is used. These ciphers were added in NSS 3.4 and require to be enabled
    explicitly.

- minor fix

Gisle Vanem (15 Mar 2009)
- If CURL_DISABLE_PROXY is defined, we must allow socks_sspi.c to call
  Curl_blockread_all(). It is needed in code inside USE_WINDOWS_SSPI.

Daniel Stenberg (13 Mar 2009)
- we use libssh2_version() now if available

- - Use libssh2_version() to present the libssh2 version in case the libssh2
    library is found to support it.

Yang Tse (12 Mar 2009)
- Fix TELNET transfers not being aborted upon write callback failures

- Add Curl_read() return code checking

Daniel Stenberg (11 Mar 2009)
- Oops, make the memory magic debug stuff done before global init too just to
  catch them all. The memory debug stuff is not in the public API anyway.

- - Kamil Dudka made the curl tool properly call curl_global_init() before any
    other libcurl function.

- update the embedded copyright year

Yang Tse (11 Mar 2009)
- s/u_long/unsigned long/

- fix previous commit misplaced break statement

- Added TELNET timeout support for Windows builds

Daniel Stenberg (10 Mar 2009)
- Moved 7.19.2 and older entries from CHANGES to CHANGES.0 (the latter is not
  shipped in release archives but is only in CVS)

- - Frank Hempel found out a bug and provided the fix:
  
    curl_easy_duphandle did not necessarily duplicate the CURLOPT_COOKIEFILE
    option. It only enabled the cookie engine in the destination handle if
    data->cookies is not NULL (where data is the source handle). In case of a
    newly initialized handle which just had the cookie support enabled by a
    curl_easy_setopt(handle, CURL_COOKIEFILE, "")-call, handle->cookies was
    still NULL because the setopt-call only appends the value to
    data->change.cookielist, hence duplicating this handle would not have the
    cookie engine switched on.
  
    We also concluded that the slist-functionality would be suitable for being
    put in its own module rather than simply hanging out in lib/sendf.c so I
    created lib/slist.[ch] for them.

- - Andreas Farber made the 'buildconf' script check for the presence of m4
    scripts to make it detect a bad checkout earlier. People with older
    checkouts who don't do cvs update with the -d option won't get the new dirs
    and then will get funny outputs that can be a bit hard to understand and
    fix.

Dan Fandrich (9 Mar 2009)
- Avoid a compile warning in --disable-proxy case

Daniel Stenberg (8 Mar 2009)
- - Andre Guibert de Bruet found and fixed a code segment in ssluse.c where the
    allocation of the memory BIO was not being properly checked.

- - Andre Guibert de Bruet fixed the gnutls-using code: There are a few places
    in the gnutls code where we were checking for negative values for errors,
    when the man pages state that GNUTLS_E_SUCCESS is returned on success and
    other values indicate error conditions.

- Andre Guibert de Bruet fixed a typo in the error message

- - Bill Egert pointed out (http://curl.haxx.se/bug/view.cgi?id=2671602) that
    curl didn't use sprintf() in a way that is documented to work in POSIX but
    since we use our own printf() code (from libcurl) that shouldn't be a
    problem. Nonetheless I modified the code to not rely on such particular
    features and to not cause further raised eyebrowse with no good reason.

Dan Fandrich (5 Mar 2009)
- Expanded the security section of the libcurl-tutorial man page to cover
  more issues for authors to consider when writing robust libcurl-using
  applications.

Yang Tse (5 Mar 2009)
- Fix NTLM authentication memory leak on SSPI enabled Windows builds

Dan Fandrich (4 Mar 2009)
- Fixed a problem with m4 quoting in the OpenSSL configure check reported
  by Daniel Johnson.

Daniel Stenberg (3 Mar 2009)
- Added test 1097 to verify the bug Axel Kuhn epidox posted on March 3 2009
  on curl-users, it is also added to DISABLED since I don't have time to work
  on it further right now.

- - David James brought a patch that make libcurl close (all) dead connections
    whenever you attempt to open a new connection.

- 15 additional contributor from the 7.19.4 RELEASE-NOTES

- Gah! We can't have 'curl' added here since even though it removes the curl
  binary it also removes the include/curl subdir!

Patrick Monnerat (3 Mar 2009)
- Options CURLOPT_REDIR_PROTOCOLS and CURLOPT_PROTOCOLS, and associated definitions added to RPG binding

Daniel Stenberg (2 Mar 2009)
- start over on the journey towards 7.19.5

Version 7.19.4 (2 Mar 2009)

Daniel Stenberg (2 Mar 2009)
- - David Kierznowski notified us about a security flaw
    (http://curl.haxx.se/docs/adv_20090303.html also known as CVE-2009-0037) in
    which previous libcurl versions (by design) can be tricked to access an
    arbitrary local/different file instead of a remote one when
    CURLOPT_FOLLOWLOCATION is enabled. This flaw is now fixed in this release
    together this the addition of two new setopt options for controlling this
    new behavior:
  
    o CURLOPT_REDIR_PROTOCOLS controls what protocols libcurl is allowed to
    follow to when CURLOPT_FOLLOWLOCATION is enabled. By default, this option
    excludes the FILE and SCP protocols and thus you nee to explicitly allow
    them in your app if you really want that behavior.
  
    o CURLOPT_PROTOCOLS controls what protocol(s) libcurl is allowed to fetch
    using the primary URL option. This is useful if you want to allow a user or
    other outsiders control what URL to pass to libcurl and yet not allow all
    protocols libcurl may have been built to support.

- 7.19.4 won't get anything else

- the Eiffel binding

- nothing more left for 7.19.4, the issue #216 is moved to 7.19.5 since we're
  too close to release now

Yang Tse (28 Feb 2009)
- for portability reasons: s/inet_pton/Curl_inet_pton/

- fix compiler warning

Daniel Stenberg (27 Feb 2009)
- mention the '-o -' trick

- 217 - Dan Fandrich's "GnuTLS initialization thread safety"
  
  218 - Senthil Raja Velu's "CURLOPT_LOCALPORT option broken", patch by
        Markus Koetter
  
  Both are now committed

- - Senthil Raja Velu reported a problem when CURLOPT_INTERFACE and
    CURLOPT_LOCALPORT were used together (the local port bind failed), and
    Markus Koetter provided the fix!

- Indentation fixes, untabify and related whitespace-cleanup. No code changed.

- corrected and clarified the top comment

- - As Daniel Fandrich figured out, we must do the GnuTLS initing in the
    curl_global_init() function to properly maintain the performing functions
    thread-safe. We've previously (28 April 2007) moved the init to a later time
    just to avoid it to fail very early when libgcrypt dislikes the situation,
    but that move was bad and the fix should rather be in libgcrypt or
    elsewhere.

- improved

- A handy little helper file for doing recursive diffs on curl source/build trees
  without involving CVS:
  
  diff -X diff-exclude -ru curl-old curl-patched

- - Brian J. Murrell found out that Negotiate proxy authentication didn't work.
    It happened because the code used the struct for server-based auth all the
    time for both proxy and server auth which of course was wrong.

- 4.17 Non-functional connect timeouts

- - After a bug reported by James Cheng I've made curl_easy_getinfo() for
    CURLINFO_CONTENT_LENGTH_DOWNLOAD and CURLINFO_CONTENT_LENGTH_UPLOAD return
    -1 if the sizes aren't know. Previously these returned 0, make it impossible
    to detect the difference between actually zero and unknown.

- For 7.19.5 (due to feature freeze)
  220 - Take advantage of libssh2_version() that's been added for the upcoming
        1.1, to extract the run-time version number properly.

Yang Tse (23 Feb 2009)
- adjustment for new Mac OS X framework build script

- Daniel Johnson provided a shell script that will perform all the steps needed
  to build a Mac OS X fat ppc/i386 or ppc64/x86_64 libcurl.framework

Daniel Stenberg (23 Feb 2009)
- mention default port number

- - I renamed everything in the windows builds files that used the name 'curllib'
    to the proper 'libcurl' as clearly this caused confusion.

- lzma compressed tarballs too for some testing, it does produce MUCH smaller
  files

Yang Tse (23 Feb 2009)
- use the internal snprintf() function

Daniel Stenberg (20 Feb 2009)
- mention 4 pending fixes/patches

Yang Tse (20 Feb 2009)
- Mark Incley noticed VS2008 compilation halting when building for Windows 2000

- Do not halt compilation when using VS2008 to build a Windows 2000 target

Daniel Stenberg (20 Feb 2009)
- clarified the FTP passive/active mode options somewhat

- the FTP multi interface bug

- - Linus Nielsen Feltzing reported and helped me repeat and fix a problem with
    FTP with the multi interface: when a transfer fails, like when aborted by a
    write callback, the control connection was wrongly closed and thus not
    re-used properly.
  
    This change is also an attempt to cleanup the code somewhat in this area, as
    now the FTP code attempts to keep (better) track on pending responses
    necessary to get read in ftp_done().

- The C++ binding home was changed

- verify that a 550-response for a RETR returns 78 but also that the control
  connection is kept alive afterwards

- - Patrik Thunstrom reported a problem and helped me repeat it. It turned out
    libcurl did a superfluous 1000ms wait when doing SFTP downloads!
  
    We read data with libssh2 while doing the "DO" operation for SFTP and then
    when we were about to start getting data for the actual file part, the
    "TRANSFER" part, we waited for socket action (in 1000ms) before doing a
    libssh2-read. But in this case libssh2 had already read and buffered the
    data so we ended up always just waiting 1000ms before we get working on the
    data!

- spell-fixed comments and other minor non-code edits

Patrick Monnerat (18 Feb 2009)
- FTP downloads (i.e.: RETR) ending with code 550 now return error CURLE_REMOTE_FILE_NOT_FOUND instead of CURLE_FTP_COULDNT_RETR_FILE.

- Continue sync work on OS400 specific code and RPG binding.

Daniel Stenberg (17 Feb 2009)
- - Kamil Dudka made NSS-powered builds compile and run again!

- - A second follow-up change by Andre Guibert de Bruet to fix a related memory
    leak like that fixed on the 14th. When zlib returns failure, we need to
    cleanup properly before returning error.

- three new CURLFTP_CREATE_DIR* symbols

- - CURLOPT_FTP_CREATE_MISSING_DIRS can now be set to 2 in addition to 1 for
    plain FTP connections, and it will then allow MKD to fail once and retry the
    CWD afterwards. This is especially useful if you're doing many simultanoes
    connections against the same server and they all have this option enabled,
    as then CWD may first fail but then another connection does MKD before this
    connection and thus MKD fails but trying CWD works! The numbers can
    (should?) now be set with the convenience enums now called
    CURLFTP_CREATE_DIR and CURLFTP_CREATE_DIR_RETRY.
  
    Tests has proven that if you're making an application that uploads a set of
    files to an ftp server, you will get a noticable gain in speed if you're
    using multiple connections and this option will be then be very useful.

Patrick Monnerat (16 Feb 2009)
- Preparation of imminent release: synchronizing OS400 wrappers + RPG binding to current state.

Gisle Vanem (14 Feb 2009)
- In MSVC9 'time_t' is a 64-bit quantity. This causes a truncation warning
  when an 'int' is assigned to a 'time_t' variable. Hence redefine 'retry_time'
  and 'retry_max' to 'time_t'.

Daniel Stenberg (14 Feb 2009)
- nah, use the simpler year - year range syntax only, no matter what emacs'
  copyright-update script thinks

- - Andre Guibert de Bruet found and fixed a memory leak in the content encoding
    code, which could happen on libz errors.

- there is nothing left planned for next release, metalink experiments are post-
  poned

- Anthony Bryan's letter=>symbol fixes

Yang Tse (13 Feb 2009)
- ignore

- Remove following files generated on previous buildconf run:
  ltoptions.m4 ltsugar.m4 ltversion.m4 lt~obsolete.m4

- check for poll() as it is done for other functions

Dan Fandrich (12 Feb 2009)
- Fixed NTLM on curl-config --features with GnuTLS

- Added support for Digest and NTLM authentication using GnuTLS.

Daniel Stenberg (12 Feb 2009)
- credit Jocelyn Jaubert for his bug report and associated work

- - CURLINFO_CONDITION_UNMET was added to allow an application to get to know if
    the condition in the previous request was unmet. This is typically a time
    condition set with CURLOPT_TIMECONDITION and was previously not possible to
    reliably figure out. From bug report #2565128
    (http://curl.haxx.se/bug/view.cgi?id=2565128)

- Added docs/libcurl/symbols-in-versions

- completed the CURLPROXY_ collection

- include the symbols-in-versions file in the release archive

- remove a trailing name from a comment

- introducing the symbols-in-versions file, in an effort to help app authors
  to better know and track symbols in earlier libcurl versions

- mention when CURLOPT_ADDRESS_SCOPE was added

- #45. libcurl built to support ipv6 uses getaddrinfo() to resolve host names.
     getaddrinfo() sorts the response list
  
  This isn't a libcurl bug since this is how getaddrinfo() is *supposed* to work!
  Apparently you deal with this using the /etc/gai.conf file.

- #53. SFTP busy-loop problem. should be fixed in 7.19.3 with libssh2 1.0 (or
  later)

- Moved Curl_strntoupper() to the rawstr.c file where the other raw string
  functions are.

- 214 - progress bar prefix, second try (for the curl tool)
  patch declined

Dan Fandrich (6 Feb 2009)
- Mention the first release of CURLOPT_FTP_FILEMETHOD

- Added an explicit buffer limit check in msdosify() (patch based on FreeBSD).
  This couldn't ever overflow in curl, but might if the code were used
  elsewhere or under different conditions.

- Fixed a typo (spotted in the FreeBSD ports).

- Don't add the standard /usr/lib or /usr/include paths to LDFLAGS and CPPFLAGS
  (respectively) when --with-ssl=/usr is used (patch based on FreeBSD).

Daniel Stenberg (4 Feb 2009)
- 206 - A. Craig West's CURLOPT_HTTP_VERSION change for CONNECT
  applied!

- - Hidemoto Nakada provided a small fix that makes it possible to get the
    CURLINFO_CONTENT_LENGTH_DOWNLOAD size from file:// "transfers" with
    CURLOPT_NOBODY set true.

Phil Blundell (3 Feb 2009)
- * February 3 2009 (Phil Blundell)
  - If the server returns garbage or nothing at all in response to an AAAA query,
    go on and ask for A records anyway.

Daniel Stenberg (2 Feb 2009)
- - Patrick Scott found a rather large memory leak when using the multi
    interface and setting CURLMOPT_MAXCONNECTS to something less than the number
    of handles you add to the multi handle. All the connections that didn't fit
    in the cache would not be properly disconnected nor freed!

- minor comment fix

- - Craig A West brought us: libcurl now defaults to do CONNECT with HTTP
    version 1.1 instead of 1.0 like before. This change also introduces the new
    proxy type for libcurl called 'CURLPROXY_HTTP_1_0' that then allows apps to
    switch (back) to CONNECT 1.0 requests. The curl tool also got a --proxy1.0
    option that works exactly like --proxy but sets CURLPROXY_HTTP_1_0.
  
    I updated all test cases cases that use CONNECT and I tried to do some using
    --proxy1.0 and some updated to do CONNECT 1.1 to get both versions run.

- - When building with c-ares 1.6.1 (not yet released) or later and IPv6 support
    enabled, we can now take advantage of its brand new AF_UNSPEC support in
    ares_gethostbyname(). This makes test case 241 finally run fine for me wtih
    this setup since it now parses the "::1 ip6-localhost" line fine in my
    /etc/hosts file!

- - ares_gethostbyname() now accepts 'AF_UNSPEC' as a family for resolving
    either AF_INET6 or AF_INET. It works by accepting any of the looksups in the
    hosts file, and it resolves the AAAA field with a fallback to A.

- - Scott Cantor filed bug report #2550061
    (http://curl.haxx.se/bug/view.cgi?id=2550061) mentioning that I failed to
    properly make sure that the VC9 makefiles got included in the latest
    release. I've now fixed the release script and verified it so next release
    will hopefully include them properly!

- Truly make sure that the vc8 and vc9 makefiles that are generated get included
  in the release archive - by using our .dist suffix trick.

Dan Fandrich (30 Jan 2009)
- Fixed --disable-proxy for FTP and SOCKS. Thanks to Daniel Egger for reporting
  the problem.

- Mentioned some other characters that may need escaping on the curl command
  line and fixed a few typos.

Yang Tse (30 Jan 2009)
- ensure that we use the ANSI version functions

- fix typo in comment

- Provide another definition missing in MinGW's headers

- Provide some definitions missing in MinGW's headers

- Introduced curl_sspi.c and curl_sspi.h for the implementation of functions
  Curl_sspi_global_init() and Curl_sspi_global_cleanup() which previously were
  named Curl_ntlm_global_init() and Curl_ntlm_global_cleanup() in http_ntlm.c
  Also adjusted socks_sspi.c to remove the link-time dependency on the Windows
  SSPI library using it now in the same way as it was done in http_ntlm.c.

- added some more messages to SSPI error function

- Avoid inclusion of ntsecapi.h and directly provide the KERB_WRAP_NO_ENCRYPT
  definition to avoid a 'STRING' duplicate definition from OpenSSL's safestack.h

- fix compiler warnings

Daniel Stenberg (28 Jan 2009)
- - Markus Moeller introduced two new options to libcurl:
    CURLOPT_SOCKS5_GSSAPI_SERVICE and CURLOPT_SOCKS5_GSSAPI_NEC to allow libcurl
    to do GSS-style authentication with SOCKS5 proxies. The curl tool got the
    options called --socks5-gssapi-service and --socks5-gssapi-nec to enable
    these.

Yang Tse (28 Jan 2009)
- fix compiler warning: conversion from 'int' to 'bool', possible loss of data

- fix compiler warning: enumerated type mixed with another type

Daniel Stenberg (26 Jan 2009)
- - Chad Monroe provided the new CURLOPT_TFTP_BLKSIZE option that allows an app
    to set desired block size to use for TFTP transfers instead of the default
    512 bytes.

- wrap line at col 80

- - The "-no_ticket" option was introduced in Openssl0.9.8j. It's a flag to
    disable "rfc4507bis session ticket support".  rfc4507bis was later turned
    into the proper RFC5077 it seems: http://tools.ietf.org/html/rfc5077
  
    The enabled extension concerns the session management. I wonder how often
    libcurl stops a connection and then resumes a TLS session. also, sending the
    session data is some overhead. .I suggest that you just use your proposed
    patch (which explicitly disables TICKET).
  
    If someone writes an application with libcurl and openssl who wants to
    enable the feature, one can do this in the SSL callback.
  
    Sharad Gupta brought this to my attention. Peter Sylvester helped me decide
    on the proper action.

- - Alexey Borzov filed bug report #2535504
    (http://curl.haxx.se/bug/view.cgi?id=2535504) pointing out that realms with
    quoted quotation marks in HTTP Digest headers didn't work. I've now added
    test case 1095 that verifies my fix.

Gunter Knauf (26 Jan 2009)
- added CURLX_ONES again to object list for dynamic linking.

Daniel Stenberg (25 Jan 2009)
- - Craig A West brought CURLOPT_NOPROXY and the corresponding --noproxy option.
    They basically offer the same thing the NO_PROXY environment variable only
    offered previously: list a set of host names that shall not use the proxy
    even if one is specified.

Dan Fandrich (21 Jan 2009)
- Improved the title and keywords

- Fixed a couple more locale-dependent toupper conversions, mainly for
  clarity.  This does fix one problem that causes ;type=i FTP URLs
  to fail in the Turkish locale when CURLOPT_PROXY_TRANSFER_MODE is
  used (test case 561)
  
  Added tests 561 and 1092 through 1094 to test various combinations
  of ;type= and ;mode= URLs that could potentially fail in the Turkish
  locale.

- Call setlocale() for libtest tests to test the effects of locale-induced
  libc changes on libcurl.

Daniel Stenberg (20 Jan 2009)
- - Lisa Xu pointed out that the ssh.obj file was missing from the lib/Makefile.vc6
    file (and thus from the vc8 and vc9 ones too).

- fix typo in comment that made it confusing

- 7.19.3 is out now

- 700 friendly contributors after the new ones in 7.19.3 were added

- 17 new contributors from the 7.19.3 release

- start over on our journey towards 7.19.4...

Version 7.19.3 (19 Jan 2009)

Daniel Stenberg (19 Jan 2009)
- time to release

Gisle Vanem (18 Jan 2009)
- fopen() returns error in 'errno' even on Windows.
  So don't use ERRNO (GetLastError()). Trimmed trailing
  blanks.

- Constified some arguments in local functions.

Gunter Knauf (17 Jan 2009)
- fixed global copyright.

Daniel Stenberg (16 Jan 2009)
- - Andrew de los Reyes fixed curlbuild.h for "generic" gcc builds on PPC, both
    32 bit and 64 bit.

Dan Fandrich (15 Jan 2009)
- Add steps needed for zlib support under Minix

Daniel Stenberg (15 Jan 2009)
- - Tim Ansell fixed a compiler warning in lib/cookie.c

- a bunch of minor updates

- - ares.h no longer uses the HAVE_STRUCT_IN6_ADDR define check, but instead it
    now declares the private struct ares_in6_addr for all systems instead of
    relying on one possibly not present in the system.

- 213 - bug #2501457 "Timeouts not working with curl_multi_socket_action()" -
  now put in KNOWN_BUGS as entry #62

- 62. CURLOPT_TIMEOUT does not work properly with the regular multi and
    multi_socket interfaces. The work-around for apps is to simply remove the
    easy handle once the time is up. See also:
    http://curl.haxx.se/bug/view.cgi?id=2501457

- Karl Moerder removed wsock32.lib from the vc9 makefiles

- Grant Erickson fixed timeouts for TFTP

- - Michael Wallner fixed a NULL pointer deref when calling
    curl_easy_setup(curl, CURLOPT_COOKIELIST, "SESS") on a CURL handle with no
    cookies data.

- Stefan Teleman's curlbuild.h fix for SunPro compilers

- oops, the previous wasn't meant to get committed but since I did it I thought
  I'd just as well enumerate the remainder and commit a "proper" looking one

- - Stefan Teleman brought a patch to fix the default curlbuild.h file for the
    SunPro compilers.

Phil Blundell (13 Jan 2009)
- - ares__send_query() now varies the retry timeout pseudo-randomly to avoid
    packet storms when several queries were started at the same time.

Daniel Stenberg (13 Jan 2009)
- spell-checked a bunch of comments

- make this example not only replace an internal header but also add a totally
  new and non-standard one

- Mohun Biswas clarified

- bump year

- changed the wording to possibly make some sense

- - Based on bug report #2498665 (http://curl.haxx.se/bug/view.cgi?id=2498665)
    by Daniel Black, I've now added magic to the configure script that makes it
    use pkg-config to detect gnutls details as well if the existing method
    (using libgnutls-config) fails. While doing this, I cleaned up and unified
    the pkg-config usage when detecting openssl and nss as well.

- credit Karl Moerder properly

- - Phil Blundell added the internal function ares__expand_name_for_response()
    that is now used by the ares_parse_*_reply() functions instead of the
    ares_expand_name() simply to easier return ARES_EBADRESP for the cases where
    the name expansion fails as in responses that really isn't expected.

- - Karl M brought the patch that creates vc9 Makefiles, and I made 'maketgz'
    now use the actual makefile targets to do the VC8 and VC9 makefiles.

- - Emil Romanus fixed:
  
    When using the multi interface over HTTP and the server returns a Location
    header, the running easy handle will get stuck in the CURLM_STATE_PERFORM
    state, leaving the external event loop stuck waiting for data from the
    ingoing socket (when using the curl_multi_socket_action stuff). While this
    bug was pretty hard to find, it seems to require only a one-line fix. The
    break statement on line 1374 in multi.c caused the function to skip the call
    to multistate().
  
    How to reproduce this bug? Well, that's another question.  evhiperfifo.c in
    the examples directory chokes on this bug only _sometimes_, probably
    depending on how fast the URLs are added. One way of testing the bug out is
    writing to hiper.fifo from more than one source at the same time.

- Only care about the first line of libtool --version as otherwise this script
  get fooled by libtool 2, and at least libtool 1.5.2x do output the interesting
  version string in the first line.

- "204 - Rob C's NSS fix" is done and since we enter feature freeze now I moved
  the remaining three issues to next release since they are about new things and
  not just fixing bugs

Dan Fandrich (8 Jan 2009)
- Added a few more issues

- Unified much of the SessionHandle initialization done in Curl_open() and
  curl_easy_reset() by creating Curl_init_userdefined(). This had the side effect
  of fixing curl_easy_reset() so it now also resets CURLOPT_FTP_FILEMETHOD and
  CURLOPT_SSL_SESSIONID_CACHE

- Always use nocheck="yes" for consistency

- Created a CURLMIN macro to match CURLMAX

Daniel Stenberg (7 Jan 2009)
- fix compiler warnings

- - Rob Crittenden did once again provide an NSS update:
  
    I have to jump through a few hoops now with the NSS library initialization
    since another part of an application may have already initialized NSS by the
    time Curl gets invoked. This patch is more careful to only shutdown the NSS
    library if Curl did the initialization.
  
    It also adds in a bit of code to set the default ciphers if the app that
    call NSS_Init* did not call NSS_SetDomesticPolicy() or set specific
    ciphers. One might argue that this lets other application developers get
    lazy and/or they aren't using the NSS API correctly, and you'd be right.
    But still, this will avoid terribly difficult-to-trace crashes and is
    generally helpful.

- four fresh items to deal with!

- - 'reconf' is removed since we rather have users use 'buildconf'

- credit Bas

- - Bas Mevissen reported http://curl.haxx.se/bug/view.cgi?id=2479030 pointing
    out that 'reconf' didn't properly point out the m4 subdirectory when running
    aclocal.

Gunter Knauf (30 Dec 2008)
- sync'd address with other tests.

- trial with an address which has a valid domain part but invalid host to avoid dns redirections.

- added HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID to ares Makefile.netware and sync'd with other Makefile.netware.

- changed HAVE_SIN6_SCOPE_ID define to HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID since just found that ares already uses this define.

- added HAVE_SIN6_SCOPE_ID define to all non-configure platforms which seem to be IPv6-aware.

Daniel Stenberg (29 Dec 2008)
-  - Phil Lisiecki filed bug report #2413067
    (http://curl.haxx.se/bug/view.cgi?id=2413067) that identified a problem that
    would cause libcurl to mark a DNS cache entry "in use" eternally if the
    subsequence TCP connect failed. It would thus never get pruned and refreshed
    as it should've been.

- further clarifcation based on input from Anthony Bryan

- - Peter Korsgaard fixed building libcurl with "configure --with-ssl
    --disable-verbose".

- Anthony Bryan's man page cleanup in language and spelling

- Anthony Bryan reported quirks, I updated

- Anthony Bryan reported and I corrected two typos.

- The CURLOPT_KRBLEVEL description wasn't properly formatted and thus was
  corrupted in ouputs. Another report from Anthony Bryan.

- Anthony Bryan reported this outputs wrong in the PDF and I've now tried to
  escape these letters what I think is the correct way.

Gunter Knauf (28 Dec 2008)
- silent 'unused' warnings.

Daniel Stenberg (27 Dec 2008)
- libssh2 0.19 became 1.0 instead

Gunter Knauf (27 Dec 2008)
- added check for sin6_scope_id member in struct sockaddr_in6.

Daniel Stenberg (25 Dec 2008)
- 193 removed, no work has been started on this and I personally don't care that
  much about it

Gisle Vanem (22 Dec 2008)
- Remove trailing #undef value. Typo?

Daniel Stenberg (22 Dec 2008)
- libssh2_sftp_seek2 was just renamed to libssh2_sftp_seek64 ...

- - Given a recent enough libssh2, libcurl can now seek/resume with SFTP even
    on file indexes beyond 2 or 4GB.

- - Anthony Bryan provided a set of patches that cleaned up manual language,
    corrected spellings and more.

- malloc+memset => calloc

- same procedure, simpler code

- 197 - IIS-bug in Digest
   The curl tool parts are postponed to a later time
  
  201 - "bug: header data output to the body callback function after set header"
   Was probably not a bug, I asked about it but I didn't get any response.
  
  202 - "hangs up of application above libcurl" - problems with the multi_socket
   Fixes from Igor have been committed and there's currently no pending ones.

- - Igor Novoseltsev fixed a bad situation for the multi_socket() API when doing
    pipelining, as libcurl could then easily get confused and A) work on the
    handle that was not "first in queue" on a pipeline, or even B) tell the app
    to REMOVE a socket while it was in use by a second handle in a pipeline. Both
    errors caused hanging or stalling applications.

- make the debug/helper function output to stderr as that makes it play nicer
  in combination with infof() calls

- remove outdated stuff

- - curl_multi_timeout() could return a timeout value of 0 even though nothing
    was actually ready to get done, as the internal time resolution is higher
    than the returned millisecond timer. Therefore it could cause applications
    running on fast processors to do short bursts of busy-loops.
    curl_multi_timeout() will now only return 0 if the timeout is actually
    alreay triggered.

- oops, removing debug output that wasn't supposed to be there

- - Using the libssh2 0.19 function libssh2_session_block_directions(), libcurl
    now has an improved ability to do right when the multi interface (both
    "regular" and multi_socket) is used for SCP and SFTP transfers. This should
    result in (much) less busy-loop situations and thus less CPU usage with no
    speed loss.

- expand the CURLOPT_POSTREDIR explanation

- - SCP and SFTP with the multi interface had the same flaw: the 'DONE'
    operation didn't complete properly if the EAGAIN equivalent was returned but
    libcurl would simply continue with a half-completed close operation
    performed. This ruined persistent connection re-use and cause some
    SSH-protocol errors in general. The correction is unfortunately adding a
    blocking function - doing it entirely non-blocking should be considered for
    a better fix.

Gisle Vanem (16 Dec 2008)
- Updated dependencies based on "gcc -MM".

- Added the use of Watt-32 tcp/ip stack for Win32 target.
  If USE_WATT32=1 one needs to use stack-based calls (-3s).
  So to keep the makefile nice and clean, specify -3s for
  Winsock target too (there's hardly any speed-gain using -3r).

- Added the use of Watt-32 tcp/ip stack for Win32 targets.

- Added the use of Watt-32 tcp/ip stack for Win32 targets.
  Added USE_WATT32 unconditionally for MSDOS targets since
  it's the only option. Adjusted the text for '--wdebug'.

- Added the use of Watt-32 tcp/ip stack for Win32 targets.

Daniel Stenberg (15 Dec 2008)
- - libssh2_sftp_last_error() was wrongly used at some places in libcurl which
    made libcurl sometimes not properly abort problematic SFTP transfers.

- 196 is gone

- - More work with Igor Novoseltsev to first fix the remaining stuff for
    removing easy handles from multi handles when the easy handle is/was within
    a HTTP pipeline. His bug report #2351653
    (http://curl.haxx.se/bug/view.cgi?id=2351653) was also related and was
    eventually fixed by a patch by Igor himself.

- Make the getoff all pipelines function only set _inuse to FALSE if the
  specified data pointer was head.

- credit Mark Karpeles for his report and work

Yang Tse (12 Dec 2008)
- Patrick Monnerat fixed a build regression, introduced in 7.19.2, affecting
  OS/400 compilations with IPv6 enabled.

Daniel Stenberg (11 Dec 2008)
- Removed 200 as it wasn't a bug after all
  Added 203 "dns cache memory leak and TTL failure after failed conn"

- - Bug report #2416182 titled "crash in ConnectionExists when using
    duphandle+curl_mutli" (http://curl.haxx.se/bug/view.cgi?id=2416182) showed
    that curl_easy_duphandle() wrongly also copied the pointer to the connection
    cache, which was plain wrong and caused a segfault if the handle would be
    used in a different multi handle than the handle it was duplicated from.

- Dan F pointed out that we don't need to scan IPv6 addresses for '%'-letters
  in the parse_remote_port() function as the scope id has already been stripped
  from the string.

- - Keshav Krity found out that libcurl failed to deal with dotted IPv6
    addresses if they were very long (>39 letters) due to a too strict address
    validity parser. It now accepts addresses up to 45 bytes long.

Patrick Monnerat (11 Dec 2008)
- _ Use getaddrinfo/getnameinfo ascii wrappers on OS400.
  _ Adjust OS400 make script for non-CVS distributions.
  _ Upgrade ILE/RPG binding.
  _ Define CURL_HIDDEN_SYMBOLS on OS400, since only CURL_EXTERN-marked symbols are exported.

Dan Fandrich (11 Dec 2008)
- Mention what makes this test special

Daniel Stenberg (10 Dec 2008)
- - Internet Explorer had a broken HTTP digest authentication before v7 and
    there are servers "out there" that relies on the client doing this broken
    Digest authentication. Apache even comes with an option to work with such
    broken clients.
  
    The difference is only for URLs that contain a query-part (a '?'-letter and
    text to the right of it).
  
    libcurl now supports this quirk, and you enable it by setting the
    CURLAUTH_DIGEST_IE bit in the bitmask you pass to the CURLOPT_HTTPAUTH or
    CURLOPT_PROXYAUTH options. They are thus individually controlled to server
    and proxy.

- use the new URL

- start over on the 1.6.1 release...

- add space

Dan Fandrich (9 Dec 2008)
- Documented CURLOPT_CONNECT_ONLY as being useful only on HTTP URLs.

- Added test cases 1089 and 1090 to test --write-out after a redirect to
  test a report that the size didn't work, but these test cases pass.

Daniel Stenberg (9 Dec 2008)
- - Ken Hirsch simplified how libcurl does FTPS: now it doesn't assume any
    particular state for the control connection like it did before for implicit
    FTPS (libcurl assumed such control connections to be encrypted while some
    FTPS servers such as FileZilla assumes such connections to be clear
    mode). Use the CURLOPT_USE_SSL option to set your desired level.

Gisle Vanem (9 Dec 2008)
- Fix for Win32 targets using Watt-32.

Dan Fandrich (9 Dec 2008)
- C89 compilers (like Minix' ACK) only need to handle 31 functions arguments
  so split a long sprintf into two calls to get below that number.

Daniel Stenberg (8 Dec 2008)
- 195 - SIZE returning 550 must not abort the transfer
  Fixed!

- - Fred Machado posted about a weird FTP problem on the curl-users list and when
    researching it, it turned out he got a 550 response back from a SIZE command
    and then I fell over the text in RFC3659 that says:
  
     The presence of the 550 error response to a SIZE command MUST NOT be taken
     by the client as an indication that the file cannot be transferred in the
     current MODE and TYPE.
  
    In other words: the change I did on September 30th 2008 and that has been
    included in the last two releases were a regression and a bad idea. We MUST
    NOT take a 550 response from SIZE as a hint that the file doesn't exist.

Gisle Vanem (8 Dec 2008)
- Added needed defines for Watt-32 on Windows.

- Undefine 'optarg', 'optind' and 'opterr' when using Watt-32
  (to get correct linkage on Windows).

- ares_writev() shall not be exported when using Watt-32 (has writev).
  Added _USE_32BIT_TIME_T to avoid runtime warning. Applies to
  VC-2008+ only.

- Removed unneeded defines HAVE_SIGNAL_H, HAVE_SIG_ATOMIC_T,
  RETSIGTYPE and HAVE_PROCESS_H.

Daniel Stenberg (8 Dec 2008)
- one more

- 192 - "infinite loop during GSS authentication" bug #2221237
  Fixed!

- - Christian Krause filed bug #2221237
    (http://curl.haxx.se/bug/view.cgi?id=2221237) that identified an infinite
    loop during GSS authentication given some specific conditions. With his
    patience and great feedback I managed to narrow down the problem and
    eventually fix it although I can't test any of this myself!

- the initial version of the ares_set_socket_callback man page

- Gregor Jasny provided the patch that introduces ares_set_socket_callback(),
  and I edited it to also get duped by ares_dup().

Dan Fandrich (4 Dec 2008)
- Bring the sys/include.h include test in line with curl's.

- Fixed the getifaddrs version of Curl_if2ip to work on systems without IPv6
  support (e.g. Minix)

Daniel Stenberg (3 Dec 2008)
- - Igor Novoseltsev filed bug #2351645
    (http://curl.haxx.se/bug/view.cgi?id=2351645) that identified a problem with
    the multi interface that occured if you removed an easy handle while in
    progress and the handle was used in a HTTP pipeline.

- filled in SONAME number bump info, after some CVS digging

- - Pawel Kierski pointed out a mistake in the cookie code that could lead to a
    bad fclose() after a fatal error had occured.
    (http://curl.haxx.se/bug/view.cgi?id=2382219)

- Let's not call ares_save_options() deprecated just yet

- Introduce ares_dup(3) and new thoughts about API/ABI and how to move forwards.
  Also discussed on the ml.

- explain the two *channel_inuse fields somewhat better

Dan Fandrich (2 Dec 2008)
- Make sure sys/socket.h is included before netinet/in.h (required by
  OpenWatcom C, and condoned by SUS)

Daniel Stenberg (1 Dec 2008)
- minor indent fix

- Convert the public config struct to the same binary size/construct as in the
  latest releases to remain ABI compatible.

- added some more entries for stuff done the last ~2 years

- People have successfully ran libcurl on iphone

Yang Tse (29 Nov 2008)
- Further adjust a libssh2 preprocessor function-symbol definition check

- Adjust some libssh2 preprocessor symbol definition checks

Gisle Vanem (29 Nov 2008)
- Added '-DHAVE_GETHOSTNAME'.

Dan Fandrich (29 Nov 2008)
- Make sure sys/socket.h is included before netinet/in.h (required by
  OpenWatcom C)

- Netware has gethostname()

- Fixed a couple of typos

- Don't tweak the HAVE_* macros when using autoconf

- Make use of gethostname() conditional on it being available

- Only set TCP_NODELAY when it exists

Daniel Stenberg (28 Nov 2008)
- updated with changes, preparing for a release soon

Yang Tse (26 Nov 2008)
- Gerald Combs fixed a bug in ares_parse_ptr_reply() which would cause a
  buffer to shrink instead of expand if a reply contained 8 or more records.

- Brad Spencer provided changes to allow buildconf to work on OS X.

Daniel Stenberg (26 Nov 2008)
- narrow the comment to < 80 columns

Dan Fandrich (25 Nov 2008)
- Added tests 1087 and 1088 to test Basic authentication on a redirect
  with and without --location-trusted

- If a HTTP request is Basic and num is already >=1000, the HTTP test server
  adds 1 to num to get the data section to return. This allows testing
  authentication negotiations using the Basic authentication method.

Yang Tse (25 Nov 2008)
- In preparation for the upcomming IPv6 nameservers patch, the internal
  ares_addr union is now changed into an internal struct which also holds
  the address family.

Dan Fandrich (24 Nov 2008)
- Fully clean up after test 608 so that it can be run twice in succession.

Daniel Stenberg (24 Nov 2008)
- 191 - "proposed patch for curl/libssh2 bugfix"
        http://curl.haxx.se/mail/archive-2008-10/0000.html
  Done!

- - Based on a patch by Vlad Grachov, libcurl now uses a new libssh2 0.19
    function when built to support SCP and SFTP that helps the library to know
    in which direction a particular libssh2 operation would return EAGAIN so
    that libcurl knows what socket conditions to wait for before trying the
    function call again. Previously (and still when using libssh2 0.18 or
    earlier), libcurl will busy-loop in this situation when the easy interface
    is used!

- Markus Koetter's adaptation of hiperfifo.c to instead use libev

- restored from my messy previous commit mistake

Dan Fandrich (21 Nov 2008)
- Automatically detect OpenBSD's CA cert bundle.

- Make checking for struct ifreq a prerequisite for setting
  HAVE_IOCTL_SIOCGIFADDR since it's needed to use SIOCGIFADDR and Watcom C
  doesn't currently define it.

Daniel Stenberg (20 Nov 2008)
- use unsigned short better intead of mixing with ints to prevent compiler
  warnings

- please the picky compilers by staying with short as the data we get is short
  only

- 194 - remove "Pragma: no-cache" from default HTTP requests
  done!

- - I removed the default use of "Pragma: no-cache" from libcurl when a proxy is
    used. It has been used since forever but it was never a good idea to use
    unless explicitly asked for.

- Josef Wolf's extension that allows a $TESTDIR/gdbinit$testnum file that when
  you use runtests.pl -g, will be sourced by gdb to allow additional fancy
  or whatever you see fit

- and now it compiles too!

- I updated this example to use the modern paradigms of the socket API where
  *_socket_all() and *_socket() aren't used at all but only *_socket_action()
  is.

- - Brad Spencer brought the new function ares_gethostbyname_file() which simply
    resolves a host name from the given file, using the regular hosts syntax.

- - Christian Krause reported and fixed a memory leak that would occur with HTTP
    GSS/kerberos authentication (http://curl.haxx.se/bug/view.cgi?id=2284386)

- - Andreas Wurf and Markus Koetter helped me analyze a problem that Andreas got
    when uploading files to a single FTP server using multiple easy handle
    handles with the multi interface. Occasionally a handle would stall in
    mysterious ways.
  
    The problem turned out to be a side-effect of the ConnectionExists()
    function's eagerness to re-use a handle for HTTP pipelining so it would
    select it even if already being in use, due to an inadequate check for its
    chances of being used for pipelnining.

Yang Tse (19 Nov 2008)
- user provided PATH_SEPARATOR always overrides auto-detected one

- attempting to keep lines below 80 chars

Dan Fandrich (18 Nov 2008)
- Avoid creating garbage on an OOM error

Yang Tse (18 Nov 2008)
- provide a common PATH_SEPARATOR check method which is required by
  upcomming work to support the broadest range of Autoconf versions

Dan Fandrich (18 Nov 2008)
- Made an array static const

- Added #include "rawstr.h"

Yang Tse (18 Nov 2008)
- check for gethostbyaddr and gethostbyname as it is done for other functions

Daniel Stenberg (17 Nov 2008)
- curl also builds fine for microblaze uclinux

- libcurl has been built and ran on Cell OS on the Cell processor (playstation 3)

Dan Fandrich (17 Nov 2008)
- Added more compiler warning options for gcc 4.3

- Display the time in verbose mode during the torture tests to help determine
  when the tests stall.

Yang Tse (17 Nov 2008)
- the IP address we want/request/use from the interface is the 'local'
  address, the one on the box libcurl is running, not the 'remote' one.

- fix comment

- if2ip.c related preprocessor cleanup

- Make configure script check if ioctl with the SIOCGIFADDR command can be
  used, and define HAVE_IOCTL_SIOCGIFADDR if appropriate.

- fix leftover from previous commit

Daniel Stenberg (17 Nov 2008)
- pipelining for PUT is a good idea

Dan Fandrich (17 Nov 2008)
- Fixed an outdated mention of having keep strings around in curl_easy_setopt
  calls. Added a paragraph explaining that libcurl takes care of low-level
  protocol details. Made a few minor edits.

Yang Tse (17 Nov 2008)
- update with my last changes

- fix inet_pton() runtime configure check

- backport fix for failures to reject certain malformed literals

Daniel Stenberg (16 Nov 2008)
- Christian Krause fixed a build failure when building with gss support
  enabled and FTP disabled.

- fix OOM problem reported by Jim Meyering

Yang Tse (16 Nov 2008)
- trim down configure script size

Daniel Stenberg (15 Nov 2008)
- my recent changes

- based on a report by Jim Meyering, I went over and added checks for return
  codes for all calls to malloc and strdup that were missing. I also changed
  a few malloc(13) to use arrays on the stack and a few malloc(PATH_MAX) to
  instead use aprintf() to lower memory use.
  I also fixed a memory leak in Curl_nss_connect() when CURLOPT_ISSUERCERT is
  in use.

- Fixed an OOM condition reported by Jim Meyering

Dan Fandrich (14 Nov 2008)
- Added some more examples of options to reduce binary size. Added x86_64 Linux
  as a known-working environment.

- Added some #ifdefs around header files and change the EAGAIN test to
  fix compilation on Cell (reported by Jeff Curley).

- Added .xml as one of the few common file extensions known by the multipart
  form generator.  Made the extensions part of the MIME type struct to reduce
  the size and run-time relocations necessary to build the table.

Daniel Stenberg (14 Nov 2008)
- check for NULL returns from strdup() - reported by Jim Meyering
  also prevent buffer overflow on MSDOS when you do for example -O on a url
  with a file name part longer than PATH_MAX letters

- fix an OOM problem detected by Jim Meyering

- Remove a chunk of unused code that was #ifdef'de on defines we never set.
  We do testing of code functions using the test suite instead!

Yang Tse (14 Nov 2008)
- fix typo affecting inclusion of <arpa/inet.h> in configure
  checks for inet_ntoa_r() inet_ntop() and inet_pton()

- #include <string.h> in the getaddrinfo() runtime check for the memset() prototype

- fix symbol definition check for fcntl.h inclusion

- #include <stdlib.h> in the getifaddrs() runtime check for the exit() prototype

Daniel Stenberg (13 Nov 2008)
- curl runs fine on Linux on Cell (PS3)

Yang Tse (13 Nov 2008)
- Refactor configure script detection of functions used to set sockets into
  non-blocking mode, and decouple function detection from function capability.

Daniel Stenberg (13 Nov 2008)
- and we are now on the 7.19.3 road

Version 7.19.2 (13 Nov 2008)

Daniel Stenberg (13 Nov 2008)
- 7.19.2 coming up

- two more things for 7.19.3

Michal Marek (13 Nov 2008)
- - Fixed a potential data loss in Curl_client_write() when the transfer is
    paused.

Dan Fandrich (13 Nov 2008)
- Shortened some FTP responses to allow the timeout to be reduced by a second
  while still causing a timeout during the data phase.

Gunter Knauf (13 Nov 2008)
- changed to latest libidn version.

- changed defines to make autobuild logs display libidn usage.

Dan Fandrich (12 Nov 2008)
- Fixed an OOM problem with test 560

- Give the test an extra second to run so it passes on slow machines

Daniel Stenberg (11 Nov 2008)
- - Rainer Canavan filed bug #2255627
    (http://curl.haxx.se/bug/view.cgi?id=2255627) which pointed out that a
    program using libcurl's multi interface to download a HTTPS page with a
    libcurl built powered by OpenSSL, would easily get silly and instead hand
    over SSL details as data instead of the actual HTTP headers and body. This
    happened because libcurl would consider the connection handshake done too
    early. This problem was introduced at September 22nd 2008 with my fix of the
    bug #2107377
  
    The correct fix is now instead done within the GnuTLS-handling code, as both
    the OpenSSL and the NSS code already deal with this situation in similar
    fashion. I added test case 560 in an attempt to verify this fix, but
    unfortunately it didn't trigger it even before this fix!

- bump them all to 7.19.3 and remove some of the pending ones until they are
  either sorted out or more/new details come up

- Added test case 560:
  
  This test was added after the HTTPS-using-multi-interface with OpenSSL
  regression of 7.19.1 to hopefully prevent this embarassing mistake from
  appearing again... Unfortunately the bug wasn't triggered by this test, which
  presumably is because the connect to a local server is too fast/different
  compared to the real/distant servers we saw the bug happen with.

- Added missing <keywords>

Gunter Knauf (11 Nov 2008)
- updated OpenSSL version.

- added libidn build.

- updated coment, updated OpenSSL version.

- added libidn build.

Daniel Stenberg (11 Nov 2008)
- cleaned up entries that have been implemented already or are deemed not really
  wanted anyway

Yang Tse (11 Nov 2008)
- Related with bug #2230535 (http://curl.haxx.se/bug/view.cgi?id=2230535)
  Daniel Fandrich noticed that curl_addrinfo was also missing in the build
  process of other four non-configure platforms. Added now.

Daniel Stenberg (9 Nov 2008)
- 11 new contributors from the 7.19.1 release

Yang Tse (8 Nov 2008)
- check for getifaddrs and freeifaddrs as it is done for other functions

Dan Fandrich (7 Nov 2008)
- The getifaddrs() version of Curl_if2ip() crashed when used on a Linux
  system with a TEQL load-balancing device configured, which doesn't
  have an address.  Thanks to Adam Sampson for spotting this (bug #2234923).

Yang Tse (7 Nov 2008)
- terminate with appropriate exit code

- give credit where credit is due

- Bug #2230535 (http://curl.haxx.se/bug/view.cgi?id=2230535) pointed out a
  problem with MSVC 6 makefile that caused a build failure. It was noted that
  the curl_addrinfo.obj reference was missing. I took the opportunity to sort
  the list in which this was missing.

- Add missing curl_addrinfo, and sort the list.

- Merged existing IPv4 and IPv6 Curl_ip2addr functions into a single one
  which now also takes a protocol address family argument.

Dan Fandrich (6 Nov 2008)
- Added test 1086 to test a timeout the occurs during an FTP data transfer.

- Make the SLOWDOWN option slow the FTP data connection, not just the
  control connection.

- Factored out some common code into a new function output_auth_headers

Daniel Stenberg (5 Nov 2008)
- mention the speed unit for the _SPEED_LARGE options from bug #2226722

- corrected and clarified the *_SPEED_LARGE comments

- 7.19.1 is now history

- and we're back on square one working on the next release...

Version 7.19.1 (5 Nov 2008)

Daniel Stenberg (5 Nov 2008)
- 7.19.1 coming up

- oops, use the correct option name

- the pending bugs are now moved to next release

- CURLINFO_FILETIME now works for file:// transfers as well

Yang Tse (3 Nov 2008)
- Sync up with reality

Daniel Stenberg (3 Nov 2008)
- - Bug #2218480 (http://curl.haxx.se/bug/view.cgi?id=2218480) pointed out a
    problem with my CURLINFO_PRIMARY_IP fix from October 7th that caused a NULL
    pointer read. I also took the opportunity to clean up this logic (storing of
    the connection's IP address) somewhat as we had it stored in two different
    places and ways previously and they are now unified.

Gisle Vanem (3 Nov 2008)
- If building with CURLDEBUG, sprintf() is defined away. So use curl_msprintf()
  and not sprintf().

- Added '#define HAVE_GETNAMEINFO' and qualifiers/types
  for it.

- djgpp/DOS does have getaddrinfo().

Yang Tse (3 Nov 2008)
- fix length of longest IPv6 address string

Daniel Stenberg (3 Nov 2008)
- I liked Daniel Johnson's simplified version bumper guide so I modified the
  instruction in the comments to use that instead! Original mail:
  http://curl.haxx.se/mail/lib-2008-11/0019.html

Dan Fandrich (2 Nov 2008)
- Marked with TODO comments a number of problems in the Kerberos code detected
  while investigating the issue in http://curl.haxx.se/mail/lib-2008-09/0262.html
  I'm hesitant to fix them because I have no way of testing the result.

Daniel Stenberg (1 Nov 2008)
- 183 - "libcurl issue with IPv6 and c-ares"
  done!

- Daniel Johnson reported and fixed ipv4 name resolves when libcurl is built
  with ipv6-enabled c-ares

- Added a TODO file to list things we want changed, added or fixed.

- bump VERSIONINFO for the upcoming release

- - Carlo Contavalli added support for the glibc "rotate" option, as documented
    in man resolv.conf:
  
    causes round robin selection of nameservers from among those listed.  This
    has the effect of spreading the query load among all listed servers, rather
    than having all clients try the first listed server first every time.
  
    You can enable it with ARES_OPT_ROTATE

Yang Tse (1 Nov 2008)
- Adjust WIN32 freeaddrinfo, getaddrinfo and getnameinfo availability

- WIN32 availability of freeaddrinfo, getaddrinfo and getnameinfo functions is quite
  convoluted, compiler dependant and in some cases even build target dependat.

Gisle Vanem (1 Nov 2008)
- init_resolve_thread() needs 'hints' on the native form.

- Added '#define HAVE_GETADDRINFO'.

- Added curl_addrinfo.obj. Rearranged alphabetically.

- Fix typos.

Daniel Stenberg (31 Oct 2008)
- Cleaned up in preparation for release next week. I'd say the remaining bugs
  risk getting postponed for 7.19.2.

Yang Tse (31 Oct 2008)
- fix OOM handling

- NetWare LIBC target has getaddrinfo() and freeaddrinfo()

- Move curl_dofreeaddrinfo() and curl_dofreeaddrinfo()
  implementation from lib/hostip6.c to lib/curl_addrinfo.c
  and prototypes from lib/hostip.h to lib/curl_addrinfo.h

- remove bogus whitespace

- check for freeaddrinfo() at configuration phase

- These two variables are now Curl_addrinfo pointers

- remove bogus comment

- update aclocal file serial number

- Use our Curl_addrinfo definition even when an addrinfo struct is available.
  
  Use a wrapper function to call system's getaddrinfo().

- remove verification of the freeability of the addrinfo struct pointer members

Dan Fandrich (30 Oct 2008)
- SLOWDOWN actually causes a 0.01 second delay between bytes

Daniel Stenberg (29 Oct 2008)
- --ftp-method was added in 7.15.1. This mention ends up a bit oddly formatted
  but I'm not in the mood to fight nroff right now...

Dan Fandrich (29 Oct 2008)
- Fixed a bug that caused a few bytes of garbage to be sent after a
  curl_easy_pause() during a chunky upload. Reported by Steve Roskowski.

Yang Tse (29 Oct 2008)
- fix comment

- make CHECK_FUNC_GETADDRINFO_UNFREEABLE_AI_ADDR
   and CHECK_FUNC_GETADDRINFO_UNFREEABLE_AI_CANONNAME
  internal to CHECK_FUNC_GETADDRINFO

Dan Fandrich (28 Oct 2008)
- Mention more restrictions on timeouts when using signals

Daniel Stenberg (28 Oct 2008)
- added an extra set of braces to unconfuse emacs and then I re-indented a
  section of the code that was odd-looking previously

Yang Tse (28 Oct 2008)
- fix leftover

Dan Fandrich (28 Oct 2008)
- Tweaked the include paths to work in CodeWarrior

Yang Tse (28 Oct 2008)
- Initial attempt to detect at configuration time if the getaddrinfo()
  function returns an addrinfo with an unfreeable ai_canonname member ptr.

Dan Fandrich (28 Oct 2008)
- Changed the "resolve" test precheck program to verify that an IPv6 socket
  can be created before resolving the IPv6 name.  In the context of running
  a test, it doesn't make sense to run an IPv6 test when a host is resolvable
  but IPv6 isn't usable.  This should fix failures of test 1085 on hosts with
  library and DNS support for IPv6 but where actual use of IPv6 has been
  administratively disabled.

- curlx.h isn't a system include file so it gets double quotes

Yang Tse (28 Oct 2008)
- Initial attempt to detect at configuration time if the getaddrinfo()
  function returns an addrinfo with an unfreeable ai_addr member ptr.

Daniel Stenberg (28 Oct 2008)
- Philippe Vaucher pointed out this use of an outdated option name...

Yang Tse (28 Oct 2008)
- fix test # 558 and 559 CFLAGS

Dan Fandrich (27 Oct 2008)
- Added rawstr.c to some more non-configure curl makefiles

Yang Tse (27 Oct 2008)
- don't skip tests 558 and 559 on i686 icc autobuilds

- test #558 tests internal hash create/destroy
  
  test #559 tests internal hash create/add/destroy

Gisle Vanem (27 Oct 2008)
- Added explicit rule and dependencies for $(OBJ_DIR)\rawstr.obj.

Yang Tse (27 Oct 2008)
- Skip test #558 when libcurl is built with hidden symbols

- For tracing purposes log a fake call to getaddrinfo
  when allocating/building the fake Curl_addrinfo.

- add null-pointer check

- avoid using Curl_ip2addr(), simply build up a fake Curl_addrinfo

- convert test #558 into something more interesting, attempting
  now to minimally exercise some internal hash routines.

- test #558 verifies loop operation using malloc() and free()

- add missing header inclusions

Dan Fandrich (25 Oct 2008)
- Added experimental support for zlib and OpenSSL on Symbian OS.

Yang Tse (25 Oct 2008)
- icc adjustments:
  
    Select ANSI C89 dialect plus GNU extensions, again.

- add missing header inclusions

Dan Fandrich (24 Oct 2008)
- Stop using in6addr_any because it's not available everywhere (e.g. Symbian)
  and isn't strictly needed here.

- Added rawstr.c to Symbian curl build

Yang Tse (24 Oct 2008)
- fix compiler warning

- some more temporary magic for the icc seg-fault issue

- icc permanent adjustment:
  
    Select precise floating-point model, otherwise doubles are less than 64-bit wide
  
  icc test adjustment:
  
    Select c89 dialect

- fix compiler warning

Dan Fandrich (23 Oct 2008)
- Added rawstr.c to the non-configure curl makefiles

- Added rawstr.c to the non-configure libcurl makefiles

Yang Tse (23 Oct 2008)
- moved some definitions from tftp.h to tftpd.c

- fix compiler warning

Daniel Stenberg (23 Oct 2008)
- moved the Curl_raw_ functions into the new lib/rawstr.c file for easier curlx_
  inclusion by the curl tool without colliding with the curl_strequal functions.

Yang Tse (23 Oct 2008)
- icc adjustments:
  
    Enable more icc warnings.
  
    Optimization disabling options used only for icc 9.1

- Raise message severity up to warning, when strerror_r() exists but
  configure is unable of finding out if it has glibc-style or POSIX-style,
  trying to ensure that this condition does not go unnoticed.

Daniel Stenberg (23 Oct 2008)
- added include to make the krb4 code compile again

Dan Fandrich (23 Oct 2008)
- Really old gcc doesn't like parenthesis around the names of functions that
  don't have prototypes. They didn't serve any useful purpose here, anyway.

- Tweaked a few tests to test proper Turkish locale handling

- Created Curl_raw_nequal() which does a C-locale string case comparison.
  Changed checkprefix() to use it and those instances of strnequal() that
  compare host names or other protocol strings that are defined to be
  independent of case in the C locale.  This should fix a few more
  Turkish locale problems.

Yang Tse (23 Oct 2008)
- #include <stdlib.h> for exit() prototype

Dan Fandrich (22 Oct 2008)
- Updated example sizes and disable key words

- Fixed a compiler warning with --disable-proxy

Daniel Stenberg (22 Oct 2008)
- fixed language, added the Solaris _REENTRANT thing

Yang Tse (22 Oct 2008)
- For i686 icc autobuilds:
  
    Re-enable all tests for debug-enabled builds.
  
    For debug-disabled builds only 8 tests are enabled.

Daniel Stenberg (22 Oct 2008)
- removed four issues that had no action at all for the last four weeks or more

Yang Tse (22 Oct 2008)
- some more temporary magic for the icc seg-fault issue

- remove from configure.ac temporary magic for the icc seg-fault issue

Dan Fandrich (22 Oct 2008)
- Changed some arrays of char* to arrays of char[] to reduce data size and
  run-time relocations.

- Compile away some more code in the CURL_DISABLE_PROXY case.

Yang Tse (21 Oct 2008)
- some more temporary magic for the icc seg-fault issue

Dan Fandrich (21 Oct 2008)
- Fixed some problems with SFTP range support to fix test cases 634 through 637.

Yang Tse (21 Oct 2008)
- Charles Hardin patch:
  
  - handles the EINPROGRESS for UDP connects
  - uses closesocket instead of close on some paths that were noticed

- remove debug-code which zero-filled some structures before free()ing them

Dan Fandrich (20 Oct 2008)
- A few prototypes shouldn't be defined if SSL is disabled.

Yang Tse (20 Oct 2008)
- *** empty log message ***

Daniel Stenberg (20 Oct 2008)
- All the coverity.com issues have no been taken care of.

- added a NULL pointer check for the name field as it can in fact be NULL when
  dereferenced here, if the app passes in a funny combo. Detected by coverity.com

Yang Tse (20 Oct 2008)
- some more temporary magic for the icc seg-fault issue

- messages initially intended only for debug purposes, now become permanent
  since these are extremely useful when compiler rejects a set of options.

- fix compiler warning

Daniel Stenberg (19 Oct 2008)
- Fixed potential memory leak in OOM situations. Detected by coverity.com

Yang Tse (19 Oct 2008)
- oops

Daniel Stenberg (19 Oct 2008)
- dumpeasycode() uses warnf() which uses config->errors so we must not close
  that before dumpeasycode() is called. Found by coverity.com

- Removed dead code, identified by coverity.com.

Yang Tse (19 Oct 2008)
- attempt to fix or allow further detection of an elusive icc SIGSEGV

Daniel Stenberg (19 Oct 2008)
- clarified an argument's situation due to a false positive alert pointed out
  by coverity.com

Dan Fandrich (19 Oct 2008)
- Fixed a compiler warning in the CURL_DISABLE_HTTP case

Yang Tse (19 Oct 2008)
- attempt to fix compiler warning relative to potential misaligned data access

Dan Fandrich (18 Oct 2008)
- Removed some more code in the CURL_DISABLE_HTTP case

- Removed a line of dead code (discovered by Coverity)

- Forgot it's a struct

- Fixed a compile error reported by Albert Chin on AIX and IRIX when using
  GTLS.

Yang Tse (17 Oct 2008)
- fix compiler warning

- fix missing double-quotes

- protect against 'use after free' or race condition

- oops ;-)

- oops

Daniel Stenberg (17 Oct 2008)
- fix syntax error

Patrick Monnerat (17 Oct 2008)
- Introduce new options CURLOPT_PROXY{USERNAME, PASSWORD} in OS400 code and RPG binding.

Yang Tse (17 Oct 2008)
- fix compiler warning

- OOM condition fix

Daniel Stenberg (17 Oct 2008)
- Charles Hardin made adig support a regular numerical dotted IP address for the
  -s option as well.

- 185 - CURLOPT_PROXYUSER etc
  done!

- After having studied one of the coverity.com reports at length last night, I
  decided it was a good idea to properly document my thoughts in a comment near
  the code that was identified as a possible flaw. A false positive as far as I
  can see.

Yang Tse (17 Oct 2008)
- remove some spurious line-endings

- portability fix to avoid memory alignment problems

Dan Fandrich (16 Oct 2008)
- Return an error when a proxy option is set when configured with
  --disable-proxy mode.
  Removed some unnecessary prototypes.

- Added missing HTTP proxy and other keywords

- CURLOPT_POST301 => CURLOPT_POSTREDIR

Daniel Stenberg (16 Oct 2008)
- don't segfault when NULL is passed in to CURLOPT_USERPWD or
  CURLOPT_PROXYUSERPWD

- - Igor Novoseltsev added CURLOPT_PROXYUSER and CURLOPT_PROXYPASSWORD that then
    make CURLOPT_PROXYUSERPWD sort of deprecated. The primary motive for adding
    these new options is that they have no problems with the colon separator
    that the CURLOPT_PROXYUSERPWD option does.

- compile the library file strequal.c to get the Curl_raw_equal function as
  that's not exported by the lib

- mention the openssl requirement for the certinfo data

- correct version number for the certinfo addition

- Added CURLINFO_CERTINFO

- I renamed the function

- Renamed Curl_ascii_equal to Curl_raw_equal and bugfixed the my_toupper function
  used in strequal.c so now all test cases run fine for me again.

- Curl_ascii_equal() must not assume that the string is actually ASCII (so that a-z
  are consecutive and with a 0x20 "distance" to the uppercase letter), since we do
  support EBCDIC as well. Thus I replaced the macro with a (larger) switch case.
  
  I better change the function name...

Yang Tse (16 Oct 2008)
- some more temporary magic for the icc seg-fault issue

Daniel Stenberg (15 Oct 2008)
- fix warning

- - Pascal Terjan filed bug #2154627
    (http://curl.haxx.se/bug/view.cgi?id=2154627) which pointed out that libcurl
    uses strcasecmp() in multiple places where it causes failures when the
    Turkish locale is used. This is because 'i' and 'I' isn't the same letter so
    strcasecmp() on those letters are different in Turkish than in English (or
    just about all other languages). I thus introduced a totally new internal
    function in libcurl (called Curl_ascii_equal) for doing case insentive
    comparisons for english-(ascii?) style strings that thus will make "file"
    and "FILE" match even if the Turkish locale is selected.

Yang Tse (15 Oct 2008)
- Ensure that shell variable contents which have active meaning
  to the shell echo command are not interpreted when trying to
  remove extra whitespace from shell variable content.

Dan Fandrich (15 Oct 2008)
- A <precheck> command is considered to have failed if it returns a non-zero
  return code.  This way, if the precheck command can't be run at all for
  whatever reason, it's treated as a precheck failure which causes the
  test to be skipped.

Daniel Stenberg (15 Oct 2008)
- removed the proto as well since the function is now gone

- remove Curl_strcasestr() since there is no code at all using this function!

- mention his full name

- - John Wilkinson filed bug #2155496
    (http://curl.haxx.se/bug/view.cgi?id=2155496) pointing out an error case
    without a proper human-readable error message. When a read callback returns
    a too large value (like when trying to return a negative number) it would
    trigger and the generic error message then makes the proplem slightly
    different to track down. I've added an error message for this now.

- credit to John Wilkinson

Dan Fandrich (14 Oct 2008)
- Added signal-based resolver timeout issue

Yang Tse (14 Oct 2008)
- Adjust Watcom C warnings:
  
    Disable warnings on structure members padding.

Dan Fandrich (14 Oct 2008)
- Failing SFTP range tests cases 634 through 637

Daniel Stenberg (14 Oct 2008)
- four additional pending issues

Yang Tse (14 Oct 2008)
- With this change Solaris target builds will now be done with _REENTRANT defined.

- attempt to fix compiler warning:
  
    `variable' might be clobbered by `longjmp' or `vfork'

- Adjust Tiny C basic options:
  
    Remove -b from debug-enabled configuration, as Tiny C might have
    been built without the memory and bounds checker support.

- Adjust GCC warnings:
  
    Better disable following warnings when cross-compiling with a gcc older
    than 3.0, to avoid warnings from third party system headers:
  
      -Wmissing-declarations
      -Wmissing-prototypes
      -Wunused
      -Wshadow

Daniel Stenberg (14 Oct 2008)
- eeek, append 1 on the right place as otherwise we didn't fix the problem

Yang Tse (14 Oct 2008)
- fix syntax error

- Initial attempt to detect Watcom C compiler

- fix compiler warning

Daniel Stenberg (13 Oct 2008)
- Prevent the accidental passing along NULL for the cases where the --trace
  options don't succeed in opening the target file etc. Detected by coverity.com

- Prevent an off-by-one in a allocated buffer in glob_match_url() - detected by
  coverity.com

- Removed superfluous check of clist->name, as in this code path that pointer
  has already been dereferenced so it is bound to be valid. Pointed out to us
  by coverity.com

Dan Fandrich (13 Oct 2008)
- Don't rely on shell support to run multiple precheck tests

Yang Tse (13 Oct 2008)
- make naming scheme more consistent across whole file

- Adjust GCC warnings:
  
    Disable following warnings when cross-compiling with a gcc older
    than 3.0, to avoid warnings from third party system headers:
  
      -Wmissing-prototypes
      -Wunused
      -Wshadow

- attempt to fix or allow further detection of an elusive icc SIGSEGV

- There's no guarantee that a socket was involved at this point, so avoid displaying any error code.
  
  And on the other hand a message after setsockopt() certainly must use SOCKERRNO.

- Adjust GCC --enable-warnings:
  
    Do not enable -pedantic when cross-compiling with a gcc older
    than 3.0, to avoid warnings from third party system headers.

- adjust SGI MIPSpro C detection

- LCC compiler adjustments:
  
    Highest warning level is double -A, next is single -A.
    Due to the big number of warnings these trigger on third
    party header files it is impratical for us to use any of
    them here. If you want them simply define it in CPPFLAGS.

Dan Fandrich (12 Oct 2008)
- Changed Curl_strlcat to strlcat, which is the one guaranteed to exist

- Ensure the IPv6 stack is operational before running this test (other tests
  use the startup of the IPv6 test server as a substitute check for this).

Yang Tse (11 Oct 2008)
- remove extra space

- split SGI compiler check. One for MIPS C and another for MIPSpro C

- LCC compiler adjustments:
  
    Warning level reduced from double -A to single -A

- fix compiler warning

- fix compiler warning: explicit conversion of a 64-bit integral type to a smaller integral type

Dan Fandrich (10 Oct 2008)
- Fixed some compiler warnings with CURL_DISABLE_HTTP

Yang Tse (10 Oct 2008)
- attempt to fix or allow further detection of an elusive icc SIGSEGV

Patrick Monnerat (10 Oct 2008)
- _ Adapt OS400 EBCDIC wrappers to new options.
  _ Update RPG binding accordingly.
  _ Fix new options comments.

Yang Tse (10 Oct 2008)
- Initial attempt to detect Tiny C compiler

- Initial attempt to detect LCC compiler

- 1) fix bug in CONVERT_INCLUDE_TO_ISYSTEM
  
  2) Disable SGI remark: controlling expression is constant

- simplify SGI C compiler check

Dan Fandrich (10 Oct 2008)
- Allow compilation when no IPv6 stack is available.

Yang Tse (10 Oct 2008)
- move struct namebuf6 declaration out of Curl_ip2addr6()

- HP C adjustments:
  
    Due to the HP-UX socklen_t issue it is insane to use the +w1 warning level.
    It generates more than 1100 warnings on socklen_t related statements.
  
    Until the issue is somehow fixed we will just use the +w2 warning level.

- fix compiler warning

- Add debug tracing for COMPILER_WORKS_IFELSE

Dan Fandrich (9 Oct 2008)
- Get rid of some more code in the CURL_DISABLE_HTTP case

Daniel Stenberg (9 Oct 2008)
- I replaced the use of 'struct tm' with a private clone of that struct simply
  because the struct is declared on the stack and not all members are used so
  we could just as well make struct with only struct members we actually need.

Dan Fandrich (9 Oct 2008)
- Fixed a leftover reference to CURLOPT_FTP_SSL (thanks to Carlos Alloatti
  for spotting it).

Yang Tse (9 Oct 2008)
- configure will also warn on 'strict compiler warning' rejected options

Dan Fandrich (9 Oct 2008)
- Fixed the --interface option to work with IPv6 connections on glibc
  systems supporting getifaddrs(). Also fixed a problem where an IPv6
  address could be chosen instead of an IPv4 one for --interface when it
  involved a name lookup.

- Added HTTP as a required feature

- Update docs now that SFTP supports file ranges.

Yang Tse (9 Oct 2008)
- convert rejected compiler options messages into a warnings

- remove extra whitespace from string in SGI C check

Dan Fandrich (9 Oct 2008)
- Added tests 633 through 637 to test the new file range support for SFTP.
  All but the first test cause an infinite loop or other failure and so
  are added to DISABLED.

Yang Tse (9 Oct 2008)
- oops

- Initial attempt to detect SGI C compiler

- HP C adjustments:
  
    Disallow run-time dereferencing of null pointers.
  
    Disable some remarks:
  
      #4227: padding struct with n bytes to align member.
  
      #4255: padding size of struct with n bytes to alignment boundary.

- fix compiler warning: zero used for undefined preprocessing identifier

Daniel Stenberg (8 Oct 2008)
- - Bug #2152270 (http://curl.haxx.se/bug/view.cgi?id=2152270) identified and
    fixed a CURLINFO_REDIRECT_URL memory leak and an additional wrong-doing:
  
    Any subsequent transfer with a redirect leaks memory, eventually crashing
    the process potentially.
  
    Any subsequent transfer WITHOUT a redirect causes the most recent redirect
    that DID occur on some previous transfer to still be reported.

Dan Fandrich (8 Oct 2008)
- Added tests 1082 through 1085 to test symbolic --interface parameters

Daniel Stenberg (8 Oct 2008)
- - Igor filed bug #2111613 (http://curl.haxx.se/bug/view.cgi?id=2111613) that
    eventually identified a flaw in how the multi_socket interface in some cases
    missed to call the timeout callback when easy interfaces are removed and
    added within the same millisecond.

Dan Fandrich (8 Oct 2008)
- Fixed a memory leak in the new CURLOPT_USERPWD handling

Yang Tse (8 Oct 2008)
- improve presentation of accepted/rejected debug/optimizer options

- fix missing null-pointer check

- refactoring of COMPILER_BASIC_OPTS

Daniel Stenberg (8 Oct 2008)
- 179 - "[PATCH] Colon in username"
  was committed just now!

- - Igor Novoseltsev brought a patch that introduced two new options to
    curl_easy_setopt: CURLOPT_USERNAME and CURLOPT_PASSWORD that sort of
    deprecates the good old CURLOPT_USERPWD since they allow applications to set
    the user name and password independently and perhaps more importantly allow
    both to contain colon(s) which CURLOPT_USERPWD doesn't fully support.

Yang Tse (8 Oct 2008)
- Initial attempt to detect SUN C compiler

Dan Fandrich (8 Oct 2008)
- Created test cases 1080 and 1081 to reproduce a problem of
  CURLINFO_REDIRECT_URL leaking memory and returning incorrect results when
  two URLs are requested. Reported by vmpdemo in bug #2152270

Yang Tse (8 Oct 2008)
- Initial attempt to detect HP C compiler

Dan Fandrich (8 Oct 2008)
- Added const to some pointer variables

- Split off Curl_isxdigit function

- Changed the handling of read/write errors in Curl_perform() to allow a
  a fresh connection to be made in such cases and the request retransmitted.
  This should fix test case 160.  Added test case 1079 in an attempt to
  test a similar connection dropping scenario, but as a race condition, it's
  hard to test reliably.

Daniel Stenberg (7 Oct 2008)
- mention the other sf.net bug which does have a sort of fix mentioned

- some additional classification of the entries

- One fix for CURLINFO_PRIMARY_IP just went in which addressed at least one of
  the concerns mentioned for 174 and the other guy hasn't returned so I remove
  the entry from here now.

- - Fixed CURLINFO_PRIMARY_IP: When libcurl created a connection to host A then
    the app re-used the handle to do a connection to host B and then again
    re-used the handle to host A, it would not update the info with host A's IP
    address (due to the connection being re-used) but it would instead report
    the info from host B.

Dan Fandrich (7 Oct 2008)
- Document how to disable tests when certain --disable-* flags are used.

Yang Tse (7 Oct 2008)
- fix compiler warning: 'dot_4' may be used uninitialized in this function

- fix compiler warning: dereferencing type-punned pointer will break strict-aliasing rules

Daniel Stenberg (7 Oct 2008)
- oops, counted one of them twice!

- two more bindings

Yang Tse (7 Oct 2008)
- adjust ICC_windows settings

- fix VAR_STRIP

- Sync up with reality

- Initial attempt to support configure's --(dis|en)able-optimize
  option to specify dis(activation) of compiler optimizations.
  
  If option is specified, it will be honored independant of the
  --(dis|en)able-debug option.

- revert change introduced in tftpd.c revision 1.44

- fix another error introduced in previously mentioned commit

- fix error introduced in previous commit

- take 2 at fixing compiler warning: argument might be clobbered by `longjmp' or `vfork'

- fix compiler warning: dereferencing type-punned pointer will break strict-aliasing rules

- fix compiler warning: `variable' might be clobbered by `longjmp' or `vfork'

- fix compiler warning: `variable' might be clobbered by `longjmp' or `vfork'

- fix comment

- debug option check must be before warnings option check

- runtests.pl enables picky compiler warnings unless explicitly disabled

- Initial attempt to support configure's --(dis|en)able-warnings
  option to specify dis(activation) of picky compiler warnings.
  
  If option is specified, it will be honored independant of the
  --(dis|en)able-debug option.
  
  If option is not specified, it will follow --(dis|en)able-debug
  setting, whose default is disabled if not specified.

Dan Fandrich (1 Oct 2008)
- "make clean" now cleans out the docs and tests directories, too.

- Fixed some compiler warnings with gcc

Yang Tse (30 Sep 2008)
- remove unnecessary typecast, otherwise triggering compiler warning:
  dereferencing type-punned pointer will break strict-aliasing rules

Dan Fandrich (30 Sep 2008)
- Added "HTTP proxy" keyword

Yang Tse (30 Sep 2008)
- fix compiler warning: dereferencing type-punned pointer will break strict-aliasing rules

- fix compiler warning: declaration of 'err' shadows a previous local

- fix compiler warning: function declaration isn't a prototype

Patrick Monnerat (30 Sep 2008)
- Include latest parameter definitions in ILE/RPG bindings

Yang Tse (30 Sep 2008)
- fix compiler warning: enumerated type mixed with another type

- now compiler warnings are activated for all gcc builds, not only debug ones.

Daniel Stenberg (30 Sep 2008)
- - The libcurl FTP code now returns CURLE_REMOTE_FILE_NOT_FOUND error when SIZE
    gets a 550 response back for the cases where a download (or NOBODY) is
    wanted. It still allows a 550 as response if the SIZE is used as part of an
    upload process (like if resuming an upload is requested and the file isn't
    there before the upload). I also modified the FTP test server and a few test
    cases accordingly to match this modified behavior.

Yang Tse (30 Sep 2008)
- Use CFLAGS for icc linker options instead of LDFLAGS,
  otherwise gethostbyname() is not detected.

Dan Fandrich (29 Sep 2008)
- Fixed a couple of compile warnings.

- Made the month days table static const

- Fixed a compile problem with --disable-proxy

- Added "HTTP proxy" and "proxytunnel" keywords where applicable

Daniel Stenberg (29 Sep 2008)
- 177 - "[Patch] Disable proxy support" was applied

- spell!

- - Daniel Egger provided a patch that allows you to disable proxy support in
    libcurl to somewhat reduce the size of the binary. Run configure
    --disable-proxy.

Dan Fandrich (29 Sep 2008)
- Removed unneeded includes of signal.h and setjmp.h

- Moved all signal-based name resolution timeout handling into a single new
  Curl_resolv_timeout function to reduce coupling.

Yang Tse (29 Sep 2008)
- use ac_cv_compiler and ac_cv_compiler_num to keep compiler ID and version number

- Temporary icc adjustment:
  
    Disable floating point optimizations

Daniel Stenberg (29 Sep 2008)
- - Ian Lynagh provided a patch that now makes CURLOPT_RANGE work fine for SFTP
    downloads!

- 175 - "No info on REDIRECT_URL in multi-mode" by Max Ivanov is fixed!

- credit Maxim Ivanov

- - Bug #2107803 (http://curl.haxx.se/bug/view.cgi?id=2107803) "no
    CURLINFO_REDIRECT_URL in multi mode" also contained a patch that fixed the
    problem.

- made Curl_read_plain() return an 'int' instead of CURLcode since it actually
  returns -1 in EAGAIN cases and that's not valid CURLcode

- three more patches in the pipe

Dan Fandrich (26 Sep 2008)
- Fixed a few comment typos

Yang Tse (26 Sep 2008)
- if a test execution is aborted due to a signal, and the process
  returns no other exitcode, use 2000 + signal number as return code

- siginterrupt, signal and sigsetjmp checks

Daniel Stenberg (26 Sep 2008)
- more

Yang Tse (26 Sep 2008)
- use shift right. Division result is not integral.

- Avoid the use of the '? :' operator inside the call to our
  test-server logging function. It doesn't work on some systems.

- attempt to avoid HTTP server startup misdetection on some systems

- fix potential buffer overflow in test-server logging function

Daniel Stenberg (25 Sep 2008)
- give proper credit!

- - Fixed the HTTP Digest auth code to not behave badly when getting a blank realm
    with realm="". http://curl.haxx.se/bug/view.cgi?id=2126435

Yang Tse (24 Sep 2008)
- HAVE_INET_PTON will only be defined when an IPv6 capable working
  inet_pton function is available.

- configure script now checks availability of the inet_ntop() function,
  and when not crosscompiling verifies if it is IPv6 capable.
  
  HAVE_INET_NTOP will only be defined when an IPv6 capable working
  inet_ntop function is available.

- HAVE_INET_NTOP will only be defined when an IPv6 capable working
  inet_ntop function is available.

- Official OpenSSL released versions up to and including 0.9.8i as well as
  2008-09-24 stable snapshot have a buf_mem_st.length structure member with
  'int' data type.
  
  OpenSSL un-released 0.9.9 CVS version has a buf_mem_st.length structure member
  with 'size_t' data type since 2007-Oct-09.
  
  These 4 typecasts should silence compiler warnings in all cases.

- temporarily enable CURL_CHECK_FUNC_INET_NTOA_R

- ntoa() and inet_ntoa_r() no longer used

Daniel Stenberg (24 Sep 2008)
- 4.16 My HTTP POST or PUT requests are slow!

- Added "5.14 Using C++ non-static functions for callbacks?"

Yang Tse (24 Sep 2008)
- Re-enable test #100 on i686 icc autobuilds

Dan Fandrich (24 Sep 2008)
- Make sure not to dereference the wrong UrlState proto union member when
  switching from one protocol to another in a single request (e.g.
  redirecting from HTTP to FTP as in test 1055) by resetting
  state.expect100header before every request.

Yang Tse (23 Sep 2008)
- Remove usage of inet_ntoa and inet_ntoa_r

- Replace inet_ntoa and inet_ntoa_r with Curl_inet_ntop

Gisle Vanem (23 Sep 2008)
- Avoid 'warning: comparison between signed and unsigned'.

Daniel Stenberg (23 Sep 2008)
- 172 was applied, 173 is now being discussed

- remove the entire comment now when we no longer set TZ

- - Introducing Jamie Lokier's function for date to epoch conversion used in the
    date parser function. This makes our function less dependent on system-
    provided functions and instead we do all the magic ourselves. We also no
    longer depend on the TZ environment variable.

- issue #171 is now in CVS

- - Rob Crittenden brought a patch to "add some locking for thread-safety to NSS
    implementation".

- - Made the SOCKS code use the new Curl_read_plain() function to fix the bug
    Markus Moeller reported: http://curl.haxx.se/mail/archive-2008-09/0016.html
  
  - recv() errors other than those equal to EAGAIN now cause proper
    CURLE_RECV_ERROR to get returned. This made test case 160 fail so I've now
    disabled it until we can figure out another way to exercise that logic.

- removed issue #162 as mentioned on the mailing list http://curl.haxx.se/mail/archive-2008-09/0086.html

- better description

- - Michael Goffioul filed bug report #2107377 "Problem with mutli + GnuTLS +
    proxy" (http://curl.haxx.se/bug/view.cgi?id=2107377) that showed how a multi
    interface using program didn't work when built with GnuTLS and a CONNECT
    request was done over a proxy (basically test 502 over a proxy to a HTTPS
    site). It turned out the ssl connect function would get called twice which
    caused the second call to fail.

Yang Tse (22 Sep 2008)
- Re-enable tests #1 on i686 icc autobuilds

- icc adjustments for icc 9.0 and prior versions:
  
    Disable remark #279: controlling expression is constant
  
        Remark triggered mostly on va_arg() and FD_ZERO() macros.

Dan Fandrich (22 Sep 2008)
- Argument to CURLMOPT_MAXCONNECTS must be a long

- Fixed test 539 to handle an out of memory condition that shows up now
  that memdebug.h is included in the test programs.

Yang Tse (22 Sep 2008)
- attempt to make work the gethostname function
  check for winsock build target configurations

Daniel Stenberg (21 Sep 2008)
- #175 has a patch

- three new topics to check out

Gisle Vanem (21 Sep 2008)
- Added HAVE_NETDB_H, HAVE_ARPA_INET_H, HAVE_STRCASECMP
  and HAVE_STRNCASECMP.

Yang Tse (21 Sep 2008)
- fix compiler warning: defined but not used

- fix compiler warning: external declaration in primary source file

- fix compiler warning: defined but not used

- fix regression in configure script which affected OpenSSL builds on MSYS

- fix compiler warning: external definition with no prior declaration

- include "memdebug.h"

- HAVE_ALARM definition for static config-*.h files

- configure script now checks availability of the alarm() function

Dan Fandrich (19 Sep 2008)
- Only define alarmfunc when signals are used

Yang Tse (19 Sep 2008)
- icc adjustments:
  
    Disable remark #981: operands are evaluated in unspecified order
  
        Function calls which are triggering this remark, today, do not depend
        on the order of evaluation of its arguments.
  
    Disable remark #1469: "cc" clobber ignored
  
        Remark triggered on htons() and ntohs() due to glibc header files.

Dan Fandrich (19 Sep 2008)
- Don't bother to install a SIGALRM handler unless alarm() is available.
  Also, leave the existing SIGALRM handler alone if the timeout is too small
  to handle.

Yang Tse (18 Sep 2008)
- fix compiler warning: external definition with no prior declaration

- fix compiler warning: external definition with no prior declaration

- fix compiler warning: external declaration in primary source file

- icc adjustments

- sync up with reality

- fix false negative strerror_r detection

- fix wrong number used in comparison

- fix wrong variable used in comparison

- fix netdb.h prerequisite inclusion

Dan Fandrich (17 Sep 2008)
- Fixed a syntax error

- Removed reference to curl-ca-bundle.crt in the host verification failure
  error message.

Yang Tse (17 Sep 2008)
- improve detection of gethostbyaddr_r() and gethostbyname_r()

- improve detection of getservbyport_r()

- On Linux Intel's icc uses gcc's header files, so
  we select ANSI C89 dialect plus GNU extensions.

- improve detection of gethostname(), localtime_r() and strstr()

- improve detection of gethostname()

- NetWare builds include "nameser.h" from the c-ares subdir

- include <strings.h>

- sync up with reality

- Sync up with reality

- adjust inclusion of "nameser.h"

- reorder some lines in file

- code cleanup

- NetWare seems to have writev()

- NetWare seems to have writev()

- rearrange to allow internal/private use of ares_writev to any system
  that lacks the writev function.

- NetWare CLIB target has stricmp() and strnicmp()

Dan Fandrich (15 Sep 2008)
- Changed the test data file so it passes an XML syntax check

- Note that the long long issue is fixed in Symbian OS 9.4

Yang Tse (15 Sep 2008)
- NetWare CLIB target has stricmp() and strnicmp()

- include header file only when available

- remove debug tracing

- rearrange to allow internal/private use of ares_strcasecmp to any system that
  lacks the strcasecmp function.

- HAVE_STRNCASECMP and HAVE_STRNICMP definitions for WIN32

- improve detection of:
    strcasecmp()
    strcasestr()
    strcmpi()
    stricmp()
    strlcat()
    strncasecmp()
    strncmpi()
    strnicmp()

- improve detection of:
    strcasecmp()
    strcmpi()
    stricmp()
    strncasecmp()
    strncmpi()
    strnicmp()

- fix compiler warning: external declaration in primary source file

- fix compiler warning: defined but not used

- fix compiler warning: external declaration in primary source file

- fix compiler warning: external declaration in primary source file

- Disable tracking of fdopen() calls in the low-level memory leak tracking
  code when fdopen() is not available, to avoid compiler error.

- remove dead code portion inoperative long time ago

- *** empty log message ***

- fix compiler warning: enumerated type mixed with another type

Gisle Vanem (12 Sep 2008)
- djgpp does have strdup().

Yang Tse (12 Sep 2008)
- sync with reality

- ANSI C compatibility adjustment

- ensure that errno is not modified inside Curl_strerror()

- also check for an 'unsigned int' for third argument of strerror_r()

- improve detection of strerror_r()

- change CRLF into LF line endings

- ANSI C compatibility fix

- add some debug tracing

- improve detection of fdopen() and strerror_r()

- do not check if gmtime_r usage is allowed when a previous check has failed

- strdup() clone for systems/configurations which lack it

- move inclusion of ares_private.h last

Dan Fandrich (10 Sep 2008)
- Checked in some code improvements and minor fixes that I discovered in the
  FreeBSD ports system.

Yang Tse (10 Sep 2008)
- improve detection of strdup() and ftruncate()

- improve detection of sigaction() and strtok_r()

- icc adjustments

- improve detection of gmtime_r() and strtoll()

Dan Fandrich (10 Sep 2008)
- #170 is done

Yang Tse (10 Sep 2008)
- fix compiler warning

Dan Fandrich (10 Sep 2008)
- Checked in some grammatical and minor other fixes in the documentation and
  examples that I found in the FreeBSD ports system.

- Factored out Curl_isalnum

- Mike Revi discovered some swapped speed switches documented in the curl man
  page.

Yang Tse (9 Sep 2008)
- icc adjustments

Dan Fandrich (9 Sep 2008)
- Hammer home the fact that "multi interface" != "multi-threaded"

Yang Tse (8 Sep 2008)
- fix compiler warning

- Disable all tests on i686 icc autobuilds to inspect build messages

- Select strict ANSI C89 conformance for icc

Daniel Stenberg (8 Sep 2008)
- Removed: 166 167
  Added : 172

- Dmitry Kurochkin fixed pipelining over proxy using the multi interface

- - Stefan Krause pointed out that libcurl would wrongly send away cookies to
    sites in cases where the cookie clearly has a very old expiry date. The
    condition was simply that libcurl's date parser would fail to convert the
    date and it would then count as a (timed-based) match. Starting now, a
    missed date due to an unsupported date format or date range will now cause
    the cookie to not match.

- comment < 80 columns

- 171 - [PATCH] add some locking for thread-safety to NSS implementation

- SOCKS5_RESOLVE_LOCAL was just never added as an option!

Dan Fandrich (6 Sep 2008)
- Added HTTP 1.0 downgrade tests with proxies

Yang Tse (6 Sep 2008)
- remove unnecessary typecasting of malloc()

- remove unnecessary typecasting of calloc()

- remove unnecessary typecasting of realloc()

Dan Fandrich (5 Sep 2008)
- Only compile Curl_ssl_free_certinfo when SSL is enabled

- Improved the logic the decides whether to use HTTP 1.1 features or not in a
  request.
  
  Detect cases where an upload must be sent chunked and the server supports
  only HTTP 1.0 and return CURLE_UPLOAD_FAILED.

- Use realloc when paused in Curl_client_write

Daniel Stenberg (5 Sep 2008)
- Removed after commit:
  
  158 - Martin Drasar's CURLOPT_POSTREDIR work:
        http://curl.haxx.se/mail/lib-2008-08/0170.html

- - Martin Drasar provided the CURLOPT_POSTREDIR patch. It renames
    CURLOPT_POST301 (but adds a define for backwards compatibility for you who
    don't define CURL_NO_OLDIES). This option allows you to now also change the
    libcurl behavior for a HTTP response 302 after a POST to not use GET in the
    subsequent request (when CURLOPT_FOLLOWLOCATION is enabled). I edited the
    patch somewhat before commit. The curl tool got a matching --post302
    option. Test case 1076 was added to verify this.

- - Introducing CURLOPT_CERTINFO and the corresponding CURLINFO_CERTINFO. By
    enabling this feature with CURLOPT_CERTINFO for a request using SSL (HTTPS
    or FTPS), libcurl will gather lots of server certificate info and that info
    can then get extracted by a client after the request has completed with
    curl_easy_getinfo()'s CURLINFO_CERTINFO option. Linus Nielsen Feltzing
    helped me test and smoothen out this feature.
  
    Unfortunately, this feature currently only works with libcurl built to use
    OpenSSL.
  
    This feature was sponsored by networking4all.com - thanks!

- - Dmitriy Sergeyev pointed out that curl_easy_pause() didn't unpause properly
    during certain conditions. I also changed this code to use realloc() based
    on Daniel Fandrich's suggestion.

- five new recent issues to deal with

- Stefan Krause's mail to curl-library at 03 Sep 2008 made me add these two
  new date strings to get tested too.

Yang Tse (5 Sep 2008)
- somewhat protect Mac OS X users from using Mac OS 9 config file

- sync with reality

Gunter Knauf (4 Sep 2008)
- fixed largefile feature for MingW32 non-configure builds.

- enabled largefile feature for LIBC builds.

Dan Fandrich (4 Sep 2008)
- Made some variables const

Yang Tse (4 Sep 2008)
- fix print formatting string directives

- remove duplicate va_start() call

- fix print formatting string directives

Marty Kuhrt (3 Sep 2008)
- sync curlmsg* with curl.h for 7.19.0

Dan Fandrich (3 Sep 2008)
- Fixed curl-config when no features are enabled.

- Search for the FreeBSD CA cert file /usr/local/share/certs/ca-root.crt

Yang Tse (3 Sep 2008)
- remove extra semicolon from curl-config.in

Dan Fandrich (2 Sep 2008)
- Fixed an out of memory problem that caused torture test failures in tests
  706 and 707.

- Removed some redundant type casts

- Made some variables const which eliminated some casts

Daniel Stenberg (2 Sep 2008)
- - Keith Mok added supported_protocols and supported_features to the pkg-config
    file for libcurl, and while doing that fix he unified with curl-config.in
    how the supported protocols and features are extracted and used, so both those
    tools should now always be synced.

Yang Tse (2 Sep 2008)
- hex version number for 7.19.1 is 0x071301

Daniel Stenberg (2 Sep 2008)
- in the --libcurl output, mention that the large file stuff is only needed for
  pre 7.19.0 libcurl-using apps

- remove 7.19.0 and hint that 7.19.1 might not come until november

- an impressive 672 contributors (counter after the 7.19.0 release)

- clear the way for 7.19.1 work!

- 18 new contributors from the 7.19.0 release notes

Version 7.19.0 (1 Sep 2008)

Daniel Stenberg (1 Sep 2008)
- the web mirror system is dropped

- stand back for 7.19.0

- mention the curl_off_t changes first

- Add README.curl_off_t to the release archive

Yang Tse (31 Aug 2008)
- MSVC adjustment

Daniel Stenberg (30 Aug 2008)
- Added:
  
  165 - "Problem with CURLOPT_RESUME_FROM and CURLOPT_APPEND" by Daniele Pinau,
        recipe: http://curl.haxx.se/mail/lib-2008-08/0439.html

Yang Tse (30 Aug 2008)
- vc6curl.dsw and MSVC 6 IDE build directions

Dan Fandrich (29 Aug 2008)
- Removed one, added two

- Added tests 1071 through 1074 to test automatic downgrading from HTTP 1.1
  to HTTP 1.0 upon receiving a response from the HTTP server.  Tests 1072
  and 1073 are similar to test 1069 in that they involve the impossible
  scenario of sending chunked data to a HTTP 1.0 server.  All these currently
  fail and are added to DISABLED.
  
  Added test 1075 to test --anyauth with Basic authentication.

Daniel Stenberg (29 Aug 2008)
- test 1070 added

- - When libcurl was doing a HTTP POST and the server would respond with
    "Connection: close" and actually close the connection after the
    response-body, libcurl could still have outstanding data to send and it
    would not properly notice this and stop sending. This caused weirdness and
    sad faces. http://curl.haxx.se/bug/view.cgi?id=2080222
  
    Note that there are still reasons to consider libcurl's behavior when
    getting a >= 400 response code while sending data, as Craig Perras' note
    "http upload: how to stop on error" specifies:
    http://curl.haxx.se/mail/archive-2008-08/0138.html

- we start over working towards 1.5.4

- Version 1.5.3

- added the three people from RELEASE-NOTES and sorted the list alphabetically

Yang Tse (29 Aug 2008)
- Project and workspace files for VC6 IDE supporting 4 configurations:
  
  curl - Win32 using libcurl DLL Debug
  curl - Win32 using libcurl DLL Release
  curl - Win32 using libcurl LIB Debug
  curl - Win32 using libcurl LIB Release

- When not using large file support WIN32's lseek offset is a 'long'.

Daniel Stenberg (28 Aug 2008)
- Andres Garcia pointed out these Makefile mistakes...

Yang Tse (28 Aug 2008)
- Adjust curl_off_t definitions for DJGPP.
  
  Ancient versions of DJGPP do not have a 64-bit data type.

- Issue #144 seems to be complete. It should no longer be a show-stopper.

- ignore curlver.h.dist

- Adjust generation of MSVC project files

Daniel Stenberg (28 Aug 2008)
- don't use the mirrors anymore

- - I'm abandoning the system with the web site mirrors (but keeping download
    files bing mirrored) and thus I've changed the URL in the cookiejar header
    to no longer use curlm.haxx.se but instead use the main site curl.haxx.se

- we need to look over what libcurl does (not) do when error is received when it
  wants to send data

- minor code indent fixes

- - Dengminwen reported that libcurl would lock a (cookie) share twice (without
    an unlock in between) for a certain case and that in fact works when using
    regular windows mutexes but not with pthreads'! Locks should of course not
    get locked again so this is now fixed.
    http://curl.haxx.se/mail/lib-2008-08/0422.html

Dan Fandrich (28 Aug 2008)
- Fixed test case 1065 by changing the handling of CURLOPT_UPLOAD to set
  the HTTP method to GET (or HEAD) when given a value of 0.

Yang Tse (28 Aug 2008)
- This file must be kept in CVS with DOS style CR+LF line endings.

Dan Fandrich (28 Aug 2008)
- Fixed a couple of typos

- Added test 1069 to test PUT from stdin without content length. It fails
  in a similar manner to test 1065 so is added to DISABLED.

- Added test 1069 to test PUT from stdin without content length. It fails
  in a similar manner to test 1065 so is added to DISABLED.

- Added test case 1068 to do a simple HTTP PUT from stdin

Yang Tse (28 Aug 2008)
- DLL's resource file specification for VC6 generated .dsp file

- Add /D "CURL_STATICLIB" to LIB's BASE configuration

- VC6 generated .dsp file now supports 4 configurations:
  
  libcurl - Win32 DLL Debug
  libcurl - Win32 DLL Release
  libcurl - Win32 LIB Debug
  libcurl - Win32 LIB Release

Daniel Stenberg (27 Aug 2008)
- s/you you/you/ thanks to hexo6 at wp.pl

- spell! (most of it fixed by Tor Arntsen)

Dan Fandrich (27 Aug 2008)
- Fix large file support for Symbian OS on the emulator.

Yang Tse (27 Aug 2008)
- Don't abort configuration if recvfrom() is not available.

Dan Fandrich (26 Aug 2008)
- Treat all ARM compilers (RVCT, GCC) equally on Symbian OS. They are both
  compatible, and otherwise the dependency generation phase of the build
  would throw warnings since the actual compiler isn't known at that time.

- Fixed out of memory problems that caused torture test failures in tests
  1021 and 1067.

- Added multi keyword

- Added multi keyword

Yang Tse (26 Aug 2008)
- Windows build targets don't use the 'SONAME' mechanism.

- Another task completed and removed from #144:
  
  - Enabling and disabling of large file support is now complete.

- minor language adjustment

Daniel Stenberg (26 Aug 2008)
- spell out some benefits of this new approach of doing curl_off_t

Yang Tse (26 Aug 2008)
- Added check and symbol definition for WIN32 file API usage in configure,
  supporting configure's --disable-largefile option for WIN32 targets also.
  Non-configure systems which do not use config-win32.h configuration file,
  and want to use the WIN32 file API, must define USE_WIN32_LARGE_FILES or
  USE_WIN32_SMALL_FILES as appropriate in their own configuration files.

- Fix default SIZEOF_OFF_T definition logic

Patrick Monnerat (26 Aug 2008)
- Fix _LARGE_FILES definition (thanks to Yang Tse for signaling the bug)

Yang Tse (26 Aug 2008)
- Functionality only possible if recvfrom() is available.

- Three tasks completed and removed:
  
  - Logic based on CURL_SIZEOF_CURL_OFF_T and SIZEOF_OFF_T already adjusted.
  - Test case 557 already passes on all autobuilds.
  - System off_t, or equivalent, size is finally not recorded in curlbuild.h
    for this release. SIZEOF_OFF_T from config file is used.

- Use SIZEOF_OFF_T definition from config file

Patrick Monnerat (25 Aug 2008)
- Adapting OS400 build scripts to new features: new curlbuild.h file and soname in VERSION --> VERSIONINFO

Yang Tse (25 Aug 2008)
- Add missing preprocessor symbol definition checks

Daniel Stenberg (25 Aug 2008)
- remove some leftover debug code

- if the size of off_t is not the same as curl_off_t, this is not like how libcurl
  used to get built < 7.19.0 so we enforce an soname bump and display a warning

Yang Tse (25 Aug 2008)
- leftover

- George Neill's fix acountry sample application compilation failure.

- Brad House's validation that DNS response address matches the request address

- For congruency sake with the naming of other CURL_XXXXXX_CURL_OFF_T macros,
  the name of the curl_off_t data type used now becomes CURL_TYPEOF_CURL_OFF_T
  
  CURL_OFF_T -> CURL_TYPEOF_CURL_OFF_T

- Rename some shell vars with more descriptive names:
  
  x_typeof -> curl_typeof_curl_off_t
  x_sizeof -> curl_sizeof_curl_off_t
  x_format -> curl_format_curl_off_t
  u_format -> curl_format_curl_off_tu

- Re-enable all tests on x86_64 and ia64.

- Remove debug tracing and nearly all changes introduced since revision 1.72
  
  The effective result of this commit is revision 1.72 plus two changed lines. These
  can be viewed in http://cool.haxx.se/cvs.cgi/curl/lib/mprintf.c.diff?r1=1.72&r2=1.77

Daniel Stenberg (24 Aug 2008)
- 58.  It seems sensible to be able to use CURLOPT_NOBODY and
    CURLOPT_FAILONERROR with FTP to detect if a file exists or not, but it is
    not working: http://curl.haxx.se/mail/lib-2008-07/0295.html

- Introduced the configure option --enable-soname-bump that lets a user enforce
  an SONAME bump.

- Added firefox-db2pem.sh to the release archive

Yang Tse (24 Aug 2008)
- Fix wrong signed int formatting string directive in test case #557.
  
  This error did not cause test failures on systems where sizeof(int) == sizeof(long).

- Debug trace curl_mprintf() on x86_64 and ia64 systems.

- Disable all tests except #557 on x86_64 and ia64 to debug trace curl_mprintf() on these systems.

- x86_64 fixes

- x86_64 fixes

- Test if type casting a 'signed int' to a 'signed long long' fails to do sign extension  on x86_64.

Daniel Stenberg (23 Aug 2008)
- - Running 'make ca-firefox' in the root build dir will now run the new
    firefox-db2pem.sh conversion script that converts a local Firefox db of ca
    certs into PEM format, suitable for use with a OpenSSL or GnuTLS built
    libcurl.

Gunter Knauf (23 Aug 2008)
- removed obsolete slash in URL.

Daniel Stenberg (23 Aug 2008)
- added test case 1067 to verify --referer "firstone.html;auto"

- revert accidental commit of test code

- revert accidental commit

- - Constantine Sapuntzakis fixed a bug when doing proxy CONNECT with the multi
    interface, and the proxy would send Connection: close during the
    authentication phase.  http://curl.haxx.se/bug/view.cgi?id=2069047

- mention the no soname bump too

- my first take at documenting the curl_off_t situation when doing an upgrade
  < 7.19.0 to >= 7.19.x

- Andy Tsouladze's fix to kill the knowledge of servers properly after they have
  been killed.

Yang Tse (23 Aug 2008)
- explicit value assignment for comparison result

- typecast constant in comparison

Dan Fandrich (22 Aug 2008)
- Fixed a problem when --dump-header - was given with more than one URL,
  which caused an error when the second header was dumped due to stdout
  being closed.  Added test case 1066 to verify.  Also fixed a potential
  problem where a closed file descriptor might be used for an upload
  when more than one URL is given.

Daniel Stenberg (22 Aug 2008)
- 161 - test case 1065 failure (HTTP PUT with one file but two URLs)
        http://curl.haxx.se/mail/archive-2008-08/0075.html

Yang Tse (22 Aug 2008)
- Reinstate struct_stat definition that got lost in previous commit.

- Increase to 20 the number of CVS update retries.

- Adjustments to better select/differentiate when large/small file
  support is provided using WIN32 functions directly.

- Improved curl_m*printf() integral data type size and signedness handling

Daniel Stenberg (22 Aug 2008)
- Removed issue #154 due to the massive problems I've had to repeat it and since
  this really hasn't bitten anyone else. The issuer of the report (Felix) suggested
  the closure himself and he will get back when (if?) he manage to get a more
  reliable way to see the problem.
  
  154 - bug #2041827 "Segfault in http_output_auth w/ FORBID_REUSE (7.18.2)"

- Jamie Lokier is always helpful and this time around too...

- Sort of hackish approach to get the off_t size before large file support
  is enabled (or skipped). Thanks to Jamie Lokier for the nice work-around the
  cached-check-problem: http://curl.haxx.se/mail/lib-2008-08/0331.html

Yang Tse (22 Aug 2008)
- cleanup the BOOL usage

Daniel Stenberg (21 Aug 2008)
- 57. On VMS-Alpha: When using an http-file-upload the file is not sent to the
    Server with the correct content-length.  Sending a file with 511 or less
    bytes, content-length 512 is used.  Sending a file with 513 - 1023 bytes,
    content-length 1024 is used.  Files with a length of a multiple of 512 Bytes
    show the correct content-length. Only these files work for upload.
    http://curl.haxx.se/bug/view.cgi?id=2057858

- use a more updated certdata.txt URL

Gisle Vanem (21 Aug 2008)
- Work around a scanf() bug in djgpp 2.04. The assignments for this
  format is working okay. But the return value is incorrectly EOF.

- Added '#define HAVE_STRUCT_IN6_ADDR 1' needed when
  building with 'USE_ARES'.

- Added rule to generate '../include/curl/curlbuild.h'.

- Assume we have 'CRYPTO_cleanup_all_ex_data()' on OpenSSL/DOS too.

Yang Tse (21 Aug 2008)
- MSVC's __int64 data type is only available when _INTEGRAL_MAX_BITS >= 64

- Test case 557 now also verifies signed and unsigned int formatting.

- Old logic based on ENABLE_64BIT and HAVE_LONGLONG already revisited and adjusted.
  
  Old logic based on CURL_SIZEOF_CURL_OFF_T is only partially adjusted.

- Fixed a couple of bugs in libcurl's internal curl_m*printf() functions.

- Fix a LONG_MIN and LLONG_MIN related bug in internal m*printf()

- fix the output name

- Fix one bug detected thanks to test case 557.

- Some data type size adjustments.

- Get rid of ENABLE_64BIT symbol definition and usage.
  
  Improve HAVE_LONGLONG symbol description.

- Update of lib/Makefile.Watcom.

- Export 'ares_process_fd' too.

- Added option to use c-ares resolver lib.

- Use 'Curl_inet_pton()' instead of 'inet_pton()'.

- Simplify condition check

Daniel Stenberg (20 Aug 2008)
- the .netrc curl checks for is called _netrc on windows bug report #2061610

Dan Fandrich (20 Aug 2008)
- Added an edited version of Vincent Le Normand's documentation of SFTP quote
  commands to the man pages.

Daniel Stenberg (20 Aug 2008)
- - Phil Pellouchoud pointed out that the windows version of libcurl had a
    memory leak because it never called the OpenSSL function
    CRYPTO_cleanup_all_ex_data() as it was supposed to. This was because of a
    missing define in config-win32.h!

Yang Tse (18 Aug 2008)
- Update test case 557

- #159 and #160 already done.
  
  Add more tasks to #144.

- Added test case 557 to verify libcurl's internal curl_m*printf() functions
  formatting functionality when handling signed and unsigned longs, as well as
  our curl_off_t data type.

Gisle Vanem (17 Aug 2008)
- Pick-up programs from Makefile.inc.

- Replace 'HttpPost' with 'curl_httppost'.

- Rewritten to also produce a static library (libcurl_wc.lib).

Yang Tse (17 Aug 2008)
- OpenSSl enabled NetWare builds are changed to use the 'openssl' subdirectory
  when including the OpenSSL header files. This is the recommended setting, this
  prevents the undesired inclusion of header files with the same name as those
  of OpenSSL but which do not belong to the OpenSSL package. The visible change
  from previously released libcurl versions is that now OpenSSl enabled NetWare
  builds also define USE_OPENSSL in config files, and that OpenSSL header files
  must be located in a subdirectory named 'openssl'.

- Adjust usage of conditional definition of USE_OPENSSL

- libcurl internal base64.h header file renamed to curl_base64.h

- libcurl internal md5.h header file renamed to curl_md5.h

- Added #159 and #160

Gisle Vanem (16 Aug 2008)
- Ops, remove 'use_vc'.

- Support Watt-32 under Win32.

Yang Tse (16 Aug 2008)
- Oops, missed FORMAT_OFF_TU

- Fix Use of conditional definition of USE_OPENSSL

- Library internal only C preprocessor macros FORMAT_OFF_T and FORMAT_OFF_TU
  remain in use as internal curl_off_t print formatting strings for the internal
  *printf functions which still cannot handle print formatting string directives
  such as "I64d", "I64u", and others available on MSVC, MinGW, Intel's ICC, and
  other DOS/Windows compilers.
  
  This reverts previous commit part which did:
  
  FORMAT_OFF_T  -> CURL_FORMAT_CURL_OFF_T
  FORMAT_OFF_TU -> CURL_FORMAT_CURL_OFF_TU

Dan Fandrich (15 Aug 2008)
- Added test case 1065 to test a PUT with a single file but two URLs. This
  was discovered to be problematic while investigating an incident reported by
  Von back in May.  curl in this case doesn't include a Content-Length: or
  Transfer-Encoding: chunked header which is illegal. This test case is
  added to DISABLED until a solution is found.

Yang Tse (15 Aug 2008)
- For congruency sake with the naming of other CURL_XXXXXX_CURL_OFF_T macros,
  the names of the curl_off_t formatting string directives now become
  CURL_FORMAT_CURL_OFF_T and CURL_FORMAT_CURL_OFF_TU.
  
  CURL_FMT_OFF_T  -> CURL_FORMAT_CURL_OFF_T
  CURL_FMT_OFF_TU -> CURL_FORMAT_CURL_OFF_TU
  
  Remove the use of an internal name for the curl_off_t formatting string directives
  and use the common one available from the inside and outside of the library.
  
  FORMAT_OFF_T  -> CURL_FORMAT_CURL_OFF_T
  FORMAT_OFF_TU -> CURL_FORMAT_CURL_OFF_TU

- curlbuild.h is a generated file on configure-capable systems

Dan Fandrich (14 Aug 2008)
- Added Range keyword

- Added test 1063 to test an invalid large range on a file:

- Fixed unused variable warning

Yang Tse (14 Aug 2008)
- Take three at trying to detect signed and unsigned curl_off_t integer constant
  suffixes, using a test-and-try suffix approach letting the compiler validate it.

- When using our internal curlx_strtoll function NEED_CURL_STRTOLL must be defined,
  the source code of curlx_strtoll is excluded if NEED_CURL_STRTOLL isn't defined.

- CURL_LLONG_MIN should now be signed

- Use our CURL_LLONG_MAX and CURL_LLONG_MIN which are defined with the proper suffix.

- Change CURL_CHECK_DEF_INTXX_C suffix definition detection.
  
  Add debug tracing for CURL_CHECK_DEF_INTXX_C.

Daniel Stenberg (13 Aug 2008)
- Fixed:
  
  155 - bug #2038004 "Curl OpenSSL not compatible with 7.17 or 7.18"
  
  156 - proxy CONNECT issue (details not public yet due to possible security impact)

Yang Tse (13 Aug 2008)
- Use autoconf's result of AC_CHECK_SIZEOF(long) in CURL_CONFIGURE_LONG

- Ensure that the compiler 'knows' the 'long' type in CURL_CONFIGURE_LONG

- Sync config.h generation from lib/Makefile.netware and src/Makefile.netware

- Using the name of a macro inside AC_MSG_WARN takes aclocal to NeverLand.

- Adjust IBM C compiler CURL_SIZEOF_LONG

- Remove first version of comment not intended to be finally committed.

- The size of long is a build time characteristic and as such it is now recorded
  in curlbuild.h as CURL_SIZEOF_LONG. Definition now done from configure process
  and in CVS curlbuild.h.dist for non-configure systems.

- Split comparison among several lines for debugging

Daniel Stenberg (13 Aug 2008)
- on second thought, let's remove this number from here since it doesn't really
  belong among the release numbers anyway

- dead mirrors removed => http://curl.haxx.se/mail/lib-2008-08/0208.html

- httpcustomheader.c is a new tiny example showing a HTTP request with a custom
  header replacing an internal one

Gisle Vanem (13 Aug 2008)
- Watcom doesn't have <sys/time.h>.

- Remved '-dDEBUG_THREADING_GETADDRINFO' (no longer used).

- Update dependencies.

- Update dependencies.

- MingW uses gcc. Hence the suffixes for 64-bit are 'LL' and 'ULL'.

Yang Tse (13 Aug 2008)
- Adjustment due to curl_off_t no longer following off_t

Dan Fandrich (13 Aug 2008)
- Added a few user-visible bug fixes

Gunter Knauf (12 Aug 2008)
- sync src makefile with lib makefile.

Dan Fandrich (12 Aug 2008)
- Removed unneeded header files

- Fixed a buffer overflow problem in Curl_proxyCONNECT that could occur
  when a server responded with long headers and data.  Luckily, the buffer
  overflowed into another unused buffer, so no actual harm was done.
  Added test cases 1060 and 1061 to verify.

Yang Tse (12 Aug 2008)
- Fix 'result' may be used uninitialized in function readwrite_data()

- Fix curl_off_t sized constants usage

Dan Fandrich (12 Aug 2008)
- Handle short reads

Yang Tse (12 Aug 2008)
- DOS/Windows 'shells' eat echoed percent sign characters unless escaped.

Daniel Stenberg (12 Aug 2008)
- - Andy Tsouladze fixed runtests.pl to not attempt to execute the stunnel
    _directory_ if that happened to appear in the path!

Yang Tse (12 Aug 2008)
- Fix CURL_CHECK_DEF_INTXX_C suffix definition detection

- Added macros for minimum-width signed and unsigned curl_off_t integer
  constants CURL_OFF_T_C and CURL_OFF_TU_C. The clever double helper macro
  used internally to provide its functionality is thanks to Lars Nilsson.

Dan Fandrich (11 Aug 2008)
- Added HTTP CONNECT keywords

- Fixed a boundary condition error in ftp_readresp() whereby a non-terminal
  line of a multiline FTP response whose last byte landed exactly at the end
  of the BUFSIZE-length buffer would be treated as the terminal response
  line.  The following response code read in would then actually be the
  end of the previous response line, and all responses from then on would
  correspond to the wrong command. Test case 1062 verifies this.
  
  Stop closing a never-opened ftp socket.

Daniel Stenberg (11 Aug 2008)
- 152 + 153 are fixed!

- - Constantine Sapuntzakis filed bug report #2042430
    (http://curl.haxx.se/bug/view.cgi?id=2042430) with a patch. "NTLM Windows
    SSPI code is not thread safe". This was due to libcurl using static
    variables to tell wether to load the necessary SSPI DLL, but now the loading
    has been moved to the more suitable curl_global_init() call.

- - Constantine Sapuntzakis filed bug report #2042440
    (http://curl.haxx.se/bug/view.cgi?id=2042440) with a patch. He identified a
    problem when using NTLM over a proxy but the end-point does Basic, and then
    libcurl would do wrong when the host sent "Connection: close" as the proxy's
    NTLM state was erroneously cleared.

Yang Tse (11 Aug 2008)
- Ooops

- Added missing signed and unsigned curl_off_t integer constant suffixes for
  internal and external use. CURL_SUFFIX_CURL_OFF_T, CURL_SUFFIX_CURL_OFF_TU.

Daniel Stenberg (11 Aug 2008)
- added two known topics for 7.19.1

- five more bugs I'd like to get fixed or at least considered before 7.19.0

Yang Tse (11 Aug 2008)
- Old logic based on CURL_SIZEOF_CURL_OFF_T, ENABLE_64BIT, HAVE_LONGLONG,
  has to be revisited and adjusted as appropriate.
  
  Enabling and disabling of large file support needs further inspection.

- Fix NetWare missing curl_off_t typedef!!

-  s/SIZEOF_CURL_OFF_T/CURL_SIZEOF_CURL_OFF_T/g

- Die when curlbuild.h is not created or available

Gunter Knauf (10 Aug 2008)
- fixed creation of curlbuild.h.

Yang Tse (10 Aug 2008)
- Fix NetWare curlbuild.h
  
  NetWare curlbuild.h settings depend on whether LIBC or CLIB is used.
  
  The NetWare specific Makefile is capable of knowing which target is being built.
  So, finally, the NetWare Makefile will take care of generating curlbuild.h

- Fix: Remove now this SIZEOF_CURL_OFF_T symbol definition.
  
  This should have been done with the initial 64-bit curl_off_t patch.

- When running testcurl.pl display definitions from curlbuild.h

- Remove debug tracing for DO_CURL_OFF_T_CHECK and CURL_CHECK_DEF

- Use int64_t in favour of __int64 for curl_off_t when both are available.

- Improve CURL_CHECK_DEF

- Fix IBM C and DEC/Compaq C compiler detection

- Remove some redundancy

Dan Fandrich (8 Aug 2008)
- Refactored Curl_readwrite() into a number of smaller functions.

Yang Tse (8 Aug 2008)
- Add debug tracing for DO_CURL_OFF_T_CHECK

- Remove some redundancy

- Remove potential overquoting

- Remove rule no longer needed since tests/testcurl.pl revision 1.63
  
  See CVS commit comment on tests/testcurl.pl revision 1.63

- Reintroduce the adjustment previously done in testcurl.pl so that it copies the
  CVS checked out curlbuild.h.dist as curlbuild.h for any non-configure target
  when host system is not running buildconf.bat.
  
  All the curlbuild.h stuff was done taking in consideration that no adjustment
  would be needed in non-configure makefiles.
  
  As it is documented, when trying to build on non-configure capable systems or on
  systems which for any reason don't run the true configure script, it is required
  to have the proper curlbuild.h in place before calling any makefile.
  
  Due to the hardcore memory debugging stuff c-ares enabled debug builds also need
  the file in the proper place before attempting to build c-ares.

- Add debug tracing for CURL_CHECK_DEF

Dan Fandrich (8 Aug 2008)
- Made ftp a required feature

- Added test1059 to test the FTP proxy tunnel problem fixed July 11.

Yang Tse (8 Aug 2008)
- Peek at predefined symbols done. and now removed.
  
  Netware's autobuilds gcc can not been told apart from a standard built gcc.

- Add metroworks and generic gcc

- Take a peek at netware's gcc predefined symbols.

Dan Fandrich (8 Aug 2008)
- Fixed an uninitialized variable in multi_runsingle() that could cause a
  request to prematurely end.

Yang Tse (7 Aug 2008)
- Remove last adjustment done to testcurl.pl to verify if change introduced by
  Guenter Knauf in lib/Makefile.netware is enough to get the netware autobuilds
  going again.

Gunter Knauf (7 Aug 2008)
- use CP macro rather than cp command.

- added rule to create include/curl/curlbuild.h from include/curl/curlbuild.h.dist.

Yang Tse (7 Aug 2008)
- Adjust testcurl.pl to copy checked out curlbuild.h.dist as curlbuild.h
  for non-configure targets when host system doesn't run buildconf.bat.

- Skip data type check in DO_CURL_OFF_T_CHECK macro when argument is empty.

- Prevent buildconf from removing 'Makefile' and 'missing' files. This would blow
  away our CVS checked 'missing' file and also CVS checked 'hiper/Makefile'.

- Fix CURL_CHECK_DEF so that when the expansion of the preprocessor symbol results
  in a set of double-quoted strings, this macro will now return an expansion which
  consists of a single double-quoted string result of concatenating all of them.

- sync with reality

- Initial support of curlbuild.h and curlrules.h which allows
  to have a curl_off_t data type no longer gated to off_t.

Daniel Stenberg (6 Aug 2008)
- - mention curl_multi_socket_action() rather than the deprecated
    curl_multi_socket()
  - don't claim that it has an argument named 'easy' because it doesn't!

- remove debug code I accidentally left in here

Gisle Vanem (6 Aug 2008)
- Removed TRACE() code.

Yang Tse (5 Aug 2008)
- The minimum autoconf version required for this file is 2.50
  
  Avoid dot notation in aclocal serial file number, use a single number now.

- #148 Removed.
  
  Rebooting the problematic system, releasing allocated memory and swap,
  has allowed buildconf and configure to complete sucessfully since then.

- Validate that autom4te and autoconf versions match.
  
  Validate that aclocal and automake versions match.
  
  Improve removal of previous run generated files.
  
  Remove verbose debug logging of aclocal on Solaris.

Daniel Stenberg (4 Aug 2008)
- - Yehoshua Hershberg found a problem that would make libcurl re-use a
    connection with the multi interface even if a previous use of it caused a
    CURLE_PEER_FAILED_VERIFICATION to get returned. I now make sure that failed
    SSL connections properly close the connections.

- - Test cases 1051, 1052 and 1055 were added by Daniel Fandrich on July 30 and
    proved how PUT and POST with a redirect could lead to a "hang" due to the
    data stream not being rewound properly when it had to in order to get sent
    properly (again) to the subsequent URL. This is now fixed and these test
    cases are no longer disabled.

- - Fix by Tofu Linden:
  
    The symptom:
    * Users (usually, but not always) on 2-Wire routers and the Comcast service
    and a wired connection to their router would find that the second and
    subsequent DNS lookups from fresh processes using c-ares to resolve the same
    address would cause the process to never see a reply (it keeps polling for
    around 1m15s before giving up).
  
    The repro:
    * On such a machine (and yeah, it took us a lot of QA to find the systems
    that reproduce such a specific problem!), do 'ahost www.secondlife.com',
    then do it again.  The first process's lookup will work, subsequent lookups
    will time-out and fail.
  
    The cause:
    * init_id_key() was calling randomize_key() *before* it initialized
    key->state, meaning that the randomness generated by randomize_key() is
    immediately overwritten with deterministic values. (/dev/urandom was also
    being read incorrectly in the c-ares version we were using, but this was
    fixed in a later version.)
    * This makes the stream of generated query-IDs from any new c-ares process
    be an identical and predictable sequence of IDs.
    * This makes the 2-Wire's default built-in DNS server detect these queries
    as probable-duplicates and (erroneously) not respond at all.

Yang Tse (4 Aug 2008)
- Update #144
  
  Third version of the patch fixing a failure to chose a proper data
  type submitted to the mailing list 2008-08-04.

- Autoconf 2.62 has changed the behaviour of the AC_AIX macro which we use.
  Prior versions of autoconf defined _ALL_SOURCE if _AIX was defined. But,
  autoconf 2.62 version of AC_AIX defines _ALL_SOURCE along with other four
  preprocessor symbols no matter if the system is AIX or not. To keep the
  traditional behaviour, as well as an uniform one, across autoconf versions
  AC_AIX is replaced with our own internal macro.

Daniel Stenberg (3 Aug 2008)
- - Test case 1041 (added by Daniel Fandrich April 14th) proved a bug where PUT
    with -C - sent garbage in the Content-Range: header. I fixed this problem by
    making sure libcurl always sets the size of the _entire_ upload if an app
    attemps to do resumed uploads since libcurl simply cannot know the size of
    what is currently at the server end. Test 1041 is no longer disabled.

- refer to the new option by its real name

Yang Tse (3 Aug 2008)
- Update #148
  
  Rebooting the Solaris system, releasing allocated memory and swap,
  has allowed buildconf and configure to complete sucessfully. Further
  tests on the system might allow determination of the problem origin.
  Solaris AutoBuilds suceeded on August 2 and 3.

Dan Fandrich (3 Aug 2008)
- Improved title

Yang Tse (3 Aug 2008)
- Adjust DEC/Compaq C compiler settings.

- Another AC_TRY_COMPILE conversion to AC_COMPILE_IFELSE

- No longer test availability of the gdi32 library, nor use it for linking, even
  when we have been doing this since revision 1.47 of configure.ac 4 years and
  5 months ago when cross-compiling a Windows target. We actually don't use any
  function from the Windows GDI (Graphics Device Interface) related with drawing
  or graphics-related operations.

Dan Fandrich (1 Aug 2008)
- Added tests 1057 and 1058 to test FTP and HTTPS transfers with ranges
  relative to end of file.

Yang Tse (1 Aug 2008)
- Another AC_TRY_LINK conversion to AC_LINK_IFELSE.
  Proper definition of HAVE_function if function is found deeper.

- Another AC_TRY_LINK conversion to AC_LINK_IFELSE.
  Sorting of function names.
  Proper definition of HAVE_function if function is found deeper.

Dan Fandrich (1 Aug 2008)
- Added support for --append on SFTP uploads. Unfortunately, OpenSSH doesn't
  support this so it goes untested.

Yang Tse (1 Aug 2008)
- This line was for local testing, not intended to be committed.

- Add a whitespace

- Ensure that reserved keyword AC_DEFUN is only used for its purpose.

- Removed definition of CURL_CHECK_WORKING_RESOLVER from acinclude.m4 it has
  not been in use since revision 1.81 of configure.in 6 years, 9 months ago.

- Sync up with reality

- Sync up with reality

- Rename reentrant.m4 to avoid filename clash.

Dan Fandrich (1 Aug 2008)
- User names embedded in proxy URLs without a password were parsed
  incorrectly--the host name is treated as part of the user name and the
  port number becomes the password.  This can be observed in test 279
  (was KNOWN_ISSUE #54).

- Added more code under #ifndef CURL_DISABLE_HTTP to fix builds with
  --disable-http

- Refactored create_conn by breaking it up into many smaller functions

- Made a parameter const

- Fixed a problem with any FTP URL or any URLs containing an IPv6 address
  being mangled when passed to proxies when CURLOPT_PORT is also set
  (reported by Pramod Sharma).

- Fixed parsing of an IPv6 proxy address to support a scope identifier,
  as well as IPv4 addresses in IPv6 format. Also, better handle the case
  of a malformatted IPv6 address (avoid empty and NULL strings).

Yang Tse (31 Jul 2008)
- Second version of the patch addressing building outside of CVS tree
  submitted to the mailing list 2008-07-31. Awaiting Ok to commit.

Patrick Monnerat (31 Jul 2008)
- New CURLOPT_ADDRESS_SCOPE option in ILE/RPG binding

Dan Fandrich (31 Jul 2008)
- Fixed keyword

- Added keywords

- Added test of IPv6 scope handling

- Fixed a couple of problems in the IPv6 scope code. First, a host name in
  an URL in a Location: header didn't have the scope ID removed, so an
  invalid host name was used.  Second, when the scope ID was removed, it
  also removed any port number that may have existed in the URL.

Yang Tse (31 Jul 2008)
- s/silly/underquoted definition/

- #149 fully done and verified. Removed from here now.

Dan Fandrich (31 Jul 2008)
- Fixed a couple of buffer overflows in the MS-DOS port of the curl tool.
  Factored out unslashquote. Added some 'const's in function parameters.

- Added IPv6 section

Daniel Stenberg (30 Jul 2008)
- Committed just now and thus removed from here:
  
  145 - Phil Blundell's CURLOPT_SCOPE patch/work

- another option added, bump counter

- - Phil Blundell added the CURLOPT_SCOPE option, as well as adjusted the URL
    parser to allow numerical IPv6-addresses to be specified with the scope
    given, as per RFC4007 - with a percent letter that itself needs to be URL
    escaped. For example, for an address of fe80::1234%1 the HTTP URL is:
    "http://[fe80::1234%251]/"

- Fixed:
  
  147 - PHP's bug report #43158 (http://bugs.php.net/bug.php?id=43158) identifies
        a true bug in libcurl built with OpenSSL.

- - PHP's bug report #43158 (http://bugs.php.net/bug.php?id=43158) identifies a
    true bug in libcurl built with OpenSSL. It made curl_easy_getinfo() more or
    less always return 0 for CURLINFO_SSL_VERIFYRESULT because the function that
    would set it to something non-zero would return before the assign in almost
    all error cases. The internal variable is now set to non-zero from the start
    of the function only to get cleared later on if things work out fine.

- - Made the curl tool's -w option support the %{ssl_verify_result} variable

Dan Fandrich (30 Jul 2008)
- Added test cases 1052 through 1055 to test uploading data from files
  during redirects.  Test cases 1052 and 1055 show problems (maybe the same
  root cause as 1051) and are disabled.

- Factored out Curl_copy_header_value

Yang Tse (30 Jul 2008)
- Add file version serial number that might be used by 'aclocal' and others.
  
  Keep the '#' character as the first one on the line.

- Update copyright year.

- Sync comment with reality.

Dan Fandrich (30 Jul 2008)
- Added the problems with test cases 1041 and 1051

- Added test case 1051 to test Location: following with PUT, as reported
  by Ben Sutcliffe.  The test when run manually shows a problem in curl,
  but the test harness web server doesn't run the test correctly so it's
  disabled for now.

Yang Tse (30 Jul 2008)
- Undo using the sreadfrom() wrapper to replace recvfrom() in our code, for real ;-)

- #149 done. Awaiting autobuild verification before removing.

- Undo using the sreadfrom() wrapper to replace recvfrom() in our code.

- #148 no longer blocks #144

- Reinstate hiding aclocal 'underquoted definition' warnings.

- updated #148

- Reinstate the 'aclocal -I m4' in buildconf and 'ACLOCAL_AMFLAGS = -I m4' way of
  including our local m4/reentrant.m4 file. This even takes care of including the
  file in the distribution tarball.

- Show autom4te and aclocal versions.
  
  Set SED for Solaris to gsed if available.

Dan Fandrich (30 Jul 2008)
- Minor Symbian updates.

- Fixed --use-ascii to properly convert text files on Symbian OS, MS-DOS
  and OS/2.

Yang Tse (29 Jul 2008)
- Updtae #148 with link to start of thread

- Updated #144
  
  Added #148 and # 149

Daniel Stenberg (29 Jul 2008)
- 56. When libcurl sends CURLOPT_POSTQUOTE commands when connected to a SFTP
    server using the multi interface, the commands are not being sent correctly
    and instead the connection is "cancelled" (the operation is considered done)
    prematurely. There is a half-baked (busy-looping) patch provided in the bug
    report but it cannot be accepted as-is. See
    http://curl.haxx.se/bug/view.cgi?id=2006544

- Added:
  
  146 - Yehoshua Hershberg's re-using of connections that failed with
        CURLE_PEER_FAILED_VERIFICATION
  
  147 - PHP's bug report #43158 (http://bugs.php.net/bug.php?id=43158) identifies
        a true bug in libcurl built with OpenSSL.

Dan Fandrich (29 Jul 2008)
- Document that PKG_CONFIG_PATH is the preferred way to configure with
  OpenSSL.

Yang Tse (29 Jul 2008)
- For testing purposes on SunOS systems; directly feed acinclude.m4 with
  reentrant.m4 and remove reentrant.m4 before calling aclocal.

- For debugging purposes, show all sed's available in PATH on SunOS systems.

Dan Fandrich (29 Jul 2008)
- Return an error code when extra files are found in filecheck:

- Eliminate a unnecessary socket creation in Curl_getaddrinfo for an IPv4
  address in an IPv6 capable libcurl.

Yang Tse (29 Jul 2008)
- Add quoting for the AC_DEFINE arguments.

- Also remove the whitespace.

- Also remove the extra quoting.

- Replace some '@%:@' quadigraphs by its actual representation '#'.
  
  This quadigraph used before a C preprocessor 'define' directive could
  be fooling M4, when processing this file, and make it think that the
  line contains a pure M4 'define' macro.

- Tests done using 'aclocal -I m4' in buildconf and 'ACLOCAL_AMFLAGS = -I m4
  in top Makefile.am triggered a problem that prevented aclocal from running
  successfully on SunOS 5.10 with GNU m4 1.4.5 and GNU Autoconf 2.61
  
  A tarball which reproduces mentioned problem is the one dated July-28-2008
  http://cool.haxx.se/curl-daily/curl-7.19.0-20080728.tar.gz
  
  We actually don't need all the bells and whistles that the above mechanism
  provides. We only need to include our m4/reentrant.m4 file in acinclude.m4
  so here we go with this simpler mechanism.

- ignore *.dist files

Dan Fandrich (29 Jul 2008)
- Added test case 1050 to test --ftp-port with an IPv6 address.
  Made --interface tests less restrictive on host address.

Daniel Stenberg (28 Jul 2008)
- I removed: "139 - Christopher Palow's CURLM_EASY_HANDLE_EXISTS patch" simply
  because at the current point in time I think the benefit of adding that new
  return code is very slim and it is a lot of work to introduce new return codes
  (for docs and maintenance etc)
  
  I added "145 - Phil Blundell's CURLOPT_SCOPE patch/work" since I want it
  sorted/committed.

Dan Fandrich (28 Jul 2008)
- Added test cases 1045 through 1049 as simple tests of --interface using the
  localhost interface.

- Fixed display of the interface bind address in the trace output when it's
  an IPv6 address.

Yang Tse (28 Jul 2008)
- Ensure that buildconf runs from the subdirectory where configure.ac lives

- Remove files generated on previous buildconf/configure run,
  and for debugging purposes show ACLOCAL_FLAGS.

- for debugging purposes show ACLOCAL_FLAGS

- ignore another file that might be generated

- These lines were unintentionally removed in previous commit

- Partially undo change that prevented SED, GREP, EGREP and AR from being changed by libtool or autoconf.

- Assert that SED and GREP are set

- Require autoconf 2.57 or newer

- When calling aclocal, user defined ACLOCAL_FLAGS will now precede ours.

- For debugging purposes, run aclocal in verbose mode on SunOS systems.

- move ACLOCAL_AMFLAGS after AUTOMAKE_OPTIONS

- setup.h handles definition of _REENTRANT based on NEED_REENTRANT
  definition which might be defined in config.h or config-*.h files

- Remove explicit inclusion of our m4 files first. It was interesting as a test,
  but it breaks aclocal execution on some systems, with the following error:
  
  Can't locate object method "rel2abs" via package "File::Spec" at /usr/local/bin/aclocal line 256.

Dan Fandrich (27 Jul 2008)
- Added feature in runtests.pl to select tests based on key word.

- Eliminate a unnecessary socket creation in Curl_getaddrinfo for an IPv4
  address in an IPv6 capable libcurl.

Yang Tse (27 Jul 2008)
- Another step towards detecting if _REENTRANT is already defined or actually
  needed, and being able to define it if appropriate for further configure tests
  as well as for the generated config file.

Daniel Stenberg (26 Jul 2008)
- - David Bau filed bug report #2026240 "CURL_READFUNC_PAUSE leads to buffer
    overrun" (http://curl.haxx.se/bug/view.cgi?id=2026240) identifying two
    problems, and providing the fix for them:
  
    - CURL_READFUNC_PAUSE did in fact not pause the _sending_ of data that it is
      designed for but paused _receiving_ of data!
  
    - libcurl didn't internally set the read counter to zero when this return
      code was detected, which would potentially lead to junk getting sent to
      the server.

Dan Fandrich (26 Jul 2008)
- Added test 1044 to test large file support in ftp with -I.

Yang Tse (26 Jul 2008)
- Explicitly include our m4 files first. This might minimize the impact
  that other package's underquoted m4 function definitions have on ours.

- simplify multi '#' char comment line

- Add a 3 argument check for getprotobyname_r

- additional debug logging of getprotobyname_r on Tru64 and AIX

- No longer hide aclocal 'underquoted definition' warnings.
  
  http://sources.redhat.com/automake/automake.html#Extending-aclocal documents
  that starting with Automake 1.8, aclocal will warn about all underquoted calls
  to AC_DEFUN due to the fact that in a single aclocal run it might include more
  than once all .m4 files which it finds available, this includes .m4 files from
  other software packages.
  
  If the first argument to AC_DEFUN is underquoted and the same macro is included
  more than once, successive inclusions after the first one will expand the macro
  instead of assuming it is the same as the first one included.

- move reentrant.m4 to the m4 subdirectory to avoid infinite loop inclusion problem

- add checks for strtok_r and getprotobyname_r

- Another step towards detecting if _REENTRANT is already defined or actually
  needed, and being able to define it if appropriate for further configure tests
  as well as for the generated config file.
  
  Introduced reentrant.m4 intended for our reentrant related autotools/m4 macros.

- ignore curllib.vcproj

Dan Fandrich (24 Jul 2008)
- Changed the long logfile elision code in runtests.pl to properly handle
  lines ending in \r.

- Mention that the test harness can't check every possible feature.

- Eliminated references to TRUE and FALSE since those identifiers aren't
  defined by the libcurl API. Also changed curl_easy_setopt examples to
  pass longs where appropriate.

Daniel Stenberg (23 Jul 2008)
- - I went over the curl_easy_setopt man page and replaced most references to
    non-zero with the fixed value of 1. We should strive at making options
    support '1' for enabling them mentioned explicitly, as that then will allow
    us for to extend them in the future without breaking older programs.

Dan Fandrich (23 Jul 2008)
- Simplified Minix compile instructions and added some special cases.

Yang Tse (23 Jul 2008)
- reorder argument number detection for getservbyport_r to
  actually verify if the test is properly working

- cleanup duplicate line

- Make sure that configure process tests are done with the same _REENTRANT
  setting as the one actually used when finally building the library.

- checks for gethostbyaddr_r with 7 and 8 args now also done with -D_REENTRANT
  
  checks for gethostbyname_r with 5 and 6 args now also done with -D_REENTRANT

- minor reordering in OS/400 config/setup files

- Change recvfrom's sixth argument data type to the 'historically standard' 'int'
  data type for systems where this sixth argument is prototyped as a void pointer.
  
  Start of thread: http://curl.haxx.se/mail/lib-2008-07/0153.html

Gisle Vanem (21 Jul 2008)
- Undefine 'byte' due to dict.c.

Yang Tse (21 Jul 2008)
- use prototypes to improve getservbyport_r detection

- fix compiler warning: implicit conversion from "long" to "int"

- fix compiler warning: comparison between signed and unsigned

- Adjust recvfrom's sixth arg data type definition for NetWare (LIBC)

- Use the sreadfrom() wrapper to replace recvfrom() in our code.

- when recvfrom prototype uses a void pointer for arguments 2, 5 or 6 this will
  now cause the definition of RECVFROM_TYPE_ARG2_IS_VOID, RECVFROM_TYPE_ARG5_IS_VOID
  or RECVFROM_TYPE_ARG6_IS_VOID, as appropriate.

- Adjust DEC/Compaq C compiler settings

- Remove showing additional info needed to debug configure
  failure to properly detect recvfrom arg types on Solaris

- Added "pointer to void" as another data type to check for the sixth argument of
  function recvfrom as a result of the info additionally logged when running on a
  Solaris system.
  
  The compiler error showed that the prototype being used on Solaris was the one
  declared in line 427 of "/usr/include/sys/socket.h" as:
  
  function(int,
           pointer to void,
           unsigned int,
           int,
           pointer to struct sockaddr,
           pointer to void) returning int

- Temporarily show additional info needed to debug configure
  failure to properly detect recvfrom arg types on Solaris

- Adjust DEC/Compaq C compiler settings

Patrick Monnerat (18 Jul 2008)
- README.OS400 update for new string options.

- README.OS400 update for new string options.

Dan Fandrich (17 Jul 2008)
- Fixed the XML syntax of a few test files.

Yang Tse (17 Jul 2008)
- RECVFROM_TYPE_ARG2, RECVFROM_TYPE_ARG5 and RECVFROM_TYPE_ARG6 are now defined
  to the data type pointed by its respective argument and not the pointer type.

- fix comment

- Configure process now checks availability of recvfrom() socket function and
  finds out its return type and the types of its arguments. Added definitions
  for non-configure systems config files, and introduced macro sreadfrom which
  will be used on udp sockets as a recvfrom() wrapper.

- Initial DEC/Compaq C compiler detection and flags

- Improved configure detection of number of arguments for getservbyport_r

- Allow --enable-largefile and --disable-largefile configurations.
  Configure process no longer needs nor checks size of curl_off_t.
  Library will now be built with _REENTRANT symbol defined.

- add comment for include paths

- add comment for include paths

Dan Fandrich (15 Jul 2008)
- Added test1042 and test1043 to test -C - on HTTP.

- Added test1040 and test1041 to test -C - on HTTP. Test 1041 failed so it's
  added to DISABLED.

Yang Tse (14 Jul 2008)
- Move _REENTRANT definition earlier in lib/setup.h

- Removed inclusion of remaining system header files from configuration files.
  These are included from lib/setup.h or specific source code file.

- Inclusion of <extra/stricmp.h> and <extra/strdup.h> is moved to lib/setup.h

- Remove duplicate file inclusions. These are already done in lib/setup.h
  and lib/setup_once.h

- Remove duplicate file inclusions. These are already done in lib/setup.h

- HTTP_ONLY definition check in lib/setup.h is now done once that configuration
  file has been included. In this way if symbol is defined in the config file
  it will no longer be ignored.

- fix multiple header inclusion prevention definition

- move multiple header inclusion prevention definition to top of file

- Added missing multiple header inclusion prevention definition

Dan Fandrich (11 Jul 2008)
- Fixed test 553 to pass the torture test.

- Avoid a potential zombie process when killing an old ftpserver

Daniel Stenberg (11 Jul 2008)
- document the exit codes 82 and 83 that are new in 7.19.0

- indent and comment cleanup (no code change)

- - Daniel Fandrich found out we didn't pass on the user-agent properly when
    doing "proxy-tunnels" with non-HTTP prototols and that was simply because
    the code assumed the user-agent was only needed for HTTP.

Dan Fandrich (11 Jul 2008)
- Added test cases 1038 and 1039 to test Adrian Kreher's report that ftp
  uploads with -C - didn't resume properly, but the tests pass.

- Changed slightly the SFTP quote commands chmod, chown and chgrp to only
  set the attribute that has changed instead of all possible ones. Hopefully,
  this will solve the "Permission denied" problem that Nagarajan Sreenivasan
  reported when setting some modes, but regardless, it saves a protocol
  round trip in the chmod case.

Daniel Stenberg (10 Jul 2008)
- (Added in the section for CURLOPT_DNS_CACHE_TIMEOUT, pointed out on the
  curl-library list on July 9th 2008 by Mathew Hounsell)
  
  NOTE: the name resolve functions of various libc implementations don't re-read
  name server information unless explicitly told so (by for example calling
  Ires_init(3). This may cause libcurl to keep using the older server even
  if DHCP has updated the server info, and this may look like a DNS cache issue
  to the casual libcurl-app user.

- --remote-name-all

Dan Fandrich (10 Jul 2008)
- Fixed another OOM problem, this time with test 64.

Yang Tse (10 Jul 2008)
- Peter Lamberg filed bug report #2015126: "poll gives WSAEINVAL when POLLPRI
  is set in fdset.events" (http://curl.haxx.se/bug/view.cgi?id=2015126) which
  exactly pinpointed the problem only triggered on Windows Vista, provided
  reference to docs and also a fix. There is much work behind Peter Lamberg's
  excellent bug report. Thank You!

Daniel Stenberg (10 Jul 2008)
- updated to match current reality

Yang Tse (10 Jul 2008)
- fix compiler warning

Daniel Stenberg (10 Jul 2008)
- s/muse/must

- document --remote-name-all

Yang Tse (10 Jul 2008)
- fallback to gettimeofday when monotonic clock is unavailable at run-time

Dan Fandrich (10 Jul 2008)
- Added tests 1036 and 1037 to verify resumed ftp downloads with -C -

Daniel Stenberg (9 Jul 2008)
- - Andreas Schuldei improved Phil Blundell's patch for IPv6 using c-ares, and I
    edited it slightly. Now you should be able to use IPv6 addresses fine even
    with libcurl built to use c-ares.

Dan Fandrich (9 Jul 2008)
- Fixed an OOM handling problem that cause test 11 to fail the torture test.

Yang Tse (9 Jul 2008)
- since Jun 30 2008 MAXHOSTNAMELEN define is no longer used

Dan Fandrich (8 Jul 2008)
- Fixed test 554 to pass the torture test.

Gisle Vanem (8 Jul 2008)
- Added libidn libs as needed. Added compilation of sendrecv.c
  and cookie_interface.c.

Dan Fandrich (7 Jul 2008)
- Added test cases 1034 & 1035 to test IDN name conversion failures.

Daniel Stenberg (7 Jul 2008)
- - Scott Barrett provided a test case for a segfault in the FTP code and the
    fix for it. It occured when you did a FTP transfer using
    CURLFTPMETHOD_SINGLECWD and then did another one on the same easy handle but
    switched to CURLFTPMETHOD_NOCWD. Due to the "dir depth" variable not being
    cleared properly.  Scott's test case is now known as test 539 and it
    verifies the fix.

Patrick Monnerat (7 Jul 2008)
- New options added to OS400 wrapper and ILERPG definitions.
  Wrong defines (typos) for QSSL layer fixed.

Yang Tse (7 Jul 2008)
- fix c-ares version reported in generated libcares.pc file when building
  from CVS tree.

- fix compiler warning: empty body in an if-statement

- mention that egrep and ar are also mandatory

- egrep and ar are also mandatory

Daniel Stenberg (3 Jul 2008)
- just to clarify that c-ares actually have some ipv6 support

- ares_gethostbyname() fallback from AAA to A records with CNAME present

- - Phil Blundell: If you ask ares_gethostbyname() to do an AF_INET6 lookup and
    the target host has only A records, it automatically falls back to an
    AF_INET lookup and gives you the A results.  However, if the target host has
    a CNAME record, this behaviour is defeated since the original query does
    return some data even though ares_parse_aaa_reply() doesn't consider it
    relevant. Here's a small patch to make it behave the same with and without
    the CNAME.

- Phil Blundell provided a fix for libcurl's treatment of unexpected 1xx
  response codes. Previously libcurl would hang on such occurances. I added
  test case 1033 to verify.

- Introcuding a new timestamp for curl_easy_getinfo():
  CURLINFO_APPCONNECT_TIME. This is set with the "application layer"
  handshake/connection is completed (typically SSL, TLS or SSH). By using this
  you can figure out the application layer's own connect time. You can extract
  the time stamp using curl's -w option and the new variable named
  'time_appconnect'. This feature was sponsored by Lenny Rachitsky at NeuStar.

Dan Fandrich (2 Jul 2008)
- Support Open Watcom C on Linux (as well as Windows).

Yang Tse (2 Jul 2008)
- The configure process will now halt when sed or grep are unavailable

- fallback to gettimeofday when monotonic clock is unavailable at run-time

Daniel Stenberg (1 Jul 2008)
- - Rolland Dudemaine provided fixes to get libcurl to build for the INTEGRITY
    operating system.

- CreateConnection collided with a function using the exact same name in the
  INTEGRITY RTOS, so I renamed it to create_conn. It then made sense to also
  rename SetupConnection to setup_conn to match it.

Yang Tse (1 Jul 2008)
- IBM C/C++ compiler predefined macro check

- set earlier in configure process IBM compilers optimization flags

- make check message wording more precise

Daniel Stenberg (30 Jun 2008)
- - Stephen Collyer and Tor Arntsen helped identify a flaw in the range code
    which output the range using a signed variable where it should rather use
    unsigned.

- made %llu work for printing unsigned long longs, added the generic curl source
  header

- - As was pointed out to me by Andreas Schuldei, the MAXHOSTNAMELEN define is
    not posix or anything and thus c-ares failed to build on hurd (and possibly
    elsewhere). The define was also somewhat artificially used in the windows
    port. Now, I instead rewrote the use of gethostbyname to enlarge the host
    name buffer in case of need and totally avoid the use of the MAXHOSTNAMELEN
    define. I thus also removed the defien from the namser.h file where it was
    once added for the windows build.
  
    I also fixed init_by_defaults() function to not leak memory in case if
    error.

- minor language fix

Yang Tse (29 Jun 2008)
- fix C style comment

- John Lightsey filed bug report #1999181: "CLOCK_MONOTONIC always fails on
  some systems" (http://curl.haxx.se/bug/view.cgi?id=1999181). The problem was
  that the configure script did not use the _POSIX_MONOTONIC_CLOCK feature test
  macro when checking monotonic clock availability. This is now fixed and the
  monotonic clock will not be used unless the feature test macro is defined
  with a value greater than zero indicating always supported.

Daniel Stenberg (26 Jun 2008)
- let's try to maintain compatibility with NSS 3.11.x

Dan Fandrich (26 Jun 2008)
- Honour --stderr with the -v option.
  Fixed a file handle leak in the command line client if more than one
  --stderr option was given.

Daniel Stenberg (24 Jun 2008)
- Added README.NSS to describe the current NSS situation.

- - Eduard Bloch filed the debian bug report #487567
    (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=487567) pointing out that
    libcurl used Content-Range: instead of Range when doing a range request with
    --head (CURLOPT_NOBODY). This is now fixed and test case 1032 was added to
    verify.

Dan Fandrich (22 Jun 2008)
- Stopped using ranges in scanf character sequences (e.g. %[a-z]) since that
  is not ANSI C, just a common extension.  This caused problems on
  at least Open Watcom C.

Daniel Stenberg (21 Jun 2008)
- Oops, that was an experimental change not meant to be committed!

- made Curl_nss_send() take const data to kill compiler warning

Dan Fandrich (21 Jun 2008)
- Edited some test keywords for consistency

Yang Tse (20 Jun 2008)
- Modified configuration script to actually verify if the compiler is good
  enough at detecting compilation errors or at least it has been properly
  configured to do so. Configuration heavily depends on this capability, so
  if this compiler sanity check fails the configuration process will now fail.

Daniel Stenberg (20 Jun 2008)
- - Phil Pellouchoud found a case where libcurl built with NSS failed to
    handshake with a SSLv2 server, and it turned out to be because it didn't
    recognize the cipher named "rc4-md5". In our list that cipher was named
    plainly "rc4". I've now added rc4-md5 to work as an alias as Phil reported
    that it made things work for him again.

- remove leftover proto that isn't used, I made it a macro instead

- - Hans-Jurgen May pointed out that trying SCP or SFTP over a SOCKS proxy
    crashed libcurl. This is now addressed by making sure we use "plain send"
    internally when doing the socks handshake instead of the Curl_write()
    function which is designed to use the "target" protocol. That's then SCP or
    SFTP in this case. I also took the opportunity and cleaned up some ssh-
    related #ifdefs in the code for readability.

- minor language fix

- - Christopher Palow fixed a curl_multi_socket() issue which previous caused
    libcurl to not tell the app properly when a socket was closed (when the name
    resolve done by c-ares is done) and then immediately re-created and put to
    use again (for the actual connection). Since the closure will make the
    "watch status" get lost in several event-based systems libcurl will need to
    tell the app about this close/re-create case.

- - Dengminwen found a bug in the connection re-use function when using the
    multi interface with pipelining enabled as it would wrongly check for,
    detect and close "dead connections" even though that connection was already
    in use!

- Removed the #define of ciphernum since keeping a define updated to be the
  number of entries in a provided table is doomed to fail in the long run. Now
  we use the NUM_OF_CIPHERS define instead to figure out the amount.

- s/strcasecmp/strequal to make it more portable

Dan Fandrich (19 Jun 2008)
- Always use $LOGDIR when referring to the log directory.

- Fixed a memory leak in the command-line tool that caused a valgrind error.

- Added SSH failure test cases 628-632

Daniel Stenberg (18 Jun 2008)
- - Rob Crittenden brought a fix for the NSS layer that makes libcurl no longer
    always fire up a new connection rather than using the existing one when the
    multi interface is used. Original bug report:
    https://bugzilla.redhat.com/show_bug.cgi?id=450140

- removed warning about unused argument by simply removing that argument from
  the check_issuer_cert() proto

- check_issuer_cert() now builds and there's one warning less. Still one compiler
  warning in the code though but we need NSS' base64.h header for that and we
  don't currently have a suitable way to include it as our own base64.h header
  kind of "blocks" it.

Yang Tse (18 Jun 2008)
- No longer break out of a shell "for" statement from inside
  AC_FOO_IFELSE macros, otherwise temp files are not removed.
  
  Identation adjustment.

Daniel Stenberg (13 Jun 2008)
- In checkPendPipeline() we can't be setting the TIMER_CONNECT correctly as that
  is for the TCP connect. I changed it to TIMER_PRETRANSFER which seems to be
  what was intended here.

- fixed the language somewhat

Dan Fandrich (13 Jun 2008)
- Fixed curl-config --ca which wasn't being exported by configure.

- Added IPv6 keywords for some more tests that require IPv6 networking support

Daniel Stenberg (12 Jun 2008)
- fixed bad infof() usage!

- added the versions of a range of build tools that we want to remain to work

- My first attempt at documenting what we try to support and make curl run with
  in regard to C standard, third party libraries and operating systems etc.

- - I did a cleanup of the internal generic SSL layer and how the various SSL
    libraries are supported. Starting now, each underlying SSL library support
    code does a set of defines for the 16 functions the generic layer (sslgen.c)
    uses (all these new function defines use the prefix "curlssl_"). This
    greatly simplified the generic layer in readability by involving much less
    #ifdefs and other preprocessor stuff and should make it easier for people to
    make libcurl work with new SSL libraries.
  
    Hopefully I can later on document these 16 functions somewhat as well.
  
    I also made most of the internal SSL-dependent functions (using Curl_ssl_
    prefix) #defined to nothing when no SSL support is requested - previously
    they would unnecessarily call mostly empty functions.

Yang Tse (11 Jun 2008)
- fix compiler warning: conversion from `pointer to void' to `pointer to int
  function(pointer to char,int,int,pointer to void)' is compiler dependent

Gunter Knauf (11 Jun 2008)
- enable additional CFLAGS from commandline.

Daniel Stenberg (10 Jun 2008)
- fix warning in GnuTLS build by making sure Curl_gtls_send() takes a const
  void *

- - I made the OpenSSL code build again with OpenSSL 0.9.6. The CRLFILE
    functionality killed it due to its unconditional use of
    X509_STORE_set_flags...

Michal Marek (9 Jun 2008)
- CURLOPT_CRLFILE and CURLOPT_ISSUERCERT are new string options

Yang Tse (9 Jun 2008)
- fix pkg-config reporting of private libraries needed for static linking

Gunter Knauf (8 Jun 2008)
- enable additional CFLAGS from commandline.

Daniel Stenberg (8 Jun 2008)
- 7.19.0 is next

- the next release is now called 7.19.0

- - curl the tool now deals with its command line options somewhat differently!
    All boolean options (such as -O, -I, -v etc), both short and long versions,
    now always switch on/enable the option named. Using the same option multiple
    times thus make no difference. To switch off one of those options, you need
    to use the long version of the option and type --no-OPTION. Like to disable
    verbose mode you use --no-verbose!
  
  - Added --remote-name-all to curl, which if used changes the default for all
    given URLs to be dealt with as if -O is used. So if you want to disable that
    for a specific URL after --remote-name-all has been used, you muse use -o -
    or --no-remote-name.

Gunter Knauf (8 Jun 2008)
- use our *printf functions only.

Daniel Stenberg (6 Jun 2008)
- Moved all changes from 2007 from CHANGES to CHANGES.0

- code style cleanup

- - Axel Tillequin and Arnaud Ebalard added support for CURLOPT_ISSUERCERT, for
    OpenSSL, NSS and GnuTLS-built libcurls.

Yang Tse (6 Jun 2008)
- MSVC does build Windows native targets

Daniel Stenberg (6 Jun 2008)
- mention added in 7.18.3

- - Axel Tillequin and Arnaud Ebalard added support for CURLOPT_CRLFILE, for
    OpenSSL, NSS and GnuTLS-built libcurls.

- - Added CURLINFO_PRIMARY_IP as a new information retrievable with
    curl_easy_getinfo. It returns a pointer to a string with the most recently
    used IP address. Modified test case 500 to also verify this feature. The
    implementing of this feature was sponsored by Lenny Rachitsky at NeuStar.

- 7.18.2 is done now

Dan Fandrich (5 Jun 2008)
- Mention the minimum Symbian OS version required.

- Mention a few options that require an argument in --help

Daniel Stenberg (4 Jun 2008)
- start working on 7.18.3!

- new contributors from the 7.18.2 release

Version 7.18.2 (4 Jun 2008)

Daniel Stenberg (4 Jun 2008)
- 7.18.2

Dan Fandrich (3 Jun 2008)
- Fixed a problem where telnet data would be lost if an EWOULDBLOCK
  condition were encountered.

- Fixed typo in comment

Daniel Stenberg (1 Jun 2008)
- curl returns 0 for these options now

- now returns 0

- (committed this for Marty Kuhrt:)
  - Updated main.c to return CURLE_OK if PARAM_HELP_REQUESTED was returned
    from getparameter instead of CURLE_FAILED_INIT.  No point in returning
    an error if --help or --version were requested.

Marty Kuhrt (1 Jun 2008)
- return CURLE_OK instead of CURLE_FAILED_INIT if PARAM_HEKP_REQUESTED returned by getparameter

Yang Tse (31 May 2008)
- Fix problem: 'result' may be used uninitialized.
  Issue detected by Guenter Knauf's NetWare autobuild.

Marty Kuhrt (30 May 2008)
- updated to match curlmsg.msg 1.7

- resync with curl.h messages

- resync with curl.h curle_ messages

Yang Tse (30 May 2008)
- Brad House fixed a missing header file inclusion in adig sample program

Daniel Stenberg (29 May 2008)
- Added a new "13. Web Login" chapter

- start working on 1.5.3

- 1.5.2

- Fixed 142 and 143
  Moved 144 to 7.18.3 instead

- - Emil Romanus found a problem and helped me repeat it. It occured when using
    the curl_multi_socket() API with HTTP pipelining enabled and could lead to
    the pipeline basically stalling for a very long period of time until it took
    off again.

- - Jeff Weber reported memory leaks with aborted SCP and SFTP transfers and
    provided excellent repeat recipes. I fixed the cases I managed to reproduce
    but Jeff still got some (SCP) problems even after these fixes:
    http://curl.haxx.se/mail/lib-2008-05/0342.html

Yang Tse (27 May 2008)
- Known bug #55, libcurl fails to build with MIT Kerberos for Windows (KfW)
  due to KfW's library header files exporting symbols/macros that should be
  kept private to the KfW library. See ticket #5601 at http://krbdev.mit.edu/rt/

Daniel Stenberg (26 May 2008)
- - Bug report #1973352 (http://curl.haxx.se/bug/view.cgi?id=1973352) identified
    how the HTTP redirect following code didn't properly follow to a new URL if
    the new url was but a query string such as "Location: ?moo=foo". Test case
    1031 was added to verify this fix.

- I'd like to see this fixed for the 7.18,2:
  
  144 - Help apps use 64bit/LFS libcurl

- Andreas Faerber and Scott McCreary made (lib)curl build for the Haiku OS

- Added Haiku OS, sorted the list of i386 OSes

Yang Tse (26 May 2008)
- fix compiler warning: unreferenced formal parameter

- David Rosenstrauch reported that header files spnegohelp.h and
  openssl/objects.h were needed to compile SPNEGO support.

- fix: preprocessor complaining about macro redefinition

Daniel Stenberg (24 May 2008)
- summary of the current outstanding issues for upcoming and the subsequent
  releases

- Christopher Palow's multi interface docs updates

- Nikolai Kondrashov for his man page update

- Nikolai Kondrashov provided a clarification for CURLOPT_HEADERFUNCTION

- list all local sources the (demo) tools need, add a few missing scripts to
  the dist tarball and remove a two duplicate file names from EXTRA_DIST
  (most of it pointed out by Yang Tse)

- this is not used (anymore)

Dan Fandrich (23 May 2008)
- Added some more to do items and a known bug.

Daniel Stenberg (23 May 2008)
- Dan Fandrich pointed out that this is the way we should increase the number
  for 7.18.2 since we have added functions in this release.
  
  http://curl.haxx.se/mail/lib-2008-05/0240.html

Dan Fandrich (22 May 2008)
- Made sure to pass longs in to curl_easy_setopt where necessary in the
  libtest code.

- Fixed a surprising number of example programs that were passing int arguments
  to curl_easy_setopt instead of long.

Daniel Stenberg (22 May 2008)
- we bump the SO "revision" for next release due to the new functions added

Dan Fandrich (22 May 2008)
- Fixed some include file problems on Windows reported by David Rosenstrauch

Daniel Stenberg (22 May 2008)
- make sure the configure.ac file with the correct version number is shipped
  in the tarball

Yang Tse (22 May 2008)
- MSVC6+ clean-up targets must also remove acountry.exe

- sync with reality

Dan Fandrich (21 May 2008)
- Renamed MSDOS_FILESYSTEM to avoid conflict with MIT GSS

- Removed some duplicated #includes

Yang Tse (21 May 2008)
- fix: [action-if-found] part of AC_CHECK_TYPE macro cannot be quoted when empty

- fix: remove need and definition of HAVE_SOCKLEN_T symbol

- fix: socklen_t definition comment

- When unable to properly detect gethostbyname_r() usage, configure
  script will simply issue a warning and gethostbyname() will be used.

- update several macros using AC_TRY_LINK with AC_LINK_IFELSE

Patrick Monnerat (20 May 2008)
- Adapting last changes to OS400:
  _ Updated packages/OS400/curl.inc.in with new definitions.
  _ New connect/bind/sendto/recvfrom wrappers to support AF_UNIX sockets.
  _ Include files line length shortened below 100 chars.
  _ Const parameter in lib/qssl.[ch].
  _ Typos in packages/OS400/initscript.sh.

Yang Tse (20 May 2008)
- fix underquoting of AC_LANG_PROGRAM arguments

- if'def out private function ares__tvdiff(), it is not in use yet.

- update several macros using AC_TRY_LINK with AC_LINK_IFELSE

Daniel Stenberg (19 May 2008)
- - When trying to repeat a multi interface problem I fell over a few multi
    interface problems:
  
    o with pipelining disabled, the state should never be set to WAITDO but
      rather go straight to DO
  
    o we had multiple states for which the internal function returned no socket
      at all to wait for, with the effect that libcurl calls the socket callback
      (when curl_multi_socket() is used) with REMOVE prematurely (as it would be
      added again within very shortly)
  
    o when in DO and DOING states, the HTTP and HTTPS protocol handler functions
      didn't return that the socket should be waited for writing, but instead it
      was treated as if no socket was needing monitoring so again REMOVE was
      called prematurely.

- with pipelining disabled, the state should never be set to WAITDO but rather
  go straight to DO
  
  we had multiple states for which the internal function returned no socket at
  all to wait for, with the effect that libcurl calls the socket callback (when
  curl_multi_socket() is used) with REMOVE prematurely (as it would be added
  again within very shortly)

- when the multi handle was in DO and DOING states, the HTTP and HTTPS protocol
  handler functions didn't return that the socket should be waited for writing,
  but instead it was treated as if no socket was needing monitoring so REMOVE
  was called prematurely

- change the code style to be more curlish, and changed some of the output
  to be more descriptive and finally set VERBOSE mode to 1 by default

Yang Tse (19 May 2008)
- better select() function detection that works
  even when cross compiling a Windows target.

- fix socklen_t equivalent detection when cross compiling Windows target

- if WINSOCK2 API is used link with 'ws2_32', else
  
  if WINSOCK API is used under WinCE link with 'winsock', else
  
  if WINSOCK API is used link with 'wsock32'.

- on winsock systems linking is done using library 'ws2_32' when
  winsock2.h is available, and library 'winsock' is used when only
  winsock.h is available.

- minor change for wince-cegcc and wince-mingw32ce support

Daniel Stenberg (16 May 2008)
- removed lots of warnings

Yang Tse (15 May 2008)
- millisecond resolution support followup

Dan Fandrich (15 May 2008)
- Included stdint.h to get the intptr_t type (needed on OpenBSD at least).

Daniel Stenberg (15 May 2008)
- ten days with no further response or feedback, removing:
  136 - adding easy handles when using curl_multi_socket* by
        Markus Koetter

Gisle Vanem (15 May 2008)
- Replaced "-DHAVE_FIONBIO" with "-DHAVE_IOCTLSOCKET".
  Added "-DHAVE_GETTIMEOFDAY". Trimmed lines.

Yang Tse (15 May 2008)
- sync with reality

- remove compilation time generated files

- use same time source for timeout initialization and processing

Dan Fandrich (14 May 2008)
- Reduced the required stack size.

- Move the CURLDEBUG check after setup.h so it can be set there if necessary.

Yang Tse (14 May 2008)
- Improve toolchain detection for WinCE cross compilation:
  
  When cross compiling WinCE with the arm-wince-cegcc-gcc C compiler
  symbol __CEGCC__ is defined and the unix-like compatibility layer
  is used. For our purposes this is not a native Windows build.
  
  When cross compiling WinCE with the arm-wince-mingw32ce-gcc C compiler
  symbol __MINGW32CE__ is defined and the unix-like compatibility layer
  is not used. For our purposes this _is_ a native Windows build.

- remove duplicate check

- skip checks for Windows specific header files
  when build target is not a native Windows one

- WinCE cross compilation adjustments:
  
  HAVE_WINSOCK2_H shall not be defined.
  HAVE_WS2TCPIP_H shall not be defined.

Daniel Stenberg (13 May 2008)
- wait for all 129 bytes

- Added test case 556 that uses curl_easy_send() and curl_easy_recv()

- Three out of the four issues are now extinct.

- - Introducing millisecond resolution support for the timeout option. See
    ares_init_options()'s ARES_OPT_TIMEOUTMS.

Yang Tse (13 May 2008)
- also ignore this

Dan Fandrich (13 May 2008)
- Added curl_easy_recv & curl_easy_send Symbian exports.
  Cleaned up Symbian files.

Yang Tse (13 May 2008)
- also ignore this

- ignore this compilation time generated files

- don't keep in CVS this compilation time generated file

- add MSVC6 project for acountry sample program

- update MSVC6 projects to use the multithreaded DLL runtime library

- add MSVC6 project for acountry sample program

Daniel Stenberg (12 May 2008)
- - Introducing curl_easy_send() and curl_easy_recv(). They can be used to send
    and receive data over a connection previously setup with curl_easy_perform()
    and its CURLOPT_CONNECT_ONLY option. The sendrecv.c example was added to
    show how they can be used.

Yang Tse (12 May 2008)
- skip libtool C++ preprocessor compiler and linker checks

- ignore libcares.pc

- configure script will now define HAVE_CLOCK_GETTIME_MONOTONIC symbol only
  when function clock_gettime() is available and the monotonic timer is
  also available. Otherwise, in some cases, librt or libposix4 could be used
  for linking even when finally not using the clock_gettime() function due
  to lack of the monotonic clock.

- fix syntax error: missing semicolon

- Add library checking for clock_gettime() support

- Internal time differences now use monotonic time source if available.
  This also implies the removal of the winmm.lib dependency for WIN32.

- Use monotonic time source if available.

Daniel Stenberg (9 May 2008)
- Removed AC_PROG_CC_STDC again. It enforces C99/gnu99 stdandard which is too
  liberal for me. Also, autoconf 2.61 and earlier doesn't work with icc 10.1
  for this macro. (2.62 confirmed to work though). See discusson on the mailing
  list starting here:
  
  http://daniel.haxx.se/projects/c-ares/mail/c-ares-archive-2008-05/0001.shtml

- - Stefan Krause reported a busy-looping case when using the multi interface
    and doing CONNECT to a proxy. The app would then busy-loop until the proxy
    completed its response.

- Removed an unused variable and one do-while loop that wasn't used either.
  Added a few comments while at it.

Michal Marek (9 May 2008)
- - Make Curl_write and it's callees accept a const pointer, in preparation
    of tetetest's patch for curl_easy_send()

Daniel Stenberg (8 May 2008)
- include strings.h (if available) for the strcasecmp() proto

- check for strings.h in configure and use it for the strcasecmp() proto

Yang Tse (8 May 2008)
- fix compiler warning: format '%ld' expects type 'long int'

Daniel Stenberg (7 May 2008)
- adjusted to work with the updated configure.ac

- - Sebastian made c-ares able to return all PTR-records when doing reverse
    lookups. It is not common practice to have multiple PTR-Records for a single
    IP, but its perfectly legal and some sites have those.

- - Doug Goldstein provided a configure patch: updates autoconf 2.13 usage to
    autoconf 2.57 usage (which is the version you have specified as the minimum
    version). It's a minor change but it does clean up some warnings with newer
    autoconf (specifically 2.62).

- -135 - Busy looping bug in multi_socket interface by
  -      Christopher Palow

- - Liam Healy filed the debian bug report #480044
    (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=480044) identifying a
    segfault when using krb5 ftp, but the krb4 code had the same problem.

Yang Tse (7 May 2008)
- Christopher Palow provided the patch (edited by me) that introduces
  the use of microsecond resolution keys for internal splay trees.
  
  http://curl.haxx.se/mail/lib-2008-04/0513.html

- fix compiler warning: enumerated type mixed with another type

Daniel Stenberg (5 May 2008)
- mention four outstanding issues we should deal with before release

Yang Tse (5 May 2008)
- Improved parsing of resolver configuration files

Daniel Stenberg (3 May 2008)
- - Yuriy Sosov pointed out a configure fix for detecting c-ares when that is
    built debug-enabled.

- minor spell and language fix of a comment

- - Ben Van Hof filed bug report #1945240: "libcurl sometimes sends body twice
    when using CURL_AUTH_ANY" (http://curl.haxx.se/bug/view.cgi?id=1945240).
    The problem was that when libcurl rewound a stream meant for upload when it
    would prepare for a second request, it could accidentally continue the
    sending of the rewound data on the first request instead of on the second.
    Ben also provided test case 1030 that verifies this fix.

- Added comments, check Curl_http_auth_act()'s return code and added a check
  that closes the connection somewhat faster when perhapsrewind() has marked
  the connection for closure.

- - Jean-Francois Bertrand reported a libcurl crash with CURLOPT_TCP_NODELAY
    since libcurl used getprotobyname() and that isn't thread-safe. We now
    switched to use IPPROTO_TCP unconditionally, but perhaps the proper fix is
    to detect the thread-safe version of the function and use that.
    http://curl.haxx.se/mail/lib-2008-05/0011.html

- - Bart Whiteley provided a patch that made libcurl work properly when an app
    uses the CURLOPT_OPENSOCKETFUNCTION callback to create a unix domain socket
    to a http server.

- 53. SFTP busy-loop problem when doing SFTP uploads.

Dan Fandrich (1 May 2008)
- Document that variable replacement now takes place in the test file <stdout> section.

Daniel Stenberg (1 May 2008)
- use variables to support other IPs and port numbers

- do variable replacement in the stdout data read from the test case

Dan Fandrich (1 May 2008)
- Added precheck for hard-coded test server address and port

- Made file XML compatible

Daniel Stenberg (30 Apr 2008)
- Christian Vogt told us about OS21 in
  http://curl.haxx.se/mail/lib-2008-04/0443.html

- - To make it easier for applications that want lots of magic stuff done on
    redirections and thus cannot use CURLOPT_FOLLOWLOCATION easily, we now
    introduce the new CURLINFO_REDIRECT_URL option that lets applications
    extract the URL libcurl would've redirected to if it had been told to. This
    then enables the application to continue to that URL as it thinks is
    suitable, without having to re-implement the magic of creating the new URL
    from the Location: header etc. Test 1029 verifies it.

Yang Tse (29 Apr 2008)
- improved easy interface resolving timeout handling in c-ares enabled builds

- improve easy interface resolving timeout handling in c-ares enabled builds

Dan Fandrich (29 Apr 2008)
- Added test 1028 to test an HTTP redirect to a FTP URL.

Daniel Stenberg (28 Apr 2008)
- - Norbert Frese filed bug report #1951588: "Problem with curlftpfs and
    libcurl" (http://curl.haxx.se/bug/view.cgi?id=1951588) which seems to be an
    identical report to what Denis Golovan reported in
    http://curl.haxx.se/mail/lib-2008-02/0108.html The FTP code didn't reset the
    user/password pointers properly even though there might've been a new
    struct/cconnection getting used.

- mention the automake problems and solution even though it doesn't strictly
  caused any change in curl-related files

Dan Fandrich (25 Apr 2008)
- Updated Symbian UIDs. Added .pkg files for creating .sis packages.

Yang Tse (25 Apr 2008)
- tests/libtest/delay.pl no longer used. The 'delay' attribute of the
  test harness <command> subsection now provides this functionality.

- Add 'timeout' and 'delay' attributes support for the test harness <command> subsection

Dan Fandrich (25 Apr 2008)
- Made --stderr able to redirect all stderr messages.

- Reduced the requested Symbian capabilities.
  Correctly noted what happens to stderr.

Yang Tse (23 Apr 2008)
- <postcheck> delay no longer needed for this test.
  
  http://curl.haxx.se/mail/lib-2008-04/0392.html

- improve synchronization between test harness runtests.pl script
  and test harness servers to minimize risk of false test failures.
  
  http://curl.haxx.se/mail/lib-2008-04/0392.html

Dan Fandrich (23 Apr 2008)
- Symbian OS is a.k.a. EPOC32

- Mention that P.I.P.S. is needed for Symbian.

- List extra files individually instead of by directory to avoid including
  CVS directories.

- Added support for running on Symbian OS.

Yang Tse (22 Apr 2008)
- fix minor memory leak triggered upon test failure

- Remove fflush() + fsync() previously introduced accelerated writing of
  server input and response request files of the test harness sws server.
  
  Reintroduce, for test # 1001, the <postcheck> small delay. The delay is
  needed even with the accelerated writing of server input and response
  request files in test harness sws server.
  
  http://curl.haxx.se/mail/lib-2008-04/0385.html

- Remove previously introduced small delay to verify if it can be avoided
  with the accelerated writing of server input and response request files
  in test harness sws server.

Dan Fandrich (21 Apr 2008)
- Allocate the decompression buffer for the --manual option on the heap
  instead of the stack.

- Fixed typo in log message

Daniel Stenberg (21 Apr 2008)
- added Haskell binding, unified the formatting somewhat

Yang Tse (21 Apr 2008)
- HAVE_FFLUSH and HAVE_FSYNC symbol definitions for WIN32 systems

Dan Fandrich (21 Apr 2008)
- Ignore the result of the postcheck command in torture mode

- Make the test work with nroffs that use special escaping for bold output.

Yang Tse (20 Apr 2008)
- accelerate the writing of server input and response request files
  to disk, trying to defeat file and disk write-behind algorithms

Dan Fandrich (18 Apr 2008)
- Added test cases 1026 and 1027 to do some rudimentary tests on the --manual
  and --help options.

Yang Tse (18 Apr 2008)
- test 1001 needs a small delay between client part execution and test
  result file verifications to allow the test server to completely write
  out all files

- test 1001 needs a small delay between client part execution and test
  result file verifications to allow the test server to completely write
  out all files

- fix compiler warning: enumerated type mixed with another type

Dan Fandrich (17 Apr 2008)
- Some trivial changes

Daniel Stenberg (16 Apr 2008)
- Added test case 555, a variation of 547 but using multi interface instead of
  easy. This was reported not working by Penugonda Chenna Reddy in
  http://curl.haxx.se/mail/lib-2008-04/0046.html but I fail to repeat that
  problem.

- Removed 129 and 130 due to lack of response on those issues

Michal Marek (14 Apr 2008)
- allow disabling the typechecker by defining CURL_DISABLE_TYPECHECK, as
  discussed in http://curl.haxx.se/mail/lib-2008-04/0291.html

Daniel Stenberg (14 Apr 2008)
- - Stefan Krause reported a case where the OpenSSL handshake phase wasn't
    properly acknowledging the timeout values, like if you pulled the network
    plug in the midst of it.

- - Andre Guibert de Bruet fixed a second case of not checking the malloc()
    return code in the Negotiate code.

- mention Sandor as contributor

- - Sandor Feldi reported bug #1942022
    (http://curl.haxx.se/bug/view.cgi?id=1942022) pointing out a mistake in the
    lib/Makefile.vc[68] makefiles' release-ssl-dll target.

- - Brock Noland reported that curl behaved differently depending on which order
    you used -i and -I.

- - Andre Guibert de Bruet found and fixed a case where malloc() was called but
    was not checked for a NULL return, in the Negotiate code.

- return 0 not -1 at end of data!

Dan Fandrich (10 Apr 2008)
- Added test case 1025 to test a command-line cookie with Location: following

Daniel Stenberg (10 Apr 2008)
- mention what happens to the data when a write callback returns pause

- clarify the COOKIE option a bit

Dan Fandrich (10 Apr 2008)
- Added test case 1024 to test a scenario similar to the one reported
  by Ben Combee where libcurl would send the wrong cookie to a redirected
  server.  libcurl was doing the right thing in this test case.

Daniel Stenberg (9 Apr 2008)
- "tag" the function referals properly

Yang Tse (7 Apr 2008)
- make previous compiler warning fix more portable

- fix compiler warning: argument is incompatible with corresponding format string conversion

- fix compiler warning: indirection to slightly different base types

- fix compiler warning: local variable may be used without having been initialized

Patrick Monnerat (7 Apr 2008)
- Adapt OS400 SSL (qssl.h) to V5R4
  Fix qssl.c wrong error message
  Upgrade OS400 wrappers and makefiles to 7.18.1

Yang Tse (7 Apr 2008)
- fix compiler warning: unreferenced formal parameter

- fix compiler warning: assignment within conditional expression

Michal Marek (7 Apr 2008)
- - Fix the MIT / Heimdal check for good:
    Define HAVE_GSSMIT if <gssapi/{gssapi.h,gssapi_generic.h,gssapi_krb5.h}> are
    available, otherwise define HAVE_GSSHEIMDAL if <gssapi.h> is available.
  
    Only define GSS_C_NT_HOSTBASED_SERVICE to gss_nt_service_name if
    GSS_C_NT_HOSTBASED_SERVICE isn't declared by the gssapi headers. This should
    avoid breakage in case we wrongly recognize Heimdal as MIT again.

Daniel Stenberg (5 Apr 2008)
- - Alexey Simak fixed curl_easy_reset() to reset the max redirect limit properly

- provide CURL_DEFAULT_PROXY_PORT set to 1080 for the default port libcurl
  assumes proxies to use

- - Based on the Debian bug report #474224 that complained about the FTP error
    message when libcurl doesn't get a 220 back immediately on connect, I now
    changed it to be more specific on what the problem is. Also worth noticing:
    while the bug report contains an example where the response is:
  
      421 There are too many connected users, please try again later
  
    we cannot assume that the error message will always be this readable nor
    that it fits within a particular boundary etc.

- - Alexey Simak fixed the VC dsp file by adding the missing source file
    ares_expand_string.c

- Alexey Simak made adig support NAPTR records

- Eino Tuominen improved the code when a file is used to seed the randomizer

Dan Fandrich (4 Apr 2008)
- Give a hint as to why a url_fopen failed.

Yang Tse (4 Apr 2008)
- SunSSH sshd ignores UsePrivilegeSeparation option

- SunSSH 1.2 options sync

Daniel Stenberg (4 Apr 2008)
- oops, forgot to add test554

Dan Fandrich (4 Apr 2008)
- Added test627 to test SFTP with CURLOPT_NOBODY

Daniel Stenberg (3 Apr 2008)
- - Setting CURLOPT_NOBODY to FALSE will now switch the HTTP request method to
    GET simply because previously when you set CURLOPT_NOBODY to TRUE first and
    then FALSE you'd end up in a broken state where a HTTP request would do a
    HEAD by still act a lot like for a GET and hang waiting for the content etc.

- Scott Barrett added support for CURLOPT_NOBODY over SFTP

Dan Fandrich (3 Apr 2008)
- Made sure that curl_global_init is called in all the multithreaded
  example programs.

Gunter Knauf (2 Apr 2008)
- removed unused var.

- removed double dependency.

Daniel Stenberg (1 Apr 2008)
- 128 - Phil Blundell's ares and ipv6 fix (feedback lacking)
  removed
  
  133 - Setting CURLOPT_NOBODY to "false" causes cURL to wait for content if a
        content-length header is read
  added

- Eetu contributed back in 2000...

- 132 - Xponaut's CURLFORM_STREAM option to curl_formadd()
  done

Gunter Knauf (31 Mar 2008)
- moved CURL_CA_BUNDLE define to generated config.h.

Michal Marek (31 Mar 2008)
- Removed the generated ca-bundle.h file. The verbatim value of $ca and
  $capath is known to configure, so it can be defined in config.h instead.

Daniel Stenberg (31 Mar 2008)
- expanded a comment around some of the new formpost callback usage

- - Added CURLFORM_STREAM as a supported option to curl_formadd() to allow an
    application to provide data for a multipart with the read callback. Note
    that the size needs to be provided with CURLFORM_CONTENTSLENGTH when the
    stream option is used. This feature is verified by the new test case
    554. This feature was sponsored by Xponaut.

Dan Fandrich (31 Mar 2008)
- Changed the makefile so the doc/examples/ programs are never built in a
  normal build/install (only with the 'make check' target), so that a
  build failure in the examples isn't fatal.

Daniel Stenberg (30 Mar 2008)
- added people from the 7.18.1 release announcement

- back to a blank for 7.18.2

- start working on 7.18.2

Version 7.18.1 (30 Mar 2008)

Daniel Stenberg (30 Mar 2008)
- 7.18.1

- 132 - Xponaut's CURLFORM_STREAM option to curl_formadd()

- I'm officially pushing the two remaining issues to the next release instead,
  since they're still not clear enough to be to sort about before 7.18.1

Dan Fandrich (28 Mar 2008)
- Made the test work on perl 5.00

Daniel Stenberg (27 Mar 2008)
- - Stephen Collyer pointed out that configure --with-libssh2 without a given
    path didn't work properly but now it does!

- fix --with-libssh2 when given without path

- - As found out and reported by Dan Petitt, libcurl didn't show progress/call
    the progress callback for the first (potentially huge) piece of body data
    sent together with the POST request headers in the initial send().

- spell!

- - Made setting the CURLOPT_SSL_CTX_FUNCTION option return a failure in case
    libcurl wasn't built to use OpenSSL as that is a prerequisite for this
    option to function!

- spell it out loudly and clearly that CURLOPT_SSL_CTX_FUNCTION is only
  functional if libcurl is built against OpenSSL

- - Fixed the problem with doing a zero byte SCP transfer, verified with test
    case 617 (which was added by Daniel Fandrich 5 Mar 2008).

- roadmap ahead

Dan Fandrich (20 Mar 2008)
- Jes reported the curl-config bug

- Fixed a problem where curl-config --protocols could erroneously show LDAPS
  support when curl didn't even have regular LDAP support.  It looks like
  this could happen when the --enable-ldaps configure switch is given but
  configure couldn't find the LDAP headers or libraries.

Gunter Knauf (20 Mar 2008)
- added --extvercmd parameter which can be used to specify an external command to display 'curl --version', f.e. with MinW32 crosscompile --extvercmd=/usr/bin/wine can be used.

Michal Marek (20 Mar 2008)
- - Added --with-ca-path=DIRECTORY configure option to use an openSSL CApath by
    default instead of a ca bundle. The configure script will also look for a
    ca path if no ca bundle is found and no option given.
  
  - Fixed detection of previously installed curl-ca-bundle.crt

Dan Fandrich (18 Mar 2008)
- Fixed an infinite loop when given an invalid SFTP quote command.

- Added test 626 to reproduce an infinite loop when given an invalid
  SFTP quote command reported by Vincent Le Normand, but left it disabled.

Michal Marek (18 Mar 2008)
- - Added curl_easy_getinfo typechecker.
  
  - Added macros for curl_share_setopt and curl_multi_setopt to check at least
    the correct number of arguments.

- Mark the statement expr with __extension__ so that gcc -pedantic doesn't emit
  any hard-to-grasp warnings in curl_easy_setopt() calls in applications.
  Also delete superfluous semicolons.

Dan Fandrich (15 Mar 2008)
- Spell the commands right

- Added tests 622-625 to test SFTP/SCP uploads. Test 625 was an attempt to
  reproduce the --ftp-create-dirs problem reported by Brian Ulm, but that
  seems to need a call curl_easy_reset() which this test case doesn't do.

Daniel Stenberg (13 Mar 2008)
- - Brian Ulm figured out that if you did an SFTP upload with
    CURLOPT_FTP_CREATE_MISSING_DIRS to create a directory, and then re-used the
    handle and uploaded another file to another directory that needed to be
    created, the second upload would fail. Another case of a state variable that
    wasn't properly reset between requests.
  
  - I rewrote the 100-continue code to use a single state variable instead of
    the previous two ones. I think it made the logic somewhat clearer.

- - Brian Ulm figured out that if you did an SFTP upload with
    CURLOPT_FTP_CREATE_MISSING_DIRS to create a directory, and then re-used the
    handle and uploaded another file to another directory that needed to be
    created, the second upload would fail. Another case of a state variable that
    wasn't properly reset between requests.

- Change the confusing two variables for the expect 100 continue stuff into
  a single state variable to make the code easier to follow and understand.

Dan Fandrich (13 Mar 2008)
- --ftp-create-dirs works on SFTP as well

Daniel Stenberg (13 Mar 2008)
- fix code that is normally #ifdef'ed out

- Done: 125 - Michal Marek's typechecker-gcc work

- updated according to the name resolve race condition fix just committed

- - Dmitry Popov filed bug report #1911069
    (http://curl.haxx.se/bug/view.cgi?id=1911069) that identified a race
    condition in the name resolver code when the DNS cache is shared between
    multiple easy handles, each running in simultaneous threads that could cause
    crashes.

- - Added a macro for curl_easy_setopt() that accepts three arguments and simply
    does nothing with them, just to make sure libcurl users always use three
    arguments to this function. Due to its use of ... for the third argument, it
    is otherwise hard to detect abuse.

- Recommend passing a 1 as parameter to CURLOPT_SSLENGINE_DEFAULT rather than
  a "dummy" just to get things as fixed as possible in case we ever get the urge
  to change this to actually mean something.

Michal Marek (11 Mar 2008)
- - Added a type checking macro for curl_easy_setopt(), needs gcc-4.3 and only
    works in C mode atm (http://curl.haxx.se/mail/lib-2008-02/0267.html ,
    http://curl.haxx.se/mail/lib-2008-02/0292.html )

Dan Fandrich (10 Mar 2008)
- Added tests 618-621 to test SFTP/SCP transfers of more than one file
  (test 620 tests the just-fixed problem reported by Brian Ulm).

Michal Marek (10 Mar 2008)
- fixed typo

- (try to) use LIBS for libraries (-l) and LDFLAGS for paths (-L) in the
  gssapi check. Cleans up curl-config --libs output when REQUIRE_LIB_DEPS=no

Daniel Stenberg (9 Mar 2008)
- - Brian Ulm reported a crash when doing a second SFTP transfer on a re-used
    easy handle if curl_easy_reset() was used between them. I fixed it and Brian
    verified that it cured his problem.
  
  - Brian Ulm reported that if you first tried to download a non-existing SFTP
    file and then fetched an existing one and re-used the handle, libcurl would
    still report the second one as non-existing as well! I fixed it abd Brian
    verified that it cured his problem.

- Done: 123 - Mike Protts' SFTP resume download

Yang Tse (7 Mar 2008)
- VS2005 and later dafault size for time_t is 64-bit, unless
  _USE_32BIT_TIME_T has been defined to get a 32-bit time_t

Michal Marek (6 Mar 2008)
- Fix the gssapi configure check to detect newer MIT Kerberos (patch by
  Michael Calmer)

Daniel Stenberg (6 Mar 2008)
- spellchecked

- curl_multi_timeout() is really not recommended with curl_multi_socket()-based
  usage

Yang Tse (6 Mar 2008)
- Regression fix:
  
  select/poll calls will only be retried upon EINTR failures as
  it previously was in lib/select.c revision 1.29
  
  In this way Curl_socket_ready() and Curl_poll() will again fail
  on any select/poll errors different than EINTR.

Dan Fandrich (6 Mar 2008)
- Added tests 616 and 617 to see how SFTP and SCP cope with zero-length
  files, as questioned by Mike Protts. SFTP does for me but SCP doesn't
  so test 617 is disabled for now.

- Fixed the test harness so it will write out zero-length data files.

Yang Tse (5 Mar 2008)
- fix log message used when unable to connect to destination port

Daniel Stenberg (4 Mar 2008)
- Mike Protts brought a patch that makes resumed transfers work with SFTP.

- - Anatoli Tubman found and fixed a crash with Negotiate authentication used on
    a re-used connection where both requests used Negotiate.

Yang Tse (29 Feb 2008)
- Force AIX xlc to fail and not generate object code if the source code has
  compiled with errors. This behaviour is needed for autoconf macros which
  rely on the ability to compile with or without errors, and is safer than
  xlc's default of failing only upon severe errors.

Daniel Stenberg (28 Feb 2008)
- Removed:
  
  121 - Kaspar Brand's and Guenter Knauf's work on the TLS extension Server Name
        Indication is now committed
  
  122 - Progress callback not called during failed socket connect with the multi
        interface, is now simply pending a closure since no feedback has been
        received lately.
  
  Added:
  
  123 - Mike Protts' SFTP resume download
  
  124 - Anatoli Tubman's fix for a Negotiate: crash
  
  125 - Michal Marek's typechecker-gcc work

Gunter Knauf (28 Feb 2008)
- fixed commented define for SSPI.

Yang Tse (28 Feb 2008)
- signal handling to properly cleanup on SIGINT and SIGTERM

- when terminating do it falling through cleanup code

- avoid inclusion of setup.h in util.h

- header inclusion cleanup

- make comment more precise

Daniel Stenberg (27 Feb 2008)
- Michal Marek's cleanup of how curl_easy_setopt() is used in examples and
  test code. Thanks to his curl_easy_setopt() typechecker work...

Gunter Knauf (27 Feb 2008)
- added get_ver.awk since c-ares is a standalone project, and should therefore also compile when cURL is absent.

- a couple of small fixes to the makefile:
  fixed comments; fixed INSTDIR define, simplified rules;
  changed to use get_ver.awk in current dir rather than the curl one.

- another small change to the makefiles to simplify rules.

- trial to fix the HP-UX breakage...

- added curl.html to install package.

- some more minor makefile changes; removed useless dist target.

- fixed install target to create a ca-bundle.crt since we have no longer one in the project.

Yang Tse (26 Feb 2008)
- all reads from stdin and writes to stdout will be retried until the
  whole operation completes or an unrecoverable condition is detected

- refactor some code out to write_pidfile() in util.c

Gunter Knauf (26 Feb 2008)
- Added support for server name indication (RFC 4366).
  Patch submitted by Kaspar Brand.

Daniel Stenberg (25 Feb 2008)
- - Kaspar Brand made GnuTLS-built libcurl properly acknowledge the option that
    forces it to prefer SSLv3.

- now builds and runs with GnuTLS-built libcurls too

- - Sam Listopad provided a patch in feature-request #1900014
    http://curl.haxx.se/bug/feature.cgi?id=1900014 that makes libcurl (built to
    use OpenSSL) support a full chain of certificates in a given PKCS12
    certificate.

- - Georg Lippitsch made the src/Makefile.vc6 makefile use the same memory model
    options as the lib/Makefile.vc6 already did.

Yang Tse (22 Feb 2008)
- Revert sockfilt.c back to revision 1.42
  
  Changes introduced in revision 1.43 were useless

Daniel Stenberg (21 Feb 2008)
- - Zmey Petroff found a crash when libcurl accessed a NULL pointer, which
    happened if you set the connection cache size to 1 and for example failed to
    login to an FTP site. Bug report #1896698
    (http://curl.haxx.se/bug/view.cgi?id=1896698)

Gunter Knauf (21 Feb 2008)
- fixed missing header; changed bail out from exit() to return().
  Mentioned on the list by Michal Marek.

Daniel Stenberg (21 Feb 2008)
- assert that the *connp is a non-NULL pointer when Curl_done() is called

Yang Tse (20 Feb 2008)
- Avoid timeout restart when signal caught while awaiting socket and stdin events

Gunter Knauf (20 Feb 2008)
- reformatted comment.

- added read callback function in order to prevent crashs on Win32 when linked against DLL:

Daniel Stenberg (20 Feb 2008)
- - Fixed test case 405 to not fail when libcurl is built with GnuTLS

- made the non-matching error code output nicer since we know it is a number
  and the string contains a newline...

Gunter Knauf (20 Feb 2008)
- mention removal of SSLv2 by default.

Daniel Stenberg (20 Feb 2008)
- oops, fixed to build

- "118 - Gautam Kachroo's issue with proxies and ssl" is now in CVS

- - Based on initial work done by Gautam Kachroo to address a bug, we now keep
    better control at the exact state of the connection's SSL status so that we
    know exactly when it has completed the SSL negotiation or not so that there
    won't be accidental re-uses of connections that are wrongly believed to be
    in SSL-completed-negotiate state.

- - We no longer support setting the CURLOPT_URL option from inside a callback
    such as the CURLOPT_SSL_CTX_FUNCTION one treat that as if it was a Location:
    following. The patch that introduced this feature was done for 7.11.0, but
    this code and functionality has been broken since about 7.15.4 (March 2006)
    with the introduction of non-blocking OpenSSL "connects".
  
    It was a hack to begin with and since it doesn't work and hasn't worked
    correctly for a long time and nobody has even noticed, I consider it a very
    suitable subject for plain removal. And so it was done.

Gunter Knauf (19 Feb 2008)
- applied patch to disable SSLv2 by default; discussion:
  http://sourceforge.net/tracker/index.php?func=detail&aid=1767276&group_id=976&atid=350976
  Submitted by Kaspar Brand.

Dan Fandrich (19 Feb 2008)
- Added test309 to test HTTP redirect to HTTPS URL

Yang Tse (19 Feb 2008)
- juggle() actually returns bool.
  
  Remove redundant and unreachable log message.

- fix compiler warnings: 'statement is unreachable'

Gunter Knauf (19 Feb 2008)
- fix for new codestyle.

- made changes to work with Win32;
  replaced fstat() with stat() call and bail out if local file not found.

Yang Tse (19 Feb 2008)
- fix compiler warnings: 'enumerated type mixed with another type'

- Reduce to 20 seconds the time allowed to set SO_REUSEADDR option on sockfilt listener socket.
  
  Log some more error descriptions.

Daniel Stenberg (18 Feb 2008)
- https_getsock() should be static all over (and did some fixed indenting)

- the ca-bundle is now removed

Gunter Knauf (18 Feb 2008)
- added makefile for MingW32 to build most of the samples.

- moved sample program defines into separate Makefile.inc so that other makefiles can pick up the defines from there.

- added check symbol for linking with POSIX prelude.

Yang Tse (18 Feb 2008)
- fix compiler warnings:
  
    'enumerated type mixed with another type'
  
  and
  
    'variable was set but never used'

Daniel Stenberg (18 Feb 2008)
- just mention in --cacert that curl normally has a default ca cert path built-in

- the ca-bundle is no longer shipped

- - We're no longer providing a very old ca-bundle in the curl tarball. You can
    get a fresh one downloaded and created with 'make ca-bundle' or you can get
    one from here => http://curl.haxx.se/docs/caextract.html if you want a fresh
    new one extracted from Mozilla's recent list of ca certs.
  
    The configure option --with-ca-bundle now lets you specify what file to use
    as default ca bundle for your build. If not specified, the configure script
    will check a few known standard places for a global ca cert to use.

- - Jerome Muffat-Meridol helped me fix Curl_done() to close the current
    connection by force when it was called before the entire request is
    completed, simply because we can't know if the connection really can be
    re-used safely at that point.

- rephrased comment

- In Curl_done() if premature is TRUE, it means this connection was said to be
  DONE before the entire request operation is complete and thus we can't know in
  what state it is for re-using, so we're forced to close it. In a perfect world
  we can add code that keep track of if we really must close it here or not, but
  currently we have no such detail knowledge.
  
  Jerome Muffat-Meridol helped us work this out.

- don't do the GOT_NOTHING error check if the DONE function was called with
  premature set TRUE, which means it was done before the request comleted. It
  could then very well not have received any data.

- added a comment about the ignoring of the Curl_done() return code

Yang Tse (17 Feb 2008)
- sockfilt will quit when orphaned

Daniel Stenberg (16 Feb 2008)
- oops, that was debug code not meant to be committed like this...

- fix warnings about shadowing

Gunter Knauf (16 Feb 2008)
- seems that curently we dont need the imports from (l)ldapx.imp.

- fixed linker def file for tools when compiled with gcc/nlmconv.

- re-ordered the module dependency list;
  removed unsused ldap module dependency since the module didnt autounload from protected address space.

Daniel Stenberg (15 Feb 2008)
- - Made the gnutls code path not even try to get the server cert if no peer
    verification is requested. Previously it would even return failure if gnutls
    failed to get the server cert even though no verification was asked for.
  
  - Fix my Curl_timeleft() leftover mistake in the gnutls code

- mention that we explicitly ignore the return code

Yang Tse (15 Feb 2008)
- log SSH public key authentication failure and reason

Daniel Stenberg (15 Feb 2008)
- new mirror and mirror recount after cleansing

- - Pooyan McSporran found and fixed a flaw where you first would do a normal
    http request and then you'd reuse the handle and replace the Accept: header,
    as then libcurl would send two Accept: headers!

Gunter Knauf (15 Feb 2008)
- fixed version var.

- moved info block up before help block so that it can also be displayed before help option; trial to add a version number.

- added some files which were missing in release tarballs.

Daniel Stenberg (14 Feb 2008)
- five current issues we should deal with somehow before the next release

Dan Fandrich (13 Feb 2008)
- Updated some out-of-date information.

Daniel Stenberg (13 Feb 2008)
- make this test disabled properly when built with yassl

Yang Tse (13 Feb 2008)
- verifyserver() actually returns the pid of the unsecure http and ftp servers
  when verifying the https and ftps servers

- On heavily loaded systems any test server start up can take longer than the
  timeout passed to startnew, when this happens startnew completes without being
  able to read the pidfile and consequently returns a zero pid2.
  
  To fix the above posibility the server pid is recovered from the verification
  stage which will actually return the server pid when verification is valid.

- fix grammatical issues

Daniel Stenberg (11 Feb 2008)
- Yang Tse pointed out a few remaining quirks from my timeout refactoring from
  Feb 7 that didn't abort properly on timeouts. These are actually old
  problems but now they should be fixed.

Yang Tse (11 Feb 2008)
- shell startup scripts and possible influence in scp/sftp/socks tests

Dan Fandrich (11 Feb 2008)
- Disable test due to keyword before disabling due to bad server.

Gunter Knauf (11 Feb 2008)
- open pipe to openssl commandline instead of writing into temp file.

Dan Fandrich (11 Feb 2008)
- Fixed unused variable warning.

Gunter Knauf (11 Feb 2008)
- added strict to make sure all vars are properly defined;
  added -t switch to make text info of CAs optional;
  added -q switch to be really quiet.

Yang Tse (11 Feb 2008)
- Additional SunSSH 1.1 ssh server options

- Bug report #1888932 (http://curl.haxx.se/bug/view.cgi?id=1888932) points
  out and provides test program that demonstrates that libcurl might not set
  error description message for error CURLE_COULDNT_RESOLVE_HOST for Windows
  threaded name resolver builds. Fixed now.

- Verify only once test harness sftp server connectivity and functionality.
  
  Make sure that the sftp client tool uses the ssh client binary that we have
  used to generate the configuration files, otherwise sftp might be using one
  located in the preferred path compiled into sftp.

Gunter Knauf (10 Feb 2008)
- removed 'mv' call and changed to use new backup feature of mk-ca-bundle.pl.

- added -b switch to provide a backup functionality for existing ca-bundle.crt file.

- fixed another wrong var in error message.

- make use of mv's backup feature so that calling the ca-bundle target more than once will never fail; ignore error which can occure if for whatever reason there's no orignial ca-bundle.crt to rename.

- fixed wrong var in error message.

Dan Fandrich (9 Feb 2008)
- Fixed some XML parsing problems.

- Added key words to all SSL-using tests so they can be skipped if necessary.
  Removed a few unnecessary requires SSL statements.

- Fixed test to use HTTPS as documented.

Daniel Stenberg (8 Feb 2008)
- - Mike Hommey filed and fixed bug report #1889856
    (http://curl.haxx.se/bug/view.cgi?id=1889856): When using the gnutls ssl
    layer, cleaning-up and reinitializing curl ends up with https requests
    failing with "ASN1 parser: Element was not found" errors. Obviously a
    regression added in 7.16.3.

Gunter Knauf (8 Feb 2008)
- fixed a typo.

Dan Fandrich (8 Feb 2008)
- Missed checking in these test data files.

Yang Tse (8 Feb 2008)
- Get rid of sftp subsystem additional parameters, they aren't widely supported

- To verify that the sftp server is actually running, responsive and that
  all curl's tests generated configuration and key files are fine, a real
  connection is established to the test harness sftp server authenticating
  and running a simple sftp remote pwd command.
  
  The verification is done using OpenSSH's or SunSSH's sftp client tool with
  a configuration file with the same options as the test harness socks server
  with the exception that dynamic forwarding is not used for sftp.

Daniel Stenberg (8 Feb 2008)
- and mention make ca-bundle in the 1.11 faq entry as well

- for step 5, mention that we can now generate an own version locally if wanted
  instead of downloading it from the curl site

- Gnter Knauf added lib/mk-ca-bundle.pl which gets the Firefox ca bundle and
  creates a suitable ca-bundle.crt file in PEM format for use with curl. The
  recommended way to run it is to use 'make ca-bundle' in the build tree root.

- oops, we make the copyright year ranges the simple style

- provide the ca-bundle target the same way as the Makefile.dist does it so that
  it works the same way for configure-based platforms as for non-configure ones

- include mk-ca-bundle.pl in the tarballs

Gunter Knauf (8 Feb 2008)
- added ca-bundle target to main makefile;
  for now this does rename the existing ca-bundle.crt to ca-bundle.crt.old;
  maybe we can remove this once we are 100% sure that the new script works properly, and just overwrite the shipping one?

- use argument to specify output filename if present.

- fixed regex to fetch certdata.txt version since it was replaced by CVS (argh!)
  added a switch to display certdata.txt version header.

Dan Fandrich (8 Feb 2008)
- Added tests 1022 and 1023 to validate output of curl-config --version and
  --vernum

Gunter Knauf (8 Feb 2008)
- added Perl script to create a fresh ca-bundle.crt.

Daniel Stenberg (7 Feb 2008)
- - Refactored a lot of timeout code into a few functions in an attempt to make
    them all use the same (hopefully correct) logic to make it less error-prone
    and easier to introduce library-wide where it should be used.

- ca-bundle.crt documentational updates that more clearly describe the bundle
  ca-bundle.crt file as outdated and in need for replacement by anyone who wants
  to verify modern peers as the one we have is from year 2000!

Yang Tse (6 Feb 2008)
- Fix problem in strdup replacement when dealing with absolutely huge strings.

- Don't try to compare more than strlen chars

- Use a long int data type to handle getpid() result

- Fix buffer size specification.
  
  Improve handling of boundary conditions for huge requests.

- Minor variable type cleanups.
  
  Disable "swsbounce" mode when the received request
  isn't for the same test and part number.

- proper initialization of httprequest, no longer zeroing out twice
  the whole 150000+ bytes struct, and also removing an equally big
  additional buffer for pipelining treatment.

Gunter Knauf (4 Feb 2008)
- fixed entry symbols when linked with posix prelude.

- added makefile flag to link with NLM POSIX semantics.

Daniel Stenberg (3 Feb 2008)
- - Dmitry Kurochkin cleaned up the pipelining code and removed the need for and
    use of the "is_in_pipeline" struct field.

- threaded-ssl.c is a little example that does multi-threaded downloads from
  HTTPS sites with OpenSSL-enabled libcurl (and pthreads) and thus do the
  thread-locking and things openssl-style.

- it is stable now...

Dan Fandrich (1 Feb 2008)
- Make mkinstalldirs ignore umask, for consistency with the rest of the
  install process.  Note that mkinstalldirs appears to be used only
  in some configurations.

Yang Tse (31 Jan 2008)
- When possible, use additional config options for test harness ssh server,
  which are deprecated in recent OpenSSH versions but are current for SunSSH.

Daniel Stenberg (31 Jan 2008)
- - Niklas Angebrand made the cookie support in libcurl properly deal with the
    "HttpOnly" feature introduced by Microsoft and apparently also supported by
    Firefox: http://msdn2.microsoft.com/en-us/library/ms533046.aspx . HttpOnly
    is now supported when received from servers in HTTP headers, when written to
    cookie jars and when read from existing cookie jars.

- - Dmitry Kurochkin moved several struct fields from the connectdata struct to
    the SingleRequest one to make pipelining better. It is a bit tricky to keep
    them in the right place, to keep things related to the actual request or to
    the actual connection in the right place.

- bug 51 may possibly be fixed, and as such it is not a known bug anymore:
  
  51.Kevin Reed's reported problem with a proxy when doing CONNECT and it
    wants NTLM and close the connection to the initial CONNECT response:
    http://curl.haxx.se/bug/view.cgi?id=1879375

Gunter Knauf (29 Jan 2008)
- silent stupid 'del' message when no files to delete found;
  added curl.res to clean target.

Daniel Stenberg (29 Jan 2008)
- add verbose output to test 509 for easier debugging

- - Dmitry Kurochkin fixed Curl_done() for pipelining, as it could previously
    crash!

- - Michal Marek fixed minor mistake in test case 553 that prevented it from
    working on other IP-addresses or port numbers.

- start over on 7.18.1

- Added peeps from the 7.18.0 release annoucement

Version 7.18.0 (28 Jan 2008)

Daniel Stenberg (28 Jan 2008)
- 7.18.0

- Add the three currently discussed bugs that won't make it into the 7.18.0
  release but hopefully they'll all be fixed in 7.18.1...

- this was modified this year so we bump the copyright year

- updated copyright year in the generated configure

- Dmitry Kurochkin: In "real world" testing I found more bugs in
  pipelining. Broken connection is not restored and we get into infinite
  loop. It happens because of wrong is_in_pipeline values.

Yang Tse (27 Jan 2008)
- Dont rely on PAMAuthenticationViaKbdInt default being 'no'

Daniel Stenberg (26 Jan 2008)
- added test 1021 to verify my fix for bug report #1879375

- - Kevin Reed filed bug report #1879375
    (http://curl.haxx.se/bug/view.cgi?id=1879375) which describes how libcurl
    got lost in this scenario: proxy tunnel (or HTTPS over proxy), ask to do any
    proxy authentication and the proxy replies with an auth (like NTLM) and then
    closes the connection after that initial informational response.
  
    libcurl would not properly re-initialize the connection to the proxy and
    continue the auth negotiation like supposed. It does now however, as it will
    now detect if one or more authentication methods were available and asked
    for, and will thus retry the connection and continue from there.
  
  - I made the progress callback get called properly during proxy CONNECT.

- using anyauth isn't unconditionally an extra roundtrip

- just wanted to mention two uclinux archs I've tried libcurl builds on myself

Yang Tse (25 Jan 2008)
- improve request initialization for test harness HTTP server

- Dmitry Kurochkin's test harness HTTP server pipelining fix fot test 530

Daniel Stenberg (24 Jan 2008)
- and Igor Franchuk is his name!

Gunter Knauf (24 Jan 2008)
- fixed link to latest native awk.

- updated makefiles to use global copyright define.

- updated awk script to fetch copyright from header.

- minor makefile tweaks.

- happy new year

- use more correctly named define.

- use copyright define instead of hardcoded string.

- added copyright define to curlver.h.

Daniel Stenberg (23 Jan 2008)
- "Igor" pointed out that CURLOPT_COOKIELIST set to "ALL" leaked memory, and so
  did "SESS". Fixed now.

- Dmitry Kurochkin's pipelining close-down segfault fix

Yang Tse (23 Jan 2008)
- update openssl version

- STDIN_FILENO, STDOUT_FILENO and STDERR_FILENO clone macros

Gunter Knauf (23 Jan 2008)
- happy new year

- removed inclusion of libcurl memory debug headers since this lib stub is a well proofed method suggested by Novell. This enables usage of the stub with language bindings.

Yang Tse (22 Jan 2008)
- when unable to initialize sftp session, also log failure reason

- check availability of poll.h header at configuration time, and include
  it when sys/poll.h is unavailable

- update copyright year

Daniel Stenberg (21 Jan 2008)
- Dmitry Kurochkin removed the cancelled state for pipelining, as we agreed
  that it is bad anyway. Starting now, removing a handle that is in used in a
  pipeline will break the pipeline - it'll be set back up again but still...

Yang Tse (21 Jan 2008)
- Disable ldap support for cygwin builds, since it breaks whole build process.

- undo using internal *printf() clones for test #530

- use internal *printf() clones since snprintf() not available on all platforms

Daniel Stenberg (20 Jan 2008)
- Judson provided an example, and the added mirror adds the count

- This is a multi threaded application that uses a progress bar to show
  status.  It uses Gtk+ to make a smooth pulse. Written by Jud Bishop

- http://curl.very-clever.com/ is a new mirror in Nuremberg, Germany

Yang Tse (20 Jan 2008)
- Also disable GSSAPIAuthentication for the test harness ssh client

Daniel Stenberg (19 Jan 2008)
- added a (sample) target for 64bit msvc builds

- rephrased the --socks5-hostname help output somewhat

- Dmitry Kurochkin fixed test case 530 (pipelining)

- Lau Hang Kin found and fixed a problem with the multi interface when doing
  CONNECT over a proxy. curl_multi_fdset() didn't report back the socket
  properly during that state, due to a missing case in the switch in the
  multi_getsock() function.

Yang Tse (18 Jan 2008)
- fix failure to properly detect SSH and SOCKS servers start up on loaded systems

- to actually allow really big HTTP POSTs curl's postfieldsize type is changed to
  curl_off_t and CURLOPT_POSTFIELDSIZE_LARGE is used to pass value to libcurl

Daniel Stenberg (17 Jan 2008)
- curl-java 0.2.1

- the java binding is not really maintained

Yang Tse (17 Jan 2008)
- Don't abort tests 518 and 537 when unable to raise the open-file soft limit

- fix compiler warning

Dan Fandrich (17 Jan 2008)
- Put the comments in an XML-valid location.

Gunter Knauf (17 Jan 2008)
- updated lib versions.

- updated copyright for new year.

Daniel Stenberg (16 Jan 2008)
- Added test 553. This test case and code is based on the bug recipe Joe Malicki
  provided for bug report #1871269, fixed on Jan 14 2008 before the 7.18.0
  release.

- remove trailing comma too, even though I don't think it does any harm

- Nathan Coulter's patch that makes runtests.pl respect the PATH when figuring
  out what valgrind to run.

- Dmitry Kurochkin's additional pipelining bugfix

Yang Tse (16 Jan 2008)
- fix handling of out of memory in the command line tool that afected
  data url encoded HTTP POSTs when reading it from a file.

Patrick Monnerat (16 Jan 2008)
- OS/400 update:
  New declarations in curl.h reported to curl.inc.in.
  Copyrights extended to 2008.
  SONAME handling introduced in build scripts.

Daniel Stenberg (16 Jan 2008)
- Dmitry Kurochkin worked a lot on improving the HTTP Pipelining support that
  previously had a number of flaws, perhaps most notably when an application
  fired up N transfers at once as then they wouldn't pipeline at all that
  nicely as anyone would think... Test case 530 was also updated to take the
  improved functionality into account.

- Calls to Curl_failf() are not supposed to provide a trailing newline as the
  function itself adds that. Fixed on 50 or something strings!

- Woops, partly revert my previous commit and do it slightly differently instead.
  The signalling of that a global DNS cache is wanted is done by setting the
  option but the setting of the internal variable that it is in use must not be
  done until it finally actually gets used!
  
  NOTE and WARNING: I noticed that you can't actually switch off the global dns
  cache with CURLOPT_DNS_USE_GLOBAL_CACHE but you couldn't do that previously
  either and the option is very clearly and loudly documented as DO NOTE USE so
  I won't bother to fix this bug now.

- I made the torture test on test 530 go through. This was actually due to
  silly code left from when we switched to let the multi handle "hold" the dns
  cache when using the multi interface... Of course this only triggered when a
  certain function call returned error at the correct moment.

- Michal Marek's improved .curlrc syntax description

- Joe Malicki filed bug report #1871269
  (http://curl.haxx.se/bug/view.cgi?id=1871269) and we could fix his hang-
  problem that occurred when doing a large HTTP POST request with the
  response-body read from a callback.

Yang Tse (14 Jan 2008)
- fix compiler warning

- startnew() shouldn't return a positive pid as reported in the pidfile
  by the spawned server itself unless it is actually alive

Daniel Stenberg (14 Jan 2008)
- 5.3 support FF3 sqlite cookie files

Gisle Vanem (14 Jan 2008)
- Trying GnuTLS and OpenSSL together fails to compile in not so
  obvious ways. Give an explicit error.

Yang Tse (14 Jan 2008)
- #115 is done

- fix compiler warning

- add client features part

Daniel Stenberg (12 Jan 2008)
- I re-arranged the curl --help output. All the options are now sorted on
  their long option names and all descriptions are one-liners.

- Eric Landes provided the patch (edited by me) that introduces the
  --keepalive-time to curl to set the keepalive probe interval. I also took
  the opportunity to rename the recently added no-keep-alive option to
  no-keepalive to keep a consistent naming and to avoid getting two dashes in
  these option names. Eric also provided an update to the man page for the new
  option.

- added release dates for four very old releases

Yang Tse (12 Jan 2008)
- Remove hardcoded verbosity

- Ooops

- Ooops

Daniel Stenberg (11 Jan 2008)
- new year

Yang Tse (11 Jan 2008)
- When verifying that test harness's SSH and SOCKS servers have been
  started check also that the process is actually alive, since they
  could have died once the pidfile was written out

- fix compiler warning

- fix compiler warning

Daniel Stenberg (11 Jan 2008)
- "114 - Ranged downloads on file:// URLs" done

- Daniel Egger made CURLOPT_RANGE work on file:// URLs the very same way it
  already worked for FTP:// URLs

- I made the curl tool switch from using CURLOPT_IOCTLFUNCTION to now use the
  spanking new CURLOPT_SEEKFUNCTION simply to take advantage of the improved
  performance for the upload resume cases where you want to upload the last
  few bytes of a very large file. To implement this decently, I had to switch
  the client code for uploading from fopen()/fread() to plain open()/read() so
  that we can use lseek() to do >32bit seeks (as fseek() doesn't allow that)
  on systems that offer support for that.

- Michal Marek made curl-config --libs not include /usr/lib64 in the output
  (it already before skipped /usr/lib).  /usr/lib64 is the default library
  directory on many 64bit systems and it's unlikely that anyone would use the
  path privately on systems where it's not.

Yang Tse (10 Jan 2008)
- Temporary change to help debugging SSH server verification failures

Daniel Stenberg (10 Jan 2008)
- Two more items done:
  
  109 - curl_easy_pause
  110 - seekfunction

- Georg Lippitsch brought CURLOPT_SEEKFUNCTION and CURLOPT_SEEKDATA to allow
  libcurl to seek in a given input stream. This is particularly important when
  doing upload resumes when there's already a huge part of the file present
  remotely. Before, and still if this callback isn't used, libcurl will read
  and through away the entire file up to the point to where the resuming
  begins (which of course can be a slow opereration depending on file size,
  I/O bandwidth and more). This new function will also be preferred to get
  used instead of the CURLOPT_IOCTLFUNCTION for seeking back in a stream when
  doing multi-stage HTTP auth with POST/PUT.

- Nikitinskit Dmitriy filed bug report #1868255
  (http://curl.haxx.se/bug/view.cgi?id=1868255) with a patch. It identifies
  and fixes a problem with parsing WWW-Authenticate: headers with additional
  spaces in the line that the parser wasn't written to deal with.

- corrected comment

Yang Tse (9 Jan 2008)
- fix compiler warning

- Fix file Id

- Add /usr/freeware/sbin and /usr/freeware/libexec to the ssh binaries
  locations search list.

Daniel Stenberg (8 Jan 2008)
- added the --retry problems mention on the curl-library list today

Yang Tse (8 Jan 2008)
- Partially cleanup debugging messages in test harness, introduced for
  new minimum SSH version support for SCP, SFTP and SOCKS tests.
  
  Some verbosity which still remains, will go out before next release.

- Remove increased loglevel intended to debug autobuild's publickey
  authentication failures when using OpenSSH 2.9.9 or SunSSH.
  
  Verified fact: Even when only using publickey authentication,
  OpenSSH and SunSSH first validate the user, this implies that
  if the user validation fails, 'invalid user', the publickey
  authentication will not be allowed to complete.

Daniel Stenberg (8 Jan 2008)
- Introducing curl_easy_pause() and new magic return codes for both the read
  and the write callbacks that now can make a connection's reading and/or
  writing get paused.

- removed 113, both bugs #1850730 and #1854175 are fixed in CVS

Yang Tse (8 Jan 2008)
- Change typecast due to http://cool.haxx.se/cvs.cgi/curl/include/curl/curl.h.diff?r1=1.336&r2=1.337

- Increase loglevel to debug autobuild's publickey authentication
  failures when using OpenSSH 2.9.9 or SunSSH

- Display ssh server log and configuration upon socks server failure

Dan Fandrich (7 Jan 2008)
- Fixed test description

Patrick Monnerat (7 Jan 2008)
- ILE RPG support update (from include/curl/curl.h)

Daniel Stenberg (6 Jan 2008)
- updated URLs and moved down two issues to the new "less likely" section

- more SOCKS5_HOSTNAME adjustments from Richard Atterer

- make sure we deal with SOCKS5_HOSTNAME as a proxy type as well

- Richard Atterer reverted back what I missed in my previous revert ;-)

- make sure CURLPROXY_SOCKS5_HOSTNAME is taken care of as well

- fixed: 116 - bug #1863171, curl_getdate() bug
  added: 117 - Eric Landes patch for introducing the --tcp-keep* options

- Jeff Johnson filed bug report #1863171
  (http://curl.haxx.se/bug/view.cgi?id=1863171) where he pointed out that
  libcurl's date parser didn't accept a +1300 time zone which actually is used
  fairly often (like New Zealand's Dailight Savings Time), so I modified the
  parser to now accept up to and including -1400 to +1400.

Yang Tse (6 Jan 2008)
- Increase MaxAuthTries from 0 to 10. Using a value of 0 is too restrictive

Daniel Stenberg (5 Jan 2008)
- Based on further discussion on curl-library, I reverted yesterday's SOCKS5
  code to instead introduce support for a new proxy type called
  CURLPROXY_SOCKS5_HOSTNAME that is used to send the host name to the proxy
  instead of IP address and there's thus no longer any need for a new
  curl_easy_setopt() option.
  
  The default SOCKS5 proxy is again back to sending the IP address to the
  proxy.  The new curl command line option for enabling sending host name to a
  SOCKS5 proxy is now --socks5-hostname.

- Added Daniel Egger and extended the --no-keep-alive description

- added keyword

Yang Tse (5 Jan 2008)
- Don't abort operation when attempting to set SO_KEEPALIVE
  fails, just issue a warning and ignore the failure.

Dan Fandrich (4 Jan 2008)
- "yes" must be in quotes to be XML compatible

Daniel Stenberg (4 Jan 2008)
- 111 - DNS resolve over socks5 is done
  added 116 - bug #1863171, curl_getdate() bug

- Daniel Egger provided 'nonewline=yes' support for the <stdout> section

- Based on Maxim Perenesenko's patch, we now do SOCKS5 operations and let the
  proxy do the host name resolving and only if --socks5ip (or
  CURLOPT_SOCKS5_RESOLVE_LOCAL) is used we resolve the host name locally and
  pass on the IP address only to the proxy.

- 14.3 extend CURLOPT_SOCKOPTFUNCTION prototype
  (for next SONAME bump)

Yang Tse (4 Jan 2008)
- Missing newline at end of message

- Fix 'format string' compiler warning

- 'ControlPath' ssh client configuration file option requires OpenSSH 4.2 or
  later to accept 'none' as an indication to disable connection multiplexing

- SunSSH 1.1 ssh client does not support config file options:
  
   ConnectTimeout
   ForwardX11Trusted
   HashKnownHosts
   RekeyLimit
   ServerAliveCountMax
   ServerAliveInterval

- - Display curl_ssh_config when socks server fails to start.
  
  - Capability of running socks5 tests must be based on ssh daemon version
    and not on ssh client version.

- Make sure @INC is modified before 'using' the sshhelp module.

- 'LocalCommand' no longer used for ssh client config file. When used it
  requires a non blank argument.

- Modify test harness so that the minimum SSH version required to run
  SCP, SFTP and SOCKS4 tests is now OpenSSH 2.9.9 or SunSSH 1.0
  
  For SOCKS5 tests minimum versions are OpenSSH 3.7 or SunSSH 1.0

Gisle Vanem (3 Jan 2008)
- 'false' and 'true' are not built-ins on most compilers.
  Use TRUE/FALSE from setup_once.h.

Daniel Stenberg (2 Jan 2008)
- one gone, one added

- - I fixed two cases of missing return code checks when handling chunked
    decoding where a write error (or abort return from a callback) didn't stop
    libcurl's processing.

- I removed the socklen_t use from the public curl/curl.h header and instead
  made it an unsigned int. The type was only used in the curl_sockaddr struct
  definition (only used by the curl_opensocket_callback). On all platforms I
  could find information about, socklen_t is 32 unsigned bits large so I don't
  think this will break the API or ABI. The main reason for this change is of
  course for all the platforms that don't have a socklen_t definition in their
  headers to build fine again. Providing our own configure magic and custom
  definition of socklen_t on those systems proved to work but was a lot of
  cruft, code and extra magic needed - when this very small change of type seems
  harmless and still solves the missing socklen_t problem.

- Richard Atterer brought a patch that added support for SOCKS4a proxies, which
  is an inofficial PROXY4 variant that sends the hostname to the proxy instead
  of the resolved address (which is already supported by SOCKS5).  --socks4a is
  the curl command line option for it and CURLOPT_PROXYTYPE can now be set to
  CURLPROXY_SOCKS4A as well.

- updated

Gisle Vanem (2 Jan 2008)
- Added '-d' option for Watt-32 debugging.

Daniel Stenberg (1 Jan 2008)
- Mohun Biswas pointed out that --libcurl generated a source code with an int
  function but without a return statement. While fixing that, I also took care
  about adding some better comments for the generated code.

- --libcurl was added in 7.16.1, a useful information

- Dmitry Kurochkin mentioned a flaw
  (http://curl.haxx.se/mail/lib-2007-12/0252.html) in detect_proxy() which
  failed to set the bits.proxy variable properly when an environment variable
  told libcurl to use a http proxy.

- In an attempt to repeat the problem in bug report #1850730
  (http://curl.haxx.se/bug/view.cgi?id=1850730) I wrote up test case 552. The
  test is doing a 70K POST with a read callback and an ioctl callback over a
  proxy requiring Digest auth. The test case code is more or less identical to
  the test recipe code provided by Spacen Jasset (who submitted the bug report).

- what we're having atm

Gunter Knauf (25 Dec 2007)
- added missing semicolon fromn last commit.

Daniel Stenberg (24 Dec 2007)
- Gary Maxwell filed bug report #1856628
  (http://curl.haxx.se/bug/view.cgi?id=1856628) and provided a fix for the
  (small) memory leak in the SSL session ID caching code. It happened when a
  previous entry in the cache was re-used.

Dan Fandrich (22 Dec 2007)
- Use getcwd() to get the directory, which works even if one of the directory
  components doesn't have read permission set.

- Use getcwd() to get the directory, which works even if one of the
  directory components doesn't have read permission set.

- Ensure that nroff doesn't put anything but ASCII characters into the
  --manual text.

Yang Tse (18 Dec 2007)
- (http://curl.haxx.se/mail/archive-2007-12/0039.html) reported and fixed
  a file truncation problem on Windows build targets triggered when retrying
  a download with curl.

- MSVC 9.0 (VS2008) does not support Windows build targets prior to WinXP,
  and makes wrong asumptions of build target when it isn't specified. So,
  if no build target has been defined we will target WinXP when building
  with MSVC 9.0 (VS2008).

- pollfd struct and WSA_poll fixes for Windows Vista already present in CVS

Daniel Stenberg (17 Dec 2007)
- Mateusz Loskot pointed out that VC++ 9.0 (2008) has the pollfd struct and
  defines in the SDK somehow differently so we have to add a define to the
  config-win32.h file to make select.h compile nicely.

- spell!

- Add test 551 that tests callback-post over a proxy that requires Digest auth.
  A failed attempt to repeat bug report #1850730 (ie the test works fine).

- remove mistaken "-d" from here

- -u addition: If you just give the user name (without entering a colon) curl
  will prompt for a password. Denis Bredelet pointed out!

Dan Fandrich (14 Dec 2007)
- Added missing <features>

- Fixed typo in test title

Yang Tse (13 Dec 2007)
- Fix compiler warning

Daniel Stenberg (13 Dec 2007)
- David Wright filed bug report #1849764
  (http://curl.haxx.se/bug/view.cgi?id=1849764) with an included fix. He
  identified a problem for re-used connections that previously had sent
  Expect: 100-continue and in some situations the subsequent POST (that didn't
  use Expect:) still had the internal flag set for its use. David's fix (that
  makes the setting of the flag in every single request unconditionally) is
  fine and is now used!

- Gilles Blanc made the curl tool enable SO_KEEPALIVE for the connections and
  added the --no-keep-alive option that can disable that on demand.

- clarify that the CURLMOPT_TIMERFUNCTION callback can pass in 0 and -1 as legal
  values and what they mean

- build acountry too

Gisle Vanem (11 Dec 2007)
- Added acountry.c.

- Added build of acountry.nlm.

- Added build of acountry.exe.

- Build acountry.exe. Added 'socklen_t' define.

- Another sample application that returns country-code and
  name from an IPv4-address or host-name. Using the service of
  countries.nerd.dk.

Daniel Stenberg (10 Dec 2007)
- grrr, the previous commit was meant to properly make sure that we don't
  link any executables when doing debug builds since they kind of assume
  symbols provided by libcurl, but it also wrongly included acountry.c

- when building

- build ahost and adig by default but don't install them

Patrick Monnerat (10 Dec 2007)
- Define new options in OS400 RPG interface
  Port OS400 compilation scripts to >= V5R2M0

Gisle Vanem (10 Dec 2007)
- Fix for targets that do have 'struct in6_addr', but which doesn't
  define 's6_addr' as a macro.

Daniel Stenberg (10 Dec 2007)
- cut out the number of contributors from this file since it'll always be wrong

- 5.13 How do I stop an ongoing transfer?

- Andrew Moise filed bug report #1847501
  (http://curl.haxx.se/bug/view.cgi?id=1847501) and pointed out a memcpy()
  that should be memmove() in the convert_lineends() function.

- add in toc too

- RTMP support?

- oops another bad numbering

- oops duplicate numbering

- slightly rephrased

Gisle Vanem (9 Dec 2007)
- Removed use of '..\lib\libcurl_wc.lib' as this is not really
  a static-lib. Renamed 'OBJ_DIR' to 'WC_Win32.obj'.

- Removed building 'libcurl_wc.lib' as this isn't a static-library
  in the common sense. Renamed 'OBJ_DIR' to 'WC_Win32.obj'.

Daniel Stenberg (8 Dec 2007)
- Travelling some 500km by train back and forth on the same day gives you time
  to do things you don't otherwise do, but here's the summary of today's work...

- reformat to FAQ/CONTRIBUTE style, for nicer web-look when I apply the magic
  script(s) on it online

- cleanup

- fix a crash in oom situations (thanks runtests.pl -t!)

- add keywords

- add missing files

- correct the comment about size

- add test 549 and 550

- mention how to enable chunked encoding for POSTs

- All static functions that were previously name Curl_* something no longer
  use that prefix as we use that prefix only for library-wide internal global
  symbols.

- clarify that when curl_multi_timeout() returns -1 it just means that there
  is no current timeout. It does not mean wait forever and it does not mean
  do not wait at all. It means there is no timeout value known at this point in
  time.

- Spacen Jasset reported a problem with doing POST (with data read with a
  callback) over a proxy when NTLM is used as auth with the proxy. The bug
  also concerned Digest and was limited to using callback only. Spacen worked
  with us to provide a useful patch. I added the test case 547 and 548 to
  verify two variations of POST over proxy with NTLM.

- fix compiler warning

- added test548 which uses the lib547 source file, preparing for test547 which
  is supposed to repeat the bug report "NTLM proxy authentication with
  CURLOPT_READDATA seems broken." posted on the curl-library mailing list on dec
  3 2007.

Yang Tse (4 Dec 2007)
- Fix compiler warning: variable may be used uninitialized

Daniel Stenberg (3 Dec 2007)
- Ray Pekowski filed bug report #1842029

Yang Tse (3 Dec 2007)
- Fix three issues previous cleanup introduces.

Daniel Stenberg (3 Dec 2007)
- SSL session id caching bugfix

- Bug report #1842029 (http://curl.haxx.se/bug/view.cgi?id=1842029) identified
  a problem with SSL session caching that prevent it from working, and the
  associated fix!

- mention "no longer default-appends ;type= on FTP URLs thru proxies" as a bug
  fix even if kind of implied by the new option

- Now libcurl (built with OpenSSL) doesn't return error anymore if the remote
  SSL-based server doesn't present a certificate when the request is told to
  ignore certificate verification anyway.

-  Erik Kline cleaned up ares_gethostbyaddr.c:next_lookup() somewhat

- Brad Spencer fixed the configure script to assume that there's no
  /dev/urandom when built cross-compiled as then the script cannot check for
  it.

- removed the ;type= thing for FTP urls through proxy, since that's now only
  present when enabled by on option which isn't done by default (and isn't even
  available for the curl app atm)

- 107 - resolve the type= thing for FTP URLs over HTTP proxies, is solved

- Michal Marek introduced CURLOPT_PROXY_TRANSFER_MODE which is used to control
  the appending of the "type=" thing on FTP URLs when they are passed to a
  HTTP proxy. Some proxies just don't like that appending (which is done
  unconditionally in 7.17.1), and some proxies treat binary/ascii transfers
  better with the appending done!

Dan Fandrich (30 Nov 2007)
- Upped copyright year

Daniel Stenberg (29 Nov 2007)
- uh, corrected pretty major write error!

- ftp resumed upload and long Digest nonces

- A bug report on the curl-library list showed a HTTP Digest session going on
  with a 700+ letter nonce. Previously libcurl only support 127 letter ones
  and now I bumped it to 1023.

- Fixed the resumed FTP upload loop to not require that the read callback
  returns a full buffer on each invoke.

- include the libssh2 return code in the output for these failures to ease
  debugging

- the gethostbyname fix applied here as well

- fix next_lookup() to continue searching even if c-ares failed to load the
  /etc/hosts file, pointed out by Erik Kline:
  http://daniel.haxx.se/projects/c-ares/mail/c-ares-archive-2007-11/0027.shtml

- When --with-gssapi (without given path) is used, we must use krb5-config to
  get the libs as well and not only the include path like we used to.

Yang Tse (28 Nov 2007)
- To allow remote log inspection avoid redirecting messages to stderr.
  Cleanup some debugging messages. Unlink log file on exit.

Daniel Stenberg (27 Nov 2007)
- Remove the check for libdl since that isn't actually used and it causes
  warnings. Pointed out by Robin Cornelius.

- pkgconfig fix by Andreas Schuldei

- spellfix

Yang Tse (27 Nov 2007)
- ConnectTimeout requires OpenSSH 3.7 or later

- Explicitly disallow remote hosts to connect to local forwarded ports,
  the socks server port in the test suite. This is the default setting
  unless a tinkered built ssh is being used.

- Stop ssh and socks servers when verification fails

- Providing an explicit bind address besides the port for dynamic application-level
  port forwarding, our socks port, prevents ssh from running on some systems.
  
  By default, ssh binds local port forwardings to the loopback address, since this
  was the address being given as the explicit bind address, now it isn't given.

Daniel Stenberg (26 Nov 2007)
- more blurb

- Added recent changes and spellchecked

- test1015 --data-urlencode

- #1 fixed --data-urlencode when no = or @ was used
  #2 extended the user-agent buffer since I hit the 128 byte boundary!

- slightly less outdated

Yang Tse (26 Nov 2007)
- Temporary change to better debug startup failures
  of test suite ssh and socks servers.

- Allow different start timeout specification for each server

Daniel Stenberg (24 Nov 2007)
- reqdata doesn't exist anymore and the path moved to the UrlState struct

- struct HandleData is now called struct SingleRequest, and is only for data that
  is inited at the start of the DO action. I removed the Curl_transfer_keeper
  struct completely, and I had to move out a few struct members (that had to
  be set before DO or used after DONE) to the UrlState struct. The SingleRequest
  struct is accessed with SessionHandle->req.
  
  One of the biggest reasons for doing this was the bunch of duplicate struct
  members in HandleData and Curl_transfer_keeper since it was really messy to
  keep track of two variables with the same name and basically the same purpose!

Yang Tse (23 Nov 2007)
- make 'checkdied' in runtests.pl more robust

- Revert last change since it breaks running the test suite
  when builddir is different from srcdir.

- Improve chance of running runtests.pl from outside the
  source tree 'tests' directory

- Debugging messages to trace startnew failures

- Provide a socklen_t definition in curl.h for Win32 API build targets
  which don't have one.

Daniel Stenberg (22 Nov 2007)
- make nlen a size_t to better hold diffs between pointers etc

- Alessandro Vesely helped me improve the --data-urlencode's syntax, parser
  and documentation.

- Make the do_complete() function not get called until the DO actually is
  compelete, which bascially means when used with the multi interface

Yang Tse (21 Nov 2007)
- Temporary change adding additional debugging messages to better pinpoint
  startup failures of test suite ssh and socks servers.

- Fix trying to return outside of a subroutine

Daniel Stenberg (21 Nov 2007)
- and we start on 1.5.2!

- change

- oops

- start working on 1.5.1 now

- this is what 1.5.0 is

- While inspecting the Negotiate code, I noticed how the proxy auth was using
  the same state struct as the host auth, so both could never be used at the
  same time! I fixed it (without being able to check) to use two separate
  structs to allow authentication using Negotiate on host and proxy
  simultanouesly.

- clarify somewhat what happens to some data when a share is set to be used

- white space changes only to clean up indent and source width

- remove the unconditional enabling of cookies if you set a share to use!

- a bunch of new comments

- rephrased

Yang Tse (20 Nov 2007)
- Don't gather additional debug info unless sshd actually fails

Patrick Monnerat (20 Nov 2007)
- ILE RPG binding: OS/400 specific and contained in source distribution

Yang Tse (20 Nov 2007)
- Improve detection of sshd un/supported options.
  
  Gather additional debug info when the test suite ssh server fails to start.

Daniel Stenberg (20 Nov 2007)
- Introuced --data-urlencode to the curl tool for easier url encoding of the
  data sent in a post.

- fix the treatment of the parameter-based precision, as in "%.*s%s" as
  previously the second %s would wrongly get the numerical argument that is used
  for the variable precision for the first %s...

- 107 - resolve the type= thing for FTP URLs over HTTP proxies

- 106 - Share interface force-enable the cookie parser

Yang Tse (19 Nov 2007)
- This is a temporary change to test if OpenSSH 3.6 and SunSSH 1.1
  are good/compatible enough to run the test suite ssh server and
  socks tests

Daniel Stenberg (19 Nov 2007)
- fill in missing copyrights

- I think this is the right fix for other non-OpenSSL libs, based on the NSS fix
  from the other day. It is time to setup the internal SSL libs and treat them
  with a "handler" struct similar to how we deal with the protocols these days...

Yang Tse (19 Nov 2007)
- Temporary change to help debugging string(s) returned by sshd -V
  when sshd is not being identified as an OpenSSH daemon

Gunter Knauf (18 Nov 2007)
- removed now obsolete defines;
  updated external library versions to latest.

Daniel Stenberg (18 Nov 2007)
- Rob Crittenden fixed SSL connections with NSS done with the multi-interface

Yang Tse (18 Nov 2007)
- Add /opt/ssh/sbin and /opt/ssh/libexec to the sshd locations search list.
  
  Improve wording of a couple of debug messages.

- When unable to start test suite sshserver, log if OpenSSH has not been
  found or the OpenSSH version found

Daniel Stenberg (17 Nov 2007)
- Andres Garcia made the examples build fine on Windows (mingw + msys) when
  the lib was built staticly.

Yang Tse (17 Nov 2007)
- Add /usr/local/sbin and /usr/freeware/bin to the sshd locations search list

Daniel Stenberg (16 Nov 2007)
- Michal Marek made the test suite remember what test servers that fail to
  start so that subsequent tries are simply skipped.

Steinar H. Gunderson (16 Nov 2007)
- Fix a double free.

Yang Tse (16 Nov 2007)
- Fix unsigned integral math check in add_buffer_send()

Daniel Stenberg (15 Nov 2007)
- Ates Goral identified a problem in http.c:add_buffer_send() when a debug
  callback was used, as it could wrongly pass on a bad size for the outgoing
  HTTP header. The bad size would be a very large value as it was a wrapped
  size_t content. This happened when the whole HTTP request failed to get sent
  in one single send.  http://curl.haxx.se/mail/lib-2007-11/0165.html

- removed unnecessary check from add_buffer_send() that only was made within
  #ifdef CURL_DOES_CONVERSIONS anyway! I turned it into a DEBUGASSERT() instead.

- Michal Marek fixed the test suite to better deal with the case when the HTTP
  ipv6 server can't run.

- Rearranged code and changed Curl_readwrite_init() and Curl_pre_readwrite() into
  do_init() and do_complete() which now are called first and last in the DO
  function. It simplified the flow in multi.c and the functions got more
  sensible names!

Yang Tse (15 Nov 2007)
- Needed now that in6_addr is referenced in ares.h

- Replace isupper with our uppercase macro version

- Replace isgraph with our uppercase macro version

Daniel Stenberg (15 Nov 2007)
- Make the Transfer() function return earlier without doing any initializations
  for the cases where there's nothing to do in here, like for SFTP directory
  listings that already is complete when this function gets called. The init
  stuff clears byte counters which isn't really desired.

Steinar H. Gunderson (15 Nov 2007)
- When looking up in DNS and then in the hosts file, return the error code from DNS if both fail, instead of returning the error code from the hosts file, as today. Patch from the Google tree.

- Return TTL data from ares_parse_{a,aaaa}_reply, if the user is so inclined. Patch from the Google tree.

Daniel Stenberg (14 Nov 2007)
- use the existing variable instead

- Fix how TFTP connections are treated when re-used, if the SessionHandle has
  been used for other protocols in between. I found this when test 2004 started
  to fail for me!

Yang Tse (14 Nov 2007)
- Fix a variable potential wrapping in add_buffer() when using absolutely
  huge send buffer sizes

Daniel Stenberg (12 Nov 2007)
- Fixed a remaining problem with doing SFTP directory listings on a re-used
  persistent connection. Mentioned by Immanuel Gregoire on the mailing list.

- comment language

- Bug report #1830637 (http://curl.haxx.se/bug/view.cgi?id=1830637), which was
  forwarded from the Gentoo bug tracker by Daniel Black and was originally
  submitted by Robin Johnson, pointed out that libcurl would do bad memory
  references when it failed and bailed out before the handler thing was
  setup. My fix is not done like the provided patch does it, but instead I
  make sure that there's never any chance for a NULL pointer in that struct
  member.

- oops, fixed build when CURL_LIBSSH2_DEBUG is defined

- new ruby binding, curl-multi version 0.1

Yang Tse (10 Nov 2007)
- Some versions of winsock2.h have pollfd struct and constants

- Fix compiler warning: integral size mismatch in argument

- Define WIN32 when build target is Win32 API.
  This also defines it for WinCE even though it is a subset of WIN32.

- Fix compiler warning: may be used uninitialized

- Fix comment

Daniel Stenberg (8 Nov 2007)
- spell!

- Bug report #1823487 (http://curl.haxx.se/bug/view.cgi?id=1823487) pointed
  out that SFTP requests didn't use persistent connections. Neither did SCP
  ones.  I gave the SSH code a good beating and now both SCP and SFTP should
  use persistent connections fine. I also did a bunch for indent changes as
  well as a bug fix for the "keyboard interactive" auth.

Yang Tse (8 Nov 2007)
- The only libraries actually needed for sample programs adig and
  ahost are ws2_32.lib and advapi32.lib

- MSVC versions prior to VS2005 do not complain about portable C functions

Daniel Stenberg (7 Nov 2007)
- if () => if()
  while () => while()
  and some other minor re-indentings

Dan Fandrich (7 Nov 2007)
- Improved telnet support by drastically reducing the number of write
  callbacks needed to pass a buffer to the user.  Instead one per byte it
  is now as little as one per segment.

- Add a call to curl_global_cleanup to show how to do a proper shutdown.

Yang Tse (6 Nov 2007)
- Bug report #1824894 (http://curl.haxx.se/bug/view.cgi?id=1824894) pointed
  out a problem in curl.h when building C++ apps with MSVC. To fix it, the
  inclusion of header files in curl.h is moved outside of the C++ extern "C"
  linkage block.

Gisle Vanem (6 Nov 2007)
- Added prototype for _strtoi64().

- Constified from arguments.

Dan Fandrich (5 Nov 2007)
- Sort the directory listing because the server doesn't always do it.

- Added some keywords

Daniel Stenberg (5 Nov 2007)
- tclcurl and a mirror recount when bad ones have been cut out

- Andres Garcia made it build and run on windows

- removed space after if and while before the parenthesis for better source code
  consistency

- I check the code right now and while() and if() are in majority over while ()
  and if () so the rule is from now on => no space before the parenthesis.

- Move connection-oriented variables from the SessionHandle struct to the
  connectdata struct. This will in theory enable us to do persistent connections
  with SCP+SFTP, but currently the state machine always (and wrongly) cleanup
  everything in the 'done' action instead of in 'disconnect'. Also did a bunch
  of indent fixes, if () => if() and a few other source cleanups like added
  comments etc.

- make sure the code deals with failures on the DO_MORE state properly

- avoid setting up a transfer when the state machine failed previously

- Toby Peterson patched a memory problem in the command line tool that
  happened when a user had a home dir as an empty string. curl would then do
  free() on a wrong area.

- minor re-indent

Dan Fandrich (1 Nov 2007)
- Ignore more features that curl-config is not expected to know about

- Fixed curl-config --features to not display libz when it wasn't used
  due to a missing header file.

- Make postcheck failure message more like the others

- Added test case 1014 to compare curl-config --features with curl --version

- Added test case 1013 to check that curl-config --protocols matches the
  protocols listed in curl --version

- Fixed the output of curl-config --protocols which showed SCP and SFTP
  always, except when --without-libssh2 was given

- Detect curl source when valgrind provides an absolute source file name

Gisle Vanem (31 Oct 2007)
- Add support for LDAP urls. Allthough the OpenWatcom
  headers <winlap.h> and <winber.h> defines wrong calling convention.

- Added optional use of zlib (USE_ZLIB=1).
  Use a response-file for the C-compiler.

Daniel Stenberg (31 Oct 2007)
- contributor re-count (we'll break the 600 limit very very soon now) and I made
  all the numericals at the top phrased "shorter" and I cut out the "number of
  releases since the very beginning" since that's just the number curl releases
  + 26 and not a very interesting number anyway.

Dan Fandrich (30 Oct 2007)
- Fixed an OOM problem with file: URLs
  Moved Curl_file_connect into the protocol handler struct.

Daniel Stenberg (30 Oct 2007)
- added new people from the 7.17.1 announcement

Dan Fandrich (29 Oct 2007)
- Added test case 546 to check that subsequent FTP transfers work after a
  failed one using the multi interface

Daniel Stenberg (29 Oct 2007)
- curl-config --features and --protocols show the correct output when built
  with NSS

- Based on one of those bug reports that are intercepted by a distro's bug
  tracker (https://bugzilla.redhat.com/show_bug.cgi?id=316191), I now made
  curl-config --features and --protocols show the correct output when built
  with NSS.

Dan Fandrich (29 Oct 2007)
- Reverted the const change--what was I thinking?

- Made some pointers const

Daniel Stenberg (29 Oct 2007)
- 7.17.2

- start working on 7.17.2

Version 7.17.1 (29 Oct 2007)

Daniel Stenberg (29 Oct 2007)
- 7.17.1!

- correct mirror count

- let 7.17.1 be version-info 4:1:0

Gisle Vanem (28 Oct 2007)
- OpenWatcom cannot use wldap32.lib (wrong calling convention?).
  Added generation of dummy ca-bundle.h. Sorted objects.

Daniel Stenberg (28 Oct 2007)
- http://curl.wetzlmayr.at/ is a new web mirror in Nuremberg, Germany

Dan Fandrich (27 Oct 2007)
- Fixed the 2000-series tests so that the downloaded data is actually checked

- Made the magic testnumber > 10000 support actually work

- Fixed the test case to create only a single test file, which is all the
  test harness supports.

- Fixed a valgrind uninitialized variable error.

- Check that all servers in the <server> section are supported, not just
  the first.

Daniel Stenberg (26 Oct 2007)
- mention --static-libs as added in 7.17.1

Yang Tse (26 Oct 2007)
- typecast to prevent compiler warning

- Detect, log and avoid storing a request with a negative size.

Dan Fandrich (25 Oct 2007)
- Added the --static-libs option to curl-config

- Disable valgrind for this test to avoid the rlimit = soft rlimit problem
  found by Michal Marek.

Daniel Stenberg (25 Oct 2007)
- oops

- Made libcurl built with NSS possible to ignore the peer verification.
  Previously it would fail if the ca bundle wasn't present, even if the code
  ignored the verification results.

Dan Fandrich (25 Oct 2007)
- Added test case 2004.
  Disable valgrind in test case 1004 due to a libtool bug.

Daniel Stenberg (25 Oct 2007)
- prevent compiler warnings about shadowing and one case of unused variable

Patrick Monnerat (25 Oct 2007)
- Allow test server to handle binary POSTs.
  Tests 35, 544 545 added: binary data POSTs.

Dan Fandrich (25 Oct 2007)
- When valgrind is disabled in the test file, don't run it at all (as opposed
  to running it and ignoring its output).

Yang Tse (25 Oct 2007)
- Don't show valgrind log files of other tests

Daniel Stenberg (25 Oct 2007)
- Michal Marek fixed the test script to be able to use valgrind even when the
  lib is built shared with libtool.

- Don't assume there's a sessionhandle around when a connection is disconnected,
  so do the data->reqdata.current_conn assignment when we know there is an easy
  handle existing! Fixes the valgrind report on test 509.

- fix the check

- Fixed a TFTP memory leak. Enabled test 2003 to verify this.

Dan Fandrich (24 Oct 2007)
- Fixed the test TFTP server to support the >10000 test number notation
  Added test cases 2002 and 2003 (the latter disabled for now)

Daniel Stenberg (24 Oct 2007)
- enable 2000 and 2001

- Curl_ftp_disconnect() no longer relies on anything in the reqdata struct. That
  was even mentioned to be bad in a comment! Should make test 2000 and 2001 work
  fine.
  
  Also, freedirs() now take a ftp_conn struct pointer which saves some extra
  unnecessary variable assignments.

- added clarifying comment

Dan Fandrich (24 Oct 2007)
- Added test cases 2000 and 2001 which test multiple protocols using the
  same easy handle
  Fixed the filecheck: make target to work outside the source tree

- Fixed the test FTP server to support the >10000 test number notation

Yang Tse (24 Oct 2007)
- Missing double quotes

- Windows build targets have socklen_t definition in ws2tcpip.h but some
  versions of ws2tcpip.h do not have the definition. It seems that when
  the socklen_t definition is missing from ws2tcpip.h the definition for
  INET_ADDRSTRLEN is also missing, and that when one definition is present
  the other one also is available.

Patrick Monnerat (24 Oct 2007)
- Close log/server.input ASAP to avoid lengthy file lock on cygwin

Daniel Stenberg (24 Oct 2007)
- Vladimir Lazarenko pointed out that we should do some 'mt' magic when
  building with VC8 to get the "manifest" embedded to make fine stand-alone
  binaries. The maketgz and the src/Makefile.vc6 files were adjusted
  accordingly.

- Bug report #1812190 (http://curl.haxx.se/bug/view.cgi?id=1812190) points out
  that libcurl tried to re-use connections a bit too much when using non-SSL
  protocols tunneled over a HTTP proxy.

Yang Tse (23 Oct 2007)
- File is not a protocol that can deal with "persistancy"

- Read callback should return 0 when no more data left

- Fix compiler warning: subscript has type `char'

Gunter Knauf (22 Oct 2007)
- removed dependency on gettimeofday() since we use only 1 sec resolution here.

Daniel Stenberg (22 Oct 2007)
- removed 105, it is now assumed to be fixed!
  
  105 - "invalid free after an http redirect to ftp"

- Michal Marek forwarded the bug report
  https://bugzilla.novell.com/show_bug.cgi?id=332917 about a HTTP redirect to
  FTP that caused memory havoc. His work together with my efforts created two
  fixes:
  
  #1 - FTP::file was moved to struct ftp_conn, because is has to be dealt with
       at connection cleanup, at which time the struct HandleData could be
       used by another connection.
       Also, the unused char *urlpath member is removed from struct FTP.
  
  #2 - provide a Curl_reset_reqproto() function that frees
       data->reqdata.proto.* on connection setup if needed (that is if the
       SessionHandle was used by a different connection).

- Removed 93 and 100, there's no work on these and they're not critical in any
  way:
  
  93 - Digest for IIS fix (subject for removal)
  100 - icc segmentation faults (subject for removal)

- #103 is fixed

- mention Patrick Monnerat's recent work on the postfields problems

- Bug report #1815530 (http://curl.haxx.se/bug/view.cgi?id=1815530) points out
  that specifying a proxy with a trailing slash didn't work (unless it also
  contained a port number).

Gunter Knauf (20 Oct 2007)
- Mohun Biswas sent a patch to fix generated MSVC8 makefiles.

Yang Tse (20 Oct 2007)
- We use this ZERO_NULL to avoid picky compiler warnings,
  when assigning a NULL pointer to a function pointer var.

- Fix compiler warning: conversion from "int" to "unsigned short" may lose significant bits

- Add custom check for WINLDAP libraries.
  
  In CURL_CHECK_LIBS_WINLDAP and CURL_CHECK_LIBS_LDAP, check first with no
  additional library even when the optional list of libraries has been given.

- Fix message shown when detecting icc version

- Avoid shadowing a global declaration

- Renamed a variable to avoid shadowing a global declaration

- Renamed internal function to avoid a variable shadowing it

- Fix compiler warning: feupdateenv is not implemented and will always fail.
  Specifically for linux x86-64 with Intel's icc.

- Sync PLATFORM_AIX_V3 detection and CURL_CC_DEBUG_OPTS()
  icc warning level with libcurl's

Patrick Monnerat (18 Oct 2007)
- Allow CURLOPT_COPYPOSTFIELDS with explicit data size = 0

Dan Fandrich (18 Oct 2007)
- Avoid a NULL pointer dereference in an OOM condition.

Yang Tse (18 Oct 2007)
- Fix compiler warning: conversion from "int" to "unsigned char"
  may lose significant bits

- Fix overflow detection, take four. Avoiding zero size malloc.

- Fix CURL_CHECK_LIBS_LDAP failure when no parameter is given

- actually sync with lib/setup_once.h

- Fix overflow detection, thanks to Patrick Monnerat detecting test
  failure condition: http://curl.haxx.se/mail/lib-2007-10/0152.html

- sync with lib/setup_once.h

- We use this ZERO_NULL to avoid picky compiler warnings,
  when assigning a NULL pointer to a function pointer var.

- Default check for more libraries in CURL_CHECK_LIBS_LDAP,
  and allow parameter specification of libraries to check.

- Fix compiler warning: signed and unsigned type in conditional expression

- Fix compiler warning: comparison between signed and unsigned

- ANSI C compliant overflow check

Steinar H. Gunderson (16 Oct 2007)
- Fix a bug where fallback from AF_INET6 to AF_INET would not work properly together with relative search; if you had a search path of .a.com and .b.com, and foo.a.com would return ARES_ENODATA and foo.b.com would return ARES_ENOTFOUND, the lookup would not properly retry with AF_INET as it forgot the first ARES_ENODATA.

Dan Fandrich (16 Oct 2007)
- Fixed compiler warning re: unused variable `bigsize'

Yang Tse (15 Oct 2007)
- Avoid depending on a header file for the definition of NULL

Dan Fandrich (15 Oct 2007)
- Mention first version with CURLOPT_COPYPOSTFIELDS.
  Don't confuse NUL with NULL.

- Updated minimum libcurl size

Patrick Monnerat (15 Oct 2007)
- Fix dynamic CURLOPT_POSTFIELDS bug: back to static.
  CURLOPT_COPYPOSTFIELDS option added for dynamic.
  Fix some OS400 features.

Dan Fandrich (15 Oct 2007)
- Fix LDAP compile error when LDAP is not available.
  Fixed a typo in the LDAP configure code and made sure NULL is defined
  in a test programs that need it.

Yang Tse (14 Oct 2007)
- Fix custom check for LDAP libraries

- Add custom check for LDAP libraries

- Add custom checks for lber, ldap, ldapssl and ldap_ssl header files

Daniel Stenberg (13 Oct 2007)
- Chris Leighton:
  
  My understanding is that we use "number" for discrete variables and
  "amount" for continuous variables.
  
  So you can say "The amount of flour required depends on..." or, "Last
  night I consumed a large amount of beer!".
  
  And, "That tank contains a large number of fish" or, "Over the week I
  consumed a number of cases of beer."
  
  I think that features are discrete, so the man page would read "...the
  number of features will make your head spin!".

Yang Tse (13 Oct 2007)
- Add check for winldap and winber header files

Dan Fandrich (13 Oct 2007)
- Made a few more functions static with the protocol handler table in place.

Daniel Stenberg (12 Oct 2007)
- another Curl_handler fix, the #ifdefs got a bit mixed up...

Dan Fandrich (12 Oct 2007)
- Fixed a few compile errors and warnings.

Daniel Stenberg (12 Oct 2007)
- added three serious bugs to fix before release, and marked the previous two
  as subject for removal from this list (without any fix)

Patrick Monnerat (12 Oct 2007)
- Added per-protocol callback static tables, replacing callback ptr storage
  in the connectdata structure by a single handler table ptr.

Dan Fandrich (12 Oct 2007)
- Fixed a couple of typos that messed up the tests.

- Added some <keywords> sections and use some key words more consistently.

- Fixed the -l option of runtests.pl
  Added support for skipping tests based on key words.

Yang Tse (10 Oct 2007)
- improve checking for ldap.h and ldap_ssl.h header files

- lber.h needs to be included since ldap.h might not include it

- Add check for lber.h and ldap.h header files

Gunter Knauf (9 Oct 2007)
- added check for MSVC6 standard PSDK and bail out since insufficient for LDAP support with current code.

Yang Tse (9 Oct 2007)
- also log error message string

- logmsg already appends '\n'

Gunter Knauf (9 Oct 2007)
- fix socklen_t for MSVC6 & 7.

- added two more module dependencies for LDAPS.

Dan Fandrich (9 Oct 2007)
- Documented error codes 77-80, and fixed the one for 60.

Daniel Stenberg (9 Oct 2007)
- Add a paragraph about CURLOPT_CUSTOMREQUEST not actually changing libcurl's
  behavior, it only changes the actual request method keyword and this is not
  always what the user/app wants.

- Michal Marek removed the no longer existing return codes from the curl.1
  man page.

Gisle Vanem (8 Oct 2007)
- Added needed 'HAVE_*' defines.

- 'FD_CLOXEC' is meaningless on MSDOS/Watt-32.

Daniel Stenberg (7 Oct 2007)
- Known bug #47, which confused libcurl if doing NTLM auth over a proxy with
  a response that was larger than 16KB is now improved slightly so that now
  the restriction at 16KB is for the headers only and it should be a rare
  situation where the response-headers exceed 16KB. Thus, I consider #47 fixed
  and the header limitation is now known as known bug #48.

Gisle Vanem (6 Oct 2007)
- <ws2tcpip.h> needed for 'socklen_t' typedef.

Daniel Stenberg (5 Oct 2007)
- add url to the wikipedia article for a longer description

- Alexey Pesternikov documented CURLOPT_OPENSOCKETDATA and
  CURLOPT_OPENSOCKETFUNCTION

- Michael Wallner made the CULROPT_COOKIELIST option support a new magic
  string: "FLUSH". Using that will cause libcurl to flush its cookies to the
  CURLOPT_COOKIEJAR file.

- The new file docs/libcurl/ABI describes how we view ABI breakages, soname
  bumps and what the version number's significance to all that is.

- I enabled test 1009 and made the --local-port use a wide range to reduce the
  risk of failures.

- Kim Rinnewitz reported that --local-port didn't work with TFTP transfers.
  This happened because the tftp code always uncondionally did a bind()
  without caring if one already had been done and then it failed. I wrote a
  test case (1009) to verify this, but it is a bit error-prone since it will
  have to pick a fixed local port number and since the tests are run on so
  many different hosts in different situations I add it in disabled state.

Steinar H. Gunderson (4 Oct 2007)
- Removed a piece of redundant code (process_answer already takes care of it).

- Another timeout fix in ares_getnameinfo().

- Send the timeout count in ares_getnameinfo().

- Moved the NULL check for channel upwards in ares_destroy().

- Clarified the comment over ares_cancel.

Yang Tse (4 Oct 2007)
- On error, close "log/server.response"

- If TCP_NODELAY is not defined we can't disable the Nagle algorithm

- Cleanup no longer used macros

- Fix compiler warning: local variable may be used without having been initialized

Patrick Monnerat (3 Oct 2007)
- Upgrade OS400 wrappers and RPG copy file according to latest code updates

Yang Tse (3 Oct 2007)
- Fix issue related with the use of ares_timeout() result.

Daniel Stenberg (3 Oct 2007)
- exported symbols must use lowercase "curl_", and I also fixed two compiler
  warnings, one C99 thing and the bad pointer sent to the callback

- recount contributors after the 7.17.0 release

- people from the 7.17.0 announcement

- "97 - check ip callback", check

- Alexey Pesternikov introduced CURLOPT_OPENSOCKETFUNCTION and
  CURLOPT_OPENSOCKETDATA to set a callback that allows an application to replace
  the socket() call used by libcurl. It basically allows the app to change
  address, protocol or whatever of the socket. (I also did some whitespace
  indent/cleanups in lib/url.c which kind of hides some of these changes, sorry
  for mixing those in.)

- I renamed the CURLE_SSL_PEER_CERTIFICATE error code to
  CURLE_PEER_FAILED_VERIFICATION (standard CURL_NO_OLDIES style), and made this
  return code get used by the previous SSH MD5 fingerprint check in case it
  fails.

- Based on a patch brought by Johnny Luong, libcurl now offers
  CURLOPT_SSH_HOST_PUBLIC_KEY_MD5 and the curl tool --hostpubmd5. They both make
  the SCP or SFTP connection verify the remote host's md5 checksum of the public
  key before doing a connect, to reduce the risk of a man-in-the-middle attack.

- "99 - curl_easy_close()" seems to have gone uninteresting

- 102, check

Yang Tse (2 Oct 2007)
- Fix memory leak under low memory conditions.

- Avoid a segfault when generating a DNS "Transaction ID" in internal
  function init_id_key() under low memory conditions.

- Renamed a couple of global variables to avoid shadowing warnings

- Fix compiler warning

- <winber.h> needed for Windows LDAP client 32 API support

- Linking with wldap32.lib needed for Windows LDAP client 32 API support

- Add ares_llist.c and ares_llist.h to MSCV project file.

Daniel Stenberg (2 Oct 2007)
- known bug #46: chunked-encoded CONNECT responses from a http proxy now works.
  Added test case 1008 to verify. Note that #47 is still there.

- Disable the Nagle algorithm and send back responses in small chunks in an
  attempt to force smaller bits to get read by clients.

- document --post301, based on the phrasing in curl_easy_setopt.3 for
  CURLOPT_POST301 written by Philip Langdale

- CURLOPT_POST301 section, added by Philip Langdale

- Fixed the problem where next_lookup would use 'status' uninitialized. Now
  it gets passed the initial value as an argument.

Yang Tse (2 Oct 2007)
- Avoid inline C99ism, and move c-ares routines for managing doubly-linked lists.

Daniel Stenberg (1 Oct 2007)
- ares_strerror() segfaulted if the input error number was out of the currently
  supported range.

- Prevent ares_strerror() from segfaulting if an invalid error code is passed
  in as argument!

- Added test536 that was accidentally missing. I also wrote up a new makefile
  target called 'filecheck' so that if you run 'make filecheck' in this directory
  it'll check if the local files are also mentioned in the Makefile.am so that
  they are properly included in release archives!

- Alex Fishman reported a curl_easy_escape() problem that was made the
  function do wrong on all input bytes that are >= 0x80 (decimal 128) due to a
  signed / unsigned mistake in the code. I fixed it and added test case 543 to
  verify.

Yang Tse (30 Sep 2007)
- Fix compiler warning

- check availability of <netinet/tcp.h>

- Fix missing right parenthesis

- Fix comparison between signed and unsigned

- improve portability, defining MAXDNAME and MAXCDNAME

Steinar H. Gunderson (30 Sep 2007)
- Fix a memory leak that I recently inadvertedly introduced.

- Use ISDIGIT instead of isdigit; fixes a gcc warning.

Daniel Stenberg (29 Sep 2007)
- Immanuel Gregoire fixed a problem with persistent transfers over SFTP - the
  previous proto struct was kept.

Steinar H. Gunderson (29 Sep 2007)
- Port the TCP socket fix made in ares_fds() to ares_getsock() as well.

- Previously, processing a large batch of timeouts was O(n^2) in the number of
  outstanding queries, and processing a DNS response packet was O(n) in the
  number of outstanding queries. To speed things up in Google, we added a few circular,
  doubly-linked lists of queries that are hash-bucketed based on
  the attributes we care about, so most important operations are now O(1).
  
  It might be that the number of buckets are higher than most people would need,
  but on a quick calculation it should only be 100kB or so even on a 64-bit
  system, so I've let it stay as-is.

Gisle Vanem (29 Sep 2007)
- We should standarise on C comments.

- Fix compiler warning in setsockopt().

Steinar H. Gunderson (29 Sep 2007)
- TCP queries can time out too, not just UDP queries. (Patch from the Google tree.)

- Read and process as many packets as possible in read_udp_packets, to avoid having to run the entire event loop once per packet. (Patch from the Google tree.)

- There are two different places in write_tcp_data() that advance the send_queue; however, they are slightly different and only the first one properly uses a while loop. Consolidate both into a single function that DTTR. (Patch from the Google tree.)

- Reject names that are longer than 255 characters, to avoid problems with strict or buggy DNS server implementations. (Patch from the Google tree)

- In ares_mkquery, make sure we set buflen and buf to reasonable values if there's an error. (Patch from the Google tree)

- Be stricter about what's a valid IP address in fake_hostent. (Patch from the Google tree.)

- Handle the root of the DNS tree correctly in ares_expand_name.

Daniel Stenberg (28 Sep 2007)
- Adapted the c-ares code to the API change c-ares 1.5.0 brings in the
  notifier callback(s).

- rename variable to prevent shadow warning

- today's modifications by Steinar and me

- Bumped version to 1.5.0 for next release and soname bumped to 2 due to ABI
  and API changes in the progress callback (and possibly more coming up from
  Steinar)

Dan Fandrich (28 Sep 2007)
- Renamed a variable to avoid shadowing a global declarations.

Steinar H. Gunderson (28 Sep 2007)
- Unrevert previous 'missing' hunks. They were missing since the patch is still in for review :-)

- Yet more missing hunks... Nggh.

- Always register for TCP events even if there are no outstanding queries, as the other side could always close the connection, which is a valid event which should be responded to.

- Forgot to include a few hunks from ares_process.c earlier. Fixing now.

- Support a few more socket options, and refactor the option setting a bit. (Patch from the Google tree.)

- Make the query callbacks return the number of timeouts that happened during the execution of a query, and update documentation accordingly. (Patch from the Google tree.)

- Three fixes in one commit (sorry): a) Take care of the tcpbuf if it ends while queued for transmission, note broken servers and close them in the main loop, and store TCP socket generation number in order not to send the same query twice over the same socket.

- Don't skip a server if it's the only one. (Bugfix from the Google tree.)

Dan Fandrich (27 Sep 2007)
- Don't strdup an empty string

- Renamed a few variables to avoid shadowing global declarations.

- Removed cut-and-paste cruft leading to fclose() of an unopened file

Daniel Stenberg (27 Sep 2007)
- a name resolve that times out is still a failed name resolve

- wrong, revert the previous "fix" and instead check that the fd_set pointer
  is non-NULL before we FD_CLR

- eek, fix the conditions to return on either problem instead of requiring
  both to occur

Dan Fandrich (27 Sep 2007)
- Renamed a few variables to avoid shadowing global declarations.

- Enabled a few more gcc warnings with --enable-debug.  Renamed a few
  variables to avoid shadowing global declarations.

Yang Tse (27 Sep 2007)
- Fix compiler warning: the address of 'env' will always evaluate as 'true'

Daniel Stenberg (26 Sep 2007)
- we added a curl_easy_setopt() option too

- Philip Langdale provided the new CURLOPT_POST301 option for
  curl_easy_setopt() that alters how libcurl functions when following
  redirects. It makes libcurl obey the RFC2616 when a 301 response is received
  after a non-GET request is made. Default libcurl behaviour is to change
  method to GET in the subsequent request (like it does for response code 302
  - because that's what many/most browsers do), but with this CURLOPT_POST301
  option enabled it will do what the spec says and do the next request using
  the same method again. I.e keep POST after 301.
  
  The curl tool got this option as --post301
  
  Test case 1011 and 1012 were added to verify.

- Max Katsev reported that when doing a libcurl FTP request with
  CURLOPT_NOBODY enabled but not CURLOPT_HEADER, libcurl wouldn't do TYPE
  before it does SIZE which makes it less useful. I walked over the code and
  made it do this properly, and added test case 542 to verify it.

Dan Fandrich (25 Sep 2007)
- Make glibc define the prototype for strcasestr

Daniel Stenberg (25 Sep 2007)
- a new Lua binding and I shortened the wording on several bindings by cutting
  out "written"

Dan Fandrich (25 Sep 2007)
- #ifdef out a few more functions when SSL is disabled.

- Use a native strcasestr() if found.

Daniel Stenberg (24 Sep 2007)
- Immanuel Gregoire fixed KNOWN_BUGS #44: --ftp-method nocwd did not handle
  URLs ending with a slash properly (it should list the contents of that
  directory). Test case 351 brought back and also test 1010 was added.

- Bad use of "its" replaceed with a rephrase. I noticed this flaw thanks to the
  Debian bug report http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=443734

- Steinar H. Gunderson fixed: Correctly clear sockets from the fd_set on in
  several functions (write_tcp_data, read_tcp_data, read_udp_packets) so that
  if it fails and the socket is closed the following code doesn't try to use
  the file descriptor.

- Steinar H. Gunderson modified c-ares to now also do to DNS retries even when
  TCP is used since there are several edge cases where it still makes sense.

- Brad House provided a fix for ares_save_options(): Apparently I overlooked
  something with the ares_save_options() where it would try to do a malloc(0)
  when no options of that type needed to be saved.  On most platforms, this was
  fine because malloc(0) doesn't actually return NULL, but on AIX it does, so
  ares_save_options would return ARES_ENOMEM.

- --proxy-negotiate is added in 7.17.1

- the NSS patch has been committed

- Available command line options: 119

- Mark Davies fixed Negotiate authentication over proxy, and also introduced
  the --proxy-negotiate command line option to allow a user to explicitly
  select it.

Dan Fandrich (20 Sep 2007)
- Added variable substitution to the <verify><file> section.
  Made a few more tests work remotely.

Daniel Stenberg (20 Sep 2007)
- reformatted to be similar to the FAQ to make it look nicer on the site:
  http://curl.haxx.se/docs/contribute.html

- Achint Mehta pointed out this dead link

- the winsock stuff is made by curl_global_init

- fix bad link

- Immanuel Gregoire is the man

Dan Fandrich (20 Sep 2007)
- Fixed typo in error message.

Daniel Stenberg (18 Sep 2007)
- Rob Crittenden provided an NSS update with the following highlights:
  
  o It looks for the NSS database first in the environment variable SSL_DIR,
    then in /etc/pki/nssdb, then it initializes with no database if neither of
    those exist.
  
  o If the NSS PKCS#11 libnspsem.so driver is available then PEM files may be
    loaded, including the ca-bundle. If it is not available then only
    certificates already in the NSS database are used.
  
  o Tries to detect whether a file or nickname is being passed in so the right
    thing is done
  
  o Added a bit of code to make the output more like the OpenSSL module,
    including displaying the certificate information when connecting in
    verbose mode
  
  o Improved handling of certificate errors (expired, untrusted, etc)
  
  The libnsspem.so PKCS#11 module is currently only available in Fedora
  8/rawhide. Work will be done soon to upstream it. The NSS module will work
  with or without it, all that changes is the source of the certificates and
  keys.

- mention the prefered source code line length to be less than 80 columns

- Immanuel pointed out that public key SSH auth failed if no public/private
  key was specified and there was no HOME environment variable, and then it
  didn't continue to try the other auth methods. Now it will instead try to
  get the files id_dsa.pub and id_dsa from the current directory if none of
  the two conditions were met.

Dan Fandrich (18 Sep 2007)
- Use double quotes in command lines for consistency.

Gunter Knauf (18 Sep 2007)
- added a define for Win32 to detect already defined ssize_t.

Dan Fandrich (18 Sep 2007)
- IPv6 is a required feature for these two tests, even if it's not obvious.

- Fixed the required server entry

- Changed some FTP tests to validate the format of the PORT and EPRT commands
  sent by curl, if not the addresses themselves.

- Added %CLIENTIP and %CLIENT6IP data file substitution variables.
  Added hooks to the test suite to make it possible to test a curl running
  on a remote host.

- Allow setting the IP address on which to listen for connections.

Daniel Stenberg (17 Sep 2007)
- Gnter's ldap fixes

Dan Fandrich (17 Sep 2007)
- Make the ftp server connect to the address given by curl in the PORT/EPRT
  instead of hard-coding it to 127.0.0.1

- Made the directory postprocessor more forgiving of input directory format

Daniel Stenberg (15 Sep 2007)
- three done, seven to go

- Michal Marek made libcurl automatically append ";type=<a|i>" when using HTTP
  proxies for FTP urls.

- offer a friendlier single-line command

Gunter Knauf (15 Sep 2007)
- fixed ldap support for winldap.

- fixed VC6 makefiles for new ldap linkage.

Daniel Stenberg (15 Sep 2007)
- I want these CONNECT problems fixed too

- 7.17.1 planned release in November 2007, and a bunch of things to deal with

Dan Fandrich (14 Sep 2007)
- Replaced 127.0.0.1 with %HOSTIP where possible

- Added LDAPS, SCP and SFTP to curl-config --protocols. Removed and
  fixed some AC_SUBST configure entries.

- Added LDAPS, SCP and SFTP to curl-config --protocols.
  Removed and fixed some AC_SUBST configure entries.

- Compile samples with -DCURL_NO_OLDIES

Daniel Stenberg (13 Sep 2007)
- 7.17.1-CVS is now the dev version

- start over on 7.17.1

Dan Fandrich (13 Sep 2007)
- Remove remaining traces of ftp3rdparty.c and mention htmltidy.c

Version 7.17.0 (13 Sep 2007)

Daniel Stenberg (13 Sep 2007)
- Version 7.17.0 (13 September 2007)

- added some further stuff from the feature-requests tracker, and a bunch of URLs
  to the specific tracker entries

Dan Fandrich (12 Sep 2007)
- TFTP error 0 is no longer treated as success

Daniel Stenberg (12 Sep 2007)
- Extracting the CURLINFO_PRIVATE pointer makes no point since nothing set
  it. This caused a segfault in some fprintf() implementations. Like on Solaris.

- rephrased to mention ftp

- curl.digimirror.nl is a new mirror in Amsterdam, the Netherlands

- Daniel S (12 September 2007)
  - Bug report #1792649 (http://curl.haxx.se/bug/view.cgi?id=1792649) pointed
    out a problem with doing an empty upload over FTP on a re-used connection.
    I added test case 541 to reproduce it and to verify the fix.
  
  - I noticed while writing test 541 that the FTP code wrongly did a CWD on the
    second transfer as it didn't store and remember the "" path from the
    previous transfer so it would instead CWD to the entry path as stored. This
    worked, but did a superfluous command. Thus, test case 541 now also verifies
    this fix.

- - I noticed while writing test 541 that the FTP code wrongly did a CWD on the
    second transfer as it didn't store and remember the "" path from the
    previous transfer so it would instead CWD to the entry path as stored. This
    worked, but did a superfluous command. Thus, test case 541 now also verifies
    this fix.

- - Bug report #1792649 (http://curl.haxx.se/bug/view.cgi?id=1792649) pointed
    out a problem with doing an empty upload over FTP on a re-used connection.
    I added test case 541 to reproduce it and to verify the fix.

- A brand new binding for SP-Forth was written

Dan Fandrich (7 Sep 2007)
- TFTP now reports the "not defined" TFTP error code 0 as an error,
  not success.

- Added test case 1007 to test permission problem when uploading with TFTP
  (to validate bug #1790403).

Daniel Stenberg (6 Sep 2007)
- http://curl.cheap.co.il is a new mirror in Tel-Aviv, Israel

- two new CONNECT response problems that have appeared

Dan Fandrich (5 Sep 2007)
- Minix doesn't support getsockopt on UDP sockets or send/recv on TCP
  sockets.

Daniel Stenberg (5 Sep 2007)
- Curl_GetFTPResponse() now checks and properly deals with the fact that the
  underlying ftp_readresp() function has a separate "cache" where there might
  in fact be leftover data...

Dan Fandrich (5 Sep 2007)
- Minix doesn't support getsockopt on UDP sockets or send/recv on TCP
  sockets.

- Minor updates

Daniel Stenberg (3 Sep 2007)
- I can't spell

- curlpp 0.7.1 was relased

Gunter Knauf (3 Sep 2007)
- added some comments for MingW32 builds.

Dan Fandrich (1 Sep 2007)
- bash is not required when compiling under Minix

- Renamed the CURLE_FTP_SSL_FAILED error code to CURLE_USE_SSL_FAILED.
  Renamed the curl_ftpssl enum to curl_usessl and its enumerated constants,
  creating macros for backward compatibility.

- Made some of the error strings returned by the *strerror functions more
  generic, and more consistent with each other.

- Fixed an invalid returned error code added in my last submission.

- Added more accurate error code returns from SFTP operations.  Added test
  case 615 to test an SFTP upload failure.

- Renamed several libcurl error codes and options to make them more general
  and allow reuse by multiple protocols. Several unused error codes were
  removed.  In all cases, macros were added to preserve source (and binary)
  compatibility with the old names.  These macros are subject to removal at
  a future date, but probably not before 2009.  An application can be
  tested to see if it is using any obsolete code by compiling it with the
  CURL_NO_OLDIES macro defined.
  
  Documented some newer error codes in libcurl-error(3)

Gunter Knauf (30 Aug 2007)
- added --enable-ldaps switch;
  renamed LDAP(S) messages from 'yes' to 'enabled'.

Dan Fandrich (30 Aug 2007)
- Fixed a few compiler warnings. Try to do a slightly better job of
  cleaning up after an OOM condition in curl_multi_add_handle

Daniel Stenberg (30 Aug 2007)
- Made Curl_GetFTPResponse() use lots less code and instead use the proper
  low-level ftp_readresp() function. Hopefully adressing bug #1779054.

Dan Fandrich (29 Aug 2007)
- Added lots of consts

- Mention that 'make test' does more than just run all the tests (suggested
  by Kris/tinker105 in bug #1779054) and mention the torture tests.

- Fixed some minor type mismatches and missing consts mainly found by splint.

- Fixed some minor mismatched types found by splint.

Gunter Knauf (25 Aug 2007)
- bail out with error if someone tries to use another cert than PEM with OpenLDAP.

- only link with -lwldap32 if we dont use other LDAP SDKs.

- added defines to build with OpenLDAP.

Patrick Monnerat (24 Aug 2007)
- Adding DOCS file in OS400 installation library with license and various other documentation text files.
  Setting character set of OS400 installed source components

Daniel Stenberg (24 Aug 2007)
- Bug report #1779054 (http://curl.haxx.se/bug/view.cgi?id=1779054) pointed
  out that libcurl didn't deal with large responses from server commands, when
  the single response was consisting of multiple lines but of a total size of
  16KB or more. Dan Fandrich improved the ftp test script and provided test
  case 1006 to repeat the problem, and I fixed the code to make sure this new
  test case runs fine.

Patrick Monnerat (24 Aug 2007)
- Remove leading space in curl_version_info ss_version field.

Dan Fandrich (23 Aug 2007)
- Added test case 1005 to test excessively-long replies spread out over
  multiple lines (similar to test case 1003).

- Allow ftp server alternate replies to contain backslash-escaped control
  characters.

Patrick Monnerat (23 Aug 2007)
- Make ldap.h, gssapi.h and qsossl.h inclusions conditional.

Dan Fandrich (23 Aug 2007)
- Need even more time to wait for an accept.

- Added test1004 to validate a previous fix for a memory leak when an
  empty proxy server is selected.

- Mention OS/400 and TPF

Daniel Stenberg (23 Aug 2007)
- ported to OS/400

- added the two new os400 files

- Add the files in the OS400 dir to the dist. I didn't add it as a new subdir
  just because if I do that automake does funny things automatically with the
  makefile.sh file in that directory and thus doing it this way was a quick
  work-around that annoyance!

- --libcurl does not support -F

Patrick Monnerat (23 Aug 2007)
- Porting library to OS/400

Gunter Knauf (23 Aug 2007)
- added support for CA cert verification;
  default now to verify cert unless data->set.ssl.verifypeer is 0.

Daniel Stenberg (22 Aug 2007)
- Bug report #1779751 (http://curl.haxx.se/bug/view.cgi?id=1779751) pointed
  out that doing first a file:// upload and then an FTP upload crashed libcurl
  or at best caused furious valgrind complaints. Fixed now by making sure we
  free and clear the file-specific struct properly when done with it.

Gisle Vanem (22 Aug 2007)
- Reversed the 'HAVE_LDAP_URL_PARSE' ifdef statement.

Daniel Stenberg (22 Aug 2007)
- Bug report #1779054 (http://curl.haxx.se/bug/view.cgi?id=1779054) pointed
  out that libcurl didn't deal with very long (>16K) FTP server response lines
  properly. Starting now, libcurl will chop them off (thus the client app will
  not get the full line) but survive and deal with them fine otherwise. Test
  case 1003 was added to verify this.

- added a size > buffer size check to make it easier to track this in the
  future

- Upped the buffer size to 17000+ bytes to prepare for the upcoming test 1003
  that verfies ridiculously long server response lines. Also changed sprintf
  to snprintf in a few places.

- 1) the talk about strings used by libcurl doesn't apply to libcurl >= 7.17.0
  2) added nroff header

Gunter Knauf (22 Aug 2007)
- for now comment the tls_start section...

- sync libssh2 paths with comments.

- added targets to create the files missing in CVS which makes calling buildconf.bat obsolete;
  removed obsolete wsock32 link lib.

- fixed wrong CLAGS define.

- fixed warning with unused var;
  removed now obsolete defines since we include now ldap headers which define these.

Daniel Stenberg (20 Aug 2007)
- Based on a patch by Christian Vogt, the FTP code now sets the upcoming
  download transfer size much earlier to be possible to get read with
  CURLINFO_CONTENT_LENGTH_DOWNLOAD as soon as possible.

Gunter Knauf (20 Aug 2007)
- converted tabs to spaces.

- removed trailing spaces.

Dan Fandrich (20 Aug 2007)
- Increase timeout for accept for improved reliability on loaded servers.

Gunter Knauf (20 Aug 2007)
- compile with ldaps by default since it seems to work fine so far.

- fixed ldaps section for OpenLDAP. Still not working, but at least it compiles now, and should serve as base to get it finally working. Also seems that the ifdefs can be arranged some better because the Solaris and Netscape/iPlanet/Mozilla LDAP SDKs seem to be closer to the Novell section than the OpenLDAP one.

- added some comments about the paths and build options;
  added define to build with ldaps support;
  enabled build with the Novell LDAP SDK.

- dont set CURL_LDAP_HYBRID for MingW32 configure builds.

- added define for ldap_ssl.h.

- ignore errors of the RM command; seems that the del command fails on W2K when the file to delete isnt found while on XP it only prints the warning but make continues....

- added some comments in the makefiles about build options.

Daniel Stenberg (17 Aug 2007)
- ignore all the binaries and the .deps and .libs

- - Robson Braga Araujo filed bug report #1776232
    (http://curl.haxx.se/bug/view.cgi?id=1776232) about libcurl calling
    Curl_client_write(), passing on a const string that the caller may not
    modify and yet it does (on some platforms).

- remove stupid comment since there's no content in this test case

- Robson Braga Araujo filed bug report #1776235
  (http://curl.haxx.se/bug/view.cgi?id=1776235) about ftp requests with NOBODY
  on a directory would do a "SIZE (null)" request. This is now fixed and test
  case 1000 was added to verify.

-  NEXT soname bump
  
   * #undef CURL_FTP_HTTPSTYLE_HEAD in lib/ftp.c to remove the HTTP-style headers
     from being output in NOBODY requests over ftp

- some keywords for future stats/coverage checks

- Moved the 5320 and 5322 into the 1000-series instead which is a documented
  range. They are about FTP but the 100-199 range is full.

- Song Ma provided a patch that cures a problem libcurl has when doing resume
  HTTP PUT using Digest authentication. Test case 5320 and 5322 were also
  added to verify the functionality.

Gunter Knauf (16 Aug 2007)
- fixed warning about uninitialized.

- added basic ldaps support; for now its ifdef'd with HAVE_LDAP_SSL unless we know its fully working, and available with all LDAP SDKs.
  Win32 requires to have the trusted CA in local keystore - I've not found yet a way to disable the cert check.

- added define PORT_LDAPS.

Patrick Monnerat (15 Aug 2007)
- Fix a potential buffer overflow bug in lib/version.c

Gunter Knauf (15 Aug 2007)
- added ldap_msgfree() to fix memory leak.

- added a dependency for libcares if build with ares support;
  other minor makefile tweaks.

Dan Fandrich (14 Aug 2007)
- LDAP is no longer excluded on Minix.

Gunter Knauf (14 Aug 2007)
- updated NetWare docu about recent LDAP changes.

- only include LDAP headers if we build with LDAP support.

- added  -lwldap32 to link libs.

- changed autoload dependent LDAP NLM.

- trial to enable LDAP support again with patched Novell headers.

Daniel Stenberg (14 Aug 2007)
- Andrew Wansink provided an NTLM bugfix: in the case the server sets the flag
  NTLMFLAG_NEGOTIATE_UNICODE, we need to filter it off because libcurl doesn't
  unicode encode the strings it packs into the NTLM authenticate packet.

- the curl_multi_handle_control() idea

Dan Fandrich (13 Aug 2007)
- Removed redundant dependency lines

- Removed unused variable.

Patrick Monnerat (13 Aug 2007)
- Simplify and rename internal structure to avoid potential name clash with LDAP header file.

Daniel Stenberg (12 Aug 2007)
- Fixed the LDAP_DEPRECATED #define as suggested by Daniel Johnson, and
  indented some of the code to curl-style

- minor change in language for the --libcurl source header

Gunter Knauf (12 Aug 2007)
- disable LDAP since we can no longer compile due to header incompatiblities.

Daniel Stenberg (11 Aug 2007)
- Allen Pulsifer provided a patch that makes libcurl set the expected download
  size earlier when doing HTTP downloads, so that applications and the
  progress meter etc know get the info earlier in the flow than before.

- Patrick Monnerat modified the LDAP code and approach in curl. Starting now,
  the configure script checks for openldap and friends and we link with those
  libs just like we link all other third party libraries, and we no longer
  dlopen() those libraries. Our private header file lib/ldap.h was renamed to
  lib/curl_ldap.h due to this. I set a tag in CVS (curl-7_17_0-preldapfix)
  just before this commit, just in case.

Version 7.17.0 (9 Aug 2007)

Gunter Knauf (9 Aug 2007)
- fixed warning with gcc 4.x (hopefully); dynamincally imported UseAccurateCaseForPaths() for CLIB port to be stonetime-compatible (NW 3.x).

- fixed a warning which MingW gcc 4.2.1.

Dan Fandrich (9 Aug 2007)
- There's no need to ignore the User-Agent for this test.

Gunter Knauf (8 Aug 2007)
- moved ugly CLIB define to nwos.c.

Dan Fandrich (8 Aug 2007)
- Song Ma noted a zlib memory leak in the illegal compressed header
  countermeasures code path.

Gunter Knauf (8 Aug 2007)
- removed asm rules since we have no asm in the sources, and this produced 2 warnings.

- blocked ssize_t define for MingW32.

Patrick Monnerat (8 Aug 2007)
- Fix getsockname argument type
  Improve "universal" alignment type in struct memdebug

Daniel Stenberg (7 Aug 2007)
- Usage of the BCURLOPT_PROGRESSFUNCTION callback is not recommended when using
  the multi interface, but having the comment in here caused more questions than
  we fixed problems so I remove it now. It still works fine.

Dan Fandrich (7 Aug 2007)
- Fixed torture test for test 509

Gunter Knauf (7 Aug 2007)
- moved HAVE_LONGLONG from makefiles to config-win32.h.

Daniel Stenberg (7 Aug 2007)
- add URL to more "generated public config.h" details

Patrick Monnerat (7 Aug 2007)
- Some #if --> #ifdef
  undef standard *printf before (re)defining them

Dan Fandrich (7 Aug 2007)
- Fixed some icc compiler warnings.

Gunter Knauf (6 Aug 2007)
- Peteris Krumins pointed out that MingW32 doesnt provide a batch file to set the path to the bin folder.

Daniel Stenberg (6 Aug 2007)
- ontributors from the 7.16.4 release notes and a removed duplicate

- removed the rsaglue hint since it doesn't apply to modern OpenSSL, and added
  some brief hints about gssapi and libssh2

- we now support GSS/Kerberos 5 for ftp file transfers!

- Patrick Monnerat updated the _FORM_DEBUG-enabled code, and I updated comments
  based on his comments/suggestions.

Gunter Knauf (4 Aug 2007)
- changed to use libssh2 0.16;
  fixed link order in case libssh2 is build with zlib.

Daniel Stenberg (4 Aug 2007)
- another mirror

- Patrick Monnerat fixed curl_easy_escape() and curlx_strtoll() to work on
  non-ASCII systems.

Dan Fandrich (4 Aug 2007)
- Fixed a couple of compiler warnings.

- Refactored CreateConnection() somewhat to reduce its length by splitting
  it into a few new functions.
  Fixed a few leaks in out of memory conditions, including for test case 231.

Gunter Knauf (3 Aug 2007)
- fixed small fix issue I introduced with my previous commit.

- some more makefile fixes/changes.

James Housley (3 Aug 2007)
- Start adding some expanded error conversion of libssh2 errors.

- The previous commit to force the use of libssh2-0.16 by removing
  LIBSSH2_APINO

Gunter Knauf (3 Aug 2007)
- changed 'rm -f' to 'del /f' so it works without GnuUtils as Peteris Krumins pointed out; changed to use latest external libs.

- Peteris Krumins pointed out some MingW32 related build issues.

- Peteris Krumins pointed out that the standard MingW32 build depends on zlib; removed that, and added another option for zlib build, and renamed all other targets to reflect zlib dependency.

Daniel Stenberg (3 Aug 2007)
- SCP and SFTP support now requires libssh2 0.16 or later

- remove left-over partly support for libssh2 0.14

- The SSH code now only works with libssh2 0.16 or later. Thus we must not
  release the next curl until there is a libssh2 0.16 released.

- Scott Cantor filed bug report #1766320
  (http://curl.haxx.se/bug/view.cgi?id=1766320) pointing out that the libcurl
  code accessed two curl_easy_setopt() options (CURLOPT_DNS_CACHE_TIMEOUT and
  CURLOPT_DNS_USE_GLOBAL_CACHE) as ints even though they're documented to be
  passed in as longs, and that makes a difference on 64 bit architectures.

Dan Fandrich (2 Aug 2007)
- Fixed a compiler warning.

Daniel Stenberg (2 Aug 2007)
- Patrick Monnerat's cleanup fix after my alloc-strings commit

- Dmitriy Sergeyev reported a regression: resumed file:// transfers broke
  after 7.16.2. This is much due to the different treatment file:// gets
  internally, but now I added test 231 to make it less likely to happen again
  without us noticing!

- clarify that setting POSTFIELDS to NULL or "" is not enough to make a zero byte
  POST

- argh, Greg Morse pointed out that the NTLM POST fix only worked if VERBOSE
  was set, this should make it work for all cases!

- Patrick Monnerat and I modified libcurl so that now it *copies* all strings
  passed to it with curl_easy_setopt()! Previously it has always just refered
  to the data, forcing the user to keep the data around until libcurl is done
  with it. That is now history and libcurl will instead clone the given
  strings and keep private copies.

- Greg Morse reported a problem with POSTing using ANYAUTH to a server requiring
  NTLM, and he provided test code and a test server and we worked out a bug
  fix. We failed to count sent body data at times, which then caused internal
  confusions when libcurl tried to send the rest of the data in order to
  maintain the same connection alive.
  
  (and then I did some minor reformatting of code in lib/http.c)

- AIX 4 and 5 get to use non-blocking sockets

- Peter O'Gorman pointed out (and fixed) that the non-blocking check in
  configure made libcurl use blocking sockets on AIX 4 and 5, while that
  wasn't the intention.

- users should use the CURLMOPT_TIMERFUNCTION rather than curl_multi_timeout
  when using the socket API

- less blocking these days

- updated based on suggestion from Jeff Pohlmeyer

- Patrick Monnerat restored qssl successful compilation and loading

- give credit to Greg Zavertnik

Dan Fandrich (30 Jul 2007)
- Properly set USE_SSL on OS/400

- Fixed compiler warning on non-SSL builds

Daniel Stenberg (29 Jul 2007)
- Added "4.15 FTPS doesn't work" and updated a few other sections slightly

- Bug report #1759542 (http://curl.haxx.se/bug/view.cgi?id=1759542). A bad use
  of a socket after it has been closed, when the FTP-SSL data connection is taken
  down.

- added missing part for the qsossl support

- added initial pkg-config file (attempt)

Dan Fandrich (24 Jul 2007)
- Removed unused variable.

Daniel Stenberg (23 Jul 2007)
- #if that should be #ifdef

- Implemented the parts of Patrick Monnerat's OS/400 patch that introduces
  support for the OS/400 Secure Sockets Layer library

Dan Fandrich (23 Jul 2007)
- Implemented only the parts of Patrick Monnerat's OS/400 patch that renamed
  some few internal identifiers to avoid conflicts, which could be useful on
  other platforms.

- Log the "<CMD> wasn't handled" error normally since it is now expected
  to occur in a couple of tests.

Gunter Knauf (23 Jul 2007)
- added 2 system libs necessary for linking OpenSSL 0.9.8e statically.

Daniel Stenberg (22 Jul 2007)
- fix mess added in my previous commit

- HTTP Digest auth fix on a re-used connection

- Added test case 354 that makes a simple FTP retrieval without password, which
  verifies the bug fix in #1757328.

- test and verify curl -I on a single FTP file somewhat more than before

- To allow more flexibility in FTP test cases, I've removed the enforced states
  from the test server code as they served no real purpose. The test server is
  here to serve for the test cases, not to attempt to function as a real server!

- news

Dan Fandrich (21 Jul 2007)
- Make the pointers of a few static const arrays const, too, for safety.

Gunter Knauf (20 Jul 2007)
- added curl include for debug builds.

Dan Fandrich (20 Jul 2007)
- Document pwd as an sftp quote command for curl(1), and show it as
  lower case for consistency since sftp commands are case insensitive.

Gunter Knauf (20 Jul 2007)
- added lf to Win32  getpass_r() so that next output appears in new line.

Daniel Stenberg (20 Jul 2007)
- PWD for SFTP is fixed

- the "libssh2 owns the memory don't free it" case

- Ralf S. Engelschall filed bug report #1757328
  (http://curl.haxx.se/bug/view.cgi?id=1757328) and submitted a patch. It turns
  out we broke login to FTP servers that don't require (nor understand) PASS
  after the USER command

James Housley (20 Jul 2007)
- Fix a loop with PWD

Dan Fandrich (20 Jul 2007)
- Made some const arrays static to avoid unnecessary stack usage.

Daniel Stenberg (19 Jul 2007)
- minor addition, re-count of the number of lines of code

- libssh2 fix

Dan Fandrich (19 Jul 2007)
- Revert the 512 change since newer versions of OpenSSH don't support DSA
  keys that small.

James Housley (18 Jul 2007)
- SFTP also supports PWD

Dan Fandrich (18 Jul 2007)
- Added the list of sftp quote commands.

James Housley (18 Jul 2007)
- As has been pointed out, err_msg should not be freed here.  The actual
  issue is in libssh2 and not freeing a dynamic error message during cleanup.

Dan Fandrich (18 Jul 2007)
- Use 512 bit keys to reduce the time taken to generate them.  This shouldn't
  really reduce security since in the common case of a daily automated build
  the keys are only used for a single test run lasting a few minutes before
  being deleted.

- Fixed test cases 613 and 614 by improving the log postprocessor to handle
  a new directory listing format that newer libssh2's can provide.  This
  is probably NOT sufficient to handle all directory listing formats that
  server's can provide and should be revisited.

Daniel Stenberg (17 Jul 2007)
- Jofell Gallardo posted a libcurl log using FTP that exposed a bug which made
  a control connection that was deemed "dead" to yet be re-used in a following
  request. We must make sure the connection gets closed on this situation.

- make it do all three requests on the same connection

Dan Fandrich (16 Jul 2007)
- Fixed some more simple compile warnings in the examples.

Daniel Stenberg (16 Jul 2007)
- 45. libcurl built to support ipv6 uses getaddrinfo() to resolve host names.
    getaddrinfo() sorts the response list which effectively kills how libcurl
    deals with round-robin DNS entries. All details:
      http://curl.haxx.se/mail/lib-2007-07/0168.html
    initial suggested function to use for randomizing the response:
      http://curl.haxx.se/mail/lib-2007-07/0178.html

- convert test case 540 to use a custom Host: header as well

- let's just export the whole argc + argv pair globally so that each test tool
  can take advantage of it however they see fit!

Gunter Knauf (15 Jul 2007)
- make users use the latest OpenSSL and Zlib libraries;
  added hint to compile with SSPI with MSVC6 without PSDK.

Daniel Stenberg (14 Jul 2007)
- added another SEE ALSO

- Added test case 540 and lib540.c, the 'proxyauth.c' test app posted by Shmulik
  Regev on the libcurl mailing list on 10 Jul 2007, converted to a test case.

- add support for arg3 as the third argument...

- add some better logging when HTTP server start fails, and make the failure
  really hard if the test server can't be resolved (like for ::1 ipv6)

Gunter Knauf (14 Jul 2007)
- for now unless we do better fixed LIBSSH2_APINO compares to use long constants.

Daniel Stenberg (14 Jul 2007)
- Brad House's fix to hish a win32 compiler warning

- added Vlad's entire description of his valgrind fix

- Vlad Dinulescu fixed two outstanding valgrind reports

Dan Fandrich (13 Jul 2007)
- The examples don't need access to curl internal source files.

Daniel Stenberg (13 Jul 2007)
- Colin Hogben filed bug report #1750274
  (http://curl.haxx.se/bug/view.cgi?id=1750274) and submitted a patch for the
  case where libcurl did a connect attempt to a non-listening port and didn't
  provide a human readable error string back.

- Daniel Cater added the mentioning of CURL_DISABLE_TFTP

- Daniel Cater: libcurl-errors needs updating to reflect a couple of deprecated
  error codes

- Daniel Cater made libcurl build with CURL_NO_OLDIES defined (which doesn't
  define the symbols for backwards source compatibility)

- Daniel Cater made the vc8-generating line use double-quotes to run fine on
  windows

- Made the krb5 code build with Heimdal's GSSAPI lib

Dan Fandrich (12 Jul 2007)
- Fixed some compile warnings and errors and improved portability in the
  examples.
  Removed ftp3rdparty.c since libcurl doesn't support 3rd party FTP transfers
  any longer.

Daniel Stenberg (12 Jul 2007)
- make it compile fine

- fix include path

Dan Fandrich (12 Jul 2007)
- Compile most of the example apps in docs/examples when doing a 'make check'.

Daniel Stenberg (12 Jul 2007)
- Shmulik Regev found an (albeit rare) case where the proxy CONNECT operation
  could in fact get stuck in an endless loop.

- start the retry delay at 10 ms, double it for every failed attempt which makes
  it 10 seconds delay after 11 attempts

Gunter Knauf (12 Jul 2007)
- the timeout was probably too short with max = 1 sec, so lets test with 5 sec.

- added nwos.c so that it gets distributed with releases and tarballs.

- added time loop to sockfilt.c in order to wait for SO_REUSEADDR;
  added go_sleep() to util.c.

Marty Kuhrt (11 Jul 2007)
- Updated to match curl.h

Daniel Stenberg (11 Jul 2007)
- Made CURLOPT_SSL_VERIFYHOST set to 1 acts as described in the documentation:
  fail to connect if there is no Common Name field found in the remote cert.
  We should deprecate the support for this set to 1 anyway soon, since the
  feature is pointless and most likely never really used by anyone.

Gunter Knauf (11 Jul 2007)
- removed now obsolete NETDB_DEFINE_CONTEXT macro calls.

- updated makefile to compile nwos.c.

- added NetWare-own file to provide some init functions (for now only CLIB);
  added call to netware_init() in curl_global_init() to make sure it gets called before any library functions get used.

Dan Fandrich (11 Jul 2007)
- Added the first libcurl version to which the SSH options were added.

Gunter Knauf (11 Jul 2007)
- added netdb.h for NetWare CLIB since gethostname() is defined there.

- fixed endif comment.

- fixed endif comment.

Dan Fandrich (10 Jul 2007)
- Added a code coverage section using gcc and gcov.

Daniel Stenberg (10 Jul 2007)
- Shmulik Regev:
  The tiny patch below fixes a bug (that I introduced :) which happens
  when negotiating authentication with a proxy (probably with web
  servers as well) that uses chunked transfer encoding for the 407 error
  pages. In this case the ''ignorebody'' flag was ignored (no pun
  intended).

- Giancarlo Formicuccia reported and fixed a problem with a closed connection
  to a proxy during CONNECT auth negotiation.

Dan Fandrich (10 Jul 2007)
- Force the time zone to GMT in the cookie tests in case the user is
  using one of the so-called 'right' time zones that take into account
  leap seconds, which causes the tests to fail (as reported by
  Daniel Black in bug report #1745964).

James Housley (10 Jul 2007)
- The previous commits changed the error code

- * Finish moving sftp:// into a state machine so it won't block in multi mode
  * Move scp:// into a state machine so it won't block in multi mode
  * When available use the full directory entry from the sftp:// server

Dan Fandrich (10 Jul 2007)
- Fixed a curl memory leak reported by Song Ma with a modified version
  of the patch he suggested.  Added his test case as test289 to verify.

Daniel Stenberg (10 Jul 2007)
- start working on 7.16.5...

Version 7.16.4 (10 Jul 2007)

Daniel Stenberg (10 Jul 2007)
- 7.16.4 preps

Gunter Knauf (9 Jul 2007)
- added better CodeWarrior detection (forgot to add with previos version).

- added better CodeWarrior detection;
  added defines for setlocale().

- added better CodeWarrior detection;
  moved autounload flag so that its used for both lib architectures.

- added better CodeWarrior detection.

- removed some obsolete include paths and defines.

Daniel Stenberg (6 Jul 2007)
- Thomas J. Moore made it build with less warnings

- Gavrie Philipson's change, updated numbers

- add note about windows and dlls with CURLOPT_WRITEDATA

Gunter Knauf (6 Jul 2007)
- fixed NetWare CLIB implementation of getpass_r()

James Housley (5 Jul 2007)
- Gavrie Philipson provided a patch that will use a more specific error
  message for an scp:// upload failure.  If libssh2 has his matching
  patch, then the error message return by the server will be used instead
  of a more generic error.

Dan Fandrich (5 Jul 2007)
- Add -a when running torture tests now that it's supported.

James Housley (4 Jul 2007)
- Fix spelling error in error message

Gunter Knauf (4 Jul 2007)
- add test for gettimeofday() so that HAVE_GETTIMEOFDAY gets defined.

- enabled ares build.

- although the check for HAVE_STRUCT_TIMEVAL solved the redefine it is incorrect; lets see if a check for HAVE_GETTIMEOFDAY also works; if gettimeofday() is present then we can assume we have the timezone struct too.

- added check for sys/param.h.

- trial to catch problem with Daniels cross-mingw ares builds.

- added NetWare CLIB-own header to solve gcc warnings.

- few minor changes to make ares compile for NetWare CLIB architecture.

- fixed rule to build libcares when needed.

- changed to build for CLIB / LIBC.

- added libcares to static build if ares enabled.

Daniel Stenberg (2 Jul 2007)
- contributors from the 7.16.3 release notes

Gunter Knauf (2 Jul 2007)
- sync'd with lib makefile changes: use var for awk; fixed RECV* / SEND* defines; debug var can be overwritten; added better compiler path handling.

- some more makefile tweaks and hacks to deal with both lib architectures.

James Housley (2 Jul 2007)
- Fix problem with the indenting noticed by Pavel

Gunter Knauf (1 Jul 2007)
- ignore make error when trying to copy curl.pdf which isnt in CVS.

Daniel Stenberg (1 Jul 2007)
- mention the old name

- Thomas J. Moore provided a patch that introduces Kerberos5 support in
  libcurl. This also makes the options change name to --krb (from --krb4) and
  CURLOPT_KRBLEVEL (from CURLOPT_KRB4LEVEL) but the old names are still

- Song Ma helped me verify and extend a fix for doing FTP over a SOCKS4/5 proxy

Gunter Knauf (1 Jul 2007)
- changed RECV_* / SEND_* defines to correctly reflect NetWare APIs;
  some more minor Makefile tidyups.

- disabled 64bit type for CLIB build which removes compiler runtime dependency.

- updated NetWare docu.

- added lib architecture to NLM description.

- added HAVE_SYS_IOCTL_H define; added gcc runtime.

- moved includes to setup.h so that the project headers also pick them up (eleminate gcc warning).

- fixed path to Metrowerks tools and runtime since they changed between compiler versions.

- minor patches to enable building for NetWare CLIB.
  sent by Dmitry Mityugov.

- minor patches to enable building for NetWare CLIB.
  sent by Dmitry Mityugov.

- enabled building for NetWare CLIB architecture.

- revert previous patch since it turned out that older cp dont know this switch, argh!

James Housley (28 Jun 2007)
- Using fdopen() is a more correct way to implement the CURLOPT_NEW_FILE_PREMS
  file.c, but the debug interface was missing.  This adds the routines needed
  to make the memory debuging work for fdopen().

Daniel Stenberg (28 Jun 2007)
- reality sync

Gunter Knauf (28 Jun 2007)
- fixed nasty cp warnings about not beeing able to preserve ownership.

Daniel Stenberg (27 Jun 2007)
- James Bursa's improvement

- fix little flaw that could make the transfer loop end prematurely

James Housley (27 Jun 2007)
- Add two new options for the SFTP/SCP/FILE protocols: CURLOPT_NEW_FILE_PERMS
  and CURLOPT_NEW_DIRECTORY_PERMS.  These control the premissions for files
  and directories created on the remote server.  CURLOPT_NEW_FILE_PERMS
  defaults to 0644 and CURLOPT_NEW_DIRECTORY_PERMS defaults to 0755

Gunter Knauf (27 Jun 2007)
- removed trailing spaces.

- fixed wrong var name

Daniel Stenberg (26 Jun 2007)
- add an FTP rename example to 3.7

- Robert Iakobashvili re-arranged the internal hash code to work with a custom
  hash function for different hashes, and also expanded the default size for
  the socket hash table used in multi handles to greatly enhance speed when
  very many connections are added and the socket API is used.

James Housley (26 Jun 2007)
- The results for a list only directory should be sent to the callback

- ftp_list_only mode should list all file types, not just directories.

Daniel Stenberg (25 Jun 2007)
- gah, adding missing braces, removed silly debug output, added new debug output

- Adjusted how libcurl treats HTTP 1.1 responses without content-lenth or
  chunked encoding (that also lacks "Connection: close"). It now simply
  assumes that the connection WILL be closed to signal the end, as that is how
  RFC2616 section 4.4 point #5 says we should behave.

- fix the version string as well

- start working towards 7.16.4

Version 7.16.3 (25 Jun 2007)

Daniel Stenberg (25 Jun 2007)
- 7.16.3

- As reported by "Tro" in http://curl.haxx.se/mail/lib-2007-06/0161.html and
  http://curl.haxx.se/mail/lib-2007-06/0238.html, libcurl didn't properly do
  no-body requests on FTP files on re-used connections properly, or at least
  it didn't provide the info back in the header callback properly in the
  subsequent requests.

Gunter Knauf (22 Jun 2007)
- added netware install target

- made debug flag settable from outside; add allways debug stuff when DB != NDEBUG

Daniel Stenberg (22 Jun 2007)
- remove annoying debug output

- Gerrit Bruchhuser pointed out a warning that the Intel(R) Thread Checker
  tool reports and it was indeed a legitimate one and it is one fixed. It was
  a use of a share without doing the proper locking first.

- Adam Piggott filed bug report #1740263
  (http://curl.haxx.se/bug/view.cgi?id=1740263). Adam discovered that when
  getting a large amount of URLs with curl, they were fetched slower and
  slower... which turned out to be because the --libcurl data collecting which
  wrongly always was enabled, but no longer is...

James Housley (20 Jun 2007)
- If the creation of rsa and rsa_pub fail due to memory, don't try
  other authentication methods.  Terminate with a memory error.

- Check both variables, not the same one twice.  Pointed out by Colin Hogben

Daniel Stenberg (19 Jun 2007)
- and fix another flaw in the singlecwd case when we get ftp://site.com/, also
  from the #1739100 bug report

- extra precaution to make PATH_MAX always be defined

James Housley (19 Jun 2007)
- Change rsa and rsa_pub from static arrays in ssh_conn to be dynamically
  allocated when needed

- If LIBSSH2DEBUG was defined "i" was undefined

Daniel Stenberg (18 Jun 2007)
- Robson Braga Araujo filed bug report #1739100
  (http://curl.haxx.se/bug/view.cgi?id=1739100) that mentioned that libcurl
  could not actually list the contents of the root directory of a given FTP
  server if the login directory isn't root. I fixed the problem and added three
  test cases (one is disabled for now since I identified KNOWN_BUGS #44, we
  cannot use --ftp-method nocwd and list ftp directories).

- make the ftp-method multicwd case possible to LIST the root directory of a
  server!

- Test listing of root dir with the three ftp-methods. KNOWN_BUGS #44 make me
  disable test 351 by default by I add the test case anyway to make it easier
  to work on this problem in the future.

- 44. --ftp-method nocwd does not handle URLs ending with a slash properly (it
  should list the contents of that directory). See test case 351.

- Daniel Johnson reported the tests now run fine on OS X!

James Housley (16 Jun 2007)
- Curl_ssh_connect() was using an uninitialized variable in one location.
  Caught by the auto-builds

Daniel Stenberg (14 Jun 2007)
- Tom Regner added /usr/lib/misc to the path to scan for sftp to make the
  sftp tests run fine on gentoo

- Shmulik Regev fixed a flaw in the multi interface that occurred when doing
  HTTP CONNECT over a proxy

- s/HAVE_POLL/HAVE_SYS_POLL_H

James Housley (14 Jun 2007)
- Remove duplicate code that was left in as part of 1.35.  This code
  only affected sftp_sendquote() for the "chgrp/chmod/chown" commands.
  
  This also fixed failure of test 614 on a system that previously failed.

Daniel Stenberg (14 Jun 2007)
- Make our own definitions of the POLL* defiens and the pollfd struct only get
  done if the sys/poll.h file is missing, as we have seen machines with poll()
  present but without the header file and machines that don't get HAVE_POLL
  defined but that do have the sys/poll.h header file...

James Housley (14 Jun 2007)
- BUG FIX:  When reading a directory listing that contains symlinks
  with the latest libssh2, the listing would be truncated at the symlink.
  Fix by looping on LIBSSH2_ERROR_EAGAIN, like the rest of the calls.

Daniel Stenberg (13 Jun 2007)
- Tom Regner provided a patch and worked together with James Housley, so now
  CURLOPT_FTP_CREATE_MISSING_DIRS works for SFTP connections as well as FTP
  ones.

- Rich Rauenzahn filed bug report #1733119
  (http://curl.haxx.se/bug/view.cgi?id=1733119) and we collaborated on the fix.
  The problem is that for 64bit HPUX builds, several socket-related functions
  would still assume int (32 bit) arguments and not socklen_t (64 bit) ones.

James Housley (13 Jun 2007)
- Restore functionality mistakenly removed in the previous commit

- Update documentation to reflect SFTP's ability to create directories on
  upload.  Some text provieded by Tom Regner

Gisle Vanem (13 Jun 2007)
- libssh2_session_free() returns void. Fix "#endif".

James Housley (13 Jun 2007)
- Commit Tom Regner's code for SFTP create missing directories.  This patch
  uses the --ftp-create-dirs flag to control if cURL will try and create
  directories that are specified in an upload path, but don't exist.

- Add a define to protect the state machine from older versions of libssh2,
  ie 0.14, that don't know about newer constants used in the state machine.

Daniel Stenberg (12 Jun 2007)
- With lots of help from Rich Rauenza(?) in bug #1733119, we introduce a fairly
  complicated work-around for 64bit HPUX compiles. We do the fix using inline
  static functions to make them follow the header file properly and thus get
  used fine in the test suite too etc.

James Housley (12 Jun 2007)
- * Updates for the latest version of libssh2, specifically
    libssh2_sftp_shutdown() and libssh2_session_free() can now return
    LIBSSH2_ERROR_EAGAIN.
  
  * Fix the _send() and _recv() return values so non-blocking works

- While connect and transfer works fine in non-blocking mode for the test
  suite, transfer fails in the real world.  So after connect set to blocking
  as full non-blocking is migrated out.

Daniel Stenberg (12 Jun 2007)
- mention James current work on ssh

James Housley (12 Jun 2007)
- Prevent the state machine from getting stuck in SSH_AUTH_HOST_INIT

- Convert Curl_ssh_connect() to run in a state machine for
  LIBSSH2_APINO >= 200706012030.  More to come...

Daniel Stenberg (12 Jun 2007)
- remove unused field in the state struct

Dan Fandrich (11 Jun 2007)
- Wait longer for servers to start up since the ssh server needs to generate
  keys the first time (which can take a while on a slow or loaded host).
  Enforce a longer startup wait time for the ssh client SOCKS server, too.
  Check for an error code from startnew() when starting any server.

- We do not use RSA keys in the test suite.

Daniel Stenberg (11 Jun 2007)
- restore the correct timeout time that my previous commit broke

- Properly wait for the c-ares resolve to complete, hopefully the cure for
  bug #1733955

- Daniel Black's clarfication about the NTLM support

Gisle Vanem (11 Jun 2007)
- constify 'hostname' in init_thread_sync_data(). Simply clear
  the whole 'tsd' structure on exit in destroy_thread_sync_data().

- Squelsh some warnings for libssh older than 0.1.5.

Dan Fandrich (8 Jun 2007)
- Fixed the test harness so that it actually kills the ssh being used as
  the SOCKS server.

- Improved compatibility with perl 5.0 on the 'open' calls.

- Incorporated Daniel Black's test706 and test707 SOCKS test cases.

- Improved compatibility with perl 5.0 on the 'open' calls.

James Housley (8 Jun 2007)
- Curl_scp_done() needs to call libssh2_channel_free() to prevent a
  memory leak, and it is the right thing to do.

- Fix to work with the latest CVS version of libssh2
  
  * As of (LIBSSH2_APINO >= 200706012030) there are not *nb() functions
  * As of (LIBSSH2_APINO >= 200706012030) most libssh2_*() functions
    can return LIBSSH2_ERROR_EAGAIN to indicate that the call would block.
  
  To make the code work as previously, blocking, all the code has been
  updated so that when (LIBSSH2_APINO >= 200706012030) it loops simulating
  blocking.  This allows the existing code to function and not hold up
  the upcoming release.

Daniel Stenberg (8 Jun 2007)
- start working on 1.4.1

- 1.4.0 preps

Dan Fandrich (7 Jun 2007)
- Changed the opens to work on older versions of perl.
  Redirect ssh output to ssh.log

- Fixed a compiler warning on uClibc.

Daniel Stenberg (7 Jun 2007)
- bug #1720605, There seems to be a problem when connecting to the Microsoft telnet server

- Daniel S (6 June 2007)
  - -s/--silent can now be used to toggle off the silence again if used a second
    time.
  
  Daniel S (5 June 2007)
  - Added Daniel Black's work that adds the first few SOCKS test cases. I also
    fixed two minor SOCKS problems to make the test cases run fine.

Dan Fandrich (7 Jun 2007)
- Renamed the sshd log file to sshd.log.
  Added more options to the ssh config file to improve the consistency of
  the test environment.
  Force a rewrite of the ssh config files on every invocation.
  Changed the opens to work on older versions of perl.

- Cleaned up SOCKS tests.  Use a magic port number instead of killserver
  to do nonlistening server tests, like other tests.

- Fixed some problems in starting SSH for use in SOCKS.

Daniel Stenberg (6 Jun 2007)
- make -s/--silent properly toggle as it is documented

- the revert

- added 703: a socks5 version of 702

- Daniel Black's test suite fixes and initial test cases for SOCKS4/5 using
  openssh

- if we read zero bytes from the proxy, the connection is broken and we need
  to bail out

- mark connect failures as non-connected when ConnectPlease() fails, like when
  a connection through a socks proxy doesn't work

- Revered Ashish Sharma's multiple entries patch, as it caused memory madness

- minor edit since getting an ID seems pointless when failure happens

- fix the bad bad bad mess this caused on name resolves returning more than
  one name... Reported by James Bursa

- Brad Spencer found and fixed three flaws in the code, found with the new
  gcc 4.2.0 warning: -Waddress

- Brad House fixed VS2005 compiler warnings due to time_t being 64bit.
  He also made recent Microsoft compilers use _strdup() instead of strdup().

- Ashish Sharma provided a patch for supporting multiple entries in the
  /etc/hosts file. Patch edited for coding style and functionality by me
  (Daniel).

- ares_destroy_options() and ares_save_options() man pages by Brad House

- ouch, two conditionals were turned backwards!

- do the update timer stuff even when CURLM_CALL_MULTI_PERFORM is returned

- When transferring 500 downloads in parallel with a c-ares enabled build only
  to find that it crashed miserably, and this was due to some select()isms left
  in the code. This was due to API restrictions in c-ares 1.3.x, but with the
  upcoming c-ares 1.4.0 this is no longer the case so now libcurl runs much
  better with c-ares and the multi interface with > 1024 file descriptors in
  use.

- Feng Tu made (lib)curl support "upload" resuming work for file:// URLs.

- make next version 1.4.0

- first take at detecting a random device and seeding the random key using data
  from it in randomize_key()

- Shmulik Regev brought cryptographically secure transaction IDs

- Brad House added ares_save_options() and ares_destroy_options() that can be
  used to keep options for later re-usal when ares_init_options() is used.

- Added CURLMOPT_MAXCONNECTS which is a curl_multi_setopt() option for setting
  the maximum size of the connection cache maximum size of the multi handle.

Yang Tse (30 May 2007)
- In case of test failure, try not to show log files of other tests

Daniel Stenberg (30 May 2007)
- added ares_process_fd() to allow applications to ask for processing on
  specific sockets and thus avoiding select() and associated functions/macros.
  This function will be used by upcoming libcurl releases for this very
  reason. It also made me export the ares_socket_t type in the public ares.h
  header file, since ares_process_fd() uses that type for two of the arguments.

- remove really annoying debug output that makes life miserable when you do
  hundreds of parallel transfers...

- When working with a problem Stefan Becker had, I found an off-by-one buffer
  overwrite in Curl_select(). While fixing it, I also improved its performance
  somewhat by changing calloc to malloc and breaking out of a loop earlier
  (when possible).

- Primarily this fixes an off-by-one buffer overwrite (rare but still existing).
  
  I also switched from calloc() to malloc() as a minor performance boost since
  the rest of the code fills in the structs fine anyway - and they must for the
  case when we use the stack-based auto variable array instead of the allocated
  one.
  
  I made the loop filling in poll_fds[] break when poll_nfds is reached as a
  minor speed improvement.

- Clarify a bit about the fact that easy handles remain in the multi stack when
  transfers are done and need to be removed and closed or re-added.

- make it a WARNING since this hits people hard in their faces

- Rob Crittenden fixed bug #1705802
  (http://curl.haxx.se/bug/view.cgi?id=1705802), which was filed by Daniel
  Black identifying several FTP-SSL test cases fail when we build libcurl with
  NSS for TLS/SSL. Listed as #42 in KNOWN_BUGS.

- updated

- Ravi Pratap fixed a flaw in the init_by_resolv_conf() function for windows
  that could cause it to return a bad return code.

- Song Ma filed bug report #1724016
  (http://curl.haxx.se/bug/view.cgi?id=1724016) noticing that downloading
  glob-ranges for TFTP was broken in CVS.

- stay within 80 cols

- 'mytx' in bug report #1723194 (http://curl.haxx.se/bug/view.cgi?id=1723194)
  pointed out that the warnf() function in the curl tool didn't properly deal
  with the cases when excessively long words were used in the string to chop
  up.

- TFTP transfers are also blocking

- fix the formatting of the trailing list

- Andre Guibert de Bruet fixed a memory leak when PKCS #12 parsing failed

- Andre Guibert de Bruet fixed a memory leak in the function that verifies the
  peer's name in the SSL certificate when built for OpenSSL. The leak happens
  for libcurls with CURL_DOES_CONVERSIONS enabled that fail to convert the CN
  name from UTF8.

- WaitForSingleObject() uses a millisecond timeout and CURL_TIMEOUT_RESOLVE is
  counted in seconds...

- better fix for the dl/ul counters

- Feng Tu reported that curl -w did wrong on TFTP transfers in
  bug report #1715394 (http://curl.haxx.se/bug/view.cgi?id=1715394), and the
  transfer-related info "variables" were indeed overwritten with zeroes wrongly
  and have now been adjusted. The upload size still isn't accurate.

- bail out with error codes on failures

- they spell five with a v...

- Feng Tu pointed out a division by zero error in the TFTP connect timeout
  code for timeouts less than fice seconds, and also provided a fix for it.

Dan Fandrich (17 May 2007)
- Added support for compiling under Minix 3.1.3 using ACK.

- Match file times occurring in the morning.

- Added call to setvbuf (disabled by default for speed) to flush the
  memdebug log file after every line and avoid losing the last few log
  entries if curl crashes.

- Added support for quote commands before a transfer using SFTP and test
  case 614.
  Allow SFTP quote commands chmod, chown, chgrp to set a value of 0.

- Added SFTP directory listing test case 613.

- Added FTPS upload tests 408 and 409.

- Kristian Gunstone fixed a problem where overwriting an uploaded file with
  sftp didn't truncate it first, which would corrupt the file if the new
  file was shorter than the old.

- Added the list of SFTP post-quote commands, and fixed a few typos.

- Added FTPS test cases 406 and 407

Daniel Stenberg (8 May 2007)
- CURLE_FTP_COULDNT_STOR_FILE is now known as CURLE_UPLOAD_FAILED. This is
  because I just made SCP uploads return this value if the file size of
  the upload file isn't given with CURLOPT_INFILESIZE*. Docs updated to
  reflect this news, and a define for the old name was added to the public
  header file.

- James Bursa fixed a bug in the multi handle code that made the connection
  cache grow a bit too much, beyond the normal 4 * easy_handles.

- extended the description for the curl_multi_socket_action() change

- 42. Daniel Black filed bug report #1705802 where he accurately mentions that
    several FTP-SSL test cases fail when we build libcurl with NSS for TLS/SSL:
    http://curl.haxx.se/bug/view.cgi?id=1705802

Dan Fandrich (3 May 2007)
- Fixed a few typos.

Daniel Stenberg (3 May 2007)
- document the new 200alias behaviour

- Anders Gustafsson remarked that requiring CURLOPT_HTTP_VERSION set to 1.0
  when CURLOPT_HTTP200ALIASES is used to avoid the problem mentioned below is
  not very nice if the client wants to be able to use _either_ a HTTP 1.1
  server or one within the aliases list... so starting now, libcurl will
  simply consider 200-alias matches the to be HTTP 1.0 compliant.

Dan Fandrich (2 May 2007)
- Fixed an out of memory handling issue with HTTP pipelines.

Daniel Stenberg (2 May 2007)
- Tobias Rundstrom reported a problem they experienced with xmms2 and recent
  libcurls, which turned out to be the 25-nov-2006 change which treats HTTP
  responses without Content-Length or chunked encoding as without bodies. We
  now added the conditional that the above mentioned response is only without
  body if the response is HTTP 1.1.

- - Jeff Pohlmeyer improved the hiperfifo.c example to use the
    CURLMOPT_TIMERFUNCTION callback option.

- - Set the timeout for easy handles to expire really soon after addition or
    when CURLM_CALL_MULTI_PERFORM is returned from curl_multi_socket*/perform,
    to make applications using only curl_multi_socket() to properly function
    when adding easy handles "on the fly". Bug report and test app provided by
    Michael Wallner.

- Merged _all_ old changelogs into the single CHANGES.0 file. Having a new one
  for every year is giving us too many files! I also split out the changes
  from 2006 from CHANGES to CHANGES.0 now.

- spell and language fix

Dan Fandrich (2 May 2007)
- Check the return code from curl_multi_add_handle()

- Fixed a logic error in the last patch and another out of memory issue.
  Reduce the scope of some variables.

- Improved behaviour in out of memory conditions.

- Use memcpy instead of strcpy to improve performance.

Daniel Stenberg (30 Apr 2007)
- brlcad on #curl provided this patch (edited by me) since "configure will fail
  looking for a C++ preprocessor on libtool-using projects" with the factory-
  installed libtool version on Mac OS X.

Dan Fandrich (30 Apr 2007)
- Improved the test harness to allow running test servers on other than
  the default port numbers, allowing more than one test suite to run
  simultaneously on the same host.

- Fixed some tests to stop hard-coding the port number.

- Rearranged some allocs so they will be freed correctly in the error path.

Daniel Stenberg (28 Apr 2007)
- Peter O'Gorman fixed libcurl to not init GnuTLS as early as we did before,
  since it then inits libgcrypt and libgcrypt is being evil and EXITS the
  application if it fails to get a fine random seed. That's really not a nice
  thing to do by a library.

- Frank Hempel fixed a curl_easy_duphandle() crash on a handle that had
  been removed from a multi handle, and then fixed another flaw that prevented
  curl_easy_duphandle() to work even after the first fix - the handle was
  still marked as using the multi interface.

- Move the explictit free of the range string to Curl_close() from Curl_disconnect()
  since it easy-handle related and not connection-related.

- oops, this was supposed to be properly removed

- As a follow-up to the removal of the free of the range data in Curl_done() - this
  moves and re-arranges how range/resume is setup and freed.

- Peter O'Gorman found a problem with SCP downloads when the downloaded file
  was 16385 bytes (16K+1) and it turned out we didn't properly always "suck
  out" all data from libssh2. The effect being that libcurl would hang on the
  socket waiting for data when libssh2 had in fact already read it all...

Dan Fandrich (25 Apr 2007)
- Added support in runtests.pl for "!n" test numbers to disable individual tests.

- Fixed an out of memory handling issue.

Daniel Stenberg (25 Apr 2007)
- Sonia Subramanian brought our attention to a problem that happens if you set
  the CURLOPT_RESUME_FROM or CURLOPT_RANGE options and an existing connection
  in the connection cache is closed to make room for the new one when you call
  curl_easy_perform(). It would then wrongly free range-related data in the
  connection close funtion.

Dan Fandrich (25 Apr 2007)
- When displaying log files, truncate the really longs ones such as you
  would get from a torture test.

Yang Tse (25 Apr 2007)
- Steve Little's fixes to allow compilation on VMS 64-bit mode

Dan Fandrich (24 Apr 2007)
- Treat log files and -k the same when running torture tests as when not.

- Clear out FTP server options before each new client.
  Wait for child processes to die to avoid creating zombies.

Daniel Stenberg (24 Apr 2007)
- Robert Iakobashvili made the 'master_buffer' get allocated first once it is
  can/will be used as it then makes the common cases save 16KB of data for each
  easy handle that isn't used for pipelining.

Dan Fandrich (23 Apr 2007)
- Added tests 610-612 to test more SFTP post-quote commands.

- Added <postcheck> support to the test harness.

- Mention NSS, <postcmd> commands

- Changed another nonexistent host name to be under the haxx.se domain
  to guarantee against it ever being valid.

Yang Tse (22 Apr 2007)
- Avoid an unnecessary call to gettimeofday() when
  using custom timeout values.

Daniel Stenberg (22 Apr 2007)
- --without-ssl disables OpenSSL only

- - Song Ma's warning if -r/--range is given with a "bad" range, also noted in
    the man page now.

- configure fix and new mirror

- clarify a bit on the follow-redirect logic and when curl switches from POST
  to GET on redirect

- shell script assigns should not have spaces, hopefully fixes bug #1705177

- Daniel Black filed bug #1704675 (http://curl.haxx.se/bug/view.cgi?id=1704675)
  identifying a double-free problem in the SSL-dealing layer, telling GnuTLS to
  free NULL credentials on closedown after a failure and a bad #ifdef for NSS
  when closing down SSL.

- Curl_ssl_close(): mark the connection as not using SSL anymore, to better
  survive getting called twice

Gunter Knauf (21 Apr 2007)
- fixed ARFLAGS for CodeWarrior build.

Dan Fandrich (20 Apr 2007)
- Changed an error message slightly so it can be caught easier by the
  autobuild logs scanner.

Daniel Stenberg (20 Apr 2007)
- ifndef check the CURL_MAX_WRITE_SIZE define to allow this value to easier be
  changed at build time (from command line or similar)

Yang Tse (20 Apr 2007)
- initialize pending_ms to zero to avoid compiler warning:
  'pending_ms' may be used uninitialized in this function

- - Save one call to curlx_tvnow(), which calls gettimeofday(), in each of
    Curl_socket_ready(), Curl_poll() and Curl_select() when these are called
    with a zero timeout or a timeout value indicating a blocking call should
    be performed.
  
    These unnecessary calls to gettimeofday() got introduced in 7.16.2 when
    fixing 'timeout would restart when signal caught while awaiting socket
    events' on 20 March 2007.
  
  - Move some loop breaking logic from the while clause into the loop,
    avoiding compiler warning 'assignment within conditional expression'

Daniel Stenberg (19 Apr 2007)
- keep lines < 80 columns

Yang Tse (19 Apr 2007)
- fix comment and line spacing

Dan Fandrich (18 Apr 2007)
- Various test file cleanups, including using <servercmd> instead of writing
  directly to ftpserver.cmd and removing unneeded empty sections.

Daniel Stenberg (18 Apr 2007)
- clarify the comment about libssh2_sftp_write's return type

- - James Housley made SFTP uploads use libssh2's non-blocking API (if available)

- - Prevent the internal progress meter from updating more frequently than once
    per second.

Dan Fandrich (18 Apr 2007)
- Added test cases 296, 297 and 298 to test --ftp-method handling

Gunter Knauf (16 Apr 2007)
- added ranlib when library is created with ar.

Gisle Vanem (16 Apr 2007)
- No need for USE_MANUAL. Use select_s() instead of select().
  Added ares_getopt.o to program sample objects.

Daniel Stenberg (16 Apr 2007)
- - Robert Iakobashvil added curl_multi_socket_action() to libcurl, which is a
    function that deprecates the curl_multi_socket() function. Using the new
    function the application tell libcurl what action that was found in the
    socket that it passes in. This gives a significant performance boost as it
    allows libcurl to avoid a call to poll()/select() for every call to
    curl_multi_socket*().

Yang Tse (16 Apr 2007)
- move linkage var declarations to ares_getopt.h

Gunter Knauf (16 Apr 2007)
- use Makefile.inc to determine sources.

- ares_getopt() command-line parser function does not belong to actual c-ares library. It is just a convinience source code helper function for use in example programs adig.c and ahost.c

Daniel Stenberg (16 Apr 2007)
- Jay Austin added "DH PARAMETERS" to the stunnel.pem certificate

Yang Tse (16 Apr 2007)
- ares_getopt() command-line parser function does not belong to actual
  c-ares library. It is just a convinience source code helper function
  for use in example programs adig.c and ahost.c

- ares_getopt() command-line parser function does not belong to actual
  c-ares library. It is just a convinience source code helper function
  for use in example programs adig.c and ahost.c

Dan Fandrich (15 Apr 2007)
- Minor updates to --help output

Daniel Stenberg (14 Apr 2007)
- jayjwa added the "DH PARAMETERS" to make this work with recent stunnels

- updates

Gunter Knauf (14 Apr 2007)
- removed unneeded brackets with NetWare implementation.

- ups - c&p error.

- use system-own getpassword() function on NetWare.

Dan Fandrich (13 Apr 2007)
- Added test cases 294 and 295 to test --ftp-account handling

Yang Tse (13 Apr 2007)
- Fix test case 534 which started to fail 2007-04-13 due to the existance
  of a new host on the net with the same silly domain the test was using
  for a host which was supposed not to exist.

- proper fix for compiler warning

- Take in account that it can be built with compiler debug info and
  without the curl memory debugging leak detection code enabled.

- fix compiler warning

Daniel Stenberg (12 Apr 2007)
- update!

- add a 'vc8' target that (re-)builds the */Makefile.vc8 files

- Song Ma found a memory leak in the if2ip code if you pass in an interface
  name longer than the name field of the ifreq struct (typically 6 bytes), as
  then it wouldn't close the used dummy socket.

Yang Tse (12 Apr 2007)
- update MSVC project files with ares_getopt()

- use ares_getopt for all platforms

- add ares_getopt prototype

- Rename function as ares_getopt()

- Replace tabs with spaces

- Add file ares_getopt.c
  
  Original file name getopt.c  Initial import into the c-ares source tree
  on 2007-04-11.  Lifted from version 5.2 of the 'Open Mash' project with
  the modified BSD license, BSD license without the advertising clause.

Dan Fandrich (12 Apr 2007)
- Work around an out of memory situation in Curl_ftp_done instead of
  returning an error code, to allow connections to be torn down
  cleanly since this function can be called AFTER an OOM situation
  has already been reached.

Daniel Stenberg (11 Apr 2007)
- start working on 7.16.3

- restart towards 7.16.3

- add recent contributors

Version 7.16.2 (11 Apr 2007)

Daniel Stenberg (11 Apr 2007)
- 7.16.2

Yang Tse (11 Apr 2007)
- convenience SIG_ATOMIC_T macro definition

Dan Fandrich (11 Apr 2007)
- Fixed some out of memory handling issues.

- Fixed some out of memory handling issues.

Daniel Stenberg (10 Apr 2007)
- blah

- 41. When doing an operation over FTP that requires the ACCT command (but not
    when logging in), the operation will fail since libcurl does detect this and
    thus fails to issue the correct command:
    http://curl.haxx.se/bug/view.cgi?id=1693337

- Ravi Pratap provided fixes for HTTP pipelining

Yang Tse (10 Apr 2007)
- configure script will ignore --enable-sspi option for non-native Windows

- --enable-sspi only supported on Windows native builds

- Update NTLM flag and description

Dan Fandrich (10 Apr 2007)
- Fixed an out of memory handling issue.

- Honour the -a option when -t is enabled.

- Changed error return codes to match update code.

Yang Tse (9 Apr 2007)
- VC8+ (VS2005+) has C99 variadic macro support

- fix out of memory handling issue

Daniel Stenberg (8 Apr 2007)
- Nick Zitzmann did ssh.c cleanups

- builds on QNX 6 again

Yang Tse (7 Apr 2007)
- fix out of memory handling issue

- fix out of memory handling issue

- fix compiler warning

- fix out of memory handling issue

Dan Fandrich (6 Apr 2007)
- Fixed a few memory leaks in OOM conditions.
  Made libssh2 logging more verbose when debugging is enabled.

Yang Tse (6 Apr 2007)
- In case of test failure, try not to show log files of other tests

Dan Fandrich (5 Apr 2007)
- Enabled the ssh tests 600-609.

Yang Tse (5 Apr 2007)
- runtests -t discovered this out of memory handling issues

- unify fopen() failure error message among tests, allowing
  the testsuite to count them as errors of the same kind

- Further improve displaying of individual logfiles

Dan Fandrich (4 Apr 2007)
- Fixes some more out of memory handling bugs.

- Fixed file handle leak in OOM condition.

- Fixed curl_slist_append handling of out of memory conditions on the
  easycode list (discovered by runtests' torture test).

Yang Tse (4 Apr 2007)
- Building Windows DLLs and C run-time (CRT) linkage issues

- add debug message and expand comment

- test can be allowed to run if fopen() is capable of fopen()ing
  three additional files once that we have already open()ed the
  big bunch of file descriptors.

- move WinSock definitions of EBADF, EINTR, EINVAL and  EAFNOSUPPORT to setup_once.h

- cleanup

Dan Fandrich (4 Apr 2007)
- Whoops--didn't mean to enable the ssh tests quite yet.

Yang Tse (4 Apr 2007)
- test can be allowed to run if fopen() is capable of fopen()ing
  SAFETY_MARGIN additional files once that we have already open()ed
  the big bunch of file descriptors.

Dan Fandrich (4 Apr 2007)
- Added more SSH tests (left disabled for now).

- Fixed a memory leak and improper shutdown on SFTP post-quote command failure.

Daniel Stenberg (3 Apr 2007)
- Only one issue left to deal with. Most of the others cut due to lack of
  response and/or my personal lack of time to deal further with them at this
  point.

- Rob Jones fixed better #ifdef'ing for a bunch of #include lines.

Yang Tse (3 Apr 2007)
- update copyright year

- Verify if the test is limited by an ancient stdio with a 256
  open file limit.  In this case the test is skipped with a
  message showing this limitation when the number of open files
  needed for the test is greater than 256.

- fix enumeration of disabled tests when they have the highest number

- fix MSDOS symbol check

- recover code simplification lost with last commit

- Improve displaying of logfiles making sure all lines end with \n
  and avoid using ! as last char of line.

Gisle Vanem (3 Apr 2007)
- djgpp isn't the only possible DOS target.
  Use the more traditional DJGPP define.
  Added basename() for non-djgpp targets.

- Simplify setting binary mode on file-descriptors.
  Work around the non-standard _setmode() in Metaware's HighC.

- DOS targets do have setmode().

Dan Fandrich (3 Apr 2007)
- Added --ftp-account to --help output.

Yang Tse (3 Apr 2007)
- try not to link with unneeded libs, avoiding global LDADD

- Cleanup. Warnings related with FD_SET, FD_ISSET, and FD_ZERO macros
  are not icc 9.0 specific.

- when detecting un/supported sshd options use curl's sshd config file.

Dan Fandrich (3 Apr 2007)
- Eliminate the sshd option checking dependency on wc and make it faster.

Daniel Stenberg (2 Apr 2007)
- Nick Zitzmann made CURLOPT_POSTQUOTE work for SFTP as well.

Yang Tse (2 Apr 2007)
- fix error in previous commit

- fix compiler warning

- fix compiler warning

- verify ssh daemon version

Gunter Knauf (1 Apr 2007)
- print update message only if we really update CVS.

- ignore another generated file.

Daniel Stenberg (1 Apr 2007)
- Robert Iakobashvili made curl_multi_remove_handle() a lot faster when many
  easy handles are added to a multi handle, by avoiding the looping over all
  the handles to find which one to remove.

- Matt Kraai provided a patch that makes curl build on QNX 6 fine again. Mostly
  by letting configure check for setmode and ifdef on HAVE_SETMODE. NOTE: non-
  configure platforms that havve setmode() needs their hard-coded config.h files
  fixed. I fixed the src/config-win32.h.

Dan Fandrich (1 Apr 2007)
- Added scp and sftp nonexistent file retrieval tests, but leave them
  disabled for now.

Daniel Stenberg (31 Mar 2007)
- 26 flaws identified by coverity.com

- Since the str2num() function gets called with the 'nextarg' pointer from
  within the getparameter a lot, we must check it for NULL before accessing the
  str data.
  CID 14 of the coverity.com scan

- check the correct variable to want about --stderr failures properly
  CID 18 by the coverity.com scan

- fix memory leak in case of memory problems
  CID 16 by coverity.com scan

- fix a (minor) memory leak in case of error
  CID 21 in the coverity.com scan

- Pointless to check for non-NULL pointers that already have been dereferenced
  and they have to be non-NULL long before this check.
  CID 22 in the coverity.com scan

- avoid dereferencing a NULL pointer by setting a default word to lookup in case
  it is missing
  CID 5 in the coverity.com scan

- Better deal with NULL pointers.
  CID 3 and 4 from the coverity.com scan.

- "Pixel" fixed a problem that appeared when you used -f with user+password
  embedded in the URL.

- *** empty log message ***

- add units to a few info

- new URL for wxWidgets binding

Dan Fandrich (31 Mar 2007)
- Disable the SSH tests until the libssh2 bugs that causes test hangs
  are sorted out.

Daniel Stenberg (31 Mar 2007)
- When curl_easy_duphandle() fails because it can't get or make a connection
  cache, we must make sure not to derefence the NULL pointer...
  CID 6 coverity.com scan

- The info types cannot be checked for explicity by ANDing the types since they
  have not been properly defined to allow this! Instead of changing the defines
  and break the ABI/API, I opted to modify the code to check for exact type
  matches.
  CID 10 coverity.com scan

- Check for a NULL easy->easy_conn in multi_getsock() since it can in fact
  happen when curl_multi_remove_handle() is called.
  CID 13. coverity.com scan

- Removed check for ftpcode being NULL, as later it is derefenced unconditionally
  anyway and we can just as well rely on it being valid.
  CID 12, coverity.com scan

Yang Tse (31 Mar 2007)
- sshd might fail to start if given an unsupported configuration option.
  Try to avoid this problem checking for some possible unsupported options,
  and avoid using them in the configuration file.

Dan Fandrich (30 Mar 2007)
- Fixed some typos in the comments.

- Resurrected old FTPS error tests 402 and 403 as 404 and 405.

Daniel Stenberg (30 Mar 2007)
- Pointer "conn" dereferenced before NULL check. found by coverity.com scan

- Pointer "cur_pos" dereferenced before NULL check, found by coverity.com scan.
  Removed the NULL check since the pointer must be valid already.

- pointless check for 'out' being non-NULL, since it was badly done and is
  unnecessary - found by coverity.com scan

- dead code removed, found by the coverity.com scan

Dan Fandrich (30 Mar 2007)
- Added HTTP --max-filesize tests and FTPS CCC failure test.

Yang Tse (30 Mar 2007)
- Searching for sshd and sftp-server will be done first
  in the PATH and afterwards in other common locations.

- ignore more generated files

Dan Fandrich (30 Mar 2007)
- Don't tear down the ftp connection if the maximum filesize was exceeded
  and added tests 290 and 291 to check.

- Added FTP-SSL failure test 402

- Added ftps upload test 401

- Added a libssh2 section.

- Show an absolute sftp: file path to give an additional example.

- Eliminated extra / in scp/sftp URLs.

- Send an EOF message before closing a channel, as recommended by RFC4254.
  Enable libssh2 tracing when ssh debugging is turned on.

- Add another option to tighten the test environment.

Yang Tse (29 Mar 2007)
- fix compiler warning

Dan Fandrich (29 Mar 2007)
- Abort if attempting to run as root.

Yang Tse (29 Mar 2007)
- fix error introduced in last commit

- Update comment

- fix compiler warning

- Improve detection of socket events which allow a further recv() call
  to complete with no delay and actually find out what happened with
  the socket. As well as detection of socket send()able condition.
  
  This also allows removal of a Cygwin specific block of code.

Gisle Vanem (28 Mar 2007)
- djgpp uses gcc which has varadic macros.

- Fix compiler warning.

Dan Fandrich (28 Mar 2007)
- Only show exit status in verbose mode.

Gisle Vanem (28 Mar 2007)
- Simplified code around 'tld_errmsg' a bit.

Dan Fandrich (28 Mar 2007)
- Don't launch sshd as a daemon so its output can be logged.

Gunter Knauf (27 Mar 2007)
- added variadic macro stuff.

Yang Tse (27 Mar 2007)
- Update message

- New Internal wrapper function Curl_select() around select (2), it
  uses poll() when a fine poll() is available, so now libcurl can be
  built without select() support at all if a fine poll() is available.

- don't retry select() call upon unrecoverable error EBADF

Dan Fandrich (27 Mar 2007)
- Daniel Johnson's fix for shared object extension detection on Mac OS X.

Yang Tse (27 Mar 2007)
- Platforms that lack autotools support should define HAVE_VARIADIC_MACROS_C99
  and/or HAVE_VARIADIC_MACROS_GCC for specific compiler versions that support
  variadic macros with C99 style and/or old gcc style in their specific config.h
  file.
  
  If previous definitions are not done, even when aplicable, and --disable-verbose
  is used, the fallback (void) method will be used to define infof, avoiding the
  inclusion of unwanted strings in the resulting library/executable.

Dan Fandrich (27 Mar 2007)
- Tighten up a few more OpenSSH options

Yang Tse (26 Mar 2007)
- Fix date

- Internal function Curl_select() renamed to Curl_socket_ready()

Dan Fandrich (26 Mar 2007)
- Added SFTP and SCP upload tests in test602 & test603

- Added test600 and test601, SFTP and SCP file retrieval tests.

Gunter Knauf (26 Mar 2007)
- catch up new lib extension when build with gcc/nlmconv.

- changed link lib order to make nlmconv happy.

- added CVS Id tag.

- fixed  build to use compiler-default lib extension.

Daniel Stenberg (25 Mar 2007)
- #92 is fixed

- Added the How to get your patches into the libcurl sources instruction posted
  recently

- added Daniel Johnson

- - Daniel Johnson fixed multi code to traverse the easy handle list properly.
    A left-over bug from the February 21 fix.

- addressed (replied to with comments) most out-stading release issues and moved
  one over to KNOWN_BUGS

Yang Tse (25 Mar 2007)
- fix compiler warning

- fix compiler warning

- fix compiler warning

Dan Fandrich (24 Mar 2007)
- Fixed a couple of compile problems.

- Added sshserver.pl

- Fixed a memory leak when specifying a proxy with a file: URL and added
  test case 288 to verify it.

- Changed the test harness to attempt to gracefully shut down servers
  before resorting to the kill -9 hammer.
  
  Added test harness infrastructure to support scp/sftp tests, using
  OpenSSH as the server.

Daniel Stenberg (23 Mar 2007)
- add missing state name for the debug state switch output

- fix debug message

Dan Fandrich (23 Mar 2007)
- Added --pubkey option to curl and made --key also work for SCP/SFTP,
  plus made --pass work on an SSH private key as well.

Yang Tse (23 Mar 2007)
- fix yet another leftover in previous commit

- fix leftover in previous commit

- fix compiler warning: empty body in an if/else-statement

- Change spelling, ONE_TERRABYTE -> ONE_TERABYTE
  
  Shave off a couple of function calls in the part of
  Curl_pgrsUpdate() which is always executed when called.
  
  Fix a couple of comments.

Dan Fandrich (23 Mar 2007)
- Don't shut down sftp in an error if it was never started.

- Free some additional strings on exit to avoid memory leaks.

Yang Tse (22 Mar 2007)
- fix wrong macro name introduced in las commit

- Add check for compiler variadic macro support in configuration script

Dan Fandrich (22 Mar 2007)
- Fixed unused variable compiler warning.

- Use C99-style variadic macros when available.

Yang Tse (22 Mar 2007)
- Add a couple of local macros to improve code readability.
  
  For completeness sake, wait_ms() might also get interrupted when
  experimental CURL_ACKNOWLEDGE_EINTR is defined.

Daniel Stenberg (22 Mar 2007)
- -z hasn't supported "yesterday" for quite some time...

Yang Tse (22 Mar 2007)
- attempt to keep message length below 80 chars

- reverted back to previous version => http://curl.haxx.se/mail/lib-2007-03/0258.html

- avoid the use of variadic macros for greater portability

- fix compiler warning: implicit conversion from "long" to "int"

- Fixed: When a signal was caught awaiting for an event using Curl_select()
  or Curl_poll() with a non-zero timeout both functions would restart the
  specified timeout. This could even lead to the extreme case that if a
  signal arrived with a frecuency lower to the specified timeout neither
  function would ever exit.
  
  Added experimental symbol definition check CURL_ACKNOWLEDGE_EINTR in
  Curl_select() and Curl_poll(). When compiled with CURL_ACKNOWLEDGE_EINTR
  defined both functions will return as soon as a signal is caught. Use it
  at your own risk, all calls to these functions in the library should be
  revisited and checked before fully supporting this feature.

Gisle Vanem (20 Mar 2007)
- Remove unneeded 'HAVE_*' defines.

Yang Tse (19 Mar 2007)
- Avoid false positive detection of yaSSL

Daniel Stenberg (19 Mar 2007)
- committed

Yang Tse (19 Mar 2007)
- Bryan Henderson fixed the progress function so that it can get called
  more frequently allowing same calling frecuency for the client progress
  callback, while keeping the once a second frecuency for speed calculations
  and internal display of the transfer progress.

Daniel Stenberg (18 Mar 2007)
- language fix

- Removed: yassl build breaks
  Added: Frequent calling of user progress callback

- detect and show if built with yassl, but also set the "openssl" flag internally
  since that is the API yassl attempts to provide

- detect if built with the OpenSSL API "emulated" by yassl

Yang Tse (18 Mar 2007)
- Fix compiler warning/error: ISO C90 forbids mixed declarations and code

- Code refactoring, extracting a new function wait_ms() from Curl_select and
  Curl_poll() which is called whenever not a single valid file descriptor is
  passed to these functions.
  
  Improve readibility using a poll() macro to replace WSApoll().

Gisle Vanem (17 Mar 2007)
- Remove unneeded 'HAVE_*' defines. Detect i386 OS-target (gcc).

- Added cvs id. Use TOPDIR variable. Updated CSOURCES.
  Dependencies are now put in external file depend.dj.

- Added a hack to work around the circular dependency when
  CURL_DEBUG is defined.

Daniel Stenberg (16 Mar 2007)
- openssl/bio.h doesn't exist when we build with yassl so avoid trying

Dan Fandrich (16 Mar 2007)
- Fixed the test case to use a truly invalid urlglob range.

Daniel Stenberg (15 Mar 2007)
- Sebastien Trottier's issue

- eight fresh issues to keep track of

Dan Fandrich (15 Mar 2007)
- Various memory leaks plugged and NULL pointer fixes made in the ssh code.

Daniel Stenberg (15 Mar 2007)
- - Nick made the curl tool accept globbing ranges that only is one number, i.e
    you can now use [1-1] without curl complaining.

Dan Fandrich (15 Mar 2007)
- Fixed some memory leaks in various error paths.

Yang Tse (15 Mar 2007)
- show better description for AMD64-linux static libraries PIC check

Dan Fandrich (15 Mar 2007)
- Fixed a memory leak.

Daniel Stenberg (14 Mar 2007)
- yassl doesn't have SSL_get_shutdown() in its OpenSSL() layer so we check for
  it and avoid it, even if this cripples the CCC command

Dan Fandrich (14 Mar 2007)
- Fixed a NULL pointer dereference on sftp initialization failure.
  Added some more debug logs.

- --ftp-ssl-control is now honoured on ftps:// URLs

Gisle Vanem (13 Mar 2007)
- Use Curl_inet_pton() instead of inet_pton().

Dan Fandrich (12 Mar 2007)
- libcurl supplies its own crypto hash functions when SSL is disabled, so
  'crypto' tests aren't dependent on SSL.  Compiling with
  --disable-crypto-auth will cause test failures, however.

Daniel Stenberg (12 Mar 2007)
- RECV is for download

Yang Tse (12 Mar 2007)
- Emmanuel Dreyfus fixed not being able to find ber_free() in
  libldap when available in liblber.

Daniel Stenberg (11 Mar 2007)
- can just as well NULLify the pointer in a single spot

- reverted the pselect patch => http://curl.haxx.se/mail/lib-2007-03/0100.html

Yang Tse (11 Mar 2007)
- fix compiler warning: unused variable

Daniel Stenberg (10 Mar 2007)
- Eygene Ryabinkin fixed a use-after-free issue with HTTP transfers with the
  multi interface

- Bryan Henderson

- - Bryan Henderson introduces two things:
    1) the progress callback gets called more frequently (at times)
    2) libcurl *might* call the callback when it receives a signal

- pycurl 7.16.1

Yang Tse (10 Mar 2007)
- change max allowed time for this test to complete to 90 seconds

Dan Fandrich (9 Mar 2007)
- Updated the test harness to add a new "crypto" feature check and updated the
  appropriate test case to use it.  For now, this is treated the same as the
  "SSL" feature because curl doesn't list it separately.

Daniel Stenberg (9 Mar 2007)
- - Robert Iakobashvili fixed CURLOPT_INTERFACE for IPv6.

- - Robert A. Monat improved the maketgz and VC6/8 generating to set the correct
    machine type too.

- - Justin Fletcher fixed a file descriptor leak in the curl tool when trying to
    upload a file it couldn't open. Bug #1676581
    (http://curl.haxx.se/bug/view.cgi?id=1676581)

Dan Fandrich (9 Mar 2007)
- Updated the test harness to check for protocol support before running each
  test, fixing KNOWN_BUGS #11.  Fixed some tests to more accurately specify
  their required servers and features.

- Made a few cleanups.

- Added SSL as a required feature for test case 400.

Yang Tse (8 Mar 2007)
- remove code superceeded by the new method used to force
  libtool to skip C++ and Fortran checks in patchset:
  http://cool.haxx.se/cvs.cgi/curl/ares/configure.ac.diff?r1=1.60&r2=1.64

Dan Fandrich (8 Mar 2007)
- Added test infrastructure to support basic FTPS tests.  This currently
  supports only ftps:// URLs with --ftp-ssl-control specified, which
  implicitly encrypts the control channel but not the data channels.  That
  allows stunnel to be used with an unmodified ftp server in exactly the
  same way that the test https server is set up.
  Added test case 400 as a basic FTPS test.

- Honour --ftp-ssl-control on ftps:// URLs to allow encrypted control and
  unencrypted data connections.

Yang Tse (7 Mar 2007)
- fix test leftover in previous commit

- force libtool to build static libraries with PIC on AMD64

- Autoconf redefines the M4 builtin macro 'm4_undefine' in such a way that
  it fails if the macro that is being undefined is not already defined. To
  make this work under all cases and be sure that at a certain point some
  specific macro isn't defined we must use the following style in configure:
  
  m4_ifdef([macro], [m4_undefine([macro])])

Dan Fandrich (6 Mar 2007)
- Fixed a couple of problems detected by valgrind in test cases 181 & 216

- Autoconf 2.57 didn't like these m4_undefine for some reason (probably a bug).
  Luckily, they weren't needed.

Yang Tse (6 Mar 2007)
- skip libtool C++ and Fortran linker checks

- skip libtool C++ and Fortran checks

- stricter newline policy

- 30 seconds isn't long enough for this test on a loaded server.

- stricter newline policy

Daniel Stenberg (2 Mar 2007)
- - Robert A. Monat and Shmulik Regev helped out to fix the new */Makefile.vc8
    makefiles that are included in the source release archives, generated from
    the Makefile.vc6 files by the maketgz script. I also modified the root
    Makefile to have a VC variable that defaults to vc6 but can be overridden to
    allow it to be used for vc8 as well. Like this:
  
      nmake VC=vc8 vc

- remove unncessary and wrong remark

Yang Tse (1 Mar 2007)
- Reduce the posibility of leaving the sockfilter hanging around when
  tearing down the test ftp server due to a read error condition.

- Do not remove CURLM_STATE_WAITPROXYCONNECT from the CURLMstate enum
  in builds with HTTP support disabled to keep consistent enum values
  for CURLMstate in all kind of builds.

- proper symbol definition check for Novell NetWare

- proper symbol definition check for all AmigaOS flavours

Daniel Stenberg (28 Feb 2007)
- clarify that -K files are expected to have one option per line

Yang Tse (28 Feb 2007)
- protect from themselves those who need it

- log a 1120 chars long string to aid in quoted-printable and soft
  line break detection in daily build logs.

Daniel Stenberg (27 Feb 2007)
- - Hang Kin Lau found and fixed: When I use libcurl to connect to an https
    server through a proxy and have the remote https server port set using the
    CURLOPT_PORT option, protocol gets reset to http from https after the first
    request.
  
    User defined URL was modified internally by libcurl and subsequent reuse of
    the easy handle may lead to connection using a different protocol (if not
    originally http).
  
    I found that libcurl hardcoded the protocol to "http" when it tries to
    regenerate the URL if CURLOPT_PORT is set. I tried to fix the problem as
    follows and it's working fine so far

Gisle Vanem (27 Feb 2007)
- Added "CSOURCES = $(CURL_SOURCES)".

- Added TOPDIR variable. Put dependencies in external file.
  Added -DHAVE_STRUCT_TIMEVAL to CFLAGS.

- Remove $(CURL_SOURCES).

- Added TOPDIR variable. Put dependencies in external file.
  config.h includes ../lib/config.dos.

- Added TOPDIR variable. Put dependencies in external file.

- Added TOPDIR variable. Updated package locations.
  Simplified dependency generation.

Daniel Stenberg (27 Feb 2007)
- HTTP Digest header parsing fix

- Somewhat updated, changes include: I tried to be more agnostic about the
  specific SSL library that might be used, and I cut out the closepolicy stuff
  that we no longer support

Yang Tse (27 Feb 2007)
- no proxy support if libcurl is built with HTTP disabled

Daniel Stenberg (26 Feb 2007)
- Jose Kahan pointed out a Digest server that provided the algorith last in the
  header line without quotes and with a CRLF immediately following...

Gisle Vanem (26 Feb 2007)
- Removed inclusion of <sys/types.h> in .c-files
  since it's already included through "setup.h".

- Removed inclusion of <sys/types.h> and <sys/stat.h> in .c-files
  since they're already included through "setup.h".

- Removed unneeded 'HAVE_x' defines.

- Fix typo.

- Constify some arguments.

- Use dynamic version of libcurl. Use '\' in dependencies.

Daniel Stenberg (25 Feb 2007)
- Two new mirrors, but the total amount of mirrors still don't go up very much
  due to the frequent dying of mirrors...

- - Adam D. Moss made the HTTP CONNECT procedure less blocking when used from
    the multi interface. Note that it still does a part of the connection in a
    blocking manner.

- Works for me

- - Added warning outputs if the command line uses more than one of the options
    -v, --trace and --trace-ascii, since it could really confuse the user.
    Clarified this fact in the man page.

- setting CURLOPT_PROXY to "" explicitly disables the use of a proxy (even if
  there is an environment variable set)

Dan Fandrich (22 Feb 2007)
- 5 seconds isn't always enough time to start a server on a loaded system.

Yang Tse (22 Feb 2007)
- remove redundant check in timestamp detection

- include <sys/types.h> when checking availability of the bool type

- compiler warning fix

- Fix compiler warning "statement is unreachable"

- Fix compiler warnings
  
  "case label value exceeds maximum value for type" and
  "comparison is always false due to limited range of data type"
  
  Both triggered when using a bool variable as the switch variable
  in a switch statement and using enums for the case targets.

- Check for stdbool.h at configuration stage, and include it if available.
  
  Check for lowercase 'bool' type at configuration stage. If not available
  provide a suitable replacement with a type definition of 'unsigned char'
  in setup_once.h
  
  Move definitions of TRUE and FALSE to setup_once.h

Daniel Stenberg (21 Feb 2007)
- silence two cases of "comparison between signed and unsigned"

- - Ravi Pratap provided work on libcurl making pipelining more robust and
    fixing some bugs:
    o Don't mix GET and POST requests in a pipeline
    o Fix the order in which requests are dispatched from the pipeline
    o Fixed several curl bugs with pipelining when the server is returning
      chunked encoding:
      * Added states to chunked parsing for final CRLF
      * Rewind buffer after parsing chunk with data remaining
      * Moved chunked header initializing to a spot just before receiving
        headers

Yang Tse (21 Feb 2007)
- curlassert macro replaced with DEBUGASSERT macro defined in setup_once.h

Dan Fandrich (21 Feb 2007)
- Include some possible dependencies of arpa/inet.h

Gisle Vanem (21 Feb 2007)
- Cleanup WIN32 target using WSACleanup().

Yang Tse (21 Feb 2007)
- fix compiler warning "enumerated type mixed with another type"

Linus Nielsen Feltzing (20 Feb 2007)
- New FTP CCC functionality - adds passive and active mode to accomodate for different server behaviour

- New FTP CCC functionality - adds passive and active mode to accomodate for different server behaviour

Dan Fandrich (20 Feb 2007)
- Include network byte order conversion macros on Minix.

Yang Tse (20 Feb 2007)
- compiler warning fix

- compiler warning fix

- curl tool was using functions curlx_tvnow and curlx_tvdiff which are not
  part of the official libcurl API http://curl.haxx.se/lxr/source/lib/README.curlx
  The documented way of using them would be to use timeval.c as a source code file.
  
  The above described method works very well when statically linking libcurl and
  apps, curl tool, but has several drawbacks when you build a true shared
  libcurl (i.e. Name space clash at linkage stage as functions are defined more
  than once. Windows makefiles are not capable of handling this system of
  source-level sharing)
  
  So...
  
  Now curlutil.h and curlutil.c define and implement cutil_tvnow and cutil_tvdiff
  which replace curlx_tvnow and curlx_tvdiff for the curl tool. Doing this we
  avoid the above described problems.

- Move header file inclusion logic and definition of timeval
  struct for platforms that don't have it to setup_once.h

- Several corrections & changes to what has been stated in revision 1.45
  
  1) The maketgz script does not insert the timestamp in curlver.h,
     it actually updates it. For CVS versions it is the "CVS" string.
  
  2) testcurl.pl will always print the "date" string which represents
     the moment the test build is run.
  
  3) testcurl.pl may not print the "timestamp" string since the script
     may end before it is printed out. (i.e. unable to update from CVS)
  
  4) The "timestamp" string printed will be the same as the "date" one
     unless one of the following conditions is met.
  
     *) It is a tarball-based build. Timestamp will be creation time.
  
     *) CVS update has been done. Timestamp will be end of CVS update.

- add tutil_tvdiff_secs() for completeness

Dan Fandrich (19 Feb 2007)
- Mention curl-config dependencies fix.

Yang Tse (19 Feb 2007)
- fix typo

- Show libcurl's timestamp. This timestamp is only available in curlver.h
  for tarball-based tests and builds, the maketgz script inserts it when
  the tarball is created. For CVS-based tests and builds the timestamp we
  show is the current UTC build time as it is the CVS version timestamp.
  
  In this way, all builds will have a valid source code timestamp which
  isn't related to the moment the tests and build is performed, with the
  exception of CVS-based ones which have the same "date" and "timestamp"

Gisle Vanem (19 Feb 2007)
- Added ares_parse_ns_reply.obj etc.

- INADDR_NONE no longer used.

- Fixed typo.

Daniel Stenberg (19 Feb 2007)
- Vlad Dinulescu added ares_parse_ns_reply()

- Ian Turner fixed the libcurl.m4 macro's support for --with-libcurl.
  AC_PATH_PROG was not used properly.

- - Shmulik Regev found a memory leak in re-used HTTPS connections, at least
    when the multi interface was used.

- and fix warnings due to lack of protos

- - Robson Braga Araujo made passive FTP transfers work with SOCKS (both 4 and
    5).

- fixed code to compile and removed one warning

Yang Tse (19 Feb 2007)
- log a message, stating the need of openssl to run this test

- Oops missing var

- compiler warning fix

- add debug messages for initialization failures

Daniel Stenberg (18 Feb 2007)
- - Jeff Pohlmeyer identified two problems: first a rather obscure problem with
    the multi interface and connection re-use that could make a
    curl_multi_remove_handle() ruin a pointer in another handle.
  
    The second problem was less of an actual problem but more of minor quirk:
    the re-using of connections wasn't properly checking if the connection was
    marked for closure.

Yang Tse (18 Feb 2007)
- Michal Marek comment fix

- fix ENAMETOOLONG and ENOTEMPTY may already be defined in errno.h

Dan Fandrich (17 Feb 2007)
- Use configure's new LIBCURL_LIBS variable

Yang Tse (17 Feb 2007)
- Move portable error number symbolic name definitions to setup_once.h

- compiler warning fix

- Replicate the configure tests that determined that timeval was available.

- compiler warning fix

Dan Fandrich (17 Feb 2007)
- Do a better job at determining what test servers *really* need to link against.

- getpart implicitly drags in some networking functions, so it needs to be
  linked to the networking libraries.

- Better separate the library dependencies into those required by libcurl
  and those required by other components to avoid forcing unneeded
  dependencies into the target objects.

- Remove C99isms

- Replicate the configure tests that determined that timeval was available.

Yang Tse (16 Feb 2007)
- add debug messages for fopen() failures

- add debug messages for fopen() failures

- use macros ERRNO, SET_ERRNO(), SOCKERRNO and SET_SOCKERRNO() for errno handling

- use macros ERRNO, SET_ERRNO(), SOCKERRNO and SET_SOCKERRNO() for errno handling

Daniel Stenberg (16 Feb 2007)
- - Duncan Mac-Vicar Prett and Michal Marek reported problems with resetting
    CURLOPT_RANGE back to no range on an easy handle when using FTP.

- maxdownload is actually -1 for unlimited

Yang Tse (16 Feb 2007)
- use macros ERRNO, SET_ERRNO(), SOCKERRNO and SET_SOCKERRNO() for errno handling

- compiler warning fix

- avoid redefinition of SET_ERRNO()

- introduce uppercase macros SOCKERRNO, SET_SOCKERRNO(), ERRNO and SET_ERRNO()
  making them available to any source code file which includes "setup.h".
  
  Macro SOCKERRNO / SET_SOCKERRNO() returns / sets the *socket-related* errno
  (or equivalent) on this platform to hide platform details to code using it.
  
  Macro ERRNO / SET_ERRNO() returns / sets the NOT *socket-related* errno
  (or equivalent) on this platform to hide platform details to code using it.

- icc 9.0 when compiling its generated code for its own FD_SET,
  FD_ISSET, and FD_ZERO macros emits warnings #1469 and #593.
  So for icc 9.0 we also ignore warnings #1469 and #593.
  * 593 warns on "variable __d0 was set but never used"
  * 1469 warns on "cc clobber ignored"

- compiler warning fix

- Do not define HAVE_GMTIME_R for native Windows builds

- Daniel Mirchandani fix to make libcurl build nicely on Winsock
  build targets when --disable-verbose is specified.

Gunter Knauf (15 Feb 2007)
- enabled IPV6 builds.

Dan Fandrich (14 Feb 2007)
- Added --ftp-ssl-ccc issue.

- Don't bother adding a library path of /usr/lib in curl-config --libs

Yang Tse (14 Feb 2007)
- Oops, missing argument separator comma

- in debug messages also show error description

- compiler warning fix

- avoid using funtion isblank() and just use our ISBLANK
  macro to provide this functionality on all platforms

- compiler warning fix

Dan Fandrich (14 Feb 2007)
- Fixed the problem of curl-config --libs specifying unneeded libraries
  dependencies to applications.

Yang Tse (14 Feb 2007)
- enhance HTTP server request input writing,
  retrying upon EINTR errors.

Daniel Stenberg (13 Feb 2007)
- ftp@example.com is now the new anonymous FTP password. I opted for 'ftp' on
  the left side of @ to make it short(er).

- - Robert A. Monat made libcurl build fine with VC2005 - it doesn't have
    gmtime_r() like the older VC versions. He also made use of some machine-
    specific defines to differentiate the "OS" define.

Dan Fandrich (13 Feb 2007)
- Added last-resort dynamic library names.

Yang Tse (13 Feb 2007)
- check for isblank() at configuration stage. If not available
  provide a suitable replacement for use in our ISBLANK macro

- use our own ISUPPER and ISLOWER macros

- use our own ISBLANK macro

- use our own ISSPACE macro

- Fix c-ares failing to get the search sequence of /etc/hosts and
  DNS from /etc/nsswitch.conf, /etc/host.conf or /etc/svc.conf when
  /etc/resolv.conf did not exist or was unable to read it.

- compiler warning fix

Daniel Stenberg (12 Feb 2007)
- mention today's LIBCURL_TIMESTAMP fix

- Rob Crittenden added support for NSS (Network Security Service) for the
  SSL/TLS layer. http://www.mozilla.org/projects/security/pki/nss/

- - Shmulik Regev fixed so that the final CRLF of HTTP response headers are sent
    to the debug callback.
  
  - Shmulik Regev added CURLOPT_HTTP_CONTENT_DECODING and
    CURLOPT_HTTP_TRANSFER_DECODING that if set to zero will disable libcurl's
    internal decoding of content or transfer encoded content. This may be
    preferable in cases where you use libcurl for proxy purposes or similar. The
    command line tool got a --raw option to disable both at once.

- Jeff Pohlmeyer for his bug fix today, but too specific to get desrcibed
  as a bugfix here ;-)

- - Jeff Pohlmeyer fixed a flaw in curl_multi_add_handle() when adding a handle
    that has an easy handle present in the "closure" list pending closure.

- When building tarballs, we also set the timestamp of the generated package. This is meant
  to primarily be used for the autobuilds to know from what point in time a particular tarball
  is, and thus what changes it contains (or not).

- updated with recent info and cut out some of the more speculating parts and
  instead focus on explaining on how the libs differ from each other

- updated

- darned tab completion on a late evening... :-P

- minor updates to reflect reality better

- file:// transfers are blocking

Yang Tse (9 Feb 2007)
- Include both testutil.c and testutil.h, and not just testutil.c, in the
  list of source files for those tests that use it. Otherwise testutil.h
  might not be found by the compiler.

- Some tests were using functions curlx_tvnow and curlx_tvdiff which are not
  part of the official libcurl API http://curl.haxx.se/lxr/source/lib/README.curlx
  The documented way of using them would be to use timeval.c as a source code file.
  
  The above described method works very well when statically linking libcurl and
  apps, test programs, but has several drawbacks when you build a true shared
  libcurl (i.e. Name space clash at linkage stage as functions are defined more
  than once. Windows makefiles are not capable of handling this system of
  source-level sharing)
  
  So...
  
  Now testutil.h and testutil.c define and implement tutil_tvnow and tutil_tvdiff
  which replace curlx_tvnow and curlx_tvdiff for the libtest programs. Doing this
  we avoid the above described problems, and the code in the testsuite does not
  impose the need to keep those functions public in libcurl even when not part of
  the API.

- Some tests were using functions curlx_tvnow and curlx_tvdiff which are not
  part of the official libcurl API http://curl.haxx.se/lxr/source/lib/README.curlx
  The documented way of using them would be to use timeval.c as a source code file.
  
  The above described method works very well when statically linking libcurl and
  apps, test programs, but has several drawbacks when you build a true shared
  libcurl (i.e. Name space clash at linkage stage as functions are defined more
  than once. Windows makefiles are not capable of handling this system of
  source-level sharing)
  
  So...
  
  Now testutil.h and testutil.c define and implement tutil_tvnow and tutil_tvdiff
  which replace curlx_tvnow and curlx_tvdiff for the libtest programs. Doing this
  we avoid the above described problems, and the code in the testsuite does not
  impose the need to keep those functions public in libcurl even when not part of
  the API.

- compiler warning fix

- use macro AC_AIX to define `_ALL_SOURCE', if on AIX.

Daniel Stenberg (7 Feb 2007)
- SCP upload done non-blocking

Yang Tse (7 Feb 2007)
- use same AIX XLC compiler options as curl's

- AIX xlc has to have strict aliasing turned off. If not, the optimizer
  assumes that pointers can only point to an object of the same type.

- *) Remove duplicate declaration of TYPE_SOCKADDR_STORAGE
  *) Update CURL_CC_DEBUG_OPTS from curl's script

Gisle Vanem (6 Feb 2007)
- INADDR_NONE no longer used.

- Added debug option ('-d') for Watt-32 programs.

- Added HAVE_PROCESS_H for DOS/Win32.
  Include <process.h> for getpid() in ares_init.c.

- Fix compiler warning.

- Include <sys/time.h> and <unistd.h> inside HAVE_x_H.
  Added 'optind' and 'optarg' as in adig.c.

- Include <sys/time.h> and <unistd.h> inside HAVE_x_H.

Yang Tse (6 Feb 2007)
- fix for millisecond resolution timeouts

- compiler warning fix

Daniel Stenberg (6 Feb 2007)
- non-blocking SSH stuff

- read SFTP with the non-blocking API

Yang Tse (6 Feb 2007)
- compiler warning fix

Daniel Stenberg (5 Feb 2007)
- - Michael Wallner provided a patch that adds support for CURLOPT_TIMEOUT_MS
    and CURLOPT_CONNECTTIMEOUT_MS that, as their names should hint, do the
    timeouts with millisecond resolution instead. The only restriction to that
    is the alarm() (sometimes) used to abort name resolves as that uses full
    seconds. I fixed the FTP response timeout part of the patch.
  
    Internally we now count and keep the timeouts in milliseconds but it also
    means we multiply set timeouts with 1000. The effect of this is that no
    timeout can be set to more than 2^31 milliseconds (on 32 bit systems), which
    equals 24.86 days.  We probably couldn't before either since the code did
    *1000 on the timeout values on several places already.

Gisle Vanem (5 Feb 2007)
- Remove '-Dselect=select_s'. Remove depend.dj-

Yang Tse (5 Feb 2007)
- compiler warning fix

- cookie expiry date in several test cases set to year 2030/2035

- Year 2038 has its own problems (32 bit integer overflow).
  So cookie expiration date is lowered to expire at most in 2035.

Gisle Vanem (4 Feb 2007)
- Use correct 3rd argument for ioctlsocket() under Watt-32.

- Use correct calling convention.

- Added DllMain() function for Watcom.

- Suppress warning "'nread' might be used uninitialized in this function".

- Constify argument to suburl(). Remove trailing space.

Daniel Stenberg (3 Feb 2007)
- some additional info

Yang Tse (3 Feb 2007)
- compiler warning fix

Daniel Stenberg (3 Feb 2007)
- - Yang Tse fixed the cookie expiry date in several test cases that started to
    fail since they used "1 feb 2007"...
  
  - Manfred Schwarb reported that socks5 support was broken and help us pinpoint
    the problem. The code now tries harder to use httproxy and proxy where
    apppropriate, as not all proxies are HTTP...

- - Manfred Schwarb reported that socks5 support was broken and help us pinpoint
    the problem. The code now tries harder to use httproxy and proxy where
    apppropriate, as not all proxies are HTTP...

Yang Tse (2 Feb 2007)
- compiler warning fix

- add debug messages for initialization failures

- add missing strings for existing error codes

- move DEBUGF macro definition to setup_once.h

Daniel Stenberg (2 Feb 2007)
- prefer using the (upcoming) non-blocking libssh2 API

- don't require OpenSSL for libssh2 linking to work, in preparation for
  upcoming libgcrypt-capable libssh2-versions

Yang Tse (2 Feb 2007)
- fix leftover updating cookie expiration date

- In testsuite, update test cookies expiration from 2007-Feb-1 to 2038-Feb-1

- reported in bug: #1566077 the former URL mentioned in the generated cookie
  jar has died and we now instead point out our own version of that

- fix test case 62 which was failing due to cookies expiring 1 Feb 2007

- more fixes for the testsuite cookie expiration issue

- cookie expiration time got us with pants at our knees.
  Next time in 2038 :-)

- compiler warning fix

Gisle Vanem (1 Feb 2007)
- Suppress the "'convbuf' might be used uninitialized in this function" warning.

Yang Tse (1 Feb 2007)
- fogot to change Curl_mk_connc in header file

- compiler warning fix

Dan Fandrich (31 Jan 2007)
- Properly use libtool macros to fix OpenLDAP library name detection on Darwin.

Yang Tse (31 Jan 2007)
- add debug messages for initialization failures

- when using select() instead of poll, skip the test if the number of
  open file descriptors is greater than FD_SETSIZE minus SAFETY_MARGIN,
  also skip the test if any of the open file descriptors has a number
  greater than FD_SETSIZE minus SAFETY_MARGIN.

Daniel Stenberg (31 Jan 2007)
- Marty Kuhrt's VMS updates

Yang Tse (30 Jan 2007)
- fix temp string buffer variable name

Gisle Vanem (30 Jan 2007)
- Support for OpenWatcom (Win32): It do have getpid(), but no
  <sys/time.h>.

Daniel Stenberg (30 Jan 2007)
- start working on 7.16.2

Yang Tse (30 Jan 2007)
- skip test on platforms on which we use select() instead
  of poll() and select() happens to be bound by FD_SETSIZE

- fix compiler warning "discards qualifiers from pointer target type" in debug builds

Daniel Stenberg (29 Jan 2007)
- the same source file is re-used for multiple tests and I missed to add the
  timval.c dependency on some of those

Gisle Vanem (29 Jan 2007)
- Some compilers lacks <sys/time.h>. Include "timeval.h" to simplify the #ifdefs.

- Use DOS line-endings.

Version 7.16.1 (29 Jan 2007)

Daniel Stenberg (29 Jan 2007)
- release time

- the user-agent fix

- the libtest source codes that use curlx_tv* functions MUST use the
  lib/timeval.c source code since those functions are not in the API (and might
  not be accessible)

- - Michael Wallner reported that when doing a CONNECT with a custom User-Agent
    header, you got _two_ User-Agent headers in the CONNECT request...! Added
    test case 287 to verify the fix.

Gunter Knauf (29 Jan 2007)
- fixed segfault when compiled with MingW32 and cmd or command shell.

Daniel Stenberg (28 Jan 2007)
- Andreas Rieke added extra infof() for when a connection is not re-used due to
  SSL conditions not being the same

- silence compiler warnings

Gunter Knauf (28 Jan 2007)
- enabled build with sspi.

- enabled build with hardcoded ca-bundle path;
  added distclean target.

- force to create ca-bunde.h even if it exists already.

- use var for awk.

Daniel Stenberg (28 Jan 2007)
- curl_easy_reset() now resets the CA bundle path correctly

Gunter Knauf (28 Jan 2007)
- another small fix to directory listing output; disabled CURL_LIBSSH2_DEBUG.

Daniel Stenberg (28 Jan 2007)
- recent contributors

Yang Tse (28 Jan 2007)
- Compiler warning fix

Daniel Stenberg (27 Jan 2007)
- - David McCreedy fixed the Curl command line tool for HTTP on non-ASCII
    platforms.

Gunter Knauf (27 Jan 2007)
- fix sftp directory listing so that it works without -v and is redirectable with -o/-O.

- tell us what we put out here...

Yang Tse (27 Jan 2007)
- update copyright year notice

- Compiler warning fix

- sync with lib/setup_once.h

- sync comment with reality

Gunter Knauf (26 Jan 2007)
- remove the res file too with clean target.

- removed CFLAGS from linking.

- fix redefine warning when build from CVS.

Dan Fandrich (26 Jan 2007)
- Fixed compiler warning.

Gisle Vanem (26 Jan 2007)
- Remove LoadLibrary() (from my private build).

- Free 'config->libcurl' at exit.

- Use "%Od" instead of CURL_FORMAT_OFF_T for <curlx.h> functions.

- Options of type CURLOPTTYPE_FUNCTIONPOINT are never printable.

Gunter Knauf (26 Jan 2007)
- updated mingw build instructions for libssh2.

- added project header to lib resource file; fixed header copyright.

- use provided resource file for exe.

Daniel Stenberg (25 Jan 2007)
- fix compiler warnings for SSL-disabled builds

- ugha, prevent a buffer overflow and allow very long strings in the generated
  libcurl source...

- - Added the --libcurl [file] option to curl. Append this option to any
    ordinary curl command line, and you will get a libcurl-using source code
    written to the file that does the equivalent operation of what your command
    line operation does!

Gunter Knauf (25 Jan 2007)
- removed unused define.

- set proper lib extension for non-configure mingw32 builds on Win32.

- fixed copyright for new year.

- added targets for libssh2 builds.

- enabled build with libssh2.

Daniel Stenberg (25 Jan 2007)
- fix non-SSL builds again

Dan Fandrich (25 Jan 2007)
- Fixed a dangling pointer problem that prevented the http_proxy environment
  variable from being properly used in many cases (and caused test case 63
  to fail).

Gunter Knauf (25 Jan 2007)
- removed not used define.

Dan Fandrich (24 Jan 2007)
- Only shut down SSL if the CCC command succeeded.

Daniel Stenberg (24 Jan 2007)
- moved the SSL pending function to the proper place and name

- bail out on strdup() errors

- - David McCreedy did NTLM changes mainly for non-ASCII platforms:
  
    #1
    There's a compilation error in http_ntlm.c if USE_NTLM2SESSION is NOT
    defined.  I noticed this while testing various configurations.  Line 867 of
    the current http_ntlm.c is a closing bracket for an if/else pair that only
    gets compiled in if USE_NTLM2SESSION is defined.  But this closing bracket
    wasn't in an #ifdef so the code fails to compile unless USE_NTLM2SESSION was
    defined.  Lines 198 and 140 of my patch wraps that closing bracket in an
    #ifdef USE_NTLM2SESSION.
  
    #2
    I noticed several picky compiler warnings when DEBUG_ME is defined.  I've
    fixed them with casting.  By the way, DEBUG_ME was a huge help in
    understanding this code.
  
    #3
    Hopefully the last non-ASCII conversion patch for libcurl in a while.  I
    changed the "NTLMSSP" literal to hex since this signature must always be in
    ASCII.
  
    Conversion code was strategically added where necessary.  And the
    Curl_base64_encode calls were changed so the binary "blobs" http_ntlm.c
    creates are NOT translated on non-ASCII platforms.

- recount

- #79 is no problem to me (and no response on my mail)

- very minor indent change

Dan Fandrich (23 Jan 2007)
- Ignore XML DOCTYPEs and declarations.

Gisle Vanem (23 Jan 2007)
- Speed-up djgpp's stat() by avoid checking for uneeded stuff.

Dan Fandrich (23 Jan 2007)
- Convert (most of) the test data files into genuine XML.  A handful still
  are not, due mainly to the lack of support for XML character entities
  (e.g. & => &amp; ).  This will make it easier to validate test files using
  tools like xmllint, as well as edit and view them using XML tools.

Gunter Knauf (23 Jan 2007)
- enabled build with libssh2; fixed copyright for new year..

Dan Fandrich (18 Jan 2007)
- Make the test script tag parser a bit more robust.
  Check for the .exe extension on mingw32 builds.

- Added precheck that curl supports the 'openssl' engine in test 307.

- Fixed some tag typos in the test data files.

- Disabled test 307 for now.

Gisle Vanem (17 Jan 2007)
- Supress "comparison between signed and unsigned" warning.

Daniel Stenberg (17 Jan 2007)
- two other still outstanding issues

- more reported bugs we need to address at some point, possibly before a release

- clarify the INFILESIZE option(s)

- David McCreedy fixed a flaw from his previous non-ascii HTTP patch

- - Armel Asselin improved libcurl to behave a lot better when an easy handle
    doing an FTP transfer is removed from a multi handle before completion. The
    fix also fixed the "alive counter" to be correct on "premature removal" for
    all protocols.

- restore previous addition to the amount of data that is returned

Dan Fandrich (16 Jan 2007)
- Added simple OpenSSL crypto engine tests.

- Fixed a small memory leak in tftp uploads discovered by curl's memory leak
  detector.  Also changed tftp downloads to URL-unescape the downloaded
  file name.

- Added TFTP upload tests.

- Leave the TFTPD test server running after a file upload.
  Flush the protocol log data so it's immediately available to the test harness.

Daniel Stenberg (14 Jan 2007)
- - David McCreedy provided libcurl changes for doing HTTP communication on
    non-ASCII platforms. It does add some complexity, most notably with more
    #ifdefs, but I want to see this supported added and I can't see how we can
    add it without the extra stuff added.

- 4GB download and cookielist "ALL" fixes

- fixed bad variable use when getting the size which we should read when
  attempting not to read data that might belong to the next response (if
  pipelining)

- make Curl_cookie_clearall() survive getting called with a NULL pointer

Dan Fandrich (10 Jan 2007)
- Added test for TFTP retrieve of boundary case 512 byte file.

- Display crypto engine name correctly in debug message.

- Added test of TFTP server error reporting.

Daniel Stenberg (9 Jan 2007)
- corrected example

Linus Nielsen Feltzing (8 Jan 2007)
- Correct error code for CCC/SSL shutdown failure

- Removed unused variable in Curl_ossl_shutdown()

Daniel Stenberg (8 Jan 2007)
- no suprise really, but it works fine on SH4 as well...

Linus Nielsen Feltzing (6 Jan 2007)
- Fix compilation errors when building without SSL

Daniel Stenberg (5 Jan 2007)
- - Linus Nielsen Feltzing introduced the --ftp-ssl-ccc command line option to
    curl that uses the new CURLOPT_FTP_SSL_CCC option in libcurl. If enabled, it
    will make libcurl shutdown SSL/TLS after the authentication is done on a
    FTP-SSL operation.

Gisle Vanem (5 Jan 2007)
- Include <dos.h> for delay() on MSDOS.

Daniel Stenberg (4 Jan 2007)
- prevent compiler warning since we use base64.h from libcurl which now has
  function(s) using SessionHandle pointers

- one issue less before release

- - David McCreedy made changes to allow base64 encoding/decoding to work on
    non-ASCII platforms.

- new year

- - Matt Witherspoon fixed the flaw which made libcurl 7.16.0 always store
    downloaded data in two buffers, just to be able to deal with a special HTTP
    pipelining case. That is now only activated for pipelined transfers. In
    Matt's case, it showed as a considerable performance difference,

- - Victor Snezhko helped us fix bug report #1603712
    (http://curl.haxx.se/bug/view.cgi?id=1603712) (known bug #36) --limit-rate
    (CURLOPT_MAX_SEND_SPEED_LARGE and CURLOPT_MAX_RECV_SPEED_LARGE) are broken
    on Windows (since 7.16.0, but that's when they were introduced as previous
    to that the limiting logic was made in the application only and not in the
    library). It was actually also broken on select()-based systems (as apposed
    to poll()) but we haven't had any such reports. We now use select(), Sleep()
    or delay() properly to sleep a while without waiting for anything input or
    output when the rate limiting is activated with the easy interface.

- - Modified libcurl.pc.in to use Libs.private for the libs libcurl itself needs
    to get built static. It has been mentioned before and was again brought to
    our attention by Nathanael Nerode who filed debian bug report #405226
    (http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=405226).

- curl_easy_cleanup kills this memory too

- curl_easy_duphandle() sets the magic number in the new handle

- mention the no_proxy work

- - Robert Foreman provided a prime example snippet showing how libcurl would
    get confused and not acknowledge the 'no_proxy' variable properly once it
    had used the proxy and you re-used the same easy handle. I made sure the
    proxy name is properly stored in the connect struct rather than the
    sessionhandle/easy struct.

- Curl_getinfo() now checks for a NULL SessionHandle pointer

- - David McCreedy fixed a bad call to getsockname() that wrongly used a size_t
    variable to point to when it should be a socklen_t.

- When setting a proxy with environment variables and (for example) running
  'curl [URL]' with a URL without a protocol prefix, curl would not send a
  correct request as it failed to add the protocol prefix.

- minor indent fix

- removed unused variables

- Robson Braga Araujo reported bug #1618359
  (http://curl.haxx.se/bug/view.cgi?id=1618359) and subsequently provided a
  patch for it: when downloading 2 zero byte files in a row, curl 7.16.0
  enters an infinite loop, while curl 7.16.1-20061218 does one additional
  unnecessary request.
  
  Fix: During the "Major overhaul introducing http pipelining support and
  shared connection cache within the multi handle." change, headerbytecount
  was moved to live in the Curl_transfer_keeper structure. But that structure
  is reset in the Transfer method, losing the information that we had about
  the header size. This patch moves it back to the connectdata struct.

- CURLOPT_CAPATH is OpenSSL-only

- * removed the SSH-based protocols as they are now being implemented
  * added mentioning of doing the stunnel equivalent ourselves for the test suite
  * spell-check

- 37. Having more than one connection to the same host when doing NTLM
    authentication (with performs multiple "passes" and authenticates a
    connection rather than a HTTP request), and particularly when using the
    multi interface, there's a risk that libcurl will re-use a wrong connection
    when doing the different passes in the NTLM negotiation and thus fail to
    negotiate (in seemingly mysterious ways).
  
  36. --limit-rate (CURLOPT_MAX_SEND_SPEED_LARGE and
    CURLOPT_MAX_RECV_SPEED_LARGE) are broken on Windows (since 7.16.0, but
    that's when they were introduced as previous to that the limiting logic was
    made in the application only and not in the library). This problem is easily
    repeated and it takes a Windows person to fire up his/hers debugger in order
    to fix. http://curl.haxx.se/bug/view.cgi?id=1603712

- recv() doesn't take MSG_NOSIGNAL in its forth argument so let's not pass it.
  Brendan Jurd pointed out.

- Brendan Jurd provided a fix that now prevents libcurl from getting a SIGPIPE
  during certain conditions when GnuTLS is used.

- Brendan Jurd pointed out these typos

Gisle Vanem (15 Dec 2006)
- Plug more leaks.

- Fix typo.

Daniel Stenberg (14 Dec 2006)
- minor syntax mistake

Gisle Vanem (14 Dec 2006)
- Free 'config->iface' if set.

- ahost.exe needs getopt.obj.

Daniel Stenberg (11 Dec 2006)
- Alexey Simak found out that when doing FTP with the multi interface and
  something went wrong like it got a bad response code back from the server,
  libcurl would leak memory. Added test case 538 to verify the fix.
  
  I also noted that the connection would get cached in that case, which
  doesn't make sense since it cannot be re-use when the authentication has
  failed. I fixed that issue too at the same time, and also that the path
  would be "remembered" in vain for cases where the connection was about to
  get closed.

- PROT_CLOSEACTION doesn't have to be its own bit but can just as well just
  include the protocol bits of such actions, which currently only means FTP

- fixed the printf formatting after I changed the type of 'excess'

- 7.16.1 knows SFTP too

- clarify --limit-rate somewhat: it might send away/receive chunks of date in
  temporarily higher speeds than requested, but the given limiting is considered
  "over time" and is an average

- Sebastien Willemijns reported bug #1603712
  (http://curl.haxx.se/bug/view.cgi?id=1603712) which is about connections
  getting cut off prematurely when --limit-rate is used. While I found no such
  problems in my tests nor in my reading of the code, I found that the
  --limit-rate code was severly flawed (since it was moved into the lib, since
  7.15.5) when used with the easy interface and it didn't work as documented so
  I reworked it somewhat and now it works for my tests.

- Stefan Krause pointed out a compiler warning with a picky MSCV compiler when
  passing a curl_off_t argument to the Curl_read_rewind() function which takes
  an size_t argument. Curl_read_rewind() also had debug code left in it and it
  was put in a different source file with no good reason when only used from
  one single spot.

- removed the final traces of the closepolicy option

- update after today's work

- Sh Diao reported that CURLOPT_CLOSEPOLICY doesn't work, and indeed, there is
  no code present in the library that receives the option. Since it was not
  possible to use, we know that no current users exist and thus we simply
  removed it from the docs and made the code always use the default path of
  the code.

- Jared Lundell filed bug report #1604956
  (http://curl.haxx.se/bug/view.cgi?id=1604956) which identified setting
  CURLOPT_MAXCONNECTS to zero caused libcurl to SIGSEGV. Starting now, libcurl
  will always internally use no less than 1 entry in the connection cache.

- better preprocessor check for recent MSVC versions

- CURLOPT_FORBID_REUSE works again with a cleaned up order of doing things in
  Curl_done()

- oops, fix belonging to the previous curl_getdate() fix since it makes MSVC
  use gmtime_r

- Martin Skinner brought back bug report #1230118 to haunt us once again.
  (http://curl.haxx.se/bug/view.cgi?id=1230118) curl_getdate() did not work
  properly for all input dates on Windows. It was mostly seen on some TZ time
  zones using DST. Luckily, Martin also provided a fix.

- Alexey Simak filed bug report #1600447
  (http://curl.haxx.se/bug/view.cgi?id=1600447) in which he noted that active
  FTP connections don't work with the multi interface. The problem is here that
  the multi interface state machine has a state during which it can wait for the
  data connection to connect, but the active connection is not done in the same
  step in the sequence as the passive one is so it doesn't quite work for
  active. The active FTP code still use a blocking function to allow the remote
  server to connect.
  
  The fix (work-around is a better word) for this problem is to set the
  boolean prematurely that the data connection is completed, so that the "wait
  for connect" phase ends at once.

- Matt Witherspoon fixed a problem case when the CPU load went to 100% when a
  HTTP upload was disconnected:
  
  "What appears to be happening is that my system (Linux 2.6.17 and 2.6.13) is
  setting *only* POLLHUP on poll() when the conditions in my previous mail
  occur. As you can see, select.c:Curl_select() does not check for POLLHUP. So
  basically what was happening, is poll() was returning immediately (with
  POLLHUP set), but when Curl_select() looked at the bits, neither POLLERR or
  POLLOUT was set. This still caused Curl_readwrite() to be called, which
  quickly returned. Then the transfer() loop kept continuing at full speed
  forever."

- curl.dsmirror.nl is another mirror

- fixed in CVS

- fix the libssh2 include path somewhat when --with-libssh2 is used and added
  a warning output if no OpenSSL was found

- CURLOPT_CLOSEPOLICY can't be set

- Toon Verwaest reported that there are servers that send the Content-Range:
  header in a third, not suppported by libcurl, format and we agreed that we
  could make the parser more forgiving to accept all the three found
  variations.

- the extra copy of downloads should be fixed too

- two more

- Is CURLOPT_FORBID_REUSE broken?

- adding notes of what to work on and fix before next release

- no need to access it with conn->data since data is already a local variable
  holding the conn->data value

- added the new test 282

- Venkat Akella found out that libcurl did not like HTTP responses that simply
  responded with a single status line and no headers nor body. Starting now, a
  HTTP response on a persistent connection (i.e not set to be closed after the
  response has been taken care of) must have Content-Length or chunked
  encoding set, or libcurl will simply assume that there is no body.
  
  To my horror I learned that we had no less than 57(!) test cases that did bad
  HTTP responses like this, and even the test http server (sws) responded badly
  when queried by the test system if it is the test system. So although the
  actual fix for the problem was tiny, going through all the newly failing test
  cases got really painful and boring.

- James Housley fixed SCP downloading by setting the maxdownload.

Yang Tse (25 Nov 2006)
- Make sure RETSIGTYPE is properly defined

Daniel Stenberg (24 Nov 2006)
- James Housley did lots of work and introduced SFTP downloads.

Yang Tse (24 Nov 2006)
- Define HAVE_SIGNAL_H, HAVE_SIG_ATOMIC_T and HAVE_SIG_ATOMIC_T_VOLATILE
  as appropriate for platforms that don't have autotools support

Daniel Stenberg (22 Nov 2006)
- Michael Wallner fixed this problem: When I set domains in the options
  struct, and there are domain/search entries in /etc/resolv.conf, the domains
  of the options struct will be overridden.

- Install ares_dns.h too

Yang Tse (22 Nov 2006)
- Added a check in configure that verifies if <signal.h> is available,
  defining HAVE_SIGNAL_H if the header is available.
  
  Added a check in configure that tests if the sig_atomic_t type is
  available, defining HAVE_SIG_ATOMIC_T if it is available. Providing
  a suitable default in setup_once.h if not available.
  
  Added a check in configure that tests if the sig_atomic_t type is
  already defined as volatile, defining HAVE_SIG_ATOMIC_T_VOLATILE
  if it is available and already defined as volatile.

Daniel Stenberg (21 Nov 2006)
- new french mirror

Yang Tse (20 Nov 2006)
- Revert ftpserver.pl back to revision 1.74 Adding change done in 1.76
  This is done to back out changes done in revisions 1.77 and 1.75

- Revert runtests.pl back to revision 1.212
  This is done to back out changes done from revisions 1.213 to 1.217

- Revert ftp.pm back to revision 1.5 Adding copyright notice.
  This is done to back out changes done from revisions 1.6 to 1.10

- Add some message logging

- stop slaves before stopping servers

- Revert to KILL test servers until all test servers
  have proper TERM and INT signal handlers implemented.

Daniel Stenberg (19 Nov 2006)
- log the sleep, like when done in test 190

- Frank Teo provided an updated, mostly docs changed

Yang Tse (19 Nov 2006)
- Avoid passing child pid and test server pid, using the running
  servers hash, and adjust message arguments accordingly.

- Comment out the use of the "warnings" module now that ftp.pm seems to
  be clear of warnings. Uncomment it if this module is further modified.
  
  The "warnings" module requires perl 5.006 or later. Previous perl
  versions don't have it and die on missing modules.

Daniel Stenberg (18 Nov 2006)
- new ruby binding, new tclcurl release

Yang Tse (18 Nov 2006)
- Avoid keeping dupe pids When forked pid and test server pid is the same one.

- Fix warning "Use of uninitialized value in ...".
  If the list has only one item avoid sort subroutine.

- The hash of running servers is now a hash of hashes which for each running
  server holds not only its two main pids, but also the pidfile of the test
  server and the 'slavepidfiles' for ftp* servers. This allows a better control
  when stopping servers.
  
  Now from runtests.pl when test servers are stopped they are signalled in
  sequence TERM, INT and KILL allowing time in between for them to die. This
  will give us a chance of gracefully stopping test servers, which we didn't
  have when we were killing them in first instance.

Gisle Vanem (15 Nov 2006)
- Call libssh2_session_free() to release memory allocated during
  libssh2 startup.

- Free 'scp->path' in case of libssh2 setup failure.

Daniel Stenberg (13 Nov 2006)
- Ron in bug #1595348 (http://curl.haxx.se/bug/view.cgi?id=1595348) pointed
  out a stack overwrite (and the corresponding fix) on 64bit Windows when
  dealing with HTTP chunked encoding.

- bug #1595348 by Ron pointed out this flaw and fix

- Tor Arntsen spotted this mistake

- we did 1.3.2 and are now on the 1.3.3 track!

- fix header to match actual proto

- cleaned up Curl_write() and the sub functions it uses for various protocols.
  They all now return ssize_t to Curl_write().
  
  Unfortunately, Curl_read() is in a sorrier state but it too would benefit from
  a similar cleanup.

- Nir Soffer updated libcurl.framework.make: fix symlinks, should link to
  Versions, not to ./Versions and indentation improvments

- Dmitriy Sergeyev found a SIGSEGV with his test04.c example posted on 7 Nov
  2006. It turned out we wrongly assumed that the connection cache was present
  when tearing down a connection.

- Ciprian Badescu found a SIGSEGV when doing multiple TFTP transfers using the
  multi interface, but I could also repeat it doing multiple sequential ones
  with the easy interface. Using Ciprian's test case, I could fix it.

Yang Tse (9 Nov 2006)
- Remove showing stderr log files unconditionally for tests 518 and 537.
  
  Add failure checking for servers when fork()ed.
  
  Use same code path in 'stopserver' when called with a single or multiple pids.

Daniel Stenberg (8 Nov 2006)
- Bradford Bruce reported that when setting CURLOPT_DEBUGFUNCTION without
  CURLOPT_VERBOSE set to non-zero, you still got a few debug messages from the
  SSL handshake. This is now stopped.

- ok stop using old and deprecated options

- add missing names

- Olaf fixed a leftover problem with the CONNECT fix of his that would leave a
  wrong error message in the error message buffer.

Gisle Vanem (7 Nov 2006)
- Moved select_s() to Makefile.dj since select() is used in applications.

- Update copyright year.

Yang Tse (6 Nov 2006)
- add TODO note

- compiler warning fix

- remove redundant check for Win32

- avoid a couple of potential zero size memory allocations

Daniel Stenberg (5 Nov 2006)
- mention the areslib.dsp fix

- add the recent crowd of contributors

- Andreas Rieke fixed back the correct line endings!

Yang Tse (5 Nov 2006)
- Prevent multiple initialization of memdebug configuration variables.
  
  This was possible on debug c-ares enabled builds when both CURL_MEMDEBUG
  and CARES_MEMDEBUG environment variables were set. Leading to a file handle
  leak even when both variables had the same value, and wierd test suite
  results when different.

Gisle Vanem (3 Nov 2006)
- Ifdef around S_IRGRP and S_IROTH (meaningless on Win32).

Yang Tse (3 Nov 2006)
- add a couple more of debugging messages

Daniel Stenberg (3 Nov 2006)
- SCP support added

- Olaf Stueben provided a patch that I edited slightly. It fixes the notorious
  KNOWN_BUGS #25, which happens when a proxy closes the connection when
  libcurl has sent CONNECT, as part of an authentication negotiation. Starting
  now, libcurl will re-connect accordingly and continue the authentication as
  it should.

- initial SCP support is now added

- Update the information about what c-ares version that's required. 1.3.1 had
  a fatal bug so we must require 1.3.2 to get flawless functionality with c-ares.

- stand clear for release 1.3.2

- Andreas Rieke added missing file and changed line endings

Yang Tse (3 Nov 2006)
- reduce max size of dinamically allocated arrays to minimize the nasty
  behaviour some versions of IRIX exhibit of committing suicide on big
  mallocs instead of just returning a friendly null pointer

- fix missing '$' for var OPT_LIBSSH2

- update copyright year

- fix comments and  renumber rlimit return codes
  fix closing of fd's when limit is reached

- fix comments and  renumber rlimit return codes

Daniel Stenberg (2 Nov 2006)
- update the counter

- mention the new options

- James Housley brought support for SCP transfers

Yang Tse (2 Nov 2006)
- remove leftover comment

- update and split test cases 518 and 537 into its own source code file

- code cleanup

- use our internal string functions and replace sprintf with snprintf

- Update protocol verification end of lines

- check symbol HAVE_UNISTD_H instead of UNISTD_H to include unistd.h

- prototype for gethostname is in unistd.h

- test 518 is all about testing libcurl functionality
  when more than FD_SETSIZE file descriptors are open.
  This means that if for any reason we are not able to
  open more than FD_SETSIZE file descriptors then test
  518 should not be run.
  
  test 537 is all about testing libcurl functionality
  when the system has nearly exhausted the number of
  free file descriptors. Test 537 will try to run with
  very few free file descriptors.

Gisle Vanem (31 Oct 2006)
- Updated dependency output.

- Updated dependencies to not include config.h.

- Removed unneeded stuff.

- Added Watt-32 section to fix things for Watt32+Win32 targets.

- Don't include "nameser.h" for Watt32. Use the normal BSD-socket headers.

- Added definition of select() for Watt32.

- Rewritten to use ../packages/DOS/common.dj.

- Change 'FILETYPE' to ' VFT_APP'.

Yang Tse (31 Oct 2006)
- Show stderr log file for test 518 unconditionally.
  
  In this way we'll be able to sort out problems that might
  arise in the prechek phase of the 518 test.
  
  Once that 518 has been verified this change will be undone.

- Sync comment with code and add three messages more

- Address some pitfalls in the rlimit() function check that were
  preventing execution of this test on many platforms

Gisle Vanem (30 Oct 2006)
- Allow 'curl_*printf()' to be used in C++ programs.

Daniel Stenberg (30 Oct 2006)
- add contributors from the 7.16.0 release

- start working on 7.16.1

Version 7.16.0 (29 Oct 2006)

Daniel Stenberg (29 Oct 2006)
- 7.16.0 material

- corrected how tests/memanalyze.pl is used

Yang Tse (29 Oct 2006)
- Compiler warning fix

- Make more human readable and maintainable previous
  compiler warning fix since it was Ok and actually
  avoids the targeted compiler warning.

Daniel Stenberg (29 Oct 2006)
- updated to current status

- updated to reflect reality

- a small unification of the error text on failed server startups

Yang Tse (27 Oct 2006)
- Sync with lib/setup_once.h

- Compiler warning fix.
  
  Assigning the const value zero to a pointer to function
  results in a null pointer value assignment to the function
  pointer.
  
  Assignment of any nonzero value is what should result in a
  implementation compiler dependent result.
  
  Since what we want to do here is the first case, this should
  not trigger compiler warnings related with conversions from
  'pointer to data' to 'pointer to function'.
  
  Our autobuild test suite will judge.

Gisle Vanem (27 Oct 2006)
- Fixed 'x_TYPE_ARG2' to match prototypes of recv() and send().

- Get rid of the special sread()+swrite() for MSDOS. Use recv()
  and send(). Added needed HAVE_x defines.

- Added 'RECV_TYPE_ARGx' needed in getinfo.c.

Yang Tse (27 Oct 2006)
- Update copyright year, since the file has been modified

- Compiler warning fix

- 30 seconds isn't long enough for this test on a loaded server.

- Do an explicit typecast of data pointers to function pointers
  to avoid picky compiler warnings, since this is what we want!

Gisle Vanem (26 Oct 2006)
- Use proper 'stat' structure for fstat(). I.e. 'struct _stati64' and '_fstati64()'
  on Win32.

Yang Tse (26 Oct 2006)
- Improved rlimit logic:
  - Take in account RLIM_INFINITY.
  - Verify that soft limit is actually changed when doing so.
  - Show errno in case getrlimit or setrlimit fails.
  - Keep file descriptors open only while runing this test.

- Fix Curl_open() not reporting failure when allocation of the
  buffer used to store headers in the SessionHandle failed.

- 30 seconds isn't long enough for this test on a loaded server.

Daniel Stenberg (25 Oct 2006)
- a Smalltalk binding

- Fixed CURLOPT_FAILONERROR to return CURLE_HTTP_RETURNED_ERROR even for the
  case when 401 or 407 are returned, *IF* no auth credentials have been given.
  The CURLOPT_FAILONERROR option is not possible to make fool-proof for 401
  and 407 cases when auth credentials is given, but we've now covered this
  somewhat more.
  
  You might get some amounts of headers transferred before this situation is
  detected, like for when a "100-continue" is received as a response to a
  POST/PUT and a 401 or 407 is received immediately afterwards.
  
  Added test 281 to verify this change.

Gisle Vanem (25 Oct 2006)
- Fixed "'x' might be used uninitialized in this function" warning.
  Removed trailing whitespace.

- Added '-d' option for Watt32 targets. Added cvs id.

Yang Tse (25 Oct 2006)
- Compiler warning fix

- Add project notice and file Id

- Compiler warning fix

Daniel Stenberg (25 Oct 2006)
- updated copyright year

Yang Tse (25 Oct 2006)
- Use curl_global_init() and curl_global_cleanup().
  Improve cleanup in case of initialization failure.

Daniel Stenberg (24 Oct 2006)
- other pipelining fixes by Ravi Pratap, that now makes pipelines get used better

Yang Tse (24 Oct 2006)
- Abort test if it seems that it would have run forever. This is just to prevent
  test hanging and actually is an indication that there's a condition that is
  not being properly handled at some point in the library.
  
  Remove a pair of braces and adjust indentation appropriately.

Daniel Stenberg (23 Oct 2006)
- the check in ConnectionExists() for not re-using a non-resolved connection now
  applies for asynch name resolves in general and not only ares

- Ravi Pratap provided a major update with pipelining fixes. We also no longer
  re-use connections (for pipelining) before the name resolving is done.

Yang Tse (23 Oct 2006)
- Avoid trying to compare more than strlen bytes.

Dan Fandrich (23 Oct 2006)
- 30 seconds isn't long enough for this test on a loaded server.

Yang Tse (23 Oct 2006)
- Replace is*() macros with our own IS*() ones.

Daniel Stenberg (22 Oct 2006)
- Nir Soffer fixed a cp line and got rid of an rm

- until we learn how to use Makefile.inc from here, I've added socks.o in here
  as well

Yang Tse (21 Oct 2006)
- Provide 'datarootdir' parameter to shutup configuration warning,
  'packages/EPM/curl.list.in seems to ignore the --datarootdir setting'

- Fix misplaced runtime library specification for 'release-dll' target

Daniel Stenberg (21 Oct 2006)
- rely on the global LDADD instead of having specific ones for every program

- Nir Soffer for his Makefile.am fix

Yang Tse (21 Oct 2006)
- Fix copy-paste error

- Compiler warning fix

Daniel Stenberg (21 Oct 2006)
- Nir Soffer made the tests/libtest/Makefile.am use a proper variable for all
  the single test applications' link and dependences, so that you easier can
  override those from the command line when using make.

- Armel Asselin separated CA cert verification problems from problems with
  reading the (local) CA cert file to let users easier pinpoint the actual
  problem. CURLE_SSL_CACERT_BADFILE (77) is the new libcurl error code.

Yang Tse (21 Oct 2006)
- Compiler warning fix

Daniel Stenberg (20 Oct 2006)
- made the arrow for 'Send SSL data' point in the right direction!

Yang Tse (20 Oct 2006)
- Compiler warning fix

- Since now src/setup.h includes setup_once.h, src/config-win32.h needs
  the definitions for the return type and arguments types of functions
  recv() and send().

- Oops! Actually set the limit to 30 seconds.

- Decrease the posibility of aborting a test which actually is not
  stale by replacing loop counters with timeouts. In this way the
  main loop of the test will be allowed to run up to 30 seconds on
  any platform before aborting it.

Daniel Stenberg (20 Oct 2006)
- When a resolve is made on a pipelined connection we need to detect it properly
  (when the resoling isn't completede yet) and not confuse it with a simple
  connection re-use (non-pipelined).

Yang Tse (19 Oct 2006)
- Set loop2 counter limit to 60 on this test to avoid a false positive.

- Replace tabs with spaces and Compiler warning fix.

- Compiler warning fix

- When aborting, show loop counter values when more than one counter exists.

- Abort test if it seems that it would have run forever. This is just to prevent
  test hanging and actually is an indication that there's a condition that is
  not being properly handled at some point in the library.
  
  Loop counter limits might need to be further increased on false positives.

Daniel Stenberg (19 Oct 2006)
- Here's an effort to avoid saying 'data not shown' in the debug parts when the
  data is actually shown on screen. Like when you do 'curl -v host' with data
  and debug info sent to the same terminal.

Yang Tse (19 Oct 2006)
- Builds using synchronous name resolver dislike marking the connection as async.

- Sync with lib/setup_once.h

- Check for USE_WINSOCK instead of WIN32 where the check was done
  to verify winsock API availability.

- Introduce symbol USE_WINSOCK which will be defined when
  using winsock or winsock2 API.

Daniel Stenberg (18 Oct 2006)
- the expire timer is a bit too annoying to see all the time ;-)

- When a connection is re-used, it can be flagged for re-use before the name
  resolving is completed so we must make sure to survive it and mark the
  connection as async (ie not yet connected completely).

- use the return code from lseek() to detect problems and bail out if so

Gisle Vanem (18 Oct 2006)
- Added ISPRINT() required for src/main.c.

Daniel Stenberg (18 Oct 2006)
- Tor's spell fixes

- changes done the last few days

- cut out matching host names starting with telnet or ftps, since they hardly
  ever actually are used

- the "work in progress" for #25 was ditched a long time ago

Yang Tse (18 Oct 2006)
- Replace is*() macros with our own IS*() ones.
  Get rid of non ANSI/ISO isascii().

- Move definition of IS*() macros to setup_once.h

Dan Fandrich (17 Oct 2006)
- Fixed compile error in HAVE_SIGACTION case.

Daniel Stenberg (17 Oct 2006)
- Avoid typecasting a signed char to an int when using is*() functions, as that
  could very well cause a negate number get passed in and thus cause reading
  outside of the array usually used for this purpose.
  
  We avoid this by using the uppercase macro versions introduced just now that
  does some extra crazy typecasts to avoid byte codes > 127 to cause negative
  int values.

- clear the struct size not the pointer size, pointed out in bug report
  #1579171

- buildconf already runs ares/buildconf by itself if there is an ares subdir
  present, so there's no use to doing it again in this script!

Yang Tse (17 Oct 2006)
- Explicit typecast for Curl_debug() size argument

- Typo

Daniel Stenberg (17 Oct 2006)
- make the low_speed check set the expire timer so that it has a chance to work
  even when using curl_multi_socket() or even using the multi_perform() when
  relying on multi_timeout() to be good.

- Please welcome our new haxx.se curl mirror, for really fast Swedish access.

- Jeff helped me pinpoint that we didn't properly set the expire timer during
  c-ares name resolves, but now we do!

- fix the name resolve abort timeout calculation (when signals are used)

Yang Tse (17 Oct 2006)
- Compiler warning fix

Daniel Stenberg (16 Oct 2006)
- Added a check in configure that simply tries to run a program (not when
  cross-compiling) in order to detect problems with run-time libraries that
  otherwise would occur when the sizeof tests for curl_off_t would run and
  thus be much more confusing to users. The check of course should run after
  all lib-checks are done and before any other test is used that would run an
  executable built for testing-purposes.

Yang Tse (15 Oct 2006)
- Compiler warning fix

Gisle Vanem (15 Oct 2006)
- Replace ";;" with ";".

- Rearranged target HAVE_x section.

Yang Tse (14 Oct 2006)
- Declare our own timeval struct if HAVE_STRUCT_TIMEVAL is not defined

- Define HAVE_STRUCT_TIMEVAL as appropriate for platforms that lack autotools support

Daniel Stenberg (13 Oct 2006)
- Prevent ares_getsock() to overflow if more than 16 sockets are used.

Dan Fandrich (13 Oct 2006)
- The tagging of application/x-www-form-urlencoded POST body data sent
  to the CURLOPT_DEBUGFUNCTION callback has been fixed (it was erroneously
  included as part of the header).  A message was also added to the
  command line tool to show when data is being sent, enabled when
  --verbose is used.

Daniel Stenberg (13 Oct 2006)
- print the actual (externally known) easy handle and not the internal container
  for it

- Added comments about checking return code and the maxfd counter

- Added curl_multi_dump() when built with CURLDEBUG - this is not a stable public
  function, this is only meant to allow easier tracking of the internal handle's
  state and what sockets they use. Only for research and development.

Yang Tse (13 Oct 2006)
- Check for struct timeval at configuration time

Daniel Stenberg (12 Oct 2006)
- ghiper now uses the timer callback in the multi interface

- avoid an overflow if an excessive amount of servers are used

- clarify more

- Starting now, adding an easy handle to a multi stack that was already added
  to a multi stack will cause CURLM_BAD_EASY_HANDLE to get returned.

- deleted #19 since it concerted FTP third party transfers and they are no longer
  supported

- we've cut out third party transfers

- point out the sslcert web page for -k/--insecure

- Jeff Pohlmeyer has been working with the hiperfifo.c example source code,
  and while doing so it became apparent that the current timeout system for
  the socket API really was a bit awkward since it become quite some work to
  be sure we have the correct timeout set.
  
  Jeff then provided the new CURLMOPT_TIMERFUNCTION that is yet another
  callback the app can set to get to know when the general timeout time
  changes and thus for an application like hiperfifo.c it makes everything a
  lot easier and nicer. There's a CURLMOPT_TIMERDATA option too of course in
  good old libcurl tradition.

- the textual arraw for "Send SSL data" was the wrong way

Yang Tse (12 Oct 2006)
- Inclusion of time header files based on header existance

- Remove redundant __CYGWIN__ symbol check

- Compiler warning fix

- Call curl_global_cleanup() in all code paths before exiting test

Daniel Stenberg (10 Oct 2006)
- repair id string

- Added ghiper.c, Jeff Pohlmeyer's example code using the curl_multi_socket()
  API with glib2

- mark the handle as no longer having a broken pipe when a transfer has failed

- Added test case 536 in an attempt to add Bogdan Nicula's problematic case
  with multi interface and pipelining. This test just works and did not repeat
  the problem his test code showed, but could still serve as a useful test.

- used for test 535 too

- minor indent fix

- when going to completed due to error, mark the handle as not in a pipeline
  anymore

- new mirrors

- kill trailing whitespace

- changed the wording about removal of internal headers with -H

Yang Tse (9 Oct 2006)
- Compiler warning fix

Daniel Stenberg (9 Oct 2006)
- Bogdan Nicula's second test case (posted Sun, 08 Oct 2006) converted to test
  case 535 and it now runs fine. Again a problem with the pipelining code not
  taking all possible (error) conditions into account.

Yang Tse (9 Oct 2006)
- Cygwin 1.5.21 needs this hack to pass test 160.
  In this way 304 tests out of 304 reported OK.

Daniel Stenberg (8 Oct 2006)
- slightly improved

- clarified more

- test 534 added in an attempt to repeat Bogdan Nicula's bug...

- modified lib533 to accept both URLs on the command line

- Fix a "sockfilt" leak. When a new 'data' connection sockfilt server is started,
  make sure that a previously used one is killed first (since they re-use the
  same .pid file etc)

- don't display or act on state changes that doesn't actually change state

- Bogdan Nicula's hanging test case was converted to test case 533 and the test
  now runs fine.

- catch silly mistakes better

Gunter Knauf (6 Oct 2006)
- updated for latest OpenSSL release.

Daniel Stenberg (5 Oct 2006)
- planned stuff to do before release

- Dmitriy Sergeyev provided an example source code that crashed CVS libcurl
  but that worked nicely in 7.15.5. I converted it into test case 532 and
  fixed the problem.

- removed more dead code that is unused since the removal of the third party
  transfer support

- Support for FTP third party transfers is now dropped

- Reported in #1561470 (http://curl.haxx.se/bug/view.cgi?id=1561470), libcurl
  would crash if a bad function sequence was used when shutting down after
  using the multi interface (i.e using easy_cleanup after multi_cleanup) so
  precautions have been added to make sure it doesn't any more - test case 529
  was added to verify.

- added more explanations

- As reported in bug: #1566077 the former URL mentioned in the generated cookie
  jar has died and we now instead point out our own version of that

- Armel Asselin's fix for the RESUME_FROM docu

Yang Tse (25 Sep 2006)
- Compiler warning fix

- Compiler warning fix

- Compiler warning fix

- Compiler warning fix

Daniel Stenberg (24 Sep 2006)
- Bernard Leak fixed configure --with-gssapi-libs

- Cory Nelson made libcurl use the WSAPoll() function if built for Windows
  Vista (_WIN32_WINNT >= 0x0600)

- eeep, tab completion error

- --ftp-ssl-control requires SSL/TLS, it does not "try" it

- allow user in passwd state for test 280 to work (--ftp-alternative-to-user)

- updated numbers

- minor edits

- filled in some docs for the FTP server control commands

- added simple test of --ftp-alternative-to-user

- --ftp-alternative-to-user was missing in the help text

- Mike Protts added --ftp-ssl-control to make curl use FTP-SSL, but only
  encrypt the control connection and use the data connection "plain".

- standard curl source code headers

- Dmitriy Sergeyev provided a patch that made the SOCKS[45] code work better as
  it now will read the full data sent from servers. The SOCKS-related code was
  also moved to the new lib/socks.c source file.

Dan Fandrich (21 Sep 2006)
- -z works on FTP, too

Daniel Stenberg (21 Sep 2006)
- (FTP) a failed upload does not invalidate the control connection

- Added test case 531 in an attempt to repeat bug report #1561470
  (http://curl.haxx.se/bug/view.cgi?id=1561470) that is said to crash when an
  FTP upload fails with the multi interface. It did not, but I made a failed
  upload still assume the control connection to be fine.

- Extended the explanation for CURLM_CALL_MULTI_PERFORM somewhat.

- Armel Asselin fixed problems when you gave a proxy URL with user name and
  empty password or no password at all. Test case 278 and 279 were added to
  verify.

- lots of "HTTPS" features are really "SSL" ones as they are also valid for
  FTPS

- Michael Wallner's test program again help me track down a problem. This time
  it basically was that we didn't remove the current connection from the pipe
  list when following a redirect. Also in this commit: several cases of
  additional debug code for debug builds helping to check and track down some
  signs of run-time trouble.

- PEM is default type for key and cert

- Resize the connection cache upwards when adding more handles than what
  currently fits in the cache, to make the cache work better especially for
  pipelining cases but also for "mere" (persistent) connection re-use.

- Armel Asselin - When the easy handle is removed from the multi while libcurl
  is still trying to resolve the host name, it seems that the ftp struct is not
  yet initialized, but the removal action calls Curl_done() which calls
  Curl_ftp_done. So we simply return success from there if no ftp pointer is
  set.

- file-local function should be static and not use Curl_ prefix!
  Curl_signalPipeClose is now signalPipeClose().

Gisle Vanem (13 Sep 2006)
- Use CSOURCES as other makefiles. Add line for dependency generation.

- 'in6addr_any' must be placed in .c-file. Added 'REAL_WIN32' for
  all Win32 targets except CygWin. Cleanup.

Yang Tse (13 Sep 2006)
- Compiler warning fix

Daniel Stenberg (13 Sep 2006)
- nicer reporting of disabled tests

- added CVS id and clarified the comment lines

- Added a generic way to disable test cases when "all" is run, and added the
  FTP 3rd party transfers to that file for now until I have them sorted out.

Yang Tse (13 Sep 2006)
- Fix error introduced in file version 1.369

- Compiler warning fix

Daniel Stenberg (12 Sep 2006)
- stuff we do

- hiperfifo.c by Jeff Pohlmeyer

- pipelining support is added now

- example code by Michael Wallner

- corrected URL

- so it seems SOCKS5 too (still) has problems with connect timeouts

Yang Tse (12 Sep 2006)
- Cygwin preprocessor adjustments

Daniel Stenberg (11 Sep 2006)
- If the current connection doesn't fit to get added to the connection cache,
  we certainly MUST NOT kill an active connection... Problem tracked down thanks
  to Michael Wallner's excellent test program.

- - Guilherme Balena Versiani: I noted a strange BUG in Win32 port
    (ares_init.c/get_iphlpapi_dns_info() function): when I disable the network
    by hand or disconnect the network cable in Windows 2000 or Windows XP, my
    application gets 127.0.0.1 as the only name server. The problem comes from
    'GetNetworkParams' function, that returns the empty string "" as the only
    name server in that case. Moreover, the Windows implementation of
    inet_addr() returns INADDR_LOOPBACK instead of INADDR_NONE.

- - Fixed my breakage from earlier today so that doing curl_easy_cleanup() on a
    handle that is part of a multi handle first removes the handle from the
    stack.
  
  - Added CURLOPT_SSL_SESSIONID_CACHE and --no-sessionid to disable SSL
    session-ID re-use on demand since there obviously are broken servers out
    there that misbehave with session-IDs used.

- stupid mistake rectified by Jeff Pohlmeyer

Yang Tse (10 Sep 2006)
- Compiler warning fix

- Compiler warning fix

Daniel Stenberg (10 Sep 2006)
- curl_multi_socket() fix thanks to Jeff's test code

-   Jeff Pohlmeyer presented a *multi_socket()-using program that exposed a
    problem with it (SIGSEGV-style). It clearly showed that the existing
    socket-state and state-difference function wasn't good enough so I rewrote
    it and could then re-run Jeff's program without any crash. The previous
    version clearly could miss to tell the application when a handle changed
    from using one socket to using another.
  
    While I was at it (as I could use this as a means to track this problem
    down), I've now added a 'magic' number to the easy handle struct that is
    inited at curl_easy_init() time and cleared at curl_easy_cleanup() time that
    we can use internally to detect that an easy handle seems to be fine, or at
    least not closed or freed (freeing in debug builds fill the area with 0x13
    bytes but in normal builds we can of course not assume any particular data
    in the freed areas).

- Added a useful debug function within #if 0. The function makes it easy to
  "dump" a hash table which is useful when tracking problems with data stored
  in one of our hashes.

Gisle Vanem (10 Sep 2006)
- Added select_test() function to allow selecting on no sockets on
  Winsock.

- SIGALARM -> SIGALRM.

- #ifdef around alarmfunc() to supress warning.

- iconv-data needs to be fully reallocated (to prevent a double-free).

- Print usage in case 'arg2 == NULL'.

- Duplicate iconv-data too in curl_easy_duphandle().

Yang Tse (9 Sep 2006)
- Compiler warning fix

Daniel Stenberg (9 Sep 2006)
- Michele Bini fixed how the hostname is put in NTLM packages. As servers
  don't expect fully qualified names we need to cut them off at the first dot.

- tab => space

- Peter Sylvester cleaned up and fixed the getsockname() uses in ftp.c. Some
  of them can be completetly removed though...

Gisle Vanem (8 Sep 2006)
- signal() returns 'void (*)(int)'.

Daniel Stenberg (8 Sep 2006)
- Mention that CURLOPT_MAX_RECV/SEND* were added in 7.15.5

Gisle Vanem (8 Sep 2006)
- Update comment reflecting structure change.

Daniel Stenberg (8 Sep 2006)
- removed the comment that isn't valid for this file, just a copy'n paste error

Gisle Vanem (8 Sep 2006)
- Compilation fix; 'reqdata' is not a pointer. 'path' is part of SessionHandle.

Daniel Stenberg (8 Sep 2006)
- test 530 is the first ever HTTP pipelining test for libcurl

Yang Tse (8 Sep 2006)
- Compilation fix

Daniel Stenberg (7 Sep 2006)
- Major overhaul introducing http pipelining support and shared connection
  cache within the multi handle.

Version 7.15.6 (7 Sep 2006)

Yang Tse (7 Sep 2006)
- Fix compiler warning

Daniel Stenberg (6 Sep 2006)
- Invoke memanalyze from the source path and hush up about killing the FTP
  server as part of test cases

- added some fresh new blurb

- spell fix and added Jari

- Jari Sundell's minor cleanup, added comments and some extra error-checkings
  for easier future error-tracking.

- I fell over a new libtool that starts with a newline so we need to fetch
  the two first lines to get the version string. The good news is that older
  libtools have an empty line after the first so I think this works fine all
  over...

- oops, we're on the .6 track now

- proper credit

- - "Dortik" (http://curl.haxx.se/bug/view.cgi?id=1551412) provided a patch that
    while not fixing things very nicely, it does make the SOCKS5 proxy
    connection slightly better as it now acknowledges the timeout for connection
    and it no longer segfaults in the case when SOCKS requires authentication
    and you did not specify username:password.

- Mohun Biswas' improvements and clarifications about the options and how to use
  them.

Gisle Vanem (3 Sep 2006)
- Simplified #ifdef on WIN32; the statement
  " !defined(__GNUC__) || defined(__MINGW32__)" implies
  CygWin.

- Watcom lacks <sys/time.h>.

Daniel Stenberg (31 Aug 2006)
- added missing test

- Dmitriy Sergeyev found and fixed a multi interface flaw when using asynch
  name resolves. It could get stuck in the wrong state.

Gisle Vanem (30 Aug 2006)
- Added HAVE_SYS_TIME_H for djgpp and HighC.

- Removed "#ifndef__WATCOMC__". Use "#ifdef HAVE_SYS_TIME_H" instead.

- Added support for more MS-DOS compilers.

- Avoid Metaware's High-C warning "'=' encountered where '==' may have been intended."

- Watcom lacks <sys/time.h>.

- Added support for Watcom/DOS.

- Updated dependency section.

- Don't include zlib headers in dependency output.

- Renamed config.dj -> config.dos.

- Use config.dos instead.  Updated generated dependencies.

- Removed. New file is config.dos.

- Renamed config.dj -> config.dos. Added #ifdef-section for djgpp.

- BUFSIZE defined in Metaware's <stdio.h>. Undefine to avoid warning.

- Support other MS-DOS compilers (MSDOS is a djgpp built-in define).

- Metaware's High-C has an ISO cpp.

Daniel Stenberg (29 Aug 2006)
- Brad Spencer did
   o made ares_version.h use extern "C" for c++ compilers
   o fixed compiler warnings in ares_getnameinfo.c
   o fixed a buffer position init for TCP reads

- David McCreedy added CURLOPT_SOCKOPTFUNCTION and CURLOPT_SOCKOPTDATA to
  allow applications to set their own socket options.

- Armel Asselin reported that the 'running_handles' counter wasn't updated
  properly if you removed a "live" handle from a multi handle with
  curl_multi_remove_handle().

- clarify the string syntax support in the CURLOPT_PROXY section

Dan Fandrich (23 Aug 2006)
- Use /usr/bin/env to invoke perl like the other test scripts.

Daniel Stenberg (22 Aug 2006)
- David McCreedy fixed a remaining mistake from the August 19 TYPE change.

- Peter Sylvester pointed out a flaw in the AllowServerConnect() in the FTP
  code when doing pure ipv6 EPRT connections.

- as Jeff Pohlmeyer pointed out, first get the multi handle _then_ use it

Dan Fandrich (21 Aug 2006)
- Workaround for Cray UNICOS 9.0 to fix ftp.

Daniel Stenberg (21 Aug 2006)
- clarify for what protocols the changes are

- Based on a patch by Armel Asselin, the FTP code no longer re-issues the TYPE
  command on subsequent requests on a re-used connection unless it has to.

- Armel Asselin fixed a crash in the FTP code when using SINGLECWD mode and
  files in the root directory.

- Andrew Biggs pointed out a "Expect: 100-continue" flaw where libcurl didn't
  send the whole request at once, even though the Expect: header was disabled
  by the application. An effect of this change is also that small (< 1024
  bytes) POSTs are now always sent without Expect: header since we deem it
  more costly to bother about that than the risk that we send the data in
  vain.

Dan Fandrich (16 Aug 2006)
- Minor portability fixes to get things running on UNICOS 9.0 on a Cray Y-MP

Daniel Stenberg (16 Aug 2006)
- related info

Gisle Vanem (16 Aug 2006)
- Use gnutls_strerror() for clearer error message.

- Use '_LIBICONV_VERSION' instead of variable '_libiconv_version'
  to support older iconv versions.

Yang Tse (14 Aug 2006)
- Replace exit() with return() in main()

Daniel Stenberg (14 Aug 2006)
- add missing man page

Dan Fandrich (11 Aug 2006)
- Use __minix to detect Minix, which works on both ACK and GCC.

Daniel Stenberg (9 Aug 2006)
- option name spell fix

Dan Fandrich (9 Aug 2006)
- Only define the string prototypes in ANSI mode to reduce interference on
  systems that prototype them slightly differently.

- Added eCos and Minix sections.

Gunter Knauf (9 Aug 2006)
- added build info output.

- fixed some web links.

- fixed some web links.

Daniel Stenberg (8 Aug 2006)
- Armel Asselin made the CURLOPT_PREQUOTE option work fine even when
  CURLOPT_NOBODY is set true. PREQUOTE is then run roughly at the same place
  in the command sequence as it would have run if there would've been a
  transfer.

Gunter Knauf (8 Aug 2006)
- moved ugly NetWare hack to hostip.h so that hostip.c uses it too.

Daniel Stenberg (8 Aug 2006)
- Fixed a flaw in the "Expect: 100-continue" treatment. If you did two POSTs
  on a persistent connection and allowed the first to use that header, you
  could not disable it for the second request.

- make REALLY sure src/config.h.in is a copy of lib/config.h.in

Dan Fandrich (8 Aug 2006)
- Minix 3 doesn't have MSG_PEEK

Daniel Stenberg (8 Aug 2006)
- better updating of the single timeout

Yang Tse (7 Aug 2006)
- Allow again proper compilation outside of the source tree

Daniel Stenberg (7 Aug 2006)
- Jeff Pohlmeyer pointed out this stupid variable type error

- start working towards 7.15.6

- added contributors to 7.15.5

Version 7.15.5 (7 Aug 2006)

Daniel Stenberg (7 Aug 2006)
- release time for 7.15.5

Yang Tse (6 Aug 2006)
- Check for network libraries the _same_ way it is done in cURL.

- Check for network libraries the same way it is done in cURL.

Dan Fandrich (4 Aug 2006)
- Initial stab at making libcurl compile under Minix 3.

Yang Tse (4 Aug 2006)
- Minor compatibility fix

Gisle Vanem (4 Aug 2006)
- Added version info for iconv.

- Added 'curl_version_info_data::iconv_ver_num' for iconv version.

- Fixed typo.

- Added dependency for splay.obj.

- Fixed comment.

Daniel Stenberg (4 Aug 2006)
- oops, the previous commit was incomplete as we made an unconditional call
  to multi_runsingle() without it being really necessary or good

- even when we get a single connection to deal with, we must still check for
  timeout'ed connections and possibly deal with them too

Yang Tse (4 Aug 2006)
- Fix compiler warning

- Avoid redundant check. configure script takes care of not defining
  HAVE_WINDOWS_H, HAVE_WINSOCK_H, HAVE_WINSOCK2_H, neither
  HAVE_WS2TCPIP_H when __CYGWIN__ is defined.

- Being unable to link or find out recv() or send() args types is a fatal error.

Daniel Stenberg (3 Aug 2006)
- This is now a working example using libevent and curl_multi_socket() for really
  fast treatment of many simultaneous transfers

- adding CURLM_CALL_MULTI_SOCKET that's just the same as CURLM_CALL_MULTI_PERFORM

Yang Tse (3 Aug 2006)
- MinGW/MSYS needs lib ws2_32 for proper operation of configure script.

Daniel Stenberg (3 Aug 2006)
- Ravi Pratap fixed ares_getsock() to actually return the proper bitmap and
  not always zero!

- removed running_handles argument from multi_runsingle() since it wasn't really
  used anymore since multi->num_alive was introduced

Yang Tse (3 Aug 2006)
- Silence compiler warning 'unused parameter running_handles' in function multi_runsingle(). This is done here returning multi->num_alive in the running_handles parameter even when functions that call multi_runsingle() at this moment overwrite the returned value with the one that is valid when those functions curl_multi_perform() and multi_socket() have removed expired timers from the splay. Most probably, parameter 'running_handles' in function multi_runsingle() should be just removed.

Daniel Stenberg (2 Aug 2006)
- keep count of the number of "alive" handles in a struct member, as otherwise
  *multi_socket*() can't return the proper number

- Mark Lentczner fixed how libcurl was not properly doing chunked encoding
  if the header "Transfer-Encoding: chunked" was set by the application.
  http://curl.haxx.se/bug/view.cgi?id=1531838

- a CURLOPT_PROGRESSFUNCTION clarification

- Maciej Karpiuk fixed a crash that would occur if we passed Curl_strerror()
  an unknown error number on glibc systems.
  http://curl.haxx.se/bug/view.cgi?id=1532289

- spell-fixed a comment

- updated docs with the new parameter

Yang Tse (31 Jul 2006)
- Avoid the risk of a false positive detection of MSG_NOSIGNAL when cross compiling a Windows target.

- Silence warning: empty body in an if-statement

- Force compilation failure in case macros sread() or swrite() are not defined.

- Provide definitions needed for macros sread() and swrite() in config file.

Daniel Stenberg (30 Jul 2006)
- adapt to the new protos

- curl_multi_socket() and curl_multi_socket_all() got modified prototypes: they
  both now provide the number of running handles back to the calling function.

Yang Tse (29 Jul 2006)
- Winsock and Cygwin need address family specification before bind(), this should be harmless for others.

- Fix compiler warnings.

- include setup_once.h dependency and adjust to 80 char lines.

Daniel Stenberg (28 Jul 2006)
- new D binding

Yang Tse (28 Jul 2006)
- Replace send() and recv() with swrite() and sread() macros.

- First step trying to avoid the multiple header inclusion and recursion nightmare.
  
  Reintroduce checking for HAVE_MSG_NOSIGNAL in configure script, so that we don't depend on header inclusion order for a valid check.

Daniel Stenberg (27 Jul 2006)
- test case 277 - HTTP RFC1867-type formposting with custom Content-Type

- Yves Lejeune fixed so that replacing Content-Type: when doing multipart
  formposts work exactly the way you want it (and the way you'd assume it
  works)

- put back the correct logic, as the change dated July 11th 2006 added bad
  behaviour and a socket leak

- David McCreedy added --ftp-ssl-reqd which makes curl *require* SSL for both
  control and data connection, as the existing --ftp-ssl option only requests
  it.

- curl_multi_assign() and CURLMOPT_SOCKETFUNCTION proto change

- [Hiper-related work] Added a function called curl_multi_assign() that will
  set a private pointer added to the internal libcurl hash table for the
  particular socket passed in to this function.

Yang Tse (26 Jul 2006)
- Provide multiple header inclusion prevention definition __ARES_PRIVATE_H

- Change multiple header inclusion prevention definition to __ARES_BITNCMP_H

- Change multiple header inclusion prevention definition to __ARES_INET_NET_PTON_H

- Sync header with source code

Daniel Stenberg (25 Jul 2006)
- Dan Nelson added the CURLOPT_FTP_ALTERNATIVE_TO_USER libcurl option and curl
  tool option named --ftp-alternative-to-user. It provides a mean to send a
  particular command if the normal USER/PASS approach fails.

- Michael Jerris added magic that builds lib/curllib.vcproj automatically (for
  newer MSVC versions)

Yang Tse (25 Jul 2006)
- Fix warning: no newline at end of file

Daniel Stenberg (25 Jul 2006)
- Georg Horn made the transfer timeout error message include more details

Yang Tse (25 Jul 2006)
- Simplify check for NEED_MALLOC_H, and make more explicit that NEED_MALLOC_H shall be defined if <malloc.h> header file must be included even when including <stdlib.h>.

Gisle Vanem (25 Jul 2006)
- Silence iconv() warnings.

- Added CURL_VERSION_CONV feature string.

- Added note for CURLRES_ARES and CURLRES_IPV6.

- Moved functions common to IPv4 and C-ares to hostip.c;
  Curl_freeaddrinfo() and Curl_ip2addr().

- Remove comment about c-ares not supporting IPv6.

- Use the proper Curl_freeaddrinfo() for CURLRES_ARES.

- Fix typo.

- Ares needs CURLRES_ADDRINFO_COPY. Curl_hostent_relocate() is gone.

Daniel Stenberg (23 Jul 2006)
- added splay.o

Gisle Vanem (23 Jul 2006)
- Added getopt() processing.

- Added getopt() processing of [-t {a|aaaa}].

- Added CVS id.

- 2nd try adding CVS id.

- Added CVS id.

- Use ares_free_string() to avoid detecting leaks.

- If CURLDEBUG defined, call curl_memdebug() if $CARES_MEMDEBUG is set.

- Constify some arguments in Curl_connecthost() and singleipconnect().

- Constify arguments to Curl_he2ai() and Curl_addrinfo_copy().

- Constify 'hostname' and 'service' to various resolver functions.

- Changes for combination ENABLE_IPV6 and USE_ARES.

- Use calloc() instead.

Daniel Stenberg (20 Jul 2006)
- David McCreedy fixed a build error when building libcurl with HTTP disabled,
  problem added with the curl_formget() patch.

Gisle Vanem (20 Jul 2006)
- Avoid warning "comparison of unsigned expression < 0 is always false"

- Avoid warning 'port' might be used uninitialized in this function.

Dan Fandrich (19 Jul 2006)
- Changes to support building for eCos 1.3.1.  This has been tested with
  file: URLs only.

Yang Tse (19 Jul 2006)
- Fix compiler warnings

- Avoid variable declaration shadowing previously declared one

- Avoid variable declaration shadowing previously declared one

- remove variable declaration shadowing previously declared one

- Remove variable declaration shadowing previously declared one

- Abort if unable to write pid file, and close socket when aborting.

- Abort if unable to write pid file.

- -Use curl_socket_t instead of int.
  
  -Log errno in message if setsockopt() fails.
  
  -Close listener socket on major errors.

- "*connected" must be set to FALSE if trynextip() fails.

Daniel Stenberg (17 Jul 2006)
- Jari Sundell did some excellent research and bug tracking, figured out that
  we did wrong and patched it: When nodes were removed from the splay tree,
  and we didn't properly remove it from the splay tree when an easy handle was
  removed from a multi stack and thus we could wrongly leave a node in the
  splay tree pointing to (bad) memory.

Yang Tse (17 Jul 2006)
- tests/libtest/lib506.c version 1.11 is now also logging CURLSHOPT_LOCKFUNC, CURLSHOPT_UNLOCKFUNC and CURLSHOPT_USERDATA, so we now also have to check them here.

- Return NULL if argument is NULL.

- Fix compiler warning "enumerated type mixed with another type"

- Fix compiler warning "enumerated type mixed with another type"

- Update error buffer size used for SSL_strerror()

- Minor cleanup

Daniel Stenberg (15 Jul 2006)
- don't use 'new' in the proto

- David McCreedy fixed a flaw where the CRLF counter wasn't properly cleared
  for FTP ASCII transfers.

Yang Tse (14 Jul 2006)
- Fix compiler warning

- Change the ai_addrlen type of struct addrinfo from size_t to socklen_t, per RFC 3493.

- Null terminate string in buffer before feeding it to strtol()

- Oops, missing "u"

- Change to meaningful var names and take care of a compiler warning on IRIX 6.5.22 MIPSPro C 7.3 64bit

- Fix compiler warning.

Gisle Vanem (12 Jul 2006)
- Remove unneeded stuff.

Yang Tse (12 Jul 2006)
- Remove var not used.

- Log a message if not all data is sent.

- Fix compiler warning: comparison between signed and unsigned

- Read the return value of the swrite() macro and 'print' a message in case of failure.

- Place parenthesis surrounding macro parameters so that the use of sread and swrite is more intuitive.

- sread now returns ssize_t

- Pay attention when typecasting an operation

- sread now returns ssize_t

- DJGPP/WATT32 does not have functions named recv() send() getnameinfo().

- Use platform's native types for recv() and send() arguments.

Dan Fandrich (11 Jul 2006)
- Enable --enable-hidden-symbols for SunPro C

Yang Tse (11 Jul 2006)
- include <malloc.h> only if HAVE_MALLOC_H and NEED_MALLOC_H are both defined.

- Define NEED_MALLOC_H if including <stdlib.h> is not enough for proper compilation and <malloc.h> must also be included.

Dan Fandrich (11 Jul 2006)
- Moved strdup replacement from src/main.c into src/strdup.c so it's available
  in libcurl as well, if necessary.

Gisle Vanem (11 Jul 2006)
- Added comment and CVS id.

Yang Tse (11 Jul 2006)
- Socket must be set to CURL_SOCKET_BAD after closing it.

- DNS cache must use the multi DNS cache if the easy handle's one is not using anyone in curl_multi_add_handle.

Daniel Stenberg (8 Jul 2006)
- the tool is named curl with lowercase c

- just some more blurb

- Ates Goral pointed out that libcurl's cookie parser did case insensitive
  string comparisons on the path which is incorrect and provided a patch that
  fixes this. I edited test case 8 to include details that test for this.

- 7.15.5 is planned for August 2006

- mention the shared DNS stuff

- Ingmar Runge provided a source snippet that caused a crash. The reason for
  the crash was that libcurl internally was a bit confused about who owned the
  DNS cache at all times so if you created an easy handle that uses a shared
  DNS cache and added that to a multi handle it would crash. Now we keep more
  careful internal track of exactly what kind of DNS cache each easy handle
  uses: None, Private (allocated for and used only by this single handle),
  Shared (points to a cache held by a shared object), Global (points to the
  global cache) or Multi (points to the cache within the multi handle that is
  automatically shared between all easy handles that are added with private
  caches).

- mention the by-default "sharing"

- yassl can be used now

- HTTP Pipelining is for GET and HEAD requests only.

Dan Fandrich (7 Jul 2006)
- Fixed building curllib.dsp when running make outside the source tree.

Yang Tse (7 Jul 2006)
- Finally get rid of CURL_CHECK_HEADERS_ONCE since it adds very little value and has portability issues.
  
  Change some shell if...then...fi tests into case...esac tests which demand less resources.

- Substitution of the literal '-' is only done if it's the first or last character.

- Using backslashes and slashes in the strings of the sed 'y' command shall be avoided since its interpretation is not the same across platforms.
  
  Now we use the sed 's' command with a bracket expression.

Gisle Vanem (7 Jul 2006)
- Correct the trace for WinCE.

- WinCE uses CreateThread(). Hence error is not in 'errno'.

- Removed copying 'stderr' since it doesn't have the desired
  effect.

Daniel Stenberg (7 Jul 2006)
- updated after discussions and thinking

Yang Tse (7 Jul 2006)
- Fix excessive escaping.

- Fix CURL_CHECK_HEADERS_ONCE

- Fix MinGW/MSYS support in CURL_CHECK_FUNC_RECV and CURL_CHECK_FUNC_SEND.

Gisle Vanem (6 Jul 2006)
- Undefine symbols before redefining them.

- Undefine correct symbol.

Yang Tse (5 Jul 2006)
- Oops !

- Prevent definition of HAVE_WINxxx_H symbols and avoid inclusion of Windows headers when compiled with Cygwin in POSIX emulation mode.

Gisle Vanem (5 Jul 2006)
- Cludge fix for djgpp 2.03 or older; it doesn't have snprintf() etc.
  So avoid using x_was_used().

-  Add types and qualifiers for getnameifo(), send() and recv().
  (Yang Tse forgot about djgpp)

Yang Tse (4 Jul 2006)
- Use a more descriptive var name.

- Get qualifier of arg 2 for send() apart into SEND_QUAL_ARG2.

- Platforms that don't have/run configure need default values in their config files for:
  
  HAVE_GETNAMEINFO, GETNAMEINFO_QUAL_ARG1, GETNAMEINFO_TYPE_ARG1, GETNAMEINFO_TYPE_ARG2, GETNAMEINFO_TYPE_ARG46, GETNAMEINFO_TYPE_ARG7
  
  HAVE_RECV, RECV_TYPE_ARG1, RECV_TYPE_ARG2, RECV_TYPE_ARG3, RECV_TYPE_ARG4, RECV_TYPE_RETV
  
  HAVE_SEND, SEND_TYPE_ARG1, SEND_TYPE_ARG2, SEND_TYPE_ARG3, SEND_TYPE_ARG4, SEND_TYPE_RETV

- Find out return types and argument types for functions recv() and send() at configuration stage.

Daniel Stenberg (4 Jul 2006)
- Toshiyuki Maezawa fixed a problem where you couldn't override the
  Proxy-Connection: header when using a proxy and not doing CONNECT.

Yang Tse (4 Jul 2006)
- Test HAVE_GETNAMEINFO definition before using GETNAMEINFO_XXX definitions.

- Fix compiler warning.

- Use CURL_CHECK_FUNC_GETNAMEINFO results in CURL_CHECK_NI_WITHSCOPEID

- Make CURL_CHECK_NI_WITHSCOPEID actually try to compile NI_WITHSCOPEID when cross-compiling.

- Fix shell globbing in CURL_CHECK_FUNC_GETNAMEINFO

- Fix shell globbing in CURL_CHECK_FUNC_GETNAMEINFO

- Fix shell globbing in CURL_CHECK_FUNC_GETNAMEINFO

- Get some debug info

- Get some debug info

- Avoid shell globbing

- Get qualifier of arg 1 for getnameinfo apart. Take 3.

- Get qualifier of arg 1 for getnameinfo apart.

- Get qualifier of arg 1 for getnameinfo apart. Take 2.

- Get qualifier of arg 1 for getnameinfo apart.

Daniel Stenberg (30 Jun 2006)
- typecast the number passed to CURLOPT_INFILESIZE_LARGE as a curl_off_t

Yang Tse (30 Jun 2006)
- Remove experimental notice from CURL_CHECK_FUNC_GETNAMEINFO

Daniel Stenberg (29 Jun 2006)
- with a very recent yassl, we now can display 'yassl' when the OpenSSL API is
  in fact provided by yassl instead

- changed wording on the curl_multi_fdset() problem and moved the -K change from
  bugfixes

Yang Tse (28 Jun 2006)
- fix better minor compiler warning

- fix minor compiler warning

- fix minor compiler warning

Daniel Stenberg (26 Jun 2006)
- include config-win32.h in release archives

- changed wording slightly, and added standard boiler-plate header

- Wallner's update

- Added README.pipelining but also extracted the "docs" files to a separate list
  to get a better overview

- thoughts and ideas as posted to the list the other day

- corrected introduction version number

- Michael Wallner added curl_formget(), which allows an application to extract
  (serialise) a previously built formpost (as with curl_formadd()).

- 1.3.1

- Provide a libcurl API for setting mutex callbacks in the underlying SSL
  library, so that the same application code can use mutex-locking
  independently of OpenSSL or GnutTLS being used.

- Arve Knudsen found a flaw in curl_multi_fdset() for systems where
  curl_socket_t is unsigned (like Windows) that could cause it to wrongly
  return a max fd of -1.

- Peter Silva introduced CURLOPT_MAX_SEND_SPEED_LARGE and
  CURLOPT_MAX_RECV_SPEED_LARGE that limit tha maximum rate libcurl is allowed
  to send or receive data. This kind of adds the the command line tool's
  option --limit-rate to the library.
  
  The rate limiting logic in the curl app is now removed and is instead
  provided by libcurl itself. Transfer rate limiting will now also work for -d
  and -F, which it didn't before.

- minor language edits bug reports 1510080 1510098

- the D binding link is dead but we know of no new one!

- bad syntax

- make -K on a bad file now displays a warning

William Ahern (19 Jun 2006)
- Remove "big endian" DNS section and RR data integer parser macros from
  ares_dns.h, which break c-ares on my Sparc64. Bit-wise operations in C
  operate on logical values. And in any event the octets are already in
  big-endian (aka network) byte order so they're being reversed (thus the
  source of the breakage).

- Handle EAGAIN/EWOULDBLOCK readiness errors, which can occur for both TCP and
  UDP even when a poll(2) or select(2) suggest otherwise.

Daniel Stenberg (16 Jun 2006)
- when mentioning the default config file, point back to the actual description
  of how to write such a file

- select_res is not a socket, it should be a plain int

Dan Fandrich (13 Jun 2006)
- Check whether gcc supports --enable-hidden-symbols before allowing it.

- Implemented --enable-hidden-symbols configure option to enable
  -fvisibility=hidden on gcc >= 4.0.  This reduces the size of the libcurl
  binary and speeds up dynamic linking by hiding all the internal symbols from
  the symbol table.

Daniel Stenberg (12 Jun 2006)
- oops

- added contributors from the 7.15.4 release

- starting the journey towards the next release

Version 7.15.4 (12 Jun 2006)

Daniel Stenberg (12 Jun 2006)
- 7.15.4 coming up

- Nah, we refer people to the generic site that lists the mirrors instead of
  trying to maintain an accurate list in this file (too).

Gisle Vanem (10 Jun 2006)
- Fix "'x' might be used uninitialized in this function" warnings.

Daniel Stenberg (9 Jun 2006)
- sync with existing list of up-to-date mirrors

- proper use of newlines

- stricter type use to please compilers

- oops, serious breakage in the fdset() function

- lib525.c does a FTP upload with PORT using multi interface

- corrected the CURLINFO_TOTAL_TIME description

- Brian Dessent's fixes for cygwin builds

- NTLM2 session response support

- two new mirrors and a recount of them

- Added config-tpf.h to the release package

- Removed a few fixed issues and a few issues currently in progress in the Hiper
  project. Also added a few obvious ones.

- correct explicit/implicit terms for FTPS

- one modified proto and one removed proto

- adapted to the new Curl_splayremovebyaddr() proto

- Ifdef'ed out unused function, added lots of comments and renamed a few
  variables, simplified the splayprint function, modified
  Curl_splayremovebyaddr() to return error code. All in an effort to track down
  the reported splay problem, but I've failed to do that so far...

- reverted the previous .libs check for libs, but instead make mingw32 builds
  more similar to other configure builds (== use .la for libext and no binext)

- scar Morales Viv updated the libcurl.framework.make file.

- long/int cleanup to silence picky compiler warnings

- Olaf Stben fixed a bug that caused Digest authentication with md5-sess to
  fail. When using the md5-sess, the result was not Md5 encoded and Base64
  transformed.

- minor RFC updates, Dan Fandrich brought my attention to them

- better check for libs created in the .libs directory since libtool does this
  kind of magic

- added some missing items

- Copied the NO_UNDEFINED magic from libcurl to make this build fine again with
  libtool cross-compiled on linux with mingw32

- Michael Wallner provided a patch that allows "SESS" to be set with
  CURLOPT_COOKIELIST, which then makes all session cookies get cleared. (slightly
  edited by me, and the re-indent in cookie.c was also done by me)

- make sure we pass a time_t * to localtime(), and the timeval struct members
  are not always time_t ones

- minor fix to make Curl_splayremove() return a NULL as "removed" in case
  nothing matched fine

- based on Tor Arntsen's fix, this should correct test case 271 to again run
  fine

- Fixed a shell script syntax error that all of a sudden started causing this
  script to fail on debian unstable (some specific bash version perhaps?)

- David McCreedy's update

- updated with more recent facts

- The SOCKS connection codes don't properly acknowledge (connect) timeouts.

- The new ftpuploadresume.c example by Philip Bock

- Ok, when checking for old-style SSLeay headers we cannot just use
  AC_CHECK_HEADERS() and the action-if-found since that action is run even if
  just one of the six headers is found and I just now fell over a case with
  a duplicate file name (a krb4 implementation with an err.h file).
  
  I converted the check to manually make sure three of the headers are present
  before considering them fine.

- 1 - allow much longer time for the test FTP server to startup and get verified
  2 - store the time it took to verify it and allow that time to be used as
    %FTPTIME[23] in command lines to allow us to adjust better to slow hosts
    since test 190 failed on my slow solaris machine just because it hadn't
    gotten time to run all the way the test assumed all machines would reach
    before the time-out elapsed.

- make sure the LASTSOCKET check only checks for SSL status if the socket
  truly use SSL

- silence warning

- David McCreedy provided a fix for CURLINFO_LASTSOCKET that does extended
  checks on the to-be-returned socket to make sure it truly seems to be alive
  and well. For SSL connection it (only) uses OpenSSL functions.

- My Solaris test server was simply too slow to be able to respond within 4
  seconds even when everything is fine! Now we allow a test server 8 seconds
  to respond to still be considered ok.

- cvsignore these files

- 1 - allow DICT with properly URL-escaped words, like using %20 for spaces
  2 - properly escape certain letters within a DICT word to comply to the RFC2229

- removed variable declarations shadowing previously declared variables

- Bram Matthys brought my attention to a libtool peculiarity where detecting
  things such as C++ compiler actually is a bad thing and since we don't need
  that detection I added a work-around, much inspired by a previous patch by
  Paolo Bonzini. This also shortens the configure script quite a lot.

- oops, could return an uninitialized variable

- Andreas Ntaflos reported a bug in libcurl.m4: When configuring my GNU
  autotools project, which optionally (default=yes) uses libcurl on a system
  without a (usable) libcurl installation, but not specifying
  `--without-libcurl', configure determines correctly that no libcurl is
  available, however, the LIBCURL variable gets expanded to `LIBCURL = -lcurl'
  in the resulting Makefiles.
  
  David Shaw fixed the flaw.

- mention the other TFTP cleanup sweep from yday

- Robson Braga Araujo fixed two problems in the recently added non-blocking SSL
  connects. The state machine was not reset properly so that subsequent
  connects using the same handle would fail, and there were two memory leaks.

- Robson Braga Araujo fixed a memory leak when you added an easy handle to a
  multi stack and that easy handle had already been used to do one or more
  easy interface transfers, as then the code threw away the previously used
  DNS cache without properly freeing it.

- check more return codes and skip the initial slash in given file names

- no longer uses errno but Curl_sockerrno() and now acknowledges return codes
  from Curl_client_write

Dan Fandrich (8 May 2006)
- Stop sending retransmitted received blocks up to client
  Fixed handling of retransmitted blocks on transmit
  Properly aligned data to transmit within packet
  Replaced calls to strerror() with Curl_strerror()

Daniel Stenberg (8 May 2006)
- Fixed known bug #28. The TFTP code no longer assumes a packed struct and
  thus works reliably on more platforms.

- Fix GnuTLS compile warning. Risking breakage with some older version of GnuTLS?

- Curl_https_getsock() was OpenSSL-specific and really should not be present
  like this in this source file. The quickfix for now is to provide a simple
  version for GnuTLS builds. The GnuTLS version of libcurl doesn't yet allow
  fully non-blocking connects anyway so this function doesn't get used.

- get the Curl_sockerrno proto

- two more contributors

- additional renames of Curl_ourerrno => Curl_sockerrno

- Roland Blom filed bug report #1481217
  (http://curl.haxx.se/bug/view.cgi?id=1481217), with follow-ups by Michele Bini
  and David Byron. libcurl previously wrongly used GetLastError() on windows to
  get error details after socket-related function calls, when it really should
  use WSAGetLastError() instead.
  
  When changing to this, the former function Curl_ourerrno() is now instead
  called Curl_sockerrno() as it is necessary to only use it to get errno from
  socket-related functions as otherwise it won't work as intended on Windows.

- Mark Eichin submitted bug report #1480821
  (http://curl.haxx.se/bug/view.cgi?id=1480821) He found and identified a
  problem with how libcurl dealt with GnuTLS and a case where gnutls returned
  GNUTLS_E_AGAIN indicating it would block. It would then return an unexpected
  return code, making Curl_ssl_send() confuse the upper layer - causing random
  28 bytes trash data to get inserted in the transfered stream.
  
  The proper fix was to make the Curl_gtls_send() function return the proper
  return codes that the callers would expect. The Curl_ossl_send() function
  already did this.

- moved the curl_off_t check to within the --enable-debug block where it belongs since it is a somewhat ugly hack

- Nick Mathewson added the ARES_OPT_SOCK_STATE_CB option that when set makes
  c-ares call a callback on socket state changes. A better way than the
  ares_getsock() to get full control over the socket state.

- curl-config got a --checkfor option

- Make this code use the proper pointers

Gisle Vanem (26 Apr 2006)
- Added revision ID-tag.

- Fixed signed/unsigned convertion errors in Salford-C.
  #ifdef around WSAEDISCON in strerror.c.

- Use the HAVE_MALLOC_H and HAVE_PROCESS_H defines
  (more logical).

- djgpp has <process.h> too.

- Added support for Salford-C under Win32 (scc). HAVE_MALLOC_H and
  HAVE_PROCESS_H added for all except scc.

- Added SalfordC support.

Daniel Stenberg (26 Apr 2006)
- crlf_conversions needs to be a curl_off_t for ASCII transfers > 4GB on 32bit
  systems

- updated with more error codes

- David McCreedy brought line end conversions when doing FTP ASCII
  transfers. They are done on non-windows systems and translate CRLF to LF.

- --ftp-method was missing in the --help output, as mentioned by Manfred Schwarb

- Paul Querna fixed libcurl to better deal with deflate content encoding when
  the stream (wrongly) lacks a proper zlib header. This seems to be the case on
  too many actual server implementations.

- prevent signed/unsigned warnings

- Mention my April 20 thoughts. I already changed the README in the lib dir
  to be accurate on this.

- added the hipev build

- the example that _is_ supposed to use libevent

- this example does NOT use libevent!

- Ale Vesely fixed CURLOPT_INTERFACE when using a hostname

- each socket is used by exactly one easy handle, but of course each easy handle
  can and will use more than one socket

- added SPL and XBLite

Gunter Knauf (20 Apr 2006)
- removed  -fpack-struct because gcc4 seems to know its obsolete and warns...

Daniel Stenberg (19 Apr 2006)
- detect ICC and pass on "-we 147" so that the configure checks for function
  arguments work properly - and the option is not harmful for the rest of the
  curl build either!

- the new conversion stuff documented (mostly by David McCreedy)

- CURL_VERSION_CONV is returned by curl_version_info if libcurl has been built
  to allow/support character conversions

- mention the recent thoughts/progress I had

- Robson Braga Araujo provided a patch that makes libcurl less eager to close
  the control connection when using FTP, for example when you remove an easy
  handle from a multi stack.

- mention Katie Wang as author of the patch

- corrected the SSL timeout, as Ates Goral's patch did it and that works (opposed
  to my previous brain-damaged version)

- attempt to silence the MIPSPro compiler warning

- avoid a warning about declaring a variable that shadows an earlier declared
  one

- there's an curl_easy_unescape too now

Gunter Knauf (17 Apr 2006)
- minor Makefile fix - let's go 2006;
  use correct version var.

- added missing symbol export.

Daniel Stenberg (12 Apr 2006)
- added splay

Gisle Vanem (12 Apr 2006)
- Added splay.c.

- Add "multiif.h" for GETSOCK_WRITESOCK() macro.

Daniel Stenberg (11 Apr 2006)
- #1468330 (http://curl.haxx.se/bug/view.cgi?id=1468330) pointed out a bad
  typecast in the curl tool leading to a crash with (64bit?) VS2005 (at least)
  since the struct timeval field tv_sec is an int while time_t is 64bit.

- adjusted to the new internal *_getsock() concept for providing info internally
  about what sockets to wait for what action on

- added docs and removed proto

- mention recent additions

- adding the new man pages to the package

- Ates Goral found out that if you specified both CURLOPT_CONNECTTIMEOUT and
  CURLOPT_TIMEOUT, the _longer_ time would wrongly be used for the SSL
  connection time-out!

- First curl_multi_socket() commit. Should primarily be considered as an internal
  code rearrange to fit the future better.

- This no longer needs the extra define!

- added README.multi_socket

- state of the multi_socket API works

- check for fork() as well, so that we can build the sws http test server with
  fork support for cooler tests

- avoid duplicate typedefs, as this type is also defined in our public headers

- curl_multi_socket() updates

- if configure found a fork(), sws supports --fork which is *NOT* used by the
  ordinary test suite. Also removed the perror() calls and instead made the
  logging output the errno code to ease error tracking using logs.

- output the exit code from stunnel to stderr in case it is non-zero

- support --fork and pass that on to sws

- Scan for 'stunnel4' before 'stunnel' since debian have them setup this way
  and it should break most other systems. The "funny" part is that debian
  actually have a 'stunnel' setup to simulate stunnel v3 but it breaks our own
  stunnel-version-detect-and-adjust-to-it system.
  
  Added initial support for optionally running servers with fork support.

- Use correct content-length. Found out by patching the libcurl read to only
  read one byte at a time...

- 33. Doing multi-pass HTTP authentication on a non-default port does not work.
    This happens because the multi-pass code abuses the redirect following code
    for doing multiple requests, and when we following redirects to an absolute
    URL we must use the newly specified port and not the one specified in the
    original URL. A proper fix to this would need to separate the negotiation
    "redirect" from an actual redirect.

- 65 - curl_multi_socket() added but not extensively tested nor particularly
       documented or pushed for.

- we haven't been using yacc/bison in a long time!

- forked off the changes from 2005 into its own file

- CURLE_FTP_USER_PASSWORD_INCORRECT is not returned by libcurl anymore!

- mention RFC 2396 for URL syntax spec

- new little example using the new conversion callbacks added in 7.15.4

- mention the outlength argument

Gisle Vanem (8 Apr 2006)
- readint_le() not needed in USE_WINDOWS_SSPI code.

- curl_easy_unescape() takes 4 arguments.

Daniel Stenberg (7 Apr 2006)
- First commit of David McCreedy's EBCDIC and TPF changes.

- minor re-arrange to return a value in order to avoid compiler warnings
  for not returning a value from a non-void function (even though the code
  never actually reached that point before)

- added typedefed function pointers and typecast the NULL assignments in an
  attempt to silence picky compilers when assigning data pointers to a function
  pointer variable

- attempt to avoid warnings in picky environments by storing options as
  unsigned chars

- cut off a bit more of the type-2 ntlm message since it differs between
  hosts

- Michele Bini modified the NTLM code to work for his "weird IIS case"
  (http://curl.haxx.se/mail/lib-2006-02/0154.html) by adding the NTLM hash
  function in addition to the LM one and making some other adjustments in the
  order the different parts of the data block are sent in the Type-2 reply.
  Inspiration for this work was taken from the Firefox NTLM implementation.
  
  I edited the existing 21(!) NTLM test cases to run fine with these news. Due
  to the fact that we now properly include the host name in the Type-2 message
  the test cases now only compare parts of that chunk.

- for the CURLDEBUG case, we redefine sprintf and vsprintf to make us notice
  if any use of such a function slip through

- #1451929 (http://curl.haxx.se/bug/view.cgi?id=1451929) detailed a bug that
  occurred when asking libcurl to follow HTTP redirects and the original URL had
  more than one question mark (?). Added test case 276 to verify.

- converted sprintf() to snprintf() to reduce risk

- David Byron found a problem multiple -d options when libcurl was built with
  --enable-debug, as then curl used free() on memory allocated both with
  normal malloc() and with libcurl-provided functions, when the latter MUST be
  freed with curl_free() in debug builds.

Gunter Knauf (27 Mar 2006)
- minor Makefile fix - let's go 2006;
  avoid kiling hugehelp.c when not built from CVS.

Daniel Stenberg (26 Mar 2006)
- Tor Arntsen figured out that TFTP was broken on a lot of systems since we
  called bind() with a too big argument in the 3rd parameter and at least
  Tru64, AIX and IRIX seem to be very picky about it.

- David McCreedy added CURLINFO_FTP_ENTRY_PATH to export the FTP entry path

- Xavier Bouchoux made the SSL connection non-blocking for the multi interface
  (when using OpenSSL).

- Tor Arntsen fixed the AIX Toolbox RPM spec

- David McCreedy fixed libcurl to no longer ignore AUTH failures and now it
  reacts properly according to the CURLOPT_FTP_SSL setting.

- mention today's fixes

- 7.15.3 contributors

Dan Fandrich (20 Mar 2006)
- Fixed a bug whereby a received file whose length was a multiple of
  512 bytes could have random garbage appended.  Also, stop processing TFTP
  packets which are too short to be legal.

Daniel Stenberg (20 Mar 2006)
- off-by-one for the case when it adds /? and a terminating zero to the URL

- start working towards 7.15.4

Version 7.15.3 (20 Mar 2006)

Daniel Stenberg (20 Mar 2006)
- fixed the AIX packages

- missing in CVS

- fixed tftp packet overflow risk

- slight rewording based on debian bug report #357388 by Justin Pryzby

- fixed in CVS

- AIX Toolbox RPM spec file by Tor Arntsen

- slightly edited explanation for -f/--fail by the help of Kjell Ericson

- use the new types accordingly

- --ftp-method and CURLOPT_FTP_FILEMETHOD are now documented and usable

- David McCreedy found a use of the wrong variable when display the error
  text from OpenSSL.

- David McCreedy found a missing return code assignment

- Scott Worley's typo fixes

- Peter Heuchert's correction for the clear control connection case

- Markus Koetter filed debian bug report #355715 which identified a problem
  with the multi interface and multi-part formposts. The fix from February
  22nd could make the Curl_done() function get called twice on the same
  connection and it was not designed for that and thus tried to call free() on
  an already freed memory area!

- Peter Heuchert made sure the CURLFTPSSL_CONTROL setting for CURLOPT_FTP_SSL
  is used properly.

- Lots of users on Windows have reported getting the "SSL: couldn't set
  callback" error message so I've now made the setting of that callback not be
  as critical as before. The function is only used for additional loggging/
  trace anyway so a failure just means slightly less data. It should still be
  able to proceed and connect fine to the server.

- build fix for Interix

- If run on a curl built shared, detect this and invoke libtool for gdb
  accordingly.

- added test524

- Prevent uploading to a URL that has no file name part.

- point out that CAINFO points out a file name by default

- added large chunk of blurb about the progress meter

- I'm pretty sure #24 is fixed in 7.15.2

- mention Dan F's out-of-file handles fix from the other day

- check for and use getprotobyname

Dan Fandrich (28 Feb 2006)
- Don't lock up at start when there aren't any free file descriptors.

Daniel Stenberg (27 Feb 2006)
- added missing files

- ack, removed duplicate

- 7.15.2 contributors added

- start over on what might become 7.15.3

- hehe, wrong year but who reads these lines anyway? ;-)

Version 7.15.2 (27 Feb 2006)

Daniel Stenberg (27 Feb 2006)
- 7.15.2

Gisle Vanem (26 Feb 2006)
- Small fix.

- Use getprotobyname() to retrieve protocol number for TCP
  (sorry, I don't know how to add this to the configure process).

- Fix typo.

Dan Fandrich (24 Feb 2006)
- Added user ID support to SOCKS4.

Daniel Stenberg (23 Feb 2006)
- Fixed typo, the option is called --write-out. Bob Bagwill pointed out.

- argh, forgot the check for a connection before we call Curl_done

Dan Fandrich (23 Feb 2006)
- Fixed a few more comment typos.

Daniel Stenberg (23 Feb 2006)
- Peter Su's SOCKS4 fix

- the last planned fix is done

- Lots of work and analysis by "xbx___" in bug #1431750
  (http://curl.haxx.se/bug/view.cgi?id=1431750) helped me identify and fix two
  different but related bugs:
  
  1) Removing an easy handle from a multi handle before the transfer is done
     could leave a connection in the connection cache for that handle that is
     in a state that isn't suitable for re-use. A subsequent re-use could then
     read from a NULL pointer and segfault.
  
  2) When an easy handle was removed from the multi handle, there could be an
     outstanding c-ares DNS name resolve request. When the response arrived,
     it caused havoc since the connection struct it "belonged" to could've
     been freed already.
  
  Now Curl_done() is called when an easy handle is removed from a multi handle
  pre-maturely (that is, before the transfer was complteted). Curl_done() also
  makes sure to cancel all (if any) outstanding c-ares requests.

Dan Fandrich (22 Feb 2006)
- Fixed test case 57 (KNOWN_BUG #18)

- Fixed some spelling errors in comments, and extraneous \n in failf logs.

Daniel Stenberg (21 Feb 2006)
- two typos in comments

- Peter Su added support for SOCKS4 proxies. Enable this by setting the proxy
  type to the already provided type CURLPROXY_SOCKS4.
  I added a --socks4 option that works like the current --socks5 option but
  instead use the socks4 protocol.

- ftp upload with url ending with slash

- Shmulik Regev fixed an issue with multi-pass authentication and compressed
  content when libcurl didn't honor the internal ignorebody flag.

- Ulf Hrnhammar fixed a format string (printf style) problem in the Negotiate
  code. It should however not be the cause of any troubles. He also fixed a
  few similar problems in the HTTP test server code.

Yang Tse (17 Feb 2006)
- Fix spacing.

Daniel Stenberg (17 Feb 2006)
- fixed formatting

- Shmulik Regev provided a fix for the DNS cache when using short life times,
  as previously it could be holding on to old cached entries longer than
  requested.

Dan Fandrich (16 Feb 2006)
- Gopher is no longer supported.

Daniel Stenberg (16 Feb 2006)
- two items before release

- Added some clarifying comments

- 32. (At least on Windows) If libcurl is built with c-ares and there's no DNS
    server configured in the system, the ares_init() call fails and thus
    curl_easy_init() fails as well. This causes weird effects for people who use
    numerical IP addresses only.

- mention the CURLOPT_CONNECT_ONLY connection

- Karl M added the CURLOPT_CONNECT_ONLY and CURLINFO_LASTSOCKET options that
  an app can use to let libcurl only connect to a remote host and then extract
  the socket from libcurl. libcurl will then not attempt to do any transfer at
  all after the connect is done.

- Kent Boortz improved the configure check for GnuTLS to properly set LIBS
  instead of LDFLAGS.

- CURLOPT_NOSIGNAL might be a MUST to make threaded use work, like on AIX 5.2
  due to the use of the static variable for sigsetjmp()

- Philippe Vaucher provided a brilliant piece of test code that show a problem
  with re-used FTP connections. If the second request on the same connection was
  set not to fetch a "body", libcurl could get confused and consider it an
  attempt to use a dead connection and would go acting mighty strange.

- avoid illegal memory access when doing "-T [URL] [URL]"

- Rene Bernhardt found this typo

- how silly, the cookie expired! ;-)

- Frank's synctime.c example and an updated list in README

- fixed --limit-rate

- Make --limit-rate [num] mean bytes. Seems I broke it back in november 2005...

Gisle Vanem (30 Jan 2006)
- Squelch the "warning: 'port' might be used uninitialized in this function".
  (occurs w/o ENABLE_IPV6).

Daniel Stenberg (30 Jan 2006)
- Added CURLOPT_LOCALPORT and CURLOPT_LOCALPORTRANGE to libcurl. Set with the
  curl tool with --local-port. Plain and simply set the range of ports to bind
  the local end of connections to. Implemented on to popular demand.
  
  Not extensively tested. Please let me know how it works.

- Based on an error report by Philippe Vaucher, we no longer count a retried
  connection setup as a follow-redirect. It turns out 1) this fails when a FTP
  connection is re-setup and 2) it does make the max-redirs counter behave
  wrong. This fix was not verified since the reporter vanished, but I believe
  this is the right fix nonetheless.

- more mirrors

- we should fix the system includes in the public headers to be based on checks
  of the system instead of depending on what particular systems we think need
  various headers

- include sys/select.h on NetBSD as well

- typo pointed out by Mike Griffiths

- Cyrill Osterwalder pointed out that sending "" as data in a header is in
  fact equal to a blank one according to the spec.

- updated source header

- Michal Marek provided a patch for FTP that makes libcurl continue to try PASV
  even after EPSV returned a positive response code, if libcurl failed to
  connect to the port number the EPSV response said. Obviously some people are
  going through protocol-sensitive firewalls (or similar) that don't understand
  EPSV and then they don't allow the second connection unless PASV was
  used. This also called for a minor fix of test case 238.

Dan Fandrich (20 Jan 2006)
- Fixed some statements about handling multiple occurrences of options.
  Tried to make some of the wording a bit more consistent.

Daniel Stenberg (20 Jan 2006)
- the second -P fix

- Duane Cathey was one of our friends who reported that curl -P [IP]
  (CURLOPT_FTPPORT) didn't work for ipv6-enabed curls if the IP wasn't a
  "native" IP while it works fine for ipv6-disabled builds!
  
  In the process of fixing this, I removed the support for LPRT since I can't
  think of many reasons to keep doing it and asking on the mailing list didn't
  reveal anyone else that could either. The code that sends EPRT and PORT is
  now also a lot simpler than before (IMHO).

- Jon Turner pointed out that doing -P [hostname] with curl (built ipv4-only)
  didn't work.

- clarify what "-P -" does

- corrected factual mistake about BSD license in the krb4.c code

- reality sync

- configure no longer warns on "missing" if the current path contains a space

- David Shaw: Here is the latest libcurl.m4 autoconf tests.  It is updated with
  the latest features and protocols that libcurl supports and has a minor fix to
  better deal with the obscure case where someone has more than one libcurl
  installed at the same time.

- happy new year!

- David Shaw finally removed all traces of Gopher and we are now officially
  not supporting it. It hasn't been functioning for years anyway, so this is
  just finally stating what already was true. And a cleanup at the same time.

- improved the description of the -L/--location option

- Bryan Henderson turned the 'initialized' variable for curl_global_init()
  into a counter, and thus you can now do multiple curl_global_init() and you
  are then supposed to do the same amount of calls to curl_global_cleanup().
  Bryan also updated the docs accordingly.

- adjusted to use curl_multi_setopt() to set the callback

- adjusted to the new concept of the callback

- Andrew Benham fixed a race condition in the test suite that could cause the
  test script to kill all processes in the current process group!

- Fixed FTP_SKIP_PASV_IP and FTP_USE_EPSV to "do right" when used on FTP thru
  HTTP proxy.

- Michael Jahn fixed ftp over CONNECT

- mention the "secret" option as I've got no feedback and it is actually present
  in 7.15.1

- When using a bad path over FTP, as in when libcurl couldn't CWD into all
  given subdirs, libcurl would still "remember" the full path as if it is the
  current directory libcurl is in so that the next curl_easy_perform() would
  get really confused if it tried the same path again - as it would not issue
  any CWD commands at all, assuming it is already in the "proper" dir.
  
  Starting now, a failed CWD command sets a flag that prevents the path to be
  "remembered" after returning.

- Made the copyright year match the latest modification's year.

- Alexander Lazic improved the getservbyport_r() configure check.

- one more mirror, now fortunately in Japan

- use the proper dash

- Mike Jean fixed so that the second CONNECT when doing FTP over a HTTP proxy
  actually used a new connection and not sent the second request on the first
  socket!

- buildconf fixes

- As Alexander Lazic pointed out, run the buildconf from the ares dir if that
  is present instead of trying to duplicate that stuff in this script.

- Use $ACLOCAL_FLAGS too, pointed out by Alexander Lazic

- summary of what we have

- James Bursa fixes: find the hosts file on RISC OS, and made it build with
  newer gcc versions that no longer defines "riscos".

- Yang Tse has been helping out

- modified output to prevent the autobuild system to trap on the 'FAILED' output
  mistaking it for an actual failed test case

Gisle Vanem (4 Jan 2006)
- Added ares_getsock.obj.

Daniel Stenberg (4 Jan 2006)
- updated test programs to use the API as it currently works

- removed easy handle argument from proto

- upcoming new error code

- Andres Garcia made the TFTP test server build with mingw.

- not much recent stuff, but still I had this modified locally

- Added remake of the arpa/tftp.h file to make the TFTP server build on systems
  without the real header file.

- killed trailing whitespace

- Andres Garcia made the TFTP test server build with mingw ("I also had to copy
  the 'tftp.h' file from a linux box, since it doesn't come with mingw.")

- CURLOPT_PROGRESSFUNCTION is really not a good idea when using the multi
  interface

- fixed the prototype

- modified to hush compiler warnings

- Removed inaccurate comment for upcoming curl_multi_socket() and family.
  Modified the callback proto used for it.

- minor edits

- Initial description of the upcoming curl_multi_timeout() function

- I removed the timeout argument from the socket callback and did some other
  cleanups of this man page. The lengthy description has now also been removed
  from curl/multi.h since it immediately got tedious to maintain the info on
  two places when I did major updates...

Gisle Vanem (2 Jan 2006)
- Include <sys/ioctl.h> before redefining ioctl().

Daniel Stenberg (2 Jan 2006)
- 1. sws now supports two new "commands" and 2. if built with
  CURL_SWS_FORK_ENABLED defined it forks for each new connection and thus can
  support any amount of connection clients (used for hiper tests and not for the
  standard plain curl test suite)

- we're working on 1.3.1 (or more)

Marty Kuhrt (30 Dec 2005)
- fix questionable compare

- fix questionable compare compiler error (unsigned can't be < 0)

- removed defunct email address

- removed .h and .sdl

- putting back into dist

- put back into dist to lessen build confusion for some

- put back into dist since most people didn't want to use SDL

- changed HAVE_STRTOK to follow CRTL version

- added TFTP errors to match curl.h

Daniel Stenberg (23 Dec 2005)
- Kirill Vasiliev fixed the 'release-ssl-dll' target to properly build a
  static libcurl using openssl as dll.

- clarified that curl_global_init() isn't thread-safe and that it might affect
  curl_easy_init() if you don't call curl_global_init() explicitly in your app

Dan Fandrich (23 Dec 2005)
- Mention that PKG_CONFIG_PATH is preferred to --with-ssl

Daniel Stenberg (22 Dec 2005)
- This function was added in c-ares [version]

- added ares_getsock()

- Added ares_getsock() to extract sockets to wait for action on, without being
  limited to select().

- The inital early embryos to describe the curl_multi_socket() API. Committed
  now to enable them to get added as web pages easier, they are not ready
  for anything "real" just yet.

- the curl_multi_socket() test application (still using select())

- #31 curl-config --libs" will include details set in LDFLAGS when configure is
  run that might be needed only for building libcurl.

Yang Tse (21 Dec 2005)
- Checking for function getnameinfo and its arguments is finally
  done in one single function CURL_CHECK_FUNC_GETNAMEINFO which
  will only define HAVE_GETNAMEINFO if the function has been found
  AND the type of its arguments has been properly been detected

- Undefine HAVE_GETNAMEINFO if unable to find
  proper types to use for getnameinfo args

- Undefine HAVE_GETNAMEINFO if unable to find
  proper types to use for getnameinfo args

- Make sure we're using 'c-ares' sources and not 'ares' ones.

Daniel Stenberg (21 Dec 2005)
- added our regular source header

- allow more evironment variables to control what tools to check for and use

- use ACLOCAL even when using 'find' to find the aclocal tool

Yang Tse (20 Dec 2005)
- In CURL_FUNC_GETNAMEINFO_ARGTYPES, when cross-compiling a windows
  target use calling convention WSAAPI for getnameinfo() prototype.
  Checking type DWORD as argument 4 and 6 of getnameinfo not needed.

Daniel Stenberg (20 Dec 2005)
- explain tld_check_name()

Gisle Vanem (20 Dec 2005)
- Changes for PellesC compiler under Win32.

- Changes for PellesC compiler under Win32. A bit limited, but
  we just love swedish products...

- Fix PellesC warning.

- Changes for PellesC for Win32. It needs <unistd.h> for 'ssize_t'. Hence the
  rearrangement in ares_process.c.

Yang Tse (20 Dec 2005)
- fix ioctlsocket detection

- Fix, header checks must be done before using its results.

Daniel Stenberg (20 Dec 2005)
- shiper is the new test tool for the new API

- show dl speed

- added our standard source header

- fix closing parentheses

- use AC_PROG_LIBTOOL after AC_DISABLE_SHARED

Yang Tse (20 Dec 2005)
- Fix quoting

- Give third argument to AC_DEFINE_UNQUOTED

- Use native type SOCKET instead of int when testing functionality of ioctlsocket on Windows

- Ooops

Dan Fandrich (19 Dec 2005)
- Fixed compiler warning on libc5.

Yang Tse (19 Dec 2005)
- Add checking for type DWORD as argument 4 and 6 of getnameinfo

- Adjust more windows header includes

Dan Fandrich (19 Dec 2005)
- Fixed lcc compiler warnings.

Yang Tse (19 Dec 2005)
- Fix guard detection of _WIN32_WINNT for MingW in CURL_FUNC_GETNAMEINFO_ARGTYPES

- Add check for 'unsigned int' as type of arguments 4 and 6 of getnameinfo

- Undo previous change. This header file belongs to the public
  interface and the change could break the compilation of thrid
  party apps which link against this library.

- When checking the type of the first argument of getnameinfo do it in the
  following order: 'struct sockaddr *' 'const struct sockaddr *' 'void *'.

- Fix spacing. When defining, define to 1.

- Cleanup windows header includes. Where aplicable, inclusion of
  windows.h winsock.h winsock2.h ws2tcpip.h is done in setup.h

- MingW guards getnameinfo, getaddrinfo and freeaddrinfo with _WIN32_WINNT >= 0x0501

- Fix Msys/Mingw not detecting getnameinfo() with AC_CHECK_FUNCS

- Make it compatible with vc60 and vc71

- Fix typo

- Fix compiler warning

- Cleanup

- Windows related cleanup

- Check first arg of getnameinfo with and without const qualifier.

- Change multiple header inclusion prevention definition to __LIB_CURL_SETUP_H

- Avoid breaking configure due to CURL_FUNC_GETNAMEINFO_ARGTYPES failure, since at this point nothing depends on it.

- const qualifier in getnameinfo check

- Since there is no proof of the existence of a platform which would
  justify checking for socklen_t in more than one function, the code
  used to find a valid socklen_t replacement is simplified back. The
  only function that will be used to find a socklen_t replacement is
  getpeername, as it has been since revision 1.4 of curl/acinclude.m4

- 'Fix' windows builds

- TYPE_SOCKLEN_T completely replaced by CURL_CHECK_TYPE_SOCKLEN_T.
  CURL_FUNC_GETNAMEINFO_ARGTYPES now also checks first argument.
  All related changes taken to cares configuration scripts.

Daniel Stenberg (16 Dec 2005)
- Jean Jacques Drouin pointed out that you could only have a user name or
  password of 127 bytes or less embedded in a URL, where actually the code
  uses a 255 byte buffer for it! Modified now to use the full buffer size.

Yang Tse (16 Dec 2005)
- More quotes

- Fix copy paste bug

- Test CURL_CHECK_TYPE_SOCKLEN_T

- Oops. Wrong double quotes

- Experimental check for socklen_t CURL_CHECK_TYPE_SOCKLEN_T

- Tests to check the availability of compilable and
  valid windows.h winsock.h winsock2.h and ws2tcpip.h
  header files:
  CURL_CHECK_HEADER_WINDOWS
  CURL_CHECK_HEADER_WINSOCK
  CURL_CHECK_HEADER_WINSOCK2
  CURL_CHECK_HEADER_WS2TCPIP

Daniel Stenberg (15 Dec 2005)
- minor edit

Yang Tse (14 Dec 2005)
- Some preprocessors have problems if the # character isn't at position 1.

- Check getnameinfo() argument types only if we have getnameinfo().

- Determine the correct type to be passed to four of the `getnameinfo' function's arguments, and define those types in `GETNAMEINFO_TYPE_ARG2', `GETNAMEINFO_TYPE_ARG46', and `GETNAMEINFO_TYPE_ARG7'.

Daniel Stenberg (14 Dec 2005)
- Rene Bernhardt's corrections

Dan Fandrich (13 Dec 2005)
- Log CPPFLAGS environment variable along with the others.

- Fixed some compiler warnings on lcc.

Yang Tse (13 Dec 2005)
- Undo last 'fix', since it was not the proper one.

Daniel Stenberg (12 Dec 2005)
- another SOCKS-related problem added

- added #29 and #30

Yang Tse (12 Dec 2005)
- Fix compiler warning

Dan Fandrich (12 Dec 2005)
- lcc isn't Windows-only, so check for it in conjunction with WIN32

Yang Tse (11 Dec 2005)
- Undo last changes

Daniel Stenberg (11 Dec 2005)
- Dov Murik made defining HTTP_ONLY also disable TFTP

Yang Tse (11 Dec 2005)
- Avoid generation of additional warnings

- Fix compiler warning and compatibility issue with the type of the parameter used in getnameinfo() to receive the length of the sockaddr struct.

Daniel Stenberg (10 Dec 2005)
- use c-ares' IPv6 abilities
  fix CONNECT to a proxy that disconnects during the auth phase

- fix CURLOPT_FAILONERROR error, pointed out by Shailesh N. Humbad

Yang Tse (10 Dec 2005)
- Modified lookup_service() to avoid the risk of a potential buffer overflow

- Fix compiler warning

- Fix compiler warning

- Unset HAVE_STRUCT_SOCKADDR_STORAGE when using msvc 6.0 with no PSDK

Daniel Stenberg (9 Dec 2005)
- build ulimiter too

- Work around the 1024 connection limit in select(), or rather in the FD_*
  macros.

- Handy little tool that increases the amount of max open file descriptors
  and then runs a given command line.

Dan Fandrich (8 Dec 2005)
- Replaced nonstandard u_char and u_int types

Yang Tse (8 Dec 2005)
- Fix compiler warning

- Fix compiler warning

Dan Fandrich (8 Dec 2005)
- Fixed a lingering omission of gzip support.

Yang Tse (8 Dec 2005)
- Fix compiler warning

- Fix a couple of compiler warnings

- If unable to get curl's version, log all failure details.

Daniel Stenberg (7 Dec 2005)
- Lots of updates to detect what problems we got. They are related
  to the 1024 file descriptor limit in the server...

- New version for testing connections against a local server for easier setting
  up N idle and Z active connections in a controlled manner. This requires a
  a HTTP server that supports the server end. I have a modified sws for this
  (from the curl test suite) and I may commit the changes required for that
  soonish.

- start working on 7.15.2

- fresh contributors in the 7.15.1 release

Version 7.15.1 (6 Dec 2005)

Daniel Stenberg (6 Dec 2005)
- 7.15.1 with the now to be announced security flaw fixed

- my first collect-random-urls script, just for reference

- ok, these are the test build I've used so far

- Yang Tse: fixed compiler warning

- Yang Tse: With last change logging directory needs to be created sooner.

Dan Fandrich (5 Dec 2005)
- Added a run-time check to warn if TFTP is going to fail due to portability
  issues in the code.

Daniel Stenberg (5 Dec 2005)
- Yang Tse: make runtests.pl more talkative when unable to find out curl's
  version.

- Yang Tse fixed: Openssl 0.9.9 makes 'const' the SSL_METHOD parameter in
  SSL_CTX_new and others, and also makes functions SSLv23_client_method,
  TLSv1_client_method, etc return a 'const' SSL_METHOD pointer. Previous
  versions do not use the 'const' qualifier.

- Another Yang Tse warning cleanup raid!

Gisle Vanem (4 Dec 2005)
- Recent OpenSSL returns a 'const' in '*_client_method()'. So avoid
  'assignment discards qualifiers from pointer target type' warning.

Daniel Stenberg (2 Dec 2005)
- Yang Tse adjusted the multiple header inclusion prevention definition
  H_MPRINTF to our more used style __CURL_MPRINTF_H

- Yang Tse's fix to only provide the proto if there is such a function and
  we didn't find any proto

- Yang Tse fixed the 4th argument in the sendto() calls

- Jamie Newton pointed out that libcurl's file:// code would close() a zero
  file descriptor if given a non-existing file.

- #27 is fixed

- cast the va_arg() assignment to ftp_filemethod properly

- Yang Tse's fix of the inet_pton check

- new experimental "ftp method" code

- Bryan Henderson

- Yang Tse's changes to provide an inet_pton() proto for the platforms who
  don't have one in order to fix a remaining warning on IRIX 6.2.

- added note about the inclusion of curl.h from within this file

- Bryan Henderson: added missing ignores

- Yang Tse fixed compiler warnings

- read_tcp_data() fix to get the proper buffer pointer and size

- Yang Tse: fixes the use of Curl_inet_ntop and Curl_inet_pton with no
  prototypes on some platforms, ie IRIX 6.2 MIPS C 6.2

- Yang Tse: fixed compiler warnings

- Change based on Yang Tse's excellent fix to reduce buffer overflow risk and
  fixing a compiler warning in the append_scopeid() function.

- Doug Kaufman corrected my attempt to a generic "skip extra test for function
  F"

- avoid doing #if an a predef symbol that might not be defined

- Yang Tse: use static on file-private functions

- Yang Tse: fix compilation errors when SSL is not disabled and HTTP is
  disabled

- Yang Tse: removes GOPHER protocol when HTTP is disabled

Gisle Vanem (24 Nov 2005)
- Changes for OpenWatcom 1.4.

Daniel Stenberg (24 Nov 2005)
- Doug Kaufman's set of patches to make curl build fine on DJGPP again using
  configure.

- mention the colon-only thing for -u and SSPI+NTLM

- Yang Tse's patch to silence MSVC warnings

- only enable NTLM if HTTP and NTLM is not disabled, and if NTLM is disabled
  we define an empty macro for the ntlm cleanup function

- Yang Tse fixed MSVC 6.0 warnings

- fix compiler warning

- I extended a patch from David Shaw to make libcurl _always_ provide an error
  string in the given error buffer to address the flaw mention on 21 sep 2005.

- TFTP

- Applied Albert Chin's patch that makes the libcurl.pc pkgconfig file get
  installed on 'make install' time.

- check for and use winsock2.h instead of winsock.h and I fixed a typo in the
  ifdefs where . was used instead of _!

- include ws2tcpip.h in an attempt to detect some of the ipv6 structs better
  in mingw builds

- Detect big/little endian in the configure script and adjust the ares_dns.h
  macros accordingly.

- Quagmire reported that he needed to raise a NTLM buffer for SSPI to work
  properly for a case, and so we did. We raised it even for non-SSPI builds
  but it should not do any harm. http://curl.haxx.se/bug/view.cgi?id=1356715

Gisle Vanem (14 Nov 2005)
- Added '-DHAVE_SOCKADDR_IN6_SIN6_SCOPE_ID'.

- Added CVS id.
  Avoid warning 'x might be used uninitialized in this function'.

- We have HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID.

Daniel Stenberg (14 Nov 2005)
- Yang Tse: msvc7+ has deprecated the 'DESCRIPTION' section in
  module-definition files. this section is not mandatory for msvc60 so it
  could be completely removed from libcurl.def.

- Jan Kunder's debian bug report
  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=338680 identified a weird
  error message for when you try to upload a file and the requested directory
  doesn't exist on the target server.

- extended the description for exit code 9

- Yang Tse fixed compiler warnings

- to build with old gnutls verions, don't use the *_t types

- prevent compiler warning

Gisle Vanem (13 Nov 2005)
- Add HAVE_STRUCT_SOCKADDR_STORAGE.
  My mistake; WinCE has it's own config-file.

- Fix for WIN32. WIN32 does have 'struct sockaddr_storage', but
  that's in <winsock2.h>. Hence tftp.c wouldn't compile on WinCE.

Daniel Stenberg (13 Nov 2005)
- Debian bug report 338681 by Jan Kunder: make curl better detect and report bad
  limit-rate units: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=338681 Now
  curl will return error if a bad unit is used.

- Thanks to this nice summary of poll() implementations:
  http://www.greenend.org.uk/rjk/2001/06/poll.html and further tests by Eugene
  Kotlyarov, we now know that cygwin's poll returns only POLLHUP on remote
  connection closure so we check for that case (too) and re-enable poll for
  cygwin builds.

- Eugene Kotlyarov found out that cygwin's poll() function isn't doing things
  right: http://curl.haxx.se/mail/archive-2005-11/0045.html so we now disable
  poll() and use select() on cygwin too (we already do the same choice on Mac OS
  X)

- oops * 2

- oops

- Reversed the logic for sockaddr_storage and made our own Curl_sockaddr_storage
  struct instead to use.

- on windows (mingw32) the sockaddr_storage struct is in winsock2.h

Gisle Vanem (12 Nov 2005)
- Fixed typo. Detabified.

- Support big-endian machines.

- Added CVS id, Detabified, applied c-ares coding-style.

- Added CVS id. Detabified.

- Include <getopt.h>.
  Use DNS__32BIT() and DNS__16BIT()  (How about BE machines?).
  Display T_AAAA resource.

Daniel Stenberg (12 Nov 2005)
- removed files no longer existing

- Dima Barsky patched problem #1348930: the GnuTLS code completely ignored
  client certificates! (http://curl.haxx.se/bug/view.cgi?id=1348930).

- Moved the sockaddr_storage definition to lib/sockaddr.h and only include that
  in files that actually need the struct.

Gisle Vanem (11 Nov 2005)
- Squelch gcc 4.x warning.

- Detabified. Added CVS id.

- HAVE_xx defines moved to config-win32.h.

Daniel Stenberg (11 Nov 2005)
- mention how to set domain when using NTLM

Gisle Vanem (11 Nov 2005)
- Update using ares_inet_pton() and ares_inet_ntop().

Daniel Stenberg (10 Nov 2005)
- one in, one out

- Fun while it lasted. New mirror already out-of-date.

- David Lang fixed IPv6 support for TFTP!

- David Lang: if there is no sockaddr_storage, make up our own and use that

- modified to the new error text for range error

- just implemented

- Introducing range stepping to the curl globbing support. Now you can specify
  step counter by adding :[num] within the brackets when specifying a range.

Gisle Vanem (10 Nov 2005)
- Use config-win32.h on Windows. Fixes for djgpp.

- Defines moved to config-win32.h.

- Easy configuration with this file.

- Remove generated files areslib.plg areslib.mak from CVS.

- Remove generated files ahost.plg ahost.mak from CVS.

- Remove generated files adig.plg adig.mak from CVS.

Daniel Stenberg (9 Nov 2005)
- * Add step parameter to the globbing. Like [0-1000;10] that would walk the
    range increasing the number with 10 for every step. Requested by Jose:
    http://curl.haxx.se/feedback/display.cgi?id=11315662266802

Gisle Vanem (9 Nov 2005)
- Update with "new" HAVE_xx.

- Replace <winsock.h> with <winsock2.h>
  since IPv6 support is required.

- Add cvs id.

- Added Makefile.vc6.

- I hate MS-devstudio project files.

- Updated for MingW. Added inet_ntop.o inet_net_pton.o bitncmp.o.
  Added -D'efines'.

- MSVC fix for 'socklen_t'. Replace <winsock.h> with <winsock2.h> +
  <ws2tcpip.h> since IPv6 is no longer optional (was it ever?)

- Fixes for building with MSVC-6/7. Added inet*.c.
  Replace <winsock.h> with <winsock2.h> + <ws2tcpip.h>
  (ala libcurl since IPv6 is not optional now).

- Fixes for building ahost with MSVC-6/7. Added inet*.c.

Daniel Stenberg (8 Nov 2005)
- Removed the use of AI_CANONNAME in the IPv6-enabled resolver functions since
  we really have no use for reverse lookups of the address.
  
  I truly hope these are the last reverse lookups we had lingering in the
  code!

- SSPI-fix and a new mirror

- Dmitry Bartsevich discovered some issues in compatibilty of SSPI-enabled
  version of libcurl with different Windows versions. Current version of
  libcurl imports SSPI functions from secur32.dll. However, under Windows NT
  4.0 these functions are located in security.dll, under Windows 9x - in
  secur32.dll and Windows 2000 and XP contains both these DLLs (security.dll
  just forwards calls to secur32.dll).
  
  Dmitry's patch loads proper library dynamically depending on Windows
  version. Function InitSecurityInterface() is used to obtain pointers to all
  of SSPI function in one structure.
  : ----------------------------------------------------------------------

- 27. "libcurl built with GNUTLS ignores the SSLCERT option" - Unlike
    Curl_ossl_connect(), the Curl_gtls_connect() function does not send the user
    certificate to the peer. In fact, it ignores the conn->data->set.cert field
    completely, it always uses the anonymous credentials. See
    http://curl.haxx.se/bug/view.cgi?id=1348930

- mention the need for a "fake" -u when --negotiate is used

- CurlPas 2005-11-05 was released: http://curlpas.sf.net/

- oops

- Added:
  
   1.9 Where do I buy commercial support for curl?
   1.10 How many are using curl?
   6.7 What are my obligations when using libcurl in my commerical apps?
  
  Edited a few other paragraphs slightly.

Gisle Vanem (1 Nov 2005)
- Use an empty '*mod_name'.

Daniel Stenberg (31 Oct 2005)
- Vilmos Nebehaj improved libcurl's LDAP abilities:
  
  The LDAP code in libcurl can't handle LDAP servers of LDAPv3 nor binary
  attributes in LDAP objects. So, I made a quick patch to address these
  problems.
  
  The solution is simple: if we connect to an LDAP server, first try LDAPv3
  (which is the preferred protocol as of now) and then fall back to LDAPv2.
  In case of binary attributes, we first convert them to base64, just like the
  openldap client does. It uses ldap_get_values_len() instead of
  ldap_get_values() to be able to retrieve binary attributes correctly. I
  defined the necessary LDAP macros in lib/ldap.c to be able to compile
  libcurl without the presence of libldap

- kill trailing whitespace

- test 275 makes a CONNECT through a proxy and then gets two pages from the
  same server

- --max-redirs 0

- re-arranged the win32 section and added a pointer to the INSTALL.devcpp
  document

- Tom Kyer's DevCpp-Mingw Install & Compilation guide

- mention brokenness

- elaborated somewhat in the license chapter

- Nis Jorgensen filed bug report #1338648
  (http://curl.haxx.se/bug/view.cgi?id=1338648) which really is more of a
  feature request, but anyway. It pointed out that --max-redirs did not allow
  it to be set to 0, which then would return an error code on the first
  Location: found. Based on Nis' patch, now libcurl supports CURLOPT_MAXREDIRS
  set to 0, or -1 for infinity. Added test case 274 to verify.

- tommink[at]post.pl reported in bug report #1337723
  (http://curl.haxx.se/bug/view.cgi?id=1337723) that curl could not upload
  binary data from stdin on Windows if the data contained control-Z (hex 1a)
  since that is treated as end-of-file when read in text mode. Gisle Vanem
  pointed out the fix, and I made both -T and --data-binary take advantage of
  it.

- updates to reflect current status in Debian land, and added some known
  differences between OpenSSL and GnuTLS (that is probably a suitable subject
  for a separate document...)

Gisle Vanem (27 Oct 2005)
- Removed dependency on zlib.h. Added dependency for
  ..\lib\timeval.c.

- Added option '-zc' puts const data in code-segment.
  Added CURL_DISABLE_TFTP; tftp.c doesn't compile as-is.

Daniel Stenberg (27 Oct 2005)
- Jaz Fresh pointed out that if you used "-r [number]" as was wrongly described
  in the man page, curl would send an invalid HTTP Range: header. The correct
  way would be to use "-r [number]-" or even "-r -[number]". Starting now,
  curl will warn if this is discovered, and automatically append a dash to the
  range before passing it to libcurl.

- multi IP socket description leak with multi interface

- added new dutch mirror and removed the "--" separators

- close the existing socket when trying next IP, as otherwise we leak one!
  bug #1326306

-   Dima Barsky reported a problem with GnuTLS-enabled libcurl in bug report
    #1334338 (http://curl.haxx.se/bug/view.cgi?id=1334338). When reading an SSL
    stream from a server and the server requests a "rehandshake", the current
    code simply returns this as an error. I have no good way to test this, but
    I've added a crude attempt of dealing with this situation slightly better -
    it makes a blocking handshake if this happens. Done like this because fixing
    this the "proper" way (that would handshake asynchronously) will require
    quite some work and I really need a good way to test this to do such a
    change.

- "Ofer" reported a problem when libcurl re-used a connection and failed to do
  it, it could then accidentally actually crash. Presumably, this concerns FTP
  connections.  http://curl.haxx.se/bug/view.cgi?id=1330310

- Temprimus improved the MSVC makefile so that the static debug SSL libs are
  linked to the executable and not to the libcurld.lib
  http://curl.haxx.se/bug/view.cgi?id=1326676

- Bradford Bruce made the windows resolver code properly return
  CURLE_COULDNT_RESOLVE_PROXY and CURLE_COULDNT_RESOLVE_HOST on resolving
  errors (as documented).

- shorted and unified language in the --help output

- 2 gone, 2 added, 1 moved, 1 changed name

- Dave Dribin made libcurl understand and handle cases when the server
  (wrongly) sends *two* WWW-Authenticate headers for Digest. While this should
  never happen in a sane world, libcurl previously got into an infinite loop
  when this occurred. Dave added test 273 to verify this.

- 2 mirrors, 1 binding release

- Added a dump_addrinfo() function to ease debugging of resolved names. Define
  DEBUG_ADDRINFO to enable.

- Temprimus improved the MSVC makefile: "makes a build option available so if
  you set rtlibcfg=static for the make, then it would build with /MT. The
  default behaviour is /MD (the original)."
  http://curl.haxx.se/bug/view.cgi?id=1326665

Dan Fandrich (18 Oct 2005)
- Removed mention of TFTP now that it's implemented.

Daniel Stenberg (18 Oct 2005)
- Mohun Biswas' suggested change to prevent GNU indent to warn on the =-1 line.

- Reverted the LIBCURL_VERSION_NUM change from October 6. As Dave Dribin
  reported, the define is used by the configure script and is assumed to use
  the 0xYYXXZZ format. This made "curl-config --vernum" fail in the 7.15.0
  release version.

- Reported by 'TemPRImus' in bug 1326665: use the "Multi-Threaded" options even
  when building the static library. http://curl.haxx.se/bug/view.cgi?id=1326665

- Slight editing of wording in the CURLOPT_SSL_VERIFYHOST section.

- start working on 7.15.1

- added names from the 7.15.0 release

Version 7.15.0 (13 Oct 2005)

Daniel Stenberg (13 Oct 2005)
- 7.15.0 time

- Make sure that the user and domain strings fit in the target buffer before we
  copy them there.

- NTLM requires windows or OpenSSL. If you build with GnuTLS for example you
  do not get NTLM support enabled.

- 7.15.0 in november?

- make it compile warning-free and free() the memory before exit

- pass a NULL pointer in the service argument (the second) if the port number
  was 0 as it seems at least some AIX versions don't like a "0" string there

Gisle Vanem (6 Oct 2005)
- Added tftp.obj.

Daniel Stenberg (6 Oct 2005)
- we all the next version 7.15.0 due to the new TFTP support

- remove getinfo-times from the dist archive since the info is now in the
  curl_easy_getinfo man page

- end the .nf section, mark the option names properly so that they end up
  as links in the html version

- Added the info from getinfo-times as it really belongs in this man page.

- mention the recent fixes

- added test case 272 for -z download over FTP when the timestamp is identical
  to the remote one

- CURL_TIMECOND_IFMODSINCE actually requires that the remote document has been
  modded since the given time, so we should compare <= and not just <.

- Domenico Andreoli's patch that removes a few 0xa0(!) bytes

- Michael Wallner reported that the date parser had wrong offset stored for
  the MEST and CEST time zones.

- Domenico Andreoli's SEE ALSO patch

- Ok, based on the online docs for AIX'es getservbyport_r() I adjusted to code
  to do (what I believe is) "right". See docs on:
  http://publib.boulder.ibm.com/infocenter/pseries/index.jsp?topic=/com.ibm.aix.doc/libs/commtrf2/getservbyport_r.htm

- recent action

Gisle Vanem (2 Oct 2005)
- Avoid gcc warning "dereferencing type-punned pointer
  will break strict-aliasing rules".

- Fix for building with MS Visual-C and single-threaded
  runtime libs.

Daniel Stenberg (30 Sep 2005)
- fixed the proper path to the tftpd server

- a new mirror, but we don't increase the amount since one of the former ones
  are now officially no longer considered a mirror... ;-)

- Update in the "which license is best" section as it seems Debian people have
  made up their mind. Spell-checked as well.

- Starting now, the verbose text that goes like "About to connect() to" will
  now contain the word "proxy" is the hostname is in fact a proxy. This will
  help users detect situations when they mistakenly use a proxy.

- David Yan brought the Content-Range report

- An anonymous submitter filed bug #1299181
  (http://curl.haxx.se/bug/view.cgi?id=1299181) that identified a silly problem
  with Content-Range: headers with the 'bytes' keyword written in a different
  case than all lowercase! It would cause a segfault!

- TJ Saunders of the proftpd project identified and pointed out problems with
  the modified FTPS negotiation change of August 19 2005. Thus, we revert the
  change back to pre-7.14.1 status.

- clarify what the default read callback does and how it uses the READDATA
  option

- three debian bug reports addressed

- stricter type usage for time variables to avoid picky compiler warnings

- 1 - attempted fix of uninitialized variable
  2 - indented and edited to fit better within 80 columns
  3 - fixed possible buffer overflow in the service name lookup function

- simplified the sin6_scope_id test and removed some left-overs from the previous
  way of detecting it

- fixed the check for the addrinfo struct

- clarified ERRORBUFFER - some errors just don't write a string even though
  they should. And I removed all uses 'Note' (as they are pretty useless) and
  did some other language and phrasing cleanups.

- return an error string for the missing URL case

- mention what WRITEFUNCTION and WRITEDATA do by default

- oops, broken sentence fixed:
  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=329305

- Uses __stdcall instead of SEC_ENTRY since it seems (at least) mingw doesn't
  define SEC_ENTRY and thus fails unless this is done!

- Since newer ares versions should work with ipv6, I modified the error message
  to a warning message as a first step. We should persue to make curl use
  c-ares properly even when built with ipv6 support.

- typecasts added in an attempt to please the picky compilers

- added test 271

- test 271, the first ever TFTP test

- seems to work for test 271 on Linux now!

- Dmitry Bartsevich made the SSPI support work on Windows 9x as well

Dominick Meglio (18 Sep 2005)
- Added constants that will be used by ares_getaddrinfo. Made ares_getnameinfo use the reentrant getservbyport (getservbyport_r) if it isavailable to ensure it works properly in a threaded environment

Daniel Stenberg (16 Sep 2005)
- keep 'socktype' in the connectdata struct and make sure we use that for all
  protocol sockets even if the resolved address may say otherwise

- recent changes

- renamed sendfile() since some systems have a system call named like this -
  now the functions are named sendtftp() and recvtftp() instead.

- In the Solaris 7 header files for tftp, the th_stuff struct member is an
  unsigned short. Trying a typecast here to fix.

- prevent warnings on re-defining MIN

- added URLs to bug reports

- Added known bugs #26, started using my new "bounce URL" that jumps to the
  correct (and overly complicated) sourceforge bug tracker URL given the bug
  report ID number.

- use int "subscripts" to prevent warnings from picky compilers

- use internal *printf() clones

- ifdef for includes, added checking for two not previously checked files (one
  being necessary for solaris builds)

- use make -k when running the tests

- ignore this too

- build tftpd too!

- First version of the TFTP server. Basic functionality is there.

- added TFTP and TFTP-ipv6 support

- moved test2file() to util.c

- minor changes, the biggest one being using Curl_select()

- mention the configure change

- oops, return error if an error did occur!

- CURLOPT_BUFFERSIZE clarification

- Use the AC_CHECK_MEMBER() function for check struct members instead of
  inventing and providing our own. Hopefully this solves a HP-UX 11.00 problem.

- --max-time should work just as good on win32 these days

- mention the protocol-guessing when no protocol part is given in the URL
  added TFTP to the list of supported protocols

- added tftp.c

- Ben Madsen reported a problem that only seemed to occur with certain specific
  glibc versions, and with this patch applied it no longer shows up to me. The
  problem was indeed a flaw that made curl use a file handle already closed.

- Thanks to Scott Davis' detailed reports, I found this premature detection
  of the end of a chunked-encoded POST request.

Gisle Vanem (6 Sep 2005)
- Fix warning about missing initializers.

- Fix for bind() on Winsock; AF_UNSPEC (0) is illegal.
  Should we do this for all targets?

Daniel Stenberg (6 Sep 2005)
- Now curl warns if an unknown variable is used in the -w/--writeout argument.

- binding updates

- sockets are curl_socket_t to build cleaner

- Use SOCK_DGRAM for TFTP. Consider setting this up at one central place, we
  have this check done on far too many places by now...

Gunter Knauf (6 Sep 2005)
- minor Makefile fixes.

Daniel Stenberg (5 Sep 2005)
- Added the people from the 7.14.1 release announcement.

- new release, work has been "initiated"

- mention the recent improvements

- don't start lines with apostrophes!

- check that bind() returns success

- --protocols now supports TFTP

- 7.14.2 actually

- Added FTP_SKIP_PASV_IP and --ftp-skip-pasv-ip

- John Kelly added TFTP support to libcurl. A bunch of new error codes was
  added. TODO: add them to docs. add TFTP server to test suite. add TFTP to
  list of protocols whereever those are mentioned.

- explain why the ABI depends on the SSL libs

- use -c to automake to copy the new files

- work on 7.14.2 starts now

Version 7.14.1 (1 Sep 2005)

Daniel Stenberg (1 Sep 2005)
- 7.14.1 coming right up

- softened my opinions, added API benefit - Thanks to Eric Cooper

- clarify that the ctxfunc is called on all new connects

- added DISTRO-DILEMMA

- added the URL

- new

- oops, the GNU GSS patch could clobber the CPPFLAGS variable and it thus
  broke krb4 builds!

- ocurl release

- use it as 'struct addrinfo' so perhaps it builds on mingw again

Gunter Knauf (30 Aug 2005)
- quick hack to make it working again on Win32 - however we should consider to set some defaults depending on the compiler architecture we guess we are since it doesnt work well if we prefer building the msvc makefile with gmake instead of nmake because we found gmake first in path....

Daniel Stenberg (29 Aug 2005)
- Kevin Lussier pointed out a problem with curllib.dsp

- Use the more correct BUILDING_LIBCURL define instead of CURLLIB_EXPORTS.
  Kevin Lussier pointed this out!

- spell-fix

- Igor Polyakov fixed a rather nasty problem with the threaded name resolver
  for Windows, that could lead to an Access Violation when the multi interface
  was used due to an issue with how the resolver thread was and was not
  terminated.

- Added GNU GSS and separate sections for MIT GSS and Heimdal and added info
  about what each single lib may be used for.

- Simon Josefson brought GNU GSS support

- 1.3.0 coming just up

- Moved the GnuTLS related TODO items from lib/TODO.gnutls to the proper
  docs/TODO

- 4.14 Redirects work in browser but not with curl!

- ok, the right term (using RFC2616 lingo) for the -X keyword is method and not
  request

- "Added in 7.14.1" notes and some minor edits

- CURLINFO_COOKIELIST is added in 7.14.1

- Theo Borm's example, as was posted here:
  http://curl.haxx.se/mail/lib-2005-08/0163.html

- Toby Peterson added CURLOPT_IGNORE_CONTENT_LENGTH to the library, accessible
  from the command line tool with --ignore-content-length. This will make it
  easier to download files from Apache 1.x (and similar) servers that are
  still having problems serving files larger than 2 or 4 GB. When this option
  is enabled, curl will simply have to wait for the server to close the
  connection to signal end of transfer. I wrote test case 269 that runs a
  simple test that this works.

- valgrind version 3 renames the --logfile command line option to --log-file...

- fixed #26, GnuTLS CA cert verification

- Fixed CA cert verification using GnuTLS with the default bundle, which
  previously failed due to GnuTLS not allowing x509 v1 CA certs by default.

- known bug #26, pretty fatal for anyone who wants to use proper SSL and GnuTLS

Gunter Knauf (22 Aug 2005)
- enabled statically linked builds.

Daniel Stenberg (21 Aug 2005)
- well hit me, that wasn't possible, use 1:0:0 anyway...

- modified the version-info, we only added functions

- increase version info

- avoid adding a blank dir to the LD_LIBRARY_PATH when OpenSSL is found in a
  default dir

- Alfredo Tupone provided a fix for the Windows code in get_iphlpapi_dns_info()
  when getting the DNS server etc.

- Using CURLOPT_COOKIEFILE serveral times add more files to read from.

- removed the unreachable code warning from gcc debug builds, even the most
  recent gcc versions give far too many false positives for this to be valuable

- Norbert Novotny had problems with FTPS and he helped me work out a patch
  that made curl run fine in his end. The key was to make sure we do the
  SSL/TLS negotiation immediately after the TCP connect is done and not after
  a few other commands have been sent like we did previously. I don't consider
  this change necessary to obey the standards, I think this server is pickier
  than what the specs allow it to be, but I can't see how this modified
  libcurl code can add any problems to those who are interpreting the
  standards more liberally.

- one german mirror has died while another one was added, and yet another Texas
  one!

- Added new contributors from RELEASE-NOTES. The somewhat different sort order
  is due to now using emacs to sort but I'm not in a mood to fix it better just
  now.

- removed some inaccurate comments about the TYPE_IN_ADDR_T check

- The big POST to HTTPS is probably not a bug.
  
  The CONNECT problem is now bug #25 planned to get fixed in next release.

Gunter Knauf (18 Aug 2005)
- minor Makefile fixes.

- updated NetWare section.

Daniel Stenberg (18 Aug 2005)
- detabified

- detabify

- Harshal Pradhan's use-after-free bug with ares is now known bug #24 to be
  fixed after 7.14.1

- it isn't strictly necessary to use it after a perform

- removed issue 20 that was about valgrind complaints on other libs/parts, as
  we have a fancier valgrind error parser these days and it seems to work rather
  well

- the SOCKS situation

- removed old info about curl_getdate() just simply isn't true and hasn't been
  true since the getdate() parser code rewrite

- remove the typecast to long from time_t, since we now store it as curl_off_t

- handles expiry times in cookie files that go beyond 32 bits in size

- - Jeff Pohlmeyer found out that if you ask libcurl to load a cookiefile (with
    CURLOPT_COOKIEFILE), add a cookie (with CURLOPT_COOKIELIST), tell it to
    write the result to a given cookie jar and then never actually call
    curl_easy_perform() - the given file(s) to read was never read but the
    output file was written and thus it caused a "funny" result.
  
  - While doing some tests for the bug above, I noticed that Firefox generates
    large numbers (for the expire time) in the cookies.txt file and libcurl
    didn't treat them properly. Now it does.

Gunter Knauf (16 Aug 2005)
- added curl_mvsnprintf to the export list; I appened to the end cause of the numbering ...

- added curl_mvsnprintf to the export list.

Daniel Stenberg (16 Aug 2005)
- client side fixes

- typecase the isspace() argument to int

- recent changes

- Added more verbose "warning" messages to the curl client for cases where it
  fails to open/read files etc to help users diagnose why it doesn't do what
  you'd expect it to. Converted lots of old messages to use the new generic
  function I wrote for this purpose.

- James Bursa identified a libcurl HTTP bug and a good way to repeat it. If a
  site responds with bad HTTP response that doesn't contain any header at all,
  only a response body, and the write callback returns 0 to abort the
  transfer, it didn't have any real effect but the write callback would be
  called once more anyway.

- added test 268 that makes curl -d @nonexisting

- clarify

- o curl -d @filename when 'filename' was not possible to access no longer
    converts the request to a GET, but now instead makes it a POST of no data
  o The time condition illegal syntax warning is now inhibited if -s is used.

- -H needs no CRLF or similar added

- removed old debug left-over infof() call

- do a POST with NTLM and add two custom headers

- Added comment about strtoimax()

Gunter Knauf (11 Aug 2005)
- fix for NetWare crossbuilds to display the right config.h when build on Win32.

Daniel Stenberg (10 Aug 2005)
- the debug callback was called with CURLINFO_TEXT with the data size one
  too big

Gunter Knauf (10 Aug 2005)
- minor Makefile fix.

- minor Makefile fix.

- added some more NetWare targets.

- some minor Makefile fixes for SSL.

- make ares compile again for NetWare.

- make ares compile again for NetWare.

- fixed line endings so it works again with gnu make on Win32.

Daniel Stenberg (9 Aug 2005)
- Christopher R. Palmer fixed the offsets used for date parsings when the time
  zone name of a daylight savings time was used. For example, PDT vs PDS. This
  flaw was introduced with the new date parser (11 sep 2004 - 7.12.2).
  Fortunately, no web server or cookie string etc should be using such time
  zone names thus limiting the effect of this bug.

- mention two other bugs we should fix before release

- Jon Grubbs filed bug report #1249962 which identified a problem with NTLM on a
  HTTP proxy if an FTP URL was given. libcurl now properly switches to pure HTTP
  internally when an HTTP proxy is used, even for FTP URLs. The problem would
  also occur with other multi-pass auth methods.

- When curl is built with GnuTLS, curl-config didn't include "SSL" when
  --features was used

- Don't prevent FTPS:// through a http proxy, as we cannot know if it works or
  not!

- mention our security related mail alias in the "who do I mail" section

- Support realloc() on a NULL pointer properly (printf(%p) on a NULL pointer
  outputs (nil) and not a 0x0 or similar.

- killed trailing whitespace, narrowed a few lines to 80 cols

- mention that the NOBODY reset thing is added in 7.14.1

- Moved items from TODO-RELEASE to TODO since they're not really bound to happen
  in any specific release.

- clarified the PHP/CURL topic a bit more

- correction and added new mirror

- CURLOPT_COOKIELIST change since it no longer modifies the input string contents

- reset the numcookies counter too (I missed it in the previous commit)

- fixed example since this is how the interface works now

- now strdups the cookielist inpointer before passed on, as the cookie function
  modifies it

- curl standard indent/format

Gisle Vanem (28 Jul 2005)
- Needs 'struct_stat'. Increased verbosity.

Daniel Stenberg (27 Jul 2005)
- If any of the options CURLOPT_HTTPGET, CURLOPT_POST and CURLOPT_HTTPPOST is
  set to 1, CURLOPT_NOBODY will now automatically be set to 0.

- Peteris Krumins added CURLOPT_COOKIELIST and CURLINFO_COOKIELIST, which is a
  simple interface to extracting and setting cookies in libcurl's internal
  "cookie jar". See the new cookie_interface.c example code.

- disabling HTTP should also nullify this function call

Dan Fandrich (27 Jul 2005)
- Fixed --without-gnutls

- Fixed some typos in output messages.

- Properly support the options --without-spnego --without-gssapi --without-krb4

- Add -Wdeclaration-after-statement to gcc to detect accidental C99-style
  variable declarations.

Daniel Stenberg (17 Jul 2005)
- Simplified the code within curl_easy_perform() that calls Curl_perform().
  Pointed out by Bjorn Reese.

- cURLpp 0.5.1

- Diego Casorran patches to make (lib)curl build fine on Amiga again

- better description for HEADERFUNCTION

- elaborate a bit on how to deal with chunked-encoded trailers that now are
  passed to the app using the header callback

- converted this back to one name per line to make it easier/better to diff
  and merge when new names are added

- mention the Rexx/CURL release

- Adrian Schuur added trailer support in the chunked encoding stream. The
  trailer is then sent to the normal header callback/stream.

- mention an old idea

- mention the exception only once ;-)

- correction for the 407 with response-body case

Gisle Vanem (5 Jul 2005)
- Update copyright.

Daniel Stenberg (5 Jul 2005)
- Gisle Vanem came up with a nice little work-around for bug #1230118. It
  seems the Windows (MSVC) libc time functions may return data one hour off if
  TZ is not set and automatic DST adjustment is enabled. This made
  curl_getdate() return wrong value, and it also concerned internal cookie
  expirations etc.

- mention the strerror_r detection fix in configure

- Andrew Bushnell provided enough info for me to tell that we badly needed to
  fix the CONNECT authentication code with multi-pass auth methods (such as
  NTLM) as it didn't previously properly ignore response-bodies - in fact it
  stopped reading after all response headers had been received. This could
  lead to libcurl sending the next request and reading the body from the first
  request as response to the second request. (I also renamed the function,
  which wasn't strictly necessary but...)
  
  The best fix would to once and for all make the CONNECT code use the
  ordinary request sending/receiving code, treating it as any ordinary request
  instead of the special-purpose function we have now. It should make it
  better for multi-interface too. And possibly lead to less code...
  
  Added test case 265 for this. It doesn't work as a _really_ good test case
  since the test proxy is too stupid, but the test case helps when running the
  debugger to verify.

- add more info when this script gets confused, and added getaddrinfo and
  freeaddrinfo to the trace output

- use %p to printf pointers since %x doesn't work properly on tru64 for this
  (and besides, we should be using the same %-code for all pointers)

- enable memory debugging on tru64 with ipv6 support by doing a little different
  defining, since the system headers themselves redefine getaddrinfo

Dan Fandrich (30 Jun 2005)
- Detect (or at least infer) glibc-style strerror_r even when cross-compiling.

Daniel Stenberg (28 Jun 2005)
- new Lua binding

- clarify that ftp ascii transfers don't do right in current libcurl

- added docs about the new proxy string support

- David Shaw fixes

- mention more ARMs

- verify that the URL decoding is done properly too

- David Shaw's fix that unifies proxy string treatment so that a proxy given
  with CURLOPT_PROXY can use a http:// prefix and user + password. The user
  and password fields are now also URL decoded properly.
  
  Test case 264 added to verify.

- David Shaw's updated version:
  
  It now properly handles code that uses curl_free() (since not all versions of
  curl have it), and also fixes a few problems when detecting libcurl on MinGW,
  and a linker problem on OSX Panther.

- mistake

- possible windows memory leak fixed by Gisle

Dominick Meglio (19 Jun 2005)
- Added some checks for the addrinfo structure.

Gisle Vanem (14 Jun 2005)
- Ensure thread handle is closed too.

Daniel Stenberg (13 Jun 2005)
- 4.13 Why is curl -R on Windows one hour off?

- recent buildconf fiddling

- run libtoolize in the ares dir as well, and modified the output slightly for
  all tools run in the ares dir - now shown like "running ares/[tool]"

- CURLINFO_FILETIME returns the time for GMT

- make sure the found tool is a regular file (and not a dir or something)

- Modified to use 'head -n 1' instead of 'head -1' since some versions of head
  complains and claims this is deprecated.

- Reverted Tupone Alfredo's patch, as it broke NUMEROUS autobuilds. Let's do the
  changes in a slower and more controlled manner...

- Tupone Alfredo's fixes:
  
  1) findtool does look per tool in PATH and think ./perl is the perl
  executable, while is just a local directory (I have . in the PATH)
  
  2) I got several warning for head -1 deprecated in favour of head -n 1
  
  3) ares directory is missing some file (missing is missing :-) ) because
  automake and friends is not run.
  
  (Let's hope number 2 doesn't break somewhere "out there", if so we can always
  search/replace that back.)

- first rough version

- Andres Garcia's text mode fix for the 'data' part

- FIONBIO is in sys/ioctl.h on AIX

- sigh, define TRUE if not already

- William Ahern:
  
    Make UDP sockets non-blocking. I've confirmed that at least on Linux 2.4 a
    read event can come back from poll() on a valid SOCK_DGRAM socket but
    recv(2) will still block. This patch doesn't ignore EAGAIN in
    read_udp_packets(), though maybe it should. (This patch was edited by Daniel
    Stenberg and a new configure test was added (imported from curl's configure)
    to properly detect what non-blocking socket approach to use.)

- William Ahern:
  
    I'm not quite sure how this was happening, but I've been seeing PTR queries
    which seem to return empty responses. At least, they were empty when calling
    ares_expand_name() on the record. Here's a patch which guarantees to
    NUL-terminate the expanded name. The old behavior failed to NUL-terminate if
    len was 0, and this was causing strlen() to run past the end of the buffer
    after calling ares_expand_name() and getting ARES_SUCCESS as the return
    value. If q is not greater than *s then it's equal and *s is always
    allocated with at least one byte.

- specify the cares lib before the other libs, to make it build fine with mingw
  - inspired by Tupone Alfredo's bug report (and patch) #1212940

- Todd Kulesza reported a flaw in the proxy option, since a numerical IPv6
  address was not possible to use. It is now, but requires it written
  RFC2732-style, within brackets - which incidently is how you enter numerical
  IPv6 addresses in URLs. Test case 263 added to verify.

- added keywords

- recent changes

- Eric Cooper reported about a problem with HTTP servers that responds with
  binary zeroes within the headers. They confused libcurl to do wrong so the
  downloaded headers become incomplete. The fix is now verified with test case
  262.

- avoid the sensitive word as it looks bad in some people's eyes

- Andrs Garca fixed a warning appearing on windows

- provide the proper copyright texts for these

- set LD_LIBRARY_PATH properly even when the openssl lib dir is found using
  pkg-config

- silense a warning

- minor rephrase

- output the full usec when --trace-time is used

- no more time/re-start of sockfilt, no more redirect of stdin/stdout when
  talking to sockfilt

- added function for individual ftp slave kills

- modified output logging, fixed the ftpslave killing

- utilize the whole usec in the log and don't output to stderr if the logfile
  can't be opened

- nicer raw logging and put code into (nicer) functions

- don't restart sockfilt after only 5 seconds of inactivity

- recent action

- Andres Garcia's mode=text patch to make these do fine on Windows

- add test case 261, response code 226 to TYPE

- Now allow TYPE responses to be any 2xx code, and log if it isn't 200.

- removed leftover debug message ("moo moo")

- added keywords

- added -nobuildconf

- keywords added

- shorter name

- sum up

- Add support for text mode on stdout tests as well, and add the mode=text
  to the docs.

- include ctype.h for isdigit()

- additional fix for the malformed URL fix of yday

- removed duplicate

- three fixes since 7.14.0

- Bug report #1204435 identified a problem with malformed URLs like
  "http://somehost?data" as it added a slash too much in the request ("GET
  /?data/"...). Added test case 260 to verify.

- update

- adjusted the strerror_r test more, use _REENTRANT instead of _THREAD_SAFE
  when looking for the prototype

- The configure check for strerror_r() failed to detect the proper API at
  times, like on my HP-UX 10.20 tests. And then lib/strerror.c badly assumed
  the glibc version if the posix define wasn't set (since it _had_ found a
  strerror_r).

- #15 is now fixed

- clarified for GnuTLS

- several updates

- ignore resolve too

- use less code and prevent compiler warning

- removed the separate table with download links, and extended the curl site
  list with all current mirrors

- scan for gmake and make to prefer gmake on systems that have it

- Made test case 241 precheck that the given name resolves to an ipv6 address,
  or the test is skipped. Ideally, we should let this test case go over a few
  frequently used IPv6 localhost aliases...

- Moved more generic functions to util.[ch]
  Added resolve.c to simply resolve a given host name

- check if getsockname() returns failure before using the address it provides

- reduced typecasts, from two to one

Dominick Meglio (17 May 2005)
- More of the same

- More compiler warning cleanups

Daniel Stenberg (16 May 2005)
- bad formatting

Dominick Meglio (16 May 2005)
- Made ares_free_hostent man page refer to ares_parse_aaaa_reply

- Cleaned up some compile warnings

- Added ares_getnameinfo which mimics the getnameinfo API

Daniel Stenberg (16 May 2005)
- Modified the gmtime_r check to not check for it until the "check for a working
  one" is made, and only if that test runs ok we define it as present. Unless
  crosscompiling, since then we use the former AC_CHECK_FUNCS method.

- define GMTIME_R to 0 if not working

- attempt to detect a bad (as in HPUX 10.20 bad) gmtime_r function

- start working on 7.14.1

Version 7.14.0 (16 May 2005)

Daniel Stenberg (16 May 2005)
- Version 7.14.0

- return, not exit, on several places

Dominick Meglio (15 May 2005)
- Converted some macros to use NS_* so they work on non-IPv6 systems

- Forgot to ares_-ize inet_ntop

Daniel Stenberg (14 May 2005)
- fix warning about redefined symbol

- replaced the CRLF newlines with plain LF ones

Dominick Meglio (14 May 2005)
- Added an inet_ntop function from BIND for systems that do not have it

Gisle Vanem (14 May 2005)
- Updated generated dependencies.

- Some patches for (a stricter/smarter) gcc 4.0 and
  warnings like:
    'x' may be used uninitialized in this function.

- 'ssize_t' seems to be a gcc 4.x built-in.

- Change for systems with >1 ways of setting (non-)blocking
  mode. (djgpp/Watt-32 has 3 ways). Should rewrite this using
  "#elif ..", but maybe there is still broken cpp around?

Daniel Stenberg (13 May 2005)
- updated

- uses select() instead of poll() even on Mac OS X 10.4

- adjusted the configure to always skip the fine-poll() test on Mac OS X (darwin)

- remove blank lines

- CURLOPT_SSLVERSION clarified

- -z bad use warning and NTLM proxy auth in reconnect fix

- oops, found by bug reported in bug report #1200661

- spell

- typecast to fix warning on 64bit systems

- warn about bad -z syntax

- MatrixSSL and yaSSL are two free libs we _could_ support

- mention the select() error fix as well

- the new HTTP headers

- removed duplicate

- Modified the default HTTP headers used by libcurl:
  
  A) Normal non-proxy HTTP:
  
   - no more "Pragma: no-cache" (this only makes sense to proxies)
  
  B) Non-CONNECT HTTP request over proxy:
  
   - "Pragma: no-cache" is used (like before)
   - "Proxy-Connection: Keep-alive" (for older style 1.0-proxies)
  
  C) CONNECT HTTP request over proxy:
  
   - "Host: [name]:[port]"
   - "Proxy-Connection: Keep-alive"

- prevent NS_IN6ADDRSZ from getting set to zero if the struct doesn't exist

- Hm, this doesn't feel right. The error bits returned from Curl_select() can
  be returned at times when we want to ignore them. Test case 160 fails on Linux,
  so I modify the comparison to check for _only_ the error bit set...

- me stupid, errno is not set for mere select()-exceptions

- include protos to fix warnings

- If Curl_select() returns with the error bit set, bail out.

- prevent 64bit warnings

- allow the ares/config.h display to fail

- Jeremy Brown's OpenSSL thread-locking example

- new counter

- Jamie Lokier added. And I now recounted the amount better: 437 named as of now.

- update the "PORTS" section a little

- add multi-thread details for GnuTLS

- new mirror, added amount of contributors

- Jeff is short for Jeffrey

- updated with the current RELEASE-NOTES names

- I decided to make this list more complete. I took the 5-year anniversary list
  from 2003 and added all names from all release notes in the CVS (there is a
  slight gap though). I removed names with only first names (Like "Chris" and
  "Ralph") , as that won't make anyone happy and we might list their full names
  as well anyway.
  
  This list is now intended to include _all_ people that contribute: big or
  small. 389 names at the time of this commit.

- no need to display src/config.h anymore since it is a duplicate of lib/config.h
  but we could use having a look at ares/config.h when that is used

- silence compiler warnings

- fix warnings about unused variables for non-debug builds

- fix

- January 2003. Started working on the distributed curl tests. The autobuilds.

- DEBUGF() is a new conveniant macro to add infof() calls (or similar) for
  debug builds only. Made the ftp code use it on several places.

- Added an active disconnected state, to make the code clearer.

- removed unnecessary logging to ease REAL debuggin

- one more command line option, fixed the AIX 4.3 enabled IPv6 build (it now
  detects a bad Ipv6 situation and disables it automatically)

- Added two test cases for multipart formpost over a proxy with --anyauth. Our
  HTTP test server is a bit limited though, as it never responds to the POST
  request until all data has been sent (and received)...

- When a server is clearly running, curl is now invoked to verify that it can
  download a file from the server before the server is considered fine to use
  for the given test case. This should fix the cases where the server can run
  but curl cannot work with it.

- use calloc instead of malloc to save a call to memset()

- now add --trace-time by default for curl tests

- removed lots of (now) redundant logging

- modify a value we are allowed to

- improved logging (all FTP protocol data, both ways) to possibly help us realize
  why sometimes the control connection dies after a RETR has been sent

- towards 7.14.0 - really

- prevent memory leak when built SSL disabled

- *MAN* was this hard to track down. Had I just read the docs properly from the
  start... Anyway, fork() + exec() makes _two_ pids (in perl) that we need to
  track and kill after use. Thankyouverymuch.

- add more info to the log to ease debugging

- improved failf() error messages

- the new functions and the upcoming ipv6 calls for the next version to become
  1.3.0

- corrected copyright years

- corrected copyright year

- Sort of "fixed" KNOWN_BUGS #4: curl now builds IPv6 enabled on AIX 4.3. At
  least it should no longer cause a compiler error. However, it does not have
  AI_NUMERICHOST so we cannot getaddrinfo() any numerical addresses with it (we
  use that for FTP PORT/EPRT)! So, I modified the configure check that checks if
  the getaddrinfo() is working, to use AI_NUMERICHOST since then it'll fail on
  AIX 4.3 and it will automatically build with IPv6 support disabled.

- Now configure checks for struct sockaddr_storage and the ftp code tries
  to survive without it if not found. AIX 4.3 targetted adjustment.

- another <case> converted to sysread

- read from the open2 filehandle with sysread, not <handle>

- Fixed the FTP server read stuff when waiting for a connect after a PASV/EPSV.
  
  Made the ftp server use the passed in pidfile name, and made runtests.pl
  pass it in properly.

- fix the server for the slow response case

- Added --trace-time that when used adds a time stamp to each trace line that
  --trace, --trace-ascii and --verbose output. I also made the '>' display
  separate each line on the linefeed so that HTTP requests etc look nicer in the
  -v output.

- When starting the ftp server, wait a few seconds to make really sure that
  a pidfile for the server appears as otherwise it failed.

- Make sure there's no pidfile if we cannot start the initial sockfilt tool -
  this happens for some ipv6-enabled hosts on which sockfilt cannot listen
  on ipv6.

- two bugfixes, one change and one test script modification

- two bugs, one change

- blank a few more environment variables before running a test

- Made curl recognize the environment variables Lynx (and others?) support for
  pointing out the CA cert path/file: SSL_CERT_DIR and SSL_CERT_FILE. If
  CURL_CA_BUNDLE is not set, they are checked afterwards.

- Bryan Henderson's fine update of SSL_VERIFYPEER and SSL_VERIFYHOST

- prevent two compiler warnings on comparisons between signed and unsigned

- fixed to use fork()+exec() to start test servers

- always use the libcurl-provided *printf() functions

- util.h added as "source" to make it get added in dist archives

- logfile name is const

- Moved common code to util.[ch] instead of having it duplicated in sws.c
  and sockfilt.c. For good-to-have functions for the servers written in C.

- there cannot be chunked problem when no_body (HEAD) is true since without
  body there is nothing chunked-encoded!

- singleipconnect() returns a socket descriptor, not a CURLcode (but perhaps
  we should make it do that...)

- more fixes

- Updated with (new and old) default config file search path explanation.

- Set mode text on the section that is written by curl in text mode, to allow
  the runtests.pl to check this differently on operating systems that
  differentiate on this.

- basic signal handler for sigint and sigkill

- fixed the attribute parser to better handle multiple ones, with or without
  quotes around the contents

- moved two functions to ftp.pm, made some more changes on stopping servers
  and fixed the textmode attribute thing for windows a bit

- moved in functions from runtests.pl to enable the ftpserver to use the
  killslaves function

- AF_INET6 for ipv6 addresses!

- no, the kill servers messages need to be verbose, they're too frequent

- display killed pids to make it easier to see for autobuilds etc

- historic thing we will not use

- removed ftpsserver.pl

- When staring a HTTP server, use the pidfile preferably since it turns out
  sometimes the server can start but curl cannot speak to it, and then we must
  remember the server (in order to kill it properly) anyway.
  
  Also, make sure to kill all servers on exit everywhere.

- ignore more generated files

- remove unused ftps-server code and fixed two warnings

- if diff -u makes zero output, try diff -c instead

- kill slave processes when they fail

- 1. no longer ask the server for the HTTPS pid, as it returns the HTTP pid
  (problem identified by Dan F)
  2. initial text mode fix for file checks, to allow better text file testing
  on windows (with regard to line endings)
  3. fixed to use the proper ftpserver pidfile to find pid

- Paul Moore made curl check for the .curlrc file (_curlrc on windows) on two
  more places. First, CURL_HOME is a new environment variable that is used
  instead of HOME if it is set, to point out where the default config file
  lives. If there's no config file in the dir pointed out by one of the
  environment variables, the Windows version will instead check the same
  directory the executable curl is located in.

- listen(..., 1) as 0 doesn't work on Tru64!

- display listening port in log

- show what error codes we test for too, and show 10 test case numbers

- keyword update

- detect SSL library properly and display it on startup

- fixing

- Cory Nelson's work on nuking compiler warnings when building on x64 with
  VS2005.

- Since Windows doesn't have/use the POSIX prototype for send() and recv(), we
  typecast the third argument in the macros to avoid compiler warnings.

- adding a bunch of comments for each #endif

- Fred New reported a bug where we used Basic auth and user name and password in
  .netrc, and when following a Location: the subsequent requests didn't properly
  use the auth as found in the netrc file. Added test case 257 to verify my fix.

- be specific about what max_fd contains after a call

- Based on feedback from Cory Nelson, I added some preprocessor magic in
  */setup.h and */config-win32.h to build fine with VS2005 on x64.

- 2 days, 4 fixes

- Alex Suykov's ftp upload show progress meter patch, slightly adjusted.

Gunter Knauf (23 Apr 2005)
- fix for recent changes.

Daniel Stenberg (22 Apr 2005)
- show up to 5 (random) test cases using the keyword

- keywords added

- Dave Dribin: set CURL_STATICLIB when it builds static library variants.

- Andres Garcia's fix for building static curl on windows.

- Fixed the CN extraction

- update the copyright year

- modified this year

- ignore the memdump file when showing files after a failure

- copyright this year

- Fixed for Mac OS X builds based on excellent feedback from Heinz Stockinger.

Gunter Knauf (22 Apr 2005)
- changes for building with IPV6.

Daniel Stenberg (22 Apr 2005)
- modified the test case success reporting, added "test N out of Y" and
  "remaining: [time]" outputs to hint users about what to expect

- test 256 is like test 38 but with proxy + proxy auth

- keywords

- Set the retry delay variables after the option parsing, as bug report
  #1187787 points out.

- added missing headers

Gunter Knauf (20 Apr 2005)
- changes for building with IPV6 and LDAP.

Daniel Stenberg (19 Apr 2005)
- prevent compiler warning

- added typecast when converting from long to unsigned short, to prevent compiler warning

- indented source to look more like other ares code,
  added (somewhat ugly) typecasts to build warning-free on 64bit platforms (the
  result of a (char *) - (char *) cannot be stored in an int universally)

- sortlist_alloc() is never used on win32, so ifdef out it to prevent warning

- only define _REENTRANT if not already defined, and only in setup.h

- Check for and config for the ca cert bundle properly when built with GnuTLS.
  Previously this was only done for OpenSSL builds.

- when --with-gnutls is used, we assume a bin/libgnutls-config file in the
  given prefix. Building something with gnutls without it just is too error-
  prone.

- remove the warning for a lacking crypto lib since it migth just be a gnutls
  build...

- added CURLOPT_PORT test when using proxy

- two bugfixes of today

- Olivier reported that even though he used CURLOPT_PORT, libcurl clearly still
  used the default port. He was right. I fixed the problem and added the test
  cases 521, 522 and 523 to verify the fix.

- Toshiyuki Maezawa reported that when doing a POST with a read callback,
  libcurl didn't properly send an Expect: 100-continue header. It does now.

- digest works in the proxyauth too

- Initial curl_multi_socket() stuff, #ifdef'ed out for now but committed for
  documentational purposes.

- better fix for the socket -1 case

- ignore sockfilt

- safety measure to avoid using -1 as socket

- allow some more time

- ARGH my stupidity is endless. Ipv4-only hosts don't send EPRT or LPRT.

- Modified the FTP server to use the new 'sockfilt' program to do all the socket
  level stuff. The FTP server communicates with sockfilt using perl's open2().
  This enables easier IPv6 support and hopefully FTP-SSL support in the future.
  Added four test cases for FTP-ipv6.

- Modified to not mix ordinary print to STDOUT with a system() that prints to
  stdout, since I've found cases on Solaris where the second output mixes with
  the first and thus the big check-script doesn't properly find the first
  string in the output stream.

- somewhat clarified that this only sets the fd_sets and expects them to be
  cleared before this function is called

- keywords added

- minor edits, report the test cases without keywords

- starting to produce a summary in HTML

- avoid warning on windows

- clarify that > in the verbose output can contain newlines

- keywords added

- initial tool to report info/keywords of the test cases

- started adding "keywords" for each test, to better allow us to sum up what
  kind of tests we have and how many tests that test certain features

- add needed include

Dominick Meglio (15 Apr 2005)
- Attempted to fix c-ares not building on non-IPv6 systems

Daniel Stenberg (15 Apr 2005)
- if libgnutls-config isn't found in the given path, deal with it nicer (but
  it is still likely to not do very good since it can't figure out all the lib
  dependencies)

- Two new slowdown tests for better testing of the FTP response reader function
  when the response come in many small chunks.

- make the ftp server support reply/servercmd, and make SLOWDOWN work, and
  update the docs accordingly

- oops, only negative numbers are errors

Dan Fandrich (13 Apr 2005)
- Mention GnuTLS and fix a few spelling errors.

Daniel Stenberg (13 Apr 2005)
- don't bail out just because the ca file has a problem, it might be OK

- fix port number

- GnuTLS support

- extended the multi-thread explanation

- fix compiler warning

Dan Fandrich (13 Apr 2005)
- Allow environment variables to override default autotools.

Daniel Stenberg (12 Apr 2005)
- next release will be version 7.14.0 thanks to the added GnuTLS support

- Provides an unconditional strlcat() proto even if strlcat() was found by
  configure. An attempt to fix warnings when we build and the strlcat() function
  is provided by one if the libs (gss or krb4) since then we have no protos
  for it in a system header.

- requires OpenSSL, as our GnuTLS doesn't provide support for
  CURLOPT_SSL_CTX_FUNCTION (yet).

- support tests that requires 'OpenSSL' specificly

- credits

- refresh

- 5.12 Can I make libcurl fake or hide my real IP address?

- HTTP 304 response with Content-Length: header

Dominick Meglio (9 Apr 2005)
- Removed usage of u_int and u_char

Daniel Stenberg (9 Apr 2005)
- Blah, revert my removal of the extra check since the problem is there for real.
  
  Archived thread of the help-gnutls mailing list regarding this problem:
  
  http://lists.gnu.org/archive/html/help-gnutls/2005-04/msg00000.html
  
  (and I _am_ sorry for my confused behaviour on this problem.)

- OK, I must've been halucinating or something because I no longer see the
  bug I thought I saw before when I changed this...!

Dominick Meglio (9 Apr 2005)
- Made sortlist support IPv6 (this can probably use some testing)

- Made sortlist support CIDR matching for IPv4

- Added preliminary IPv6 support to ares_gethostbyname

Daniel Stenberg (8 Apr 2005)
- fixed the 304 response-with-content-length problem reported by Cory Nelson

Dominick Meglio (8 Apr 2005)
- Added include for inet_net_pton.h to ares__get_hostent.c

- Made ares_gethostbyaddr support IPv6 by specifying AF_INET6 as the family

Daniel Stenberg (8 Apr 2005)
- re-arrange some code to prevent warnings on unreachable code

- include sys/types.h too when checking for headers as otherwise this breaks
  on Solaris and FreeBSD. At least.

Marty Kuhrt (8 Apr 2005)
- updated instructions

- fixed control_y trap problem

- cast the call to Curl_inet_ntop for DECC compiler squawk

Daniel Stenberg (7 Apr 2005)
- Unfortunately, if a ca file name is set the function fails for whatever reason
  (missing file, bad file, etc), gnutls will no longer handshake properly but it
  just loops forever. Therefore, we must return error if we get an error when
  setting the CA cert file name. This is not the same behaviour as with OpenSSL.
  
  Question/report posted to the help-gnutls mailing list, April 8 2005.

- one down

- set LD_LIBRARY_PATH when GnuTLS has been found

- cut 'n paste error

- GnuTLS updates

- GnuTLS!

- added new files

- fixed to build after the GnuTLS fixes

- added some blurb about the GnuTLS license

- GnuTLS support added. There's now a "generic" SSL layer that we use all over
  internally, with code provided by sslgen.c. All SSL-layer-specific code is
  then written in ssluse.c (for OpenSSL) and gtls.c (for GnuTLS).
  
  As far as possible, internals should not need to know what SSL layer that is
  in use. Building with GnuTLS currently makes two test cases fail.
  
  TODO.gnutls contains a few known outstanding issues for the GnuTLS support.
  
  GnuTLS support is enabled with configure --with-gnutls

- ssl_version_num is not used anymore

- ssl_version_num won't be used anymore since we will soon offer multiple SSL
  layers and it won't make sense to provide a numerical version for it. I also
  doubt that many people have used this for anything critical.

- Add support for --with-gnutls. If configure detects OpenSSL, you need to
  to explicitly disable that first with --without-ssl. Initial attempt.

- bail out if perl is missing, it is needed for building curl anyway

- check for libtoolize and aclocal to doublecheck the installations better

- Try harder to see if arpa/nameser_compat.h REALLY is a good header file to
  include, as it seems at least some AIX versions don't really allow it to be
  include at the same time as the original nameser.h.

- add SSPI

- Tupone Alfredo fixed includes of arpa/nameser_compat.h to build fine on Mac OS
  X.

- better errno constant replacements, as mentioned by Gisle Vanem

Gisle Vanem (6 Apr 2005)
- Include inet_net_pton.h for 'struct in6_addr'. Ideally this
  should come from <ws2tcpip.h>, but Winsock 1.1 should
  suffice.

- Moved  inet_net_pton.h to HHEADERS.

Daniel Stenberg (6 Apr 2005)
- check for struct sizes and use those sizes if the NS_* defines are lacking
  (IRIX 6.5.22 it seems)

- moved the *_inet_pton protos to inet_net_pton.h instead

- made the ares_inet_net_pton() proto use size_t size, as the function in the
  code uses that

Dan Fandrich (6 Apr 2005)
- Removed extraneous comma

Daniel Stenberg (5 Apr 2005)
- too late hacking error

- test time-conditioned FTP uploads

- Christophe Legry's fix to grok time-conditoned uploads

- with these changes, it builds on my win32 cross-compiler

- check for another arpa header

- check for the arpa/* headers

Dominick Meglio (5 Apr 2005)
- Provided implementations of inet_net_pton and inet_pton from BIND for systems that do not include these functions. These will be necessary for CIDR support and IPv6 support.

Daniel Stenberg (5 Apr 2005)
- 7.13.3 in progress

- 5.11 How do I make libcurl not receive the whole HTTP response?

- two more actual FAQs

- restart with a blank page again

Version 7.13.2 (5 Apr 2005)

Daniel Stenberg (5 Apr 2005)
- the smell of release

- bug report #1156287, ftp upload from VMS

- win resolve crash, win makefile fix

- kill warnings

- Marcelo Juchem's improvements

Gisle Vanem (4 Apr 2005)
- hostthre.c: destroy_thread_data() made public. Called
  from url.c: Curl_disconnect().

Daniel Stenberg (4 Apr 2005)
- spell fixes, based on the Debian bug report #302820 submitted by "A Costa"

- fix of tonight

- Hardeep Singh reported a problem doing HTTP POST with Digest. (It was actually
  also affecting NTLM and Negotiate.) It turned out that if the server responded
  with 100 Continue before the initial 401 response, libcurl didn't take care of
  the response properly. Test case 245 and 246 added to verify this.

- Test 245 was just added in an attempt to repeat Hardeep Singh's recent bug.
  But this works just fine on my host. Plain HTTP POST using Digest.

- fixed bad comment, pointed out by Marcelo Juchem

- copyright this year

- Attempt to make this code more forgiving for systems that doesn't detect
  the failed connect "immediately".

- Updated the copyright year since changes have been this year.

- the cookie API is better and more likely to happen in a separate release

- fix configure's SSL-detection for msys/mingw (from Andres Garcia)

- format mistake in --form-string, pointed out by Owen Watson

- Better connection keep-alive when POSTing with HTTP Digest or Negotiate.

- Don't close the connection if we're in a known negotiation mode and we won't
  send any data anyway. Probably the bug Tom Moers noticed.

- proxy multi auth fix, --proxy-anyauth, ftp-ssl and ftp response reading fix

- postpone these

- When doing FTP-SSL, advance to the next state properly when the response to
  AUTH has been received successfully.

- Fixed the FTP response reader function to properly deal with responses split
  up in several chunks when read.

- Made the server send data to the control/data connections using two dedicated
  functions. This enabled me to add a function that automatically delays between
  each byte, to proper test curl's ability to read FTP server responses sent in
  many (small) chunks. See also upcoming libcurl fixes...

- Based on Augustus Saunders' comments and findings, the HTTP output auth
  function was fixed to use the proper proxy authentication when multiple ones
  were added as accepted. test 239 and test 243 were added to repeat the
  problems and verify the fixes.

- Added --proxy-anyauth

- modified some log outputs, added comment about auth required as used in
  test 154

- can you spell copy and paste error for me loud and clear? ;-P

- provide HTML and PDF versions of the man pages in the dist archive

- When cross-compiling, we do some better checking for the NI_WITHSCOPEID option instead of just assuming it is present.

Gisle Vanem (22 Mar 2005)
- CURL_EXTERN is already in <curl/curl.h>.

- Prevent redefinition warning with CURLDEBUG.

Daniel Stenberg (22 Mar 2005)
- moved out the changes from 2004 to CHANGES.2004

Dan Fandrich (22 Mar 2005)
- Fixed typo.

Daniel Stenberg (21 Mar 2005)
- the same fix here too, typecast to prevent win32 compiler warning

- typecase to fix win32 compiler warning (and intended as other code is)

- Modified the VALID_SOCK() macro to become VERIFY_SOCK() instead. It is slighly
  more involved, but should hopefully not generate any compiler warnings on
  win32 systems (that can't check the socket based on the numeric).

- Make NTLM tests depend on the NTLM feature at not SSL, since the NTLM support
  is no longer only present when built with SSL support.

- format mistake

- removed a (fairly useless) debug output just to compile without warning

- silence win32 compiler warnings

- attempt to fix the ares link breakage with --enable-debug in libcurl and here

- silence warnings on win32 about static functions that are never used

- some additional debug output

- fix compiler warning

Dan Fandrich (18 Mar 2005)
- Fixed spelling of --runtestopts

- Netware builds don't use configure.

Daniel Stenberg (18 Mar 2005)
- fix by Kyrre Kristiansen

- adjust to use plain 'make' even for cross-compiles if using configure-
  style build

- a Common Lisp binding

Dan Fandrich (17 Mar 2005)
- Change the bogus address used in test237 to be more reliable when run
  on a host with a buggy resolver that strips all but the bottom 8 bits of
  each octet.  The resolved address in this case (192.0.2.127) is guaranteed
  never to belong to a real host (see RFC3330).

- Use the proper macro to do uClibc detection.

Daniel Stenberg (17 Mar 2005)
- include inet_pton.h

- added descriptions

- update year

- don't set TEST_F to blank when --runtestopts isn't used, as that will override
  the default options set in the Makefile

- support multiple error codes for a test case since some things just vary
  between platforms

- add 'FTP ASCII transfers' here, since they seem to be frequently attempted
  these days...!

- add new option

- add new file

- its a start

- use Curl_inet_pton(), not inet_pton().

Dan Fandrich (17 Mar 2005)
- Added the --runtestsopts option to testcurl.pl to override the default
  options used by runtests.pl during testing (useful for disabling valgrind).

- Removed references to config-vms.h from the makefiles.

- Removed old VMS config files (on behalf of Marty Kuhrt). The VMS build
  scripts use the version in packages/vms/

Daniel Stenberg (16 Mar 2005)
- more

- check for the HTTPS server in a manner similar to how we check for the HTTP
  server

- - Tru64 and some IRIX boxes seem to not like test 237 as it is. Their
    inet_addr() functions seems to use &255 on all numericals in a ipv4 dotted
    address which makes a different failure... Now I've modified the ipv4
    resolve code to use inet_pton() instead in an attempt to make these systems
    better detect this as a bad IP address rather than creating a toally bogus
    address that is then passed on and used.

Dan Fandrich (16 Mar 2005)
- Fixed some compiler warnings I should have noticed before.

- Fixed ftp support with uClibc due to differing inet_ntoa_r() behaviour.

Daniel Stenberg (15 Mar 2005)
- test EPSV and PASV response handling when they get well-formated data back
  but using illegal values

- initial man page attempt for testcurl.pl

- new options to testcurl.pl, fixed curl-config and removed compiler warnings

- added missing features to curl-config

- nonsense change for(;;) => while(1) just to prevent gcc from warning on
  never executed code when -Wunreachable-code is used

- prevent compiler warning

- Added lots of new command line options, made confsuffix get set based on
  targetos only and not build os. Commented away the line that enables perl
  warnings.

Dan Fandrich (15 Mar 2005)
- Finally fixed the LDAP library searching bug on libtool ver. 1.5

- Make nonexistent host names absolute so tests will pass on machines
  with a wildcard DNS search domain.

- Use the libtool variables better to make LDAP library search work on
  more platforms.

Daniel Stenberg (14 Mar 2005)
- hushing up more warnings

- silence compiler warnings for mingw win32 builds --enable-debug

- show LDFLAGS too

- if ws2_32 is used, append the lib last in the LIBS list (too) to make it
  build and link fine with c-ares

Gisle Vanem (14 Mar 2005)
- Avoid "unused variable" warnings.

Daniel Stenberg (14 Mar 2005)
- configure --enable-sspi

- security.h is removed

- two issues fixed

- include security.h with lowercase s to work on cross-compiled mingw

- Removed security.h since it shadows an include file mingw needs when building
  for SSPI support. The contents of the file has been moved into the krb4.h file.

- Added --enable-sspi that now make libcurl build with SSPI support. This only
  works when built for win32.

Gisle Vanem (13 Mar 2005)
- Prevent gcc warning.

Daniel Stenberg (12 Mar 2005)
- found a common lisp binding

- --form-string

- David Houlder added --form-string

Gisle Vanem (12 Mar 2005)
- Swap <security.h> and <sspi.h> (needed for MingW).

Dan Fandrich (11 Mar 2005)
- Work around a bug in libtool ver. 1.5 during LDAP library detection.

Daniel Stenberg (11 Mar 2005)
- added CURL_VERSION_SSPI

- curl_version_info() returns the feature bit CURL_VERSION_SSPI

- fixed two leftover from Christopher's patch

- the ares_parse_aaaa_reply man page

- Check for winsock.h to work with win32. Only include system headers we know
  exist.

- Replace AC_TRY_RUN() with AC_EGREP_CPP() when checking for constants to
  work fine with cross-compiled builds.

- oops, once is enough! ;-)

- Define HAVE_AF_INET6_H for Netware too, as Guenter Knauf's builds indicate.

Dan Fandrich (11 Mar 2005)
- Added HAVE_AF_INET6 to Netware's config.h

- Fixed some compiler warnings.

- Added HAVE_STRUCT_IN6_ADDR to Netware's config.h

- Fixed LDAP library file name bug (KNOWN_BUGS #1).  configure now auto-detects
  the correct dynamic library names by default, and provides override switches
  --with-ldap-lib, --with-lber-lib and --without-lber-lib.  Added
  CURL_DISABLE_LDAP to platform-specific config files to disable LDAP
  support on those platforms that probably don't have dynamic OpenLDAP
  libraries available to avoid compile errors.

Daniel Stenberg (11 Mar 2005)
- Add an alert already here if 'make test' is attempted for a cross-compile
  since there's no use building the whole test suite first and _then_ tell it
  doesn't work anyway...

- no more rewriting of the setup file

- Dominick Meglio added ares_parse_aaaa_reply.c and did various adjustments. The
  first little steps towards IPv6 support!

- Christopher R. Palmer made it possible to build libcurl with the
  USE_WINDOWS_SSPI on Windows, and then libcurl will be built to use the native
  way to do NTLM. SSPI also allows libcurl to pass on the current user and its
  password in the request.

- configure, socks, debug, getdate

- As reported by 'nodak sodak' we should check for a NULL pointer before
  referencing the proxy name pointer.

Dan Fandrich (9 Mar 2005)
- Stopped linking to the SSL libs if a full installation isn't found.
  Removed a redundant library check.

Daniel Stenberg (9 Mar 2005)
- skip the test of "2094 Nov 6" for now, since the 64bit time_t systems return
  different values for it...

- remove old printf() debug leftover

- mktime() returns a time_t. time_t is often 32 bits, even on many architectures
  that feature 64 bit 'long'.
  
  Some systems have 64 bit time_t and deal with years beyond 2038. However, even
  some of the systems with 64 bit time_t returns -1 for dates beyond 03:14:07
  UTC, January 19, 2038. (Such as AIX 5100-06)

- days are english

- Dominick Meglio reported that using CURLOPT_FILETIME when transferring a FTP
  file got a Last-Modified: header written to the data stream, corrupting the
  actual data. This was because some conditions from the previous FTP code was
  not properly brought into the new FTP code. I fixed and I added test case 520
  to verify. (This bug was introduced in 7.13.1)

Dan Fandrich (8 Mar 2005)
- Fixed the --with-zlib configure option so that it always adds the specified
  path to the compiler flags.  Before, a zlib installation in the default
  path was always used in preference to the one in the desired location.

- fseek() with SEEK_SET is broken on large file capable 32-bit systems, so
  revert to the SEEK_END method of repositioning the stream after a ftruncate()
  and only use SEEK_SET if ftruncate() isn't available.

Daniel Stenberg (7 Mar 2005)
- test 236: FTP resume upload but denied access to remote file

- valgrind.pm fixed

- added valgrind.pm to the dist

Dan Fandrich (5 Mar 2005)
- Better cope with a failed or unavailable ftruncate().
  Added HAVE_FTRUNCATE to all the static config-*.h files on the assumption
  that all those systems provide it.

Daniel Stenberg (5 Mar 2005)
- Samuel Daz Garca's correction

- Added test case 235 that makes a resumed upload of a file that isn't present
  on the remote side. This then converts the operation to an ordinary STOR
  upload. This was requested/pointed out by Ignacio Vazquez-Abrams.
  
  It also proved (and I fixed) a bug in the newly rewritten ftp code (and
  present in the 7.13.1 release) when trying to resume an upload and the servers
  returns an error to the SIZE command. libcurl then loops and sends SIZE
  commands infinitely.

Dan Fandrich (4 Mar 2005)
- Reduced the length of data read from the random entropy file.

- Don't try to read the whole of the random file because when /dev/urandom is
  used, it slows initialization too much reading an infinitely long file!

Daniel Stenberg (4 Mar 2005)
- 7.13.2-CVS

- starting over

Version 7.13.1 (4 Mar 2005)

Daniel Stenberg (4 Mar 2005)
- stand clear for release time

- Dave Dribin made it possible to set CURLOPT_COOKIEFILE to "" to activate
  the cookie "engine" without having to provide an empty or non-existing file.

- killed trailing whitespace

- killed trailing whitespace

- Rene Rebe fixed a -# crash when more data than expected was retrieved.

- new VB binding

- VB binding, updated the .NET info

- mention buffer overflows fixed

- fix the distribution files

Dan Fandrich (28 Feb 2005)
- Fix for a base64 decode heap buffer overflow vulnerability.

- Fixed some compiler warnings.  Fixed a low incidence memory leak in the test server.

Daniel Stenberg (22 Feb 2005)
- Updated as suggested by Samuel Daz Garca

- krb4 fixed

- Curl_base64_decode() now returns an allocated buffer

- Thanks for the notification iDEFENCE. We are the "initial vendor" and we sure
  got no notification, no mail, no nothing.
  
  You didn't even bother to mail us when you went public with this. Cool.
  
  NTLM buffer overflow fix, as reported here:
  
  http://www.securityfocus.com/archive/1/391042

- added test case 234 which is like 233 but uses --location-trusted instead so
  thus the second request to the new host will use authentication fine

- Ralph Mitchell reported a flaw when you used a proxy with auth, and you
  requested data from a host and then followed a redirect to another
  host. libcurl then didn't use the proxy-auth properly in the second request,
  due to the host-only check for original host name wrongly being extended to
  the proxy auth as well. Added test case 233 to verify the flaw and that the
  fix removed the problem.

- socket leak, mingw build

- Based on Mike Dobbs' report, BUILDING_LIBCURL is now defined in here if it
  runs to build with mingw.

- close the socket properly when returning error due to failing localbind
  Bug report #1124588 by David

- mention filename= for the -F

- Christopher R. Palmer reported a problem with HTTP-POSTing using "anyauth"
  that picks NTLM. Thanks to David Byron letting me test NTLM against his
  servers, I could quickly repeat and fix the problem. It turned out to be:
  
  When libcurl POSTs without knowing/using an authentication and it gets back a
  list of types from which it picks NTLM, it needs to either continue sending
  its data if it keeps the connection alive, or not send the data but close the
  connection. Then do the first step in the NTLM auth. libcurl didn't send the
  data nor close the connection but simply read the response-body and then sent
  the first negotiation step. Which then failed miserably of course. The fixed
  version forces a connection if there is more than 2000 bytes left to send.

- check for ENGINE_load_builtin_engines() as well if engine is around

Marty Kuhrt (14 Feb 2005)
- changed config-vms info

- changed curlmsg.* entries to see if CVS would ignore it now

Daniel Stenberg (14 Feb 2005)
- Rename Curl_pretransfersec() to *_second_connect() since it does not just
  do pretransfer stuff like Curl_pretransfer().

- Fixed bad krb4 code. It always tried to use krb4 if built enabled.

Marty Kuhrt (11 Feb 2005)
- rename amigaos.c and nwlib.c if they exist before building

Daniel Stenberg (11 Feb 2005)
- Removed per Marty's request: The .h_* files aren't needed anymore, I
  consolidated them into one file called config-vms.h.  The curlmsg.h and .sdl
  files are generated from the curlmsg.msg file and, thus, shouldn't be in the
  dist.

Marty Kuhrt (11 Feb 2005)
- re-sync'd with curlmsg.msg

- ignore curlmsg.h and .sdl as they are generated by curlmsg.msg

- sync'd error codes with include/curl.h

- Added $Id$ and pre-exisiting logical check

Daniel Stenberg (11 Feb 2005)
- remove the check for strftime(), we don't need it

- Removed all uses of strftime() since it uses the localised version of the
  week day names and month names and servers don't like that.

- valgrind stuff for test suite, vms build and more

- Moved out the valgrind report parser to valgrind.pm, to make it easier to
  test it outside the test suite. Now we also disable valgrind usage if libcurl
  was built shared, as then valgrind is only testing the wrapper-script running
  shell which is pointless.

- typecast assign to ftpport from int to prevent warnings

- init fix for non-SSL builds

Marty Kuhrt (10 Feb 2005)
- Reduced the two config-vms.h_* files into this one.

Daniel Stenberg (9 Feb 2005)
- David Byron fixed his SSL problems, initially mentioned here:
  http://curl.haxx.se/mail/lib-2005-01/0240.html. It turned out we didn't use
  SSL_pending() as we should.
  
  This was TODO-RELEASE issue #59.

- David Byron identified the lack of SSL_pending() use, and this is my take
  at fixing this issue.

- better error checking and SSL init by David Byron

- prevent a compiler warning

Gisle Vanem (9 Feb 2005)
- Some functions are static here, but extern in libxml's
  SAX.h. gcc doesn't like that. Rename.

Daniel Stenberg (9 Feb 2005)
- the new ftp code and Gisle's DICT fix

- issue #54 done

Gisle Vanem (9 Feb 2005)
- Set 'bits.close' in case of malloc fail.
  Don't free 'lud_dn' twice in case curl_unescape()
  fails.

Daniel Stenberg (9 Feb 2005)
- add missing error codes

Gisle Vanem (9 Feb 2005)
- Use CURL_SOCKET_BAD.

- Handle CURLE_LOGIN_DENIED in strerror.c.
  For ftp only?

Daniel Stenberg (9 Feb 2005)
- FD_SET can be big macro, use braces

- FTP code turned into state machine. Not completely yet, but a good start.
  The tag 'before_ftp_statemachine' was set just before this commit in case
  of future need.

Gisle Vanem (9 Feb 2005)
- Replace LF with CRLF. Ref RFC-2229, sec 2.3:
  "Each command line must be terminated by a CRLF".

Daniel Stenberg (8 Feb 2005)
- -O clarification

- inflate and out of memory fixes

- ares_gethostbyname wants a 'ares_host_callback' in the 4th argument

Gisle Vanem (8 Feb 2005)
- Curl_addrinfo?_callback() and addrinfo_callback() now returns
  CURLE_OK or CURLE_OUT_OF_MEMORY.
  Add typecast in hostares.c.

- Don't free too much in freedirs() if realloc() fails.

Daniel Stenberg (8 Feb 2005)
- Curl_wait_for_resolv() no longer disconnects on failure, but leaves that
  operation to the caller. Disconnecting has the disadvantage that the conn
  pointer gets completely invalidated and this is not handled on lots of places
  in the code.

Dan Fandrich (7 Feb 2005)
- Fix for a bug report that compressed files that are exactly 64 KiB long
  produce a zlib error.

Gisle Vanem (6 Feb 2005)
- Preserve previous status in Curl_http_done().

Daniel Stenberg (5 Feb 2005)
- valgrind errors occur too often when 'make test' is used. It is because too
  many third-party libs and tools have problems. When curl is built without
  --disable-shared, the testing is done with a front-end script which makes the
  valgrind testing include (ba)sh as well and that often causes valgrind
  errors. Either we improve the valgrind error scanner a lot to better identify
  (lib)curl errors only, or we disable valgrind checking by default

- fix type

- Eric Vergnaud found a use of an uninitialized variable

- David Byron pointed out that this -1 on the buffer size is pointless since
  the buffer is already BUFSIZE +1 one big to fit the extra trailing zero. This
  change is reported to fix David's weird SSL problem...

- another example

- HTML parsing example with libtidy, by Jeff Pohlmeyer

- and we start over again

Version 7.13.0 (1 Feb 2005)

Daniel Stenberg (1 Feb 2005)
- 7.13 coming up

- somewhat nicer libcurl usage

- htmltitle

- HTML <head> parsing (with libxml) example code by Lars Nilsson.

- four changes

- if the DO operation returns failure, bail out and close down nicely to
  prevent memory leakage

- Let's add a cookie interface in 7.14

- Bugfixed the parser that scans the valgrind report outputs. I noticed that it
  previously didn't detect and report the "Conditional jump or move depends on
  uninitialised value(s)" error.
  
  When I fixed this, I caught a few curl bugs with it. And then I had to spend
  time to make the test suite IGNORE these errors when OpenSSL is used since it
  produce massive amounts of valgrind warnings (but only of the "Conditional..."
  kind it seems).
  
  So, if a test that requires SSL is run, it ignores the "Conditional..."
  errors, and you'll get a "valgrind PARTIAL" output instead of "valgrind OK".

- properly mark tests as requiring feature 'SSL'

- Use calloc() to save us the memset() call and terminate conn->host.name
  properly, to avoid reading uninited variables when using file:// (valgrind)

- Clear the urlglob struct when allocated, since we might otherwise use
  uninitialized variables. Pointed out to us by the friendly Valgrind.

- include "url.h" for the Curl_safefree() proto

- Using the multi interface, and doing a requsted a re-used connection that
  gets closed just after the request has been sent failed and did not re-issue
  a request on a fresh reconnect like the easy interface did. Now it does!
  (define CURL_MULTIEASY, run test case 160)

- Define CURL_MULTIEASY when building this, to use my new curl_easy_perform()
  that uses the multi interface to run the request. It is a great testbed for
  the multi interface and I believe we shall do it this way for real in the
  future when we have a successor to curl_multi_fdset().

- corrected the URL

- conn->ip_addr MUST NOT be used on re-used connections

- when using valgrind, include a much longer stack trace

- multi interface: when a request is denied due to "Maximum redirects followed"
  libcurl leaked the last Location: URL.

- Connect failures with the multi interface was often returned as "connect()
  timed out" even though the reason was different. Fixed this problem by not
  setting this timeout to zero when using multi.

- adjusted to the moved unlock of the DNS entry

- KNOWN_BUGS #17 fixed. A DNS cache entry may not remain locked between two
  curl_easy_perform() invokes. It was previously unlocked at disconnect, which
  could mean that it remained locked between multiple transfers. The DNS cache
  may not live as long as the connection cache does, as they are separate.
  
  To deal with the lack of DNS (host address) data availability in re-used
  connections, libcurl now keeps a copy of the IP adress as a string, to be able
  to show it even on subsequent requests on the same connection.

- Stephen More pointed out that CURLOPT_FTPPORT and the -P option didn't work
  when built ipv6-enabled. I've now made a fix for it. Writing test cases for
  custom port strings turned too tricky so unfortunately there's none.

- test the EPRT/LPRT/PORT somewhat more

- Use the same work-around for the memdebug stuff as in the command line client,
  to allow the contents of the env var decide the file name.

- a slightly involved work-around to prevent the debug-tracing from logging
  a free-without-alloc as the first call

- Make the debug build get the debug dump file path from the environment
  variable to allow the test suite to better control where it ends up.

- verify a part of the PORT line

- Make the server ignore the given PORT address, to make it possible to test
  curl's -P option easier.

- added more official web and download mirrors

- new curlpp URL

- fixed sort, mention C, the java binding is now maintained by Vic Hanson

- add number to the bugs to make them easier to refer to

- two known bugs

- Ian Ford asked about support for the FTP command ACCT, and I discovered it is
  present in RFC959... so now (lib)curl supports it as well. --ftp-account and
  CURLOPT_FTP_ACCOUNT set the account string. (The server may ask for an account
  string after PASS have been sent away. The client responds with "ACCT [account
  string]".) Added test case 228 and 229 to verify the functionality. Updated
  the test FTP server to support ACCT somewhat.

- A minor "syntax error" in numerous test files corrected

- new web mirror

- --protocols is added in 7.13.0

- David Shaw contributed a fairly complete and detailed autoconf macro you can
  use to detect libcurl and setup variables for the protocols the installed
  libcurl supports: docs/libcurl/libcurl.m4

- Use plain structs and not typedef'ed ones in the hash and linked-list code.

- two options less

- \fI marked \fP more function calls etc.

- If you're using libcurl as a win32 DLL, you MUST use the CURLOPT_WRITEFUNCTION
  if you set CURLOPT_WRITEDATA - or you will experience crashes.

- next release will be 7.13.0

- added a few items I plan to do

- FTP third transfer support overhaul. See CHANGES for details.

- clarify the struct name for CURLOPT_HTTPPOST

- Added support for "verify" => "stripfile" to strip contents of the file that
  is being checked.
  
  Also made the server retrying sleep only one second instead of three, to reduce
  some waiting when fooling around with the servers.

- Support file names passed to RETR that don't start with a number. In that
  case, all non-numeric prefixing letters are cut off to figure out the test
  number.

- Philippe Hameau found out that -Q "+[command]" didn't work, although some code
  was written for it. I fixed and added test case 227 to verify it.  The curl.1
  man page didn't mention the '+' so I added it.

- add support for NOOP

- If you give a *_LARGE option you MUST make sure that the type of the passed-in
  argument is a curl_off_t. If you use CURLOPT_INFILESIZE (without _LARGE) you
  must make sure that to pass in a type 'long' argument. */

- added test226 too

- Stephan Bergmann made libcurl return CURLE_URL_MALFORMAT if an FTP URL
  contains %0a or %0d in the user, password or CWD parts. (A future fix would
  include doing it for %00 as well - see KNOWN_BUGS for details.) Test case 225
  and 226 were added to verify this

- today's proxy fixes

Gisle Vanem (19 Jan 2005)
- Don't copy 'stderr' for Win-CE in IPv6 code. Don't call
  GetCurrentProcess() twice; use a local variable.

Daniel Stenberg (19 Jan 2005)
- add a URL to an article about making Apache support PUT

- Stephan Bergmann pointed out two flaws in libcurl built with HTTP disabled:
  
  1) the proxy environment variables are still read and used to set HTTP proxy
  
  2) you couldn't disable http proxy with CURLOPT_PROXY (since the option was
     disabled)

- skip sys/socket.h on windows CE

- check for errno.h

- Cody Jones' enhanced version of Samuel Daz Garca's MSVC makefile patch.

- Add support for server 'ftp2' which is a second FTP server. Useful for 3rd
  party transfer tests or tests that need two FTP servers.

- support the new --id command line option, that allows a second (or third or
  whatever) instance to run without overwriting the previous' logfiles

- mention the name-prefix protocol guess thing

- updated the wording for -B/--use-ascii

- Alex aka WindEagle pointed out that when doing "curl -v dictionary.com", curl
  assumed this used the DICT protocol. While guessing protocols will remain
  fuzzy, I've now made sure that the host names must start with "[protocol]."
  for them to be a valid guessable name. I also removed "https" as a prefix that
  indicates HTTPS, since we hardly ever see any host names using that.

- mention --netrc in the -u description

Gisle Vanem (15 Jan 2005)
- errrno can by freak accident become EINTR on DOS or
  Windows (unrelated to select). select() can never set errno
  to EINTR on Windows.

Daniel Stenberg (15 Jan 2005)
- output better error detection, like when ipv6 can't resolve

- Added README.hostip

- verify the protocol too

- Inspired by Martijn Koster's patch and example source at
  http://www.greenhills.co.uk/mak/gentoo/curl-eintr-bug.c, I now made the
  select() and poll() calls properly loop if they return -1 and errno is
  EINTR. glibc docs for this is found here:
  http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html
  
  This last link says BSD doesn't have this "effect". Will there be a problem
  if we do this unconditionally?
  S: ----------------------------------------------------------------------

Gisle Vanem (12 Jan 2005)
- Added dependencies.

- Added '-bd' option; target is a DLL.
  Added dependencies.

Daniel Stenberg (11 Jan 2005)
- support for retrieving used IP addresses

- Dan Torop cleaned up a few no longer used variables from David Phillips'
  select() overhaul fix.

Gisle Vanem (11 Jan 2005)
- Removed CURLTOOLDEBUG. It caused libcurl_wc.dll
  to fail in mysterious ways.

Daniel Stenberg (11 Jan 2005)
- Renamed easy.h and multi.h to easyif.h and multiif.h to make sure they don't
  shadow our public headers with the former names.

Gisle Vanem (11 Jan 2005)
- ".\lib\easy.h" shadows for <curl/easy.h> in Watcom.
  Force including ../include/curl/easy.h.

- Fix '!if' expression.

- ".\lib\multi.h" shadows for <curl/multi.h> in Watcom.
  Force including ../include/curl/multi.h.

Daniel Stenberg (11 Jan 2005)
- Cyrill Osterwalder posted a detailed analysis about a bug that occurs when
  using a custom Host: header and curl fails to send a request on a re-used
  persistent connection and thus creates a new connection and resends it. It
  then sent two Host: headers. Cyrill's analysis was posted here:
  http://curl.haxx.se/mail/archive-2005-01/0022.html

- Bruce Mitchener identified (bug report #1099640) the never-ending SOCKS5
  problem with the version byte and the check for bad versions. Bruce has lots
  of clues on this, and based on his suggestion I've now removed the check of
  that byte since it seems to be able to contain 1 or 5.

- Use Curl_easy_addmulti() to clear associations from easy handles to multi
  handles. Include multi.h to get proto.

- edited wording

- Pavel Orehov reported memory problems with the multi interface in bug report
  #1098843. In short, a shared DNS cache was setup for a multi handle and when
  the shared cache was deleted before the individual easy handles, the latter
  cleanups caused read/writes to already freed memory.

- Hzhijun reported a memory leak in the SSL certificate code, that leaked the
  remote certificate name when it didn't match the used host name.

Gisle Vanem (8 Jan 2005)
- Note about the static lib requirement; -DCURL_STATICLIB.

- Watcom additions.

- Added Watcom targets.

- New file.

- Added Makefile.Watcom to EXTRA_DIST.

Daniel Stenberg (7 Jan 2005)
- three recent bug fixes

- disable the valgrind log checking

- fixed the valgrind log check and make it possible to disable it for a specific
  test, see test 509

- added test 199

- prevent a single byte read outside the string in test case 39

- fixed #1097019, multiple GET posts (-G) error

- recent events

Gisle Vanem (4 Jan 2005)
- Changed curl.dll to libcurl.dll.

- Minor comment fix.

Daniel Stenberg (4 Jan 2005)
- just narrowed some text to fit within 80 cols

Gisle Vanem (4 Jan 2005)
- Removed _WIN32_WINNT to support IPv6 under Win-2K.

Daniel Stenberg (3 Jan 2005)
- Marty Kuhrt's VMS update

- reverted the bad naming of the implib names

- Alex Neblett's minor update

- nah, don't use the system's getpass() function since it too often is limited
  to 8(!) or similar lengths passwords

- issue 54 - this takes sweat

- Test case 241 fails on all systems that support IPv6 but that don't have the
  host name 'ip6-localhost' in /etc/hosts (or similar) since the test case uses
  that host name to test the IPv6 name to address resolver.

- --protocols, license, src/config.h.in

- ./src/config.h.in is now removed from CVS. It is copied from the
  lib/config.h.in file by buildconf

- My reimplementation and cleanup of the getpass source code. We officially no
  longer use Angus Mackay's getpass code due to the weirdo license his code was
  donated to us under.

- mention the new --protocols

- David Shaw added --protocols, and thus the --feature no longer mentions what
  protocols that are disabled.

Dan Fandrich (23 Dec 2004)
- Added LDAP library issue.

Daniel Stenberg (23 Dec 2004)
- recent changes
  
  and Merry Christmas!

- David Shaw fixed the disable variables so that curl-config --feature works
  correctly!

- issue 47 in next release?

- Rune Kleveland fixed a minor memory leak for received cookies with the (rare)
  version attribute set.

- Marcin Konicki provided two configure fixes and a source fix to make curl
  build out-of-the-box on BeOS.

Dan Fandrich (22 Dec 2004)
- C ensures that static variables are initialized to 0

Daniel Stenberg (22 Dec 2004)
- added CURLINFO_HTTP_CONNECTCODE

- uh, fixed!

- Added: 4 protocols we _could_ support and the CONNECT HTTP/1.0 detail we might
  fix one day.

- more about error codes

- test enforced chunked encoding with PUT on a local file

- Added test case 217 that verified CURLINFO_HTTP_CONNECTCODE, and I made the
  -w option support 'http_connect' to make it easier to verify!

- oops, variables first then code

- Prevent failf() from using the va_list variable more than once.
  See bug report #1088962 and  Single Unix Specification:
  http://www.opengroup.org/onlinepubs/007908799/xsh/vfprintf.html

- mention how the FTP code should be fixed one day

- include sys/types.h before sys/select.h

- set debug curl too when -c is used

- How do I list the root dir of an FTP server?

Dan Fandrich (20 Dec 2004)
- Fixed a compile warning introduced by making the protocol table const. This
  involves a binary-compatible change to the API struct curl_version_info_data

- Make some more arrays of pointers const.

- gcc 2.7 can't handle a few warning options that gcc 2.95 can.

Daniel Stenberg (20 Dec 2004)
- start working on 7.12.4

- and we start all over again

Version 7.12.3 (20 Dec 2004)

Daniel Stenberg (20 Dec 2004)
- 7.12.3

Gisle Vanem (19 Dec 2004)
- OpenSSL updates; get CA_BUNDLE from env. Assume no
  Kerberos, have <pkcs12.h>, <engine.h> and built-in engines.

- Remove 'data' initialiser.

Daniel Stenberg (19 Dec 2004)
- clarified a few changes

- fixed the solaris pkcs12 build problem

- if the pkcs12.h header exists, include it already in urldata.h to work around
  a precedence problem with the zlib header. See CHANGES for details.

- check for openssl/pkcs12.h

- Samuel Listopad added support for PKCS12 formatted certificates.

- Samuel Listopad fixed -E to support "C:/path" (with forward slash) as well.

- mention the new cookie api plans

- Jean-Marc Ranger pointed out that the returned data doesn't survive a call
  to curl_multi_remove_handle() either.

Dan Fandrich (17 Dec 2004)
- Renamed a variable to avoid conflict with a C++ reserved word.

Gisle Vanem (17 Dec 2004)
- Watcom has strtoll().

- Watcom uses 'i64' suffix.

- <windows.h> required for Watcom.

- s/_write/write/g

- Fix calling convention of wlap32.dll function. Watcom
  uses fastcall by default, so force cdecl.

- Watcom has 'struct timeval'.

- Add libidn.a and iconv libraries if USE_IDNA=1.

- Added option for using C-ares and libidn.
  Dependencies generated from $(CSOURCES).

- getdate.c is gone.

- Print true netrc name (.netrc/_netrc).

Daniel Stenberg (17 Dec 2004)
- avoid an extra malloc

- duplicate ! typo

- fixed minor memory leak when running out of memory

- oops, add missing return keyword

- fix skip-reason

- several windows large-file fixes

- two more ftp directory re-use tests added

- Based on Gisle Vanem's patch: make sure the directory re-use works even when
  a URL-encoded path is used.

Gisle Vanem (16 Dec 2004)
- Must include <io.h> and <sys/stat.h> before redefining
  stat(), fstat() and lseek().

Dan Fandrich (16 Dec 2004)
- Renamed a struct member to avoid conflict with a C++ reserved word.

Daniel Stenberg (16 Dec 2004)
- reduced the number of sub-blocks

- moved the lseek() and stat() magic defines to setup.h and now take advantage
  of struct_stat in formdata.c as well, to support formpost uploads of large
  files on Windows too

Gisle Vanem (16 Dec 2004)
- Support uploading and resuming of >2GB files.
  Ref. lib/file.c.

Daniel Stenberg (16 Dec 2004)
- Provide better reasons for why test cases are skipped. Also, don't show the
  SKIPPED stuff in the short output. Some platforms get quite a lot of SKIPPED
  and they don't add much value and only clutter screen space.

- NULL the fp pointer after it has been fclosed()

- Dinar in bug report #1086121, found a file handle leak when a multipart
  formpost (including a file upload part) was aborted before the whole file was
  sent.

Dan Fandrich (15 Dec 2004)
- Fix the --enable-debug compiler warning options for older versions of gcc.

Daniel Stenberg (15 Dec 2004)
- yet another mirror!

- precaution to prevent double typedefs of the bool

- moved the bool typedef to setup.h

- fixed how backslashes are treated in glob strings

Dan Fandrich (15 Dec 2004)
- Make some arrays of pointers const, too.

- Make some arrays of pointers const, too.

- Add 'const' to immutable arrays.

Daniel Stenberg (14 Dec 2004)
- clarify that the app must free the engine list

- prevent compiler warning when built without engine support

- make sure the ipv6 http server gets its pid stored in a separate file

- use the correct variables, not fixed values

- Harshal Pradhan fixed changing username/password on a persitent HTTP
  connection.

- mistake

Dan Fandrich (14 Dec 2004)
- Only declare static variables if they're needed.  Fixed some compile warnings.

- Header files are in openssl/ only if USE_OPENSSL is set.

- Removed fputc() prototype since it's already in stdio.h

Gisle Vanem (14 Dec 2004)
- Caller must free 'engines' list.

- urldata.h: Removed engine_list.
  ssluse.*: Added SSL_strerror(). Curl_SSL_engines_list() now returns a slist
  which must be freed by caller.

Daniel Stenberg (14 Dec 2004)
- Moved the CURLE_SSL_ENGINE_INITFAILED error code last in the list so that
  the others remain at previous values.

- Moved the engine stuff from the root-level of the SessionHandle struct to the
  UrlState sub-struct. Also made the engine_list exist for non-ssl builds to
  make curl build.

Gisle Vanem (13 Dec 2004)
- Document CURLINFO_SSL_ENGINES and "--engine".

- Set 'data->state.os_errno = error' in some places.
  Needed elsewhere too?

- Support for "--engine list" option.
  Moved CURLOPT_SSLENGINE* options to after verbose mode is set.
  Added a goto. Eek!

- Added handling of CURLINFO_SSL_ENGINES;
  Added Curl_SSL_engines_list(), cleanup SSL in url.c
  (no HAVE_OPENSSL_x etc.).

- Handle new type CURLINFO_SLIST.
  Handle new info list CURLINFO_SSL_ENGINES.

- Added CURLcode CURLE_SSL_ENGINE_INITFAILED,
  Added CURLINFO_SLIST type for returing a 'struct slist' in
  curl_easy_getinfo().
  Added CURLINFO_SSL_ENGINES.

- Fixed missing braces warning.

Daniel Stenberg (13 Dec 2004)
- large file file:// resumes on windows

- Gisle's fix for resuming large file:// files on windows - slightly edited
  by me.

- Dan Fandrich did minor corrections to his SSL cleanup patch

- Dan Fandrich added libcurl.pc.in to the dist

- when failing to verify a HTTP server, display what curl said on stderr to
  help debugging. (when using ipv6 I fell over this server that didn't have
  the ipv6 module loaded)

Gisle Vanem (12 Dec 2004)
- Missing 'in6addr_any' in MingW's lib. ld bug?

Daniel Stenberg (11 Dec 2004)
- modified to use the current error code name, not the obsolete one

- undef more obsolete defines if CURL_NO_OLDIES is defined

- HTTP IPv6 support added to the test suite

- provide an error string when resuming fails - and use the proper error code,
  not the former one

- fixed error message

- Dan Fandrich:
  
  Here's a stab at a consolidation of the SSL detection heuristics into
  configure. Source files aren't changed by this patch, except for setup.h and
  the various config*.h files.  Within the configure script, OPENSSL_ENABLED is
  used to determine if SSL is being used or not, and outside configure,
  USE_SSLEAY means the same thing; this could be even further unified some day.
  
  Now, when SSL is not detected, configure skips the various checks that are
  dependent on SSL, speeding up the configure process and avoiding complications
  with cross compiles.  I also updated all the architecture- specific config
  files I could see, but I couldn't test them.

- Dan F's initial pkg-config file (not installed yet)

- mention the maybe-missing initial zero in the vernum output

- Dan Fandrich: added some missing files. "I can't try them so they might still
  be broken, but at least they'll be less broken than they are now."

- Dan Fandrich corrects spelling mistakes

- Dan Fandrich extended the cross compile section and corrected spelling errors

- untabified

- username and IPv6 numerical address URL parser fix

- David Byron's debug build fix

- move the port number extraction to after the extraction of user name/password,
  as suggested by Kai Sommerfeld

- two new test cases for proxy-CONNECT with NTLM (one doing GET, one doing POST)

- don't try the rewind if no http struct is allocated yet

- configure and curl-config fixes

- Added two chapters: Custom Request Elements and Debug.

- ignore the getpart tool

- close the connection when a bad test number was requested

- Ton Voon provided a configure fix that should fix the notorious (mostly
  reported on Solaris) problem where the size_t check fails due to the SSL libs
  being found in a dir not searched through by the run-time linker.
  patch-tracker entry #1081707.

- Bryan Henderson pointed out in bug report #1081788 that the curl-config
  --vernum output wasn't zero prefixed properly (as claimed in documentation).
  This is fixed in maketgz now.

- update the version numbers in the libcurl.plist automaticly on release

- Matt Veenstra updated to 7.12.3. Starting now, we'll update the version number
  in this file automatically on releases using the maketgz script.

- Matt Veenstra:
  
  - removal of getdate.c
  - Added hostares.c, hostasyn.c, hostip4.c, hostip6.c, hostsync.c,
  hostthre.c, inet_ntop.c, nwlib.c, parsedate.c, sterror.c, strtoofft.c
  
  I have tested the build on 10.3, and will build on 10.2.8 in the next days.

- Rene Bernhardt found and fixed a buffer overrun in the NTLM code, where
  libcurl always and unconditionally overwrote a stack-based array with 3 zero
  bytes. I edited the fix to make it less likely to occur again (and added
  a comment explaining the reason to the buffer size).

- minor updates

- NORECURSE clarification, minor formatting update

- CURLFTPSSL_ALL should make sure that the transfer fails if the data connection
  isn't set to encrypted properly

- Fixed so that the final error message is sent to the verbose info "stream"
  even if no errorbuffer is set.

- Gisle Vanem's fix for better info messages when failing to connect using
  the multi interface

Gisle Vanem (6 Dec 2004)
- 'crypto_engine' not used.

- Replace MINGW32 with built-in __MINGW32__.

Daniel Stenberg (6 Dec 2004)
- HTTP PUT a to a FTP URL with username+password - over HTTP proxy

- Dan Fandrich added the --disable-cookies option to configure to build
  libcurl without cookie support. This is mainly useful if you want to build a
  minimalistic libcurl with no cookies support at all. Like for embedded
  systems or similar.

- Richard Atterer fixed libcurl's way of dealing with the EPSV
  response. Previously, libcurl would re-resolve the host name with the new
  port number and attempt to connect to that, while it should use the IP from
  the control channel. This bug made it hard to EPSV from an FTP server with
  multiple IP addresses!

- CURLOPT_FTPSSLAUTH was added in 7.12.2

- credit where credit is due

- Bug report #1078066: when a chunked transfer was pre-maturely closed exactly
  at a chunk boundary it was not considered an error and thus went unnoticed.
  Added test case 207 to verify.

- made the intended one hour default timeout in the CONNECT loop actually work

- comment cleanup

- test 206 - HTTP proxy CONNECT auth Digest

- added comment about port number in CONNECT string being used as test number

- prevent an initial "(nil)" to get sent in the initial request when doing
  CONNECT to a proxy with digest

Gisle Vanem (1 Dec 2004)
- Use "HAVE_SYS_TYPES_H".

Daniel Stenberg (1 Dec 2004)
- make the "check" actually open all those file desciptors as well to make sure
  it works, as it has proved to not work in some cases (like on Tor Arntsen's
  AIX 5100-06 xlc 5.0 --disable-shared runs).

Gisle Vanem (30 Nov 2004)
- alarm() works unreliable on djgpp 2.03. Don't use it.

Daniel Stenberg (30 Nov 2004)
- recent changes

- fixed test case errors

- three new compress test cases

- Fixed the array comparison function even more, made the temporary files used
  for diff output get created in the log/ dir and no longer deletes them since
  they help in understanding the problem, fixing the test case and fixing curl
  problems.

- Dan Fandrich's fix for libz 1.1 and "extra field" usage in a gzip stream

- no longer use the MIME::Base64.pm package as it seems to not be standard
  on lots of perl versions, provide our own base64 decoder

- added test 221 to test a broken gzip content download

- added test 220 - simple gzip auto decompress

- --disable-epsv when connecting to an IPv6 ftp server

- removed comment

- include setup.h first

- As reported in Mandrake's bug tracker bug 12285
  (http://qa.mandrakesoft.com/show_bug.cgi?id=12285), when connecting to an
  IPv6 host with FTP, --disable-epsv (or --disable-eprt) effectively disables
  the ability to transfer a file. Now, when connected to an FTP server with
  IPv6, these FTP commands can't be disabled even if asked to with the
  available libcurl options.

- zero terminate the buffer spitout() returns, as the sws.c code depends on
  that!

- make it possible for a test case to depend on the feature 'libz'

- killed trailing whitespace

- Enable test cases to provide sections base64-encoded to be able to test
  with binary data.

- utility to base encode data passed on stdin

- stricter newline policy

- spell

- if gmtime() returns NULL, this returns -1 to bail out nicely

- removed one we won't do, removed the CWD optimize as it is (partly) done

- add more info to the stderr output

- typecast the coversion from long to int

- progress meter newline

Gisle Vanem (26 Nov 2004)
- I changed my mind. Remove ioctl() macro in setup.h instead.

- Added anyauthput.exe.

- Renamed urldata.h members 'ioctl*' to 'ioctrl*' due to
  clash with djgpp ioctl() macro in setup.h.

Daniel Stenberg (26 Nov 2004)
- As reported in Mandrake's bug tracker bug 12289
  (http://qa.mandrakesoft.com/show_bug.cgi?id=12289), curl would print a newline
  to "finish" the progress meter after each redirect and not only after a
  completed transfer.

- removed no longer used variable

- last-second-before-commit changes corrected

- FTP improvements:
  
  If EPSV, EPRT or LPRT is tried and doesn't work, it will not be retried on
  the same server again even if a following request is made using a persistent
  connection.
  
  If a second request is made to a server, requesting a file from the same
  directory as the previous request operated on, libcurl will no longer make
  that long series of CWD commands just to end up on the same spot. Note that
  this is only for *exactly* the same dir. There is still room for improvements
  to optimize the CWD-sending when the dirs are only slightly different.
  
  Added test 210, 211 and 212 to verify these changes. Had to improve the
  test script too and added a new primitive to the test file format.

- made the code fit within 80 cols

- mingw _has_ a ftruncate() but it doesn't work with 64bit file sizes so we
  can just safely pretend we don't have one

Gisle Vanem (24 Nov 2004)
- Provide a 64-bit capable ftruncate(). MingW has one, but
  it takes only 32-bit offsets.

Daniel Stenberg (24 Nov 2004)
- added missing new error string

- mingw has a ftruncate() function

- HTTP "auth done right". See lib/README.httpauth

- decided to skip the MSVC makefile fixes, nobody seems to really want them
  and they are rather excessive

- Andrs Garca fixed the configure script to detect select properly when run
  with Msys/Mingw on Windows.

Gisle Vanem (24 Nov 2004)
- Clarify the static vs. import lib issue on Win32.

Daniel Stenberg (23 Nov 2004)
- added a bunch of people who really deserve to be here

- oops, use the precheck too!

- cut out release with no issue to fix

- introducing the client/precheck concept to allow test 518 to *only* run when
  it actually can run and test the FD_SETSIZE stuff it is meant to test

- yet another binding

- David Phillips fix for test 518 and my extension to make it not run on
  systems that can't run it fine.

- trying a version with URLs for all function calls

- issue 52 is fixed, I work on 51

- removed trailing whitespace

- removed unused variable and trailing whitespace

- remove curl_ prefix from functions not present in libcurl

- re-indented to curl style

- renamed curl_thread to my_thread to avoid confusion

- add URLs in comments for all libcurl function calls

- Curl_select's timeout arg is an int

- the FD_SETSIZE problem is fixed

- The FD_SETSIZE issue is already sorted, at least internally. We still need
  to provide a better multi-API to allow apps to avoid select().

- added comment for windows people about READFUNCTION being needed

- Dan Fandrich fix to compile with libc5

Gisle Vanem (19 Nov 2004)
- Enable >2GB files for MingW.

- Suppress signed vs. unsigned warnings on Win32

Daniel Stenberg (19 Nov 2004)
- Curl_select() now uses curl_socket_t on socket arguments

Gisle Vanem (19 Nov 2004)
- ifdef for portable "/dev/null".

- Winsock sockets are not in range 0..FD_SETSIZE.
  Shouldn't Curl_select() use curl_socket_t ?

Daniel Stenberg (19 Nov 2004)
- add select.obj

- David Phillips' FD_SETSIZE fix

- Dan Fandrich fix: eliminates some pedantic CodeWarrior compiler warnings and
  errors.

Gisle Vanem (16 Nov 2004)
- Added revision tag.

Daniel Stenberg (16 Nov 2004)
- Added README.httpauth to the dist

- saved for the future

- mention the openssl callbacks for SSL multithread

- added test case 517: 22 tests of the curl_getdate() function

- tiny format fix for nicer man output

- clean up start time and t_startsingle use so that redirect_time works properly

- new -w variables supported

Gisle Vanem (15 Nov 2004)
- Added top_srcdir.

- Added revision id, test for USE_ARES.
  Uses Makefile.inc.

Daniel Stenberg (15 Nov 2004)
- binding for R

Gisle Vanem (14 Nov 2004)
- Changes for static/dynamic linking of libcurl.
  No need to generate a dummy sys/utime.h. Cleanup.

- Borland doesn't have <sys/utime.h>, utime() nor
  _lseeki64().

- Borland doesn't have <sys/utime.h> nor utime().

- Static lib is libcurl.lib and import lib libcurl_imp.lib.
  Added implib command. Cleanup

Daniel Stenberg (13 Nov 2004)
- Dan fixed the CURL_DISABLE_VERBOSE_STRINGS stuff for older gcc versions since
  they don't support C99 varargs macros.

Gisle Vanem (13 Nov 2004)
- MingW/djgpp: Use GNU make's internal 'cd' to avoid shell-troubles.

- Fix location of timeval.c.

- Update comment.

- Add "-DCURL_STATICLIB" for static build.
  Add ../lib/timeval.c for objects.

- Renamed import lib to "libcurl_imp.lib".
  Some cleanup and making it more readable.

- Set OpenSSL path to same as in ../lib/Makefile.vc6.
  Import lib is now "libcurl_imp.lib".
  Some cleanup and making it more readable.

- MSVC with static link must define CURL_STATICLIB.
  zlib path set to same as in lib/Makefile.vc6.

- Netware target (hosted on Linux gcc) doesn't support
  or need __declspec.

Daniel Stenberg (12 Nov 2004)
- Dan Fandrich added the --disable-crypto-auth option to configure to allow
  libcurl to build without Digest support. (I figure it should also explicitly
  disable Negotiate and NTLM.)

- format mistake fixed

- Dan Fandrich can spell, I cannot

- Dan Fandrich: make --disable-dict actually disable dict

- clarify and update according to commit made just now

- Fix behaviour when passing NULL to CURLOPT_POSTFIELDS and CURLOPT_HTTPPOST.

- fix a IDN detect/use mistake

- added some details on what to come

- Dan Fandrich added --disable-verbose

- When libidn is detected without explicitly told to, we provide -L/lib and
  -I/include options. Not anymore.

- fix the -I path to the proper include dir when --enable-debug is used

Gisle Vanem (11 Nov 2004)
- Adapted for C++.

Daniel Stenberg (11 Nov 2004)
- recent fixes

- dates from 2038 or later now return 0x7fffffff when 32 bit time_t is used

- fix curl.h include

- configure --with-gssapi fix

- Gisle's CURL_EXTERN fix

Gisle Vanem (10 Nov 2004)
- Replace IsNT with IS_NT().

- Replace IsNT with IS_NT().
  Return correct timeval in windows_port.c.
  Squelch gcc warnings:
    use 'ares_socket_t' in ares_fds.c.
    Don't cast a 'lvalue' in ares_init.c.

Daniel Stenberg (9 Nov 2004)
- fix CURL_EXTERN for debug builds

Gisle Vanem (9 Nov 2004)
- Handle drive-letter on MS-DOS.

- Removed libcurl.def

Daniel Stenberg (9 Nov 2004)
- with all external functions marked with CURL_EXTERN it is easy to count them
  and... yes, they are 46!

Gisle Vanem (9 Nov 2004)
- Changes for removing libcurl.def file on Win32.
  Mark public functions with "CURL_EXTERN".

- Changes for removing libcurl.def file on Win32.
  Added "CURL_EXTERN" to memdebug.h functions.
  Cleaned up Makefile.vc6.

Daniel Stenberg (8 Nov 2004)
- today's work

- another lame change in an attempt to fix the moot gcc 3.4 warning

- weirdo hack to fix debian bug report 278691:
  'curl -v writes debugging to its network socket if stderr is closed'

- added a default in the switch in an attempt to avoid the moot "will never be
  executed" warning by gcc 3.4.0

Gisle Vanem (8 Nov 2004)
- Change OS name. Fix header guard.

- Un-do changes for WinCE; cdecl decoration is not needed.
  Confirmed by Paul Nolan.

Daniel Stenberg (8 Nov 2004)
- check for and require tld.h to be present before libidn usage is activated
  in the build, since libidn 0.3.X didn't have the header and we don't support
  that old libidn versions anyway.
  
  This was mentioned on the list by Jean-Philippe Barrette-LaPierre and in bug
  report #1062264.

- two post-1.2.1 changes

- added ares_cancel and ares_version

- Tim Sneddon's VMS fix for huge HTTP POSTs

- removed errno, added EAGAIN

- it has a sys/stat.h file, according to Paul Nolan

- update

- more retry stuff

- test server port numbers are now easily changed

- delete trailing whitespace

- based Andres Garcia's patch, added for mingw build

- recent changes

- use ifdef not if

- Paul Nolan fix to make libcurl build nicely on Windows CE

- documented the current --retry options

- modified to not use realloc() on a NULL pointer

- When cross-compiling, the configure script no longer attempts to use
  pkg-config on the build host in order to detect OpenSSL compiler options.

Gisle Vanem (28 Oct 2004)
- Fixed _write() arguments.

- *** empty log message ***

Daniel Stenberg (28 Oct 2004)
- use longs

- Dan Fandrich's gzip handling fix

- Added --retry and --retry-delay first attempt with four related test cases.

- log client disconnects

- Testing to define _REENTRANT unconditionally in here.

- mention how LDFLAGS=-R can be used (or LD_LIBRARY_PATH or ld.so.conf)

- mention incompatibilities with ares

- Tomas Pospisek filed bug report #1053287 that proved -C - and --fail on a
  file that was already completely downloaded caused an error, while it
  doesn't if you don't use --fail! I added test case 194 to verify the fix.
  Grrr. CURLOPT_FAILONERROR is now added to the list stuff to remove in
  libcurl v8 due to all the kludges needed to support it.

- just nicer output when this is seen

- the array sizes _can_ differ and the arrays can still match, since chomp
  is used at times but it doesn't decrease the array size

- format update

- Mohun Biswas found out that formposting a zero-byte file didn't work very
  good. I fixed.

- ignore this

- maketgz now creates a ares_version.h.dist file with the given version data
  properly set, and the Makefile.am is now fixed to use that when building
  a new package with make dist.

- Dan Fandrich's better ifdef for include fix

- 1.2.1 release time

- this change was reverted since it broke on solaris

- iconv 2.1.3 is considered bad for test case 165

- revert the charset fix as it broke the solaris tests (native iconv doesn't
  like that name)

- Ralph Mitchell fixed: input field with NAME= and VALUE= weren't processed
  properly case insensitive

- Alexander Krasnostavsky made it possible to make FTP 3rd party transfers with
  both source and destination being the same host. It can be useful if you want
  to move a file on a server or similar.

- snart isn't really used these days so we cut out the reference to it

- added num_connects

- CURLINFO_NUM_CONNECTS and more

Gisle Vanem (19 Oct 2004)
- djgpp has locale.h and setlocale().

- All Win compilers have locale.h + setlocale().

Daniel Stenberg (19 Oct 2004)
- bug 1049275 fixes test 165

- Peter Wullinger pointed out that curl should call setlocale() properly to
  initiate the specific language operations, to make the IDN stuff work better.

- start over on 7.12.3

Version 7.12.2 (18 Oct 2004)

Daniel Stenberg (18 Oct 2004)
- 7.12.2

- new mirror

- today's changes

- Alexander Krasnostavsky made the CURLOPT_FTP_CREATE_MISSING_DIRS option work
  fine even for third party transfers.

- libcurl leaked memory for cookies with the "max-age" field set.

Gisle Vanem (16 Oct 2004)
- Changes for issue 50

- Open "debugit" in binary mode ("rb").

- Added Traian Nicolescu's patches for threaded resolver on
  Windows. Plugged some potential handle and memory leaks.
  
  Refs.
    http://curl.haxx.se/mail/lib-2004-10/0134.html
    http://curl.haxx.se/mail/lib-2004-10/0157.html

Daniel Stenberg (14 Oct 2004)
- Eric Vergnaud pointed out that libcurl didn't treat ?-letters in the user name
  and password fields properly in URLs, like
  ftp://us?er:pass?word@site.com/. Added test 191 to verify the fix.

- use quotes to make gdb usage on this easier

- let's fix this too

Gisle Vanem (13 Oct 2004)
- Set errno = ENOMEM on faild countcheck().

Daniel Stenberg (13 Oct 2004)
- .NET binding

- correction

- #include "strerror.h" to get the strerror proto

- recent fixes

- one item fixed, one added for 7.12.2 and two more for 7.12.3

- add proper error message when send() fails

- removed trailing whitespace

- SO_NOSIGPIPE

- another lame attempt to avoid the "warning: will never be executed" warning
  by gcc 3.4

Gisle Vanem (10 Oct 2004)
- MSVC uses 'i64' suffix for 64-bit sizes.

Daniel Stenberg (10 Oct 2004)
- attempt to make the configure output appear in the build log when it runs
  on my solaris 2.7 box too (currently unknown perl version)

- set the SIZEOF_LONG define to get the new lib/strtoofft.h fine

- If long is 8 bytes we can use strtol() to get 64 bit numbers and won't need
  our strtoll() replacement function.

- Prevent a longjmp warning by moving the rc assign within Curl_resolv().
  Andy Cedilnik reported. Warning on HP-UX?

- Use LL suffix for long long constants if the compiler supports it, to prevent
  warnings.

- If long long is supported, check if [num]LL is supported for numerical
  constants.

- --enable-ares on AIX has problem

- Use 'struct lifreq' and SIOCGLIFADDR

- killed trailing whitespace

- if basename was found, check for a prototype and if none was found, provide
  our own in the formdata.c file to prevent warnings on systems without it

- prevent warning with comparison between signed and unsigned

- use curlx_strnequal() from the private lib sources instead of strncasecmp()
  for maximum portability

- use curl_strnequal(), not strncasecmp()

- Gisle's new fix, the old file:// leak

- use tld_strerror() only if previously detected, since otherwise we can't
  work with libidn < 0.5.6

- check for tld_strerror

Gisle Vanem (6 Oct 2004)
- Added tld_check_name().

- Fixed tld_check_name(). idna_to_unicode_lzlz() should never fail,
  but return FALSE if 'uc_name == NULL' just in case.

- USE_LIBIDN: Added Top-level-domain (TLD) check for host->name.
  Only print a warning if check fails.

Daniel Stenberg (6 Oct 2004)
- test resume and redirect

- Chih-Chung Chang reported that if you use CURLOPT_RESUME_FROM and enabled
  CURLOPT_FOLLOWLOCATION, libcurl reported error if a redirect happened even if
  the new URL would provide the resumed file. Test case 188 added to verify the
  fix (together with existing test 99).

Gisle Vanem (6 Oct 2004)
- *** empty log message ***

Daniel Stenberg (6 Oct 2004)
- updates of today

- avoid warnings on systems with this member set const

- removed tabs and trailing whitespace from source

- Dan Fandrich fix for hosts that need both -lnsl and -lsocket

- untabify

Gisle Vanem (5 Oct 2004)
- djgpp has basename()

Daniel Stenberg (5 Oct 2004)
- minor edit to re-use a variable and to hopefully avoid a (moot) warning
  about code that won't be reached

- recent fixes

- make the given path to --with-libidn override any other installation

- avoid warning for unused variable

- use idna_strerror() if it is available (only in libidn 0.5.6 or later)

- Only include libgen.h if we have a basename as well.
  
  Mainly meant to deal with the IRIX case which seems to requrie a "-lgen" lib
  to find the basename function and thus without the gen lib, it finds the
  header but not the function and our replacement function has a prototype
  that doesn't match the IRIX one.
  
  A different approach would be to make configure detect and use -lgen for the
  systems that require it.

- let our basename() be static

- name mix fix

- closing in on release

- Made the dns entry remain locked while a connection to the host remains to
  allow verbose output during this period. Bertrand Demiddelaer reported and
  helped fixing.

- set async.done to TRUE last in the addrinfo callback to prevent the risk that
  the multi-threaded resolver does wrong

- Replaced the use of isspace() with our own version instead since we have most
  data as 'char *' and that makes us pass in negative values if there is 8bit
  data in the string. Changing to unsigned causes too much warnings or too many
  required typecasts to the normal string functions.

- when building with libidn support, check for idna_strerror() which is
  included in very recent versions

- added info about how users get info (like the CURLcode return code) from
  individual transfers

- removed trailing whitespace

- Gisle Vanem provided code that displays an error message when the (libidn
  based) IDN conversion fails. This is really due to a missing suitable
  function in the libidn API that I hope we can remove once libidn gets a
  function like this.

- removed weird preprocessor juggling not needed

- someone should hit me

- Aleksandar Milivojevic reported a problem in the Redhat bugzilla (see
  https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=134133) and not to anyone
  involved in the curl project! This happens when you try to curl a file from a
  proftpd site using SSL. It seems proftpd sends a somewhat unorthodox PASS
  response code (232 instead of 230). I relaxed the response code check to deal
  with this and similar cases.

- fixed the basename() replacement, reported by Gisle

- mention when this option was added

- reflect the last few changes

- - Based on Fedor Karpelevitch's formpost path basename patch, file parts in
    formposts no longer include the path part. If you _really_ want them, you
    must provide your preferred full file name with CURLFORM_FILENAME.
  
    Added detection for libgen.h and basename() to configure. My custom
    basename() replacement function for systems without it, might be a bit too
    naive...
  
    Updated 6 test cases to make them work with the stripped paths.

- - Larry Campbell added CURLINFO_OS_ERRNO to curl_easy_getinfo() that allows an
    app to retrieve the errno variable after a (connect) failure. It will make
    sense to provide this for more failures in a more generic way, but let's
    start like this.

- killed trailing whitespace

- Gnter Knauf and Casey O'Donnell worked out an extra #if condition for the
  curl/multi.h header to work better in winsock-using apps.

- Jean-Philippe Barrette-LaPierre made buildconf run better on Mac OS X by
  properly using glibtoolize instead of plain libtoolize. (This is made if
  glibtool was found and used instead of plain libtool.)

- --max-redirs is _not_ -Z

- 48 - Harshal Pradhan's isspace() fix for 8bit cookie content

- issue 47 - Peter Sylvester's patch related to the new SRP on the TLS layer

- fix the multi.h too

- added issue 45 "Chris' suspected race condition in the windows threaded
  resolver"

- added five things I want fixed before the next release

- Fixed an error message: we use CWD, we don't cd into dirs with FTP

- Bertrand Demiddelaer fixed curl_easy_reset() so that it doesn't mistakingly
  enable the progress meter.

- - Henrik Stoerner fix: got a report that Tru64 Unix (the unix from Digital
    when they made Alpha's) uses /etc/svc.conf for the purpose fixed below for
    other OSes. He made c-ares check for and understand it if present.
  
  - Now c-ares will use local host name lookup _before_ DNS resolving by default
    if nothing else is told.

- recent stuff

- made pkg-config not get used if a path is given with --with-ssl

- Only active the engine code if ssl is enabled. This is how the actual engine
  member in the struct is used.

- - Henrik Stoerner: found out that C-ARES does not look at the /etc/host.conf
    file to determine the sequence in which to search /etc/hosts and DNS.  So on
    systems where this order is defined by /etc/host.conf instead of a "lookup"
    entry in /etc/resolv.conf, C-ARES will always default to looking in DNS
    first, and /etc/hosts second.
  
    c-ares now looks at
  
    1) resolv.conf (for the "lookup" line);
    2) nsswitch.fon (for the "hosts:" line);
    3) host.conf (for the "order" line).
  
    First match wins.

- Dominick Meglio host file path discovery patch for windows

- Ben Greear's minor fix to build (better) with cross-compiled(?) mingw

- allow setting CURLOPT_SSLENGINE to NULL even if no SSL engine is supported

- Dan Fandrich patched three tests

- Dan Fandrich's fix to use 127.0.0.1 instead of localhost to not depend on
  it resolving nicely

- Jean-Claude Chauve is a friend!

- typo

- jean-claude Chauve fixed an LDAP bug

- less long => int implicit conversion warnings

Gunter Knauf (19 Sep 2004)
- removed getdate.c hack.

Daniel Stenberg (19 Sep 2004)
- added URL to the exception paragraph in the GPL FAQ

- the error message fix for failed connects

- kill trailing whitespace and clarify a few errors

- set an error message when connection fails

- Location:-follow problem

- one more option, one more friend

- Added CURLOPT_FTPSSLAUTH

- Location: problem with bad original URL, identified in bug report #1029478

- Bertrand Demiddelaer's correction

- ftp-ssl mistake corrected

- no more getdate.c to care about

- fixed to use the new file. Can we make this use Makefile.inc somehow?

- the new date parser affects -z

- Replaced the former date parser with a rewrite. No more yacc/bison needed.

- ignore more

- and moved back the month array to a static one since the ftp code won't need
  it anymore

- removed this file again, we only provide a single public function and that
  is already in the public header file

- no longer includes getdate.h, there's no need for it

- getdate.h is not required to include, it adds nothing new

- revert the change for the new date parser, as the new one can deal with
  the old format now

- support for YYYYMMDD added, which allows us to keep using the lib/ftp.c code
  I was previously #ifdef'ing to a different look when this parser is used

- added more examples/docs in the top comment

- Since many users probably already use local time strings as input, I now
  made it deal with named time zones as well as mail-style +0200 ones.
  
  Seems to work fine. I'm comparing with GNU date command:
  
  date -d [date] -u +%s

- describes how you can extract the CA cert from a site using the openssl tool

- Added parsedate.[ch]

- mention more friends

- Minor adjustment needed for the new date parser to succeed. ifdef'ed out
  for now.

- more docs and fixed the delta compared to GMT that prevented test case 141 to
  work with this

- 1. cookie expire-strings MUST use GMT timezones
  2. adjusted date strings to upcoming date parser rewrite

- slightly better but still lacks

- getdate replacement code. smaller, slicker, faster.

- fixed -F to support setting type= even on parts that aren't file-uploads

- minor indent change

- up to date with recent changes

- - Bug report #1025986. When following a Location: with a custom Host: header
    replacement, curl only replaced the Host: header on the initial request
    and didn't replace it on the following ones. This resulted in requests with
    two Host: headers.
  
    Now, curl checks if the location is on the same host as the initial request
    and then continues to replace the Host: header. And when it moves to another
    host, it doesn't replace the Host: header but it also doesn't make the
    second Host: header get used in the request.
  
    This change is verified by the two new test cases 184 and 185.

- curl --sync

- Now the test servers and test cases can run on a custom port number. There's
  no fixed port numbers in use anymore. Starting now, the default ports the
  servers use are 8990 - 8993. There's no option to modify these yet, but
  changing the $base option in the top of the runtests.pl script.

Gunter Knauf (3 Sep 2004)
- fixed nasty warnings with gcc 3.3.

Daniel Stenberg (2 Sep 2004)
- clarify CURLE_SSL_CERTPROBLEM somewhat

- improved error message when client cert return failure

- use the correct struct name in the example

- added more info on the nobody

- minor edit of HTTPGET

- fix formatting flaw

- fix the return code for curl_multi_add_handle()

- mention when the function was added to the lib

- proxy connection close and so

- proxy-connection close

- removed issue 36 from this list, we don't know how to do it and no one has
  stepped forward to help us. Let's postpone that fix.

- Make "Proxy-Connection: close" close the current proxy connection, as
  Roman Koifman found out.

- getdate fix, adacurl release

- mention Gisle's recent fixes

Gisle Vanem (29 Aug 2004)
- Removed ares_free_errmem.c from MSCV project files.
  Fixed line-endings to CR-LF.

Daniel Stenberg (27 Aug 2004)
- updated with minor edits

- don't do SO_KEEPALIVE, we already have a finer grained method built-in

- added some more details

- getdate and new test cases from yday

- not accurate anymore anyway

- Frankie V's description on how to get a CA cert for a random site using
  IE

- returned memory should not be freed

- added test 183 to verify that we properly send good Host: headers when
  getting multiple URLs over a single proxy connection

- Attempt to quick-fix the getdate problem by post-replacing the getdate.c
  file after the bison/yacc process to add the fix Harshal Pradhan suggested.

- prevent files named ".nfs[something]" from being displayed when failing

- updated in CVS, generated with a much newer bison version

- Expect: 100-continue info added

- added note about WRITEFUNCTION now being called with zero bytes if the file
  to be transfered is empty

- verify that transferring a zero byte FTP file results in a zero byte local
  file

- Provide support for "transferring" zero bytes FTP files and comparing that
  the output file actually is zero bytes after the transfer.

- stripped trailing whitespace

- lost of more into on how to tweak some headers

- debug.c is a fresh new example showing how to use the DEBUGFUNCTION to get
  lots of fine info from a transfer

- added more header info for PUT and POST requests

- Roman Koifman pointed out that libcurl send Expect: 100-continue on POSTs and
  PUTs even when told to use HTTP 1.0, which is not correct.

Gisle Vanem (20 Aug 2004)
- More patches for Watt-32 on Win32; don't include "nameser.h".

- No WSAGetLastError() on Watt-32/DOS

- No <sys/uio.h> on DOS/Win32

- Changes for Watt-32 on Windows. I've assumed Configure
  sets the required HAVE_xx defines for non-DOS/Win targets.

Daniel Stenberg (20 Aug 2004)
- Alexander Krasnostavsky made the write callback get called even when a zero
  byte file is downloaded.

- socks proxy and timeouts bug

- actually, we check for a numerical host using either ipv4 or ipv6, as neither
  should result in a reverse dns lookup

- use inet_pton() correctly!

Gisle Vanem (19 Aug 2004)
- ZLIB_ROOT not needed

- My first CVS commit just to see if this works.
  BTW. Used eclipse IDE fo this, which really kicks ass.

Daniel Stenberg (19 Aug 2004)
- simplified expression

- Ling Thio pointed out that getaddrinfo() reverse-lookups ip-only names, and
  this is an attempt to prevent it from doing that. affects ipv6-enabled only.

- the autobuilds failed all over on AIX, attempt to fix the strerror_r() problem
  by setting _THREAD_SAFE (and -qthreaded) before strerror_r() is checked for.

- reuse handles in PHP/CURL works - Kirk Hedden told us

- PHP FAQ

- indented the code curl-style

- removed trailing whitespace

- see also the reset function

- mention the reset function

- Kjetil Jacobsen reported an open file leak in file:// transfers of empty
  files.

- added a check for the xlc compiler on AIX, and if that is detect we use
  the -qthreaded compiler option

- define _THREAD_SAFE on (recent) AIX systems to build thread-safe code

- recent fixes

- allow a custom "Accept-Encoding:" header override the internally set one
  that gets set with CURLOPT_ENCODING

- strip trailing whitespace

Gunter Knauf (16 Aug 2004)
- syncronized with libcurl.def.

- cosmetic fix.

Daniel Stenberg (16 Aug 2004)
- summary edit: mention that some options take a curl_off_t

- Roland Krikava's cookies over proxy fix.

Gunter Knauf (14 Aug 2004)
- fixed linkage dll targets. (submitted by Casey O'Donnell)

Daniel Stenberg (13 Aug 2004)
- added two good ideas

- mention Harshal Pradhan's windows fix

- Harshal Pradhan made minor syntax change to make this build with MSVC 7.1

- removed the ispell-added local word, compressed the final links into a
  short section

- strip trailing whitespace

- spell

- Added "5.9 How does libcurl resolve host names?" since I wrote the text in
  a mail anyway the other day.

- updated with recent changes

- hm

- 3.16 What certificates do I need with I use SSL?
  
  my first attempt at a basic description of the certs involvede

- removed trailing whitespace, indented to curl-style levels

- Removed the _XOPEN_SOURCE defining again since it caused major havoc in IRIX
  land with many warnings and even compiler errors due to missing structs etc

- --disable-[protocol] doesn't disable tests of the specific protocol

- clarify that CURLE_FTP_USER_PASSWORD_INCORRECT might in fact get returned
  even if user and password are correct

- include the server response in the error message when an FTP server gives
  back a 530 after the password is provided, as it isn't necessary because of a
  bad user name or password.

- define the _XOPEN_SOURCE define in the config.h file instead, and also added a
  decent quote about the define, taken from
  http://www.opengroup.org/onlinepubs/007908799/xsh/compilation.html

- fixed the default result for xopen and mimpure to work better

- experimental code to detect mips-sgi-irix systems that build without gcc
  and if so, define _XOPEN_SOURCE to 500 in an attempt to build with less
  warnings (on the 64bit versions)

- added several recent bindings

- updated the CURLOPT_POST description after input from Alan Pinstein

- Ok, setting CURLOPT_POST to 0 will now convert the request to a GET (this
  remains undocumented as this is not the way we recommend)

- minor reformat to suit the new FAQ parser

- ignore curllib.dsp

- ignore more files

- 7.12.2 work in progress

- and we're back on a clean notes sheet again

Version 7.12.1 (10 Aug 2004)

Daniel Stenberg (10 Aug 2004)
- 7.12.1 notes

- added "5.8 libcurl.so.3: open failed: No such file or directory" and made
  some general cleanups

- In OpenSSL 0.9.7d and earlier, ASN1_STRING_to_UTF8 fails if the input is
  already UTF-8 encoded. We check for this case and copy the raw string manually
  to avoid the problem. This code can be made conditional in the future when
  OpenSSL has been fixed. Work-around brought by Alexis S. L. Carvalho.

- more typecasts to please picky compilers

- version string, krb4 link fix, added number of web mirrors and libcurl bindings

- GSS/Kerberos 5 for ftp

- added info about my current idea about option separation between URLs on
  the command line

- adding notes for 7.12.2 now, 7.12.1 is removed due to release ANY DAY NOW

- --negotiate does not work without username/password, bug report #1004841

- the krb4 stuff needs -lcom_err to link now, for some odd reason. This is
  possibly only on some platforms, but it happens on my Solaris 2.7 box and I
  don't know anyone else that regularly build curl with krb4 support.

- typecast the assigment of an unsigned variable to a signed one to prevent
  picky warnings

- ->fread() should get a size_t variable passed in

- made telrcv() take a ssize_t argument instead of int to better match other
  functions (and prevent warnings)

- mention the new cool CA extraction way just documented

- new web mirror

- negotiate fix and new glib/GTK+ binding

- Enrico Scholz fixed the service name to be uppercase as reported in bug
  report #1004105

- multi-connect fix and cookie domain fix

- Fixed multiple IP connects with the multi interface. This fix is influenced
  by Gisle Vanem's patch, only modified by me.

- Dylan Salisbury's fix to prevent us from accepting cookies from TLD only

- borland is already mentioned

- mention this is new

- link to reset as well

- curl_easy_reset() documented

- digest fix

- Joel Chen reported that we assumed content within quotes a bit too much in
  the digest code. This fixes it.

- prevent all the sig and alarm stuff when using ares

- fix a mingw32 build warning

- mingw32 builds make .a libs

- added typecast in an attempt to fix a mingw32 warning

- additional typecasts to please MIPSPro on 64bit IRIX

- oops, curl_easy_reset is a void

- variable type fix

- provide a curl_easy_reset() proto

- removed C++ comment to please picky source checkers

- fixes!

- curl_easy_reset was added

- Bertrand Demiddelaer fixed the host name to get setup properly even when
  a connection is re-used, when a proxy is in use.

- Fixes Brian Akins' reported problems with duplicate Host: headers on re-used
  connections.

- use Makefile.inc and make it get included in dist archives

- renamed CURL_HEADERS, since it is a magic automake name we must not use

- Bertrand Demiddelaer made the testing work with valgrind 2.1

- Bertrand Demiddelaer fixed two missing newlines

- -o #[num] fix

- using #[num] with -o now make it literally used if there's no globbing for
  that particular index. Reported in bug report 997536.

- removed trailing whitespace

- libs built with libtool are named .la in the build dir

- --enable-debug builds static only, Gisle fixed a memory leak and more

- Gisle Vanem:
  
  Basically in loops like handle_errors(), 'query->next' was assigned a local
  variable and then query was referenced after the memory was freed by
  next_server(). I've changed that so next_server() and end_query() returns the
  next query. So callers should use this ret-value.
  
  The next problem was that 'server->tcp_buffer_pos' had a random value at entry
  to 1st recv() (luckily causing Winsock to return ENOBUFS).
  
  I've also added a ares_writev() for Windows to streamline the code
  a bit more.

- autobuilds with ares and curl_easy_reset()

- curl_easy_reset() added. Need testing and docs. I also think we should make
  the initial setting up the struct should use this single function to avoid
  having the initialisation code at two places.

- AM_PROG_LIBTOOL is deprecated and AC_PROG_LIBTOOL should be used instead

- if --enable-ares is used, we must run 'buildconf' in the ares dir before
  we run configure.

- --enable-debug now makes the lib built static only since otherwise we
  get problems

- generate the new configure better

- now generated by automake

- buildconf and memanalyze are parts of the plain release

- Added buildconf buildconf.bat to the dist

- refer bug reports to the mailing lists, not the old email alias

- recent activities

- - Fixed a few variable return types for some system calls. Made configure
    check for ssize_t to make it possible to use that when receiving the send()
    error code. This is necessary to prevent compiler warnings on some systems.
  
  - Made configure create config.h, and all source files now include setup.h that
    might include the proper config.h (or a handicrafted alternative).
  
  - Switched to 'ares_socket_t' type for sockets in ares, since Windows don't
    use 'int' for that.
  
  - automake-ified and libool-ified c-ares. Now it builds libcares as a shared
    lib on most platforms if wanted. (This bloated the size of the release
    archive with another 200K!)
  
  - Makefile.am now uses Makefile.inc for the c sources, h headers and man
    pages, to make it easier for other makefiles to use the exact same set of
    files.
  
  - Adjusted 'maketgz' to use the new automake magic when building distribution
    archives.

- the multi interface is not so new anymore!

- minor format fix

- deal with negative Content-Length: headers by ignoring the info

- test downloading from a server claiming negative content-length

Gunter Knauf (16 Jul 2004)
- removed Makefile.b32.resp from repository.

- removed Makefile.b32.resp from the list.

- changed to use a temporary response file with tlib to give W9x a chance to build; looks ugly but works fine.

- added borland-ssl and borland-ssl-zlib targets.

- fixed zlib suport.

- some more tweaks, fixed zlib suport.

- added just another switch.

- removed old CXXFLAGS; added switch to suppress linker banner.

- removed unneeded libs from linking.

Daniel Stenberg (15 Jul 2004)
- recent activities

Gunter Knauf (15 Jul 2004)
- added Borland support.

- made OpenSSL support conditional.

- made OpenSSL support conditional;
  removed ugly dependence on Makefile.b32.resp.

- Gisle's fix to support Borland builds again.

Daniel Stenberg (14 Jul 2004)
- now known as libcurl-tutorial.3

- Jason Nye pointed out that callbacks don't need to use the "C namespace"

- An Andres Garcia fix: add a typecast to make it work better

- removed the config-netware.h from the release archives

Gunter Knauf (14 Jul 2004)
- some more fixes; added cw32mt.lib, winmm.lib to the link libs for curl.exe.

- changed Borland target since Borland's make doesnt understand '&'.

- changed to use Makefile.inc.

- updated for current cvs sources; looking for getting rid of this file....

- changed to use Makefile.inc.

- minor corrections.

- changed to use Makefile.inc since Gisle agreed.

- minor cleanup.

- added some lines to fetch ares version.

- updated MSVC build instructions.

- changed paths to external libs to recent versions.

- added new vc-zlib target.

- removed zlib dependence from default target; added new zlib targets.

- removed obsolete NetWare config files;
  we generate now config.h dynamically from Makefile.

- added ifdef for NetWare to ares.h.

- ifdef keep_sigact since its only used when SIGALRM is defined.

- fixed ares linking.

Daniel Stenberg (6 Jul 2004)
- file:// upload fix on windows

- Andres Garcia pointed out that we searched for a slash badly since it is
  converted and thus we must search for backslash on windows

- clarify the -Q option a bit better

- mingw and netware makefiles added by Gunter Knauf

Gunter Knauf (6 Jul 2004)
- fixed Win32 prebuild section; fixed minor cosmetic bug.

- added vc-ssl-zlib target.

- minor cleanup.

- be a bit more verbose when things go wrong.

- added additional check to avoid calling a non-existant external script.

- the simple way was too simple, so added --mktarball option.

- minor cosmetic fix.

- added simple way to create a tarball just before the build is deleted.

- changed to reflect recent NetWare makefile changes;
  moved call to buildconf.bat down so that it takes place in the build dir.

- added MingW32 makefile.

- changed to use Makefile.inc; made paths overwritable.

- added comment.

Daniel Stenberg (5 Jul 2004)
- Added README.netware to the release archive

Gunter Knauf (5 Jul 2004)
- added line where to find compile instructions.

- minor NetWare upate.

- try to relax linux build host detection.

- added a simple README.netware.

- added section for compiling NetWare target.

Daniel Stenberg (4 Jul 2004)
- Gnter Knauf made c-ares build and run on Novell Netware.

- explicit typecasts to prevent warnings

- typecast the conversion to uInt when assigning z->avail_in to prevent
  warnings from picky compilers

- make sure the 3rd argument passed to bind() is a socklen_t

- SSL_get_verify_result() returns a long, so we receive the result in a long
  and not an int.

- typecast long => int conversion

- explicit typecasts when converting from long to int to avoid warnings

Gunter Knauf (4 Jul 2004)
- added NetWare section for paths.

Daniel Stenberg (4 Jul 2004)
- made 'connectindex' a long variable to prevent compiler warnings when
  implicitly converting it to int

Gunter Knauf (4 Jul 2004)
- update to build both test apps.

Daniel Stenberg (4 Jul 2004)
- typecast the conversion from long to int to prevent picky compiler warnings

Gunter Knauf (4 Jul 2004)
- removed now obsolete ifdef. Shouldnt the other ifdefs be inside the else as they are in ./src/setup.h ?

- removed now obsolete ifdef.

- removed abort() - sync'd with getdate.y 1.26

Daniel Stenberg (4 Jul 2004)
- include the Makefile.inc file to get all sources and headers

Gunter Knauf (3 Jul 2004)
- minor fix for compiling on Linux.

- added few ifdefs to make it usable for NetWare.

- added NetWare makefile.

- reverted, older gcc breaks compilation since it doesnt know the switch.

- killed warning with gcc 3.3.1 and later when using -O2.

- modified to use new Makefile.inc to build up object list;
  added generation of config.h and a prebuild target to create all neded files.

- modified to use new Makefile.inc to build up object list;
  added generation of config.h and a prebuild target to create all neded files.

- added Makefile.inc which can be included from other makefiles to reduce maintaining.

Daniel Stenberg (2 Jul 2004)
- I prefer CURLOPT_WRITEDATA before CURLOPT_FILE

- snprintf instead of sprintf,
  better support for HUGE files with the -# progress bar

- added typecasts to please compilers

- variable type cleanup to hush compilers,
  killed trailing whitespace

- explicit typecasts to double to prevent warnings about implicit conversions
  that might lose accuracy

- curl_share_cleanup fix

- make clean now removes getdate.c

- configure --disable-http works these days

- Andrs Garca found out the share cleanup code crashes when you cleanup
  and there are not lock/unlock functions set!

- typecase the argument to curl_easy_strerror() to a CURLcode to please
  picky compilers

- djgpp fixes by Gisle

- Gisle's win32-fix. 'errno' is not used for errors when socket() fails on
  Windows.

- Gisle added makefile for djgpp builds

- --trace fix

- make functions use size_t instead of int next major update

- Variable type cleanups to please the picky MIPSPro compiler.

- variable type cleanup to fix picky compiler warnings

- typecast to prevent picky compiler warning

- typecast to int when the variable is int!

- Gisle's djgpp magic

- Gisle Vanem made this build fine with djgpp and the Watt-32 stack.

- don't close the trace stream until _after_ the easy handle has been cleaned
  up, as that can send traces too

- spellfixed comments

- Another Gisle update

- 5K array on the stack is a big hefty, it is now allocated with malloc
  instead

- I think 1024 bytes is enough for even most ipv6 addresses :-)

- Prevent a very long password to buffer overflow the global variable we
  use when built with a very old OpenSSL version.

- removed trailing whitespace, free a missing malloc when returning error

- passing in a very long interface name could make a buffer overflow

- not PIN code, pass phrase

- simplified the check for when to free() the buf data

- NOBODY set TRUE after a POST makes a good HEAD now

- wxcurldav

- fixed

- make the SSL connect use the same default connect timeout define as the
  generic connect uses

- Curl_addrinfo is another typedef we use frequently

- Gisle fixed a bad free from the resolve reorg, I changed type of the buf
  variable to sort out some compiler warnings.

- Gisle's djgpp updates

- Gisle's update

Gunter Knauf (29 Jun 2004)
- fixed argument parsing; added --setup option.

Daniel Stenberg (29 Jun 2004)
- 'M-x ispell-buffer'

- multi interface connect fix

- commented out the check for gethostbyname_r() as we no longer use it

- corrected the Curl_is_connected() proto

- First attempt at making the multi interface work when connecting to a host
  that resolves to multiple IP addresses.

- Added missing info for the command line tool, as noted by Mike Kienenberger

- --limit-rate problems on Mac OS X was reported by Rob Stanzel

- check for a fine poll() before it is used to sleep subsecond

- reset CURLOPT_CUSTOMREQUEST with NULL

- snprintf and version

- oops 5 bytes makes 4 letters plus zero byte

- fix warning

- the _num_chars() function is not used, removing

- to prevent compier warnings, we only declare len if we have code
  that uses it

- Gisle: free used memory better

- Gisle cleaned up remaining host resolve re-org issues

- include header for our printfs

- reverted bad win32 fix

Gunter Knauf (24 Jun 2004)
- fixed the MSVC build.

Daniel Stenberg (24 Jun 2004)
- length limit the sscanf() parsing to prevent buffer overflow

- ah, simplified my latest change more

- fix for systems without gethostbyname_r()

- Replaced all uses of sprintf() with the safer snprintf(). It is just a
  precaution to prevent mistakes to lead to buffer overflows.

- made the Curl_he2ai() take the port number as an int intead, to avoid lots
  of typecasts all over

- use snprintf() to be on the safe side

- typecasts to prevent warnings

- only use sockaddr_in6 on ipv6-enabled hosts

- socks proxy support even when libcurl is built ipv6-enabled

- typecast to prevent warning

- use Curl_addrinfo, not 'struct addrinfo'

- fixed problems I missed to fix from my cleanup

- prevent warning

- Yet another resolve code re-org

- Source cleanups. The major one being that we now _always_ use a Curl_addrinfo
  linked list for name resolved data, even on hosts/systems with only IPv4
  stacks as this simplifies a lot of code.

- static functions are better not Curl_ prefixed to make their static
  status more obvious

- When adding the return -1 to prevent warnings on some compilers, others
  started complaining since it won't be reached... So I removed the call to
  abort() and just return -1 instead. abort() was wrong to call anyway since
  this is a library!

- prevent a warning

Gunter Knauf (22 Jun 2004)
- one copy&paste too much, removed the define again.

- argh - copy&paste error.

- syncronized with recent getdate.y updates.

Daniel Stenberg (22 Jun 2004)
- the hostname variable wasn't assigned and we no longer use it

- cookie size

- extended to include a cookie with 4998 bytes of content

- David Cohen pointed out that RFC2109 says clients should allow cookies to
  contain least 4096 bytes while libcurl only allowed 2047. I raised the limit
  to 4999 now and made the used buffer get malloc()ed instead of simply
  allocated on stack as before.

- Gnter Knauf fixed getdate.y to remove a few warnings. I removed the
  ifdef'ed test we never ever use anyway.

Gunter Knauf (22 Jun 2004)
- added new --target option for autobuilding other targets than GNU-like.

- added 'clean' targets for mingw32 and netware.

Daniel Stenberg (22 Jun 2004)
- reset CURLOPT_HTTPHEADER with NULL

- Moved the "About to connect() to" text to the place where the host name is
  actually known, as before this text lied when used in i.e FTP.

- Gisle Vanem improved the certificate wildcard checks

- Gisle fixed the wildcard checks for certificates.

- Gunter's fix to avoid the notorious YYSTACK_USE_ALLOCA warning we get on
  several platforms/compilers/yacc versions.

- retry to read the sent request a few times if it doesn't exist the first time

- pass an int pointer when it expects an int pointer...

- modified some logging output

- testcurl.sh is dead, long live tests/testcurl.pl!

- This is the old script for testing curl, now use tests/testcurl.pl instead.
  It is more portable.

- read callback return code and fixed the pycurl url

- CURL_READFUNC_ABORT stuff

- Added blurb for the READFUNCTION, including the new CURL_READFUNC_ABORT
  return code.

- added test case 513

- The read callback can now return CURL_READFUNC_ABORT to stop a transfer.

- added CURL_READFUNC_ABORT

- when the client disconnects prematurely, dump the request as received thus
  far

- recent events

- typecasts to prevent compiler warnings

- updates

- refer to the new tutorial man page

- removed libcurl-the-guide from the dist

- libcurl-tutorial.3 is the former libcurl-the-guide converted to man page format

- test 177 HTTP POST with --digest that gets a 302 response

- When doing auth negotiations or authprobing, we only consider HTTP code
  <300 to be good.

- prevent compiler warning

- ispell-buffer

- two issues to remember to fix before next release

- Gisle's "SSL patch" from June 16th 2004, modified by me as discussed on the
  mailing list.

- With David Byron's test server I could repeat his problem and make sure that
  POSTing over HTTPS:// with NTLM works fine now. There was a general problem
  with multi-pass authentication with non-GET operations with CONNECT.

- large file FTP upload bug

- new daring features, not used by any current test

- Keep the upload byte counter in an curl_off_t, not an int. 32bits is not
  enough. This is most likely the bug Jean-Louis Lemaire reported that makes
  2GB FTP uploads to report error when completed.
  Also padded comments to get them aligned again, only for visibility.

- Alexander Krasnostavsky fixed a flaw in the 3rd party transfer code that
  didn't properly check return code.

- post with auth problems fixed

- skip the pid from the logging

- test 176, use --ntlm and POST when the server doesn't require any auth

- added test case 175, use HTTP POST and DIGEST set but the server requires no
  auth

- Fix the auth code to enable us to i.e set DIGEST and then find out that the
  server doesn't require any auth at all and then we just continue nicely. We
  now have an extra bit in the connection struct named 'authprobe' that is TRUE
  when doing pure "HTTP authentication probing".

- we actually build and run fine with libidn 0.4.1 too, so let's not require
  anything newer than that

- lots of multi interface description but also some general updates and additions

- prevent compiler warnings on non-win32 platforms

- added test 174, HTTP POST --anyauth to server without auth requirements.
  An attempt to repeat a reported auth problem. Works for me!

- recent action

- Allow formposting of files larger than what fits in memory by not reading the
  file until it is actually being uploaded.
  Make sure we build and still work with HTTP disabled - the SSL code might use
  the boundary string for some random seeding.

- refuse running the torture tests without a debug build

- moved default: in a switch case to prevent compiler warning that 'request'
  might be used uninitialized

- provide curl_formfree() even when http is disabled, it does nothing then

- use Curl_strcasestr() when checking wildcard cert names

- added Curl_strcasestr() for case insensitive strstr() searching

Gunter Knauf (11 Jun 2004)
- removed unused include path.

- fixed xdc generation, added lib target, load curl.nlm into ring3 by default.

Daniel Stenberg (11 Jun 2004)
- Tim Sneddon made it build fine on VMS again.

Gunter Knauf (11 Jun 2004)
- some more makefile changes.

- respect CVS builds in version string.

- some more makefile changes.

- cosmetic correction.

- converted to UNIX format.

- added timeval.c to the sources for curlx_ functions.

- minor output fix.

- ups! no copy command defined.

- added generation of missing files.

- added generation of missing files.

- make include path overridable.

Daniel Stenberg (10 Jun 2004)
- Gisle Vanem's init patch for Windows

- removed trailing whitespace

- Gisle corrected two comments

- Gisle Vanem's improved verbose output and timeout handling when connecting to
  a host name that resolves to multiple IP addresses.

- build again with disabled http

- Steven Bazyl and Seshubabu Pasam pointed out a bug on win32 when freeing the
  path after a transfer.

- Alexander Krasnostavsky's fix to make libcurl build fine with configure
  --disable-http, which thus builds a libcurl without HTTP support.

- when built with HTTP disabled, provide a curl_formadd() function anyway to
  keep the API complete at all times

- Added CURL_FORMADD_DISABLED when libcurl is built with HTTP disabled

- removed reference to the removed curl_formparse

- Setting CURLOPT_RANGE to NULL disables it.
  Setting CURLOPT_RESUME_FROM to 0 prevents a resumed transfer.

- recent changes

- when producing curllib.dsp, include libcurl.def as a source file.
  An Alexander Krasnostavsky fix.

Gunter Knauf (9 Jun 2004)
- added the new source files.

- corrected copyright.

Daniel Stenberg (8 Jun 2004)
- Gisle's patch that'll allow curl to continue with the following URLs even
  if one transfer fails.

- fix

- James Bursa fixed a RISC OS init issue, removed trailing whitespace

- Marty Kuhrt's VMS fixes

Gunter Knauf (8 Jun 2004)
- corrected defines.

Daniel Stenberg (8 Jun 2004)
- delete trailing whitespace

Gunter Knauf (8 Jun 2004)
- convert to UNIX format.

- converted to UNIX format.

Daniel Stenberg (8 Jun 2004)
- Kjetil Jacobsen pointed out that the CURLOPT_FILETIME option was wrongly
  marked as accepting an objectpoint argument while it actually assumes a long.
  The comment was also grossly misleading. The man page was and is correct
  though.

- time schedule for this year

- prevent compiler warning with picky compilers

- Reverted the previous change and redid it differently as it seemed to not
  work. This is supposed to detect cross-compiling and alert the user, and not
  do the POSIX-check for strerror_r() if it already detected a glibc-compatible
  strerror_r().

- When sending info about which host that sends what, include proper direction
  to/from, based on a suggestion from Alexander Krasnostavsky

- configure fix

- 1 - do better when cross-compiling when checking for strerror_r() - alert
  the user.
  2 - don't check for POSIX-style if glibc-style is found first

- test 173 added: HTTP RFC1867-formpost a file from stdin with "faked" filename

- fixed spell, removed reference to a 'tools' subdir in the curl dir, as we
  don't have one

- Gnter Knauf's netware fix

- Gnter Knauf's netware build fixes

- 3rd party transfers are in CVS now

- updated a comment

- updates

- the test targets won't invoke the test suite if curl is built cross-compiled.
  Pointed out by Chris Gaukroger.

- set an automake conditional for if this is a cross-compile or not

- deleted trailing whitespace

- 7.12.0 introduced IDN support

- Alexander Krasnostavsky's FTP third party transfer (proxy) support

- Mention the python-isque mailing list, don't mention the commit mailing lists
  as they are probably very rarely intresting to the "common people" anyway.

- CURLE_FAILED_INIT is returend when an unknown option is set

- Added example of how to use the upcoming support for FTP 3rd party transfers

- corrected to use the proxy user name for proxy auth, as was just bugfixed!

- Vincent Bronner made the code use the correct user name + password when
  doing proxy authentication.

- getinfo.c is a new tiny example that uses curl_easy_getinfo() to get the
  content-type after a transfer.

- very minor format edit

- CURLOPT_PUT is deprecated

- Made CURLOPT_UPLOAD and CURLOPT_PUT mean the same thing internally (the
  previous difference was not clear nor documented properly). They can now both
  be used interchangeably, but we prefer UPLOAD to PUT since it is a more
  generic term.

- *seven* new options to support 3rd party FTP transfers

- 7.12.1-CVS in progress

- Gisle's adjustments to allow building with lcc-win32

- Gisle made ftp_mkd static

- and we start all over again

Version 7.12.0 (2 Jun 2004)

Daniel Stenberg (2 Jun 2004)
- 7.12.0

- more changes

- Renaud Duhaut corrected the unescaping procedure

- David Byron made this use the mm lib by default, as was previously done. This
  might be done differently in the future.

- --create-dirs clarification

- minor edits

- check for failing strdup()s

- delete trailing whitespace

- fixed curl_easy_duphandle() to properly clean up all memory if any memory
  function fails and it returns NULL

- free() allocated memory when the ares search can't be made

- clear the domains and sortlist when the 'channel' is first created so that
  we can compare if non-NULL elsewhere

- better checks to avoid free(NULL)

- James Bursa's fix to prevent free(NULL) to occur

- the CONNECT issue seems fixed too now

- Mohun Biswas added release-zlib and debug-zlib targets.

- MSVC makefiles updated and an auth problem when using CONNECT

- curllib.dsp works in the latest snapshots

- bugs, changes, sponsors!

- updated with recent stuff

- three new functions in the public API

- added example that makes an upload to a file:// url

- strip trailing whitespace

- Added a new 'bit' in the connect struct named 'tunnel_proxy' that is set
  if a connection is tunneled through a proxy. A tunnel is done with CONNECT,
  either when using HTTPS or FTPS, or if explicitly enabled by the app.

- initial support for "uploading" to file:// URLs

- --proxy-basic added for completeness

- removed some stuff that actually is done now, added the --optionseparator
  idea (not really new, but its better to have it mentioned in here)

- Bug report #948950, excessive amount of file descriptors might crash libcurl

- Massimiliano Ziccardi's updates for the VC6 makefiles

- preprocessor magic around the libidn idn_free() stuff to remain workable
  both with older libidn versions without idn_free() and with libidn versions
  that gets installed without idn-free.h

- checl for the idn_free stuff to remain functionall even with older libidn
  versions

- remove trailing whitespace

- make one call instead of two

- new example proving that the debug callback works even when the multi
  interface is used

- remove trailing whitespace

- multi interface, debug callback

- delete trailing whitespace

- if no errorbuffer string was provided when a return code was returned, use
  the curl_easy_strerror() function to provide one

- IDN is a recognized feature

- fixed a reference

- meta-m runs delete-trailing-whitespace in curl-mode

- delete trailing whitespace

- delete trailing whitespace

- better name

- only idn_free() if built with libidn

- delete trailing whitespace

-  Simon Josefsson added a idn_free() function in libidn 0.4.5 as a reaction to
   Gisle's previous mail. We now use this function, and thus we require libidn
   0.4.5 or later. No earler version will do.

- Robert D. Young reported that CURLOPT_COOKIEFILE and CURLOPT_COOKIE could
  not be used both in one request. Fixed it and added test case 172 to verify.

- While talking to host a.b.c, libcurl did wrongly not accept cookies that were
  set to the domain .a.b.c (that is with a dot prefix). This is now fixed and
  test case 171 verifies it.

- quickfix to avoid division by zero, possibly we should go over all of these
  once and for all

- fixed transfer speed math

- calculate upload and download speed using doubles to keep precision.
  deleted trailing whitespace

- NTLM requires SSL

- cert verify

- added test 170

- David Byron's test case with -F that used to crash

- killed trailing whitespace

- just code formatting and killed whitespace

- language!

- Set CURLOPT_USERAGENT too

- The kill trailing whitespace needs to be set better as this way it takes
  effect globally which isn't nice. Commented it out for now. Display trailing
  whitespace still, to remind me.

- simplified all die messages

- simplified the automake failed message too

- make this script tell that this is the obsolete version, to make it possible
  to detect

- simplified the die-line when aclocal fails, the previous one confused
  the netbsd shell

- + when storing the address in the cache fails, cleanup the resolved address
  properly
  + delete trailing whitespace

- * seed_enough() was converted to a macro to avoid the IRIX compiler warning
  about that passed-in argument not being used.
  * killed trailing whitespace

- if shrinking the buffer fails, use the older larger one

- Peter Sylvester's patch that addresses two flaws in the peer certificate name
  verification:
  
  - when multiple common names are used (as in the curl tests), the last name
  needs to be selected.
  
  - allow comparing with encoded values, at least with BMP and ISO latin1
  encoded T61strings.

- 'make test-torture' in the root now runs a full torture test

- removed debug output and trailing whitespace

- grrr, fix the check again if no ftp server at all is running

- torture testing and a moved CVS repo

- new Curl_done() proto

- I made Curl_done() take a pointer-pointer in the first argument instead, and
  if the connection is killed it blanks the pointer it points to, to make it
  easier to detect usage problems whereever Curl_done() is used.

- better bailing out on memory failure

- When waiting for the second connect, we now use alarm to timeout the waiting.
  This is necessary in case the client never connects or somehow fails to do
  it timely. The timeout used now is only 2 seconds, which might cause problems
  on really slow hosts but longer times are painful when doing torture testing
  on FTP test cases.
  
  I'm not sure how this 'alarm' functionality works on Windows or other systems
  that don't actually have the alarm() function.

- improved the check for our own ftp server

- modified to not leak memory if a libcurl function returns failure, for better
  memory leak detection

- Seshubabu Pasam's format fixes and added notes about DER not working for
  some (SSL-)options.

- make it not leak memory when it returns prematurely

- automatically delete trailing white space on save in curl-mode

- bail out nicely if strdup() returns NULL, removed trailing whitespace

- deleted trailing whitespace

- fixed a warning on IRIX, deleted trailing whitespace

- added string for the new share error code

- Added CURLSHE_NOMEM

- clean up properly on failure to enable easier libcurl leak detection

- new cvs instructions

- enable memory debugging the same way the curl command line tool already does

- memory cleanup and check fix

- check that memory allocation functions truly return good data or bail out

- return on memory alloc fail

- better bailing out in case of no memory

- curl_free() doesn't free(NULL) but just returns

- deal with input arguments as NULL

- return CURLDIGEST_NOMEM when a memory function fails to deliver

- mark a value as alloced when strdup()ed to prevent memory leaks

- bail out when no memory occurs

- Gisle Vamem reintroduced the verifyconnect() call on windows as well, and
  we now use it to provide more info back on connect failures.

- Gisle: minor fix

- no more Curl_ldap_done

- Added two two missing header files I missed when I removed the noinst_HEADERS

- added https.c

- basic https fetching script

- made 'runtests.pl -t' run over all the tests just like other command lines
  Also made -t imply -n to disable valgrind, it runs sloooow otherwise.
  
  This now manages to run all tests OK up to test case 100 (the first FTP one)
  for me.

- James Bursa's patch to avoid free(NULL) (mainly because the libcurl memdebug
  system thinks free(NULL) is badness)

- Check that memory functions return non-NULL or return error.

- make sure the returned pointer is NULL when encoding fails

- clean up and return better on out of memory

- return NULL on out of memory

- Curl_done() and the protocol-specific conn->curl_done() functions now all
  take a CURLcode as a second argument, that is non-zero when Curl_done()
  is called after an error was returned from Curl_do() (or similar).

- return faster when we "hit a wall" while printfing

- general cleanup to bail out nice and clean when a memory function fails
  to deliver

- even if Curl_do() fails, we must call Curl_done() to do proper cleaning up

- improved cleaning up in case of memory allocation failures

- bail out if we can't allocate the new range string, and make use of aprintf()
  instead of using snprintf() + strdup().

- Disable memdebug for the allocs done by the app, unless CURLTOOLDEBUG is
  defined (which it never is atm).
  
  Now, we can focus on making 'runtests -t [num]' work on all test cases and
  we should never leak nor crash.

- new man page

- use size_t better for buffer and alloc lengths

- removed another jhrg-reference in a comment

- Edited comments only.

- The Curl_unencode_XXX_write() function take a ssize_t as third argument, so
  we typecast on invoke.

- Left-over from before the return-code fix. This is probably the code that
  causes xlc and gcc act differently on AIX.

- fixed Curl_open() to not leak anything if one malloc() fails, fix by
  James Bursa only modified by me.

- - Nico Stappenbelt reported that when processing domain and search lines in
    the resolv.conf file, the first entry encountered is processed and used as
    the search list. According to the manual pages for both Linux, Solaris and
    Tru64, the last entry of either a domain or a search field is used.

- revert the accidentally added use of strace

- minor leak in case of error, thanks to "./runtests.pl -n -t 25"

- clear up memory on failure a little better

- make the libidn pointer in the version struct a const

- they're at least 36 functions now

- updated to reflect reality!

- cut out the changelog, it is far from accurate anyway

- added curl_global_init_mem

- curl_global_init_mem() allows the memory functions to be replaced.
  memory.h is included everywhere for this.

- *** empty log message ***

- Make this source code use our internal *printf().
  Also some minor edits.

- Added recent events to the log

- more changes, more news, more people

- another official download mirror

- new attempt at an improved DSP-file generation

- slightly better dealing of bad mem situations

- Moved the fetching of the list of matching cookies to make it easier to free
  that list in case something goes wrong in the function and we must bail out.
  Courtesy of the torture testing.

- curl_slist_append() fixed to clear up properly if a memory function fails

- better detect if/when curl_slist_append() returns failure, and bail out
  accordingly

- if a malloc fails, clear up the memory and return failure

- typo

- the aprintf() versions now return NULL if _any_ alloc along the way failed,
  previously they could return a piece of the string, making it impossible
  for the caller to detect errors.

- better detection for when add_buffer() returns failure, and return when that
  happens

- Curl_hash_add() was modified to clear up better in case of internal failure.
  When failing, it should not tamper at all with the data it was supposed to
  add to the cache.

- checkpasswd() prevents segfault by checking that input argument is non-NULL

- James Bursa's adjustments to make the -t option work for any test case.
  
  The -t is the "torture" test that first runs the test and counts the number
  of allocations performed during it, then it runs the test repeatedly over and
  over again and makes alloc number N fail to verify that we detect and return
  properly from error cases everywhere.

- make Curl_llist_insert_next() fail properly if malloc() fails

- better checking that strdup() works

- Luca fixed the nc= in the digest line since it apparantly should not have
  quotes...

- James Bursa added better error checking for failer memory calls when
  building formposts

- build curllib.dsp from these

- don't use -i when checking for our own server

- James' and Gisle' reports/fixes

- James Bursa changed two error message to use the display-name instead of the
  internally-used name.

- James Bursa's fix to make this deal with malloc(0) as OK to free()

- We don't support any long protocol names so we can use a smaller buffer.
  Also, make sure we have room for the trailing zero, only scan to size-1.
  
  Gisle Vanem reported.

- count the formdata size using a 64bit size if avaialble

- Made the lib/curllib.dsp file get generated automaticly

- don't use a magic define name

- This file is now generated at dist-time.

- Generate curllib.dsp on dist.time from msvcproj.head msvcproj.foot and the
  known source files. Not actually verified to work yet.

- get the display host name properly

- removed two odd comments

- little fixes

- removed the warning if libidn isn't found

- very minor output change

- simplied the creation of new urls

- %ld for long

- int/long fix

- Michael Benedict brought a fix that fills in the errorbuffer properly
  when ares fails to resolve a name. This was fixed before but somehow has
  fallen out again!

- typo AGAIN

- When using the icc compiler, we also ignore remark #1418 "external definition
  with no prior declaration" since this is a habit we have in the code.

- printf %s with plain 'char *', not unsigned ones to silence icc's picky
  warnings

- if no strerror_r prototype is found, we provide our own to prevent picky
  compilers to warn

- removed the unused 'len' variable, made use of the ptr pointer even if no
  extra lib is used to prevent compiler warnings ("variable set but not used")
  on that case

- typecast the unsigned long to plain long to prevent compiler warnings

- unused variable removed

- use %ld to printf now.tv_sec

- curlx.h is a header to add to the release archive(s)

- fixed typo

- Temporary disable the logic that runs gdb on a core dump, as it can't blindly
  assume that the curl file is a proper binary, it is often a script file
  produced by libtool.

- hm, avoid division by zero more carefully with that new percentage math

- Joe Halpin fixed the warning on the typecast from data pointer to function
  pointer!

- Gisle fixed the percentage to work, I adjusted it slightly to not as easily
  overflow on 32bit filesize-systems

- Gisle-fix: constified the 'interface' argument.

- Gisle fix: curl_formparse is gone.

- Gisle fixed: don't reference 'mem' if it's NULL.

- initiate variables properly to default to no auth for server and proxy

- AC_CHECK_TOOL is prolly better to use when checking for ar

- slightly odd fix to prevent -Wunreachable-code to warn

- alert the user if 'sed' or 'ar' couldn't be found, as it might very well
  render a build impossible

- made the progress meter display not overflow even if _very_ large files
  are transfered. The maximum size we support now is 8 exabytes, which equals
  to 8192 petabytes...

- if the values allow it, avoid floting point math for the current speed

- additional typecasts in an attempt to avoid compiler warnings when switching
  from 64 bit types to 32 bit ones

- removed bad free()

- do the alarm time-left math using unsigned longs since that is what alarm()
  returns and uses as input and converting to signed generates warnings and
  actually risks loss of accuracy

- fix_hostname() now (void)s the conn argument to prevent warnings on non-idn
  enabled builds

- ERR_error_string() returns an unsigned long so we should use one of those
  for the return code

- gcc 3.4 now uses the -Wunreachable-code option, I believe we can make older
  ones use this too...

- check the size of size_t for lib/mprintf.c

- prevent warnings when using the gcc option -Wunreachable-code

- make the memlimit final NULL return get written to stderr as wella

- mention the LICENSE-MIXING document

- minor update edits

- added a third URL to the torture testing, this one also hangs at some point
  for a reason I don't know

- multipart formposts should be more streamy

- bail out when an add_buffer() function returns failure

- improved the cleaning up of memory when we fail to resolve names due to
  out of memory (thanks to 'runtests.pl -t')

- check malloc() return code

- removed more leftovers from the formparse function

- removed curl_formparse() from the library

- Gisle made item 38, now there's only one low-prio task left...

- General HTTP authentication cleanup and fixes

- Gisle fixed the problem with ldap_search_s() fails with "filter error": a case
  of using 'lud_filter' after freeing 'lud_dn'.

- improved the name of the test

- Added --proxy-digest, added the standard curl source header to this file.

- fixed the pdf and html for the strerror functions

- Added support for --proxy-digest

- don't free(NULL)

- Gisle Vanem:
  
  Patch for ldap.c under Windows. It works with wldap32.dll as supplied with
  Win-98/ME/2000/XP, so no extra .dlls are required.  I've mostly tested it
  against Verisign's ldap server. Added code in the case there are to many
  responses (rc = LDAP_SIZELIMIT_EXCEEDED) and print only those we got. E.g.
  
  curl
  ldap://directory.verisign.net/?cn,display-name,mail,info?subtree?(cn=*Nelson*)
  
  will print the first 10 results.
  
  My only problem with it is that ldap_search_s() fails with "filter error" when
  CURLDEBUG is defined ?! Maybe someone can spot the error.

- mucho

- Display "exit OK" when the exit code has been verified to be OK, and added
  initial basic valgrind-log scan for memory leaks it could detect.

- deprecated functions

- 25 and 37 are now done, only two low-prio tasks left for the 7.12 release

- recent changes

- updated with more and new info

- these functions are marked to get removed from the public API "soon"

- use the new lib/curlx.h header and modified the code to use all to-become-
  curlx_-functions with the new prefix to prepare this code for the future
  removal of several curl_-functions from the public libcurl API.

- New header file that offers easy access to the curlx_ functions for an app.
  curlx_ functions are NOT part of the offical API, but only available as source
  code functions from the lib directory in case of need.

- support the new libcurl IDN feature, also a first attempt to display a stack
  trace if a test results in a 'core' file and gdb is present

- idn is a new feature that can be made required for a test

- added test 166, formpost with white space in file name

- make the contents able to be any data, the previous stopped at white space

- oops, a bad strtok() was fixed by Luca

- include the full size of the sent response in the log

- Gisle fixed the counting of calloc()s

- Introducing IDN host name testing. Test case 165 requires an IDN-capable
  libcurl.

- fixed the host/proxy name issue when re-using a connection and made IDN names
  work when using proxy by converting the IDN-name to the ACE-encoded version
  before the request-URL is passed to the proxy.

- remove newline from matching pattern

- ignore cnonce lines too as they are based on the current time and will differ
  from time to time!

- encode the correct name

- curl_easy_duphandle() works again with ares enabled

- test 512 does some basic curl_easy_duphandle() testing

- new test case for a simple curl_easy_duphandle() test

- updated to work with the new Digest code

- Luca Altea's major HTTP Digest update

- Gisle made the code use ERR_error_string_n()

- the new way of accessing the host name

- Added LICENSE-MIXING to the release archive

- IDN: Gisle Vanem made the win32 version handle a missing CHARSET environment
  and then figure it out with a suitable windows call.

- outputed elsewhere already

- idn stuff in code and configure script

- we released yesterday, we have heaps of new stuff today! :-)

- provide our own inet_ntoa_r() proto if the system has none on its own

- Made host name and proxy name get stored in a 'struct hostname' and set
  all things up to work with encoded host names internally, as well as keeping
  'display names' to show in debug messages. IDN resolves work for me now using
  ipv6, ipv4 and ares resolving. Even cookies on IDN sites seem to do right.

- without-libidn works too now

- hugehelp.c fix, without-ssl fix

- make the loop use a fixed number of attempts to prevent eternal loops

- added curl_*_strerror

- added doctype tag to get HTML compliant

- We now make sure to only scan for SSL options with pkg-config if we haven't
  disabled SSL with --without-ssl. This previously made the Makefiles use
  the SSL libs even though told not to.

- Include "setup.h" and not "config.h" since setup.h is made to include
  the correct config.h for the platform, and when this is done the USE_MANUAL
  define is properly known.

- my nroff 1.18.1 complained the URL as it contains a nroff combo somehow
  and when I modified it slightly the warning dissappeared...

- oops, .obj not .c!

- improved libidn detection to correct the false positives we got

- made the verbose connect use the proper host name string even when using
  a proxy

- NI_MAXHOST is not generally available, we use plain 256 bytes for the hostname
  instead, its only for debug verbose output anyway

- corrected mistake

- Gisle fixed a mistaken check

- Made defines instead of plain numbers for the Curl_resolv() return code to
  make the code easier to read

- typedef CURL in the curl.h file instead of only having a single useful typedef
  in the separate types.h

- IDN adjustments and host cleanups by Gisle

- no longer include curl/types.h, it serves no purpose

- ignore the curl/types.h header file

- Moved down the ares check again to the bottom of the script since it
  modified the compiler and link options so nothing can be tested for after
  this check, as the c-ares lib might not have been built yet!

- added the new files to the build

- "configure summary"

- Removed the FTPS test cases, they only annoy us as they don't work for anyone
  anywhere. We need to write a better ftps-server for test purposes and then
  we can re-introduced FTPS tests.

- Curl_ip2addr() now takes an in_addr_t argument instead to prevent compiler
  warnings

- removed assignment of variable never used

- Tor Arntsen fixed a 'Statement not reachable'-warning

- Kim Karlsson pointed out that error 57 was wrongly documented

- TommyTam made a patch to handle stdin redirection for win32.

- some fixed, one removed, edited some. 7.12.0 in progress.

- the recent commits explained

- Major hostip.c cleanup and split into multiple files and easier #ifdef
  usage.

- supports showing "IDN" as a libcurl feature, now outputs the features
  in alphabetical order

- added libidn awareness

- added many comments

- major update of the error strings

- added comments

- added function headers and comments

- --with-libidn[=PATH] is now supported

- the next release is planned to become 7.12.0

- start all over again

Version 7.11.2 (26 Apr 2004)

Daniel Stenberg (26 Apr 2004)
- 7.11.2 coming today

- updated the warning text when SSL is explicitly disabled

- USE_MANUAL is now defined by default

- moved older changes to the CHANGES.2003 file

- disable-manual

- make the generated hugehelp.c file use the USE_MANUAL define so that it
  will be properly built with configure --disable-manual even if the source
  file is already present

- test164 HTTP range with multiple ranges

- removed a memory leak when doing a windows threaded resolve and it failed

-  Gisle Vanem found and fixed a memory leak when doing (failing) Windows
   threaded name resolves.

- only a minor comment/format change

- Replaced Curl_FormReadOneLine with Curl_formpostheader as that is the only use
  for it. It saves one extra copy of the header.
  
  I also added comments for several functions in formdata.c

-  o --proxy-ntlm now checks if libcurl supports NTLM before using it
   o minor --fail with authentication bugfix

- --proxy-ntlm fix and test case 163

- Made --proxy-ntlm check if the underlying library actually supports NTLM

- minor format fix

- added test 163 - a simple test case that use -F field<file, to verify that
  we can pass on "odd" characters (newline, CR, tab) like this.

- No longer uses the valgrind option '--logfile-fd', we use the --logfile
  option instead (even though it appends the pid to the file name, making it
  harder to figure out its name to parse it after a test has run).
  
  Also made sure we only use valgrind for the actual test command command lines,
  not when for example running curl to detect if there are any already running
  servers are present etc.

- define the obsolete options to different values to prevent "duplicate case"
  situtations in bindings that still have switch() cases for them

- require SSL as otherwise NTLM doesn't work!

- missing brace

- allow newlines in the contents when doing -F "var=[contents]"
  Robert Marlow reported.

- - David Byron found and fixed a small bug with the --fail and authentication
    stuff added a few weeks ago.  Turns out that if you specify --proxy-ntlm and
    communicate with a proxy that requires basic authentication, the proxy
    properly returns a 407, but the failure detection code doesn't realize it
    should give up, so curl returns with exit code 0. Test case 162 verifies
    this.

- allow newlines in the contents when doing -F "var=[contents]"

- removed Curl_ftp_quit() as it was turned into a static in ftp.c

- If a transfer is found out to be only partial, libcurl will now treat that
  as a problem serious enough to skip the final QUIT command before closing
  the control connection. To avoid the risk that it will "hang" waiting for
  the QUIT response. Added test case 161 to verify this.

- If only a partial file was transfered, we consider that a fatal problem so
  we won't try to QUIT the control connection and risk "hanging" waiting for
  a response. Test case 161 verifies this. The quit-sending function was
  also made static.

- Added comments

- modified how valgrind is run to make sure that file handle 3 exists when
  we tell valgrind to use that to send the logfile to

- danish mirror

- Gisle's items

- include unistd.h as well for the close() proto on some platforms (like Tru64)

- typecast the tolower() argument to an int to prevent compiler warning

- typecast tolower/toupper arguments to int to make picky compilers complain
  less

- test case 160 "should work" now

- Fix the "lingering close" problem when re-using a connection, as test case
  160 shows.
  
  We got no data and we attempted to re-use a connection. This might happen if
  the connection was left alive when we were done using it before, but that was
  closed when we wanted to read from it again. Bad luck. Retry the same request
  on a fresh connect!
  
  Deleted the sockerror variable again, it serves no purpose anymore.

- increase the headerbytecount for incoming "headers"

- log the WAIT command

- cleanup leftovers

- test160 - for a more controlled testing of the case where libcurl starts
  to re-use a connection that is closed when re-used and libcurl should then
  make a new fresh connection and use instead

- Cleaned up hostname/name/gname and path/ppath confusion. Removed the fixed-
  length limit of the hostname part of the URL.

- new mirror and one that changed domain

- make the first response get a "connection: close" header as that is how
  most 1.1 connections will be closed. The case where it gets closed anyway
  is subject for a new separate test.

- changed the logging to work when the logfile is removed during testing

- Make the server include "Connection: close" in the headers of the replies
  it actually will close. This is after all what HTTP 1.1 says a server should
  do.

- Gisle Vanem corrected a mistake in a recent progress fix

- Gisle Vanem: patches to make sws.c compile under MingW/MSVC is
  attached. And some cosmetic fixes.

- Gisle made a failed connect output the reason for it

- NDEBUG should not be defined when CURLDEBUG is

- adding issue 36 to be fixed before release

- don't display the . and .. files when dumping the log/ contents

- remade the logging function to better deal with removed logfiles during
  the execution of the tests

- issue 31 - fix windows multi interface is now corrected

- clarified that select() timeouts should always remain rather short

- my test suite edits

- change the log format to look similar to sws
  added various logging info

- clean the log directory between each single test, so that we can better
  display all logs and only logs with relevant data when a test fails and -p
  is used.

- ftp->dirs[] is no longer terminated with a zero entry but ftp->dirdepth
  should be used

- removed the fixed dir depth limit in the FTP code

- two ipresolve fixes

- format fix

- asking for CURL_IPRESOLVE_V6 when ipv6 addresses can't be resolved will
  now cause the resolve function to return NULL immediately

- Gisle Vanem made the -4/-6 actually get set too

- Curl_wait_for_resolv() could hang due to the bad timeout timer resolution and
  some bad thinking on my part.

- several changes

- display interesting log files on failure, if -p is used

- enable verbose as well

- Added test case 511 in an attempt to repeat bug report #934666 "storage leak
  in ftp.c", but it shows no leaking.

- minor format fix

- eh, these can't be used for poll()! ;-)

- additional info

- Gisle Vanem's fix that makes the multi interface work on Windows again even
  when not using ares.

- spell fixes

- more news

- proper typecast to prevent compiler warning

- removed the BUGS section since it offers nothing good

- 1.2.0

- remove an long time #defined struct member and use the actual "real" name
  instead to make it easier to find/read

- Moved the 'tcp_nodelay' member to the proper 'UserDefined' struct within the
  sessionhandle to make the duphandle() function work as supposed. Also tried
  to start document functions the doxygen way (in the headers of the functions).
  Can't make it work though...

- move issue 35 (hostip.c cleanup) forward, I don't feel like doing that now

- full-test passes -p to runtests as well to get more details in case of failure

- Initial support for dumping the contents of the files in log/ when failing
  when -p is used. For easier bug-hunting of autobuild failures. This still
  only shows what files that are present in log/, as I believe we need to
  filter which files we show on a failure.

- somewhat safer typecasting in case sizeof(long) != sizeof(void *) (is there
  even such platforms?)

- David Byron's patch for MSVC builds with zlib

- updated to not include the msvc-generated files

- when checked out from CVS, run this to generate the proper scripts

- Dirk Manske increased the resolution for what the CURLINFO_*_TIME return.

- we're working on 1.2.0 now

- added test 159, use --ntlm together with -0

- getting only a 100 Continue response and nothing else, when talking HTTP,
  is now treated as an error by libcurl

- --limit-rate using -d or -F does not work

- renamed the strtoofft() macro to curlx_strtoofft() to adjust to the curlx_*
  concept, and added lib/README.curlx to explain details about it

- Use curl_off_t for the limit rate values to support REALLY huge values on
  such platforms that support large files.

- mention getting windows builds to work after rearrangements

- Moved long-standing issues over from TODO-RELEASE to the more long-term TODO
  file.

- the memory leak on windows have been addressed

- require ssl since ntlm needs it

- New authentication code added, particularly noticable when doing POST or PUT
  with Digest or NTLM. libcurl will now use HEAD to negotiate the authentication
  and when done perform the requested POST.

- mention the man page updates from the other day

- the pack_hostent() proto isn't used/needed with ipv6 is enabled.
  
  time to restructure this source file!

- Gisle Vanem's fix for bug item #927979 reported by Nathan O'Sullivan.
  
  Good enough?

- Added the curl source header and changed some comments

- improved --limit-rate functionality, partly by the new use of curlx_tvnow()

- Gisle Vanem caught me breaking the windows version of Curl_strerror()

- provide these functions as curlx_* ones as this enables the curl app to
  re-use these sources and functions for subsecond resolution timing

- up-to-date with reality

- added HAVE_GETTIMEOFDAY, we need it for better time resolution

- typecasts to please picky compilers checking the printf() format string

- one change, three bugs, one credit

- the last couple of days

- two issues to fix before 7.11.2, one issue to fix befor 7.12.0

- remove the general use of sys_nerr

- generated files, no need to keep in CVS

- prepend the man3 dir to the file name to work better.
  Robin Kay pointed this out.

- edits, mainly to make the generated html output nicer

- minor edits

- Dirk Manske's feedback:
  * bring back subsecond resolution to CURLINFO_TOTAL_TIME
  * Fix the Curl_pgrsDone() so that the final progress update is shown properly

- Andrs Garca's updated mingw makefiles

- if select returns -1, bail out of the loop

- Only check that the c-ares lib is valid if we don't use the "embedded"
  directory. The provided ares dir is probably up-to-date, but more importantly
  it is often not built yet at the time when this configure script runs.

- When ares is enabled, we now check for the ares_cancel function to verify
  that we use a library that is recent enough to build with the latest libcurl.

- Dirk Manske's fix that makes sure we cancel the ares resolve when we time out
  from a name resolve. Without this, we leak memory!

- Dirk Manske's ares_cancel() function was added.

- edited slightly, point out our new mailinglist

- remind us about cvs tagging when we've built a release archive

- removed my previously attempted fix for ares timeouts, not needed

- Applied Joe Halpin's bugfixes to the NI_WITHSCOPEID test program.

- Dominick Meglio man page fixes

- Use the new HAVE_NI_WITHSCOPEID define instead of merely checking for the
  existance of NI_WITHSCOPEID since some platforms have that define but still
  can't function with it set.

- issue 30, digest re-negotiate works now!

- recent changes

- updates and David Byron's spellfix

- Roy Shan fixed a case that prevented ares name resolve timeouts to occur.

- we're working on 7.11.2-CVS right now

- HAVE_NI_WITHSCOPEID spelled right!

- Remove the elapsed time from the most recent select() only.

- The asynch name resolve methods now all use CURL_TIMEOUT_RESOLVE for
  the specific time to wait for a resolve. The definition is at the top of
  this source file.

- Dirk Manske found out the Curl_wait_for_resolv() timed out too early.

- added swsbounce

- added include to fix warning

- * Fixed a memory leak when doing repeated re-negotiations.
  * Made the incoming line parser more forgiving to allow "name=contents" pairs
  where the contents isn't within double quotes.
  * Made the digest code return CURLDIGEST_BADALGO if a requested algorithm
  isn't supported by the code.

- test 153 tests Digest authorization and stale=true stuff

- Added "swsbounce" magic: if this keyword is present in a <data> section it
  sets the "swsbounce" magic mode. If there follows a request for the SAME
  test number and the SAME part number, this mode will make the server bump
  the part number internally and thus return a different <dataNUM> section
  than it otherwise would.
  
  Test case 153 uses this in case you need an example. It is pretty involved
  and hard-to-use, but then the situation is pretty special over all. Enjoy.

- Moved the NI_WITHSCOPEID magic #ifdef to the top of the file and made sure
  we use the NIFLAGS properly on both places in the code that use getnameinfo().

- Fixed how the user name is extracted from http_proxy environment variable
  when set.

- Andrs Garca fixed a warning in the ioctlsocket() usage.

- modified the NI_WITHSCOPEID to use an AF_INET6 socket immediately and
  added some more debug output to make it easier to detect failure reasons
  in the autobuild logs

- CURLDIGEST_BADALGO is a new return code from the digest code

- Dominick Meglio fixed a missing comma

- one issue less

- typecast setsockopt()'s 4th argument to void * to make compilers complain
  less

- adjusted to the new dns cache function to hide more hostip internals

- Lots of comments added an clarified. Added timeout for the ares version
  of Curl_is_resolved() to address Roy Shan's reported problem.

- added stale boolean to the digest struct

- first attempt to support stale=true

- Added CURL_CHECK_NI_WITHSCOPEID that checks if NI_WITHSCOPEID exists and
  works. No code actually uses the HAVE_NI_WITHSCOPEID (that a positive test
  results in), but this is still only for testing purposes.

- Dominick Meglio's new ares_expand_string() function

- when checking the automake version, cut off trailing "-p[whatever]" from the
  version string before doing the version number checks.

- if 0'ed out a code section that uses __FUNCTION__ etc, used for debugging
  the new "fail with auth" code

- init the dns pointer to NULL for clarity

- added more comments for what the functions return

- mention the fact that you can append a new CA cert to the existing bundle too

- David Byron's patch was appplied to make CURLOPT_FAILONERROR work nicely
  even with authentcations such as NTLM or Digest enabled. Test cases 150, 151
  and 152 were added to verify the functionality.

- David Byron's new test cases for the --fail and auth stuff.

- David Byron made CURLOPT_FAILONERROR work with authentications such as NTLM
  or Digest.

- 'authdone' was added to the sessionhandle and thus was removed from the
  argument to the NTLM function(s)

- David Byron added 'authdone' to the SessionHandle.

- these are now in the packages/vms dir

- The select() timeout is better not static since some implementation actually
  might change it. I don't *think* it does it when the timeout is 0,0 but it
  is better to be sure...

- issue 24 is fixed by making sure the time fields use a static width

- several noticable recent changes

- changes changes changes

- All test targets now run 'make all' before they prcoeed with the actual
  testing so that all test files are build first properly. David Byron reported.

- Gisle Vanem's djgpp/MS-DOS updates

- fix to figure out the "real" windows path when built and run with mingw
  Andrs Garca helped out!

- re-indented to use curl-standard source formatting

- netinet/tcp.h may require netinet/in.h to be include before

- use the correct struct

- Tor fixed a left-over from the ip argument to setnodelay

- Gisle Vanem:
  
  A patch to bypass MS' sillyness with regard to IPv6 and getaddrinfo().
  
  The CURLDEBUG part is to avoid redefinition warning caused by memdebug.h. If
  ENABLE_IPV6 isn't enabled, it doesn't matter since we never call
  getaddrinfo(). Allthough we could to support weird protocols like SOCK_RDM
  that Win-2K/XP has.

- some more password blurb

- check for netinet/tcp.h precense before actually including it

- removed the ip number from the notcpdelay function

- get the version number from the new curlver.h header file

- localtime and gmtime are not thread-safe on newer AIXes either so we force
  a check for there *_r-versions too

- force recent AIX versions to check for strerror_r

- only output one line about the nodelay even if it fails

- win32 doesn't need and even doesn't build if we extern declare sys_nerr

- include the strerror.h file without curl_ prefix

- strerror without prefix

- cut off 'curl_' from the strerror file names

- tcp-nodelay patch by Joe Halpin

- so there are at least two different strerror_r() versions and our brand
  new configure script detects them and now this code acts according to what
  API that was detected

- Tor Arntsen fixed how this is invoked

- strerror_r() detection changes:
  1. Try with _THREAD_SAFE instead of _REENTRANT, as AIX seems to require it
     and if _REENTRANT is required we should already have it set since one of
     the previous tests.
  2. Added API-detection for what kind of strerror_r() that is provided. The
     POSIX style or the glibc style.
  
  Tor Arntsen provided the necessary feedback these changes are based upon.

- detect daily snapshots using the new path for this test

- make clean now removes *dist files too that might be leftovers from
  'maketgz'

- invoke this script via env, as it is more likely to exist at a fixed path
  while perl often is installed in /usr/local/bin or elsewhere

- added curl_strerror to the build

- extern declare the sys_nerr variable. Required on Solaris at least.

- Always include setup.h as the first header file.
  Added a more verbose comment about what strerror_r() can set errno to in
  case of failure.
  This file still doesn't build on Solaris due to a missing 'sys_nerr' symbol.

- Added protos for the upcoming curl_*_strerror() functions

- missed the new header file

- Gisle Vanem's fix to replace the bad use of strerror(). This introduces
  Curl_strerror() that attempts to be thread-safe _and_ works on Windows too!

- new header file - for Curl_strerror()

- better comments, added some more variable types we use in the font-lock

- Tor Arntsen's major ispell patch

- Tor Arntsen's mkdir-fix to make this run with perl 5.0005

- Avoid doing chdir .., as it breaks the ability to use symlinks properly.
  chdir to absolute directory names instead. (this flaw exists in the shell
  version too)

- added check for strerror_r()

- include curl/curlver.h instead since this only needs the version defines

- error messages and new test script

- we are progressing

- distribute testcurl.pl too starting now

- Greg Hewgill's version of testcurl.sh rewritten in perl for greater
  portability. I put it in this directory instead of the root since I think
  perhaps it makes more sense.

- keep current_speed as an curl_off_t for better precision at higher speeds
  if large file support is available

- switch() on the right variable!

- curl_strequal() returns int, keep return variables in an int

- make the variables that hold the result of strlen() size_t

- stricter variable type usage

- variable type usage cleanup to please picky compilers

- get strlen() results in a size_t, delete 'register'

- made time2str() use longs internally instead to prevent compiler warnings
  when converting to ints

- added explicit typecasts to prevent compiler warnings on variable conversions

- If localbind fails, provide a more portable error message.

- minor update by Kevin

- src/version.h was not properly made!

- progress meter fix, CURLINFO_CONTENT_LENGTH_DOWNLOAD fix, cygwin package fix

- it actually fits to make a NNNd NNh display so this can be used up to
  999 days

- Fixed the time fields no never get wider than 8 letters. They can now switch
  to a "days + hours" or even "just days" display if the time value is very
  large. I also switched several calculations over to fixed-point instead of the
  previous doubles.

- int/size_t cleanup

- minor variable type cleanups

- minor edits to make picky compilers whine less

- changed the long to int typecasts to see if icc 8.0 complains less on this

- Makes CURLINFO_CONTENT_LENGTH_DOWNLOAD work even if CURLOPT_NOBODY is set
  true.

- Kevin Roth's updates to handle a new requirement from the Cygwin folks to
  package man and doc files in a slightly different location.

- crap files to get the dirs made when checked out from CVS

- container to get this dir made

- Make the axp/README ia64/README vax/README files get included as well.
  They're 0-bytes files, but make the dirs get created!

- fixed the ntlm problem with longish passwords

- vms fixes committed

- Enabled 'NT responses' in the NTLM type-3 message.

- fixed /I "." for the debug build too

- add /I "." to include ca-bundle.h properly

- issue 27 fixed, moved libcurl version defines to its own header file

- include the new curlver instead, since all this wants is the version info

- Introducing curl/curlver.h for keeping the curl version info only.

- files moved here from the $ROOT/src dir

- removed deleted files

- Marty Kuhrt's adjustments for a cleaner VMS build

- Marty Kuhrt's VMS updates

- recognize and use ACLOCAL_FLAGS if set (Thomas Schwinge patch)

- use tabs, not spaces!

- Added the Version 7.11.1 marker

- starting a new cycle

Version 7.11.1 (18 Mar 2004)

Daniel Stenberg (18 Mar 2004)
- irix configure fix and a msvc project file update

- Mitz Wark's reported Digest re-negotiate problem is issue 30.

- For IRIX systems we must pick the "correct" lib dirs for the particular
  libs we want. $libsuff is the magic variable that contains a suffix (which
  might be blank). Tor Arntsen brought details and verified this fix.

- added http_ntlm.[ch] and inet_pton.[ch], pointed out by Watz

- Gnter Knauf's update, mainly converted to plain old C comments.

- new netware-related files added to the distribution

- Gnter Knauf's NetWare changes.

- nonsense comments removed

- mention yesterday's man page update frenzy

- issue 29 has a bug report mentioning details

- removed the min() macro define

- random updates

- added the CA bundle default path, and mention the risk that the server you
  try to talk to may be an imposter

- ntlm and long passwords

- if the global_init() is called from within curl_easy_init() and returns
  an error code, we now make curl_easy_init fail and return NULL.

- ignore these files

- automake file for this dir

- provide URLs to two patches mentioned

- NTLM fix

- better formatting to create fine links in the web version

- more formatting fixes

- refer to function names better to enhance the HTML output

- Initial commit of the first attempt to make three new *strerror() functions.
  No protos in the headers yet and no docs.

- windows builds now report a slightly different "OS" string

- check for m4 version in buildconf

- random formatting updates to look better in HTML version

- use .NF for the struct part to looke better in HTML
  format some function references properly

- more fixes

- better formatting of functions to get better links in the web version

- better mentioning of other functions to create proper hrefs in the web
  version

- build_vms.com is removed from here

- Marty Kuhrt's VMS updates

- Added the new vms subdir in the packages dir

- new vms subdir

- not used anymore since Marty Kuhrt's recent VMS updates

- Marty Kuhrt's provided files for the VMS package

- Check for a GNU version of m4, since autoconf won't run nicely without one.

- fix signed and unsigned warnings

- postsize is off_t now, so we typecase it to int before doing normal printf
  with it (knowing it won't be larger than what fits in an int)

- the postsize is an off_t so use the proper printf format to output the
  content-length when doing multipart posts

- more variable type fixing for the huge posts

- newer c-ares release

- more variable type fixes for the large POST support

- Made the 'postsize' variable an off_t type to be able to hold large file
  sizes if desired

- minor variable type fix

- CURLOPT_POSTFIELDSIZE_LARGE is added in 7.11.1

- ignore aclocal.m4

- Added CURLOPT_POSTFIELDSIZE_LARGE to offer a large file version of the
  CURLOPT_POSTFIELDSIZE option to allow really big HTTP POSTs.

- David Byron's fix to clear outs.filename

- dl and ulspeed are now curl_off_t so typecast them to double when we
  return their values

- Optimize the way libcurl uses CWD

- Made max5data() take a curl_off_t size as argument instead of double. Should
  make the progress meter more accurate for large files. Also made the sprintf
  usage in that function avoid floating point.

- added that header fiddling the msvc users will enjoy

- Gisle Vanem's fixes to use CURL_SOCKET_BAD more instead of -1 for sockets.

- don't let the EINTR stuff build on windows

- Use more curl_off_t variables when doing the progress meter calculations and
  argument passing and try to convert to double only when providing data to the
  external world.

- use the new OS define from lib/config-win32.h

- make loop variable size_t as well when looping to a size_t limit

- curl_socket_t mistakes cleanup

- turn niflags into a define named NIFLAGS

- added the Estonian one, removed the cyberservers one since it is dead and
  they don't respond to email

- fixing

- Gisle Vanem improved build on Windows.

- Nah, ignore the OS define in here. This is being included by ares and it
  certainly doesn't need the OS define.

- ignore the icc warning 981 "operands are evaluated in unspecified order"

- Minor edit to avoid an unreachable break and to remove the extra {} body
  within the switch.

- keep the number of bytes read in a size_t variable

- strequal() returns int so we typecast the return to bool when we store the
  result as bool

- store times in time_t

- Jeff Lawson fixed the SSL connection to deal with received signals during the
  connect.

- Now requires an OS string defined by the config*.h file

- make windows builds use the OS string "i386-pc-win32" instead of just "win32"
  to make it more like other OS strings

- use size_t for string lengths

- Make sure SIZEOF_CURL_OFF_T is defined before we check for it being > 4.
  It is only undefined when this file is included by others (like ares) and
  in those cases it doesn't matter.

- removed the #if 0'ed pragmas that disable warnings on msvc

- moved the curl_socket_t typedef downwards

- added the new socket type

- Use curl_socket_t instead of int for holding sockets. The typedefs and
  defines are in setup.h.

- Added -I$(top_srcdir)/include, since lib/setup.h might include files from
  the external curl include dir.

- only build with the windows threading trace code if
  DEBUG_THREADING_GETHOSTBYNAME is defined

- explicit typecast to visualize that we really want the result of the
  operation as a size_t

- Tor Arntsen's fix to a AIX build problem

- remove ares/aclocal.m4 before cvs update to prevent bad conflicts

- mingw has str(n)casecmp() functions

- timezone dummy to build better on Windows - Gisle Vanem

- Gisle Vanem fixed the bad argc check

- the error message stuff is for 7.12

- Andrs Garca-fix to make it build with mingw

- added HAVE_IOCTLSOCKET here

- this is generated, removed from CVS

- don't compare signed/unsigned

- Removed John Clayton's really odd bug since its never been reported again and
  it was quite a long time since he experienced that one.

- mention error 64

- the largefile for version_info fix

- fread() returns a size_t

- use curl standard source formatting

- typecast enum to int to make it printf() properly

- variable type fixes

- Moved the error message buffer into the glob struct as well.

- Commented the Curl_read() arguments.

- size_t/int fix

- strlen() returns size_t

- we ignore the ICC warning 1419 as well

- waitconnect() takes the timeout argument as a long

- store size as size_t
  use %zd when outputting size_t

- don't use 'register'
  make strtol() returns get stored in long variables
  don't mix size_t with int

- size_t/int/long fixes

- we must not only support long long for Largefile to work, we must have
  a curl_off_t type that is larger than 4 bytes

- issue 12 fixed, the final known outstanding issue to be done before 7.11.1

- issue 12 fix

- another include to prevent warnings

- two fixes, one new mirror

- clonk

- more fixing to make the progress/getinfo stuff to work properly when doing
  file: transfers too

- clearly tell that these are ftp response timeouts

- Major rewrite of the test HTTP server to allow more fancy features to make
  better tests with the issue12-patch applied.
  This change also includes Andrs Garca's win32-fixes.
  Made the logging look better/more readable in sws.log

- 'make clean' should only remove the generated html files, index.html is not
  one of them!

- mention the D binding

- Multiple updates, most of them being proper formatting to create nice html
  links in the web pages, but also additional facts and removal of old crap.

- issue 12 fix is pending and is working in devel
  added issue 24 - fix the progress meter for large files on slow networks to
  not wrap

- When following to a new URL, we must make sure to call Curl_done() first,
  since the current connection must be taken care of properly before we move
  on. Christopher R. Palmer reported a problem he found due to this mistake.

- Andrs Garca's patch to prevent warnings while compiling with mingw, mainly
  because it is now possible to have both WIN32 and HAVE_CONFIG_H defined.

- use size_t for the data, but keep the protos use ssize_t to better fit
  with the existing transfer.c code

- include the proper header file too

- fix progress data to be updated properly for file: transfers, as reported
  by Jesse Noller

- prevent harmless compiler warning

- David Byron's version resource fix

- new "version resource" file for windows builds

- show curl --version output as well

- largefile bit for the version_info and now winsock 1.1 only

- David Byron's work on making libcurl only require winsock 1.1 on Windows
  machines.

- three days of changes

- more variable type cleanups

- our timeout values are longs while 'tv_sec' is int

- make the backup variable of the same kind as the data it backups! ;-)

- some more size_t usage, and two added typecasts when converting from size_t
  to long (MIPSpro warnings)

- tv_sec is an int, so we explicitly typecast the result of long - long to
  an int when we assign it.

- attempted typecase to silence the MIPSpro warning:
  
  cc-1506 cc: REMARK File = ../../curl/ares/ares__read_line.c, Line = 46
  There is an implicit conversion from "unsigned long" to "int"; rounding, sign
  extension, or loss of accuracy may result.
  
  if (!fgets(*buf + offset, *bufsize - offset, fp))

- #ifdef #define #undef circus to prevent compiler warnings on #if operations
  with undefined variables.

- removed include stuff now handled by test.h

- We let this file include more generic headers that many libtests need anyway
  to reduce the amount of #include stuff in each single libNNN.c file.
  unistd.h was added to prevent select() warnings on FreeBSD

- Tom Bates' adjustment to build on his nsr-tandem-nsk.

- rename struct FILE to FILEPROTO, to prevent it from causing trouble with
  the plain old FILE typedef.

- Dan Fandrich fixed some GSS detection flaws

- corrected the reuse_fresh condition

- large file in jan 2004

- various updates

- two items fixed, one so old I don't think its valid anymore

- display src/config.h as well after configure as run

- Yet another curl_off_t printf format attempt, we now exclude the %-letter from
  FORMAT_OFF_T to allow additional options to get specified, like with '"%5"
  FORMAT_OFF_T'.

- Define CURL_NO_OLDIES to prevent us from getting obsolete stuff defined.

- CURLOPT_MUTE is obsolete since a long while, we don't need to set it!

- clean the html and pdf files

- use FORMAT_OFF_T instead of CURL_FORMAT_OFF_T to reduce the complexity of
  having to redef that name

- - we switch to simply use FORMAT_OFF_T internally
  - Also, we must not assume that SIZEOF_CURL_OFF_T is defined, as this file
  gets included from the ares dir at times and then it isn't defined.

- the CURLOPT_FRESH_CONNECT fix

- a fair day's work!

- Use CURL_FORMAT_OFF_T for printf()inf curl_off_t variables.

- Now uses CURL_FORMAT_OFF_T instead of %Od
  Fixed the check for bad resumes. Made test case 99 work and proved a bug
  in test case ... eh, was it 32?

- large_file is a new feature we can require for a specific test

- support 'large_file' as a feature to require for specific tests (such as
  test 99)

- check for CURL_VERSION_LARGEFILE in the feature bitmask

- set CURL_VERSION_LARGEFILE if we support large files

- define ENABLE_64BIT if we have enabled 64bit large files
  define our internal CURL_FORMAT_OFF_T define, we don't use the global one!

- fixed the test code to work

- * Added CURL_VERSION_LARGEFILE
  
  * If CURL_NO_OLDIES is defined, we hide all obsolete functions/options.
  
  * CURL_FORMAT_OFF_T is defined for portable printf()ing of curl_off_t types
  (although not with curl_mprintf()!)

- added test 99, very basic initial large file test

- global dns cache is not nice, we consider it obsolete starting now

- Ignore the dreaded aclocal warnings on underquoted definitions that the
  recent autoconf annoyingly introduced.

- Perhaps -Wundef is better on gcc versions after 2.95, since the autobuild
  on FreeBSD gives us lots of warnings in system headers and I suspect this
  option is what causes them!

- When setting aggressive pedantic compiler options, display what options
  that were set. For easier debugging/changing of this.

- removed an unnecessary shift and splut up som weird two-statements-per-line
  code

- Use the z-option to printf %d for size_t printf. z is supported by the
  libcurl *printf and by Linux printf(). This should make the code work nicely
  even for 64bit size_ts.

- Support 'z' for size_t-sized integer printing, as in %zd or %zx.

- Only consider the fresh-connection option on the first connection made, not
  on followed redirections etc. This should fix the bug #905365, which caused
  NTLM to fail with the option set.

- Moved two 7.11.2 issues over to the more general TODO docs.

- minor spellfix

- intend the top-level blurb to make it easier to discard it from the web
  site output

- Tor and David

- mention how to make a curl handle use the share

- Only attempt to send the FTP QUIT command if we actually have a FTP struct.

- in Curl_disonnect(): call the protocol-specific disconnect function before we
  unlink the "current" connection struct from the connection cache.

- Report the correct size when 'verifiedserver' is requested.

- Dirk Manske fixed the attempt to install the removed errmem manpage

- using roffit 0.6 we can get <a href> links with the --mandir option

- formatting update to produce better links with the new roffit version

- elaborate on the URL option

- minor size_t fix to kill a warning

- fixed some more size_t/int/long warnings and removed a few CMC comments

- Mark obsolete options with OSBOLETE in a comment on the same line, to make
  it easier to exclude them with grep, when grepping for options.

- ispell by Tor Arntsen

- updated the debug option function from curl's acinclude.m4

- remove the number of obsolete options

- Added a few options that were still not documented. Now I believe all options
  mentioned in the current curl/curl.h header file (that aren't marked as
  obsolete) are present.

- updated with recent events

- issue 21 is now history

- Joe Halpin made the FTP code send 'QUIT' on the control connection before
  it disconnects the TCP connection, like a good ftp client should!

- we need to hide this warning since it otherwise appears on all verifiedserver
  requests to the ftp server!

- Kill the server when this test is done, as other FTP-tests sometimes
  have problems otherwise.

- fixed a "comparison between signed and unsigned" warning

- David Byron's fixes to make the latest curl build fine under MSVC 6.

- this works like buildconf + configure does on unixes

- adjusted to work with the modified fopen() line and the new calloc line

- Gisle Vanem's added support calloc()-debugging and outputting mode for
  fopen() as well.

- use calloc instead of malloc and we won't have to memset() the struct

- When this is verified to be a CVS tree, we remove the two generated source
  files from the source dir to make certain they're generated in the build
  process.

- Clear up int/long/size_t/ssize_t usage a bit

- minor fixes to avoid MIPSPro pedantic warnings

- don't mix int and size_t, it generates warnings!

- Make icc ignore "invalid format string conversion" warnings as well. They
  appear because of our home-grown option '%Od' for the curl_off_t output.

- use %ld when printf()ing long variables (and removed use of 'register')

- added the ever-present source header

- Don't call the lock/unlock functions if they are NULL. They can still be
  NULL without violating protocol.

- Use __INTEL_COMPILER instead of __ICC to the cpp to detect the Intel icc
  compiler!

- runtests.pl now provides the srcdir to the ftpserver so that it can pass
  that to loadtest properly.

- modified loadtest() to produce better error message when it fails to load
  a test file

- The build logs were created in the "wrong" dir and thus never removed
  after use, this is an attempt to fix this.

- today's work

- typecast to int when printfing CURLcode

- use %ld when printfing longs

- disable the use of long double, we don't use it

- if ares is present, run aclocal in that dir before autoconf is run

- added the better debug option logic from curl by adding acinclude.m4 to the
  configure stuff

- Based on a patch by Greg Hewgill I modified how long long is used, as we
  can use a 64bit type with MSVC that is a long long equivalent.

- set debug options when using the icc compiler

- better formatting of the share options

- mark the function name

- added CURLOPT_SHARE

- Moved most of the set-debug-options-depending-on-compiler logic to the new
  CURL_CC_DEBUG_OPTS function in acinclude.m4

- Output $CC and $CFLAGS as well. A Tor Arntsen patch.

- Don't check for HAVE_ defines in this header file, it is meant to be public
  and we can't depend on configure-defines in it. This logic is borrowed from
  the public curl headers.

- fix

- Dan Fandrich fixed a minor flaw in Dominick's fix!

- check for a few basic header files

- include sys/select.h

- fixed some warnings in the (both new and old) base64 usage

- features no one seem to care much about are now moved over to the 7.11.2
  release

- make newer MSCV7 compilers use _strtoi64() as a strtoll() replacement

- limit rate and windows timeouts

- ares_free_errmem is gone

- unused and now removed

- Removed getpass from here. The fact this still was present here indicates
  that this file is out of date!

- curl_off_t is 8 bytes big on windows

- switch the arguments according to the c source

- oops, the decode() function got its arguments reversed in my cleanup
  operation!

- correct the input data structs

- use size_t to keep strlen() results

- simplied how create_hostcache_id() is used, and also its function somewhat
  cleared up some ssize_t/size_t mixups

- adjusted to the modified base64 protos

- More size_t cleanups in the base64 functions.

- The base64 encode function now takes a size_t for size, not an int as
  previously.

- more int vs long/size_t fixes after icc compiler warnings

- more int/long fixes after icc "remarks"

- next_id is an unsigned short, typecast the assign to prevent picky compilers
  to warn

- typecase the bitfiddling results since we get a long and we store an int,
  they may not be of the size size

- make ares_expand_name() take a long * instead of an int *, since we do
  pointer arithmetic (ptr1 - ptr2) and to do that properly on 64bit we need
  long

- strlen() returns a size_t, which might be larger than int on some platforms

- argh, use single-quotes instead of double ones to make $Revision appear

- use the proper source header, and set the version string to this file's
  revision number

- cd back to the root path before removing the build dir, since some systems
  refuse to remove the dir otherwise!

- Dominick Meglio's fix for supporting multiple names in the Nameserver key
  on Windows.

- this code uses no long long, so we can have warnings about them

- the missing part of Gisle Vanem's connect-timeout fix for win32

- -Wno-format-nonliteral does not exist in my gcc 2.96, only use that with
  newer versions

- mention in --limit-rate that --speed-limit might ruin the limiting slightly.

- David Byron's fix to allow the speed-limit logic work even if you set
  limit-rate. It does work on the expense of the rate limiter.

- added some extra typecasts to prevent compiler warnings when converting
  int to various types

- inlcude krb4.h to get the proto for Curl_krb_kauth() to satisfy picky
  compilers

- Gisle Vanem brings name resolving timeout possibilities to windows people.
  This works by magicly starting up a new thread that can be killed when the
  timeout is reached. testtesttest!

- that icc attempt in configure

- Some compilers warn on completely empty source files, we provide a blank
  one to prevent that.

- Convert functions to ANSI-style declaration to prevent compiler warnings

- When the built-in manual is disabled, we generate a function doing nothing
  just to avoid making a totally empty file. Just to avoid compiler warnings.

- No longer support Z as a flag to print size_t, it isn't used by libcurl
  and I doubt anyone else uses it.
  
  Better preprocessor magic for the O flag (for curl_off_t printing) to prevent
  compiler warnings.

- cool.haxx.se, no longer sourceforge

- Only use -Wstrict-prototypes with gcc 3.3 or later.
  It is working with earlier versions, but when I use it with 3.0.3, I can't
  get it to ignore errors in "system headers" with -isystem so we get
  excessive amounts of warnings on SSL headers which is very annoying.

- include sys/select.h to prevent picky compiler warnings when using select()
  without proto

- we call the macro CURLMAX() isntead of MAX(), just because it turned up
  it collides with another MAX define on some platforms (like netbsd 1.6.1)

- oops, missed a define when I changed from Curl_ to curlx_

- fix protos to prevent warnings

- added getpart.h for the spitout() proto

- %HTTPPORT supported in subVariables

- mention what ports the test suite uses

- When trying to see if there's a friendly http server on "our" port, we
  only accept return code 7 to indicate that there's no server present.

- -Wcast-align is a bit too annoying

- Anything that looks like gcc 5.0 or more is no longer treated as gcc. I hope
  this will make us exclude icc 8.0 etc.

- refer to FILEFORMAT

- When --enable-debug is used, for every -I provided to $CPPFLAGS we add
  a corresponding -isystem, if using gcc, to inhibit warnings on those
  headers.

- Tor Arntsen's tiny fix!

- if not yacc or bison is found, check if we *really* need it, and if we do
  we bail out!

- fixed the no-ssl version to return int as well

- provide protos to the functions to prevent warnings

- typecast the type to an int on return

- return int from test()

- provide a test() proto

- use a die and a log function to die and log texts
  better detect test suite failures
  remove the buildlog at exit
  make a random buildlog file name, now in the same dir where the build dir
  is created
  checks if the ares build succeeded

- remove the build.log too at exit, and also use the proper $pwd prefix
  to find the files/dirs to remove so that it still works if we "die" after
  having done a 'cd'

- very minor phrase edit

- fixes from the recent days

- check for standard headers when --enable-debug is used

- Doug Porter's patch that changes the order of preferences on how to find the
  default netrc file. We now read and uses HOME _before_ we use getpwuid() to
  better allow users to move around HOME to use different .netrc files without
  having to rely on even blacker magic.

- If --enable-debug is used and gcc, we figure out which version and then we
  use as aggressive warning options as possible for the used compiler version.

- item 19 is considered fixed until we get to hear differently
  item 25 is now dealt with using the curlx_ prefix, mentioned in detail here:
  http://curl.haxx.se/mail/lib-2004-02/0215.html

- Use the strtoofft.h header file from the lib directory, as we are now
  officially using library-code when building the app (at least for the platforms
  that don't have a strtoll() on their own).

- Remade to use curlx_-prefix. This means this function can be compiled and
  linked separately by the application. This function is not provided by the
  libcurl API. It can only be accessed by apps if they compile and use this
  particular source code.

- AIX and Tru64 have what Tor calls "horribly broken 'which' programs" so we
  now scan the PATH ourself to find the path to (g)libtool

- removed some "jhrg" from comments

- I removed the socklen_t requirement from memdebug.h, so we don't need to
  figure it out here anymore to build debug builds.

- Made curl_accept() take a 'void *' instead of 'socklen_t *' in the 3rd
  argument to also not force the casual includer to know about the socklen_t
  type.

- Modified curl_accept() to take a 'void *' in the 2nd argument instead of
  sockaddr *. This has the added benefit that source files that include
  memdebug.h doesn't have to know about "sockaddr".

- No longer uses the 'ret' variable in the plain ipv4-version of
  my_getaddrinfo() (caused a warning by the IRIX MIPSPro compiler). Also
  clarified the situation for the 3-arg version of gethostbyname_r() with a huge
  comment.

- The --enable-debug option really requires this to be built as part of curl.
  When using it, we now set the include path to better find the devel curl
  headers, and we check for the socklen_t type since the curl memdebug stuff
  needs it.

- simplified and better commented config.h include logic

- Make sure dns cache timeout -1 really means forever, as it is documented to
  be. Simply skip the pruning.

- fix the help text for --manual if built without manual

- ignore more

- memdebug build, 'make' no longer builds the demo tools

- 'make all' also builds the demos

- include ares_private.h to make sure we get the memdebug stuff included

- If CURLDEBUG is set we use the libcurl internal memdebug system to track
  memory leaks etc.

- only build adig and ahost if 'make demos' is used

- support closesocket() for closing sockets as well, as then we can use this
  code fine on ares!

- Make realloc() support NULL as pointer. Made to allow us to use these routines
  to memdebug the ares stuff as well.

- item 24 fixed, edited a few issues

- Make the 'areschannel' get created in the curl_easy_init() and re-use that
  same channel during the whole curl handle's life until curl_easy_cleanup().

- updates

- verbose-fix, socks5-fix, dnscache-fix, configure-winmmlib-fix

- Fix verbosconnect() when ipv6-enabled to not assume that conn->serv_addr
  is a valid pointer, but instead always depend on the passed-in dns pointer.
  This happens to be NULL when the connection is re-used...

- removed usage of a silly macro instead of the actual functions memcpy
  and memset

- Jeff Lawson pointed out that we need to check for a '5' in the version field
  to properly work with SOCKS5 proxies. I also included some ascii art describing
  the SOCKS5 response, as RFC1928 describes. Jeff provided details in bug
  report #741841 and here: http://curl.haxx.se/mail/lib-2004-02/0181.html

- Andrs Garca added a check for lwinmm for Mingw/sys

- Mark the dns entry 'inuse' properly even when used from the cache. This
  seems to correct some host cache screw-ups I could reproduce.

- another case which should use CURLcode and not int

- Use the was_iface variable when binding a socket locally, even if no
  SO_BINDTODEVICE is present, to prevent compiler warnings about the variable

- bind interface and large file fixes

- recent fixes

- (void) functions we don't check the return code for

- CURLcode/int cleanup to reduce IRIX warnings
  Removed some dates/names in the comments.

- spell!

- don't assume we can use gcc 2.96+ options

- in the socks code, make sure we receive Curl_read results in ints and
  Curl_write in CURLcode, to keep the picky compilers happy

- removed usage of unset variables (by a function that does nothing!)

- return an int

- return an int, not a CURLcode

- use CURLcode, not int, prevents picky compilers to warn

- the now and start variables were never really used

- Ben Greear's SO_BINDTODEVICE patch that binds to a network interface "even
  more" when the previous approach. Known to work on Linux, possibly on other
  platforms as well.

- Tor Arntsen made the ares build warnings etc get included as well

- Greg Hewgill found out 'contentlength' wasn't big enough to hold a large file!

- make the path const

- I made the same fix here, that Tor already did in the ftp.c code. To make
  sure this doesn't get weird on 64bit archs.

- Tor Arntsen's fix for the bad (64bit wise) typecast when using gmtime()

- Make hostcache_fixoffset() take a long for offset, to fully work with 64bit
  archs, also no longer typecast pointers to ints as that is a nono on 64bit
  systems.

- up to date with recent fixes

- If no nroff tool is found, or if no command line switch to nroff that converts
  a man page to text is found, we disable the built-in manual stuff to still
  be able to build.

- support configure --disable-manual

- added --enable/disable-manual

- no need to run make test in the data dir anymore

- provide a source path to the servers to make them find the tests when run
  outside the source dir, not needing any symlinks

- stop doing the weirdo symlinks

- removed the subchar variable, it was only set and never used

- removed the ldaptext variable, it was only set and never used

- removed the nth variable, it was only set and never used anyway

- No longer receive the return code in ConnectionKillOne() that wasn't dealt
  with anyway and thus caused picky compiler to warn.

- Andrs Garca's additional fix to make the OpenSSL stuff work for msys/mingw

- #if-check for SIGALRM before assuming it is present

- use libtoolize --force to overwrite existing (older) files

- install ares_version.h as well

- Dirk Manske's fix to install ares_version.h as well

- mondays are busy days catching up with the patches from the weekend! ;-)

- Dominick Meglio's update

- recent updates

- Modified the default HTTP Accept: header to only be Accept: */*

- Removed, this was only used to work out what went wrong with test 91, and
  we seem to have nailed that one now!

- Oops. I broke the flow with the previous commit.

- P R Schaffner updated this to work for 7.11.0

- Dominick Meglio's added share interface documentation

- removed the state file renaming I accidentally left there

- some annoying compilers warn about "(void)foo;" lines so we avoid them

- Make param2text() take an int argument, as that is what's being passed in.
  This is made to prevent compiler warnings.

- use VAR_NONE instead of 0 in the table to prevent compiler warning

- return 'res' to better discover test failures and to stop compiler warnings
  about it never being used

- Uninitialized variable set.

- Tor Arntsen's patch for working around a notorious bug in the AIX5
  getaddrinfo() implementation.

- Ken Rastatter's fixes to improve portability of this example:
  
  These minor changes remove portability issues with the this example and allow
  it to run on Win32. Specifically:
  
  * The use of pthread_create() has been replaced by g_thread_create(). This
  removes the dependency on the pthreads library. Since this is an example using
  GTK+, g_thread_create() is available as it is a part of glibc.
  
  * The CURLOPT_FILE option is now referred to by its "newer name"
  CURLOPT_WRITEDATA.
  
  * The use of CURLOPT_WRITEFUNCTION has been added.  As described in the docs,
  this avoids the crashes when using a DLL under Win32.
  
  * The output file has been renamed from "/tmp/test.curl" to "test.curl". It's
  unlikely that there is a /tmp when in Win32 and other examples in libcurl
  write their output files to the working directory.

- mingw configure fix, host: fix, compiler warnings in ldap.c

- updated with recent fixes

- The Curl_strtoll() issue

- updated

- Rewrote the gethostbyname() check after Andrs Garca's provided patch
  for finding it using mingw on windows.
  I also made the script skip the search for gethostbyname_r and gethostbyaddr_r
  when ipv6 is enabled.

- Added documentation of a few command line options that were still undocumented
  here.

- A custom Host: header is only considered if the request is not made by
  following a location. After discussions with Tim Baker.

- The MIPSPro compiler complains on constructs such as "(void)foo;" so
  we avoid it where possible.

- Make sure DynaGetFunction() returns a function pointer, not a data pointer.
  The standards don't actually allow typecasts between data and functions so
  some picky compilers warn about this.

- Remove the attempt to detect if we already tested the same source setup.
  We really don't care, and so many other things could've changed to make the
  new test interesting anyway.

- numerous things went in today

- added the missing stdin section

- An attempt to only set both libz-related defines at the same time. We need
  both the lib and the header present for both defines to be set. If only one
  of the files is found, we issue a warning and set no define.

- Andrs Garca's updates

- if an empty 'transfer-encoding:' header is provided, we switch off the
  chunky coding of uploads

- Made a test that sends data on stdin to PUT, with a given length and
  chunked transfer-encoding disabled. Fixed to work after Len Krause's
  bug report.

- Gisle Vanem fixed a windows compiler warning

- changed the test() function to return type int

- include process.h to get the _getpid() proto

- when using --enable-debug and gcc, provide the -Wno-format-nonliteral option
  to prevent the warning in mprintf.c:
  
  (currently line 930) "format not a string literal, argument types not checked"

- options we get as longs need to be typecasted when assigned to prevent
  picky compiler warnings

- fix return type to silence compiler warnings

- prevent warning from that picky MIPSpro compiler

- compiler warning fix, compare struct pointers of the same type

- use the timeout options when waiting for the server to connect when using
  PORT
  Provide better error messages to allow debugging if one if the ipv6-related
  name functions fail in the ftp_use_port() function. This might help us
  diagnose the problems on AIX. Also make sure getaddrinfo() uses NULL and
  not "0" for the service argument.

- hide the pack_hostent proto if ipv6 is enabled, as figured out by Tor Arntsen

- Fix the socklen_t type too. Needed only when built with memory debugging
  as then we include the memdebug.h header from the lib dir, and it then
  requires this type... (fails on IRIX 6.5 without this)

- fixed "comparison between signed and unsigned" complaints

- don't use 'sin' as variable name as the picky compiler warnings complain
  about it shadowing the function sin()

- fixing

- prevent a compiler warning about a macro definition

- prevent the windows version to use global symbol names
  added prototypes for the strcasecmp() functions

- we use the more aggressive compiler warnings

- made more pointers unsigned, as they were mostly used passed in to functions
  that assume them to be unsigned. Stops compiler warnings.

- typecast comparision between signed and unsigned

- try_config() takes a second parameter as const, to prevent picky compiler
  warnings

- takes a void *, not a char * anymore

- ares_free_string() now takes a void * instead

- don't compare signed and unsigned

- added a tags target

- new configure file

- use configure.ac instead of configure.in
  support --enable-debug to switch on picky compiler options

- stop a compiler warning

- no one uses libcurl before 7.7 anyway...

- libcares.a is here

- link with libcares instead of libares

- We now produce 'libcares.a' instead, to make it possible to have both c-ares
  and the original ares installed in the same lib dir.

- the configure and memdebug fixes of yday

- the unused quit-function didn't pass a correct variable type to the
  response reading function

- add link to the new cares web site

- added notes about incompatible functions

- adjusted to the new single-parameter version of this function

- removed odd newline

- added the missing ares numerical version initialiser

- modified *strerror()

- Use the nroff option figured out by the configure script. An attempt to
  make this better on more systems.

- try to figure out if -man or -mandoc works to get text with the NROFF
  utility

- undef accept before defining it, since AIX 5.2 has it as a define!

- more test91 tweaks and some c-ares stuff

- now provides c-ares version info in both version calls

- Introducing the SECOND version of the version_info struct. This should
  be backwards compatible with older libcurls just fine.

- use the new single-argument ares_strerror()

- adjusted to the modified ares_strerror() function
  
  NOTE that this breaks ares-compatibility, we have now officially taken the
  turn into the c-ares path. We will now officially depend on c-ares for asynch
  name resolves.

- remove rcsid stuff from c files, it serves no useful purpose

- removed the silly second argument to ares_strerror()
  
  This breaks the API and ABI with the existing ares library. We hereby require
  the upcoming c-ares 1.0 for asynch name resolves!

- Dirk Manske fixed the ares usage even more. We could get a timeout from ares
  as well, and when failing and not getting a timeout we now include the
  error message ares can provide us with.

- mention mpe/ix

- set the 'retry' bit to TRUE when the connection is about to be retried,
  this allows the HTTP code to *not* return a failure just because no data
  has been received from the server

- clear the sockerror if no error was returned

- ares resolve timeout and ca bundle include fixes

- we include errno.h to truly know if we have ECONNRESET or not

- Timeout slow ares name lookups. This is based on the patch brought by
  Dirk Manske, but modified by me.

- when including ca-bundle.h, don't look in the current dir first, simply use
  the search path since we want the build-version rather than the one in the
  source dir

- fixed the win32 function to use the correct proto, as pointed out by Gisle
  Vanem

- test case 97

- added test 97, a simple test with -d post and a replacede content-type
  header using -H

- attempt to fix the notorious test 91 failures

- make sure the connection is closed when it was detected reset!

- Somewhat crude attempt at fixing the test 91 failures. I commit this now
  so that the automatic testing hosts will test these changes over the weekend.

- hide the grep result

- catching up with reality

- test case 510, mpeix fix

- when we receive a request overflow, we still dump the incoming request to
  the dump file to make it easier to understand and debug the situation

- added lib510.c for callback POST using chunked encoding

- added test 510, callback-based POST using chunked encoding

- --socks

- Added --socks

- only do the verifyconnect() clear magic on mpeix

- the thread and SSL issue is now fixed

- note about the need for extra functions set to OpenSSL if you use OpenSSL
  multi-threaded

- update with recent info

- don't include config.g in src/hugehelp.c unless HAVE_CONFIG_H is defined

- ares fix, warnings fixed, mpeix fixes

- check for sys/ioctl.h as well
  added commented more aggressive compiler options for gcc, subject to be used
  instead of the current ones when --enable-debug is used

- added verifyconnect proto and use it correctly in the waitconnect function

- moved the definitions of IOCTL_3_ARGS to setup.h

- 1. changed order of two include files to build fine on MPE/iX
  2. now reads the socket error before check connect status, also to make us
     run fine on MPE/iX

- Ken Hirsch says he basicly needs all 'mv' to be 'mv -f' for configure to
  run in a sane manner on his MPE/iX operating system.

- Dan Fandrich's cleanup patch to make pedantic compiler options cause less
  warnings. Minor edits by me.

- make pedantic compiler options generate less warnings

- added hugehelp.h

- nonsence change to make -Wunreachable-code get happy

- use hugehelp.h to silence picky compiler warnings

- documented ares_version()

- return a const char *

- use the name 'c-ares' for this package

- include the new README.cares

- point out that this is a forked project, all c-ares specific stuff is now
  in README.cares

- c-ares specific README, leaving most of the original README as-is

- cut off the initial blurb, moved that to README.cares

- Dirk Manske fixed a flaw in the setting of the socket to non-blocking

- updates

- adjusted to the corrected chunked transfer-encoding extra trailing CRLF

- verify that buildconf ran fine to allow it to continue

- upload with chunked transfer encoding is now fixed

- Gisle has eyes, I don't

- Chunked-transfers should have an additional CRLF after the final 0 CRLF
  sequence.

- added the extra newline that this needs to succeed

- send a connection: close in the initial reply to see if things differ

- number two is fixed!

- CONNECT response headers are now passed back as "regular" headers

- don't advance the line pointer if it already points to the null terminator

- very big transfers now get nicer progress displayed after 9999 megabytes have
  been transfered!

- display OK if it runs OK

- when saving in a cookie jar fails, include the file name in the error message
  to make it easier to track down

- Removed two redundant #include files in the djgpp section. They're already
  included. (a Dan Fandrich fix)

- the *_LARGE options work fine on windows in 7.11.1

- things continue to happen

- Use Curl_strtoll() if needed. This is not a library call, this is just the
  same code as the library uses for its internal function. Thus the captical
  C in the beginning.

- use the Curl_strtoll() source code from the lib code

- Proxy username and password on persistant connections could easily get
  messed up. Vincent Bronner detected this.

- check the arguments to the socks5 function, as the name and password might
  be NULL pointers, and if non-NULL if now support zero-length names/passwords

- fixed the progress meter display for files >32 bit, Gisle Vanem reported

- include curl.h for the typedef

- define SIZEOF_CURL_OFF_T if not already defined

- re-intended the code curl-style

- zlib fix for the help text, stroll usage on mingw/djgpp

- return curl_off_t instead of long long, to work on more platforms

- Gisle Vanem fixed the compressed help text zlib code

- it has strtoll

- Gisle Vanem's fix, mingw as strtoll

- attempt to fix 64bit seeking for Windows, does it work?

- font-lock the curl_off_t type instead of the off_t

- header file fixing

- use curl_off_t instead of off_t

- use curl_off_t instead of off_t!

- Instead of checking the off_t size, we use the source dir version of the
  curl.h header and then check for the size of the curl_off_t type.

- s/not/note

- curl_off_t is the new type for large file support
  HttpPost is not defined anymore

- use the proper type for formposts, not the deprecated one

- added the missing proto for the still unused quit function

- mark the option better

- start working on 7.11.1

Version 7.11.0 (22 Jan 2004)

Daniel Stenberg (22 Jan 2004)
- release time!

- no large files on windows just yet

- updates

- updated year

- removed Basic in the initial response to see if it makes any difference
  in the failure frequency

- use the proper timecond defines, not the obsolete ones I've removed! ;-)
  
  The initial QUIT-sending code is added, but not yet used due to the issues
  previously mentioned on the mailing list.

- use the proper timecond defines, not the obsolete ones!

- Byron's fixes

- old timecond defines removed

- Removed defines with TIMECOND_ prefixes. They have been obsolte since April 22
  2002, and if this causes anyone any problems now it is very easy to just
  add CURL_ to the names. This corrects this name space pollution.

- clarified where VERBOSE output goes

- David Byron's --trace fix

- David Byron cleaned up how --trace with no option was treated, and also
  arguments in a config file without a required parameter!

- two minor build quirks

- nothing left for 7.11.0, the remaining items were moved to 7.11.1 as planned

- added this test, this is basicly a copy of test 91 but we return the first
  response with a size 5 instead of size 0, to see if this has an impact on
  the failure frequency - test 91 still fails occationally.

- Gisle Vanem's patch for variables that "might be used uninitialized"

- silly me

- Avoid Curl_if2ip() on Interix as well. Fix by Rodney.

- removed unused stuff

- use the %dk display for one extra k of progress

- automake 1.8 adjustment

- Added escaping of the function name in the AC_DEFUN() macros, so that
  automake 1.8+ stops complaining!

- Peter Sylvester's CURLOPT_SSL_CTX_FUNCTION docs
  I reworded some of the intial paragraphs to avoid 'NOTE2'

- now compressed out of the box

- issue 22 (better compressed manual) is fixed

- check for limits.h as well

- added missing parenthesis

- spell-fixed a comment
  now errors out if built with off_t > 32 bits but without strtoll()

- clarified the recent fix, added cred

- rearranged the connect() call so that there's no interleaved #ifdef, to make
  it compiler better on amigaos

- Curl_resolv fix

- fixed the Curl_resolv()'s return code when the looked up host was already
  in the cache (Vincent Bronner)

- HAVE_LIMITS_H

- Gisle Vanem updated the code for win32 and djgpp builds.

- indented and formatted the VMS-specific code more in the same style as
  other curl code

- Luck Call made win32 password prompting support backspace

- we no longer distribute the non-working tests 400 - 403

- added a comment about this not being the original getdate.y version, it has
  been modified

- source header added

- use the *correct* header!

- zlib patch, amigaos patch

- Dan Fandrich made the hugehelp.c contain both compressed and uncompressed
  help if libz is available using #ifdef in the source instead, to allow the
  distributed source code to be easier built with compressed help text.

- define HAVE_LIBZ if libz is present, for hugehelp.c

- amiga patch applied and committed

- the multi change, the amiga build, credits

- Diego Casorran's fixes to allow native AmigaOS builds

- three changes done this morning

- Matt Veenstra updated the Mac OS X framework files

- Brian R Duffy made the makefile work to build SSL-enabled curl with Borland
  C++.

- Brian R Duffy provide a "build SSL-enabled with Borland" section

- fix the copyright string years

- modified the TODO, we already do persistant tests

- added our standard header

- added standard source header

- fix the include path to point to the libcurl's source dir too for the setup.h
  inclusion

- include setup.h from the lib dir instead to get even more private stuff
  from the libcurl build, but right now for the USE_SSLEAY define.

- more stuff to be added "soon"

- Peter Sylvester's multi patches were applied

- Peter Sylvester brought code that now allows a callback to modified the URL
  even when the multi interface is used, and then libcurl will simulate a
  "follow location" to that new URL. Test 509 was added to test this feature.

- better test script

- better skip reasons, longer waiting for startup of servers (due to slow/loaded
  host), added retrying/waiting for slow stunnel startups

- cut the patch number before a '-' too, to enable '7.11.0-pre1' to use
  patch number zero.

- http auth types
  disable EPRT
  removed passwd prompting text

- removed the "build natively on amiga" note as this is not yet true, we're
  awaiting a patch that might be delayed into 7.11.1 instead (see TODO-RELEASE)

- added the forgotten patch tracker item #844036

- Dan Fandrich does download page edits
  ftps has a new port

- issue 6 moved to 7.11.1

- Dominick Meglio pointed out FTPS should use default port 990 according to
  IANA.

- added one assert and a few comments describing how the auth stuff works

- added a short intro text about this not being for binary package installs

- the --with-spnego fix

- configure spnego fix of yday

- a fair idea

- Dominick Meglio updated the win description since we fixed the gettimeofday
  name issue

- Giuseppe Attardi's bug

- fixed the LDFLAGS creation for the SPNEGO option

- a few issues are now awaiting response

- sourceforge out, siamu.ac.th in

- added a few people who have been doing lots of good stuff

- feature update

- added fresh mirror info since last release

- stopped the sf mirror

- updated year in the copyright string

- removed the fixed entries, somewhat updated entries

- mention that the _LARGE options are added in 7.11.0, added a header to the
  file with the standard curl blurb

- Dan Fandrich fixed our zlib usage

- Dan Fandrich's zlib fix

- Accept fix

- new files for the large file support number parsing

- large file support added in CVS now

- mr Meyer brought large file support

- David J Meyer's large file work was added.

- fix duplicates

- David J Meyer's large file support.

- minor wording change

- minor format flaw

- Tor Arntsen fixed a spelling error

- we call it 7.11.0

- What I hope we get done in the next few releases

- curl-related news

- the gettimeofday fix

- Dominick Meglio's fix to make our private gettimeofday() use the ares_
  namespace

- make our private version of gettimeofday() static

- white space and copyright year changes

- Dominick Meglio's description how to build ares for libcurl on win32

- there's a ferite binding too

- curl doesn't do recursive operations

- added redwire.net

- Andrs Garca added CURLOPT_IPRESOLVE

- fixing

- Make setopt() support CURLOPT_IPRESOLVE...

- Gisle Vanem's djgpp fixes

- djgpp fixes by Gisle Vanem

- Gisle Vanem's minor fixes

- typecast the size to long for platforms where st_size is off_t

- Andrs Garca's update

- redirect from a bad url such as "www.com?moo=foo" to an absolute path didn't
  work, as reported by John McGowan

- David Byron's fix to make libcurl build fine with both .NET and VC6 version
  of MSVC

- clarified the URL part based on the problems Martin Hilpert had

- spell

- Check the error code AFTER the protocol and data. Only changed to perhaps
  get some further input on the notorious test case 91 failures!

- AmigaOS build notes

- use the curlassert() instead of custom checks

- add off_t as a recognized type for font-locking

- test506 fix

- modified and corrected test 506

- changed the dns cache pruning

- one correction, one addition

- added a library-wide interface for doing dns cache pruning, and no longer
  make the pruning at each name lookup, only in Curl_done().

- added the six most recent bugfixes

- if Curl_hash_add() returns NULL, we shall not free the addrinfo field as that
  is made in the hash function in the case of failure (using the already setup
  'dtor' function).

- make sure that hash_add() has no allocated resources left in case it
  returns NULL

- Giuseppe Attardi fixed a really tricky bug

- We cannot 'cd' to the ares build dir to get the path, as the directory hasn't
  been created at this point yet when we build outside of the source dir.

- remove the build directory on exist, if there is any

- some outputs for easier debugging

- only build ares if truly enabled

- ares-using configure should run configure in the subdir by itself

- if there is an 'ares' subdirectory when configure is run with --enable-ares
  (without a given path), we run configure automatically in that subdir

- use the CORRECT file name! ;-)

- check for strtoll(), for the upcoming >2GB patch

- dict and a man page fixes

- Use Curl_transfer() properly. Fixes the bug Gisle Vanem found!

- assert that we get a good index to Curl_transfer()

- we now have a 'curlassert' function to use

- check for assert.h

- updated with the new configure option usage

- curl-config bug corrected

- Diego Casorran tapping on Amiga support

- added the new amiga files to the dist

- Diego Casorran's amiga makefiles

- native amiga support by Diego Casorran

- native AmigaOS support by Diego Casorran

- Diego Casorran's amiga build patch

- ares configure and build fix

- do the ares stuff in the configure file

- Dominick Meglio made --enable-ares support an option =PATH to specify a
  root path to an installed ares.

- minor language fixes

- Eric S. Raymond's fix of the NAME section

- added some details from the old scrolls

- removed old version checks

- use the newer option names

- updated 5.5 to use the modern names of these defines

- ares in curl-config

- removed one, added one

- -lz fix

- no need to add -lz to LDFLAGS manually, as AC_CHECK_LIB() does that
  automatically!

- updated

- better human error message when a FTP response can't be read

- curl-config now shows asyncdns if built with ares enabled

- based on Gisle's comment, I removed the use of syslog() and fixed the
  netdb.h include, then I re-indented some code to use curl-style

- minor edit of the PRIVATE option

- cut out the wrong version blurb

- edited the -d section slightly

- minor edit

- VMS

- Marty Kuhrt moved most of the VMS stuff to a separate header file.

- new VMS files

- Marty Kuhrt updates

- my contentlength adjustment broke the ftp download range stuff, this makes
  it work again

- Steve Green fixed Curl_resolv()

- Ignore content-length when chunked transfer-encoding is transfered.

- less complicated code for the MSG_NOSIGNAL detection

- that MSG_NOSIGNAL check serves no useful purpose!

- --ftp-pasv

- --ftp-pasv now overrides a previous --ftpport option. We now also support
  it named "--ftp-port" as the additional dash between the words is used in
  several other options and this makes it more consistant.

- fix compiler warnings

- use the HAVE_KRB4 define instead of just KRB4

- renamed the KRB4 to HAVE_KRB4

- fixes from Gisle Vanem to try 'AUTH SSL' before 'AUTH TLS', edited by me

- MSG_NOSIGNAL

- If HAVE_MSG_NOSIGNAL is set, we use MSG_NOSIGNAL when we call send() and
  recv() and we no longer attempt to ignore the SIGPIPE signal.

- check for MSG_NOSIGNAL

- Gisle Vanem fixed the check-order for FTPS and FTP.

- updated

- FTPS now works pretty good

- FTPS now works with active ftp and uploads too.

- Sven Wegener runs the new German web mirror

- James Clancy updated the Borland makefiles

- Markus Moeller and SPNEGO

- Markus Moeller's change to check for HAVE_SPNEGO instead of the previous

- Markus Moeller fixed the SPNEGO check and it nows defines HAVE_SPNEGO

- filed is not fixed ;-)

- a committed bugfix described

- test 95 added, verifies my fix for bug report #848371

- When basic is the only auth wanted (which it is by default), the auth phase
  is always considered done immediately as Basic needs to extra passes.
  
  This fix corrects bug report #848371.

- requires a SSL-capable client

- clarified Maciej W. Rozycki's fix

- allow the end-of-headers from a proxy response to CONNECT end with a CRCR
  as well as a CRLF

- test proxy CONNECT requiring basic auth but we don't provide any

- new way to trick sws to return special data on CONNECT

- somewhat up to speed with the devel

- --ftp-ssl support added

- proper ftps:// support added

- prevent warning for non-SSL builds

- windows build fix based on a patch by Gisle Vanem

- adjusted code to the new socket fields in the sessionhandle struct

- disable ftps-tests for now, we must make them work with the updated ftps
  functionality

- FTPS support added as RFC2228 and the murray-ftp-auth-ssl draft describe it

- fixes

- Gaz Iqbal fixed a range string memory leak!

- fixed wrong comment

- Gisle Vanem fixed the Windows build

- FTPSSL support options and defines added

- combine the two identical cases

- three more fixes

- bail out properly on a 407 when we can't authenticate basic, bug report
  #845247

- request a file over proxy without credentials, and get a 407 back

- unconditional progressbarinit cures a windows crash

- If a partial file has been read or written, force a closure the existing
  connection to avoid re-use of it, since we cannot know in what state it is.

- respect bits.close even if an error already is set, but make sure that the
  existing error is the one returned back

- cut off old crappy win32 comments and use the proper global_init instead
  also removed very old "require libcurl older than blablabla"

- cleaned up

- remove the wrong win32 comment and use global_init

- Maciej W. Rozycki's configure patch

- Maciej W. Rozycki made this script use a cache variable for the writable
  argv test. This way, the default can be overridden better (for cross-compiles
  etc)

- do ares_destroy() on the ares handle when we're done in Curl_is_resolved()

- two

- Mathias Axelsson found a case where we free()d the server certificate twice!

- Siddhartha Prakash Jain found a case with a bad resolve that we didn't
  properly bail out from, when using ares.

- updated

- Peter Sylvester found a flaw in the connect code for ipv6-enabled hosts.
  I guess it seldomly happens on linux and that's why it wasn't found before.
  He used Solaris to notice it.
  
  I took the opportunity to rewrite the Curl_connecthost() slightly to feature
  less duplicate code in the two different versions (ipv4/ipv6).

- -n disables valgrind now

- Default Content-Type for formparts has changed to "application/octet-stream".
  This seems more appropriate, and I believe mozilla and the likes do this.
  
  .html files now get text/html as Content-Type.
  
  Pointed out in bug report #839806.

- don't log failed socket() calls

- Gisle Vanem added a flush to make the progress-bar look better on windows
  (at least).

- mention it was added in 7.10.9

- a resume http upload bug

- Added CURLOPT_NETRC_FILE.

- Generate the ca-bundle.h file in the build dir and not in the source dir,
  which works nicely since the build dir is before the source dir in the
  include path.

- After Sbastien Willemijns' bug report, we now check the separators properly
  in the 229-reply servers respond on a EPSV command and bail out better if
  the reply string is not valid RFC2428-compliant.

- for the getpwuid() etc

- use char, not bool

- things happen even during slow days! ;-)

- do a normal free() of the homedir now

- Based on Gisle Vanem's $HOME patch, we now attempt to find the home dir
  in a slightly better way for more platforms. The $HOME is only used for
  .curlrc atm, but the possible upcoming change of .netrc treatment may also
  need the home dir.

- Removed references to the no-longer existing PASSWDFUNCTION. That option
  existed in 7.10.7 and earlier, but has since been cut out.

- remove the struct fields for the deprecated passwd prompt callback

- explain the requirements for --negotiate, --ntlm and --krb4

- mark options better

- Ralph Mitchell's update that allows this script to take an existing
  directory name and build/run/test curl in there instead of trying to update
  from CVS. Using this approach, this script can be used to test daily tarballs
  etc.

- the resource file itself

- removed the resource lines I shouldn't have added in the firt place

- define TRUE and FALSE here as some platforms don't have them otherwise

- CURLDEBUG, no underscore

- Gisle Vanem's libcurl.dll version info patch applied

- don't allow options that we KNOW can't be used

- mark all mentioned options better

- converted most .I lines to \fI ones

- egd, not edg

- Define TRUE and FALSE unless already present. I've moved away those
  definitions from the global curl header and thus this needs to do it
  themselves.

- removed the _last since that is by definition not an error code

- new defines for version info

- Insert the major, minor and patch numbers into the curl/curl.h header as
  well. Removed the depedency on perl.

- We offer the version number "in parts" as well by introducing three new
  defines.

- things

- new mirror added

- updated somewhat

- unitialized variable fix, reported by both Marty Kuhrt and benjamin gerard

- Mac OS X framework build files, contributed by Matt Veenstra

- Moved the TRUE and FALSE #defines to lib/setup.h instead, as they don't
  belong in the public header file. They are not in our name space so we
  should not set them globally.

- minor format edits

- use roffit to make HTML from man pages
  http://daniel.haxx.se/projects/roffit/

- use .BR to refer to other man pages to make it easier for parsers to know

- consistant with other man pages

- .TP and .B replaced with .IP

- .IP instead of .TP and .B

- highlight more mentioned options

- Use .IP instead of .TP and .B for each item.

- spell!

- three changes went in

- Troels Walsted Hansen fixed the MSVC makefiles to build fine on Windows.

- spellfix in the generated comment by Kevin Roth

- Kevin Roth's fix to make correct cygwin packages

- blanked, starting all over again

- starting on 7.10.9 in CVS

Version 7.10.8 (1 Nov 2003)

Daniel Stenberg (1 Nov 2003)
- 7.10.8!

- ftp goes UTC

- gmtime() really can't even return NULL, can it?

- back to GMT again

- assume that MDTM returns the timestamp as UTC

- my own system had a bad valgrind, so check that it works at least somewhat
  before we use it

- Debian bug report #218046, a minor typo.

- removed compiler warnings from my latest fix

- numerical options check

- Added a new parse-numeric-parameters function so that options that take
  a numeric argument can better bail out if given a weird parameter. This
  catches situations such as "-y -Y 2000" or "-O -C [URL]" etc.

- newer, nicer

- Set version string to -CVS. This string is generated by maketgz at release-
  time.

- Make the CVS version clone the libcurl version string, this is generated
  by the maketgz script so in releases this is replaced by an actual string.

- ignore .dist files here

- Made the dist-hook more generic for adding more files named .dist into the
  dist archive. Preparing for a new maketgz.

- --head on file://, some cleanups

- more help text cleanups

- silly me, I was meaning to do this change already as discussed on the libcurl
  list, we get the time in GMT and not localtime

- curl --head now reports info "headers" on file:// URLs as well

- updated for the cut off GMT string

- when getting headers only, stop pretending the reported time is GMT, as it
  isn't. In fact, it might be, but we have no idea.

- only use siginterrupt() if it really exists on the platform

- Check for siginterrupt, used by the test suite web server sws.

- Only compile the ipv6-section for ipv6-enabled libcurls. Should save
  us some trouble.

- Added proper #ifdef's for the #include files when checking for in_addr_t,
  which made the test start working nicely on BeOS. Shard verified it.

- Stop using stunnel.pm, we pass in the path from the main script instead.
  Also made it easier to stop the test suite with control-c.

- cleaned up the --help output. Tried to unify the language. Shortened a bunch
  of explanations.

- David Hull made the file: URL parser also accept the somewhat sloppy file
  syntax: file:/path. I added test case 203 to verify this.

- stunnel.pm is no more

- stunnel.pm is removed

- now check for and use valgrind, inserted and modified the check for stunnel
  and we no longer use the stunnel.pm

- removed, functionality added to runtests.pl

- Another glibc resolve name fix

- possibly uninitialized variable

- overlapping memory chunks with strcpy(), detected by the friendly valgrind

- slightly quieter torture test by default

- James Bursa's fix to prevent failf() to write outside its buffer boundary

- James Bursa found an ERRORBUFFFER overflow

- snprintf() made a single-byte buffer overflow, as it could write a zero
  outside its given buffer. Discovered and reported by James Bursa.

- avoid dependence on the order of the fields in the timeval struct, pointed out
  by Gisle Vanem

- support building ares-enabled too

- tests the new -C - fix

- HTTP resume fix

- Resuming a download of an already downloaded document, that is trying to get
  a range of a document beyond its size, caused libcurl to "hang" until the
  server closed the connection and then it returned error 18.
  
  This is bad. This way, we don't return any error at all, which isn't nice
  either, as we need to alert the app somehow that the request range was out
  of size.

- solaris build improvement

- Based on David Hull's fix in bug report 804599, we now check for solaris
  and gcc, to set the -mimpure-text link flag for linking the lib better.

- don't select() forever, set a timeout so at least the test fails nice

- better name, it isn't https

- c-ares is the new name and ares_version() was added

- Introducing ares_version(), so that we can have apps get version info about
  what particular ares version that is being used.

- make it work with Negotiate support enabled too

- runtests -t introduced

- improved the torture testing

- supports -l now to display the actual line that was prevented by memlimit

- if malloc fails, we must bail out nicely

- Improved checks for bad memory situations and proper behaviour when we
  run out of memory.

- better bailing-out cleanup if a malloc fails in the DNS cache

- free all memory on failure before bailing out, not really necessary but
  my upcoming automated test gets crazy if not

- the actual release-notes is new too

- Introducing -t to "torture" the memory allocations/failing/bail-outing in
  curl and libcurl. -t is not used anywhere automated yet, and it does already
  identify memory leaks on failed allocations. Work to do.

- produce a single summary of the amount of allocations on -v

- disable-eprt, fixed CA cert verfication

- Georg Horn's patch. -k is no longer mutually exclusive with --cacert and
  --capath. Using -k together with one of those just means that the result
  of the CA cert check is ignored (but displayed if -v is used).

- Georg Horn's fixes to do different CA cert verifications. They can now be
  done even if the result is ignored, as some sites seem to require that.

- encourage use of -c to store cookies instead of -D

- allow gdb to check the libtest dir for sources too (for the 500- tests)

- we continue to improve things

- make --disable-eprt work, based on Gisle Vanem's patch

- Dylan Ellicott added the vc-libcurl-ssl-dll target

- Dylan Ellicott added the release-libcurl-ssl-dll target

- Do the auth stuff at the end-of-headers and not at the start-of-body, as
  we might not get a body when we get a 401 with a set of WWW-Authenticate:
  headers. This fixes the problem Kevin Roth detected in 7.10.8-pre4 and pre5.
  Verified by test case 91.

- Modified to be able to repeat Kevin Roth's problem

- Andres

- updated for mingw32

- pre5

- modified test 91 to look more like Kevin Roth's error case

- test case 91 added, an attempt to repeat a problem reported by Kevin Roth
  on Oct 20, 2003.

- conn->user and conn->passwd will now always be set to point to something.
  If not user or password is set, they will point to a "" string.

- no colons in user names with USERPWD

- allow no user and password for proxy too, Basic

- allow no user and no passwd when doing basic auth

- lock the DNS cache properly before adding an entry when using asynch DNS

- run autoconf in the ares dir as well if the dir is present, after it has
  been run "as usual"

- Georg Horn patched Curl_read()

- better error output on SSL errors when receiving data - Georg Horn patch

- fixed the bug my previous change introduced

- minor fix to not shadow a variable

- builds warning-free with -Wshadow now

- don't shadow 'socket'

- fixed gcc -Wshadow warnings

- removed gcc -Wshadow warning

- memory leak

- gcc -Wshadow complaints fixed

- compiler warning fix

- prevent compiler warnings with relly picky compiler options

- Dominick Meglio pointed out these files should be removed from here

- 7.10.8-pre4

- 1. read the version from the command line
  2. make the libcurl and curl version the same

- Added a few undocumented errors

- nicer pdf generation

- Dominick Meglio implemented CURLOPT_MAXFILESIZE and --max-filesize.

- typecasts to prevent warnings

- cleaning

- empty path parts in FTP URLs

- The 100-continue and no-more-response bug

- make empty names look fine in verbose output

- make no user or no password just mean blank fields, not aborted operation

- finally we support >128 letter passwords so this test was fixed to work

- o the name and password arrays are 256 bytes, so let's accept that lengthy
    input
  o have ->passwd and ->name be NULL if no name/passwd was given
  o only set default user+password for FTP if no userpwd was given

- made the code deal with empty name and password

- ignore these too

- verbose auth info

- show info text (verbose) about auth type and user name in use

- made the password prompt nicer

- define HAVE_SYS_SOCKET_H if that file is present. This is needed when we
  #include "../lib/memdebug.h" for memory debug builds.

- turned this into a list of documents/standards curl adheres to

- subjectAltName and passwd changes

- removed the passwd options that are no longer supported

- password prompting gone from libcurl, fixed for ntlm

- Added support for password prompting if only used name is given on the
  command line.

- password promting support removed from libcurl

- rewritten alternative name check

- the previous fix left this compiler error

- bad license situation for the altname patch

- now libcurl runs better multi-threaded on windows

- Avoid doing getsockopt() on Windows to verify connects. It seems that this
  hogs Windows machines when libcurl is being used multi-threaded (with > ~50
  threads). Andrew Fuller helped us verify and test this.
  
  According to a MSDN web page on connect(), it returns 0 when the connect
  is done and thus we don't need the getsockopt() call anyway on Windows.

- duphandle fix

- Kimmo Kinnunen fixed a crash with duphandle() when CURLDEBUG was set

- Gisle Vanem brought IPv6-support to curl on Windows

- Gisle Vanem's IPv6-on-Windows patch applied!

- improved the libtool check to disqualify "1.4c" when 1.4.2 is required

- Added Domenico Andreoli for his patches

- added more mirrored versions of the ares 1.1.1 package

- Updated build instruction since I now offer a complete ares-package with all
  the patches already applied. No need to apply any patches manually anymore.
  
  ares 1.1.1 is still compatible.

- Giuseppe Attardi's ares+multi problem of 12-oct-2003

- Clear the connection pointer after the async resolve has failed.
  This cures the problem reported by Giuseppe Attardi on October 12, 2003.

- debian bug report #212086

- Removed extra LDFLAGS assignment. Pointed out in debian bug report #212086
  (http://bugs.debian.org/212086). Patch by Domenico Andreoli.

- use $(NROFF), not gnroff (patch by Domenico Andreoli)

- Dirk modifide the share-locking for DNS lookups

- Dirk Manske made the share-locking around DNS lookups a bit "looser" so that
  multiple DNS lookups can run simultaneously faster. The downside is that
  resolving the same host name now can be made at once from multiple threads,
  but the upside is that threads now don't alwys have to wait for the others'
  resolves. Test case 506 updated accordingly.

- resume fix

- Lachlan O'Dea fixed a resume problem: "If I set CURLOPT_RESUME_FROM, perform
  an HTTP download, then reset CURLOPT_RESUME_FROM to 0, the next download still
  has a Range header with a garbage value." bug report #820502

- sws fix, inet_pton fix

- Dominick Meglio fixed this to build fine on MSVC

- portability fix by using setup.h from the lib directory

- removed creation of tests/server/config.h

- not used anymore

- name it pre1

- clarify why this package exists

- run autoconf if needed

- ignore these files

- added for completeness

- clarified the reason for this package

- bail out hard if ipv6 and ares are both enabled at the same time

- 7.10.8-pre3 commit

- - Frank Ticheler provided a patch that fixes how libcurl connects to multiple
    addresses, if one of them fails (ipv4-code).

- include file fixes

- fixed to build fine without ssl

- check for inet_pton()

- Neil Dunbar and subjectAltNames

- ares 1.1.1 with collected applied patches

-   Neil Dunbar provided a patch that now makes libcurl check SSL
    subjectAltNames when matching certs. This is apparently detailed in RFC2818
    as the right thing to do. I had to add configure checks for inet_pton() and
    our own (strictly speaking, code from BIND written by Paul Vixie) provided
    code for the function for platforms that miss it.

- test case 508 added to test callback-based POST

- http post fix

- make sure that a regular POST using the read callback works

- O_NONBLOCK does not work on BeOS according to Shard

- builds better on BeOS

- Shard's fix to build fine on BeOS

- BeOS-adjustments, as provided by Shard

- weird typo removed

- just re-indented some code

- New code for BeOS-style non-blocking sockets, provided by Shard and
  Jeremy Friesner.

- improved the non-block check a lot:
  * several tests ALWAYS failed due to bad test programs
  * the IoctlSocket() test now is linked on test as it could otherwise compile
    fine on many systems that doesn't support it
  * added a test for the BeOS way of doing non-blocking sockets (based on a
    patch from Shard)

- curlx.c example added

- - Vincent Bronner pointed out that if you set CURLOPT_COOKIE for a transfer
    and then set it to NULL in a subsequent one, the previous cookie was still
    sent off!

- Vincent Bronner pointed out that if you set CURLOPT_COOKIE to NULL, it still
  sends off the previously set cookie. This also concerns CURLOPT_REFERER.
  This fix should stop this.

- Jon Turner fix

- Jon Turner mentioned this bug fix to correct how libcurl deals with paths
  after a failed transfer.

- fixed ares-resolves and ip-only names

- Based on a patch provided by Siddhartha Prakash Jain. In Curl_resolv() when
  my_getaddrinfo() has been called (and wait has been set to TRUE), we check
  if the name already is resolved and if so don't return wait status to the
  parent. This can happen with IP-only names.

- CURLOPT_NOBODY means HEAD on HTTP servers

- Peter Sylvester's curlx.c code example added

- proto fix

- Renamed the function argument named 'access', as noted by Neil Spring in the
  debian bug report #213180.

- James MacMillan's patch makes curl build on QNC 6.2.x.

- documented the new 7.10.8 -T functionality

- -4 and -6 added

- more details

- updated to match reality

- real name

- ip version selector, SPNEGO feature added to -V output

- Added -4/--ipv4 and -6/ipv6.
  Re-arranged some option code.

- cut the leading blurb, that will be used for the mail announce only, not
  the actual text included here

- Include the RELEASE-NOTES file too, which is basicly the release announce
  message.

- working draft of the upcoming 7.10.8 release notes

- 7.10.8-pre2

- another segfault with multi+ares+non-existing hostname

- failing to resolve a name using ares must Curl_disconnect() the handle
  properly or risk getting into trouble!

- find and detect the Heimdal GSSAPI include path properly

- Added CURLOPT_IPRESOLVE support

- Markus Moeller's SPNEGO patch applied, with my edits, additions and minor
  cleanups.

- updated

- language

- bug fixes

- If a connection is closed down and it had some kind of NTLM involved, we
  reset the authentication state to make it restart on the next connection.
  
  This of course because NTLM is connection-oriented, whilst all other
  authentication schemes are not.

- Test 90 added: --anyauth that picks NTLM with a redirect and then another
  NTLM request.

- minor difference in how the part number magic is made

- make the NTLM part numbers get increased instead of plainly assigned, as
  this then makes redirection tests work (as the new test 89)

- test 89 verifies -L and ntlm authentication, as bug report #806328 claimed
  it doesn't work. It works for me.

- test88, doing PUT with --digest now works

- When we issue a HTTP request, first make sure if the authentication phase
  is over or not, as if it isn't we shall not begin any PUT or POST operation.
  
  This cures bug report #805853, and test case 88 verifies it!

- new ares patch uploaded

- Jeff Pohlmeyer is our hero of the week!

- reverted the change that blanks LIBS

- Jeff Pohlmeyer did some marvelous debugging to track this one down. We MUST
  NOT free the existing hash entry when we try to add a new one that matches
  an existing entry. We now instead free the new one, and make the parent
  function use the old entry's struct instead.

- blank the LIBS variable, as we don't need any libs when we link the lib.

- Added more docs for DEBUGFUNCTION as suggsted by Mohun Biswas

- multi handle DNS cache, "Negotiate" authentication, zero-length proxy with
  ftp and an uninitialized pointer

- clear the proxy env

- When people have environment variables set for protocol proxies, we must make
  sure to clear them before we run the tests as they interfere badly otherwise.

- Tim Bartley's patch that makes the GSSNEGOTIATE option work for Microsoft's
  "Negotiate" authentication as well.

- For easy handles within multi handles, we share the DNS cache always.

- #ifdef 0'ed Curl_llist_insert_prev and Curl_llist_remove_next, as they are
  not used by any code in libcurl!

- don't use a blank proxy

- Curl_is_resolved(): FD_ZERO the file descriptors before we call ares_fds().
  Problem tracked down by Bjorn Reese.

- 7.10.8-pre1 commit

- do not use 'long' to store 4 bytes, as 64bit architectures have 64bit longs.

- yesterday and today in words

- Uses less macros. #ifdef'ed out unused functions. Edited slightly to be
  more in the same style as other curl source code. The only actual code change
  is an added check after a malloc() call.

- Early Ehlinger's CURLOPT_FTP_RESPONSE_TIMEOUT option documented by himself.

- --enable-thread was broken and this should cure it
  Kevin Fisk reported.

- CURLINFO_HTTPAUTH_AVAIL and CURLINFO_PROXYAUTH_AVAIL

- no user or password set, bail out

- ah, this change broke multiple test cases

- Jrg pointed out that I did this fix wrongly, now authwant is cleared
  properly if no auth is available

- Based on Joerg Mueller-Tolk's patch, this introduces support for
  CURLINFO_HTTPAUTH_AVAIL and CURLINFO_PROXYAUTH_AVAIL

- 1. store the httpproxycode in the loop after it is parsed
  2. made Curl_http_auth_act() reset 'authavail' unconditionally

- avoid proxy (and other) auth if no user+password is given

- added the missing share-functions, pointed out by Edward Chan

- Early Ehlinger's CURLOPT_FTP_RESPONSE_TIMEOUT patch applied.

- recent fixes

- Re-arranged code to make the proxy-CONNECT loop able to do some of the
  authentication negotiations needed for NTLM, Digest etc.

- Joerg Mueller-Tolk's fix to better deal with user+passwords for proxies

- minor fix to make better bail-out check

- warn if no CN is available if verify is only set to 1

- stuff I had added in my copy at home, now at last I'm online from here
  again

- Peter Pentchev found two problems. One realloc problem that could allocate
  too little data, and one case of not zero-terminating the returned string.
  
  I chose a slightly different patch than the one Peter provided.

- wrap at 80 cols

- two patches applied

- "Securing FTP with TLS" was updated to revision 12

- LDAP fixed in CVS (for upcoming 7.10.8)

- Henrik Storner's update to make libcurl work with OpenLDAP 2.1.22 (current).
  Also reported to work with OpenLDAP 2.0.26.

- CURLE_LDAP_INVALID_URL added (by Henrik Storner)

- The error buffer was not getting filled when Curl_wait_for_resolv() fails.
  Jeff Pohlmeyer fixed.

- typecase to please the compiler gods

- typecast to prevent compiler warning

- CURLOPT_BUFFERSIZE must not be smaller than 0 (zero) as that is impossible
  for us to deal with

- Henrik Storner's rewrite that includes a nice usage of curl_multi_info_read()

- only do chmod if there's a file present

- added the strcasecmp() proto here (moved from setup.h), as this is the
  only file within libcurl to use that function

- removed the strcasecmp() proto from here, and moved it to the strequal.c
  file instead

- we support any number of globs now, even for #[num] ones

- have cwd_and_mkd prefixed with ftp_ to make it appear as a ftp-only
  function

- use proper type to prevent compiler warning

- Vincent Sanders provided a fix for name resolving when linked with uClibc.

- CURLINFO_RESPONSE_CODE instead of CURLINFO_HTTP_CODE

- CURLINFO_RESPONSE_CODE replaces CURLINFO_HTTP_CODE

- store the FTP response code in the httpcode variable

- removed the goto and re-indented slightly

- transfer fix for multi interface

- made curl_multi_info_read() set 'msgs_in_queue' to 0 even when it returns
  NULL!

- recent action

- Now offering support for multiple -T on the same command line, just make
  sure you have one URL for each -T. A -T file name can also be "globbed"
  like -T "{file1,file2}".
  
  Test case 149 verifies this functionality.

- test case 149 is here

- switch off globbing to enable [] in file names for -T

- check the upload

- teste multiple uploads in one command line

- make sure the 'done' variable is always set to something in the
  Curl_is_resolved() function

- when --enable-debug is used to set debug options with gcc, use -Wno-long-long
  to inhibit long long warnings (ISO C90 does not support `long long')

- Respect HAVE_LONGLONG to support 'long long'

- check for CRYPTO_cleanup_all_ex_data as well

- CRYPTO_cleanup_all_ex_data() is not present in all OpenSSL versions so
  we need to check for its presence in the configure script

- better ignore pattern

- test507 for multi with bad host name

- test507 added

- don't set done==TRUE if the host name doesn't resolve

- Loren Kirkby pointed out that we need to call CRYPTO_cleanup_all_ex_data()
  when we cleanup the SSL stuff to not leak any memory.
  
  I wish this was documented anywhere.

- minor edit

- minor edits

- set the large-file support defines for the client too

- setting WRITEFUNCTION or READFUNCTION to NULL will now reset the callback
  pointers to the internal default functions

Version 7.10.7 (15 Aug 2003)

Daniel Stenberg (15 Aug 2003)
- 7.10.7

- removed lots of "added in [version]" where [version] is resonably old

- check for long long
  changed the use of AC_CHECK_TYPE as the previous approach is deprecated
  require 2.57 properly

- Possible code for large file support, added within #if 0 so far.

- new Russian mirror both web and download

- supprt for the new memlimit stuff

- added one "added in blabla" and removed a few

- Curl_SSL_InitSessions can return error, so check the return code and bail
  out if necessary

- Curl_llist_destroy() checks the input for non-NULL

- new proto for Curl_hash_init

- 1. check allocs
  2. don't leave allocated memory behind when returning error

- return failure when the host cache creation fails

- activate the new memory limit tests if requested
  only set cookiejar if selected

- return failure when an alloc function fails

- prevent memory leak when going out of memory

- allow out-of-memory testing by setting a limit. That number of memory
  allocation calls will succeed, the following will return NULL!

- better freeing when bailing out due to bad output glob

- free data on failure

- test87 verifies the new and better check for bad -o #[num] stuff

- ignore the .pid files

- ignore lib506 too

- better report on why tests are skipped, and also show a count of the amount
  of test cases that were "considered".

- In case the output urlglob file name returned is NULL, then there was
  badness in the string and we help our user by returning an error.

- modified the #[num] code to be more robust, to return NULL on errors and
  to support numbers larger than 9

- corrected this test case

- test urlglobbing range requests

- test86 added

- David Byron's fix that makes this script use 'cygpath' instead of 'pwd' if
  this runs on windows, to find out the current working directory.

- 7.10.7-pre4 commit

- nicer make target for the pdf conversion

- don't treat index.html as the generated HTML pages

- added the new man pages

- corrected return type

- added the new curl_share_* man pages, the libcurl-easy, the libcurl-share,
  made the generated pdf and html files get removed on 'make clean'. Made
  the pdf conversion remove the temporary .ps files.

- separated the easy-specific stuff into a new libcurl-easy.3 man page and
  made the libcurl.3 one a more generic overview

- added the asynchdns bit

- Bugfix from Serge Semashko that fixes a bug introduced when we applied his
  NTLM patch. Test case 84 and 85 verify this.

- more auth tests

- Added support for CURLINFO_HTTP_CONNECTCODE

- bindlocal works for Windows!

- Check CURL_VERSION_ASYNCHDNS for feature output

- Set the CURL_VERSION_ASYNCHDNS bit if USE_ARES is defined.

- Added CURLINFO_HTTP_CONNECTCODE
  Added CURL_VERSION_ASYNCHDNS

- mention curl_version_info

- mention the pre3 release

- Vincent Sanders's massive update of this example code. One could argue
  weather this is still an "example" or a whole new API layer! ;-)

- edits

- two more known bugs

- added include "http.h" to prevent a warning

- define USE_ARES nicer if enabled

- use safefree instead

- forgot the backslash

- memory leak fixed when re-using connections with proxy user+passwd

- --proxy-ntlm added

- 81 + 82 test NTLM proxy stuff

- remodeled the help text to avoid those annoying puts() problems when a
  string reaches > 512 bytes...

- CURLOPT_PROXYAUTH explained

- CURLOPT_PROXYAUTH added by Serge Semashko

- Serge Semashko added CURLOPT_PROXYAUTH support, and now NTLM for proxies
  work.

- Christian Beutenmueller corrected the CURLOPT_FILE referer, as we nowadays
  call it CURLOPT_WRITEDATA.

- added test80

- tunnel through proxy, with both proxy and regular authentication

- -Z and -@ no longer work, they are now officially available for other
  options, more frequently used, in a future release

- added test 79, a basic test that fetches an FTP URL over a HTTP proxy

- the new cookie functions that require 'data' passed in

- support sending off cookies without contents

- Added some infof() calls, that require the data pointer so now several
  cookie functions need that.
  
  I also fixed the cookie loader to properly load and deal with cookies without
  contents (or rather with a blank content).

- added Dirk Manske

- removed the dashes

- documenting the share interface

- removed the BUGS section

- remove the BUGS section

- fix lines that start with "

- test case 506 added, written by Dirk Manske

- Dirk Manske's bugfix for the share stuff

- don't claim the PASV connect is connected unless it *really* is!

- make sure the string is long enough

- Gisle Vanem fixed a single-byte overflow

- David Byron's fix for file:// URLs with drive letters included.

- chmod the cabundle file before we attempt to write to it, to make
  make distcheck run fine

- ftp create dirs work done

- added CURLOPT_FTP_CREATE_MISSING_DIRS

- ftp-create-dirs test when MKD fails

- --ftp-create-dirs

- introducing --ftp-create_dirs

- --ftp-create-dirs test

- Support COUNT in the control file, to set the number of times the custom
  REPLY is to be sent back before getting blanked and reverted to the built-in
  action. Now, we can make CWD fail once and then succeed when retried.

- re-arranged the cwd/mkd stuff a bit

- Early Ehlinger's CURLOPT_FTP_CREATE_MISSING_DIRS patch was applied

- new -z tests

- corrected main meta data title

- added CLEANFILES to make distcheck run fine

- infilesize must be a long to work on 64bit archs

- use 644 for the chmod

- argh, it wasn't *that* easy to generate the ca-bundle header in the build
  dir instead of the source dir, reverting that change

- fixed syntax error

- better cleaning up of memory in case of failures in the get-loop (it was
  taken care of by the exit-free anyway but caused test case 75 and 76 to
  report memory leaks).
  
  Also re-indented a small section.

- better cleaning up allocated memory in case of failures

- more tests

- new urlglob test

- minor cleanup

- explain more how the test case number awareness is sent to the test server(s)

- fix the treatment of the variable width specifier '*', which caused a bug
  in the urlglobbing just now, fixed in the debian bug tracker as Bug#203827

- make an uninstall hook in the same manner we already did an install hook
  as otherwise will make distcheck fail

- chmod the hugehelp.c in the dist hook to make distcheck run fine

- generate the ca-bundle.h in the build dir, and also make sure to chmod
  the file in the dist-hook to make distcheck run fine

- Domenico Andreoli fixed the section number in the main meta data

- include "share.h" for the cookie sharing

- make it build without ares support
  make sure it set async false even when using ipv6 (made test case 20 fail
  before)

- 505 was missing

- more fix

- updated the ares instruction

- LDFLAGS fix to make the GSSAPI build again

- added README.ares

- how to build with ares

- ares awareness/usage/support added. If configure --enable-ares is used, we
  build libcurl to use ares for asynch name resolves.

- Add --enable-ares support, which will make us build curl with ares for
  asynch name resolves. Still very experimental, beware!

- clean up the dir tree hierarchy in *_done() to make persistant connection
  FTP use the correct directories!
  
  Reported in bug report #783116

- added test 146 for a ftp persitency test, as reported on the list

- persistant connection test

- auth problems

- cleaned up after David Byron's comment on the libcurl list, aug 5 2003

-   Jan Sundin reported a case where curl ignored a cookie that browsers don't,
    which turned up to be due to the number of dots in the 'domain'. I've now
    made curl follow the the original netscape cookie spec less strict on that
    part.

- added test 73

- Verifies Jan Sundin's cookie bug, dated aug 4 2003.

- Dirk Manske's patch that introduces cookie support to the share interface.

-  Mark Fletcher provided an excellent bug report that identified a problem
   with FOLLOWLOCATION and chunked transfer-encoding, as libcurl would not
   properly ignore the body contents of 3XX response that included the
   Location: header.

- serios info leakage!

- When proxy authentication is used in a CONNECT request (as used for all SSL
  connects and otherwise enforced tunnel-thru-proxy requests), the same
  authentication header is also wrongly sent to the remote host.
  
  The name and password can then be captured by an evil host and possibly get
  used for malicious purposes.

- updated as the second proxy-auth header was a proof of a serious info leak
  bug!!

- Joerg Mueller-Tolk fixed a minor mistake

- recent action

- David Byron's makefile fix to allow 7.10.6 to build fine using VC

- add a check for 'ar' since the lack of it bit Jared Ingersoll
  we might need to check for some other tools too that on Solaris are put
  in those weird dirs...

- removed silly target that only works when building from CVS

- Jrg Mller-Tolk updated this to build fine with 7.10.6

- ftp proxy support would be nice

- updated to match the recent ftp patch that makes it check for resumability

- Daniel Noguerol made the ftp code output "Accept-Ranges: bytes" in similar
  style like other faked HTTP headers when NOBODY and HEADER are used.

- Make sure to generate an uncompressed hugehelp.c file for inclusion in
  the distribution archive, as it isn't sure zlib is present everywhere. Those
  who care much for compressed help should regenerate the file.

- Reverted the 'filetime' struct field back to a 'long' as time_t is sometimes
  unsigned and we want this to be able to hold -1 for illegal/unset values.

- CURLDEBUG not MALLOCDEBUG

- Fixes based on Gisle Vanem's input since this script failed due to
  possibly crlf newlines.

- Digest *OR* Basic authorization test

Version 7.10.6 (28 Jul 2003)

Daniel Stenberg (28 Jul 2003)
- 7.10.6

- clear http->send_buffer when we have freed the memory it pointed to

- updated to the new ftp dir parsing code that allows a preceeding double
  slash

- As noticed by Kevin Roth, we shall not speak of root dir when it isn't
  necessarily the root...

- Franois Pons brought a patch that once again made curl deal with ftp and
  "double slash" as indicating the root directory. In the RFC1738-fix of April
  30, that ability was removed (since it is not the "right" way).

- use the correct 'test71' file name for the temp file

- got a bug report on -F in config files, so I wrote up this test to verify
  that is works... and it did! ;-)

- having it in CVS causes us problems *grrr*

- Andrs Garca updated with the added files etc

- With an unknown CA path, we undef the variable. To build properly without
  SSL/CA.

- only check for CA bundle path if build with SSL support
  set a conditional for the makefile if we know the CA path or not

- Removed #include <sys/resource.h>, as pointed out by Henry Bland we don't
  need it.

- the test compared numericly if though it could contain a string, and I
  lowered the number of retries to 10

- When we re-use an existing connection we must make sure that we don't
  accidentally re-use the connect_addr field, as that might no longer be
  around. Fix verified by Tracy Boehrer who basicly debugged and tracked down
  this problem.

- minor code style fix

- Split out the changes from the year 2002 into a separate file, named
  CHANGES.2002.

- SSLCERTS was moved into the docs/ directory

- moved SSLCERTS into the docs/ directory

- Daniel Kouril's fix to make the GSS-Negotiate work fine.

- Juan F. Codagnone's fixes to build properly on Windows again

- Plain default version of this file, to allow users to build easier from
  CVS. This will be updated by the configure script, and a default is placed
  here by the maketgz script.

- reversed the check for GSSAPI when request that auth

- CURLDEBUG, not MALLOCDEBUG

- More support for NTLM on proxies, now proxy state and nonce is stored in
  a separate struct properly.

- The NTLM functions now take a 'proxy' argument as well.

- Added a separate struct for the proxyntlm data, as it will/can be different
  than the remote server's. That is, both the server and the proxy can in
  fact require NTLM auth.

- CURLDEBUG is the symbol now

- Don't depend on the TIME_WITH_SYS_TIME define. win32 doesn't have sys/time.h
  and I don't think we need it.

- moved the proxyuser and proxypasswd fields from the sessionhandle to the
  connectdata to work as expected

- adjusted to support NTLM for proxies

- krb4-fixes for the moved user+password fields within the structs

- pre4-commit

- pre4

- the CWD-null bug fix

- the fixed skip-blanks in the FTP CWD code called for this adjustment

- David Gardner pointed out in bug report 770755 that using the FTP command CWD
  with a blank argument is a bad idea. Now skip blanks.

- If NTLM is requested, only re-use connections that have the exact same
  credentials.

- explains my fixes just committed

- modified to work fine with the new persistant connection working test suite
  HTTP server

- swsclose added

- Access the user and passwd fields from the connectdata struct now instead
  of the sessionhandle struct, as that was not good.

- No longer stores user+password in the sessionhandle, now doing that in the
  connectdata struct instead. Each being an allocated pointer.
  
  The passwdgiven field was turned into a local variable in the only
  function it was being used.

- fixed the CONNECT thing again

- If the data contents contains the word 'swsclose', then this server will
  disconnect the client after the response have been sent. This also happens
  if the respons is zero byte long.
  
  In all other cases (unless an error happens), it will now maintain the
  connection to allow proper persistant connection testing. This was required
  for the NTLM testing to work so I finally had to fix this. Of course most of
  the existing HTTP tests will be adjusted to work with this new rule of test
  file syntax for HTTP tests.
  
  Also fixed the log function to deal with varargs for better logging.

- recent changes

- more fixes from Doug Kaufman for DJGPP builds for DOS

- updated to work with Dan Winship's NTLM domain stuff fix

- Moved the NTLM credentials to the connectdata struct instead, as NTLM
  authenticates connections and not single requests. This should make it work
  better when we mix requests from multiple hosts. Problem pointed out by
  Cris Bailiff.

- Fix to the endless loop of bad Basic authentication as reported in Cris
  Bailiff's bug report 768275.

- Dan Winship's patch added that makes use of DOMAIN\USER or DOMAIN/USER
  for the user field. I changed it slightly to stay with strchr() only instead
  of strpbrk() for portability reasons.

- Dan Winship's fix to make the new auth stuff such as NTLM to work with
  the multi interface

- Dan Winship pointed out this flaw

- re-use existing variable instead of declaring a new local one

- Some of Doug Kaufman's changes for the DOS port

- the latest changes

- HAVE_SETVBUF removed, no longer used

- removed

- Dan Grayson pointed out that we set the CURL_CA_BUNDLE variable wrongly in
  the configure script. We set it differently now and generate the
  lib/ca-bundle.h file entirely.

- remove the usage of setvbuf() and use fflush() instead if no buffering should
  be done on the output

- CURLDEBUG not MALLOCDEBUG anymore

- adjusted to the NTLM updates

- Peter Sylvester's patch was applied that introduces the following:
  
     CURLOPT_SSL_CTX_FUNCTION to set a callback that gets called with the
     OpenSSL's ssl_ctx pointer passed in and allow a callback to act on it. If
     anything but CURLE_OK is returned, that will also be returned by libcurl
     all the way back. If this function changes the CURLOPT_URL, libcurl will
     detect this and instead go use the new URL.
  
     CURLOPT_SSL_CTX_DATA is a pointer you set to get passed to the callback set
     with CURLOPT_SSL_CTX_FUNCTION.

- David Byron's patch that allows a client to make the server quit with a
  magic url.

- new CVS info

- Gisle Vanem found a lib handle leak in the ldap code

- When I introduced the DIST_SUBDIRS usage, I broken the 'make install' for
  include files and docs, so now I've added a custom install hook to run
  make install for docs and install when data is installed at the top-level.

Sterling Hughes (26 Jun 2003)
- revert out my bogus commit. ;-)

- test commit

Daniel Stenberg (26 Jun 2003)
- new tests

- produce a skip-report at the end of all tests, and thus record and count
  them properly

- beautified and added comments all over

- mention the new flag bits we support

- mention that it copies the string you add

- added lots, mostly the new auth-related option(s)

- added lots of auth stuff and updated other things too

- mention COOKIES, removed added entries, corrected the FPL-SSL link/reference

- mention the other formats the docs come in

- adjusted to recent changes

- we do support NTLM now...

- CURLDEBUG is the symbol to use, no longer MALLOCDEBUG

- adjusted the compressed generation to be more helpful in comments etc

- support for the new auth stuff
  more output on --version/-V
  mention --manual on the help output text

- new httpauth support, changed filetime variable kind

- added CURLOPT_HTTPAUTH support

- Adjusted to work properly with the new authentication stuff
  Added code to deal with white spaces in relocation headers.

- use CURLDEBUG instead of MALLOCDEBUG

- use CURLDEBUG

- adjusted to use the same API as the OpenSSL version of the MD5 functions

- added ntlm flag bits

- Many fixes, most of them based on comments by Eric Glass

- new proto for Curl_input_negotiate

- kill warnings

- major adjustments to the new authentication support

- include GSS in the debug string if available, support a few new flag
  booleans

- use CURLDEBUG instead of MALLOCDEBUG for preprocessor conditions

- use CURLDEBUG instead of MALLOCDEBUG

- one typecast less for the localtime(), use CURLDEBUG instead of MALLOCDEBUG

- use CURLDEBUG instead of MALLOCDEBUG

- CURLDEBUG instead of MALLOCDEBUG

- We noe use CURLDEBUG instead of MALLOCDEBUG

- moved from former CVS

- Added time_t

- up to date with the actual situation

- Cris Bailiff's patch that should make us do NTLM correctly. When we've
  authenticated our connection, we can continue without any Authorization:
  headers as long as our connection is maintained.

- stdout is good enough

- work more on pids, less on pidfiles to be able to do better kills at the
  end of the test where the pidfiles aren't found, but "our" server is running

- fixed NTLM test 67, added test 68 for bad NTLM name/password

- Cris Bailiff's bugfix

- use more curlish strings, these should be able to change...

- Marty Kuhrt's #include fixes for VMS

- get and use only the first line of the curl --version output

- modified

- Make the HTTP auth stuff work, Dan Fandrich made --version output a list
  of all supported protocols.

- remove the dumpit file after use

- corrected a comment

- CURLHTTP* renamed to CURLAUTH* and NEGOTIATE is now GSSNEGOTIATE as there's
  a "plain" Negotiate as well.

- NTLM test case

- require the netrc_debug feature the same way we now can require SSL
  present client-side

- now test cases can be set to be dependent on the presence of "SSL" in the
  client/library

- make it build with older OpenSSL

- attempt to make older OpenSSL versions work with the DES stuff

- Based on Dan Fandrich's patch and gzip unpack function, we now compress
  the 'hugehelp' text if libz and gzip are available at build time.

- store HAVE_LIBZ as an automake conditional

- fixing details for NTLM

- more how I envision it _should_ work, but it still doesn't...

- to support "redirects" after the full body is transfered

- made a nicer output for the decode test, as it served as a nice tool for me ;-)

- when we get the auth headers, we still need to read out the full body response
  as otherwise we can re-send requests on the same connection nicely

- correct mistakes

- describe the NTLM mechanism too

- basic NTLM support

- ntlm added

- Initial take at NTLM authentication. It doesn't really work at this point
  but the infrastructure is there.

- clarify the CUSTOMREQUEST and HTTPHEADER options slightly

- CURLOPT_HTTPAUTH docu

- Set auth type differently, we use one CURLOPT_HTTPAUTH instead as we plan
  to add more method in the future.

- Daniel Kouril for the HTTP negotiate stuff

- Daniel Kouril's patch that adds HTTP negotiation support to libcurl was
  added.

- we fix more

- more generic

- Pass the error stream pointer to the URL globber, so that it can report
  errors correctly to the user, if need be.
  
  Also fixed so that a missing ] in the globbing process no longer leads
  to core dump.

- When doing very big GET requests over HTTPS, we need to add some extra
  funky logic in order to make re-tries work fine with OpenSSL. This corrects
  the problem David Orrell noticed.

- Just moved around some logic in Curl_write() to make it easier to debug.

- spellfix

- Reversed the logic to only include the <sys/select.h> header on systems
  known to really NEED it as another system that doesn't have it came up:
  very old Linux libc5-based systems (as addition to all HPUX versions).
  
  The only known system at this point is AIX.

- LDAP problem added as mention in bug report #735752

- include the time headers just like we used to do in the curl/curl.h header
  once upon the time

- we want the time defines too

- Content-Length: now overrides other means of knowing when the stream has
  ended.

- Make the Content-Length info override the Connection: close header, so that
  libcurl will stop reading when the number of bytes have arrived and not wait
  for a closed socket.

- the 500-599 test case range

- ignore more

- ignore

- David Byron's fix to get the progress-bar use the local size too when
  doing a resumed download.

- makefile fiddle
  changed how http requests are sent - now in one chunk more often
  HPUX include fix in the external headers
  better SSL work-arounds for bad SSL servers
  modified error message when CURLE_HTTP_RETURNED_ERROR is returned

- work-around SSL implementation flaws better, pointed out in bug report
  #745122.

- make a more descriptive error message when CURLE_HTTP_RETURNED_ERROR is
  returned

- haven't updates this in a loooong time

- Posting static data using POST and chunked encoded now also appends the
  data to the initial request buffer, if the total post data is less than
  100K.

- include sys/time.h, we didn't have a time() proto anymore. Did one of the
  changes in curl/curl.h make this occur?

- Documented which rules the public headers must follow when we write
  preprocessor checks for condititions.

- oops, removed a # too many

- remove usage of HAVE_* defines, we cannot and shall not depend on any such
  defines in the public external header files

- sys/select.h is not present on HPUX, avoid including it

- made it work ;-)

- if cvs update fails, attempt again after 5 seconds and retry 50 times
  before giving up

- Only build in lib and src by default, make the others dist-subdirs.
  Make the test stuff get built when we run 'make test' instead.

- Rudy Koento experienced problems with curl's recent habit of POSTing data in
  two separate send() calls, first the headers and then the data. I've now made
  a fix that for static and known content that isn't to be chunked-encoded,
  everything is now sent in one single system call again. This is also better
  for network performance reasons.

- runs on DOS now

- include file flaw and yet another socks5-fix

- Another socks5-fix. Make sure that when we use a socks-proxy, it is not the
  same as using a httpproxy so we must make sure to better check for http
  proxies before we do HTTP proxy stuff. This included authorization and
  URI usage in the request etc.

- CURLOPT_HTTPDIGEST is added

- language

- ftp ASCII transfers in general need fixing

- Chris Lewis mentioned that he doesn't get WIN32 defined, only _WIN32 so we
  make an adjustment to catch this.

- even more

- Ricardo Cadime found a socket leak when listing directories without
  contents. Test cases 144 and 145 were added to verify the fix.
  
  Now we deal with return code 450 properly and other codes also do proper
  cleanup.

- more ftp testing using NLST and no contents and bad return code

- Rudy Koento's problem fixed, test case 66 verifies this.

- test 66 returns one line of data with no header (HTTP)

- --digest added, --compressed rephrased

- include digest.h for proto

- DJGPP fix by Gisle Vanem

- more more more

- warning-free is better

- Introducing --digest

- Better Digest stuff

- Added CURLOPT_HTTPDIGEST support
  SOCKS5 fix as suggested by Jis in bugreport #741841.

- Document the <dataNUM> thing we use,

- Digest support added

- Digest testing added

- proper header added

- hush the compiler

- Initial Digest support. At least partly working.

- David Balazic pointed out the lack of checks for a valid %XX code when
  we unescape a string. We now check and decode only valid %XX strings.

- fix the makefile in packages/DOS too

-  Gisle Vanem made curl build with djgpp on DOS.

- Gisle Vanem's fix to make the 'curl -M' output nicer

- missing semicolon, by Gisle Vanem

- Gisle Vanem's code for not trusting h_aliases to always be non-NULL

- Remind about the gpg command lines

- support user name and password in proxy environment variables

- the proxy environment variables now may contain user name and password

- remove debug output

- setenv support added to allow test cases to require a set of environment
  variables

Version 7.10.5 (19 May 2003)

Daniel Stenberg (19 May 2003)
- 7.10.5 commit

- known AIX ipv6 problems

- Skip any preceeding dots from the domain name of cookies when we keep them
  in memory, only add it when we save the cookie. This makes all tailmatching
  and domain string matching internally a lot easier.
  
  This was also the reason for a remaining bug I introduced in my overhaul.

- change the order of the in_addr_t tests, so that 'unsigned long' is tested
  for first, as it seems to be what many systems use

- 1. George Comninos' progress meter fix
  2. I also added the pre-releases and dates to the log

- documented CURLOPT_FTP_USE_EPRT

- George Comninos provided a fix that calls the progress meter when waiting
  for FTP command responses take >1 second.

- Setup and use CURL_INADDR_NONE all over instead of INADDR_NONE. We setup
  the define accordingly in the hostip.h header to work nicely all over.

- before using if2ip(), check if the address is an ip address and skip it if
  it is.

- libtool 1.4.2 is enough

- fix comment

- before checking for network interfaces using if2ip(), check that the given
  name isn't an ip address

- no more complaining when I have 1.5 and it tests for 1.4.2

- fixes from the last week+

- Dan F clarified the CURLOPT_ENCODING description after his changes to
  allow "" to enable all support formats.

- Dan Fandrich added --compressed docu

- setting ENCODING to "" means enable-all-you-support

-  Dan Fandrich changed CURLOPT_ENCODING to select all supported encodings if
   set to "".  This frees the application from having to know which encodings
   the library supports.

- Dan Fandrich lowered the libtool requirement

- when we have accepted the server's connection in a PORT sequence, we set
  the new socket to non-blocking

- avoid the write loop

- incoming proxy headers shall be sent to the debug function has HEADERs not
  DATA

- oops, run libtoolize as the first tool

- run libtoolize too

- run libtoolize to generate these files

- CURLOPT_FTP_USE_EPRT added

- --disable-eprt added

- support for CURLOPT_FTP_USE_EPRT added

- AIX wants sys/select.h

- clarify on the curl name issue and that there may be other libcurl-based
  tools that provide GUI

-  Kevin Delafield reported another case where we didn't correctly check for
   EAGAIN but only EWOULDBLOCK, which caused badness on HPUX. We also check for
   and act the same on EINTR errors as well now.

- fixed the required tools' version numbers

- the writable argv check now should not exit when building a cross-compiled
  curl

- put back the libtool test, now for 1.5
  require autoconf 2.57
  require automake 1.7

- If there is a custom Host: header specified, we use that host name to
  extract the correct set of cookies to send. This functionality is verified
  by test case 62.

- send correct cookies when using a custom Host:

- fixed the format slightly

- corrected a comment about gzip not being supported

- FTP URL with type=a

- Andy Cedilnik fixed some compiler warnings

- ourerrno became Curl_ourerrno() and is now available to all libcurl

- Use the proper Curl_ourerrno() function instead of plain errno, for better
  portability. Also use Andy Cedilnik's compiler warning fixes.

- the test numbers are now only for human readability, the numbers no longer
  enforces protocol/server

- no longer assume that the test number implies servers to run

- Each test case now specifies which server(s) it needs, without relying on the
  test number.

- we say welcome to test 142

- verify that curl fails fine when an FTP URL with a too deep dir hierarchy
  is used

- when making up the list of path parts, save the last entry pointing to NULL
  as otherwise we'll go nuts

- recent action

- if there's a cookiehost allocated, free that too

- ok, make the test run ok too

- various new cookie tests with a custom Host: header set

- modified to work with modified code

- modified to produce nicer output when a single test fails

- make the diffs with 'diff -u' to make them nicer and easier to read

- stop parsing Host: host names at colons too

- modified to the new cookie function proto

- extract host name from custom Host: headers to use for cookies

- Many cookie fixes:
    o Save domains in jars like Mozilla does. It means all domains set in
      Set-Cookie: headers are dot-prefixed.
    o Save and use the 'tailmatch' field in the Mozilla/Netscape cookie jars (the
      second column).
    o Reject cookies using illegal domains in the Set-Cookie: line. Concerns
      both domains with too few dots or domains that are outside the currently
      operating server host's domain.
    o Set the path part by default to the one used in the request, if none was
      set in the Set-Cookie line.

- changes need for the new ftp path treatment and the new cookie code

- David Balazic's patch to make the FTP operations "do right" according to
  RFC1738, which means it'll use one CWD for each pathpart.

- two more platforms Rich Gray built curl on

-  Peter Kovacs provided a patch that makes the CURLINFO_CONNECT_TIME work fine
   when using the multi interface (too).

- mention configure --help

- CURLOPT_FTPPORT could support port number too

- corrected the comment which wasn't correct

- RSAglue.lib is no longer needed with recent OpenSSL versions

- Dan Fandrich added support for the gzip Content-Encoding for --compressed

- Bryan Kemp's reported problems with curl and PUT from stdin and a faked
  content-length made me add test case 60, that does exactly this, but it
  seems to run fine...

- last 10 days or so

- libtool 1.5 stuff

- stop checking for libtool, we don't run that in this script

- Dan Fandrich corrected the error messages on "bad encoding".

- Dan Fandrich's gzip bugfix

- Dan Fandrich's fix

-  Peter Sylvester pointed out that curl_easy_setopt() will always (wrongly)
   return CURLE_OK no matter what happens.

- two dashes is enough

- typecast the setting of the size, as it might be an off_t which is bigger
  than long and libcurl expects a long...

- If MALLOCDEBUG, include the lib's setup.h here so that the proper defines
  are set before all system headers, as otherwise we get compiler warnings
  on my Solaris at least.

- include config.h before all system headers, so that _FILE_OFFSET_BITS and
  similar is set properly by us first

- extended the -F section

- treat uploaded .html files as text/html by default

- return the same error for the sslv2 "certificate verify failed" code

- new wording by Kevin Roth

- ignore all stamp-h*

- With the recent fix of libcurl, it shall now return CURLE_SSL_CACERT when
  it had problems withe CA cert and thus we offer a huge blurb of verbose
  help to explain to the poor user why this happens.

- Restored the SSL error codes since they was broken in the 7.10.4 release,
  also now attempt to detect and return the specific CACERT error code.

- FTP CWD response fixed
  gzip content-encoding added
  chunked content-encoding fixed

- clarified the CURLINFO_SIZE_DOWNLOAD somewhat on Juan F. Codagnone's
  suggestion

- Nic fixed so that Curl_client_write() must not be called with 0 lenth data.
  
  I edited somewhat and removed trailing whitespaces.

- Nic Hines fixed this bug when deflate or gzip contents were downloaded using
  chunked encoding.

- ah, move the zero byte too or havoc will occur

- verify the new url parser fix

- support ? as separator instead of / even if not protocol was given

- these guys deserve a mentioning here as well

- Dan the man on the list

- Dan Fandrich's added gzip support documented.

- Dan Fandrich's gzip patch applied

- when saving a cookie jar fails, you don't get an error code or anything,
  just a warning in the verbose output stream

-  According to RFC959, CWD is supposed to return 250 on success, but
   there seem to be non-compliant FTP servers out there that return 200,
   so we accept any '2xy' response now.

- show a verbose warning message in case cookie-saving fails, after
  Ralph Mitchell's notification.

- new ftp tests

- another week has passed

- Vlad Krupin's URL parsing patch to fix the URL parsing when the URL has no
  slash after the host name, but still a ? and following "parameters".

- oops, committed test code not meant to be here

- the default debugfunction shows incoming headers as well

- timecond support added
  made the Last-Modified (faked) header look correct using GMT always

- three new ftp tests

- <mdtm> added

- MDTM support added

- James Bursa fixed a flaw in the content-type extracting code that could
  miss the first letter

- share.c added

- --disable-eprt perhaps?

- Ryan Weaver's fix to prevent the ca bundle to get installed even when
  building curl without SSL support!

- adjusted the formpost testcases to the new boundary string construction

- Changed how boundary strings are generated. This new way uses 28 dashes
  and 12 following hexadecimal letters, which seems to be what IE uses.
  This makes curl work smoother with more stupidly written server apps.
  
  Worked this out together with Martijn Broenland.

- spell fix

- kill a compiler warning on cygwin

- Added log output for when the writing of the input HTTP request is successful
  or unsuccessful. Used to track down the recent cygwin test suite problems.

- Modified how we log data to server.input, as we can't keep the file open
  very much as it makes it troublesome on certain operating systems.

- new

Version 7.10.4 (2 Apr 2003)

Daniel Stenberg (2 Apr 2003)
- 7.10.4 commit

- Version 7.10.4

- documented the new killserver tag

- kill the ftp server afterwards, it is just so messed up

- log when we've returned verification that we are the test server

- support the new <killserver> tag

- ignore lib505 too

- lib505.c is a new test case for ftp uploading with rename

- Added support for the RNFR/RNTO commands

- updated

- move the ssl config clone call to before the connectionexists call and then
  also subsequently free the ssl struct if the connection struct is to be
  deleted

Sterling Hughes (31 Mar 2003)
- testing, ignore this commit

Daniel Stenberg (31 Mar 2003)
- 7.10.4-pre6 commit

- added dist-hook that clears the tests/log dir properly as otherwise
  'make distcheck' doesn't pass

- Fixup after talks with Richard Bramante. We should now make better
  comparisons before re-using SSL connections and re-using SSL connection IDs.

- --location-trusted added, which does a normal location plus the new
  CURLOPT_UNRESTRICTED_AUTH option set TRUE.
  
  Patch by Guillaume Cottenceau.

- Guillaume Cottenceau's patch that adds CURLOPT_UNRESTRICTED_AUTH that
  disables the host name check in the FOLLOWLOCATION code. With that option
  set, libcurl will send user+password to all hosts.

- 10 days of fixes

- clarify USERPWD somewhat more

- Frankie Fong filed bug report #708708 which identified a problem with
  ConnectionExists() when first doing a proxy connecto to a HTTPS site and then
  switching over to a HTTP connection to the same host.
  
  This fix corrects the problem.

- Dan Shearer's fix from bug report #618892, which makes 'curl -O' output
  an error message about a missing URL.

- send as much as possible of the POST at once

- added section titles and a CONTACT paragraph asking people to use the mailing
  lists

- fixed the pkg-config stuff for rh9

- add URLs to patch and diff

- mention the URL to the mailing lists

- attempt to extract openssl information using pkg-config

- Renamed configure.in to configure.ac, as this is the supposedly new preferred
  name for it.

- use init and copyright to get a better header in the generated script

- white space and indent fix

- ignore getdate.c

- Richard Bramante's provided a fix for a handle re-use problem seen when you
  change options on an SSL-enabled connection between requests.

- Removed the "TC TrustCenter, Germany, Class 0 CA." certificate:
  
  "It is a DEMO certificate and was never intended to be in any list of trusted
  CA certificates."
  
  (quote by Gtz Babin-Ebell, trustcenter.de)

- all those changes

- Hopefully this change addresses these two bug reports: 707003 and 706624.
  
  We need to make sure that when we init a 'connectdata' struct and then
  afterwards check for and re-use another one, we must be careful so that the
  newly set values are transmitted and used in the surviving connectdata struct.

- lib/getdate.c.cvs may need a rename if you don't have yacc or bison

- if the cvs update fails, don't continue further

- make the ENGINE depend on the USE_SSLEAY define too

- set binary mode for some file handling and it might work better on some
  cygwin installations (using DOS-style files somehow?)

- typecast the conversion from const char * to char *

- Rename getdate.c to getdate.c.cvs, since the "normal" build procedure do
  imply that yacc/bison exists and can generate this file. Those without one
  of those tools can then checkout and rename the getdate.c.cvs file.

- clarify that 22 can be returned on --fail for all HTTP errors being 400
  or above

- more defensive checking as platforms differ...

- Andy Cedilnik's corrections

- it just never ends

- regenerated from getdate.y

- Juan F. Codagnone pointed out a missing thing from the march 2 fix

- typecase getpid() to int to prevent compiler warning

- figure out select()'s argument types

- Gisle Vanem's fix to get this working nicely on windows

- Gisle Vanem fixed a name collision with structure '"CONTEXT" in <winnt.h>

- missing newline added

- no server needed

- allow 'none' as server

- Sort out the ENGINE problems people seem to be having. Now we put all ENGINE
  related stuff within HAVE_OPENSSL_ENGINE_H and we don't make any private
  typedef or similar if the header is missing...

- * use the pid returned back from test-servers and kill them before starting
    them the first time
  * verify that the server we start really comes up fine and works as
    expected before continue
  * count test cases where the server can't be run (for whatever reason)
  * prefix lots of messages with RUN: to make it easier to realize which script
    is saying what when running tests verbose
  * remove the generic sleep(1) from each test, makes the suite fly! ;-)
  
  I hope these changes will make the tests run somewhat more reliably on more
  platforms.

- report pid back in the WE ROOLZ message

- removed the "banner" when the server is starting

- detect lack of perl before running tests

- Rick Jones' minor thing to build better on HPUX 11

- Nico Baggus little adjustment to build with OpenSSL 0.9.7 (the ENGINE thing)

- improved "deeper" check

- No longer halts operation if select or socket are missing, since in most
  cases this is wrong... and if they're truly missing, we won't succeed to
  link later on anyway.

- Philippe Raoult needed this to build on FreeBSD

- Extra function-find magic for platforms that don't like the way the
  default AC_CHECK_FUNCS() work. HPUX 11 is one of them.

- output what cvs returned, see if we can make the script bail out when
  cvs update fails

- use include path from BUILD dir since we want the config.h

- Things are moving along...

- When we append stuff to the URL, we must make sure the text is properly
  URL encoded before. Test case 58 added to verify this.

- -m on curl on windows with telnet doesn't work

- This verifies that my fix for bug report #700275 works.

- test58 added

- improved the header checks
  --enable-libgcc
  check for a sed before using it

- Add include files to prevent warnings on some (HPUX) systems.

- include "config.h" from the lib's private dir

- Setup include path to the lib dir to enable inclusion of "config.h"

- Made set_local_option() properly static as reported by Rick Jones

- Prefix defines and symbols with CURL_ to reduce the risk of colliding with
  various system's other defines.

- support a few more common typedefs

- Massige use of AC_HELP_STRING() all over makes the --help output so much
  nicer!

- another week of changes, especially libtool gave us an adventure to remember

- syntax error

- Christophe Demory fixed the check to work better for non-blocking on HP-UX
  systems. Bug report #701749.

- Use ssize_t instead of 'int' to make the 64 bit sparc compiler happier.
  Fix by Richard Gorton.

- Richard Gorton improved the random_the_seed() function for systems where
  we don't find/know of a good random source. This way, we get a better
  randomness which in turn should make SSL connections more secure.

- don't check for netinet/if_ether.h, we don't include it and it causes
  configure warnings on many systems

- Martin C. Martin's fix to produce an error message in case of failure
  in the Curl_is_connected() function.

- added things to fix at the next major release/change

- clarify

- no the data is not freed, this is left for the app to do when needed

- AAAARG
  
  libtool 1.4.3 is scary as hell and caused just about every build on all sorts
  of platforms to stop working, thanks to the fact that it ruquires a SED
  variables somehow set by the configure script. It works fine on my linux
  running autoconf 2.57 and automake 1.7 but others seem not to do as fine.
  
  Reverting back to the ltmain.sh we had previously, which I believe is 1.4.2
  including handmade patches for FreeBSD.
  
  ALERT ALERT ALERT before we try 1.4.3 or similar versions again, check the
  ${SED} stuff and similar carefully.

- Include sys/types.h as well. Ray DeGennaro reports successful compiling on
  AIX when this fix is applied and I cannot see how this will break any
  systems.

- figure out the path to a 'sed' as otherwise libtool gets crazy

- libtoolize 1.4.3 brought these

- Removed define, risc os build, POST-GET bug fixed, AIX 4.3 problems solved
  and two makefiles fixed.

- output the md5sum as the last step

- Added share.obj

- moved the disable-thread warning to the switch code so that the AIX 4.3
  automatic disable won't cause a warning

- Detect AIX 4.3 or later, and if found disable the check for the thread-safe
  *_r() functions as they're not needed (and if fact mess things up for us).
  Brought to our attention by the friendly Troels Walsted Hansen in bug report
  #696217.

- AIX 4.3 or later should use gethostbyname() and not the *_r() version.

- Added typecast to please the MSVC compiler.

- another typecast added to please the borland compiler

- Add (void) on our uses of the swrite() macro when we don't read the return
  code as this makes compiler warnings. We *should* fix the code to deal with
  the return codes instead...

- Init postdata properly before issuing a request, so that there isn't any
  lingering POST-stuff that confuses GET requests. Juan F. Codagnone reported
  this problem in bug report #653859.

- moved a variable declaration to remove a compiler warnings with the MSVC
  compiler, mentioned by Andi Jahja

- include the engine stuff

- Andres Garcia Garcia updated to build with the most recent OpenSSL and
  the recent libcurl changes.

- James Bursa made it compile on RISC OS as well.

- James Bursa wrote a section about cross-compiling for RISC OS

- the strequal and strnequal should now be called with the proper curl_ prefix

- Removed the defines for strequal() and strnequal().

- recent stuff

- mention what happens if size is set to -1

- spell out that POSTFIELDS should be url-encoded in most cases

- spell better

- Updated to better reflect reality. Also displays how the CURLMsg struct
  looks like.

- It appears that there are FTP-servers that return size 0 for files
  when SIZE is used on the file while being in BINARY mode. To work
  around that (stupid) behavior, we attempt to parse the RETR response
  even if the SIZE returned size zero.
  
  Debugging help from Salvatore Sorrentino on February 26, 2003.

- test138 is for RETR without size and without a working SIZE

- support <size>-1</size> to completely disable the SIZE command

- added support for RETRNOSIZE in the control file to tell RETR to not
  include size in the 150-reply

- added a test case for RETR that doesn't get the size in the 150-reply

- added index.html

- random updates

- No longer loop to read multiple times before returning back from the transfer
  function, as this could easily end up looping for a very long time (more or
  less until the whole transfer was done) and no library-using app would want
  that.
  
  Found thanks to a report by Kyle Sallee.

- updated, now features less mentions about older versions

- better sslcerts link

- 7.10.4-pre2 commit

- Fixes to bring back the the "Expect: 100-continue" functionality. If the
  header is used, we must wait for a 100-code (or timeout), before we send the
  data. The timeout is merely 1000 ms at this point. We may have reason to set
  a longer timeout in the future.

- Kjetil Jacobsen found out that setting CURLOPT_MAXCONNECTS to a value higher
  than 5 could cause a segfault.

- fixed language for limit-rate

- daily was weekly, added a little thing about feb 2003

- added an EXAMPLE section

- how to disable FTP PORT

- This script clearly misses to remove the build dir at times when it exits,
  so we now remove everything matching "build-*" when the script starts.

- mention --trace and --trace-ascii in the -v/--versbose section to remind
  people how to get even more details shown

- mention more cacert magic

- Fix Curl_is_connected() even more to deal with waitconnect() return codes
  even better (also based on input from Martin).

- Matthew Clarke built curl on AIX 3.2.5

- include <sys/socket.h> to compile the fd_set stuff properly on all systems

- geterrno() renamed to ourerrno() to prevent the name clash that occurred in
  AIX 3.2.5 and possibly other OSF-like system headers.

- Martin C. Martin's fix for multi-interface connects to non-listening ports.

- Christopher R. Palmer fixed Curl_base64_encode() to deal with zeroes in the
  data to encode.

- language

- include stdarg.h since we use va_* stuff

- I made curl run fine on a XScale/PXA250

- Re-arranged the SSL connection code (again). The recent fix was not a very
  good one. This should work fine again.

Jean-Philippe Barette-LaPierre (4 Feb 2003)
- added the sharing of DNS cache

Daniel Stenberg (4 Feb 2003)
- VMS has setjmp.h

- Nico Baggus updated build script for VMS

- assume zlib 1.1.4 - pointed out by Kevin Roth

- HAVE_LIBZ is the actual name of the define we use

- make it more obvious what this is by not even trying to show a manual

- James Bursa corrected a bad comment

- fixes during the last couple of days

- Improved error reporting in case of bad SSL_connect()s, and we also no
  longer use the SSL functions that store the error message in a static buffer
  since that is not very multi-thread friendly.

- scan through the PATH as well, to find stunnel

- Julian Noble pointed out that capath is indeed working fine on Windows
  these days since the c_rehash tool is written (fixed) to do the proper
  action even on file systems that don't support symlinks.

- Kevin Roth corrected the zlib stuff to work better.

- don't check for the CA cert bundle if --insecure is used

- typecast the argument to isspace() to an int to prevent warnings on some
  compilers

- curl now uses stricter VERIFYHOST by default and only uses a lesser check
  if --insecure is used. Reported by Hamish Mackenzie.

- Fixes bug #669059. We now extract the Content-Type better and more accurate.

- test case 57 - verifies that the Content-Type extraction does not stop on
  the first space anymore but cuts off the trailing spaces only.
  
  Bug report #669059.

- changes from the last week or so

- HAVE_WRITABLE_ARGV is set if argv[] is writable on the system, and then
  we attempt to hide some of the more sensitive command line arguments

- John McGowan found a problem where the DEBUGFUNCTION was called with bad
  data on uploads.

- add the new emacs file and removed the former one

- example showing how a .emacs using curl-style.el could look like, thanks
  to Mats Lidell for awesome elisp hacking!

- this is the former emacs file we no longer use, go with curl-style.el and
  be happy!

- reset conn->size to -1 on the ftp-do function to make it not go on to
  ftp_done() with the previous transfer's value, as Dave Halbakken found out.
  He also verified this fixed corrected the problem.

- previous changes

- removed the local variables for emacs and vim, use the new sample.emacs
  way for emacs, and vim users should provide a similar non-polluting style

- removed weirdo {{{ and }}} comments
  removed emacs local-variables stuff

- the README.curl is named MANUAL these days

- revised and better

- removed -Wcast-align from --enable-debug with gcc, it just gives too many
  warnings that I can't be concerned about at this point.

- Removed the long-living compiler warnings on the des_pcbc_encrypt() function
  calls!

- tests that were not run due to restraints (the netrc-tests) were counted
  as skipped twice, and thus the total number of tests appeared wrong

- made it work
  made it cause less compiler warnings
  made it require 7.9.7 to build

- Bertrand Demiddelaer found and fixed this memory leak.

- string.h keeps the proto for memset() on some platforms, used for FD_ZERO

- added a default to the switch() in order to prevent a compiler warning

- fix the configure option query

- mention what kind of error you may get if this is not followed

- spell

- This is the new Emacs style for curl hacking, based on work written by
  Mats Lidell in project Rockbox.

- Duncan Wilcox reported a crash with --interface on FreeBSD when ipv6-enabled
  and this has been verified to correct the problem.

- oops, broken comment fixed

- extern C this to work in C++ conditions

- reversed the actions on the cmp check for detecting if we're re-running
  a test on the same CVS setup as previous, as they seemed to be wrong.
  
  We're not actually using the result for anything at this point though.

- use LANG set to C to prevent localized dates etc

- pass the options to configure properly

- check for empty confopts before asking for it

- put the configure options in the setup file was well
  make -i
  show lib/config.h
  and some initial checks to prevent this running multiple times without the
  CVS having changed

- updated copyright years

- when a chunked error is noticed, store the error number in the error string
  to enable better error-tracking

- skip the chmod

- run 'make test-full' instead of 'make test' to get more details in case of
  errors

- make test-full in the root dir should run verbose tests but not stop on
  single failures

- use 'make test-full' instead of only 'make test' as it gives a lot of more
  info in case of failures

- Added a 'test-full' target to run the tests in verbose mode.

- pass srcdir to the ftps-server as well

- runtests.pl now passes the sourcedir path to the httpsserver.pl script

- automake 1.5 should be enough

- use process id in build directory name to do better

- first attempt at script for distributed testing on various unix hosts

- output summary with easy identifyable string prefixes

- made this script detect proper versions of the tools we need to build a full
  curl on a unix host from CVS

- added description in all AC_DEFINE() calls

- not used anymore

- Five more names we owe a big THANKS for their donations to the project.

- today's patches and Markus' correction

- Markus F.X.J. Oberhumer's patch that reduces memory usage quite a bit by
  only allocating the scratch memory buffer once it is needed and not always
  in the handle.

- given passwords in netrc must be respected accordingly

- steps I *MUST* perform when I release a package

- reverted bad header replacement

- copyright year update in the source header

- fixes Marcus brought

- Allow CURLINFO_PRIVATE to be NULL, patch by Markus Oberhumer

- Markus Oberhumer fixed the -cflags option

- no TABs in source code

- removed a TAB

- Kevin fixed the bad list address

- previous legal file, no longer accurate nor used

- COPYING is the name of the file

Version 7.10.3 (14 Jan 2003)

Daniel Stenberg (14 Jan 2003)
- 7.10.3 commit

- more

- there is SOCKS support these days

- Steve Oliphant pointed out that test case 105 did not work anymore and this
  was due to a missing fix for the password prompting

- added test 136

- verify -u username: with ftp to use a blank password

- if userpwd is "username:", this now implies a blank password while only
  "username" will cause libcurl to prompt for password. Bryan Kemp noticed.
  
  test case 136 is added for this

- Wai (Simon) Liu provided the HTTP200ALIASES paragraph.

- Philippe Raoult's added note for HTTPHEADER

- This fixed yet another connect problem with the multi interface and ipv4
  stack. Kjetil Jacobsen reported and verified the fix.

- removed

- removed unused code

- fix

- call curl_multi_perform() correctly

- proper indent

- pass a file name to memanalyze to read from instead of using stdin

- share.h is now a used header file

- fixed to deal with file names that contain colons, as in Windows

- 7.10.3-pre4

- rename the curl share error enum prefix

- Updated more and now looks and and the API possibly works almost like the
  design document specifies. There is still no code inside that uses this.

- 7+8 jan 2003

- updated to use the modified share-types

- cleaned up the share data types and prototypes to be more in line what
  the design draft mentioned and what I think is fit

- mkdir() fix for win32

- nah, include test.h instead

- include curl.h without directory

Jean-Philippe Barette-LaPierre (8 Jan 2003)
- fixed a very, very rare and very, very little memory leak

Daniel Stenberg (7 Jan 2003)
- Philippe Raoult's fix to handle wildcard certificate name checks

- Simon Liu's HTTP200ALIASES-patch!

- stuff

- clarified error code 19

- Only output valid filetime.
  Return file-error if 550 is returned when trying MDTM

- when sending an error message to the debugfunction, we append a newline so
  that the output looks better

- fixed the create_dir_hierarchy() to not use uninited memory, as noticed by
  Matthew Blain.

- Matthew Blain's improvements for debug builds

- better ignore

- ignore lib504 too

- updated

- indent fix

Sterling Hughes (6 Jan 2003)
- fix bug (?) :-)
  
  previously, if you called curl_easy_perform and then set the global dns
  cache, the global cache wouldn't be used.  I don't see this really happening
  in practice, but this code allows you to do it.

Daniel Stenberg (29 Dec 2002)
- return -1 even if SSL_pending() doesn't return non-zero, as we don't really
  care how many bytes that is readable NOW. Philippe Raoult reported the
  bug in 7.10.3-pre3.

- Marc Herbert's suggstion: mention that insecure is ignored if cacert or capath
  is used.

- example configure command line

- Use AM_MAINTAINER_MODE which thus makes less maintainer stuff in the default
  makefile when --enable-maintainer-mode is not used.

- 7.10.3-commit

- fixes

- removed fruitless attempts to overload some targets

- Curl_base64_decode() fixed by Matthew B

- Fixed the usage of SSL_read() to properly return -1 if the EWOULDBLOCK
  situation occurs, which it previously didn't!
  
  This was reptoed by Evan Jordan in bug report #653022.
  
  Also, if ERROR_SYSCALL is returned from SSL_write(), include the errno number
  in the error string for easier error detection.

- CURLOPT_DNS_USE_GLOBAL_CACHE is not thread-safe

- CURLE_HTTP_NOT_FOUND => CURLE_HTTP_RETURNED_ERROR

- Removed weird special multi interface condition that caused bug report
  #651464.

- don't install the test programs

- writefunction data is not zero terminated

- removed junk

- Added test case 504, using multi interface and a local proxy without anything
  listening on the port we use.

- better desc

- mistake, this only requires http

- the hostip.c commit

- EAGAIN on older (correct) glibc versions indicate a problem and not the need
  for a bigger buffer and this is indeed badness for us. Making this work
  on both old and new glibc versions require an ugly loop that in its worse
  form cause 45 bad loops when using the correct glibc and a non-resolving
  host name... :-/
  
  We want a better fix. Badly.

- changes from last week

- cut off -O properly when building for debug
  setup the Makefile in tests/libtest/

- documented the %-variables

- fixed another space issue

- please mr CVS ignore these

- set up arg2 to point to argv[2] to be used at will by programs

- added 503

- used this to verify bug report 651460

- added support for CONNECT, both good and bad

- test case 503 entered the dir

- conn->bits.tcpconnect now keeps track of if this connection is connected
  or not

- include files without the curl/ to reduce the risk of us including the wrong
  set of include files during tests

- Evan Jordan's fix for a memory leak. Bug report 650989.

- make a little work-around for file:// in _is_connected() and voila, now the
  multi interface works with file:// URLs fine (previously it crashed). This
  won't make it work on Windows though...

- one slash too many

- lib502.c for multi interface tests on a single URL without select()

- test 502, multi interface with file://

- bail out on crap received, makes test case 402 *NOT* ruin the test series
  anymore!

- missing space added, nows run old tests fine again

- remove test piece

- make ftps and https invoke both necessary servers

- fixes

- link the test tools this way instead

- no more

- corrected

- new subdir added 'libtest'

- supports the new 'tool' and 'server' tags

- describe the new sections added for (better) libcurl testing

- 500 + 501 added

- run tiny specific libcurl-testing tools

- The first ever attempts to do pure libcurl test cases

- Deal with HTML where ' is used instead of "
  Cut off name from option

- moved the includes to outside the extern "C" stuff
  decreased the write buffer size to 16KB to perform a lot better on Windows(!)

- recent fluff

- The initial HTTP request can now be sent in multiple parts, as part of the
  regular transfer process. This required some new tweaks, like for example
  we need to be able to tell the tranfer loop to not chunky-encode uploads
  while we're transferring the rest of the request...

- send_buffer is no more here

- added test56, nearly 100KB big!

- Test case for sending insanely big HTTP requests. Mainly done this way to
  make sure that it isn't all sent off in one single send() but instead
  really tests the multiple-part-send logic.

- more logging, now logs the full response too, basic support for dealing
  with chunked transfer-encoding uploads added

- A normal POST now provides data to the main transfer loop via the usual
  read callback, and thus won't put a lot of stress on the request sending
  code (which currently does an ugly loop).

- The fread() callback pointer and associated pointer is now stored in the
  connectdata struct instead, and is no longer modified within the 'set' struct
  as previously (which was a really BAAAD thing).

- Added a default headers section and also made some minor details more
  up-to-date with recent changes.

- better errno include and no extern

- read and write as much as possible until end of data or EWOULDBLOCK before
  returning back to the select() loop. Consider this a test so far.

- deal with spaces in name and value tags a lot better!

- changed proto for Curl_krb_kauth()

- Solaris needs errno as an extern int.

- make WIN32 defined for Borland properly, as told by Alexander J. Oss

- called SSLCERTS now

- 7.10.3-pre2

- The waiting for the 226 or 250 line expected to come after a transfer is
  complete is now only made for 60 seconds and if no data was received during
  those 60 seconds, we store a special error message (preparing to make this
  a special error code) as this most likely means that the control connection
  has died while we were transferring data.

- missing }

- clarified

- Jeff pointed out this flaw in the example

- -@ is no longer an official shortcut for --create-dirs

- don't officially use -@ for --create-dirs, only use the long form

- clarify the DEBUGFUNCTION data not being zero terminated

- Curl_GetFTPResponse() takes a different set of parameters and now return a
  proper CURLcode. The default timeout for reading one response is now also
  possible to change while running.

- updated to reality

- Nicolas Berloquin's fix of his previous dir creation patch

- Nicolas Berloquin's description of his -@/--create-dirs fix

- Nicolas Berloquin's added code for dealing with -@/--create-dirs to create
  the necessary directories as specified with -o.

- if the PWD reply parser failed, we leaked memory

- clarified SSL_VERIFYPEER and SSL_VERIFYHOST a bit, thanks to Soren Spies

- wrapped the line for PRIVATE nicer

- more to ignore

- only use Content-Length: header if not transfering data chunked

- mention CVS-INFO for more info when checked out from CVS
  removed old section about problems with old autoconfs, I don't think that
  happens anymore

- stuff done since the 7.10.2 release

- let the Curl_FormReader() return 0 when it reaches end of data to that the
  chunked transfer work

- fix the hash init to call the correct dns cleanup function

- added compareheader proto

- compareheader() was moved over to http.c and got a Curl_ prefix
  
  The chunked transfer upload never stopped due to a silly add before we checked
  for >0!

- Moved the compareheader function into this file and added Curl_ prefix
  We now check if the chunked transfer-encoding header has been added "by force"
  and if so, we enabled the chunky upload!

- mention how to generate patches

- bad use of AM_CONDITIONAL removed and now configure runs better when used
  with --disable-ipv6 --without-zlib

- execve.net is an official download mirror in HK

- Dan Becker fixed a minor memory leak on persistent connnections using
  FOLLOWLOCATION and CURLOPT_USERPWD.

- removed extra space from trace output 'Send data'

- fixed Curl_freeaddrinfo() to only free addrinfo, and added Curl_freednsinfo()
  for freeing single dns cache entries

sm (26 Nov 2002)
- Removed MFC dependency in Release Build when using VC++ IDE

Daniel Stenberg (24 Nov 2002)
- Nedelcho Stanev's work-around for SFU 3.0

- bug fix for the problem Juan Ignacio Hervs discovered today

- this fix seems to make the '305 306' test case combination to run ok finally!

- don't use curl.haxx.se

- dead code removal

- new name, supports <textarea> and the <option> tags within <select> better

- 4.12 Why do I get "certificate verify failed" ?

- Kjetil Jacobsen's patch that introduces CURLOPT_PRIVATE and CURLINFO_PRIVATE
  for storage and retrieval of private data in the curl handle.

- Karol Pietrzak pointed out that simply including the include dir in --cflags
  is not a good thing, as recent gccs for example complain if it is /usr/include
  
  Right now, we just output "" until we think of something better.

Version 7.10.2 (18 Nov 2002)

Daniel Stenberg (18 Nov 2002)
- 7.10.2

- as requested, CURLE_OPERATION_TIMEDOUT is now the same as
  CURLE_OPERATION_TIMEOUTED

- fflush() the trace stream on each call

- removed nroff mistake

- no more dllinit.o usage

- recent fixes

- attempts to filter off optimize flags when --enable-debug is used

- language

- clarified that strings need to be kept around until the handle is closed or
  until the pointers are set to another value

- dllinit.c is removed

- not used and we don't have permission to distribute this!

-  4.11 Why does my HTTP range requests return the full document?

- removed dllinit.c as MSVC doesn't need it

- moved the bools in the connectdata struct into the substruct named
  ConnectBits where the other bools already are

- The test for DNS cache entries left locked is now only built if
  AGGRESIVE_TEST is also defined, as an addition to MALLOCDEBUG. It doesn't
  work for multi interface usage and should only be used with careful
  consideration.

- changed header

- include SSLCERTS and not UPGRADE. We leave UPGRADE a while in CVS, but it
  should be removed soonish.

- UPGRADE was renamed into this "SSLCERTS"

- unlock dns cache entries with a function call instead of a variable fiddle

- Dave Halbakken added curl_version_info

- transfer-encoding: chunked was implemented

- Now supports "Transfer-Encoding: chunked" for HTTP PUT operations where the
  size of the uploaded file is unknown.

- Bug report #634625 identified how curl returned timeout immediately when
  CURLOPT_CONNECTTIMEOUT was used and provided a fix.

- recent changes

- output all test case numbers with three digits

- language fix

- Lehel Bernadt's fix to prevent debug message to get sent on errors when
  debug wasn't enabled

- ipv4-fixes for the new Curl_dns_entry struct and Curl_resolv() proto

- Curl_resolv() now returns a different struct, and it contains a reference
  counter so that the caller needs to decrease that counter when done with
  the returned data.
  
  If compiled with MALLOCDEBUG I've added some extra checking that the counter
  is decreased before a handle is closed etc.

- Soren Spies filled in some info about Mac OS X 10.2

- Disable the DNS cache (by setting the timeout to 0) made libcurl leak
  memory. Avery Fay brought the example code that proved this.

- when using checkprefix(), the first argument must be the prefix!

- Transfer-Encoding: needs 17 bytes passed, not 18

- kromJx@crosswinds.net's fix that now uses checkprefix() instead of
  strnequal() when the third argument was strlen(first argument) anyway.
  This makes it less prone to errors. (Slightly edited by me)

- the malloc debug system assumes single thread

- kromJx@crosswinds.net fixed typos

- works now with autoconf 2.54

- Kevin Roth's patch that checks for the CA cert file at two more places if the
  --cacert option is not used.
  
  1. An environment variable named CURL_CA_BUNDLE may contain the full file
  name to the file.
  
  2. On Windows, the cert file may be named curl-ca-bundle.crt and put in the
  same dir as curl is located (or the CWD) and curl will then use that file
  instead.

- Kevin Roth's patch. $(RM) instead of @erase, and it also passes on the
  USE_SSLEAY variable

- Kevin Roth's fixes that use $(RM) instead of @erase and modified SSL version

- prevent compiler warning

- prevent compiler warnings

- fixes

- fixed the cygwin check for -no-undefined

- improved the check for an ISO cpp by checking specificly for __BORLANDC__
  too, as Emiliano Ida has confirmed it to work

- kromJx@crosswinds.net made it run properly with stunnel >=4.0

- bad headers can come in two kinds, we either treat everything as one big
  badly assumed header, or we think that parts of the buffer is a bad header
  and the rest is treated as a normal body part

- another week, 7 fixes

- glibc 2.2.93 gethostbyname_r() no longer returns ERANGE if the given buffer
  size isn't big enough. For some reason they now return EAGAIN.
  
  Redhat 8 ships with this glibc version.

- Nikita Schmidt's fix to debian bug report #165382. This is verified with
  the new test case 55.

- Added test 55, follow location with a single slash in the original path.
  This caused curl 7.10.1 to crash.

- check for cygwin and if built on that, enable the no-undefined option for
  libtool. Otherwise disable it.

- test 54 added, blank Location: field

- --enable-debug now checks if gcc is used before it sets all those gcc-
  specific options. This should make this option work on more platforms with
  other compilers.

- make very sure that we return 'done' properly when a transfer is done, as
  otherwise the multi interface gets problems

- return call_multi when we follow a location

- if we found no string on the Location: line, don't try to follow it

- moved comments to first column and automake stopped complaining

- Make the COOKIESESSION work better by creating a list of cookie files files
  when given in the curl_easy_setopt() and then parse them all on the first
  curl_easy_perform() call instead.

- junk cookies test53 added

- mucho fixed

- Added new mirror

- Andrs Garca's corrections

- ignore .ps and .pdf files too

- generate and include PDF versions of the docs in the release archive

- my first take at a memory leak detection document

- some more

- added more info

- three silly bugs

- -y and -Y was switched in the examples

- return error properly when a non-blocking connect fails using the multi
  interface

- When we receive a "bad header" we must sure not to write down the data part
  as well, as then we write the same data twice.

- fix bad free() that caused segfault

Version 7.10.1 (11 Oct 2002)

Daniel Stenberg (11 Oct 2002)
- 7.10.1 commit

- more

- Jeff Lawson fixed a few problems with connection re-use that remained when
  you set CURLOPT_PROXY to "".

- Junk data could get inserted when saving/getting HTTP headers, as discovered
  by Craig Davison. Now we deal with the 'nread' variable correctly between
  each header line.

- failf() now sends the text to the debug function callback

- set version and date

- added --ca

- Added timeout support for the non-windows version.

- rewrote the --with-zlib check, based on Albert Chin's input.

- 7.10 not 7.9.9 (there never was one named that)

- 5.7 Link errors when building libcurl on Windows!

- more blurb

- Kevin's fix to use DESTDIR instead of prefix on make install

- added libcurl-the-guide to the dist

- Following locations properly, if told to do so.

- Move the URL concat code to Curl_follow(), and added a proto for that
  function. For Location: following.

- Kevin Roth pointed out that 'make install' failed if built outside the
  sourcedir if we're not using $(srcdir) properly.

- Kevin's update

- fixes since 7.10

- The -no-undefined flag is CRUCIAL for this to build fine on Cygwin. If we
  find a case in which we need to remove this flag, we should most likely
  write a configure check that detects when this flag is needed and when its
  not.

- as Ralph Mitchell pointed out, the Location: following code needs some
  basic ./ and ../ strip-off understanding, and this change introduces with.
  test cases 49 - 52 test this.

- new redirect tests with ./ and ../

- Kevin Roth's patch for his new packaging

- Bjorn Wiren pointed out that INSTALL was missing in the tarballs

- --with-libz and --without-libz are now supported

Version 7.10 (1 Oct 2002)

Daniel Stenberg (1 Oct 2002)
- 7.10

- three more changes

- get an argument and add a 'age' field to the struct

- Cris Bailiff found this flaw, gethostbyname_r() on linux returns 0 even
  when it can't lookup the name (at least in some cases) and thus we need
  to make an extra check to detect failures.

- "" proxy means no proxy

- Allow a "" proxy explicitly set dont-use-proxy, i.e don't even check the
  environment variables or anything. Setting it to NULL disables proxy as well,
  but allows the environment variables to kick in and be used.

- point out more docs

- nicer html

- main index for the tool docs

- fixed html tag

- enhanced curl_version_info

- language!

- extended curl_version_info() with more info on related sub-libraries

- four fixes of yday and today

- make sure we free rangeline before we re-assign it to a new allocated
  memory as otherwise we (might) leak memory

- curl_free proto added

- Walter J. Mack added curl_free

- added curl_free and an "overview" section

- added curl_free

- Walter J. Mack's curl_free addition

- Andrs Garca found out that Curl_protocol_connect() could return an
  uninitialized variable.

- Wez Furlong's curl_version_info() function added, still needs some
  adjustments and possibly some improvments to feature all those things we
  could possibly want from this.

- 5 changes since pre3

- made the resume error more suitable for all protocols, but we provide a
  fallback to the old ftp-one to make old programs work the same

- fix resume when multiple files were specified

- spell fix comment

- removed use of extra unneeded variable

- Dolbneff A.V and Spiridonoff A.V made the file:// code work with resumes
  in the same style other code does.

- properly disconnect failed connections

- Craig Markwardt made the "struct hostent_data" get cleared too, as is
  needed on Tru64 (or something).

- Re-ordered all the options to be more logically structured. Hopefully this
  will make this page more readable and easy to find things in!

- a follow-up fix to the previous fix for HTTP servers that don't reply *any*
  headers at all

- better deal with HTTP(S) servers that respond with no headers at all, test
  case 306 added to verify that we do right

- clarified what CURLOPT_MAXCONNECTS actually do

- 306 added

- request a page from HTTPS but get no headers

- recent fixes

- Lukasz Czekierda correctly pointed out that curl used a bad Host: header
  when talking to a IPv6-server using IPv6 IP address only.

- ignore html files here

- added more recent return codes

- filled in the -k text too

- added -k for 7.10, added some more details on -y based on comments from
  Kingsley Morse

- we are MIT-only

- minor indent change

- remove redundant comment

- configure --disable-http is not properly working

- Ricardo Cadime helped us work out another check for the ## preprocessor
  directive.

Joern Hartroth (7 Sep 2002)
- Added ZLIB switch for activation of content encoding in Makefile.m32

- Added zlib Library.

- Added content_encoding files.

Daniel Stenberg (5 Sep 2002)
- fixed the pkgadd target

sm (4 Sep 2002)
- Added multi.c to curllib.dsp to fix win32 build

Daniel Stenberg (4 Sep 2002)
- Sven Neuhaus made --silent being acknowledged even when multiple URLs
  were used

- remove -lz

- we're now MIT licensed only

- no longer package MITX.txt or MPL-1.1.txt since we now use COPYING only

- updated source code boilerplate/header

- 7.10-pre2

- fixed the dist-hook and added the missing header file

- better name for the legal/license/copyright stuff

- added some curl-config details

- AC_SUBST HAVE_LIBZ for curl-config.in

- James Gallagher's Content-Encoding work

- ca bundle to use

- adjusted to more HTTP-strict version strings and to offer LIBZ info

- Jon Topper pointed out a code example bug

- moo

- if verifypeer is enabled but nether CAfile nor CApath is, then don't try
  to load "verify_locations"

- prevent compiler warning

- CURLE_SSL_INSECURE is removed again and so is CURLOPT_SSL_INSECURE, we
  proceed fine with the already existing options, just having a different
  internal library default for capath.

- support DESTDIR for the bundle

- --ca shows ca bundle path

- new tests

- show return code when run verbose

- recent fixes

- SOCKS5 support added (contributed by a still unnamed person). Not properly
  working for "IPv6 enabled" libcurls yet, but should be pretty easy for
  someone to adjust.

- ca-bundle stuff for configure and generated header file

- more explicit texts on the 4.2 answer

- remove the data and conn fields from the Curl_transfer_keeper struct, they
  weren't used anyway and mostly caused confusion

- SSL_INSECURE support and usage added

- ignore these

- updated for the new SSL -k
  added two new tests to test the absense of -k to insecure SSL sites

- add more things to do

- don't attempt to ftp_cwd() on a NULL path

- Andrew Francis removed the need for/use of MSVC pragmas

- corrected the year string

- don't close stdin, close the actual file handle we have!
  Keith MacDonald found it.

- since 7.9.9-pre1

- Markus F.X.J. Oberhumer's cvsignore fixes

- Markus F.X.J. Oberhumer added better NOSIGNAL description and fixed
  spelling error

- Markus F.X.J. Oberhumer's added notes about NOSIGNAL in the TIMEOUT
  descriptions, slightly edited by me.

- Markus F.X.J. Oberhumer added a section about NOSIGNAL and libcurl in
  multi-threaded use

- Markus F.X.J. Oberhumer's added comment

- Markus Oberhumer improved an out-of-memory check
  I reformatted some functions using a different indent than the rest
  of the file.

- bug report #588027 converted to a KNOWN BUG, as we have no intention to
  correct this problem within the nearest period

- allow undefined symbols!

- NOSIGNAL, BUFFERSIZE and clarification for the PROGRESSFUNCTION

- modified the copyright line and shortened the phrasing in this license to
  become even shorter, but retaining the same meaning and effect for all
  users.

- Added three more pragmas for MSVC++ compiles.
  
  We *really* need these sorted out. I'd prefer to have them all removed and
  the actual code corrected instead of just diabling the warnings and pretending
  that they don't exist.

- prevent compiler warnings

- windows has stdlib.h

- modified again to look better HTML converted

- Leonce Limousin pointed out flaws

- Wez Furlong's ideas and some cleaning up/clarifying

- re-order the compiler arguments to keep more compiler happy

- include curl-includes "local" instead of <curl/foo>

- Sterling Hughes brings the share interface

- gethostname is not used anymore so we can stop looking for it! ;-)

- mr Hartroth correctly pointed out that poll() isn't really that portable
  so we need to hack around it when not there

- check for poll()

- change the resolver URL to the work-in-progress library project

- 7.9.9-pre1

- fixed a Curl_connecthost() bug, we should default to set connected to false

- added comment about CURLOPT_WRITEDATA for directing contents somewhere

- multi asynch work committed

- Initial fix to make the multi interface return control while waiting for
  the initial connect to "come through".
  
  This should work fine for connect and for FTP-PASV connects. Needs massive
  testing.

- redirect stderr to /dev/null when testing for running test-servers

- CURLOPT_NOSIGNAL added

- ignore html too

- ignore

- more to ignore

- ignore

- all those ignores

- ignore generated files

- ignore these files

- things to ignore

- cvsignore files

- makes things better

- Markus F.X.J. Oberhumer's CURLOPT_NOSIGNAL patch

- attempted hpux fix for resolves

- fix the ansi/iso cpp check to work with c++

- mainly more not-so-very serious blurb about the name

- ignore all .in files

- Adding more blurb about activating the cookies on COOKIEFILE and COOKIEJAR

- spell out that -i should be used if you want to add http headers to the
  output. -v does not do that

- Make SessionHandle keep record if it is used with the multi interface or
  the easy interface, it CANNOT be used by a mixture.

- curl/curl.g fix, HP-UX fix, ftp port, libcurl.def, empty post and rfc2732-
  addresses

- re-added the RFC2732-parser that was lost for some reason during the flow
  of time!

- support blank arguments to options, each option should check for blank
  ones themselves if they need to prevent this.

- jonatan's fixes

Joern Hartroth (3 Aug 2002)
- Added multi interface functions to DLL definitions.

Daniel Stenberg (1 Aug 2002)
- corrected some warnings

- Changed the PORT command to pick a better default IP address if "-" is used.
  It now uses the local IP adress of the control connection.

- sys/socket.h without #ifdef
  include sys/time.h as well

- spell fix and --limit-rate added

- When CURLINFO_CONTENT_TYPE returns a NULL pointer, don't try to fputs() it!

- check for sys/poll.h

- passwords and cookies

- Removed checks for if set.fpasswd is NULL, as we prevent users from setting
  it to NULL and then use the internal default instead. It will always be
  a function to call.

- Setting PASSWDFUNCTION to NULL will set back the internal function as password
  function.

- fixed the Curl_cookie_add() invoke to not assume a space after the colon

- properly skip white spaces on Set-Cookie: header lines

- extended and improved cookie testing

- HAVE_SETVBUF fixed

- link with winmm.lib too

- use stderr to present the prompt to, make sure to close the fopen()ed
  file handle

- Added multi.[co] to the build

- added HAVE_SETVBUF

- Glen Nakamura made his fix look even better!

- Glen Nakamura's patch applied

- Glen Nakamura's patch for Curl_getaddrinfo().

- since 7.9.8

- ignore '+' in URLs, generate only %-codes

- T. Bharath fixed his mm lib timer resolution fix

- added HISTORY
  for newbies ;-)

- corrected to match reality better

- removed the php/examples reference as that dir is not in the archives

- simplified the compile line even more

- simplepost.c shows a simple POST ;-)

- removed extra / in help text

- Added CURLOPT_BUFFERSIZE

- Added --limit-rate

- HAVE_SYS_POLL_H

- CURLOPT_BUFFERSIZE allows an application to set a prefered buffer size
  for receiving data from the network. It is meant as a hint, not as a forced
  limit.

- Chris Combes added description of his newly added options

- - Yarram Sunil found out that the SocketIsDead() function performed a lot
    faster on Windows when removing the 1 microsecond timeout.

- Hanno L. Kranzhoff fixed them

- Remade the FTP not-check status line and not-attempt-to-read-status-line
  variables, conditions and things.

- Tom Mattison's report found out, and this is the fix that should prevent
  FTP from closing the connections a little too often!

- Miklos Nemeth added a section for how to disable specific protocols in the
  windows build.

- Miklos Nemeth fixed the mmlib

Version 7.9.8 (13 Jun 2002)

Daniel Stenberg (13 Jun 2002)
- 7.9.8 commit

- Added 'dont_check' to be set during an FTP operation if the final status
  message is supposed to be ignored.

- when no FTP transfer was done, don't attempt to read the download transfer
  thing. The 'resumed' flag is also causing confusions. I'll deal with that
  tomorrow.

- Moved the secondarysocket cleanup. The 'conn' struct may have been cleared
  already at that other place.

- Chris Combes added CURLFORM_BUFFER, CURLFORM_BUFFERPTR, CURLFORM_BUFFERLENGTH

- fixing builds, patching bugs, adding curl_formadd() options

- HAVE_SIGSETJMP

- added a connect failure error message that might get empty otherwise

- Jrn fixes for 7.9.8 build

- CURLOPT_MAXFILESIZE

- kris@freebsd.org fixed a bad format string

- kris@freebsd.org fixed a few bad format strings

- Add QNX

- put #ifdefs around the sigjmp_buf declaration too, as it should be

- corrected the signal handler

- 7.9.8-pre3 commit

- the disable protocol stuff is now added

- more nonewline support

- Now uses sigsetjmp() and siglongjmp() to bail out from slow name lookups in
  case a timeout is set. This seems to work. God knows if it is good enough
  or what kind of side-effects we introduce here and now.
  
  I'll close my eyes and cross my fingers. Hard.

- cut up the string in more pieces for <512 bytes strings

- removed accidentally added debug-code!

- ftp range downloads make us ignore the final status message as the server
  will most likely treat the download as failed as we might abort it
  pre-maturely

- added test135 ftp byte-range download

- added --disable-[protocol] support

- added disable-[protocol] support, largely provided by Miklos Nemeth

- Added disable-defines

- added multi.obj

- make sure data->set.postfields is non-NULL before doing strlen() on the
  pointer. Bugs item #566835.

- getaddrinfo() failures now show port number too in informational output

- added a missing failf() for certain connect failures

- This fix MIGHT make us build nicely with OpenSSL 0.9.7. This fix is based
  on a patch from Jacob Meuser, input from Gtz Babin-Ebell and my own
  browsing of the latest include files.

- Gautam Mani found a socket descriptor leak that happened when FTP transfers
  failed and you reinvoked curl_easy_perform().

- Added HAVE_SYS_TYPES_H

- Gustaf Hui fixed curl_multi_remove_handle() to prevent a potential crash

- set HAVE_RAND_STATUS too

- hostcache_fixoffset() is now corrected to work on 64bit architectures
  Bug report #564585.

- more stuff since pre1

- indent like the other ones

- Christophe Espern wrote another binding!

- updated header

- T. Bharath's updates since curl now uses the winmm lib for higher resolution
  timer

- T. Bharath made the request size add up as it is documented to do.

- T. Bharath fixed higher resolution time for windows builds

- T. Bharath fixed the TIMER_REDIRECT.

- Getting an empty FTP file no longer makes us return error 19. An empty file
  is fine to get.

-  Gustaf Hui provided new code that changes how curl_multi_info_read()
   messages are stored, so that they don't have to be kept around for the multi
   handle's entire life time. He also made it return failure codes properly
   which it didn't do before.
  
   I made the messages only get stored per easy-handle so that they can be
   independently killed easier without ruining the "master list". It makes
   the info_read() function slightly less beautiful as it has to scan for
   messages to return, but it makes removing individual handles a lot easier
   and less error prone.

- Adjusted to make curl_multi_perform() work properly even when
  curl_multi_fdset() is not used.

- I trimmed the --help output slightly to better fit within 80 cols

- Cris Bailiff's CAPATH support added

- new url, spell checked

- since 7.9.7

- James Cone's little work-around for the strict error

- When re-using a connection, make sure that we use the current host name as
  we might actually re-use a connection to a different host, when using proxies!
  
  This was what bug report #558888 was all about.

- James Cone added the new CURL_NETRC_OPTION enum

- test suite mods for the netrc testing stuff

- James Cone added CURLOPT_NETRC / --netrc / --netrc-optional descriptions

- Use the new CURLOPT_NETRC option and adds --netrc-optional, by James Cone

- James Cone's efforts to add another netrc parsing "mode"

- five new test cases for the netrc parsing

- maprintf() and vmaprintf() now work better when printfing "%s" with an
  empty string

- corrected see also

- 3.14 added, javascript support

- Added source header and made it clear that this code was originally donated
  to us by Juergen Wilke.

- ASN1 files don't work for the *chain_file(), make them use the previous
  version

- return type CURLFORMcode instead of plain int

- curl_formadd() now returns 'CURLFORMcode' instead of int, to better enable
  checking for particular errors. curl/curl.h defines the errros

- Roland Zimmermann's hint, we use SSL_CTX_use_certificate_chain_file() instead
  of the previous one that used SSL_CTX_use_certificate_file()

- removed compiler warnings

- FreeBSD needs sys/types.h before we include sys/select.h that was included
  mainly for AIX in the first place...! As reported in bug report #556869

- Fixes bug report #556930 - we need to make sure that the data is all right
  after we've realloc() the packed hostent struct.

- Added item 4.10 after talks with Russ Freeman

Version 7.9.7 (13 May 2002)

Daniel Stenberg (13 May 2002)
- 7.9.7 commit

- we don't need win32sockets.c anymore, we support this internally

- fopen.c added, a fopen() style emulation for URL reading

- Friday's fixes

- AIX 5.1

- Kein Roth made --trace-ascii look even better, and make OD 0A occurances
  get output as plain newlines.

- AIX wants sys/select.h for the fd_set stuff in curl/multi.h, and even though
  it is a bit ugly work-around to add this here, it is still a working work-
  around! ;-)

- Patrick Smith's contributed docs improvements for when NLST is used by
  curl...

Version 7.9.7 (7 May 2002)

Daniel Stenberg (7 May 2002)
- 7.9.7-pre2

- Added --trace-ascii support

- --trace-ascii and --junk-session-cookies were added

- support for ingoring session cookies added

- the code for case CURLOPT_DEBUGDATA code broke the CURLOPT_STDERR one!

- recent fiddling

- CURLOPT_FILE and CURLOPT_INFILE have better aliases now:
  CURLOPT_WRITEDATA and CURLOPT_READDATA

- Added multi-post.c, based on the source file posted by Gustaf Hui

- Better support for being used with the multi interface without the *fd_set()
  and proper select()ing have been made.

- --trace is a 7.9.7 function

- added -Z/--max-redirs and --trace
  changed order of a few others to keep the a-z order

- made VERBOSE output more like it used to be, HEADER_IN is thus also ignored
  by the internal debugfunction callback

- CURL_MAX_WRITE_SIZE is a new exported define that informs about the biggest
  sized buffer that may be passed to a write callback

- fixed return code

- another week of changes

- - Added "--trace [file]" to the command line tool. It makes a very detailed
    trace dump get stored, with a full protocol dump that includes all received
    and transmitted data. This could be a very effective tool for debugging what
    goes wrong. This dump includes every byte the way it is sent to/received
    from the server. The dump is the plain-text version, so SSL transfers will
    still be readable.

- made the DEBUGFUNCTION get called properly on a few more places, especially
  for DATA_IN and DATA_OUT.

- make sure our own printf() clones are used

- -D now stores all headers to the same file if multiple URLs are given on the
  command line!

- clarified that you must keep the variables that you point to!

- spell

- use and set the fd_set pointers instead of the actual values, as then we
  work properly with the multi interface when the user has provided the
  fd_sets!

- added two pointers to the fd_set variables to read/write from, as sometimes
  we need to point to user-provided fd_sets

- return CURLM_CALL_MULTI_PERFORM in one more case, and check return code
  from malloc()

- make sure the dns cache pointers in the easy handles are NULLed

- Hanno Kranzhoff noticed we didn't properly reset the download/upload counters
  before transfers, when doing multiple ones on the same handle.

- Jacky Lam's fix to make the realloc() of the hostent data work properly
  even when the realloc() actually gets a new memory block

- how to set more than one cookie

- implemented curl_multi_info_read() which I had forgotten before!

- updated some docs

- clarified

- one added, one edited

- shorter introduction

- updated

- Added BINDINGS, lists all available libcurl bindings as of this date.

- fixes on rainy saturday in the end of April, 2002

- Fixed the FTP response reader to deal with timeouts better. Previously it
  would reset the timeout for each incoming data, which would make veeery
  slow responses be allowed to take even more time since the timeout would only
  be reached if the time between two received data chunks was longer than the
  set timeout value...

- (Curl_GetFTPResponse) moved some code to only get performed when actually
  needed

- Now uses Curl_ as prefix for internal global symbols. curl_ should only be
  used for "exported" globals.

- DNC cache prune crash removed, made the name spacing follow the general
  rule: "Curl_" prefix for library-wide private symbols, "curl_" is for
  exported symbols.

- openbsd on Alpha was no problemos

- test suite portability fix

- handles much larger POSTs, replaced snprintf() with sprintf() since this
  needs to be more portable and in the test server we can skip the extra
  safety

- another week of changes

- adjusted to the new Curl_resolv() proto

- prevent persistant connections to do name resolves

- In order to not get problems with DNS cache pruning, we no longer store
  any name resolved data in any curl handle struct. That way, we won't mind
  if the cache entries are pruned for the next time we need them. We'll just
  resolve them again instead.
  
  This changes the Curl_resolv() proto. It modifies the SessionHandle struct
  but perhaps most importantly, it'll make the internals somewhat dependent
  on the DNS cache not being disabled as that will cripple operations somewhat.
  Especially for persistant connections.

- the TOTAL_TIME is not really total, as it excludes the connect time...

- use the hostname pointer instead of using IPv4-only info from a struct

- clarified a bit with the timecondition stuff

- no, this doesn't look like it bugs

- NetBSD alpha works, also tried a newer FreeBSD on alpha

- removed warning about signed/unsigned comparison

- the 80 column police narrowed this source code! B-]

- fixes bug report #547484, no_proxy doesn't properly strip off port numbers
  from the host names before comparing

- use new timecond defines

- allow binding the local end of a connection even when using IPv6, thus we
  now have --interface working properly

- use double where it is supposed to

- use sclose() to close sockets

- renamed the TIMECOND defines to be CURL_ prefixed

- The timecond stuff now have CURL_ prefixes

- Jacky Lam's adjust resolve-buffer size patch applied. Slightly edited
  by Daniel.

- pack_hostent does not handle 64 bit pointers correctly.
  A Bjrn Reese patch.

Sterling Hughes (17 Apr 2002)
- Prune old hostcache entries with each call...
  This can be optimized a tidbit, but this is a start.

Daniel Stenberg (17 Apr 2002)
- Dirk Manske's two new infos

- Dirk Manske's fix for HTTP response code 301, that now behaves more like
  browsers do. Which thus *breaks* the RFC 2616...

- Dirk Manske brought the patch that introduces two new CURLINFO_* values:
  CURLINFO_REDIRECT_TIME and CURLINFO_REDIRECT_COUNT.

- Jonatan Lander fixed the "Disables POST, goes with GET" output to be more
  connected with reality! ;-)

- This makes formposting with a specified file missing fail. curl_easy_perform
  will then return CURLE_READ_ERROR.

Version 7.9.6 (15 Apr 2002)

Daniel Stenberg (15 Apr 2002)
- 7.9.6 commit

- Dirk Manske made libcurl strip off white spaces from the beginning of cookie
  contents.

- check for _MSC_VER as well as __STDC__ when deciding to use the ## operator
  or not

- removed unused variable

Sterling Hughes (13 Apr 2002)
- Add protos and change return value of curl_hash_count....

- Speed up the hash code considerably, removing a bunch of legacy crud

Daniel Stenberg (12 Apr 2002)
- cut off an old section

- http_proxy must be lower case

- 7.9.6-pre5

- explain all mailing lists better

- added libcurl-errors

- store TIMER_CONNECT even if the connect failed

- corrected the verbose output for connects and fixed the connect time stamp
  better for FTP (any protocol with protocol-specific connect actions)

- the HTTP request is a CURLINFO_HEADER_OUT

- Jean-Philippe Barrette-LaPierre's patch applied

- Jean-Philippe Barrette-LaPierre provided his patch that introduces
  CURLOPT_DEBUGFUNCTION and CURLOPT_DEBUGDATA.

- error codes *ARE* documented now

- added RISCOS makefile

- brougth by Michael Curtis

- more more more

- corrected to new return codes

- added info in to failf() lines and added a infof() call just before the
  connect() so that it tells to which host and what port it is about to
  attempt the connection

- default proxy port set, as reported by Sebastien Willemijns

- updated error code

- error code cleanup, use the new SEND/RECV errors

- error codes documented

- two new error codes to separate READ into READ/RECV and WRITE into WRITE/SEND

- clarified how to write URLs in -K config files

- set the HOME variable to the current dir, to prevent any real ~/.curlrc to
  play tricks on us!

- spell checked and removed talk about very old version numbers

- 7.9.6-pre4 commit

- removed compiler warnings, made it conditional on USE_ENVIRONMENT

- Added the --environment support by Michael Curtis

- Added $Id:$ keyword

- Michael Curtis adjusted this for RISC OS

- Added writeenv.c and writeenv.h for RISCOS usage (and others?)

- added config-riscos.h

- Michael Curtis' updates

- Jacky Lam deserves a mention here

- based on Jacky Lam's "HTTP 1.0 304-only" fix, this change makes a 304 reply
  always stop reading after the headers no matter what 'close' is.

- if HOME isn't set or too long, we attempt to lost the curlrc file from
  current directory instead!

- mention the web site mirror now

- enough with stupidity, this is a test case that should fail and thus we
  should use a proper command line that *fails* ;-O

- added test 48, verify -I, -d and -G in one command line

- Reverted v1.120, -G set request type after Kevin Roth pointed out the
  stupidity in doing this. -G should work with with -I too...

- lots

- very minor log change

- T. Bharath pointed out the flaw in ConnectionExists() for how we didn't
  check proxy connections for "deadness" before they were re-used

- Fixes the problem Jacky Jam pointed out, where libcurl will "hang" for an
  extra second after having downloaded headers-only

- Jonatan Lander's fix to compile properly on pre-ISO compilers (without the
  ## operator)

- This corrects VERBOSE PASV ftp transfers on AIX (and OSF1/Tru64)
  Gerhard Herre reported this in bug report #536238

- Tor Arntsen's fix for "CGI_Lite" compliance!

- Added DNS cache control options

- Clarence Gardner pointed out the not-taken-care-of return codes from SSL_read

- Jacky Lam added memdebug.h include to prevent crashes when that is used

- fopen(... "rb") when reading what to post, so that binary posting works
  on Windows!

- Jacky Lam cookie parser fix for domains with preceeding dot

- Miklos Nemeth's update

- adjusted windows section after a patch from Miklos Nemeth

- patch by Sandro Tolaini to do good (better?) on FreeBSD

- no longer include "multi.h", it comes with the regular curl/curl.h now

- crlf replacement on uploads did not work. test case 128 was added just now
  to make sure it remains functional.

- verbose FTP PASV output could output a "random" name from the stack based
  array
  Also, uploading data with --crlf cannot check that the proper size was
  uploaded and thus should not warn if the sizes differ. This can be changed
  in the future by having the expected size in the connectdata struct and then
  increase the expected size for each byte that is added in the --crlf
  replacement process.

- added test 128, ftp upload with --crlf

- newcomer notice added

- old list is gone

- John Clayton's weird explorations in the wonders of the windows tcp/ip
  stack ;-)

- made -G set request type

- corrected for 7.9.6

- removed multi.h

- Added the three multi interface source code examples to the distrib

- fixed include and added header

- added multi.h

- include multi.h too

- moved here from ../../lib/

- moved to ../include/curl/

- added the multi functions man pages

- multi interface overview and description

- removed text that really belongs to very old libcurls that are no longer
  being used widely

- point out that this describes the easy interface and also make a more
  general statement about language bindings

- language

- added some text about PASV and PORT and stuff

- copyright string (year) update

- yaketiyak

- automake -a for the depcomp

- made it pass stricter compiler flags with less warnings

- test 32, try -d and -G

- reverted 1.109, we can't set the request type when -d is used, as -G can be
  used and it makes it a GET...

- WRITEFUNCTION correction

- Andreas Damm added thanks to his getdate overhaul

- gopher

- updated

- clarified that it is only the + letter that isn't converted on the right
  side of a ? letter

- verbose PASV transfers passed a bad buffer size to the name resolver functions
  and it cause cause a crash.
  
  Albert Choy found and fixed it.

- corrected SSL builds

- headers and security blurb added

- make sure we return CURLE_WRITE_ERROR if the write callback returned
  an error, even if we were decoding a chunked-encoded transfer

- Jun-ichiro itojun Hagino <itojun@itojun.org>:
  
  Now first check if IPv6 is supported, then use PF_UNSPEC. If not, use PF_INET.
  It'll solve both the "slow name lookup" problem on IPv4 and still work fine on
  IPv6 hosts.
  
  Bug report #530204 has more details:
  http://sourceforge.net/tracker/?func=detail&atid=100976&aid=530204&group_id=976

- bug report #530204 correctly identified that revision 1.52 broke ipv6
  functionality and this change reverts this.
  
  However, with this revert we bring back problems on (some/all?) non-IPv6
  enabled Linux machines that have getaddrinfo().

- new example for libcurl 7.9.6 or later

- if CURLOPT_POSTFIELDS isn't set, but CURLOPT_POST is, we will assume that
  we should read the POST-data from the read callback

- 2002

- CURLOPT_POST deserved a new comment with the new POST-by-callback support

- no longer attempts to SIZE a NULL pointer, as that wasn't very clever
  (but didn't crash or anything)

- Setting CURLOPT_PASSWDFUNCTION to NULL now restores the internal function.

- sendf() now deals with Curl_write() returning -1 properly, which it might
  do if the write would've blocked

- now supports all options in arrays, except the CURLFORM_ARRAY itself

- CURLFORM_ARRAYSTART and ARRAYEND are now history

- removed some silly CRLF lines

- 4 things since 7.9.5

- added test 39, tests the new -F features

- now -F supports 'filename=blabla' for parts that upload a file, to set the
  filename field of that part. A typical example line could look like:
  
  -F 'name=@filename;filename=/dev/null'
  
  This can be combined with type= too, in a manner similar to:
  
  -F "file=@log/test39.txt;filename=fakerfile;type=moo/foobar"
  
  Enjoy.

- Added support for CURLFORM_FILENAME to set the filename field of a file
  part.

- CURLFORM_FILENAME added and some cleanups, HttpPost is now curl_httppost
  with a #define to preserve backwards compatibiltiy

- corrected the use of the progress function

- minor edit

- 3.13 Why does my single/double quotes fail?

- completed the progress-bar fix

- detect fclose(NULL)

- better treatment of the config->errors, only fclose() this if it was
  truly fopen()ed. It could end up fclose()ing a NULL as discovered by
  Clifford Wolf.

- Jean-Philippe Barrette-LaPierre fixed the CURLOPT_PASSWDFUNCTION to make
  NULL set back the internal default function

- closes bug report #527032, --progress-bar works again and it adds a newline
  after the transfer is done properly

Version 7.9.5 (7 Mar 2002)

Daniel Stenberg (7 Mar 2002)
- 7.9.5 commit

- added the "known bugs" file

- new VMS messages from Nico Baggus

- Kevin Roth nicely saved us from this backslash-removing problem!

- Brad corrected the include path (again)

- corrected the newlines

- two items since pre6

- when removed, an easy handle can be curl_easy_perform()ed again

- Paul Nolan built it on pocket pc

- Ralph Mitchell's minor #include patch to prevent some warnings

- we don't skip what looks like already escaped strings, that was fixed
  ages ago

- read POST data using the read callback

- corrected the progress callback prototype!!!

- added text to the progress chapter

- explicitly mention easy handle

- mention 'easy handle' and not just handle, there will soon be other handles
  to keep track of too

- cut off 2001 and put those changes in a separate file

- added docs/libcurl/
  removed multi/

- moved lots to the new subdir 'libcurl'

- remove this directory, this is history

- multi interface using examples

- no longer include the multi dir, the examples should be in the examples
  dir

- moved to the new libcurl/ directory

- ripped out from ../ and put in its own directory now

- Added packages/EPM

- Added EPM stuff, thanks to Giuseppe Corbelli

- bug report #524427 pointed out a mistake in the example source

- initial and still basic curl multi interface documentation

- removed incorrect and unnecessary words

- several little things since pre4

- memanalyze is now moved to the tests/ dir

- include memanalyze.pl in the dist archive

- moved memanalyze.pl into the tests dir

- Nico Baggus added more error codes to the VMS stuff.

- Wesley Laxton's CURLOPT_PREQUOTE work

- Ralph Mitchell's SSL problems made me notice that we didn't increase the
  header byte counter properly

- more fancy alloc, we store the size in each allocated block so that we
  can destroy the full allocated area just before we free it

- set CURL_MEMDEBUG to enable memory debugging in case curl is compiled
  with it

- added -t for trace, helps searching for leaks and similar

- memory debugging is now only enabled if the CURL_MEMDEBUG environment
  variable is set when curl is invoked

- always allocates at least 64 bytes for real, and damages them before free

- made building outside the source tree work again, Kevin Roth reported

- minor edit

- oops, we weren't doing HTTPS - now we are

- test 304, HTTPS multipart formpost

- use the correct time in the cookie jar

- made Max-Age work as defined in the RFC.
  my brain damaged fix to not parse spaces as part of the value is now fixed
  to instead strip off trailing spaces from values.

- modified cookie expire date

- new field1 functionality testing too

- When saving a cookie jar, set field 1 (counted from 0) properly to TRUE if the
  domain starts with a dot.

- test 31: "HTTP with weirdly formatted cookies and cookiejar storage"

- removed crash on weird input, this also better discards silly input

Version 7.9.5 (26 Feb 2002)

Daniel Stenberg (26 Feb 2002)
- 7.9.5-pre4 commit

- more custom stuff, much about dealing with cookies

- a never ending stream of things to do...

- use env to run perl

- automake usage and options cleanup

- happy new year

- We got this web server's embryo from Georg Horn, muchos gracias.

- the test suite http server is now automake'd

- use the pid file, use the automake subdir

- automake this dir too

- use the former logfile name again since the ftp server also uses that...

- we actually ran all tests just now, feb 25th, 2002 12:11 MET. with the
  new http server on Linux

- reply/postcmd support for "wait"

- portability, step one, use a config.h.in file

- generate a config file for the test suite http server too

- create the pidfile and store the pid on invoke

- oops, #if not #ifdef

- support HUGE requests too

- make sure -d is treated as a POST request and thus should fail if mixed
  with -I for example

- modified the command to fail properly! ;-)

- cygnus can't include winsock.h even though it has it, why we need to
  make a different and more complicated check for when to include it

- "Yet Another Geek" made %{content_type} work in the -w/--writeout option.

- better time selection for the connect timeout

- 16 tests OK

- cut off big parts of the banner

- make sure the custom config-*.h files are in the dist as well

- adjusted to work on test case 11 better

- use -W too

- fixed to work with 'nonewline' and thus this passes OK with the new http
  server and things

- support for using protocol without a trailing newline

- hide debug output from screen, use log/ for logfiles

- lib/config.h.in added to dist

Version 7.9.5 (20 Feb 2002)

Daniel Stenberg (20 Feb 2002)
- VMS adjustments

- new from Nico!

- four more bugfixes, one VMS adjustment

- Nico Baggus' VMS tweaks

- Andrs Garca solved bug report #515228 by making sure the progress meter
  is updated even if everything is read in one single pass, as the windows
  functions apparantly does more often than other systems.

- corrected reference to multi-using examples

- include winsock.h on window boxen to work smoother there

- moved the config.h to lib/config.h

- a minor step forwards

- use the new HTTP server input file

- cut off the old perl one, this only runs the C coded version

- fixed the huge text just in case anyone actually reads it

- no .. in path

- fixed a long long mistake

- auth on multiple hosts with follow-location

- Rick Richardson's getaddrinfo() usage fix to speed up name resolves

- INADDR_NONE should be in_addr_t to work with 64bit archs better.
  
  Really, we should only #define this in one file, not both here and in
  connect.c!

- Philip Gladstone's size problem in add_buffer_send()

- 4 fixes

- offer SSL verfication callback,
  add 'headers=' in client formpost

- updated LDAP URL syntax references by Aron Roberts

- connection timeout comparison fix by Emil

- Philip Gladstone's 64-bit issues corrected.
  Reminder for the future: when we're using malloc() we MUST include <stdlib.h>
  as otherwise 64bit archs go bananas.
  
  Bug report #517687

- corrected the Expect: ignore, made Content-Type: possible to skip

- Giaslas Georgios's Host: over proxy fix

- http server added to CVS, config*h files moved

- ugh. the VMS stuff must've been like that for a reason, I put it back again

- moved the config-* files to lib/Makefile.am

- moved the config-* files here from the ../Makefile.am

- use the config files in this directory now, not ../

- moved the config-*.h files from root to the lib/ dir

- added note about persistancy in the server

- POSTs seems to work somewhat now

- port number fix, now stores the processed request sent to the server

- added Cris Bailiff's CAdir option suggestion

- the initial C code for the new HTTP test server

- changes since 7.9.4

- don't add 2 to the post size, that was a previous mistake because there
  was an extra CRLF added to the post data

- Miklos Nemeth windows update

- Miklos Nemeth added comments

- Miklos Nemeth improved the windows section

- Miklos Nemeth improved

- ARGH the CRLF I removed recently was not only done after the initial
  content-type header, it was used for each part and thus without this it
  failed MISERABLY. *smacks forhead*

- a few of the SSL options were added in 7.9.3 and it should be noted
  accordingly

- Brent Beardsley found the content-type bug!

- Kevin Roth's discovered SSL download problem

Version 7.9.4 (5 Feb 2002)

Daniel Stenberg (5 Feb 2002)
- 7.9.4

- 7.9.4-pre2

- Eric Melville fixed spell mistakes on a few places

- Andreas Damm made getdate use gmtime_r if available

- Added the recycle handles chapter
  Added most of the Customizing Operations chapter

- struct HttpHeader died ages ago, corrected comments

- Albert Chin:
  Forgot one case. On HP-UX 11.00, gethostbyname_r() is properly defined
  if -D_REENTRANT is used. Without it, the compiler still accepts the
  function prototype but gives a warning about hostent_data going out of
  scope. This is because struct hostent_data is not declared. So, we
  force an error by trying to set a variable to the struct.

- _num_chars did wrong when called with a number that starts with 1!

- corrected the docs for  CURLINFO_FILETIME

- Giaslas Georgios provided docs for CURLINFO_CONTENT_TYPE

- Georg Horn the previous SSL_read() fix, this was actually the fix I did
  on my test machine! :-)

- I have too many ideas of what to mention in this docs

- Georg Horn found yet another SSL reading problem caused by the non-blocks.
  This was a real bummer!

- big-time alert that this doesn't work

- the interface is simply called the "C" one these days

- extended the proxy chapter mucho

- now re-seed by force (even if already seeded) if a random file or egd socket
  is given

- conn->upload_bufsize exists no more

- append a CRLF pair after the content-type line

- removed three loust fprintf()s
  removed the initial CRLF in the formpost, as they are part of the request
  and should be written by the code in http.c!

- upload progress counter fix, removed the adjustable upload buffer size

- no more adjustable upload buffer size, we use non-blocking sockets now so
  this work-around is not needed anymore!

- nine items since 7.9.3

- - T. Bharath pointed out that we seed SSL on every connect, which is a time-
    consuming operation that should only be needed to do once. We patched
    libcurl to now only seed on the first connect when unseeded. The seeded
    status is global so it'll now only happen once during a program's life time.

- bad tag

- Giaslas Georgios introduced CURLINFO_CONTENT_TYPE

- Steve Marx helped us realize that we shouldn't treat customrequest as a
  request of its own, it just changes the keyword of a request.

- someone should have me punished, but this bug made curl bug seriously
  on IPv4-linux machines

- don't count a custom request as a request type of its own, it is merely
  a modifier of another type

- newly generated

- Andreas Damm made it reentrant safe!

- no longer add CRLF _after_ POST data, it should not be needed. Pedro Neves
  pointed out this ugliness.

- set header and request size to 0 before each *_perform()

- postit.c is removed, it used the deprecated curl_formparse() and may
  encourage people to use bad functions

- bug report #508235 identified a non-working Location: following, and this
  little fix seems to correct it. another case where we just returned and
  didn't shut off the reading. This bug is introduced in 7.9.3 due to the
  new internal "order".

- don't install the example programs! :-O

Version 7.9.3 (23 Jan 2002)

Daniel Stenberg (23 Jan 2002)
- 7.9.3

- 7.9.3 public

- Andrs Garca found out that we didn't properly stop reading from a connection
  after the headers on a HEAD request. This bug has been added in 7.9.3 and was
  mnot present earlier.

- more about passwords and started about proxies

- verify big files

- minor edit

- added --cc description and an example

- pre4

- HTTP POST explained

- #505514, as correctly pointed out by Antonio (anton@concord.ru), trying to
  post a non-existing file should include nothing, not an error text!

- mingw fix, mac os x fix, long long check removed from configure,
  --enable-debug uses even stricter options now

- newly generated

- added more text in the 'passwords' section

-  satisfy gcc -Wundef

- #if [undefined] => #ifdef [undefined]

- playing with more strict gcc warnings with --enable-debug

- prevents gcc -Wcast-align from complaining

- made gcc -Wcast-align happy

- #ifndef and #define magic to prevent compiler warnings when doing #if BLA
  where BLA is undefined

- updated to 2002 status ;-)

- cut off a big piece of comment and added a pointer to the Trio web page
  should anyone ever want a good printf() clone

- commented out the 'long long' and 'long double' checks, as we don't really
  use them anyway and they cause warnings in lib/mprint.c

- I wish I could type. Anyway, this proved it is a good habit to put the NULL
  on the left side of comparisons...

- added typecast for a malloc() return, and added check for NULL

- Added #include <errno.h>

- Andrs Garca patched. It now checks for EWOULDBLOCK properly on windows
  boxes.

- patched by Andrs Garca

Version 7.9.3 (17 Jan 2002)

Daniel Stenberg (17 Jan 2002)
- 7.9.3-pre3

- correct ssl version, fixed ssl writes, solved time-out disconnect without
  text, fixed dns cache problem, made it compile with openssl before 0.9.5
  again and extended libcurl-the-guide a bit more

- more text added

- added a comment about this example only works with 7.9.3 and newer libs

- Richard Archer made it compile and build with OpenSSL versions prior to
  0.9.5

- include our own sprintf() prototype to make it return sensible data on
  all platforms, I also edited a few data types slightly to prevent my
  compiler from warning on comparisions between signed and unsigned values

Sterling Hughes (17 Jan 2002)
- Get this working, still need to check for leaks and such, but should be
  fine..

- Make the keys for hostcache entries be in the format::
  host:port, so accessing curl.haxx.se on port 80 would yield a key value
  of ::
  curl.haxx.se:80

Daniel Stenberg (17 Jan 2002)
- filled-in text in the "Building" chapter and added a "libcurl with C++"
  chapter

- SSL writes passed back a silly length...

- fixed time-out returned without error text set

- Kevin Roth's SSLeay() patch, slight edited by me. Works with OpenSSL 0.9.5
  now.

Version 7.9.3 (16 Jan 2002)

Daniel Stenberg (16 Jan 2002)
- 7.9.3-pre2

- --cc and working non-blocking sockets uploads

- - shrunk the BUFSIZE define from 50K to 20K
  - made a separate buffer for uploads (due to the non-blocking stuff)
  - added two connectdata struct fields for non-blocking uploads

- modified to deal with the new non-blocking versions of Curl_read() and
  Curl_write().

- Curl_write's 5th argument now is signed

- Curl_read() and Curl_write() are both now adjusted to return properly in
  cases where EWOULDBLOCK or equivalent is returned. We must not block.

- Curl_write() now takes a different 5th argument

- Somewhat ugly fix to deal with non-blocking sockets. We just loop and try
  again. THIS IS NOT A NICE FIX.

- Somewhat ugly fix to deal with non-blocking sockets. We just loop and try
  again. THIS IS NOT A NICE FIX. We should/must make a select() then and only
  retry when we can write to the socket again.

- added support for --cc to output the compiler name. This makes it possible
  to compile libcurl stuff without any prior knowledge:
  
  cc=`curl-config --cc`
  cflags=`curl-config --cflags`
  libs=`curl-config --libs`
  
  $cc $flags $libs -o example example.c
  
  Or if you prefer, the oh-so-cool single-line version:
  
  `curl-config --cc --cflags --libs` -o example example.c

- added a somewhat cool single-line command that builds most example sources
  on unix-like systems

- initial attempt to write a tutorial-like libcurl guide

- fixed non-blocking reads, fixed ssl sessions, in_addr_t and more non-blocking

- Curl_read() now returns a negative return code if EWOULDBLOCK or similar

- a memory leak when name lookup failed is now removed

- Stoned Elipot's patch for the in_addr_t test

Sterling Hughes (14 Jan 2002)
- Remove erreaneous include, setup.h is included one line above

Daniel Stenberg (13 Jan 2002)
- Gtz Babin-Ebell updated with some new 7.9.3 features

- Gtz Babin-Ebell provided some documantation for the ENGINE stuff

- added http-post.c

- slightly extended to mention that -v and -i are good options to use when
  reporting bugs

- bad comment begone

- cut off argc and argv as well

- Cleaned up this example to make it even simpler.

- Cris Bailiff found out that when the SSL session cache was filled, libcurl
  would crash. This corrects the problem.

- David Bentham's updated QNX notification

- added a missing failf() before returning an error code

- this seems to correct the SSL reading problem introduced when switching
  over to non-blocking sockets, but this loops very nastily. We should return
  back to the select() and wait there until more data arrives, not just blindly
  attempt again and again...

- I made the write callback create the file the first time it gets called so
  that it won't create an empty file if the remote file doesn't exist

- test case 38 added a few new requirements

- updated

- added some tracability

- test case 38, try a HTTP download resume without the server supporting
  ranges

Version 7.9.3 (8 Jan 2002)

Daniel Stenberg (8 Jan 2002)
- another example source added

- 7.9.3 pre-release commit

- non-blocking sockets, DNS caching updated, cookies corrected, bool is now
  unsigned everywhere

- added two typecasts to prevent compiler (gcc3) warnings

Sterling Hughes (8 Jan 2002)
- 1) the dns_cache_timeout should be an integer, not a bool
  2) in the curl_dns_cache_entry structure, timestamp should be
  a time_t instead of an integer (although I doubt it matters).

- Add support for DNS cache timeouts via the CURLOPT_DNS_CACHE_TIMEOUT option.
  
  The default cache timeout for this is 60 seconds, which is arbitrary and
  completely subject to change :)

Daniel Stenberg (7 Jan 2002)
- As identified in bug report #495290, the last "name=value" pair in a
  Set-Cookie: line was ignored if they didn't end with a trailing
  semicolon. This is indeed wrong syntax, but there are high-profile web sites
  out there sending cookies like that so we must make a best-effort to parse
  them.

- the bool typedef is now made unsigned, to make sure it stays that on all
  platforms, unrelated to what they might prefer by default

- removed silly check for >=0 of a supposedly unsigned value!

Sterling Hughes (7 Jan 2002)
- Probably not necessary, but good practice.

- Make cach'ing work with threads now, there are now three cases:
  
      - Use a global dns cache (via setting the tentatively named,
      CURLOPT_DNS_USE_GLOBAL_CACHE option to true)
      - Use a per-handle dns cache, by default
      - Use a pooled dns cache when in the "multi" interface

Daniel Stenberg (7 Jan 2002)
- Modified to use non-blocking sockets all the time.

- VC++ makefile, HTTP 204, cookie fix, non-blocking socket for better SSL
  connection timeout

- added proper breaks in the switch()

- Added David Bentham's notes about QNX and FD_SETSIZE

- HTTP response 204 should be treated similar to 304, that is we must not
  expect (nor read) any response-body

- added precautions to not go insane when two matching cookies end up in the
  cookie list, even though they're not supposed to do that...

sm (4 Jan 2002)
- Add hash and llist to VC dsp file

- Add hash and llist to VC makefile

Daniel Stenberg (4 Jan 2002)
- -l lists all tests

- The former -c is "-C -" these days

- dns cache, ftp response read, 64bit fixes, printf replaces, inet_ntoa_r
  corrections

- replaced printf() => Curl_sendf()

- removed a commented line

- fixed an inet_ntoa() occurance to use inet_ntoa_r() if it is available.
  I also replaced all printf() calls with calls to Curl_failf()

- an unconditional occurance of inet_ntoa() now uses inet_ntoa_r() on all
  platforms that have such a function.
  This affects multi-thread running libcurls on IPv4 systems that have VERBOSE
  switched on. The previous version was risking that another thread overwrote
  the data before it was read out in this thread. There could possibly also
  be a slight risk that the data isn't zero terminated for a short while and
  thus could cause the thread to crash...

- #include the local "inet_ntoa_r.h" file if no proto was found in the global
  header directory but the function *is* present!

- The buffer in ftp_pasv_verbose(), used for gethostbyaddr_r(), is now defined
  to become properly 8-byte aligned on 64-bit archs. Philip Gladstone reported.

- The FTP response lines are now passed to the function callback registered for
  headers.

- multi stuff from the multi-dev branch

- multi interface example/test sources from the multi-dev branch

- merged the multi-dev branch back into MAIN again

- Sterling Hughes' provided initial DNS cache source code.

- minor changes

- added required software and Guido Neitzer's Mac OS X build instructions

- added a little percentage for "ok coverage"

- Changed how -I/--head works when --include is also used... Test case 104
  stopped working after the dec-20 fixes that now supports FTP operations to
  skip the transfer phase.

- Philip Gladstone's fixes

- pass an 'int' as the third argument to bind()

- Philip Gladstone's 64-bit sparc native compiler compatibility issues fixed.

- the changes from 1999 is now in CHANGES.1999

- moved the changes from 1999 into its own file

- rewrote 3.9 to be more generic with more languages:
  "3.9 How do I use curl in my favourite programming language?"

- spell

- recent fixes

- *cool* fix by Bjrn Stenberg, makes proxy transfers work better...! :-)

- If nobody is set we won't download any FTP file. If include_header is set,
  we return a set of headers not more. This enables FTP operations that don't
  transfer any data, only perform FTP commands.

- Added 4.5.6 "301 Moved Permanently", as a reply to bug report #495215

- Gtz Babin-Ebell's contributed "simplessl.c" example source code

- run automake last

- Gtz Babin-Ebell's OpenSSL ENGINE patch

- strip trailing CRs

- cut off the description to prevent people from using this!

- Marcus Webster's added CURLFORM_CONTENTHEADER docs

- Marcus Webster's newly added CURLFORM_CONTENTHEADER

- minor changes

- solaris 2.5.1 needs the sys/types.h file before the sys/socket.h

- failf() calls should not have newlines in the message string!

- when the file name given to -T is used to build an upload path, the local
  directory part is now stripped off and only the actual file name part will be
  used

- HTTP_PROXY => http_proxy as Bjrn pointed out

- corrected the READFUNCTION docs slightly

- corrected the comment above gmtime_r

- added gmtime_r check

Cris Bailiff (7 Dec 2001)
- Updated location information for Curl_easy

Daniel Stenberg (6 Dec 2001)
- Jason Mancini's -Oalways suggestion

- let us know if curl compiles on more platforms

- curl compiles on HURD

Version 7.9.2 (5 Dec 2001)

Daniel Stenberg (5 Dec 2001)
- 7.9.2 commit

- Jon Travis suggested fix. when CURLOPT_HTTPGET is used we must assign
  set.upload to FALSE or else we might still get an upload if the previous
  operation was an upload!

- Eric-update

- Eric's updated version

- Eric's #include fixes for better macos compiles

- Eric brought some files for macos compiles

- i'm soooo funny

- added macos files to the distribution archive

- more comments

- MacOS (not Mac OS X) compilation files

- Eric's update

- the happy events so far today

- As Eric Lavigne pointed out, the ftp response reader MUST cache data that
  is not dealt with when we find an end-of-response line, as there might be
  important stuff even after the correct line. So on subsequent invokes, the
  cached data must be used!

- test case 126 added, this uses RETRWEIRDO that makes the FTP server send two
  responses at once, to excerise the part of curl to make sure it can cache
  (parts of) responses properly.

- Eric nailed a but in strnequal() for macintosh

- the final ftp ipv6 support has been added!

- updates

- updated the copyright year range

- cool.haxx.se now only allows http downloads

- modified the stack trace section slightly

- pre7 and pre8 details

- test127~ should not be included!

- more careful re-use of connections when SSL is used over proxies

- SM renamed the debug DLL

- added a in_addr_t #define

- documented CURLOPT_HTTP_VERSION and CURLOPT_FTP_USE_EPSV

- added --disable-epsv

- no include, no const in strdup

- fixed the option parser to not loop when a long option is specified

- remove the command file after each test

- test126 renamed to test190 as it has to be last among the FTP tests because
  of some problems in the test server :-/

- test 127 --disable-epsv

- --disable-epsv

- fixes for tru64, fixes for mac

- disabling EPSV is now possible

- stdin is file descriptor 0

- mac fixes

- added mac stuff

- updated mac specific include files

- unix newlines

- wrongly set binary

- mucho stuff since pre6!

- added CURLOPT_FTP_USE_EPSV

- in_addr_t added

- CURLOPT_FTP_USE_EPSV can now be set to FALSE to prevent libcurl from
  attempting to use EPSV before the standard PASV.

- fill memory with junk on malloc()

- now sets a type for in_addr_t even if it isn't found in the #include files
  like on my linux box

- more more more MORE

- the perform "state machine" is more explained now

- mods

- adjusted to new FTP commands in the command sequence

- Added an in_addr_t check

- EPSV and SIZE adjustments

- Added EPSV which is now unconditionally always tried before PASV, which
  makes it work reaaaaly nicely on IPv6-enabled hosts!
  Added SIZE before RETR is made, always done on downloads. It makes us know
  the size prior to download much more frequently.
  Unfortunately, this breaks all the FTP test cases. *fixfixfix*

- use in_addr_t for inet_addr() return code. Now, now portable is this *REALLY*?
  We should add some configure tests for this!

- used in the new multi interface, not yet actually part of libcurl but
  added to CVS to make them available to others

- support para makes more sense now

- language

- the list of contributors are in the THANKS file these days

- Eric Lavigne updates

- for building on Mac before OS X

- greep at mindspring.com provided an index.html file that links to all the
  existing HTML documents. It makes it easier to browse all the docs with
  your browser.

- EPSV details

- commented out the EPSV support

- initial code added to support EPSV (IPv6-style PASV)

- recent changes

- made the -C more correct and detailed

- Andrs Garca's minor fix to make it compile on win32

- recent fixes

- this fix seems to make the connect fail properly even on IPv4-only Linux
  machines!

- updated the list of machines

- Eric fixed a wild write

- Eric found a missing comma!!

sm (22 Nov 2001)
- Fixed release-ssl build

- Undefine long_long - not supported by VC

Daniel Stenberg (21 Nov 2001)
- SM corrected wsock32 to ws2_32

- SM added connect.obj

- init the errorbuf to prevent junk from being output

- SM's vc target updates

- added error text for a failed connect case

- another Kevin Roth update

- Georg Horn's STARTTRANSFER_TIME patch

- -p, not -P, for proxy tunneling

- use the ws2_32.lib now (Miklos Nemeth reporteD)

- long port => int port, as the c source uses! (Miklos Nemeth found this)

- Miklos Nemeth pointed out the missing connect.obj

- recent fixes

- Lars M Gustafsson showed us that the free(urlbuffer) was totally unnecessary
  and plain wrong.

- Kevin Roth's fixes

- Klevtsov Vadim's time condition fix

Sterling Hughes (15 Nov 2001)
- looks better on one line (testing the cvs diffing via mail, but I also think
  this looks a bit better ;)

Daniel Stenberg (14 Nov 2001)
- spell, slightly modified "what you can do" crap

- added Richard Prescott's email

- added Richard Levitte's suggestion to support multiple -T options

- Samuel Listopad's fix to allow global_init => global_cleanup => global_init
  for ssl

- corrected the ftp_getsize() usage, as the HPUX compiler warned on them

- uninitialized variable

- interface to export/import SSL session IDs

- more more more

- 2 removed, 1 added

- disable QUOTEs with NULL

- my proxytunnel fix accidentally ruined the normal https connects

- point out that calling this function more than once is a sever error

- make sure to "read out" the server reply even if we didn't get any data from
  the server when that's the only error

- made Curl_tvdiff round the diff better and make the subtraction before
  the multiply to not wrap-around

- post-weekend fixes

- made CURLOPT_HTTPPROXYTUNNEL work for plain HTTP as well

- include setup.h

- new Curl_ConnectHTTPProxyTunnel() function, needs a **lot** of testing!!!

- We need at least one millisecond to calculate current speed with! I also
  made the getinfo() stuff divide with 1000.0 now to enforce floating point
  since Paul Harrington claims the 7.9.1 still uses even second resolution
  in the timers there

- Marcus Webster reported and fixed this read-one-byte-too-many problem...

- now we make sure that NULL is defined in the gethostbyname_r() compiles
  as it turned out they aren't everywhere, and that causes compiles to fail
  and then we don't find the proper function call!

- Added two missing return codes...

- the proof I did something yesterday as well

- we use signal() to ignore signals only as long as we have to, and we now
  restore the previous (if any) signal handler properly on return.

- get the previous struct keep_sigact

- adjusted after Ramana Mokkapati's comments

- moo

- Added VERSIONS that explains about the (lib)curl version numbers

- bug report #478780 fixed, cygwin stripped on install, some more details on
  the changes of yesterday

- myalarm() is history, we now use HAVE_ALARM and we now do our very best to
  1 - restore the previous sigaction struct as soon as we are about to shut
  off our timeout
  2 - restore the previous alarm() timeout, in case an application or similar
  had it running before we "borrowed" it for a while.
  
  No, this does not fix the multi-thread problem you get with alarm(). This
  patch should correct bug report #478780:
  //sourceforge.net/tracker/?func=detail&atid=100976&aid=478780&group_id=976
  
  If not, please post details!

- Kevin's patch to install the binary stripped

- Ramana Mokkapati's, John Lask's and Detlef Schmier's reports/changes

- John Lask's fix that adds "-1/--TLSv1" support

- Added an CURL_SSLVERSION_* enum for SSL protocol versions

- we can now tell ssl to use TLSv1 protocol, and we now use defines instead
  of real integers for versions, the defines are added to curl.h

- Ramana Mokkapati did some good bug hunting, and we these fixes ldap transfers
  should work a lot better!

- corrected the Curl_tvnow prototype (-Wstrict-prototypes found it)

- Curl_ftpsendf() had wrong return type

- added john lask

- John Lask's new makefile

Version 7.9.1 (4 Nov 2001)

Daniel Stenberg (4 Nov 2001)
- 7.9.1 cleanup commit

- added test 30, it checks that we return error on no content returned from a
  HTTP server

- improved functionality for new timeout tests

- new tests

- failf() now only overwrites the error buffer the first time it gets called
  for each *_perform(). It makes things a lot easier, as the first one that
  detects the error get to write the final error reason...

- Replaced read() and write() with recv() and send()

- more accurate

- Replaced read() and write() with recv() and send() for socket operations
  even under normal unixes.

- re-ordered, cleaned up

- Added connect.c. I really need someone to better maintain this makefile...

- Jrn added connect.c

- another day another commit

- libcurl can init winsock since 7.8.1

- ConnectionExists() now returns FALSE immediately if it finds a connection
  that is dead, because it can only find one entry anyway and if that is dead
  there won't be any other entry that matches

- added comments and function headers

- Update the byte counters in the loop so that aborted transfers have the
  information as well. Improves debug outputs etc.

- Use Curl_tvdiff to compare times

- less I, more we

- minor mods to make solaris plain 'make' to not die on this

- fixed FTPSENDF for ipv6 compiles

- a bunch

- Removed the SocketIsDead() stuff for SSL again as it doesn't work. We must
  rely on the new go-ahead-and-try mechanism that I just added to Transfer()

- If Curl_do() fails with CURLE_WRITE_ERROR on a re-used connection, this
  new logic can retry the same operation on a new connection!

- Curl_sendf now returns a CURLcode

- return type cleanup

- check Curl_ftpsendf return codes

- Added better checking of return codes when we send data to sockets/connections

- major commit, now we check the return code on every invoke of Curl_ftpsendf
  - which now is made using a macro named FTPSENDF. I turned it all caps just
  to make it more visible that it is in fact a macro.

- check return code when issuing the request

- added typecasts to make the timers calculate with doubles, not longs as they
  accidentally did after the Curl_tvdiff() interface change

- added some -c talk, spell checked

- no need for mumbojumbo

- added cool.haxx.se as an official mirror site

- nonblock => Curl_nonblock, remade the check for a live SSL connection (again)

- Added -0/--http1.0

- removed the 'in documentation' part, as I've expressed in public before

- Added an additional SSL check for a dead socket before we re-use an SSL
  connection. The simple socket-check is not enough in these cases.

- prevent strdup()ing NULL -- Paul Harrington's report

- Corrected the -T description

- removed silly old -t usage from here, added some blurb about the "new" -t
  that sets telnet options

- Kevin Roth updates

- corrected return code, general cleanup

- added curl_formadd

- minor fix to support multiple files in one formadd() call

- 29 October fixes

- Kevin Roth's cygwin package fixes

- Cygwin moved into the win32 drawer

- fixed conn->name error on connection re-use and enlarged the 'gname' array
  to hold 512 bytes (for user+password+hostname)

- SM's waitconnect return code fix!

- changed the Location: to match one Paul Harrington reports a problem with

- ldap fix, test28 added

- made 'timespent' a double, which makes more accurate calculations for quick
  downloads

- test28 added for "Location:   extraspace" test

- bug report #474568 -
  We need to set "no further data to download" before the Curl_ldap() function
  returns, as otherwise it'll hang on that assumed transfer.

- added "s390 Linux" as a platform that curl was compiled for, and I also sorted
  the list of machines

- added a section about cross compiling that Jim Duey wrote down for us

- lots and lots

- test case 27 added, to make sure cookie replacing don't leak anything

- now reports the CORRECT pid on demand

- T. Bharath found this memory leak. It occurs when we replace an internally
  already existing cookie with a new one.

- pack_hostent() now aligns the data properly on 64bit boundaries to work on
  more CPU architectures

- grammar grammar!

- added "3.12 Why do FTP specific features over HTTP proxy fails?"

- added AC_PREREQ(2.50) to prevent autoconf mistakes

- An SGI (IRIX) compiler doesn't like indended #-instructions, so they're all
  in column zero now!

- make sure the connect can't return OK but return a NULL as addr

- 2000 => 2001

- rephrased the WRITEFUNCTION description a bit

- failed transfers will now close the connection

- added cygwin package makefile

- Cygwin files

- Kevin Roth's cygwin fixes

- A Kevin Roth patch. -- It's a post 1.4.2 patch that will become part of
  libtool 1.4.3, and it's required to allow "make install" to function properly
  on cygwin.

- new return code: CURLE_GOT_NOTHING

- now counts header size return from server and if nothing is returned from a
  HTTP server we return error

- curl_easy_duphandle() now properly clones the cookie option
  - patch by T. Bharath

- added test 37

- CURLOPT_FAILONERROR now only returns error if the HTTP code is 400 or above
  unconditionalliy. Previously, the code check was for >= 300 unless follow-
  location was enabled...

- the malloc debug system only logs data if the logfile FILE * is set, which
  makes it easier to disable debug output when built with debug functions

- call Curl_done() in Curl_perform() after Transfer() was called, even it it
  returned an error as there might be stuff in there we must free/cleanup.
  This fixes the memory leak Yanick Pelletier posted about 16 Oct 2001

- don't use 'strict' anymore, as it doesn't work good with the cygwin fixes
  also, always kill/restart the HTTP server on startup if it is our test server

- Kevin Roth's cygwin adjustment

- added AC_LIBTOOL_WIN32_DLL for cygwin setup issues

- Curl_tvdiff() now returns a millisecond diff, no double like before

- progress meter fixes

- extensively commented source code, parts refreshened, the "current speed" is
  now more accurate since it is based on actual spent time without the
  assumptions from before

- better check for absolute URL redirects, adjusted to new Curl_tvdiff() proto

Sterling Hughes (11 Oct 2001)
- looks nicer and is better compatible with older vim versions

Daniel Stenberg (11 Oct 2001)
- cleanup on language, content and facts

- getservbyname is not used by libcurl, don't check for it

- removed WRITEINFO from here, it's not been supported since 7.4...

- checkserver() bugged, Kevin Roth detected and fixed

- Kevin Roth's fixes to make tests work on cygwin

- CURLOPT_WRITEFUNCTION description corrected

- cookiejar now enables the cookie engine

- hm

- added chunked encoding tests

- added test 47 - enforced http 1.0 request

- resolve problem fixed, memory leak with ipv6 gone, configure improved,
  MSVC++ project files fixed, connecthost() compiler errors, ignore SIGPIPE,
  support CURLOPT_HTTP_VERSION etc...

- New: CURLOPT_HTTP_VERSION
  Renamed: the TimeCond type to curl_TimeCond

- Added -0/--http1.0 to enforce HTTP 1.0 requests

- added the option CURLOPT_HTTP_VERSION that can specify which HTTP version
  libcurl should use in its request

- ignore SIGPIPE, as that can be actually get sent when we write to a socket

- updated the cookiejar comment

- hm, an unknown error from bind() when binding the outgoing socket would
  failf("%d") without the error as argument... it would always make a weird
  number get output

- corrected cookie-jar comment

- using a HTTP proxy will disable some protocol-specific features that non-
  HTTP procotols may allow

- SM's patch applied, we should not use arguments or variables that have the
  same name as common functions...

sm (5 Oct 2001)
- VC ID project workspace - fixes compile under win32

- VC ID project now uses ws2_32.lib - fixes compile under win32

- Makefile.vc6 changed to include connect.c

Daniel Stenberg (4 Oct 2001)
- Albert Chin's improved gethostbyname_r() tests

- made sure the correct pieces of code are compiled on IPv4-only hosts, and
  the pack_hostent() is only compiled if gethostbyname_r() isn't present.

- supports the new ADDR prefix for getaddrinfo() and freeaddrinfo() tracing

- getaddrinfo() cleanups

- Keith McGuigan's excellent fix that makes a cloned copy of the hostent struct
  for when gethostbyname() is used so that we have the memory of the struct
  allocated. This turns out to be needed if the curl handled is passed between
  threads on Windows and possibly other operating systems where we use that
  function.

- Nico Baggus' updated for 7.9

- Bjrn Stenberg reported successfully having built curl on StrongARM Linux

- non-blocking connects *done*

- me fix curl_formadd() again

- hm, I edited away the fine functionality and with this edit test case 9
  is once again running OK

- 7.9.1 pre-release 1 status

- The ARRAY stuff is now added

- added new curl_formadd() stuff

- Georg Huettenegger's fix that makes us no longer use curl_formparse() but
  instead entirely rely on the curl_formadd() function. The former one is
  subject for removal in a future release.

- Georg Huettenegger's curl_formadd fixes

- the changes done since the 7.9 release

- praise Bjorn Reese for mastering these dusty corners of socket hacking, now
  we check for the error state before believing we are connected in IPv6
  cases

- added port number in informational connect message

- IPv6 adjustments, connect()ing to bad ports still don't work properly for
  IPv6

- major connecting updates

- pick the correct timeout before the connecthost call

- faster bailout on timeouts

- added comment to the tvdiff

- removed warning

- corrected for IPv6

- added five non-blocking #defines

- conn->hp is now conn->hostaddr
  changed the Curl_connethost() proto again

- sessionhandle->hp => hostaddr

- renamed the stupid 'hp' to 'hostaddr' which actually says what it is

- removed obsoletetd myalarm() calls

- moved the myalarm() usage, and now makes sure to switch it off after the
  name resolving, as that should be the *ONLY* section in libcurl that may
  take a while in a synchronous call.

- fixed the connecthost proto: added the timeout argument

- corrected the #include files

- introduced non-blocking connects

- Added non-blocking sockets test

- moved to the java module

- moved to the perl module

- moved to separate module

- filetime should be -1 if the remote time was unknown as 0 is actually a
  valid time. we now store the filetime as a long to know for sure it can
  hold -1 (there exist some unsigned time_t cases)

- improved readability slightly

- fixed the missing getftpresponse edits

- removed the socket argument from some functions that always passed in the
  same socket and it was available from the passed-in struct anyway!

- now compiles warning-free when IPv6-enabled

- moved the PORT and PASV code into separate smaller functions for readability
  renamed all static ^_ftp_* functions to ^ftp_, prefixing with underscore is
  not nice

- more ipv6 cleanups to make smaller functions that are easier to read

- more transparant support for IPv6 name resolving

- generate bzip2 and zip files too

- free cookiejar string

- Now we're setting a default domain for received cookies so that we can
  properly match those cookies in subsequent requests

- Added test 46, cookie jar functionality

- we can verify files too

- winsock 2 fixes

Version 7.9 (25 Sep 2001)

Daniel Stenberg (25 Sep 2001)
- 7.9 commit

- Added httpput.c

- two ipv6 fixes

- moved to parent directory

- test 119 proved a memory leak in the FTP parts when IPv6 is enabled and the
  RETR fails, this corrects it.

- Adjusted to run on ipv6-enabled hosts

Cris Bailiff (20 Sep 2001)
- Commit Curl_easy v1.1.8 - constants updated for libcurl 7.9 - tests modularised

Daniel Stenberg (19 Sep 2001)
- redirect and ssl connect fixes

- Lots of praise and glory to Vojtech Minarik for setting up a test server
  and providing me with test-certificates that helped me nail the problem with
  curl not discovering with a bad certificate was used.

- http put with --crlf requires  chunked content encoding

- This verifies that bug report #462600 is fixed, a Location: following when
  the given URL has no protocol:// part and the Location: redirect contains a
  :// section

- fixed bug report #462600, following a Location: when the initial URL didn't
  have a protocol:// part did wrong

- removed Curl_http_close()

- the stuff formerly done in Curl_http_close is now done in Curl_close

- modified GetLine(), removed Curl_http_close()

- made it respond as a http proxy on CONNECT

- added two https test cases

- HTTPS test case

- Linus Nielsen Feltzing fixed telnet for win32.

- curl_easy_duphandle is new

- Linus Nielsen Feltzing changed winsock lib for linking

- Linus Nielsen Feltzing's telnet-for-win32 fixes

- libtool 1.4.2 generated

- just a simple example that seems to work!

- fixed the stunnel PEM path

- added stunnel PEM

- added the stunnel PEM file

- changed the PEM path

- libtool 1.4.2

- modified error message when PWD fails

- duphandle(), cipher list, *18* new ftp tests

- added README and FILEFORMAT to distrbution archive

- new FTP tests

- the strip stuff

- fixed the REST again

- added curl_easy_duphandle

- Added curl_easy_duphandle

- minor informatinal output changes

- moved lots of the verbose stuff to do logmsg instead

- initial test suite file format description

- ftp tests added

Cris Bailiff (13 Sep 2001)
- Release 1.1.7 - documentation update with licence info only.

- Update documentation to explicitly state Curl::easy licence is dual MIT/X - MPL.

Daniel Stenberg (12 Sep 2001)
- moved a 100K buffer from the transfer loop to the urlstate struct, as it
  seriously decreases the amount of used stack space

- removed perl and php makefiles

- reverted. twas no memory leak and the "fix" didn't even compile on windows...

- narrowed some source lines to fit in 80 cols

- ConnectionKillOne() _can_ return -1 as an indication of error
  This is T. Bharath's fix

- T. Bharath's patch that sets up a few necessary buffers in the duphandle()
  function

- *TERRIBLE* terrible memory leak occuring on all systems that have no
  gethostbyname_r() function, most notably windows machines...

- added CURLOPT_SSL_CIPHER_LIST

- --ciphers now sets CURLOPT_SSL_CIPHER_LIST

- now can set list of ciphers

- added --ciphers

- documented CURLOPT_SSL_CIPHER_LIST

- CURLOPT_SSL_CIPHER_LIST support

- added cipher_list

- added ability to set prefered list of ciphers

- changes since pre3

- removed the 'perl' and 'php' dirs from the release archive

- ouputs the start and expire dates of the server certificate on verbose
  output

- cleaned up, now closes the listener port in PASV and it doesn't re-use the
  same passive port number

- some unixes have the netrc description in the ftp(1) man page

- generated .h file cut off

- updated to allow separate packaging

- Added project curl source header

Cris Bailiff (10 Sep 2001)
- Fix perl segfault due to changes in header callback behaviour since curl-7.8.1-pre3

Daniel Stenberg (10 Sep 2001)
- Curl_cookie_output() must check that there's a cookie struct present before
  trying to address it!

- updated tool versions

- checks for sys/utime.h

- HAVE_SYS_UTIME_H adjustments

- made it compile properly when not building with SSL support

Sterling Hughes (7 Sep 2001)
- Added formatting sections for emacs and vim

- fix for emacs

Daniel Stenberg (6 Sep 2001)
- moved the session ID cache state variables into the UrlState struct within
  the SessionHandle. It was previously wrongly put in UserDefined

- Curl_SSL_Close_All() now checks that we have a session cache before we run
  around killing entries in it!

- added -R description

- first shaky and stumbling attempts at a *_duphandle() function

- added curl-mode.el

- emacs lisp setup for hacking curl code

Sterling Hughes (5 Sep 2001)
- Fix formatting when tabs and spaces got mixed up (if tabstop was not set to
  8 this looked quite funny :)
  
  Added a small formatting section for vim at the bottom, it also contains an
  emacs portion (copied it from another project I'm working on), I don't know
  if this is correct, but its a step (the vim part is correct :)

Daniel Stenberg (3 Sep 2001)
- defined HAVE_UTIME and HAVE_UTIME_H

- corrected the comment to be valid chunk format

- -R removes a TODO

- -R added

- utime() and utime.h adjustments for curl -R

- introducing -R/--remote-time which uses the remote file's time to set the
  local file's time

- use the LIBCURL_NAME instead of the "hardcoded" string

- libtool 1.4.1

- removed unused #defines

- Heikki Korpela noticed openbsd problems and libtool

- as generated with libtool 1.4.0a

- Heikki Korpela fixed the 'make -C' invokes. make -C is banned.

- the big struct rename of the year

- a few more struct fixes

- Major rename and redesign of the internal "backbone" structs. Details will
  be posted in a minute to the libcurl list.

- updated a bit

- removed cookies and SSL sessions

- new ftp upload example, brand new cookie functionality and more

- added CURLOPT_COOKIEJAR details

- '-c -'

- -c/--cookie-jar documented

- take port numbers into account when finding a previous session from the
  cache

- added COOKIEJAR

- uses the new cookie jar feature

- cookie jar adjustments

- added ftpupload.c

- lots of crap

- added the most recent one from automake 1.5, it complained on the former
  one being "too old"

- up'ed the version-info

- curl_formadd() adjustments by Georg Huettenegger

- Georg Huettenegger's updates

- automake 1.5 complained on my SUFFIXES line!

- Georg Huettenegger's fixes and improvements to curl_formadd()

- Georg Huettenegger added code to deal with error 417 when doing form posts.
  NOTE: we might do this for *ALL* errors when doing form posts.

- Added SSL session ID caching, moved some SSL code from url.c to ssluse.c

Sterling Hughes (26 Aug 2001)
- we should be using start here.

Daniel Stenberg (26 Aug 2001)
- improved the test

- Added #include <string.h> and removed a silly mistakenly added ,

- rewrite to work around BSD announcement license issues, this is also
  somewhat easier to understand if I may say so. It is slightly slower.

- cookies are stored in the reversed order now (which in turn means that
  the order is _not_ actually reversed like it used to be)

- T. Bharath's patch => linking with multithreaded versions of the c runtime
  library for use in multithreaded apps

- T. Bharath's patch. It is kind of dirty, as it #pragma aways a whole bunch
  of compiler warnings, but I guess they make the life somewhat easier to live
  for a ms dude compiling this. For a rainy day: remove the pragmas and correct
  the source code that cause the warnings!

- newly re-generated from the modified getdate.y

- include setup.h properly, not config.h

- extern declarations no longer done on windows (T. Bharath's patch)

- cleanups

- Kevin Roth's comments about -G have been addressed:
  o -G -I works on the same command line and makes HEAD instead of GET
  o -G with an already present question mark in the URL makes an ampersand get
    added as a separator instead

- Tim Costello's bug report #454856

- strcasecmp() is banned from our code, should be strequal() everywhere!
  Tim Costello reported bug report #454858.

- When setting *_URL or *_PROXY in *_setopt(), it is important that we check
  and possibly free the existing pointer first, and then clear the "allocated"
  bit. We previously mistakenly could free the new pointer passed to us by
  the friendly user...!

- started working on a function for writing (all) cookies, made it possible
  to read multiple cookie files, no longer writes to the URL string passed
  to the _add() function. The new stuff is now conditionally compiled on the
  COOKIE define. Changed the _init() proto.

- added FTPS to the list of supported protocols

- item 4.6 is now an indication of a crash, not a timeout

- As Steve Lhomme pointed out, this generates 'libcurl.dll' now instead of
  the previous 'curl.dll'

- Nico's update: "modified the build procedure to restore to the right current
  directory where the build was started and it will autosense where is was run
  from and set up the correct default directory at start of the script."

- curl_formadd() using example, the 7.9 style of building rfc1867 form posts

- I want Sterling to be my friend, so I wasted some time on splitting up the
  huge monster function _ftp() into more little functions. There are still
  more that can be done, but this is at least improving readability and
  maintainability... :-)

- Georg Huettenegger's fixes, man pages converted to HTML pages and included
  in release archive

- CURLOPT_FTPASCII is the old name, CURLOPT_TRANSFERTEXT is the new

- libcurl.3 has the info now

- CURLOPT_POST isn't needed these days

- updated

- libcurl.3 is the man page

- Georg Huettenegger's patch curl-7.8.1-pre5-patch-20010819

- added test44 formpost without Expect:, modified test9

- run 'make clean' before 'make dist' to make sure the HTML files are up-to-date

- added a 'html' target that builds HTML versions from the man page sources.
  It requires 'gnroff' and 'man2html' for now. 'make html' will be invoked by
  the 'maketgz' script and the HTML files are included in release archives.

- make html runs make html in the docs dir

- this is replaced with libcurl.3

- fflush the progress output, fixed configure.in for SSL without --with-ssl

- Troy Engel's fix for running configure without --with-ssl

- As Andrs Garca reported we need to fflush() the data->err so that the
  progress meter looks better on windows (and if the data->err is redirected
  from stderr it also makes a point)

- added "4.5 FIGURE OUT WHAT A POST LOOKS LIKE"
  added an online URL to this document
  corrected a bad use of -t

Version 7.8.1 (20 Aug 2001)

Daniel Stenberg (20 Aug 2001)
- 7.8.1

- libtool 1.3.5 leftover

- updated version in header as we have 7.8.1 details in here

- RFC2732 parsing, curl-config patching, -G added, kerberos name space fixing,
  configure fixes, libtool cleanups

- Albert Chin's neat configure/package fixes

- SM's fix for -G on URLs with host name only

Sterling Hughes (18 Aug 2001)
- <couldn't resist>
    Use a more appropriate variable name
  </couldn't resist>

Daniel Stenberg (17 Aug 2001)
- Curl_ prefix added to a few function calls

- include getinfo.h for Curl_getinfo() proto

- modified to use the renamed kerberos functions with Curl_ prefix

- Added two fields in the connectdata struct for kerberos fiddles

- use the Curl_ name space
  removed unused code
  removed use of global variable(s)

- removed dead/unused code
  removed use of global variables
  removed name space pollutions (added Curl_ prefixes)

- Curl_ prefix

- cleaned up rewrite

- Added -G

- updated to the latest fixes to the shell script

- hm, --cflags should only show the flags a 3rd party program would need

- removed --include again and stuffed the libcurl's include path in --cflags

- Added --include to set the compiler include flag for libcurl

- Added -lcurl for --libs so that single option should now suffice to use
  when building anything with libcurl

- IPv6-addresses can have dots too!

- extract IPv6-style specified IP-addresses properly

- const fixes

- -

- Corrected the years in the copyright line

- const argument

- curl_getenv() now takes a const char * as argument

- add include of stdio.h, so that base64.c compiles

- CURL_GLOBAL_WIN32, config-vms.h,  Borland makefile, -w %{http_code},
  Bug #12733 over on php.net

- Using CURLOPT_POST without using CURLOPT_POSTFIELDS caused us to strlen()
  a NULL pointer. Now, we treat a missing CURLOPT_POSTFIELDS as if there is
  no data to send.

- removed one compiler error and two "unused variable" warnings

- SM's -G patch. There's some room for improvements still, as a command line
  like: "curl -d moo=foo -G daniel.haxx.se" currently fails.

Sterling Hughes (15 Aug 2001)
- more _ftp_cwd

- ftp_cwd() abstraction
  
  "%" -> "%s"

- This can be used in another place (Curl_ftp_done :)...
  
  declare at the top of the file, put the private functions at the bottom of
  the file, however, this is clearer imho (since _ftp is already there).

Daniel Stenberg (15 Aug 2001)
- non-public functions should not use CURL * as arguments, so I changed them
  to use 'struct UrlData *' instead

- modified the Curl_perform() proto

Sterling Hughes (15 Aug 2001)
- must merge before commit
  must merge before commit
  must merge before commit

Daniel Stenberg (15 Aug 2001)
- removed protos that were moved to url.h and the new getinfo.h

- moved the url.c prototypes to here

- calls Curl_initinfo() in perform().

Sterling Hughes (15 Aug 2001)
- begin abstraction process...

Daniel Stenberg (15 Aug 2001)
- prototypes for getinfo.c

- Added Curl_initinfo() that's supposed to init session-specific getinfo-
  variables

- internal functions should not use 'CURL *' as arguments, I replaced them
  with the more appropriate 'struct UrlData *' instead.

- added getinfo.h

- David James made it build 7.8.1 pre 5

- CURL_GLOBAL_WIN32 updates

- "added in 7.8.1"

- geez, I'd ruined Nico's socklen_t define, corrected it now

- Nico's updates

- redirected stderr problem fixed, VC build with SSL makefile fix, big form
  post fix, no more globals in ssl code fix, size_t and const fix, a few VMS
  changes

- exchanged the second and third argument to fwrite(), as that makes it look
  good on VMS.
  Removed a '#if 0' section, made Curl_getmyhost static and cut off the 'Curl_'
  prefix

- #include <curl/mprintf.h>

- curl_memdebug takes a const argument now

- (un)signed and const cleanup

- --enable-debug now sets the following CFLAGS:
  -W -Wall -Wwrite-strings -pedantic -g

- minor fixes for compiler warnings

- Curl_open() only take one argument now,
  Curl_ldap_done() and Curl_dict_done() were removed,
  compiler warnings corrected

- const and (un)signed fixes

- const and unsigned/signed fixes

- removed the use of the global array for the password that was necessary
  for OpenSSL versions prior to 0.9.4, this is conditional and should still
  work with older versions.

- size_t and const

- cleaned up some of the size_t and const mess

- removed unused code, added const

- cleaned up some picky compiler warnings and indented the code curl style

- added const char * => char * typecast

- const-ified lots of function arguments

- const-ified the code, removed Curl_ldap_done()

- fixed picky compiler warnings, unused arguments, const at proper places and
  I also indented the source code to fit curl "standard"

- Curl_httpchunk_read now takes size_t size arguments instead of the previous
  ssize_t

- made some char * into const char * and I removed the check for size > 0
  in the add_buffer function.

- added const to the prompt char * in the proto

- added typecast when converting const char * to char *

- added const to the function protos

- Curl_ftpsendf's third argument is now a const char *

- corrected the size_t weirdness. Expect size_t to be unsigned. Moved most
  over to ssize_t that is signed. Removed all the special-purpose VMS #ifdefs
  that were added for this.

- added a few consts and a few typecasts to please picky compiler options

- size_t => ssize_t, removed the special VMS fix for that purpose

- added typecasts when converting from unsigned int to int

- Added an empty win32_cleanup for non-windows systems to prevent compiler
  warnings, changed the Curl_open() call as the second argument was never
  used anyway

- removed the *done() function as it served no purpose, added type casts when
  converting from 'const char *' to 'char *' to please my picky compiler
  options

- commented out empty else blocks to shut up pedantic compilers

- Added 'const' to the string arrays

- corrected dubious use of the same variable twice in a function call,
  gcc 3.0 warned about it

- curl_formparse() should no longer have any size-limit in the data section
  after this patch from Peter Todd

- corrected minor source indentation error

- moved the download/upload speed calculations, to be made on every invoke
  of the progressupdate, as on very quick transfers they wouldn't always get
  calculated!

sm (9 Aug 2001)
- Fixed bugs for building debug and SSL lib in VC makefile

Daniel Stenberg (9 Aug 2001)
- Added CURLOPT_HTTPGET and CURLOPT_SSL_VERIFYHOST, added notes to the two
  timeout-options that they don't work in multi-threaded programs.

- non-blocking connect please

- strip off user-agent before checking protocol

- The redirected error stream was closed before curl_easy_cleanup() was made,
  and when VERBOSE was enabled, that used the stream. Also, the stream was
  closed even if we looped to get more files.
  Corrects Dustin Boswell's bug report #441610

- removied $Id:$ again, this is treated as a binary file and then that field
  isn't updated! :-O

- Added $Id:$ to the header

- Added $Id:$ string for file version in the header

- when a test expects an error code but gets a different one, we now output
  both of them

- Nico's notes about porting to VMS

- test cases, verifyhost, curl -E

- added unfortunate but necessary special-purpose files for VMS and RISC OS

- The file name given to -E can now contain drive letters on windows, if they
  start the file name as in 'X:\' where X is any letter. The colon otherwise
  normally separate the file name from the password.

- credit where credit is due, added a bunch of recent contributors

- Patrick Bihan-Faou introduced CURLOPT_SSL_VERIFYHOST and code to deal with
  it.

- Patrick Bihan-Faou's verifyhost addition

- config.h file for RISC OS compiles

- script to build curl on VMS

- replacing FILE * with common file descriptors?

- language correction

- added Rick Jones's more polite wording of 1.7, makes it better and friendlier

- nine new test cases

- added  "1.7 What about CURL from curl.com?"

- test 202 - two file:// URLs in one command line

- added test 201, file:// with missing file

- VMS fixes, file:// changes, curl-config --libs patch

- Heikki Korpela posted a patch that makes --libs include the directory in
  which libcurl itself is installed in.

- Nico's VMS fixes added

- Added curlmsg.msg to the distribution

- used under VMS

- Nico's fixes for VMS, most of these are fixes for bad uses of size_t that
  forgets that it is very often unsigned. These should be fixed globally and
  then many #ifdef VMS lines can be removed.

- Curl_FormFree renamed to Curl_formclean, as it turns out VMS for example
  requires all global symbols to be *case insentively* unique! curl_formfree
  is a global function we shouldn't touch.

- adjusted for VMS

- Nico's config.h for VMS

- Nico's VMS fixes

- Nico's VMS adjustment

- VMS adjustments. The IOCTL_3_ARGS #define used now should be moved to become
  a configure checked one.

- Nico Baggus made it work and compile under VMS!

- Nico Baggus' VMS adjustments

- VMS #ifdefs added. several related to size_t problems that we must address
  globally anyway... check these as soon as the size_t fixes are in place

- made this whole file #ifdef WIN32

- VMS #include fixes,
  file:// URL treatment improvements

- adjusted to the correct treatmeant of file:// URLs

- Added RISC OS and OpenVMS to ported operating systems

Version 7.8.1 (6 Aug 2001)

Daniel Stenberg (6 Aug 2001)
- 7.8.1-pre3 commit

-   Jonathan Hseu noticed that you couldn't get a header callback unless you
    set CURLOPT_WRITEHEADER to non-NULL, even if you didn't care about that
    data. This is now fixed.

- corrected the comment for CURLOPT_WRITEHEADER in setopt(), and made it
  read a void * and not a FILE *, as that was how it used to work and not
  anymore...

- many fixes mailed in during July

- curl_escape() no longer attempts to detect already encoded stuff (in order
  not to re-encode it).

- - Sergio Ballestrero provided a patch for reading responses from NCSA httpd
    1.5.x servers, as they return really screwed up response headers when asked
    for with HTTP 1.1.

- -G or similar to make -d data get into a GET

- complete rewrite to avoid the BSD license in the previous version

- clarified '-d @filename' with a tiny example

- fixed the header that wrongly was the krb4-style one

- Andrew Francis base64 decode, my previous base64 encoder, new source header.
  No BSD-style license.

- added CURLOPT_HTTPGET

- httpreq cleanup fix

- httpsserver.pl added to release archive

Sterling Hughes (2 Aug 2001)
- Funny, I skipped right over this before.
  
  everyting -> everything

Daniel Stenberg (2 Aug 2001)
- manual fix, select() loop fix, progress callback fix

- Frank Keeney pointed out a manual mistake for certificate convertions

- "Add an interface that enables a user to select prefered SSL ciphers to use."
  
  Rob Styles posted the question, as he could've used this...

- don't do final newline output when using progress callback

- FD_ZERO() the keepfd variables properly when keepon is modified (Tomasz Lacki
  reported 12 Jul 2001)

Sterling Hughes (12 Jul 2001)
- Leftover -- add a note about this in the examples file :)

- Add win32 initialization support to curl_global_init() and
  curl_global_cleanup().  Update corresponding man pages...
  
  Improve the logic in curl_global_cleanup() and curl_global_init() so that
  they are not called twice if the application libraries have been
  initialized and make sure to reset the init flags in curl_global_cleanup().

Daniel Stenberg (2 Jul 2001)
- borland makefile fix

- added more ideas that've been floating around lately

- removed the "change test suite" item, as that is already made

- Added an item about the cookie jar stuff, contains a link to the dev file
  about this subject

- removed static, removed curl special return type, added include windows.h

- added strtok.c as a source file

- Nic Roets brought a fix for the certificate verification when using SSL.

- added test 43

- HTTP Location: following over HTTP proxy

- now runs ok on IPv6 enabled hosts

- now does OK even on IPv6-enabled hosts

- better strip

- multiple file transfers with resume fix

- 'resume from'-fix. When using "-C -" and doing multiple file download, the
  first resume was used on all files instead of being reset between each file.
  As found by Bjrn Stenberg.

- - Anton Kalmykov provided a fix that makes curl work with form field names
    with spaces like when -F is used.

- Anton Kalmykov's fix for dealing with form names with spaces!

- added return type void in SYNOPSIS

- libcurl.5 is renamed to libcurl.3

- all changes from year 2000 was moved to CHANGES.2000 and that is now
  only available in CVS

- the changelog from year 2000

- ftp cut off transfer fix, configure --with-ssl fix

- when --with-ssl is used with a specified path, we use that path immediately
  to check libs and include files in, we don't check the default places first!

- Added items we've discussed previously, and URLs to dev notes discussing
  the matter

- better treatment of truly aborted transfers

- files to ignore by default in cvs operations

- made stdin testing work, also made 'nocheck=true' work when set on the
  reply data section

- three more HTTP tests added from the old test suite

- removed a failf() that would overwrite the previous error message

- better ssl error msg, libcurl.def fix, -version-info corrected, more test
  cases and fixed FTP ranges

- Salvador Dvila's ftp range download fix

- New test cases added

- supports SIZE now

- corrected the -version-info

- Added a check that 'localhost' resolves before the gethostbyname_r() checks,
  as they depend on the resolving of that name. It seems this mistake is
  happening from time to time and people have a hard time finding out why
  configure can't detect their gethostbyname_r()-setup.

- duplicate curl_unescape entry removed

Version 7.8 (7 Jun 2001)

Daniel Stenberg (7 Jun 2001)
- 7.8 commit

- SM's suggested update of the Microsoft and SSL compiling section

- SDavila posted a fix that sets conn->bits.use_range properly when doing
  resumed downloads

- Jrn corrected the mingw32 makefile

- S. Moonesamy updates, strtok.[ch] issues

- Added note about src/hughelp.c and the new *.cvs file that can be used if
  you really can't generate that file.

- For people using CVS but with no perl, like all those windows losers. They
  can just rename this file and cut off the extension instead...

- corrected the CVS note about not creating a subdirectory... which it does now

- MUTE is gone, PHP examples, new CVS structure

- made the test-program in the bottom compile/build, remember to link with
  strequal.o as well!

Sterling Hughes (1 Jun 2001)
- Add documentation for the --vernum attribute

Daniel Stenberg (1 Jun 2001)
- CURLOPT_CONNECTTIMEOUT works on win32 these days, S. Moonesamy pointed out

Sterling Hughes (1 Jun 2001)
- Update the cvs instructions.

- Test (and revert change from previous test).

- testing... testing... 1, 2, 3

Daniel Stenberg (31 May 2001)
- removed CURLOPT_MUTE, it is not used anymore

- MUTE is now considered obsolete

- CURLOPT_MUTE and data->bits.mute are history, removed, gone!

- the global init stuff, strtok.h mess, _REENTRANT fixed

Sterling Hughes (31 May 2001)
- add entry for getbinarypageinvar.php

- Change to // comments and add <?php and ?> wrappers

- Update comments and wrap in <?php and ?>

- update the comment style from '#' to '//' which is the "un-official"
  standard PHP comment.  Also wrap the code in <?php and ?> and finally
  add getbinarypageinvar.php to Makefile.am and README

- Add the getbinarypageinvar.php, which shows how to use the
  CURLOPT_BINARYTRANSFER, added in PHP 4.0.6 along with the
  CURLOPT_RETURNTRANSFER option.

- Test and substance patch.
  
  This is my first CVS commit :), what it does:
  
  - Makes sure that parts of the cURL library don't get initialized twice
  - Makes sure that we only free what we initialize

Daniel Stenberg (31 May 2001)
- Added CVS $Id$ keyword for inline version tracking

- updated to again set the flags of what to init, and now also feature a
  set of available flags

- fixed the dlopen check

- removed _REENTRANT define

- re-generated

- include setup.h _before_ system includes

- if NEED_REENTRANT is set, define _REENTRANT already here since it has to
  be defined as many include files as possible (Solaris req)

- includes setup.h, and thus I could remove the _REENTRANT define

- the CURL_GLOBAL flags are now used to set what parts to init globally

- went back to the version where the flags argument to curl_global_init()
  specify exactly what global parts to init. Thanks to Sterling Hughes really
  for arguing wisely.

- removed the prototype and made it include string.h instead
  
     If your system, such as Solaris 2.7, lacks the strtok_r() prototype in
     string.h, then you'll face a bunch of warnings on all instances
     where strtok_r() is used.
  
     There's not much we can do about it. Adding a prototype here screws
     everything up on other platforms! :-(

- Sterling Hughes suggested we set 'static' before size_t...

- libcurl now has MUTE and NOPROGRESS set by default

Version 7.8 (30 May 2001)

Daniel Stenberg (30 May 2001)
- 7.8-pre2

- include strtok.h to get the prototype

- finally fixed the 'ret' compiler warning

- removed python interface, there is one now! ;-)

- -# fix, thread fix, easy.c compile fix and more

- made the automake line re-build from _all_ Makefile.am files in the source tree

- english fix

- now uses CURL_GLOBAL_DEFAULT

- curl_global_init() support for CURL_GLOBAL_NOT_SSL

- Sterling Hughes's fixes

Cris Bailiff (30 May 2001)
- Added Solaris 'pkgadd' building support to packages collection and autoconf/automake files

Daniel Stenberg (29 May 2001)
- not used in autoconf version 2.50

- check for strtok_r

- curl_ => Curl_

- re-indented to follow "project curl"-style, renamed curl_ prefix to Curl_

- strtok() replaced with strtok_r()

- adjusted for automake 1.4+

- Added strtok.[ch]

- we rqeuire autoconf 2.50 now

- fixed the -# to write to the same as --stderr is set to

-  3.11 How do I POST with a different Content-Type?

- clarified the MUTE option

- updated, improved language at a few places

- moved list of authors to the separate THANKS file and added that to the
  release archive

- text: added in 7.8

- beauty fix

- global_init() takes that flag argument

- 7.8-pre1 commit

- fixes

- added libtool

- major: curl_general_init/cleanup

- ftps:// works

- adjusted the global_init() call to pass the new flag argument too

- global_init() takes a flag option now, to tell libcurl what _not_ to init.
  it will make it better when the application uses several libs that use
  openssl and it also enables us to do the win32 winsock initing in the future
  if we want to

- better -v use, passes -I to all perl invokes

- added calls to curl_global_*, they aren't really needed for this application
  but it shows good manner to always cleanup

- added 'curl-config --vernum' for hardcore hex version output

- changed the check for command1.txt to test1, so that automatic testing
  in 'make distcheck' will work

- increased interface age

- T. Bharath's comments about SSL cleanup incorporated, and the two new
  curl_global_* functions

- curl_global_cleanup and curl_global_init added to the family

- Added more test cases

- test case converted to the new file format

- test: HTTP over proxy

- Removed references to the previous file format, added some tests about
  the new format but there's still much more to be said and done

- adjusted to the new test case formats

- Removed the former files using the old-style test case format, added the
  new ones. Many more of the old ones must be "ported" to this new format
  to make the test suite complete again.

- new test case file format

- Added Andres' comments about field 2 in netscape cookie files

- Andrs Garca's netscape cookie file parser fix

- general autoconf and automake fixes

- store httpcode _before_ doing the FAILONERROR check so that getinfo works
  afterwards (bug #426442)

- cleanup commit for new autoconf+automake+libtool versions

- fixes and improvments

- turned newlines into DOS styles

- made it binary in CVS to maintain DOS newlines and turned those newlines
  into the DOS kind!

- Added text about the test case numbering

- doesn't run ssl tests if libcurl wasn't built with ssl support (and reports
  about the libcurl SSL status)

- added a lame double-check for libcrypto as otherwise it wouldn't get added
  properly! (?) Anyone has any better solution then please step forward!

- Added test case 400, the first ftps:// one

- ftps test case data

- slightly "hackish" approach to disable SSL during download if the connection
  is a FTPS connection as the data transfer is then done unencrypted!

- this should not set a SSL path to LDFLAGS or CPPFLAGS unless it really needs
  to

- added some, removed some, moved around some.

- nicer OpenSSL header check

- our internal strlcat() is now named Curl_strlcat()

- strlcat() is now Curl_strlcat() instead to prevent collisions when used with
  other libs

- strlcpy() turned static

- Added #define CURLE_ALREADY_COMPLETE to not break compiles that use that
  symbol, but libcurl will not return this ever

- added pointer to the examples/getinmemory.c source code for paragraph
  5.2 "How can I receive all data into a large memory chunk?"

- Added getinmemory.c

- this might actually compile too...

- an example on how you can use the write callback to receive data in a memory
  chunk

- We need -lpthread for the pthread example

- corrected

- Added  Pawel A. Gajda

- Pawel A. Gajda fixed resumed transfers on persistent connections

- Added the first https test: 300

- pid files fixes, ftp server already-running-but-no-control check

- Jun-ichiro itojun Hagino fixed FTP PORT for IPv6-enabled libcurl

- added a pointer to the download web page

- Added tons of comments all over

- multiple transfer path fixes, location fixes, resume download changes,
  ssl peer verify fixes and more

- CURLE_ALREADY_COMPLETE is removed
  CURLE_SSL_PEER_CERTIFICATE is added

- Uses the Curl_SSLConnect() according to the new return type

- fixed Curl_SSLConnect() to return CURLcode errors, including the new error
  code for peer certificate errors

- changed wording to make it more obvious I don't continuously work on this.

- two new FTP file transfer resume test cases added

- removed unused #ifdef'ed section

- when asking for a resumed FTP transfer, even though the entire file has
  already been transfered no longer returns error but instead is OK. The
  reasoning behind this is of course that no extra actions need to be taken
  and it is as if a transfer had been successfully performed.

- checkheader() added to check headers+contents instead of the previous
  strnequal() approach that really didn't follow the RFC properly

- another multiple FTP transfer fix

- Ingo Wilken's redirect fixes

- Ingo Wilken's patch to support multiple spaces after "Location:"

- When re-using a connection, the path pointers were not setup properly so
  that multiple FTP transfers were not possible

- added ftpsserver.pl stunnel.pm

- removed some texts like "starting with version XXX" blabla

- made clear that the cookie file format understood is Netscape _and_ Mozilla

- when getting a FTP file with NOBODY, we will no longer return error if
  SIZE doesn't work, we just don't output any size info!

- Added stunnel.pem

- corrected the read-callback typecase since FILE * was replaced with void *

- fixed 'storefread' to not make a warning

Version 7.7.3 (7 May 2001)

Daniel Stenberg (7 May 2001)
- 7.7.3

- changed FILE * to void * in all callbacks

- Added multithread.c

- example using multiple threads to get URLs

- updated contributors list

- 'FILE *' changed to 'void *' in all callback functions

- fixed the link to the OS/2 Patch for OpenSSL

- corrected bad use of the CURLOPT_HTTPPOST header

- Cris changes

- Cris Bailiff's fix to disable chunked transfers on re-used persistent
  connections.

- Cris Bailiff's fix to never attempt to get the body of a 304-reply!

- buildconf added, Sterling Hughes added that file

- useful script to run after updating from CVS

- fixed the EXTRA_DIST line

- When Content-Length:0 is received, we now bail now and return success
  directly after all the headers are received!

- bugs, fixes and updates

- clarified and updated

- improved treatment of "Content-Length: 0", which is done by having
  maxdownload set to -1 when not used

- new

- Curl_GetFTPResponse() is rewritten to read all incoming data in large
  chunks, which makes it a lot faster and will make ftps work better...

- split curl and libcurl into two strings in the initial display

- connection re-using didn't work on non-default ports when not using proxy
  until now

- added some verbose summary output stuff

- no name no test

- include debugmem for memory leak detection

- SSL based tests

- new tests, new server invoke system

- fixed

- stunnel and diff are added requirements

- on albert chin's comment I remade the fix to set '\0' instead of 0 since
  they're chars

- libcurl.5 replaces LIBCURL as main libcurl overview document

- minor rephrasing

- form post, not just form

- clarified and extended with an example

- Added comment about where to find the HTML versions of the man pages

- Added curl_mprintf and curl_strequal in the list of "useful functions"

- curl_printf became curl_mprintf

- curl_printf is curl_mprintf now

- Added zero termination, as the OpenSSL version string was written without
  it!

Version 7.7.2 (23 Apr 2001)

Daniel Stenberg (23 Apr 2001)
- curl 7.7.2

- borland fixes, broken host: for persistent connections

- persistent is spelled with an 'e', not an 'a'

- no need to copy the name when re-using the connection, we already have the
  same name in that buffer from the URL parsing!

- Rosimildo da Silva corrected them to build a proper lib and to use options
  for multi-threading compiling

- copy the name properly when re-using a connection

- added missing (new) man pages

- old krb4 fix for strlcat() prototype

- brand new

- removed done entries

- updated and spell checked

- spell checked

- updated with the Java stuff and so

- Added an examples section with examples I made up for the web page

- This is LIBCURL turned into man page format!

- Cris Bailiff's 1.1.5 changes: Add latest CURLOPT_ and CURLINFO_ constants to
  the constants list

- Cris Bailiff's 1.1.4 changes: Fix case where curl_slists such as 'HTTPHEADERS'
  need to be re-set over persistant requests

- minor corrections

- SM's real name is now used where he's credited

- A Linus Nielsen Feltzing-patch that removes the decimals from the size
  outputs...

- fixed an nroff syntax mistake

- Added a brief description of curl-config, mentioned that curl_* functions are
  the only public ones

- Albert Chin's patch posted to the mailing list 19 Apr 2001

- added an include to build on ultrix

- confirmed install on ultrix 4.3a

- works!

- Last two days' changes, loadsa

- Georg Horn's updates, this is _also_ called 1.1.3 ! ;-)

- Added curl-config.1

- brand new command, brand new docs!

- Added contributors

- configure sets variables that curl-config uses to display what features
  that have been built-in

- Remade resume stuff to keep data in the connectdata struct instead of the
  main handle struct to work with persistant connections

- Cris Bailiff's and Georg Horn's big improvements

- init the speed index variable between transfers

- Frederic Lepied's ftp download resume fix

- more intial fixes

- Added curl-config as a script that now gets installed

- libcurl version, not curl version

- Generates curl-config now

- tiny tool for outputting curl config variables

- use GMT for the conditional timed gets (reported by Phil Karn)

- Added text about curl.haxx.se not being a good test target for people's
  libcurl experiments...

- we must fix SSL when IPv6 is enabled, since we can still connect to ipv4
  sites and then SSL works perfectly

- calling curl_easy_perform() with no URL set, now returns an error as
  early as possible

- we don't use the HTTP_PROXY environment variable in uppercase anymore, since
  it might become a security problem (Bugs item #415391)

- now it works

- minor updates, still crashes

- added Linux hints

- oops, missed the shut-off non-blocking fix

- interfaces, windows non-blocking connect, progress meter fix and more

- SM made the connection timeout work for windows boxes!

- initial silly README

- C header to java converter

- initial java interface commit: IT DOES NOT WORK

- Added CURLOPT_HEADERFUNCTION description

- setopt() works with the new CURLOPT_HEADERFUNCTION:

- Added new CURLOPT_HEADERFUNCTION callback for writing headers only

- corrected by SM to build better with openssl

- SM's updates

- formfree() fix, version display fixed, curl_escape() fix

- Andrs Garca pointed out a mistake with CURLOPT_EGDSOCKET

- Andrs Garca fixed curl_escape()

- show openssl 0.9.6a properly

- NULL argument crashes this in 7.7.1 and before

- curl_formfree() can be called with a NULL argument

Version 7.7.1 (4 Apr 2001)

Daniel Stenberg (4 Apr 2001)
- 7.7.1 commit

- bugfixed the Location: following that must've been bad since the persistant
  connections were introduced

- - disabling port on absolute redirects is wrong
  - removed #ifdefed code

- two crashes removed

- better error checks for failure conditions (based on Puneet Pawaia's reports)

- Puneet Pawaia pointed out the lack of http_chunks in several places.

- elaborated more in CURLOPT_HTTPHEADER section

- ftps:// added and the perl interfaces changed

- ftps:// support added

- Georg Horn's and my fixes to make it compile with 7.7

- Georg Horn set -Wall

- Georg Horn's updates

- make sure the alarm is off when returning from curl_easy_perform()

- Added a line about the new makefile example

- Added Makefile.example as an example makefile that can build the example
  source files (if edited slightly)

- Added ftpget.c just to show that it is exactly as easy to get FTP files

- no more ' as first letter of a row, and made the quotes match in the top
  .BI line

- Added some text to WRITEHEADER about the fact that libcurl will always write
  complete header lines one-by-one to that file handle

- 7.7.1-beta1

- persistant fix for http/1.0

- 'Connection: keep-alive' is now understood when sent by a HTTP/1.0 server
  as an indication of a persistant connection

- numerous corrections since the 7.7 release

- Colin Watson's man patch as posted to debian bug tracker numer #90281

- two Qs added:
   1.5 Who makes cURL?
   1.6 What do you get for making cURL?

- make should be $(MAKE)

- match the new never-read-body when doing HEAD

- curl_setopt() should be curl_easy_setopt()

- DONT TOUCH the data->url as it may point to read-only memory!!!

- updates by SM nttp at iname.com

- now always stops reading a HEAD reply after all the headers have been returned
  RFC 2616, section 9.4 says: "The HEAD method is identical to GET except that
  the server MUST NOT return a message-body in the response."

- ConnectionExists() wrongly returned TRUE for too many connections if proxy
  was not used...

- updated with the new don't-encode-already-encoded-data concept

- Treat 302-redirects the same way we treat 303-redirects

- reset the follow location counter in Curl_perform() so that we can follow
  new locations on the same connection that was previously followed on

- brand new Curl_ prefixes on global symbols

- made it use Curl_ prefixes on global symbols

- Jim Drash suggested and I made it not encode what looks like an already
  encoded letter (in curl_escape)

Version 7.7 (22 Mar 2001)

Daniel Stenberg (22 Mar 2001)
- 7.7 commit

- removed the duplicates!

- added escape and unescape

- the new escape/unescape function setup

- (un)escape, configure hack, betas run fine

- added how to pronounce curl! ;-)

- don't mention explicit version 7.8
  removed escape/unescape as they're now documented

- added escape and unescape man pages

- not exactly new, but documented for 7.7

- Andrs Garca's problems on the mailing list made me realize that we can't
  allow this script to simply detect a gethostbyname_r() if it can't figure
  out how to use it. From now on, this script will fail when that happens.

- GNUTLS is another new SSL library we can add support for. Anyone?

Version 7.7 (19 Mar 2001)

Daniel Stenberg (19 Mar 2001)
- 7.7-beta5 commit

- test case 39 added, HTTP location and continue

- Added support for HTTP code 100 continue, as 8.2.3 in RFC2616 defines

- detect if chunked transfers are aborted

- corrected the close to sclose() so that the memdebug stuff works

- new directories

- removed the CURL_SEPARATORS define

- re-generated with the memdebug.h include

- added memdebug.h include

- moved to ../../php/examples/

- the PHP examples are moved

- fix the new makefiles in php/ and perl/

- use perl in two ways

- Short about the perl interface

- filled in

- for the php examples

- PHP examples

- new PHP section

- a perl script that can be used to mirror all curl archives

- Added README for releases

- Added to build proper releases

- Georg Horn's Curl::easy interface for perl

- moved to contrib/

- moved here from ../

- moved the documentation item to 7.8, it is rather important to have things
  documented

- updated to have the windows builds instructions use the root Makefile that
  is delivered with each source archive

- connection timeouts added

- added connect timeout support

- Added --connect-timeout support

- Added CURLOPT_CONNECTTIMEOUT

- connection timeout is now supported

- Jrn's win32-fix to make it work better

- corrected it, did I mention IPv6 with HTTP proxy?

- Put more concentrated unix install help already at the top, with a note that
  you might need to be root to use 'make install'.

- added some text for -d that says it "emulates filling in HTML forms" as that
  is what most people will use -d for

- ipv6 adjustments

- removed a bunch of warnings for IPv6-compiles

- now works with IPv6 and HTTP proxy

- netrc fix

- hm, don't free the home dir and append the .netrc part properly

- checks for a few functions and include files more for the new getpwuid()
  stuff in lib/netrc.c

- uses getpwuid() to find user's home dir

- added a missing \

- always append the incoming request to the server.input file, it allows
  the mainscript to verify a whole series of requests

- updated to work with the modified http server

- Added test case 38

- Edin Kadribaic's bug report #408488 forced a rearrange of two struct fields
  from urldata to connectdata, quite correctly.

- Added the --egd-file and --random-file options

Version 7.7 (14 Mar 2001)

Daniel Stenberg (14 Mar 2001)
- curl 7.7 beta 3

- removed the two unnecessary include files

- ssluse fixed, various win32 fixes

- Bjrn Stenberg corrected the silly '(void)data' usage when SSL is not
  used

- Jrn's updated file

- the URL escape/unescape functions are also public but undocumented

- First Jrn's updates were applied, then
  my take at removing the private functions from the list, then I renamed
  the *str(n)equal functions...

- no longer includes the curl/types.h and curl/easy.h include files
  explicitly, as they're taken care of indirectly by curl/curl.h these
  days.

- increased the 'current' number for the interface

- Curl_str(n)equal renamed to curl_str(n)equal

- documented the undocumented public functions in libcurl

- chunked bugfix, Jrn's fixes, the interface number increase

- The Curl_* prefixes are now changed for curl_* ones, as these two functions
  are used externally and thus are public symbols.

- Jrn added "#define socklen_t int"

- Jrn fixed it to compile on win32 again

- Jrn Hartroth added a set of files

- Jrn Hartroth fixed a bad #endif placement

- re-added the default switch for weird states

- removed the random seeding and persistant stuff, as both are already in
  this version!

- Added a failf() error message when the chunked read returns failure

- updated the chunked state-machine to deal with the trailing CRLF that comes
  after the data part

- made 'X to Y' sequences not include X twice

- corrected the chunked format

Version 7.7 (13 Mar 2001)

Daniel Stenberg (13 Mar 2001)
- 7.7 beta 2 fixes

- EXTRA_DIST got too long, I shortened it now but we have to do something
  else as it will grow a lot more...

- failf() now respects the mute flag

- Guenole Bescon's bug found on march 8 is added

- exchanged I and me to we and us in a lot of places
  updated for persistant connections and 7.7

- Added test case 37, HTTP GET with name+password in the URL

- a whole new section on persitant connections and how they're treated
  internally

- we speak HTTP 1.1 now
  more braging about the portability

- close policies

- initial close policy support

- Added 'created' to the connectdata struct to hold the creation date, to
  be used for the close policy decision

- Curl_tvnow is now properly declared with (void)

- curl_getinfo is removed, not a public function

- added --random-file and --egd-file to the command line client

- Added the two new seeding options

- two new random seed options for the ssl config struct

- two new random seed options: CURLOPT_RANDOM_FILE and CURLOPT_EGDSOCKET

- better chunked error detection

- Added test case 36:
  [HTTP GET with badly formatted chunked Transfer-Encoding]

- updated the comment for the chunked reading

- made it return illegal hex in case no hexadecimal digit was read when at
  least one was expected

- added an error code for illegal hex values in the chunked stream

- Added new libcurl options in include/curl/curl.h, they're documented in
  curl_easy_setopt.3 and they're partly implemented in lib/url.c
  
  Slowly, we're getting there...

- Added options for the persistant support, they're also documented in
  curl_easy_setopt.3 now

- support for a few new libcurl 7.7 CURLOPT_* options added

- Added four new options that come with the new persitant support:
  CURLOPT_MAXCONNECTS, CURLOPT_CLOSEPOLICY, CURLOPT_FRESH_CONNECT and
  CURLOPT_FORBID_REUSE

- the client is adjusted to work with persistant curl handles, and *gee* it
  seems to be working!!!

- Added infof() calls for persistant connection info, we are very likely to
  need these at least for debugging 7.7 and probably later as well...

- moved the libcurl init call

- persistant updates

- added a note about persitant connections through HTTP proxies

- Added some persistant notes

- modified to make the curl client with persistant connection support do
  correct

- include the failed test case numbers in the end summary

- Added description of the new test case ranges support

- made it support test case ranges on the command line, specified as
  "X to Y", where X is smaller than Y.

- adjusted to work with the HTTP 1.1-speaking libcurl

- output the protocol data to stderr when verbose is on

- server problems,
  libcurl *works* persistant over HTTP proxy!!!!

- modified Curl_disconnect() so that it unlinks itself from the data struct,
  it saves me from more mistakes when the connectindex is -1 ... also, there's
  no point in having its parent do it as all parents would do it anyway.

- split up the big printf() into several ones to never use strings longer
  than 509 letters (as newer gcc warns on with -Wall)

- bugfix: don't use the connectindex if it is -1

- added persistant connection details

- replaced I and my with we and us

- updated

- use the new name and hostname even though an old connection is reused, since
  we can re-use a proxy connection that actually has different host names on
  the same connection

- remake Host: for each connection and it'll work with proxies too

- for HTTP/1.0 we default to non keep-alive connections, but when we get a
  1.0-reply from a proxy we use and the Proxy-Connection: keep-alive header
  is used, we switch it on and live happily ever after

- Added httpversion to the progress struct, we do read it, we can just as well
  store it.

- the socklen_t check is more involved now, but works on linux at least

- Added socklen_t

- added a check for socklen_t
  removed the tiny/Makefile that was added accidentaly before

- all comments for the former public "low level" interface have been removed
  since they were out-of-date and not correct anymore.
  
  moved around some struct fields

- removed handles and states from the main structs
  renamed prefixes from curl_ to Curl_
  made persistant connections work with http proxies (at least partly)

- curl_transfer became Curl_perform() to better match the public name and
  use the correct prefix

- prefix changes curl_ to Curl_
  made it work (partly) with persistant connections for HTTP/1.0 replies
  moved the 'newurl' struct field for Location: to the connectdata struct

- #include <string.h> removed a warning

- removed curl_read() and curl_write() - they weren't used and the public
  "low leve" interface is dumped

- uses socklen_t now

- curl_ prefix modified to Curl_

- accept() and getsockname() now use socklen_t types, as that was just added
  to configure

- use unsigned int hex to receive the hex digit in, caused a warning with
  -Wall and a new gcc

- Modified to use Curl_* functions instead of curl_* ones

- only generate maximum 509 characters in each string

Version 7.7 (8 Mar 2001)

Daniel Stenberg (8 Mar 2001)
- version 7.7-beta1

- persistant adjusts

- HTTP HEAD tests

- return from transfer when all headers have been received and nobody is set,
  as is the case when doing HEAD requests

- updated for persistant connections

- made it split the version number on - too to make 7.7-blabla make a better
  version number define in the header file

- added lots of numbers for the error codes as they're often printed
  and used

- clarified the 0001-files use a bit, I couldn't understand it myself! :-)

- Added test #34 - HTTP GET with chunked Transfer-Encoding

- "Transfer-Encoding: chunked" support added

- added the http_chunks files

- chunked transfer encoding support

- connection timeout is in for 7.7

- initial chunked transfer-encoding support

- removed compiler warning if HAVE_RAND_STATUS is false

- Added persistant connections blurb even if it doesn't really work yet...

- cleaned up for the 7.7 fixes

- new seeding stuff as mentioned by Albert Chin

- Added a persistant connection example

- updated to libcurl 7.7 conditions

- mucho updated with new 7.7 concepts

- removed an incorrect comment

- all test cases run OK now (again)

- more details on debugging with the test suite

- show the ftp server invoke line when -d is used

- talks more on verbose

- free the struct on done

- telnet without any static variables

- set download size properly for HTTP downloads

- enable persistant connections by default

- remade FILE:// support to look more as the other protocols

- runtests -g explained

- persistant support protocol updates

Version 7.7. (4 Mar 2001)

Daniel Stenberg (4 Mar 2001)
- 7.7 alpha 2 commit

- Added include of easy.h to enable libcurl-using programs to *only* have to
  include <curl/curl.h>

- Curl_http() could crash on connection re-use

- ipv6 fix for the 'port' no longer in urldata

- fixed for persistant stuff

- latest

- remade the port number stuff so that following locations work and doing
  intermixed HTTP and FTP persistant connections also work!

- Added the disconnect proto

- removed the slist -functions from here
  added the Curl_ftp_disconnect function for FTP-specific disconnects

- improved connections

- extending connectdata

- moved the slist-functions here from FTP since they're more generic than simply
  for FTP-stuff

- strdup() takes a const char * now

- cleanup better when connects fail

- added some infof() calls for persistant info

- we only allocate the HTTP struct if we need to

- Now persistant connection download works thanks to the Content-Length taken
  into account

- moved the dynamicly set pointers to the connectdata struct

- Douglas R. Horner's corrections applied

- IPv6-adjustments

- corrected memory leaks when re-using connections

- multiple connection support initial commit

- bugfix

- -g runs the specified test(s) with gdb!

- removed the #ifdef

- win32sockets.c is now added with winsock init/cleanup example functions

- Added three tiny PHP examples

- blurb about different languages and environments added

- just a few PHP/curl examples

- added two VC++ files for project stuff

- Made CURLOPT_POST no longer necessary when CURLOPT_POSTFIELDS is used

- Moved a bunch of prototypes from curl.h here, they're no longer public and
  I merely stuffed them here before I decide where they belong and if they
  are to remain at all

- removed a bunch of "low level" functions that were never used and are about
  to never become reality either

- MS VC++ stuff

- Bob Schader updated this

- added stuff to the mailing list chapter

- removed --continue task (done)
  added URL to the NTLM task

- 2.2 - rephrased

- better english timeouted => timed out, as suggested by Larry Fahnoe

Version 7.6.1 (13 Feb 2001)

Daniel Stenberg (13 Feb 2001)
- 7.6.1 commit

- moved the protocol-specific free to allow easier multiple transfers

- ftp response fix, netrc fix for non-http/ftp, https put research

- corrected the prototype

- Added 3.10 and a few minor updates

- very minor indentation fix

- removed getenv.h from the package as it was unused

- Not used anymore

- Added a failf() call in the error-check just added

- if netrc is parsed and our host was found in there, set data->bits.user_passwd
  unconditioanlly!

- today's FTP response check fix

- postit.c was added as a HTML form file upload example

Version 7.6.1 (7 Feb 2001)

Daniel Stenberg (7 Feb 2001)
- 7.6.1-pre3

- GetLine() didn't properly act on -1 lengths returned from Curl_read()

- Added #define ssize_t int since ssize_t doesn't seem to exist in normal
  win32 systems

- no longer #includes "getenv.h"

- silly me, corrected the strlcat() to compile

- new openbsd inspired implementation of strlcat()

- nntp@iname.com's suggested fix to set the libpath

- adjusted the IPv6 stuff to compile and build on Linux as well

- Jun-ichiro itojun Hagino's IPv6 adjustments

- Robert Weaver's VC experiences

- Added a telnet section

- Added a few more configure option explanations

- the new getinfo() stuff and the cygwin patch

- Added blurb about the win32 thing that precents a DLL from using a pointer
  passed to it from user-space!

- extended 5.5

- CURLINFO_CONTENT_LENGTH_DOWNLOAD and CURLINFO_CONTENT_LENGTH_UPLOAD documented

- CURLINFO_CONTENT_LENGTH_DOWNLOAD and CURLINFO_CONTENT_LENGTH_UPLOAD were
  added as suggested by Bob Schader

- Ingo Ralf Blum made it compile with the newest cygwin

Version 7.6.1 (1 Feb 2001)

Daniel Stenberg (1 Feb 2001)
- 7.6.1-pre2

- Added support for --enable-debug

- Curl_read() uses ssize_t now

- fixed up the telnet to work (using support from Linus Nielsen)

- curl_read() and Curl_read() now have ssize_t in the last argument

- Added a check for a working getaddrinfo() that is required for the IPv6
  to be considered enabled

- changed order of the range and follow-location checks so that a range-request
  will work even when following a Location:

- new test case

- removed upload.NN files after each test

- test case 33, HTTP PUT resume

Version 7.6.1 (29 Jan 2001)

Daniel Stenberg (29 Jan 2001)
- 7.6-pre1

- Added an extra text about % in POST data after comments from Daniel Marell

- s/to I/do I/

- Added "3.9 How to I use curl in PHP?"

- The PUT stuff is never set! It is set with the UPLOAD...

- HTTP PUT resume now sends Content-Range: headers as I believe the RFC2616
  describes, Bob Schader's research seems to agree.

- upload sets HTTP request to PUT for "HTTP upload"

- the keep-alive issue

- bettersupport for HTTP return codes 300-399

- PUT resume things
  progress meter modified for resume
  POST/GET/Location adjustments

- test case 31 and 32 were added

- Resume is now done with a Content-Range header instead of a Range header if
  the request isn't GET. Presumably, this is how it should be made.

- minor output fix

- Added -d that enables easier protocol/server debug overview (it invokes
  the servers with their -v options)

- added test 29 and 30, HTTP resume and partial download tests

- The progess meter title get an extra output when a resumed transfer is
  taking place

- data->httpreq was not set properly

Version 7.6 (27 Jan 2001)

Daniel Stenberg (27 Jan 2001)
- 7.6

- http upload resume

- moved the symbols talk to the library part, updated slightly to match

- Added a httpreq field in the main struct so that there's one field to check
  for what HTTP request that is being used. The old bit-style fields are still
  in there as well.

- The check for that content-range is received must only be made if we requested
  GET resume. Other resumes are upload-wise and don't care about this header
  in the download stream

- Made it possible to do "upload resume" over HTTP

Version 7.6 (25 Jan 2001)

Daniel Stenberg (25 Jan 2001)
- 7.6-pre4

- timespent is now updated in every call to the progress meter update function

- Rick's and Jeff's stuff

- make the configure script die if select() or socket() is missing

- Added Ingo Ralf Blum

- use this function only once note added

- modified the Curl_ConnectHTTPProxyTunnel proto

- moved curl_read() and curl_write() to sendf.c

- converted to use Curl_read() and Curl_write()

- uses Curl_read() and Curl_write()
  unfolded telwrite() instead of being a separate single function

- use recv()/send() instead of read()/write() with sockets

- sendf is now only Curl_sendf
  Curl_write() and Curl_read() are here

- removed two compiler warnings

- Curl_read() and Curl_write() are now used for reading/writing sockets.
  Some functions changed prototype due to this change as well.

- Get get-ftp-response function is now using Curl_read() for reading from a
  socket. Curl_ConnectHTTPProxyTunnel changed prototype.

- replaced sendf() calls with Curl_sendf()

- Ingo Ralf Blum's cygwin fixes

- Robert Weaver's win32 getenv fix, my added comments in some files

- Added Robert Weaver as contributor

- fixed the comment for 'path'

- added comments all over

- extended the gname field one byte to avoid a possible overflow
  added lots of explaining comments

- Robert Weaver's fix

- generated by autoheader

- ipv6 adjustments

- Enabled support for IPv6-style IP-addresses if ENABLE_IPV6 is set. If it isn't,
  curl will return an error when such an address is used.

- big reorg to make it not exit when it fails, but instead just not do any
  globbing, it makes IPv6 support easier and smoother to add.

- Added 'ipv6 enabled' for ipv6 compiled versions

- Added simple IPv6 recognition support

- Bjrn's progress meter fix, new test cases and ftpserver.pl patch

- Bjrn Stenberg's patch for making the progress meter betterlooking

- the custom reply engine was not inited properly

- test case 121

- Added test case 120, ftp with '-Q -'

- Removed the deprecated -c and -t from the --help output.

- Added 5.5 the CURLOPT_FILE problem on win32, DeYoung provided it!

- Added -g/--globoff description

- Made the complaint on free-twice errors a lot better

- removed URL length restrictions, added a test case

- No more URL length restrictions

- removed MAX_URL_LENGTH, there is no longer any length restrictions on URLs
  anywhere within libcurl

- corrected url memory handling with --globoff

- Added files for test case 28

- --globoff test case

- version 7.6-pre3

- spelling error FPL should be GPL

- edited the portable code section

- brought up-to-date and extended

- Transfer and file renaming

- Transfer is now Curl_Tranfer() and transfer.h is used instead of highlevel.h
  and download.h

- download.[ch] is renamed to transfer.[ch], highlevel.[ch] is history

- download and highlevel are replaced with transfer

- clarified that vcvars32.bat is not part of the curl package

- shortened the "what is libcurl" text

- Added a few more similar tools

- removed an old reference to previous license conditions

- 4.2 and 4.3 were updated

- TELNET was missing in the basic initial description! Updated the language
  in the thread-safe question 5.1 to be more clear.

- I successfully compiled on built curl for StrongARM NetBSD
  Added other known platforms
  Added the faked autoconf and autoheader trick posted about recently

- 7.6-pre2

- -g added, no more space requirements between short options and their parameters

- Added -g, fixed so that short options worked again. My last "merged"fix did
  screw a few things up.

- made short options and their parmaters possible to specify without space
  separation

- made "short options" possible to specify -m20 as well as -m 200.

- added missing newlines to two infof() functions about document dates

- getpass_r() fix for SCO (hopefully)

- version 7.6-pre1

- bugfix for when more -o than URLs is used

- multiple URL adjustments

- Added two tests for multiple URLs (26 + 27)

- Loic's fix that removes the % from the instructions in the bottom

- Additional "docs" about 'make rpms' added by Loic

- Added the curl source-header

- removed FILES from the RPM

- Added source header. Made the prototype not being set if HAVE_GETPASS_R is
  set, as those systems are likely to have it already set in a system header
  and this prototype has proven to cause problems on SCO systems.

- Added Loic Dachary as a contributor after his major makefile session!

- Loic Dachary's updates to get 'make distcheck' work, including running the
  test suite

- krb4.c header file, no source header (yet)

- 'make distcheck' works now

- Had to add this to get 'make distcheck' to run!

- corrected

- distcheck fixes

- Added mprintf #include

- better cleanup when existing due to bad usage

- corrected the separator when using URL globbing

- mostly a dummy

- use .spec.in files instead of plain .spec files

- removed multiple URL, we do that now!

- generated file

- adjusted to work with automake 'make dist'

- we're now using automake to build archives, this file is obsolete

- adjusted to use 'make dist' when building the package

- Loic Dachary's makefile/dist/rpm fixes

- krb4 fix, big symbol renaming action, multiple URL support in the client

- generated

- Multiple URL support added

- generated file, don't CVS it

- multiple uses of -d was wrong documented

- renamed Curl_ to curl_ for the printf() prefixes

- Internal symbols that aren't static are now prefixed with 'Curl_'

Version 7.5.2 (5 Jan 2001)

Daniel Stenberg (5 Jan 2001)
- release commit

- README.libcurl is renamed to LIBCURL

- license updates

- corrected the license section and added a piece about doing patches against
  recent versions of the source

- Added Makefile.dist

- Things to explain to people who get the sources from the CVS repository

- updated license text in headers

- Cut out all changes from 1999 and earlier. They're now in the CHANGES.0 file
  that is only present in the CVS and won't be included in release archives.

- Changes from 1999 and earlier

- new header

- filled in info what happens if the same options are used multiple times

- new license files

- configure now finds the correct version number even if invoked from outside
  the source-tree

- dual-license fix

- cleanup-commit

- ftp commands are now sent single-write()

- Added -i to allow ingore-patterns to get added

- only add good links as root links
  don't break the loop on root link errors

- ftpsendf() is remade to send the entire command in one write(), as some
  firewalls (like FW-1) seems to dislike split-up writes at times...

- Added '5.4 Does libcurl do Winsock initing on win32 systems?'

- multi doc lib support
  SSL session id support

- include unistd.h if present to prevent compiler warnings on close()

- removed debug output

- analyzes fopen() leaks as well

- Added fopen() and fclose() leak tracking

- updated email and web site

- configure fix, two -O fixes

- fixed a leaked file descriptor when PORT failed

- NTLM details added

- fixed accept() for memory debugging

- changed the return code checker in the quote command send to only fail
  on >= 400 errors

- Added Kermit and link

- added socket() / sclose() checks to the memdebug system

- crawls through a whole site and verifies links

- How do a fetch multiple files with libcurl?

- added include stdio.h for the FILE

- Added a few related RFCs

- removed the config file entry as that has been much improved lately

- points to the curl local copy of the netscape cookie spec
  points to the development site for wget
  reworded some RFC references so that they turn up as links on the converted
  web page better

- fixed a strdup(NULL) error

- Francois Petitjean's solaris core dump fix

- updated the latest added features

- unix style newlines only

- unix-style newlines

- unix style newlines

- Albert Chin-A-Young fixed the SSL option to use LDFLAGS properly

- fixed CURLOPT_COOKIE and added CURLOPT_CRLF

- Added SA_RESTART since (some) HPUX doesn't have that define and it doesn't
  need it

- post 7.5 fixes

- urlglob fix to prevent crashing when -o path is longer than url

- Added the borland makefiles

- uses the PERL variable configure digs up

- changed third argument to size_t to match SCO prototype

- Paul Marquis fixed a 7.4.2-dependency

- Jrn fixed a multiple URL output bug

Version 7.5 (4 Dec 2000)

Daniel Stenberg (4 Dec 2000)
- 7.5-commit

- Craig Davison updated and made it work again!

- Craig Davison fixed the VC++ lines

- Added -version-info and lots of info

- added a typecast to shut up a VC++ warning when converting from long
  to unsigned short

- Craig Davison updated this

- README.curl is now MANUAL

- Added a small note about referer needing to be complete to comply to the
  HTTP spec

- Includes MANUAL instead of README.curl now

- README.curl is renamed to MANUAL

- removed #if 0 sections

- removed #if 0 section

- removed '#if 0' sections

- I'd love to see test cases with submitted patches...

- minor things about the test suite added

- now counts all test cases and presents a counter at the end

- maxredirs

- max-redirs test case data

- free the URL on redirections, this was a previous memory leak

- added maxredirs

- Added max-redirs support (James Griffiths' patch)

- added maxredirs, moved CURL_PROGRESS* defines to src/main.c

- James Griffiths' max-redirs fix

- Added tests/ftpserver.pl

- I rearranged it and added 'make test'

- spell check

- modified for ftp custom commands

- allows simple custom modifications for single test cases

- Added the ftpdN.txt file

- ftp graceful error detection check data

- Added the memdebug include file

- file:// test data

- if the server doesn't output a logfile, the protocol file is not compared
  with it! This makes tests without server (like for file://) smarter.

- modified the --help output to have the passwords within [brackets] as they
  are optional...

- added the new FILETIME stuff

- 7.5-pre3 commit

- multiple URL support? forked?

- adjusted to modified FTP behaviour

- Added a curl-target to make it easier to build from this dir

- added filetime for opt and info

- Added cacert and filetime support

- document time fixes

- Added struct fields to deal with time-of-document

- client_write() proto and defines added

- uses client_write()

- uses client_write() now

- Added the client_write() function

- uses the new client_write() function

- GetLastResponse() modified to return ftp code as integer
  initial modified-time support

- HTTP GET fail silently on HTTP error return

- Added --cacert

- working with the test suite brings things up

- Added --url

- updated the config file section

- Added 5.2 How can I receive all data into a large memory chunk?

- modified to work with printf()s that writes 0x-prefix on %p data

- I run the perl programs with 'perl [script]' instead, to overcome the
  hardcoded-path-in-scripts problem.

- upload check, better ability to specify test cases on the command line

- REST support seems to work
  NLST sends an NLST-looking list
  renamed the upload file

- Added the uploadN.txt description

- FTP test case data

- set rangestringalloc to 0 after the string has been freed to prevent it
  from being freed twice (a NULL free the second time)

- uses the "internal" mprintf() routines for formatted output

- bad directory name extractor fixed, now always free the file and directory
  very early, as that could leak memory before

- curl_unescape() did not stop at the set length properly when %-codes were
  used

- added a command line log that logs all command lines run in the complete
  test run

- FTP test case data

- httpN => protN and some other minor updates

- says nothing if no errors were found

- Added support for verifiedserver that returns a static silly string that
  allows the test script to verify that it is our test server running on the
  particular port

- starts and stops both HTTP and FTP servers now
  checks memanalyze output better
  filters PORT output when doing FTP compares

- removed the twice free_config_all() calls
  made the big config struct local (big . => -> replace)

- added some defensive code around the GetHost()'s third argument result

- GetHost() now sets the third pointer to NULL when the lookup fails, as the
  memory is then freed in the function

- when using PORT, we now free the host name buffer properly

- http* is now prot* since we're about to use other protocols as well

- attempt to use a bad protocol

- NLST does a LIST (a normal unix ftp client 'ls' becomes NLST)
  multiple transfers are supported

- STOR works!

- removed the storenonprintable function as it isn't used anymore

- fancier login text
  removed lots of wasted comments
  cleaned up a little
  STOR doesn't work

- removed the forks, we don't need forking for single-task testing

- runtests.pl -c should be -a

- removed pedantic compiler warnings

- removed two unused variables and added an extra set of parentheses, done
  to remove pedantic compiler warnings

- typecasted the argument to isspace() to int, to remove a pedantic compiler
  warning

- includes http.h for the proxytunnel stuff

- added comment on a variable that is unused on some platforms

- flushes the log handles before fork, now the logs work too!

- QUIT works, and now I can run a unix ftp client against the server and it
  runs pretty good

- CWD runs

- RETR seems to work too

- this is now a working ftp server, both PASV and PORT run fine, LIST works,
  RETR and STORE don't

- changed the comment for URL_MAX_LENGTH

- formfree, config file, --url, more testcases, infinite URL lengths and more

- extremely long URL test

- removed URL size restrictions, dynamically allocates the needed buffer
  size instead

- removed URL size restrictions

- this is the first attempt of a tiny and simple ftp server in perl for curl
  test purposes

- added a description about the memory checks

- no more "leaked" memory when this fails on various kinds of bad usage

- Alexander Kourakos's lowercase environment variable fix

- spell correction resolv => resolve in two error messages

- now supports checks for exit codes and check for memory even when curl
  returns (expected) exit code

- graceful failure test

- output FAILED properly even when -s is used

- updated to the new stdout stuff and the new -a option

- fixed strdup() of a NULL pointer

- now exits and alerts on bad uses of strdup() and free()

- updated to the new stdout file behaviour of runtests.pl

- make test in root now runs make quiet-test in the test dir

- uses stricter output

- better stdout check, full support for memory debug tests

- multiple URL test

- curl_formfree() added

- this has been missing all the time...

- added curl_formfree()

- now includes stdlib.h

- memory leak cleanup campaign

- allows \r \n \t \v in config file parameters within quotes

- config file test

- changed the 'port' field to long to better work with the va_arg() system

- major config file hack, now works a lot better and slightly different
  Added --url to allow URLs to be specified in the config file that way

- moved out the FTP part

- forgot to commit before

- data->err must be used, not stderr

- fixed crash in config file parser

- updated to catch bug 122480

- not printf()ing %s normally for character that weren't isprint() made things
  go weird, had to remove this. I should use trio soon for all the *printf()
  stuff as this is too broken

- 'use strict' compliant
  better complains if there are missing input files for a test case
  explaced exit-calls with returns instead

- proxy authorization test case

- now sorts the test cases when "all" is used

- 'use strict' compliant

- removed some /= 256 that was wrongly left

- added help text on -h

- more decriptions

- removed lots of external program dependencies (for windows compliance)
  added lots of comments
  added -s for short output and made it possible to run specific test cases
  from the command line

- somewhat more functioning FTP

- basic and early ftp support

- logs stderr as well now, which is good if the program crashes, and also
  dumps more information in case curl doesn't return success

- *** empty log message ***

- moved the followlocation field from the http struct to the urldata struct
  since it has to survive http struct deletion

- updated

- converted shell script to perl

- more test case data

- removed the check that prevents -T and -o beinged used simultaneously!

- if the server is already running when the script is started, it now verifies
  that it actually is our test server that runs

- Added space after the Cookie: header keyword

- defaults to run all available test cases in (1 - last) order

- updated test cases

- new pid stuff, more filters, various fixes

- changed pid stuff, made it work with rfc1867 posts and made it work better
  on paths

- more details added

- Jrg updated the list of exported functions

- replaced by a working server!

- uses the new httpd server, runs the tests much faster

- new perl http server that works better

- Chris Faherty fixed a free-twice problem

- updated config file section

- Added empty actions for all: and install:

- The last few days of changes

- test files

- initial checkin

- the tests dir is added

- set type before checking --head size, as the type may cause the server
  to return different sizes

- doing an ftp upload append that was already completed resulted in a
  "hang", it now results in an error instead

- added getpass_r check

- adjusted to the changed getpass_r()

- new interface, updated Angus' license, dependent on HAVE_GETPASS_R

- Venkataramana Mokkapati corrected a cookie parser bug

- haxx.nu => haxx.se

- Added RSAglue/rsaref lib check if the crypto lib is there but the ssl lib
  check fails.

- cleaned up the thread-safe checks into separate functions, added check for
  gethostbyname() in the socket lib as it seems some systems need it

- Added typecast to localtime_r()

- removed the perror() outputs as they did nothing good to us

- getpass_r() is the new getpass name for thread-safe getpass!

- Added T. Bharath to the list of contributors

- Added descriptions for: CURLOPT_PASSWDDATA, CURLOPT_PASSWDFUNCTION,
  CURLOPT_CAINFO and CURLOPT_SSL_VERIFYPEER.

- Added CURLINFO_SSL_VERIFYRESULT

- bugfixes and improvements

- removed bad mirror, added text about source contents (that should be here
  according to the source license)

- new getpass proto and function pointer usage

- modified pgrsTime() to the new functionality

- adjusted the time-keeping function to work better for location following
  requests

- Emmanuel Tychon found a problem when specifying user-name only in a URL
  (and the password entered interactively). This fix also includes proper
  URL-decoding of the user name and password if specified in the URL.

- David Odin (aka DindinX) for MandrakeSoft, tiny example with GTK

- error code fix

- added signal in case sigaction is missing

- adjusted to the new packages dir

- removed, see packages/Linux/RPM

- new package related file

- removed extra comma in the CURLINFO enum typedef

- Added CURLOPT_SSL_VERIFYPEER and CURLOPT_CAINFO

- the verify cert stuff is now added!

- T. Bharath's ssl patch

- typecasted the localtime_r() return code to not make it not warn even if the
  function prototype is missting

- new urldata ssl layout and T. Bharath brought the new SSL cert verify function

- Added section 4.8 I found a bug and did some minor cosmetics

- Added description on how to use the newly supported multiple -d options

- Added sigaction check

- post 7.4.1 changes

- removed old unused getpass() leftovers

- Georg Horn provided a fix for the timeout signal stuff. Finally the timeout
  switch should work under most unixes (requires sigaction())

- removed getpass-check since getpass() is no longer being used

- renamed getpass() to my_getpass() and it is now thread-safe and should
  disable passwd-echoing on win32 (supplied by Bjrn Stenberg)

- Kevin Roth's bugreport with config files containing '-v defaulturl' is now
  fixed

- Kevin P Roth's idea of supporting multiple -d options was turned into reality

- Replaced the former bug report email address with the new curl-bug@haxx.se

- Added a few ideas

- tiny spell correction

- compiles on Linux now

- the configure script dynamically gets the version from the include file now
  which lets the maketgz skip updating the configure.in file

- remote_port used in Host: headers only when non-default

- made the speedcheck actually work again

Version 7.4.1 (16 Oct 2000)

Daniel Stenberg (16 Oct 2000)
- 7.4.1 commit

- pre5 and pre6 fixes

- Added lib/libcurl.def for win32 DLL creations

- just removed some example lines in the top comment

- Jrn added glob_cleanup()

- sprintf() => snprintf()

- updated to better reflect reality

- make curl capable of using the mozilla SSL engine

- free the URL string if that was allocated

- free the FTP struct already in the _done() function

- memory leak adjusts

- removed the header that confuses PHP

- added the bool typedef, moved here from curl/curl.h

- bool typedef fix

- use this to analyze the memory debug logs MALLOCDEBUG will generate

- just too many to mention

- Added commented MALLOCDEBUG stuff for memory debugging

- I commented the -DMALLOCDEBUG flag to make it easier to add

- added memory debugging support

- added memory debugging include file

- added for memory leak debugging etc

- GetHost() did not properly assign the third argument pointer!

- corrected the --longoption parser

- removed include "writeout.h"

- Jrg's updated makefile

- the --interface code doesn't work on win32 and is #ifndef WIN32 now

- added for the win32 version

- moved the src/config.h stuff to the bottom, as automake were adding include
  stuff to ../src in the lib directory's Makefile.in otherwise!

- HTTP resume fix, now the range pointer may be allocated

- filled in more information on the options

- size_request and size_header added to the -w description

- -w supports size_header and size_request

- counts header and request size

- Added Jason S. Priebe as contributor

- documented writeinfo as removed in 7.4

- introduced in libcurl 7.4

- removed writeinfo stuff

- add_buffer_send() free()d the buffer *before* it was used! :-O

- added the new upload_bufsize to the connectdata struct

- inits the upload_bufsize at connect time

- new upload-buffer size design that starts with a smallish buffer and increases
  its size in case of need

- introduced the new add_buffer() concept that makes the HTTP request to get
  sent in only one shot

- Added curl_easy_getinfo.3

- added a small suggestion on how to get the curl man page in text format
  without nroff

- Uses the new "client-side" writeout function

- removed writeout.[ch] and added getinfo.c

- Added writeout.c

- writeout.[ch] added in src/

- moved out from the library and put here, uses the new curl_easy_getinfo()

- adjusted for curl_easy_getinfo

- getinfo.c replaces the former writeout.c

- Added curl_easy_getinfo()

- #include <malloc.h> was removed, it causes warnings on openbsd

- include base64.h instead of base64_krb.h

Version 7.3 (28 Sep 2000)

Daniel Stenberg (28 Sep 2000)
- 7.3 commit

- replaced the old base64 stuff with the new ones

- more configure options explained

- a --krb4 usage example added

- added krb4-info

- Added strlcpy() since it turns out some krb4-implementations don't include
  their own, even if mine did!

- moved the RAND_status() and RAND_screen() checks to the openssl section
  added strlcpy() check in the krb4 section

- CRYPTO_free() of course, it makes it run with previous openssl versions too

- The last week's changes

- -c and -t is no longer prefered

- corrected curl_write() for kerberos

- Martin Hedenfalk added sec_fflush_fd()

- krb4 transfers get a sec_fflush_fd() to get uploads to work

- a single cookie does not require a trailing semicolon anymore

- No longer uses Free() as that was removed from OpenSSL with 0.9.6

- corrected bad data re-use and buffer problems

- Added CURLOPT_KRB4LEVEL

- updated

- added docs/examples
  now only includes specified files in src/ as I tend to store debug-source files
  in there as well!

- Added krb4 support for libcurl 7.3

- now reports "krb4 enabled" is that's so

- krb4 fields structs and fields added

- krb4 support
  new GetHost() usage
  new base64 encoder usage

- adjusted to support krb4

- Uses the new interface to ssend() and the base64 encoder

- GetHost() changed function arguments

- krb4 support added, new GetHost() usage

- new interface to the base64 encoder

- new for kerberos support

- new libcurl example code stuff

- Stephen Kick's --interface was added

- Stephen Kick's interface fixes

- Stephen Kick added CURLOPT_INTERFACE

- GetHost() now should return NULL when it fails, even for Tru64 unix

- Added --disable-shared info and updated the 'make install' section.

- ftp through http proxy tunnel is now implemented

- Added PowerPC and sparc linux

- Updated to be accurate with the new proxytunnel option

- proxy tunnel update

- spell corrections, changed some wording

- Added curl.linuxworx.com.au as an "official" mirror

- proxytunnel added

- bugfixed the proxytunnel

- -p/--proxytunnel was added

- more "anything through http proxy tunnel" fixes

- Added HTTPPROXYTUNNEL

- introduced 'tunnel through http proxy' for ftp

- updated the show-off list

- file:// fix that prevents name lookup and sets no-upload and no-download

- C++ adjusted

- made -I (size info only) work for ftp again

- in unescape(), '+' is now only converted to space after the first '?'

- patched 7.2 configure to work!

Version 7.2 (30 Aug 2000)

Daniel Stenberg (30 Aug 2000)
- 7.2 cleanup commit

- 7.2

- 7.2 commit

- renamed to acinclude.m4 to get included by aclocal automatically

- Added Albert to the list contributors. The question is why I hadn't done
  that a long time ago...!

- added acinclude.m4

- largefile.m4 was turned into acinclude.m4

- --data-binary and family ;-)

- Jan Schmidt supplied an update

- Inreased buffer size for the Linux gethostbyname_r() test

- Added CURLOPT_POSTFIELDSIZE

- new binary post details

- moved include setup.h

- include config.h first

- #include "setup.h" moved first of all includes

- inet_ntoa_r() usage made more portable

- removed the AC_TRY_RUN complaints

- hostname and large file support added

- Bjorn Reese helped me update the license section

- Fixed name problems, updated FAQ, -d post problem found

- Albert's fixes

- Albert Chin-A-Young's fixes

Version 7.1.1 (21 Aug 2000)

Daniel Stenberg (21 Aug 2000)
- 7.1.1 commit

- 7.1.1 cleanup commit

- increased the buffer size used for name lookups

- Fred Noz fixed the gethostbyaddr_() call

- the gethostbyname_r() usage was improved by Fred Noz

- removed the vprintf check, we have our own internal anyway
  gethostbyname_r arg-number checks no longer made if there isn't any
  gethostbyname_r function!
  aborts the configure if socket() is absent

- removed HAVE_VPRINTF dependence

- removed the HAVE_VPRINTF check

- major update

- Added another config to the autoconf bug effect

- the latest writeout bugfix

- made Writeout() capable of getting called repeatedly

- minor corrections

- Linux name resolving problem fixed with larger name-buffer

- Added TheArtOfHttpScripting

- tutorial kind of document

- Made it possible to replace the Content-Type: and Content-Length: headers
  curl issues when doing a regular HTTP post. This should not be taken light-
  heartedly though. Replacing them might get you into trouble!

- allow zero length user names for http

- updated with the latest thread-safe function stuff

- brand new gethostbyname_r() and gethostbyaddr_r() checks that now detects
  the AIX-styles as well.
  I added --disable-thread to allow a user to disable all testing for
  thread-safe functions being present and thus go with the good old style
  functions. This might become handy if (when?) I add a bug in the threaded
  code, like the AIX code I have now but can't test!

- moved an include file further up to make AIX 3 more happy

- Fixed to use the new HAVE_GETHOSTBYxxxx_R_x defines, now trying to support
  the AIX-style as well. The AIX-stuff is *NOT* verified to work.

- corrected to use the libtool libraries instead of the forced-static ones

- updated

- moved the #define strequal() since they're now true functions in libcurl

- Added the strequal() prototypes here

- mr Khristophorov added support for lame web servers sending bad range
  headers...

- big last-beta (?) cleanup commit

- The installed header files were moved from this to include/curl/Makefile.am

- added to enable include file install

- generated from the newly edited getdate.y that now supports a thread-safe
  localtime() call

- made urlfree static, added (void) in front of one of the SSL calls. I did
  these changes when trying to run lclint on the curl code.

- Replacing one of the internal headers with one that has no contents will now
  completely disable that header to get sent.

- added localtime_r()

- for install and more

- libtool stuff added

- Added two libtool files, is ltmain.sh really necessary?

- updated my email

- Added [:port] to the -x description for --help

- clear the httproxy bit on cleanup if the allocproxy bit was set

- corrected the Host: header's port number

- ASCII FTP download
  -F improvements
  FTP response timeouts
  HTTP user+password to same host only
  libtool

- another day, another contributor

- removed libtool, added pointer to the sourceforge task list

- Added docs/Makefile*

- libtool adjustments

- they're generated, they don't belong here

- Added Torsten Foertsch's changes to the -F description and his name to the
  list of contributors.

- uses the new curl_close function to clean up the http-specific auth_host

- Added http_close()

- uses auth_host to only send user+password to that particular site, usable if
  Location: following takes "us" to other servers that should not get the
  user and password

- set a bit when a Location: is followed to allow code to act differently
  on those occations

- curl_close is a new function pointer that can be set to a protocol-specific
  function to get called in the curl_close() function for cleanup
  auth_host is added to store the original (first) host name used

- Torsten Foertsch's improvements

- tiny adjustments to set the start-time before the curl_connect() is called to
  allow the connect function to better deal with timeouts, as was just added
  to ftp

- The "get ftp command response" function now uses select() on the socket and
  thus enables timeout if the server doesn't respond within the proper time.

- A range of things done yesterday

- Added CURLOPT_PROXYPORT

- Added CURLOPT_PROXYPORT, also added some more clarifications about the
  CURLOPT_PROXY option.

- Auto referer and a minor netrc fix

- Added some logic that now prevents multiple conflicting HTTP request types
  to get specified with the options.

- Added proxyport

- Added CURLOPT_PROXYPORT support
  Added a missing free() in curl_disconnect()
  Made (https) connect errors abort better and earlier

- re-added the check for BOTH nsl and socket libs

- The Host: header now includes the port number if not default HTTP

- Code 250 is okay as well as the previous 226-code after a successful file
  transfer

- haxx.nu => haxx.se

- FTP bug fix
  new referer magic tricks!

- Added auto and free referer fields to the UrlData struct

- Added AUTOREFERER

- autoreferer added, switches off POST on location: following

- Rich Gray fixed the PORT command line with the missing \r!

- progress meter/bar changes

- removed the CURLOPT_PROGRESSMODE option

- PROGRESSMODE is history

- pretty big changes when the -# progress bar was moved in here from the
  lib/progess.c file, and is now used with the new progress callback function

- mode was replaced with callback in the progress struct

- progress.mode replaced with progress.callback

- removed pgrsMode()

- removed lots of #if 0'ed code
  removed the "mode" concept
  moved all #-stuff to the client

- Added pgrsStartNow() on the appropriate place

- when failing to write to a socket, we now bail out better
  I also use typecasted size_t now for systems with unsigned such ones

- removed the last \r\n\r\n bytes
  now returns -1 from FormReader() when the last form data has been read!

- POST fix

- Added #include <string.h>

- correct the POST workings. Tim Tassonis reported.

- the 7.0.6beta fixes

- the -W and -g stuff needn't be here by default

- Added a define in the Mingw32 makefiles to allow parts of the config-win32
  files depend on that as well. It turned out Borland has no unistd.h file
  either, only mingw32 seems to use that.

- several minor fixes as pointed out by Bjrn Stenberg

- bad HAVE_STRICMP usage found by Bjrn Stenberg

- added some more text about libcurl using

- edited the contributor list
  changed ftp-ascii to use-ascii and its explanation was fixed

- Added #include <fcntl.h> required by the setmode() for win32

- new binary stdout approach for win32 systems

- Added GETHOSTBYNAME_R_NARGS and GETHOSTBYADDR_R_NARGS

- updated to be more valid for version 7 workings

- added a few RFCs to the list

- Luong Dinh Dung's comments adjusted

- free-twice problem corrected

- resources + readme.win32

- edited it to look better when HTML'ified

- Added the docs/README.win32 file

- haxx.nu turns haxx.se

- mucho updated with lots of links to various odd stuff

- Some notes about life with curl in the win32 world

- the recent mocking

- use top_dir instead of ../

- Added progress callback info

- lower casing getenv and formparse
  added the progress function callback and data pointer
  added the callback typedefs

- added progress callback stuff, changed the callback typedefs to be public

- modified

- Added description

- edited to look better after the txt2html convertion

- updated with more examples

- using the new formparse, the new getenv, using the new headers struct and
  clean up the headers better

- curl_getenv() is now lowercase

- the curl_formparse() function was turned lowercase

- struct HttpHeader changed to struct curl_slist

- Added text about how to convert certificates to PEM format

- minor edits

- Added many specific questions

- Edited, cleaned up

- updated

- curl_formparse() man page

- Added description

- changed the httppost struct into curl_slist struct

- added description

- Added description

- added description

- man page for this function already in used by the command line tool!

- David LeBlanc corrected one of my mistakes

- Adjusted to the GETHOSTBYADDR_R_NARGS style

- Added GETHOSTBYADDR_R_NARGS and GETHOSTBYNAME_R_NARGS

- Added checks for number of parameters to the functions gethostbyname_r()
  and gethostbyaddr_r()

- pre-release commit

- modified to the new curl_getenv() style

- made getenv() more threadsafe for win32

- updated

- had to add this since it was missing in the system includes!

- David LeBlanc's fixes!

- generated with bison 1.28 which removes the alloca() mess!

- URLGET_ERROR_SIZE is now CURL_ERROR_SIZE

- silly mistake corrected

- added the new man pages docs/*.3

- updated

- more documented stuff

- fixed the CURL_ERROR_SIZE and renamed a urlget() leftover

- Added a list of stuff to do for version 7

- AIX wants sys/time.h included

- added sys/time.h check

- fixed the new path to the curl man page

- fixed the new docs path

- now splits the text into several puts() calls

- Jrn's fixes mentioned

- moved many docs to the new docs/ dir

- more changes! ;-)

- slightly adjusted

- oops

- adjusted to work even without RTLD_GLOBAL defined

- libcurl v7 adjustments

- moved here from the root directory

- moved to the new docs/ directory

- Jrn's fixes

- Jrt Hartroth's updates

- moved here from the newlib branch

- unused

- moved here from the newlib branch

- files moved to main branch from the newlib branch

- moved the win32 init stuff here from the lib

- "Will you write a script for me getting ZZZ from YYY?" added

- Added BOTH nsl+socket lib check
  Added HOST and TARGET checks
  Added automatic update of the *spec.in files (Linux RPM stuff)

- the last days' changes

- string checks added

- lots of stuff

- Removed all #ifdef GLOBURL lines, we always use them

- Support for systems where RTLD_LAZY_GLOBAL is defined instead of
  RTLD_GLOBAL and RTLD_LAZY separately.

- changed the glob_url() call, after Janne Johansson's buffer overflow report

- configure having problem with openssl

- added a missing prototype, removed unused code

- now uses a tiny bit of the new library interface!

- Added Darwin to the list of platforms

- updated the ports list

- Added the *spec.in files

- new files to generate .spec files automatically

- now sends user agent to all requests that go through a http proxy

- Improved the looks of the progress meter when the file size is between
  9999 KB and 100 MB since it then can display the size as XX.X MB instead of
  just XX as before.

- some rpm build improvements
  adjusted progress bar
  user agent sent when talking non-http through a http proxy

- Marco's fix got adjusted

- two location problems and one OS/2 patch

- Marco G. Salvagno's OS/2 patch is applied

- Marco G. Salvagno's patch applied

- added INTERNALS

- describes internal code design

- James Atwill correctly pointed out that curl didn't follow Location: headers
  properly when the new URL is an absolute one to a different port than the
  first URL...

- Added some more explanatory text about HTTP posts

- "H. Daphne Luong" <daphne@tellme.com> pointed out that curl cannot destroy
  the proxy server data internally as it did, since when doing a location:
  following it needs the proxy server string several times.

- spelling errors corrected

- download.c, configure, VC fix and OS/2 fix

- yet another tiny OS/2 fix

- in case the select() returns -1 and errno is EINTR, it should not abort
  the download (MT-adjustment)

- Wham Bang's fixes

- Troy Engel's latest updates

- HAVE_UNAME was bad
  HAVE_UNISTD_H is now not set if VC6 is defined

- Added a question about other SSL libraries

- just a little reformatted

- removed the double BSD install check

Version 6.5.2 (21 Mar 2000)

Daniel Stenberg (21 Mar 2000)
- 6.5.2 release commit

Version 6.5.1 (21 Mar 2000)

Daniel Stenberg (21 Mar 2000)
- release commit time

- curl_unescape() update

- reformatted, added a custom FTP command question

- changed the URL to use http:// instead

- curl_unescape() could make a buffer overflow

- openbsd complaints fixes
  http_code in -w fix
  MS VC++ fixes
  documentation updates
  -D update
  OS/2 port

- modified to look better when man2html'ified

- generated from the new getdate.y file

- commented the CFLAGS that was left in here by mistake

- contributor Marco G. Salvagno added

- Marco G. Salvagno's paragraph about compiling for OS/2 is added

- Marco G. Salvagno's OS/2 changes

- Marco G. Salvagno's OS/2 fixes

- updated to compile 6.5

- how to report curl bugs!

- corrected the CVS info

- the --dump-header option now only creates the file when it needs to, not any
  sooner

- Added the forgotten http_code!

- makes use of HAVE_RAND_SCREEN instead of WIN32 for using RAND_screen()

- removed an unnecessary #ifdef WIN32

- if stdlib.h exists, malloc.h should not be included (thus stop OpenBSD
  complaints)

- cleaned up some #ifdef mess, now uses data->fwrite() to write headers

- now writers the headers with the data->fwrite() function as well

- as Pascal Gaudette pointed out, the ldap files were missing

- tiny fixes

- Added checks for RAND_screen, malloc.h and stdlib.h

- RAND_SCREEN is only available for win32 SSL users

- updates and fixes

Version 6.5 (14 Mar 2000)

Daniel Stenberg (14 Mar 2000)
- 6.5 cleanup commit

- Added HAVE_STRDUP

- Added #define HAVE_SETVBUF 1

- The changes of today.

- put back the perl binary check

- now sends cookies space separated to better work with IIS4.0 servers

- corrected spelling errors, improved look for the ranges part

- Ultrix fixes, openssl fix, docs, removed perl

- corrected a spelling mistake

- Added the WRITEINFO tag

- Added -N, added a strdup() function for systems without it. suggested for
  Ultrix by Damien Adant <dams@usa.net>.

- sys/select.h and gettimeofday() adjusted

- progress meter text updated to the new display

- added -N and -w descriptions

- Added checks for setvbuf(), RAND_set() and removed the perl stuff

- removed perl/

- renamed some variables and made \r work

- Adjusted to run properly with OpenSSL 0.9.5.

- Damien Adant <dams@usa.net> suggestion to make it compile on Ultrix

- rephrased. -D writes a file, -b reads one.

- made -w support -w@[file] and -w@- (for stdin)

- describes the latest commited changes

- new variables added

- Added more variables to the progress struct targeted for statistics output

- Added two new time stamp places

- added prototype and defines for pgrsTime()

- added pgrsTime() to store various time stamps for the -w option

- store the pretransfer time
  store the http code

- Applied Jrn's patch

- Added writeout.[ch]

- Supports the -w/--write-out feature

- new writeout support added

- new fields in the progress struct

- Added writeout stuff

- moved a few more variables to the progress struct and I had some problems
  on how to approach the -# progress bar in the new style transfers...

- Added the http post resume thing and the new SSL FTP online draft

- tonight's changes, the progress bar and the new -w option

- removed upload.[ch] from here

- Progress meter work

- Starting working on the '-w/--write-out' output format specifier, although
  I didn't get that far! ;-)
  I also made curl *not* prevent the progress meter even if the output is a tty
  when your uploading (it is still done when downloading though). A HTTP POST
  is in that sense seen as an upload. It seemed so confusing that ftp upload
  doesn't display a progress meter by default.

- added #include <timeval.h> on Jrn's advice
  added lastshow to the progress struct

- Now starts the progress meter timer at once!

- Jrn Hartroth adjusted for the mingw32 compiler

- re-arranged the progress meter columns, made the hour-field two characters
  wide and made the pgrsUpdate() make a final meter update so that the final
  values actually are displayed last.

- modified the progress meter usage

- Added Ron, Paul and Ellis to the list of contributors

- added support for -b@[file name] and -b@- (for stdin) for consistency

- The last week's (or so) changes

- all new progress stuff on the way in

- upload.[ch] are removed

- new stuff for the new progress meter

- newly generated from the new getdate.y

- uses the new progress functions

- made upload/download work better simultaneously
  now uses the new progress meter functions

- updated to use the new set of progress-functions

- Ellis Pritchard <ellis@citria.com> made it work for MacOS X

- This should no longer send empty cookies to the server

- * Made '-' as file name to read cookies from equal stdin.
  * I hope I finally removed 'empty cookies' crash

- - Paul Marquis <pmarquis@iname.com> fixed the config file parsing of curl to
    deal with any-length lines, removing the previous limit of 4K.

- committed the changes of yesterday, now from my new linux host at home

- Ron Zapp <rzapper@yahoo.com> corrected a sprintf() problem

- removed include upload.h

- removed #include "upload.h"

- Added some RFC2109 support

- cookie-update

- tiny spelling mistake

- upload.[ch] are history

- Adjusted to use the new Transfer() instead of the old Download()

- Download() was merged with Upload() and now they both form the new Transfer()
  function that deals with both directions at the same time.

- Upload() and Download() are now Transfer()!

- status update before night-time

- Cleared some confusions around -y and -Y as pointed out to me by
  M Travis Obenhaus <Travis.Obenhaus@aud.alcatel.com>

- the latest changes

- fixed the progressmode selector
  sorted out the -y and -Y confusion in the help texts

- removed the port number reset again, it is already being made when the
  location: URL turns out to be an "absolute" one and that should be the only
  time it is required.

- assume 79 columns instead of 80 in case we don't know, to better work on
  win32 systems

-  - Oskar Liljeblad <osk@hem.passagen.se> pointed out and corrected a problem
     in the Location: following system that made curl following a location: to a
     different protocol to fail.

- Added the post transfer quote feature

- Added the config-win32.h in the tree root, which is a config.h file that should
  include all the config lines that is valid for win32-machines!

- Joern.Hartroth@telekom.de rightfully suggested two #include include fixes

- another generated file

- they're generated from the .am file

- Adjusted to the new progress bar output

- I removed the Makefile. Since it is generated, it always gets changed and I
  don't want to keep commiting it!

- Made the progress bar cooler, with ideas from Bjrn Stenberg <bjorn@haxx.nu>

- changed a tiny comment

- removed generated files

- more removals

- fixes

- cleanup

- Cleaning up

- syncing with local edit

- removed junk files

- Initial revision
